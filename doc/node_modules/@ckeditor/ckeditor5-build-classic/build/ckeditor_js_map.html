<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>ckeditor.js.map - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../../../";
  var index_rel_prefix = "../../../../";
</script>

<script src="../../../../js/jquery.js"></script>
<script src="../../../../js/darkfish.js"></script>

<link href="../../../../css/fonts.css" rel="stylesheet">
<link href="../../../../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../../../table_of_contents.html#pages">Pages</a>
    <a href="../../../../table_of_contents.html#classes">Classes</a>
    <a href="../../../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="../../../../Gemfile.html">Gemfile</a>
  
    <li><a href="../../../../Gemfile_lock.html">Gemfile.lock</a>
  
    <li><a href="../../../../README_md.html">README</a>
  
    <li><a href="../../../../Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../app/assets/config/manifest_js.html">manifest.js</a>
  
    <li><a href="../../../../app/assets/javascripts/accounts_coffee.html">accounts.coffee</a>
  
    <li><a href="../../../../app/assets/javascripts/application_js.html">application.js</a>
  
    <li><a href="../../../../app/assets/javascripts/cable_js.html">cable.js</a>
  
    <li><a href="../../../../app/assets/javascripts/home_coffee.html">home.coffee</a>
  
    <li><a href="../../../../app/assets/javascripts/users_coffee.html">users.coffee</a>
  
    <li><a href="../../../../app/assets/javascripts/verify_coffee.html">verify.coffee</a>
  
    <li><a href="../../../../app/assets/stylesheets/accounts_scss.html">accounts.scss</a>
  
    <li><a href="../../../../app/assets/stylesheets/application_css.html">application.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/home_scss.html">home.scss</a>
  
    <li><a href="../../../../app/assets/stylesheets/scaffolds_scss.html">scaffolds.scss</a>
  
    <li><a href="../../../../app/assets/stylesheets/users_scss.html">users.scss</a>
  
    <li><a href="../../../../app/assets/stylesheets/verify_scss.html">verify.scss</a>
  
    <li><a href="../../../../app/views/accounts/_account_json_jbuilder.html">_account.json.jbuilder</a>
  
    <li><a href="../../../../app/views/accounts/index_json_jbuilder.html">index.json.jbuilder</a>
  
    <li><a href="../../../../app/views/accounts/show_json_jbuilder.html">show.json.jbuilder</a>
  
    <li><a href="../../../../app/views/users/_user_json_jbuilder.html">_user.json.jbuilder</a>
  
    <li><a href="../../../../app/views/users/index_json_jbuilder.html">index.json.jbuilder</a>
  
    <li><a href="../../../../app/views/users/show_json_jbuilder.html">show.json.jbuilder</a>
  
    <li><a href="../../../../config_ru.html">config.ru</a>
  
    <li><a href="../../../../config/credentials_yml_enc.html">credentials.yml.enc</a>
  
    <li><a href="../../../../config/master_key.html">master.key</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/LICENSE_md.html">LICENSE</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/README_md.html">README</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/ckeditor_js.html">ckeditor.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/ckeditor_js_map.html">ckeditor.js.map</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/ar_js.html">ar.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/ast_js.html">ast.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/bg_js.html">bg.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/cs_js.html">cs.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/da_js.html">da.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/de_js.html">de.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/el_js.html">el.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/en-au_js.html">en-au.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/eo_js.html">eo.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/es_js.html">es.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/et_js.html">et.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/eu_js.html">eu.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/fi_js.html">fi.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/fr_js.html">fr.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/gl_js.html">gl.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/gu_js.html">gu.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/hr_js.html">hr.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/hu_js.html">hu.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/it_js.html">it.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/ja_js.html">ja.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/km_js.html">km.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/kn_js.html">kn.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/ko_js.html">ko.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/ku_js.html">ku.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/nb_js.html">nb.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/ne_js.html">ne.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/nl_js.html">nl.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/oc_js.html">oc.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/pl_js.html">pl.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/pt-br_js.html">pt-br.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/pt_js.html">pt.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/ro_js.html">ro.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/ru_js.html">ru.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/si_js.html">si.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/sk_js.html">sk.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/sq_js.html">sq.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/sv_js.html">sv.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/tr_js.html">tr.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/tt_js.html">tt.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/ug_js.html">ug.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/uk_js.html">uk.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/zh-cn_js.html">zh-cn.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/build/translations/zh_js.html">zh.js</a>
  
    <li><a href="../../../../node_modules/@ckeditor/ckeditor5-build-classic/package_json.html">package.json</a>
  
    <li><a href="../../../../node_modules/admin-lte/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../../node_modules/admin-lte/README_md.html">README</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/js/AdminLTE_js.html">AdminLTE.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/js/ControlSidebar_js.html">ControlSidebar.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/js/Layout_js.html">Layout.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/js/PushMenu_js.html">PushMenu.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/js/SiteSearch_js.html">SiteSearch.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/js/Treeview_js.html">Treeview.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/js/Widget_js.html">Widget.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/npm/Plugins_js.html">Plugins.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/npm/Publish_js.html">Publish.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/AdminLTE-raw_scss.html">AdminLTE-raw.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/AdminLTE_scss.html">AdminLTE.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_404_500_errors_scss.html">_404_500_errors.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_alerts_scss.html">_alerts.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_bootstrap-variables_scss.html">_bootstrap-variables.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_brand_scss.html">_brand.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_buttons_scss.html">_buttons.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_callout_scss.html">_callout.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_cards_scss.html">_cards.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_carousel_scss.html">_carousel.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_control-sidebar_scss.html">_control-sidebar.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_direct-chat_scss.html">_direct-chat.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_dropdown_scss.html">_dropdown.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_elevation_scss.html">_elevation.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_forms_scss.html">_forms.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_fullcalendar_scss.html">_fullcalendar.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_info-box_scss.html">_info-box.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_invoice_scss.html">_invoice.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_labels_scss.html">_labels.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_layout_scss.html">_layout.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_lockscreen_scss.html">_lockscreen.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_login_and_register_scss.html">_login_and_register.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_mailbox_scss.html">_mailbox.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_main-header_scss.html">_main-header.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_main-sidebar_scss.html">_main-sidebar.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_miscellaneous_scss.html">_miscellaneous.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_mixins_scss.html">_mixins.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_navs_scss.html">_navs.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_print_scss.html">_print.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_products_scss.html">_products.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_profile_scss.html">_profile.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_progress-bars_scss.html">_progress-bars.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_select2_scss.html">_select2.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_sidebar-mini_scss.html">_sidebar-mini.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_small-box_scss.html">_small-box.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_social-widgets_scss.html">_social-widgets.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_table_scss.html">_table.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_text_scss.html">_text.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_timeline_scss.html">_timeline.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_users-list_scss.html">_users-list.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/build/scss/_variables_scss.html">_variables.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/composer_json.html">composer.json</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/css/adminlte_css.html">adminlte.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/css/adminlte_css_map.html">adminlte.css.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/css/adminlte_min_css.html">adminlte.min.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/adminlte_js.html">adminlte.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/adminlte_js_map.html">adminlte.js.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/adminlte_min_js.html">adminlte.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/adminlte_min_js_map.html">adminlte.min.js.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/demo_js.html">demo.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/pages/dashboard_js.html">dashboard.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/pages/dashboard2_js.html">dashboard2.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/pages/dashboard3_js.html">dashboard3.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/bootstrap/css/bootstrap-grid_css.html">bootstrap-grid.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/bootstrap/css/bootstrap-grid_css_map.html">bootstrap-grid.css.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/bootstrap/css/bootstrap-grid_min_css.html">bootstrap-grid.min.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/bootstrap/css/bootstrap-grid_min_css_map.html">bootstrap-grid.min.css.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/bootstrap/css/bootstrap-reboot_css.html">bootstrap-reboot.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/bootstrap/css/bootstrap-reboot_css_map.html">bootstrap-reboot.css.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/bootstrap/css/bootstrap-reboot_min_css.html">bootstrap-reboot.min.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/bootstrap/css/bootstrap-reboot_min_css_map.html">bootstrap-reboot.min.css.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/bootstrap/css/bootstrap_css.html">bootstrap.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/bootstrap/css/bootstrap_css_map.html">bootstrap.css.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/bootstrap/css/bootstrap_min_css.html">bootstrap.min.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/bootstrap/css/bootstrap_min_css_map.html">bootstrap.min.css.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/bootstrap/js/bootstrap_bundle_js.html">bootstrap.bundle.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/bootstrap/js/bootstrap_bundle_js_map.html">bootstrap.bundle.js.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/bootstrap/js/bootstrap_bundle_min_js.html">bootstrap.bundle.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/bootstrap/js/bootstrap_bundle_min_js_map.html">bootstrap.bundle.min.js.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/bootstrap/js/bootstrap_js.html">bootstrap.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/bootstrap/js/bootstrap_js_map.html">bootstrap.js.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/bootstrap/js/bootstrap_min_js.html">bootstrap.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/bootstrap/js/bootstrap_min_js_map.html">bootstrap.min.js.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chart_js.html">chart.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chart_js2.html">chart.js2</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/Chart_bundle_js.html">Chart.bundle.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/Chart_bundle_min_js.html">Chart.bundle.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/Chart_js.html">Chart.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/Chart_min_js.html">Chart.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/axes/cartesian/category_html.html">category.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/axes/cartesian/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/axes/cartesian/linear_html.html">linear.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/axes/cartesian/logarithmic_html.html">logarithmic.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/axes/cartesian/time_html.html">time.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/axes/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/axes/labelling_html.html">labelling.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/axes/radial/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/axes/radial/linear_html.html">linear.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/axes/styling_html.html">styling.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/charts/area_html.html">area.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/charts/bar_html.html">bar.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/charts/bubble_html.html">bubble.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/charts/doughnut_html.html">doughnut.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/charts/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/charts/line_html.html">line.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/charts/mixed_html.html">mixed.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/charts/polar_html.html">polar.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/charts/radar_html.html">radar.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/charts/scatter_html.html">scatter.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/configuration/animations_html.html">animations.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/configuration/elements_html.html">elements.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/configuration/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/configuration/layout_html.html">layout.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/configuration/legend_html.html">legend.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/configuration/title_html.html">title.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/configuration/tooltip_html.html">tooltip.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/developers/api_html.html">api.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/developers/axes_html.html">axes.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/developers/charts_html.html">charts.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/developers/contributing_html.html">contributing.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/developers/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/developers/plugins_html.html">plugins.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/developers/updates_html.html">updates.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/general/colors_html.html">colors.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/general/device-pixel-ratio_md.html">device-pixel-ratio</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/general/fonts_html.html">fonts.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/general/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/general/interactions/events_html.html">events.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/general/interactions/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/general/interactions/modes_html.html">modes.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/general/options_html.html">options.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/general/responsive_html.html">responsive.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/getting-started/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/getting-started/installation_html.html">installation.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/getting-started/integration_html.html">integration.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/getting-started/usage_html.html">usage.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/gitbook/gitbook-plugin-anchorjs/anchor-style_js.html">anchor-style.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/gitbook/gitbook-plugin-chartjs/Chart_bundle_js.html">Chart.bundle.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/gitbook/gitbook-plugin-chartjs/Chart_bundle_min_js.html">Chart.bundle.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/gitbook/gitbook-plugin-chartjs/Chart_js.html">Chart.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/gitbook/gitbook-plugin-chartjs/Chart_min_js.html">Chart.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/gitbook/gitbook-plugin-chartjs/chartjs-plugin-deferred_js.html">chartjs-plugin-deferred.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/gitbook/gitbook-plugin-chartjs/chartjs-plugin-deferred_min_js.html">chartjs-plugin-deferred.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/gitbook/gitbook-plugin-chartjs/style_css.html">style.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/gitbook/gitbook-plugin-fontsettings/fontsettings_js.html">fontsettings.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/gitbook/gitbook-plugin-fontsettings/website_css.html">website.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/gitbook/gitbook-plugin-ga/plugin_js.html">plugin.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/gitbook/gitbook-plugin-highlight/ebook_css.html">ebook.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/gitbook/gitbook-plugin-highlight/website_css.html">website.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/gitbook/gitbook-plugin-search-plus/jquery_mark_min_js.html">jquery.mark.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/gitbook/gitbook-plugin-search-plus/search_css.html">search.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/gitbook/gitbook-plugin-search-plus/search_js.html">search.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/gitbook/gitbook-plugin-sharing/buttons_js.html">buttons.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/gitbook/gitbook_js.html">gitbook.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/gitbook/style_css.html">style.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/gitbook/theme_js.html">theme.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/notes/comparison_html.html">comparison.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/notes/extensions_html.html">extensions.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/notes/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/notes/license_html.html">license.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/search_plus_index_json.html">search_plus_index.json</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/chartjs2/docs/style_css.html">style.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/font-awesome/css/font-awesome_css.html">font-awesome.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/font-awesome/css/font-awesome_css_map.html">font-awesome.css.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/font-awesome/css/font-awesome_min_css.html">font-awesome.min.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/font-awesome/fonts/FontAwesome_otf.html">FontAwesome.otf</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/font-awesome/fonts/fontawesome-webfont_eot.html">fontawesome-webfont.eot</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/font-awesome/fonts/fontawesome-webfont_woff.html">fontawesome-webfont.woff</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/font-awesome/fonts/fontawesome-webfont_woff2.html">fontawesome-webfont.woff2</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/jquery/core_js.html">core.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/jquery/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/jquery/jquery_min_js.html">jquery.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/jquery/jquery_min_map.html">jquery.min.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/jquery/jquery_slim_js.html">jquery.slim.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/jquery/jquery_slim_min_js.html">jquery.slim.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/jquery/jquery_slim_min_map.html">jquery.slim.min.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/popper/esm/popper-utils_js.html">popper-utils.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/popper/esm/popper-utils_js_map.html">popper-utils.js.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/popper/esm/popper-utils_min_js.html">popper-utils.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/popper/esm/popper-utils_min_js_map.html">popper-utils.min.js.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/popper/esm/popper_js.html">popper.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/popper/esm/popper_js_map.html">popper.js.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/popper/esm/popper_min_js.html">popper.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/popper/esm/popper_min_js_map.html">popper.min.js.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/popper/popper-utils_js.html">popper-utils.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/popper/popper-utils_js_map.html">popper-utils.js.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/popper/popper-utils_min_js.html">popper-utils.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/popper/popper-utils_min_js_map.html">popper-utils.min.js.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/popper/popper_js.html">popper.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/popper/popper_js_map.html">popper.js.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/popper/popper_min_js.html">popper.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/popper/popper_min_js_map.html">popper.min.js.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/popper/umd/popper-utils_js.html">popper-utils.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/popper/umd/popper-utils_js_map.html">popper-utils.js.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/popper/umd/popper-utils_min_js.html">popper-utils.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/popper/umd/popper-utils_min_js_map.html">popper-utils.min.js.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/popper/umd/popper_js.html">popper.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/popper/umd/popper_js_map.html">popper.js.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/popper/umd/popper_min_js.html">popper.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/dist/js/plugins/popper/umd/popper_min_js_map.html">popper.min.js.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/index2_html.html">index2.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/index3_html.html">index3.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/package_json.html">package.json</a>
  
    <li><a href="../../../../node_modules/admin-lte/pages/UI/buttons_html.html">buttons.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/pages/UI/general_html.html">general.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/pages/UI/icons_html.html">icons.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/pages/UI/sliders_html.html">sliders.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/pages/calendar_html.html">calendar.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/pages/charts/chartjs_html.html">chartjs.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/pages/charts/flot_html.html">flot.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/pages/charts/inline_html.html">inline.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/pages/examples/404_html.html">404.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/pages/examples/500_html.html">500.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/pages/examples/blank_html.html">blank.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/pages/examples/invoice-print_html.html">invoice-print.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/pages/examples/invoice_html.html">invoice.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/pages/examples/lockscreen_html.html">lockscreen.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/pages/examples/login_html.html">login.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/pages/examples/profile_html.html">profile.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/pages/examples/register_html.html">register.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/pages/forms/advanced_html.html">advanced.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/pages/forms/editors_html.html">editors.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/pages/forms/general_html.html">general.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/pages/mailbox/compose_html.html">compose.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/pages/mailbox/mailbox_html.html">mailbox.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/pages/mailbox/read-mail_html.html">read-mail.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/pages/tables/data_html.html">data.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/pages/tables/simple_html.html">simple.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/pages/widgets_html.html">widgets.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/bootstrap-slider/bootstrap-slider_js.html">bootstrap-slider.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/bootstrap-slider/slider_css.html">slider.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5_all_js.html">bootstrap3-wysihtml5.all.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5_all_min_js.html">bootstrap3-wysihtml5.all.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5_css.html">bootstrap3-wysihtml5.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5_min_css.html">bootstrap3-wysihtml5.min.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/bootstrap/css/bootstrap-grid_css.html">bootstrap-grid.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/bootstrap/css/bootstrap-grid_css_map.html">bootstrap-grid.css.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/bootstrap/css/bootstrap-grid_min_css.html">bootstrap-grid.min.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/bootstrap/css/bootstrap-grid_min_css_map.html">bootstrap-grid.min.css.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/bootstrap/css/bootstrap-reboot_css.html">bootstrap-reboot.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/bootstrap/css/bootstrap-reboot_css_map.html">bootstrap-reboot.css.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/bootstrap/css/bootstrap-reboot_min_css.html">bootstrap-reboot.min.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/bootstrap/css/bootstrap-reboot_min_css_map.html">bootstrap-reboot.min.css.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/bootstrap/css/bootstrap_css.html">bootstrap.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/bootstrap/css/bootstrap_css_map.html">bootstrap.css.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/bootstrap/css/bootstrap_min_css.html">bootstrap.min.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/bootstrap/css/bootstrap_min_css_map.html">bootstrap.min.css.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/bootstrap/js/bootstrap_bundle_js.html">bootstrap.bundle.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/bootstrap/js/bootstrap_bundle_js_map.html">bootstrap.bundle.js.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/bootstrap/js/bootstrap_bundle_min_js.html">bootstrap.bundle.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/bootstrap/js/bootstrap_bundle_min_js_map.html">bootstrap.bundle.min.js.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/bootstrap/js/bootstrap_js.html">bootstrap.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/bootstrap/js/bootstrap_js_map.html">bootstrap.js.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/bootstrap/js/bootstrap_min_js.html">bootstrap.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/bootstrap/js/bootstrap_min_js_map.html">bootstrap.min.js.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/Chart_bundle_js.html">Chart.bundle.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/Chart_bundle_min_js.html">Chart.bundle.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/Chart_js.html">Chart.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/Chart_min_js.html">Chart.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/axes/cartesian/category_html.html">category.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/axes/cartesian/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/axes/cartesian/linear_html.html">linear.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/axes/cartesian/logarithmic_html.html">logarithmic.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/axes/cartesian/time_html.html">time.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/axes/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/axes/labelling_html.html">labelling.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/axes/radial/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/axes/radial/linear_html.html">linear.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/axes/styling_html.html">styling.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/charts/area_html.html">area.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/charts/bar_html.html">bar.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/charts/bubble_html.html">bubble.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/charts/doughnut_html.html">doughnut.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/charts/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/charts/line_html.html">line.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/charts/mixed_html.html">mixed.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/charts/polar_html.html">polar.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/charts/radar_html.html">radar.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/charts/scatter_html.html">scatter.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/configuration/animations_html.html">animations.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/configuration/elements_html.html">elements.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/configuration/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/configuration/layout_html.html">layout.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/configuration/legend_html.html">legend.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/configuration/title_html.html">title.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/configuration/tooltip_html.html">tooltip.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/developers/api_html.html">api.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/developers/axes_html.html">axes.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/developers/charts_html.html">charts.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/developers/contributing_html.html">contributing.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/developers/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/developers/plugins_html.html">plugins.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/developers/updates_html.html">updates.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/general/colors_html.html">colors.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/general/device-pixel-ratio_html.html">device-pixel-ratio.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/general/device-pixel-ratio_md.html">device-pixel-ratio</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/general/fonts_html.html">fonts.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/general/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/general/interactions/events_html.html">events.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/general/interactions/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/general/interactions/modes_html.html">modes.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/general/options_html.html">options.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/general/responsive_html.html">responsive.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/getting-started/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/getting-started/installation_html.html">installation.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/getting-started/integration_html.html">integration.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/getting-started/usage_html.html">usage.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/gitbook/gitbook-plugin-anchorjs/anchor-style_js.html">anchor-style.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/gitbook/gitbook-plugin-chartjs/Chart_bundle_js.html">Chart.bundle.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/gitbook/gitbook-plugin-chartjs/Chart_bundle_min_js.html">Chart.bundle.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/gitbook/gitbook-plugin-chartjs/Chart_js.html">Chart.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/gitbook/gitbook-plugin-chartjs/Chart_min_js.html">Chart.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/gitbook/gitbook-plugin-chartjs/chartjs-plugin-deferred_js.html">chartjs-plugin-deferred.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/gitbook/gitbook-plugin-chartjs/chartjs-plugin-deferred_min_js.html">chartjs-plugin-deferred.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/gitbook/gitbook-plugin-chartjs/style_css.html">style.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/gitbook/gitbook-plugin-fontsettings/fontsettings_js.html">fontsettings.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/gitbook/gitbook-plugin-fontsettings/website_css.html">website.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/gitbook/gitbook-plugin-ga/plugin_js.html">plugin.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/gitbook/gitbook-plugin-highlight/ebook_css.html">ebook.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/gitbook/gitbook-plugin-highlight/website_css.html">website.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/gitbook/gitbook-plugin-search-plus/jquery_mark_min_js.html">jquery.mark.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/gitbook/gitbook-plugin-search-plus/search_css.html">search.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/gitbook/gitbook-plugin-search-plus/search_js.html">search.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/gitbook/gitbook-plugin-sharing/buttons_js.html">buttons.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/gitbook/gitbook_js.html">gitbook.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/gitbook/style_css.html">style.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/gitbook/theme_js.html">theme.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/notes/comparison_html.html">comparison.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/notes/extensions_html.html">extensions.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/notes/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/notes/license_html.html">license.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/search_plus_index_json.html">search_plus_index.json</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chart_js/docs/style_css.html">style.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chartjs-old/Chart_js.html">Chart.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/chartjs-old/Chart_min_js.html">Chart.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/ckeditor_js.html">ckeditor.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/ckeditor_js_map.html">ckeditor.js.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/ar_js.html">ar.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/ast_js.html">ast.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/bg_js.html">bg.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/cs_js.html">cs.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/da_js.html">da.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/de_js.html">de.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/el_js.html">el.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/en-au_js.html">en-au.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/eo_js.html">eo.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/es_js.html">es.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/et_js.html">et.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/eu_js.html">eu.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/fi_js.html">fi.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/fr_js.html">fr.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/gl_js.html">gl.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/gu_js.html">gu.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/hr_js.html">hr.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/hu_js.html">hu.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/it_js.html">it.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/ja_js.html">ja.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/km_js.html">km.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/kn_js.html">kn.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/ko_js.html">ko.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/ku_js.html">ku.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/nb_js.html">nb.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/ne_js.html">ne.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/nl_js.html">nl.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/oc_js.html">oc.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/pl_js.html">pl.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/pt-br_js.html">pt-br.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/pt_js.html">pt.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/ro_js.html">ro.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/ru_js.html">ru.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/si_js.html">si.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/sk_js.html">sk.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/sq_js.html">sq.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/sv_js.html">sv.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/tr_js.html">tr.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/tt_js.html">tt.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/ug_js.html">ug.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/uk_js.html">uk.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/zh-cn_js.html">zh-cn.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ckeditor/translations/zh_js.html">zh.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/colorpicker/bootstrap-colorpicker_css.html">bootstrap-colorpicker.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/colorpicker/bootstrap-colorpicker_js.html">bootstrap-colorpicker.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/colorpicker/bootstrap-colorpicker_min_css.html">bootstrap-colorpicker.min.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/colorpicker/bootstrap-colorpicker_min_js.html">bootstrap-colorpicker.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/dataTables_bootstrap4_css.html">dataTables.bootstrap4.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/dataTables_bootstrap4_js.html">dataTables.bootstrap4.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/AutoFill/Readme_txt.html">Readme</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/AutoFill/css/dataTables_autoFill_css.html">dataTables.autoFill.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/AutoFill/css/dataTables_autoFill_min_css.html">dataTables.autoFill.min.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/AutoFill/examples/columns_html.html">columns.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/AutoFill/examples/complete-callback_html.html">complete-callback.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/AutoFill/examples/fill-both_html.html">fill-both.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/AutoFill/examples/fill-horizontal_html.html">fill-horizontal.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/AutoFill/examples/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/AutoFill/examples/scrolling_html.html">scrolling.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/AutoFill/examples/simple_html.html">simple.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/AutoFill/examples/step-callback_html.html">step-callback.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/AutoFill/js/dataTables_autoFill_js.html">dataTables.autoFill.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/AutoFill/js/dataTables_autoFill_min_js.html">dataTables.autoFill.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColReorder/License_txt.html">License</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColReorder/Readme_md.html">Readme</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColReorder/css/dataTables_colReorder_css.html">dataTables.colReorder.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColReorder/css/dataTables_colReorder_min_css.html">dataTables.colReorder.min.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColReorder/examples/alt_insert_html.html">alt_insert.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColReorder/examples/col_filter_html.html">col_filter.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColReorder/examples/colvis_html.html">colvis.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColReorder/examples/fixedcolumns_html.html">fixedcolumns.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColReorder/examples/fixedheader_html.html">fixedheader.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColReorder/examples/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColReorder/examples/jqueryui_html.html">jqueryui.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColReorder/examples/new_init_html.html">new_init.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColReorder/examples/predefined_html.html">predefined.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColReorder/examples/realtime_html.html">realtime.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColReorder/examples/reset_html.html">reset.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColReorder/examples/scrolling_html.html">scrolling.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColReorder/examples/server_side_html.html">server_side.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColReorder/examples/simple_html.html">simple.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColReorder/examples/state_save_html.html">state_save.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColReorder/js/dataTables_colReorder_js.html">dataTables.colReorder.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColReorder/js/dataTables_colReorder_min_js.html">dataTables.colReorder.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColVis/License_txt.html">License</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColVis/Readme_md.html">Readme</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColVis/css/dataTables_colVis_css.html">dataTables.colVis.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColVis/css/dataTables_colVis_min_css.html">dataTables.colVis.min.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColVis/css/dataTables_colvis_jqueryui_css.html">dataTables.colvis.jqueryui.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColVis/examples/button_order_html.html">button_order.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColVis/examples/exclude_columns_html.html">exclude_columns.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColVis/examples/group_columns_html.html">group_columns.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColVis/examples/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColVis/examples/jqueryui_html.html">jqueryui.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColVis/examples/mouseover_html.html">mouseover.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColVis/examples/new_init_html.html">new_init.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColVis/examples/restore_html.html">restore.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColVis/examples/simple_html.html">simple.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColVis/examples/text_html.html">text.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColVis/examples/title_callback_html.html">title_callback.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColVis/examples/two_tables_html.html">two_tables.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColVis/examples/two_tables_identical_html.html">two_tables_identical.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColVis/js/dataTables_colVis_js.html">dataTables.colVis.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/ColVis/js/dataTables_colVis_min_js.html">dataTables.colVis.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/FixedColumns/License_txt.html">License</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/FixedColumns/Readme_md.html">Readme</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/FixedColumns/css/dataTables_fixedColumns_css.html">dataTables.fixedColumns.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/FixedColumns/css/dataTables_fixedColumns_min_css.html">dataTables.fixedColumns.min.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/FixedColumns/examples/bootstrap_html.html">bootstrap.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/FixedColumns/examples/col_filter_html.html">col_filter.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/FixedColumns/examples/colvis_html.html">colvis.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/FixedColumns/examples/css_size_html.html">css_size.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/FixedColumns/examples/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/FixedColumns/examples/index_column_html.html">index_column.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/FixedColumns/examples/left_right_columns_html.html">left_right_columns.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/FixedColumns/examples/right_column_html.html">right_column.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/FixedColumns/examples/rowspan_html.html">rowspan.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/FixedColumns/examples/server-side-processing_html.html">server-side-processing.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/FixedColumns/examples/simple_html.html">simple.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/FixedColumns/examples/size_fixed_html.html">size_fixed.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/FixedColumns/examples/size_fluid_html.html">size_fluid.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/FixedColumns/examples/two_columns_html.html">two_columns.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/FixedColumns/js/dataTables_fixedColumns_js.html">dataTables.fixedColumns.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/FixedColumns/js/dataTables_fixedColumns_min_js.html">dataTables.fixedColumns.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/FixedHeader/Readme_txt.html">Readme</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/FixedHeader/css/dataTables_fixedHeader_css.html">dataTables.fixedHeader.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/FixedHeader/css/dataTables_fixedHeader_min_css.html">dataTables.fixedHeader.min.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/FixedHeader/examples/header_footer_html.html">header_footer.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/FixedHeader/examples/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/FixedHeader/examples/simple_html.html">simple.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/FixedHeader/examples/top_left_right_html.html">top_left_right.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/FixedHeader/examples/two_tables_html.html">two_tables.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/FixedHeader/examples/zIndexes_html.html">zIndexes.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/FixedHeader/js/dataTables_fixedHeader_js.html">dataTables.fixedHeader.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/FixedHeader/js/dataTables_fixedHeader_min_js.html">dataTables.fixedHeader.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/KeyTable/Readme_txt.html">Readme</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/KeyTable/css/dataTables_keyTable_css.html">dataTables.keyTable.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/KeyTable/css/dataTables_keyTable_min_css.html">dataTables.keyTable.min.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/KeyTable/examples/events_html.html">events.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/KeyTable/examples/html_html.html">html.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/KeyTable/examples/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/KeyTable/examples/scrolling_html.html">scrolling.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/KeyTable/examples/simple_html.html">simple.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/KeyTable/js/dataTables_keyTable_js.html">dataTables.keyTable.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/KeyTable/js/dataTables_keyTable_min_js.html">dataTables.keyTable.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Responsive/License_txt.html">License</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Responsive/Readme_md.html">Readme</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Responsive/css/dataTables_responsive_css.html">dataTables.responsive.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Responsive/css/dataTables_responsive_scss.html">dataTables.responsive.scss</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Responsive/examples/child-rows/column-control_html.html">column-control.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Responsive/examples/child-rows/custom-renderer_html.html">custom-renderer.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Responsive/examples/child-rows/disable-child-rows_html.html">disable-child-rows.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Responsive/examples/child-rows/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Responsive/examples/child-rows/right-column_html.html">right-column.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Responsive/examples/child-rows/whole-row-control_html.html">whole-row-control.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Responsive/examples/display-control/auto_html.html">auto.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Responsive/examples/display-control/classes_html.html">classes.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Responsive/examples/display-control/complexHeader_html.html">complexHeader.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Responsive/examples/display-control/fixedHeader_html.html">fixedHeader.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Responsive/examples/display-control/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Responsive/examples/display-control/init-classes_html.html">init-classes.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Responsive/examples/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Responsive/examples/initialisation/ajax_html.html">ajax.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Responsive/examples/initialisation/className_html.html">className.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Responsive/examples/initialisation/default_html.html">default.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Responsive/examples/initialisation/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Responsive/examples/initialisation/new_html.html">new.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Responsive/examples/initialisation/option_html.html">option.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Responsive/examples/styling/bootstrap_html.html">bootstrap.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Responsive/examples/styling/compact_html.html">compact.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Responsive/examples/styling/foundation_html.html">foundation.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Responsive/examples/styling/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Responsive/examples/styling/scrolling_html.html">scrolling.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Responsive/js/dataTables_responsive_js.html">dataTables.responsive.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Responsive/js/dataTables_responsive_min_js.html">dataTables.responsive.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Scroller/Readme_txt.html">Readme</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Scroller/css/dataTables_scroller_css.html">dataTables.scroller.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Scroller/css/dataTables_scroller_min_css.html">dataTables.scroller.min.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Scroller/examples/api_scrolling_html.html">api_scrolling.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Scroller/examples/data/2500_txt.html">2500</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Scroller/examples/data/ssp_php.html">ssp.php</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Scroller/examples/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Scroller/examples/large_js_source_html.html">large_js_source.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Scroller/examples/server-side_processing_html.html">server-side_processing.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Scroller/examples/simple_html.html">simple.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Scroller/examples/state_saving_html.html">state_saving.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Scroller/js/dataTables_scroller_js.html">dataTables.scroller.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/Scroller/js/dataTables_scroller_min_js.html">dataTables.scroller.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/TableTools/Readme_md.html">Readme</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/TableTools/css/dataTables_tableTools_css.html">dataTables.tableTools.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/TableTools/css/dataTables_tableTools_min_css.html">dataTables.tableTools.min.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/TableTools/examples/ajax_html.html">ajax.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/TableTools/examples/alter_buttons_html.html">alter_buttons.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/TableTools/examples/bootstrap_html.html">bootstrap.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/TableTools/examples/button_text_html.html">button_text.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/TableTools/examples/collection_html.html">collection.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/TableTools/examples/defaults_html.html">defaults.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/TableTools/examples/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/TableTools/examples/jqueryui_html.html">jqueryui.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/TableTools/examples/multi_instance_html.html">multi_instance.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/TableTools/examples/multiple_tables_html.html">multiple_tables.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/TableTools/examples/new_init_html.html">new_init.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/TableTools/examples/pdf_message_html.html">pdf_message.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/TableTools/examples/plug-in_html.html">plug-in.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/TableTools/examples/select_column_html.html">select_column.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/TableTools/examples/select_multi_html.html">select_multi.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/TableTools/examples/select_os_html.html">select_os.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/TableTools/examples/select_single_html.html">select_single.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/TableTools/examples/simple_html.html">simple.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/TableTools/examples/swf_path_html.html">swf_path.html</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/TableTools/js/dataTables_tableTools_js.html">dataTables.tableTools.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/extensions/TableTools/js/dataTables_tableTools_min_js.html">dataTables.tableTools.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/jquery_dataTables_css.html">jquery.dataTables.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/jquery_dataTables_js.html">jquery.dataTables.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/jquery_dataTables_min_css.html">jquery.dataTables.min.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/jquery_dataTables_min_js.html">jquery.dataTables.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datatables/jquery_dataTables_themeroller_css.html">jquery.dataTables_themeroller.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/bootstrap-datepicker_js.html">bootstrap-datepicker.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/datepicker3_css.html">datepicker3.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_ar_js.html">bootstrap-datepicker.ar.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_az_js.html">bootstrap-datepicker.az.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_bg_js.html">bootstrap-datepicker.bg.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_ca_js.html">bootstrap-datepicker.ca.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_cs_js.html">bootstrap-datepicker.cs.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_cy_js.html">bootstrap-datepicker.cy.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_da_js.html">bootstrap-datepicker.da.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_de_js.html">bootstrap-datepicker.de.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_el_js.html">bootstrap-datepicker.el.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_es_js.html">bootstrap-datepicker.es.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_et_js.html">bootstrap-datepicker.et.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_fa_js.html">bootstrap-datepicker.fa.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_fi_js.html">bootstrap-datepicker.fi.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_fr_js.html">bootstrap-datepicker.fr.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_gl_js.html">bootstrap-datepicker.gl.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_he_js.html">bootstrap-datepicker.he.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_hr_js.html">bootstrap-datepicker.hr.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_hu_js.html">bootstrap-datepicker.hu.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_id_js.html">bootstrap-datepicker.id.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_is_js.html">bootstrap-datepicker.is.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_it_js.html">bootstrap-datepicker.it.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_ja_js.html">bootstrap-datepicker.ja.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_ka_js.html">bootstrap-datepicker.ka.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_kk_js.html">bootstrap-datepicker.kk.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_kr_js.html">bootstrap-datepicker.kr.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_lt_js.html">bootstrap-datepicker.lt.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_lv_js.html">bootstrap-datepicker.lv.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_mk_js.html">bootstrap-datepicker.mk.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_ms_js.html">bootstrap-datepicker.ms.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_nb_js.html">bootstrap-datepicker.nb.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_nl-BE_js.html">bootstrap-datepicker.nl-BE.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_nl_js.html">bootstrap-datepicker.nl.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_no_js.html">bootstrap-datepicker.no.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_pl_js.html">bootstrap-datepicker.pl.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_pt-BR_js.html">bootstrap-datepicker.pt-BR.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_pt_js.html">bootstrap-datepicker.pt.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_ro_js.html">bootstrap-datepicker.ro.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_rs-latin_js.html">bootstrap-datepicker.rs-latin.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_rs_js.html">bootstrap-datepicker.rs.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_ru_js.html">bootstrap-datepicker.ru.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_sk_js.html">bootstrap-datepicker.sk.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_sl_js.html">bootstrap-datepicker.sl.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_sq_js.html">bootstrap-datepicker.sq.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_sv_js.html">bootstrap-datepicker.sv.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_sw_js.html">bootstrap-datepicker.sw.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_th_js.html">bootstrap-datepicker.th.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_tr_js.html">bootstrap-datepicker.tr.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_ua_js.html">bootstrap-datepicker.ua.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_vi_js.html">bootstrap-datepicker.vi.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_zh-CN_js.html">bootstrap-datepicker.zh-CN.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/datepicker/locales/bootstrap-datepicker_zh-TW_js.html">bootstrap-datepicker.zh-TW.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/daterangepicker/daterangepicker-bs3_css.html">daterangepicker-bs3.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/daterangepicker/daterangepicker_js.html">daterangepicker.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/daterangepicker/moment_js.html">moment.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/daterangepicker/moment_min_js.html">moment.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/fastclick/fastclick_js.html">fastclick.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/fastclick/fastclick_min_js.html">fastclick.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/flot/excanvas_js.html">excanvas.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/flot/excanvas_min_js.html">excanvas.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/flot/jquery_colorhelpers_js.html">jquery.colorhelpers.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/flot/jquery_colorhelpers_min_js.html">jquery.colorhelpers.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/flot/jquery_flot_canvas_js.html">jquery.flot.canvas.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/flot/jquery_flot_canvas_min_js.html">jquery.flot.canvas.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/flot/jquery_flot_categories_js.html">jquery.flot.categories.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/flot/jquery_flot_categories_min_js.html">jquery.flot.categories.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/flot/jquery_flot_crosshair_js.html">jquery.flot.crosshair.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/flot/jquery_flot_crosshair_min_js.html">jquery.flot.crosshair.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/flot/jquery_flot_errorbars_js.html">jquery.flot.errorbars.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/flot/jquery_flot_errorbars_min_js.html">jquery.flot.errorbars.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/flot/jquery_flot_fillbetween_js.html">jquery.flot.fillbetween.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/flot/jquery_flot_fillbetween_min_js.html">jquery.flot.fillbetween.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/flot/jquery_flot_image_js.html">jquery.flot.image.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/flot/jquery_flot_image_min_js.html">jquery.flot.image.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/flot/jquery_flot_js.html">jquery.flot.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/flot/jquery_flot_min_js.html">jquery.flot.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/flot/jquery_flot_navigate_js.html">jquery.flot.navigate.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/flot/jquery_flot_navigate_min_js.html">jquery.flot.navigate.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/flot/jquery_flot_pie_js.html">jquery.flot.pie.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/flot/jquery_flot_pie_min_js.html">jquery.flot.pie.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/flot/jquery_flot_resize_js.html">jquery.flot.resize.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/flot/jquery_flot_resize_min_js.html">jquery.flot.resize.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/flot/jquery_flot_selection_js.html">jquery.flot.selection.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/flot/jquery_flot_selection_min_js.html">jquery.flot.selection.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/flot/jquery_flot_stack_js.html">jquery.flot.stack.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/flot/jquery_flot_stack_min_js.html">jquery.flot.stack.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/flot/jquery_flot_symbol_js.html">jquery.flot.symbol.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/flot/jquery_flot_symbol_min_js.html">jquery.flot.symbol.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/flot/jquery_flot_threshold_js.html">jquery.flot.threshold.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/flot/jquery_flot_threshold_min_js.html">jquery.flot.threshold.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/flot/jquery_flot_time_js.html">jquery.flot.time.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/flot/jquery_flot_time_min_js.html">jquery.flot.time.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/font-awesome/css/font-awesome_css.html">font-awesome.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/font-awesome/css/font-awesome_css_map.html">font-awesome.css.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/font-awesome/css/font-awesome_min_css.html">font-awesome.min.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/fullcalendar/fullcalendar_css.html">fullcalendar.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/fullcalendar/fullcalendar_js.html">fullcalendar.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/fullcalendar/fullcalendar_min_css.html">fullcalendar.min.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/fullcalendar/fullcalendar_min_js.html">fullcalendar.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/fullcalendar/fullcalendar_print_css.html">fullcalendar.print.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/all_css.html">all.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/flat/_all_css.html">_all.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/flat/aero_css.html">aero.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/flat/blue_css.html">blue.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/flat/flat_css.html">flat.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/flat/green_css.html">green.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/flat/grey_css.html">grey.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/flat/orange_css.html">orange.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/flat/pink_css.html">pink.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/flat/purple_css.html">purple.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/flat/red_css.html">red.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/flat/yellow_css.html">yellow.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/futurico/futurico_css.html">futurico.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/icheck_js.html">icheck.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/icheck_min_js.html">icheck.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/line/_all_css.html">_all.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/line/aero_css.html">aero.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/line/blue_css.html">blue.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/line/green_css.html">green.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/line/grey_css.html">grey.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/line/line_css.html">line.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/line/orange_css.html">orange.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/line/pink_css.html">pink.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/line/purple_css.html">purple.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/line/red_css.html">red.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/line/yellow_css.html">yellow.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/minimal/_all_css.html">_all.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/minimal/aero_css.html">aero.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/minimal/blue_css.html">blue.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/minimal/green_css.html">green.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/minimal/grey_css.html">grey.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/minimal/minimal_css.html">minimal.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/minimal/orange_css.html">orange.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/minimal/pink_css.html">pink.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/minimal/purple_css.html">purple.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/minimal/red_css.html">red.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/minimal/yellow_css.html">yellow.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/polaris/polaris_css.html">polaris.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/square/_all_css.html">_all.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/square/aero_css.html">aero.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/square/blue_css.html">blue.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/square/green_css.html">green.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/square/grey_css.html">grey.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/square/orange_css.html">orange.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/square/pink_css.html">pink.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/square/purple_css.html">purple.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/square/red_css.html">red.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/square/square_css.html">square.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/iCheck/square/yellow_css.html">yellow.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/input-mask/jquery_inputmask_date_extensions_js.html">jquery.inputmask.date.extensions.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/input-mask/jquery_inputmask_extensions_js.html">jquery.inputmask.extensions.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/input-mask/jquery_inputmask_js.html">jquery.inputmask.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/input-mask/jquery_inputmask_numeric_extensions_js.html">jquery.inputmask.numeric.extensions.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/input-mask/jquery_inputmask_phone_extensions_js.html">jquery.inputmask.phone.extensions.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/input-mask/jquery_inputmask_regex_extensions_js.html">jquery.inputmask.regex.extensions.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/input-mask/phone-codes/phone-be_json.html">phone-be.json</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/input-mask/phone-codes/phone-codes_json.html">phone-codes.json</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/input-mask/phone-codes/readme_txt.html">readme</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ionslider/ion_rangeSlider_css.html">ion.rangeSlider.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ionslider/ion_rangeSlider_min_js.html">ion.rangeSlider.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ionslider/ion_rangeSlider_skinFlat_css.html">ion.rangeSlider.skinFlat.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/ionslider/ion_rangeSlider_skinNice_css.html">ion.rangeSlider.skinNice.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/jQueryUI/jquery-ui_js.html">jquery-ui.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/jQueryUI/jquery-ui_min_js.html">jquery-ui.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/jquery/core_js.html">core.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/jquery/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/jquery/jquery_min_js.html">jquery.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/jquery/jquery_min_map.html">jquery.min.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/jquery/jquery_slim_js.html">jquery.slim.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/jquery/jquery_slim_min_js.html">jquery.slim.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/jquery/jquery_slim_min_map.html">jquery.slim.min.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/jvectormap/jquery-jvectormap-1_2_2_css.html">jquery-jvectormap-1.2.2.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/jvectormap/jquery-jvectormap-1_2_2_min_js.html">jquery-jvectormap-1.2.2.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/jvectormap/jquery-jvectormap-usa-en_js.html">jquery-jvectormap-usa-en.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/jvectormap/jquery-jvectormap-world-mill-en_js.html">jquery-jvectormap-world-mill-en.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/knob/jquery_knob_js.html">jquery.knob.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/morris/morris_css.html">morris.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/morris/morris_js.html">morris.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/morris/morris_min_js.html">morris.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/pace/pace_css.html">pace.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/pace/pace_js.html">pace.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/pace/pace_min_css.html">pace.min.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/pace/pace_min_js.html">pace.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/popper/esm/popper-utils_js.html">popper-utils.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/popper/esm/popper-utils_js_map.html">popper-utils.js.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/popper/esm/popper-utils_min_js.html">popper-utils.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/popper/esm/popper-utils_min_js_map.html">popper-utils.min.js.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/popper/esm/popper_js.html">popper.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/popper/esm/popper_js_map.html">popper.js.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/popper/esm/popper_min_js.html">popper.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/popper/esm/popper_min_js_map.html">popper.min.js.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/popper/popper-utils_js.html">popper-utils.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/popper/popper-utils_js_map.html">popper-utils.js.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/popper/popper-utils_min_js.html">popper-utils.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/popper/popper-utils_min_js_map.html">popper-utils.min.js.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/popper/popper_js.html">popper.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/popper/popper_js_map.html">popper.js.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/popper/popper_min_js.html">popper.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/popper/popper_min_js_map.html">popper.min.js.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/popper/umd/popper-utils_js.html">popper-utils.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/popper/umd/popper-utils_js_map.html">popper-utils.js.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/popper/umd/popper-utils_min_js.html">popper-utils.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/popper/umd/popper-utils_min_js_map.html">popper-utils.min.js.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/popper/umd/popper_js.html">popper.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/popper/umd/popper_js_map.html">popper.js.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/popper/umd/popper_min_js.html">popper.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/popper/umd/popper_min_js_map.html">popper.min.js.map</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/az_js.html">az.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/bg_js.html">bg.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/ca_js.html">ca.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/cs_js.html">cs.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/da_js.html">da.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/de_js.html">de.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/en_js.html">en.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/es_js.html">es.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/et_js.html">et.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/eu_js.html">eu.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/fa_js.html">fa.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/fi_js.html">fi.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/fr_js.html">fr.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/gl_js.html">gl.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/he_js.html">he.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/hi_js.html">hi.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/hr_js.html">hr.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/hu_js.html">hu.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/id_js.html">id.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/is_js.html">is.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/it_js.html">it.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/ko_js.html">ko.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/lt_js.html">lt.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/lv_js.html">lv.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/mk_js.html">mk.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/nb_js.html">nb.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/nl_js.html">nl.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/pl_js.html">pl.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/pt-BR_js.html">pt-BR.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/pt_js.html">pt.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/ro_js.html">ro.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/ru_js.html">ru.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/sk_js.html">sk.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/sr_js.html">sr.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/sv_js.html">sv.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/th_js.html">th.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/tr_js.html">tr.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/uk_js.html">uk.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/vi_js.html">vi.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/zh-CN_js.html">zh-CN.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/i18n/zh-TW_js.html">zh-TW.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/select2_css.html">select2.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/select2_full_js.html">select2.full.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/select2_full_min_js.html">select2.full.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/select2_js.html">select2.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/select2_min_css.html">select2.min.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/select2/select2_min_js.html">select2.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/slimScroll/jquery_slimscroll_js.html">jquery.slimscroll.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/slimScroll/jquery_slimscroll_min_js.html">jquery.slimscroll.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/sparkline/jquery_sparkline_js.html">jquery.sparkline.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/sparkline/jquery_sparkline_min_js.html">jquery.sparkline.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/timepicker/bootstrap-timepicker_css.html">bootstrap-timepicker.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/timepicker/bootstrap-timepicker_js.html">bootstrap-timepicker.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/timepicker/bootstrap-timepicker_min_css.html">bootstrap-timepicker.min.css</a>
  
    <li><a href="../../../../node_modules/admin-lte/plugins/timepicker/bootstrap-timepicker_min_js.html">bootstrap-timepicker.min.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/rollup_config_js.html">rollup.config.js</a>
  
    <li><a href="../../../../node_modules/admin-lte/starter_html.html">starter.html</a>
  
    <li><a href="../../../../node_modules/bootstrap/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../../node_modules/bootstrap/README_md.html">README</a>
  
    <li><a href="../../../../node_modules/bootstrap/dist/css/bootstrap-grid_css.html">bootstrap-grid.css</a>
  
    <li><a href="../../../../node_modules/bootstrap/dist/css/bootstrap-grid_css_map.html">bootstrap-grid.css.map</a>
  
    <li><a href="../../../../node_modules/bootstrap/dist/css/bootstrap-grid_min_css.html">bootstrap-grid.min.css</a>
  
    <li><a href="../../../../node_modules/bootstrap/dist/css/bootstrap-grid_min_css_map.html">bootstrap-grid.min.css.map</a>
  
    <li><a href="../../../../node_modules/bootstrap/dist/css/bootstrap-reboot_css.html">bootstrap-reboot.css</a>
  
    <li><a href="../../../../node_modules/bootstrap/dist/css/bootstrap-reboot_css_map.html">bootstrap-reboot.css.map</a>
  
    <li><a href="../../../../node_modules/bootstrap/dist/css/bootstrap-reboot_min_css.html">bootstrap-reboot.min.css</a>
  
    <li><a href="../../../../node_modules/bootstrap/dist/css/bootstrap-reboot_min_css_map.html">bootstrap-reboot.min.css.map</a>
  
    <li><a href="../../../../node_modules/bootstrap/dist/css/bootstrap_css.html">bootstrap.css</a>
  
    <li><a href="../../../../node_modules/bootstrap/dist/css/bootstrap_css_map.html">bootstrap.css.map</a>
  
    <li><a href="../../../../node_modules/bootstrap/dist/css/bootstrap_min_css.html">bootstrap.min.css</a>
  
    <li><a href="../../../../node_modules/bootstrap/dist/css/bootstrap_min_css_map.html">bootstrap.min.css.map</a>
  
    <li><a href="../../../../node_modules/bootstrap/dist/js/bootstrap_bundle_js.html">bootstrap.bundle.js</a>
  
    <li><a href="../../../../node_modules/bootstrap/dist/js/bootstrap_bundle_js_map.html">bootstrap.bundle.js.map</a>
  
    <li><a href="../../../../node_modules/bootstrap/dist/js/bootstrap_bundle_min_js.html">bootstrap.bundle.min.js</a>
  
    <li><a href="../../../../node_modules/bootstrap/dist/js/bootstrap_bundle_min_js_map.html">bootstrap.bundle.min.js.map</a>
  
    <li><a href="../../../../node_modules/bootstrap/dist/js/bootstrap_js.html">bootstrap.js</a>
  
    <li><a href="../../../../node_modules/bootstrap/dist/js/bootstrap_js_map.html">bootstrap.js.map</a>
  
    <li><a href="../../../../node_modules/bootstrap/dist/js/bootstrap_min_js.html">bootstrap.min.js</a>
  
    <li><a href="../../../../node_modules/bootstrap/dist/js/bootstrap_min_js_map.html">bootstrap.min.js.map</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/dist/alert_js.html">alert.js</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/dist/alert_js_map.html">alert.js.map</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/dist/button_js.html">button.js</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/dist/button_js_map.html">button.js.map</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/dist/carousel_js.html">carousel.js</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/dist/carousel_js_map.html">carousel.js.map</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/dist/collapse_js.html">collapse.js</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/dist/collapse_js_map.html">collapse.js.map</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/dist/dropdown_js.html">dropdown.js</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/dist/dropdown_js_map.html">dropdown.js.map</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/dist/index_js.html">index.js</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/dist/index_js_map.html">index.js.map</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/dist/modal_js.html">modal.js</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/dist/modal_js_map.html">modal.js.map</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/dist/popover_js.html">popover.js</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/dist/popover_js_map.html">popover.js.map</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/dist/scrollspy_js.html">scrollspy.js</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/dist/scrollspy_js_map.html">scrollspy.js.map</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/dist/tab_js.html">tab.js</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/dist/tab_js_map.html">tab.js.map</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/dist/toast_js.html">toast.js</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/dist/toast_js_map.html">toast.js.map</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/dist/tooltip_js.html">tooltip.js</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/dist/tooltip_js_map.html">tooltip.js.map</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/dist/util_js.html">util.js</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/dist/util_js_map.html">util.js.map</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/src/alert_js.html">alert.js</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/src/button_js.html">button.js</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/src/carousel_js.html">carousel.js</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/src/collapse_js.html">collapse.js</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/src/dropdown_js.html">dropdown.js</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/src/index_js.html">index.js</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/src/modal_js.html">modal.js</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/src/popover_js.html">popover.js</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/src/scrollspy_js.html">scrollspy.js</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/src/tab_js.html">tab.js</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/src/toast_js.html">toast.js</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/src/tools/sanitizer_js.html">sanitizer.js</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/src/tooltip_js.html">tooltip.js</a>
  
    <li><a href="../../../../node_modules/bootstrap/js/src/util_js.html">util.js</a>
  
    <li><a href="../../../../node_modules/bootstrap/package_json.html">package.json</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/_alert_scss.html">_alert.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/_badge_scss.html">_badge.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/_breadcrumb_scss.html">_breadcrumb.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/_button-group_scss.html">_button-group.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/_buttons_scss.html">_buttons.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/_card_scss.html">_card.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/_carousel_scss.html">_carousel.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/_close_scss.html">_close.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/_code_scss.html">_code.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/_custom-forms_scss.html">_custom-forms.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/_dropdown_scss.html">_dropdown.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/_forms_scss.html">_forms.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/_functions_scss.html">_functions.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/_grid_scss.html">_grid.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/_images_scss.html">_images.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/_input-group_scss.html">_input-group.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/_jumbotron_scss.html">_jumbotron.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/_list-group_scss.html">_list-group.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/_media_scss.html">_media.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/_mixins_scss.html">_mixins.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/_modal_scss.html">_modal.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/_nav_scss.html">_nav.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/_navbar_scss.html">_navbar.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/_pagination_scss.html">_pagination.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/_popover_scss.html">_popover.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/_print_scss.html">_print.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/_progress_scss.html">_progress.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/_reboot_scss.html">_reboot.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/_root_scss.html">_root.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/_spinners_scss.html">_spinners.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/_tables_scss.html">_tables.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/_toasts_scss.html">_toasts.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/_tooltip_scss.html">_tooltip.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/_transitions_scss.html">_transitions.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/_type_scss.html">_type.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/_utilities_scss.html">_utilities.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/_variables_scss.html">_variables.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/bootstrap-grid_scss.html">bootstrap-grid.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/bootstrap-reboot_scss.html">bootstrap-reboot.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/bootstrap_scss.html">bootstrap.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/mixins/_alert_scss.html">_alert.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/mixins/_background-variant_scss.html">_background-variant.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/mixins/_badge_scss.html">_badge.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/mixins/_border-radius_scss.html">_border-radius.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/mixins/_box-shadow_scss.html">_box-shadow.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/mixins/_breakpoints_scss.html">_breakpoints.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/mixins/_buttons_scss.html">_buttons.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/mixins/_caret_scss.html">_caret.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/mixins/_clearfix_scss.html">_clearfix.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/mixins/_deprecate_scss.html">_deprecate.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/mixins/_float_scss.html">_float.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/mixins/_forms_scss.html">_forms.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/mixins/_gradients_scss.html">_gradients.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/mixins/_grid-framework_scss.html">_grid-framework.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/mixins/_grid_scss.html">_grid.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/mixins/_hover_scss.html">_hover.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/mixins/_image_scss.html">_image.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/mixins/_list-group_scss.html">_list-group.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/mixins/_lists_scss.html">_lists.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/mixins/_nav-divider_scss.html">_nav-divider.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/mixins/_pagination_scss.html">_pagination.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/mixins/_reset-text_scss.html">_reset-text.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/mixins/_resize_scss.html">_resize.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/mixins/_screen-reader_scss.html">_screen-reader.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/mixins/_size_scss.html">_size.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/mixins/_table-row_scss.html">_table-row.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/mixins/_text-emphasis_scss.html">_text-emphasis.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/mixins/_text-hide_scss.html">_text-hide.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/mixins/_text-truncate_scss.html">_text-truncate.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/mixins/_transition_scss.html">_transition.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/mixins/_visibility_scss.html">_visibility.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/utilities/_align_scss.html">_align.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/utilities/_background_scss.html">_background.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/utilities/_borders_scss.html">_borders.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/utilities/_clearfix_scss.html">_clearfix.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/utilities/_display_scss.html">_display.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/utilities/_embed_scss.html">_embed.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/utilities/_flex_scss.html">_flex.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/utilities/_float_scss.html">_float.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/utilities/_overflow_scss.html">_overflow.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/utilities/_position_scss.html">_position.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/utilities/_screenreaders_scss.html">_screenreaders.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/utilities/_shadows_scss.html">_shadows.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/utilities/_sizing_scss.html">_sizing.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/utilities/_spacing_scss.html">_spacing.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/utilities/_stretched-link_scss.html">_stretched-link.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/utilities/_text_scss.html">_text.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/utilities/_visibility_scss.html">_visibility.scss</a>
  
    <li><a href="../../../../node_modules/bootstrap/scss/vendor/_rfs_scss.html">_rfs.scss</a>
  
    <li><a href="../../../../node_modules/chart_js/LICENSE_md.html">LICENSE</a>
  
    <li><a href="../../../../node_modules/chart_js/MAINTAINING_md.html">MAINTAINING</a>
  
    <li><a href="../../../../node_modules/chart_js/README_md.html">README</a>
  
    <li><a href="../../../../node_modules/chart_js/book_json.html">book.json</a>
  
    <li><a href="../../../../node_modules/chart_js/bower_json.html">bower.json</a>
  
    <li><a href="../../../../node_modules/chart_js/composer_json.html">composer.json</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/Chart_bundle_js.html">Chart.bundle.js</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/Chart_bundle_min_js.html">Chart.bundle.min.js</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/Chart_js.html">Chart.js</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/Chart_min_js.html">Chart.min.js</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/axes/cartesian/category_html.html">category.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/axes/cartesian/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/axes/cartesian/linear_html.html">linear.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/axes/cartesian/logarithmic_html.html">logarithmic.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/axes/cartesian/time_html.html">time.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/axes/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/axes/labelling_html.html">labelling.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/axes/radial/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/axes/radial/linear_html.html">linear.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/axes/styling_html.html">styling.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/charts/area_html.html">area.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/charts/bar_html.html">bar.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/charts/bubble_html.html">bubble.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/charts/doughnut_html.html">doughnut.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/charts/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/charts/line_html.html">line.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/charts/mixed_html.html">mixed.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/charts/polar_html.html">polar.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/charts/radar_html.html">radar.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/charts/scatter_html.html">scatter.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/configuration/animations_html.html">animations.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/configuration/elements_html.html">elements.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/configuration/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/configuration/layout_html.html">layout.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/configuration/legend_html.html">legend.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/configuration/title_html.html">title.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/configuration/tooltip_html.html">tooltip.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/developers/api_html.html">api.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/developers/axes_html.html">axes.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/developers/charts_html.html">charts.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/developers/contributing_html.html">contributing.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/developers/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/developers/plugins_html.html">plugins.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/developers/updates_html.html">updates.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/general/accessibility_html.html">accessibility.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/general/colors_html.html">colors.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/general/device-pixel-ratio_html.html">device-pixel-ratio.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/general/fonts_html.html">fonts.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/general/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/general/interactions/events_html.html">events.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/general/interactions/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/general/interactions/modes_html.html">modes.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/general/options_html.html">options.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/general/responsive_html.html">responsive.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/getting-started/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/getting-started/installation_html.html">installation.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/getting-started/integration_html.html">integration.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/getting-started/usage_html.html">usage.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/gitbook/gitbook-plugin-anchorjs/anchor-style_js.html">anchor-style.js</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/gitbook/gitbook-plugin-chartjs/Chart_bundle_js.html">Chart.bundle.js</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/gitbook/gitbook-plugin-chartjs/Chart_bundle_min_js.html">Chart.bundle.min.js</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/gitbook/gitbook-plugin-chartjs/Chart_js.html">Chart.js</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/gitbook/gitbook-plugin-chartjs/Chart_min_js.html">Chart.min.js</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/gitbook/gitbook-plugin-chartjs/chartjs-plugin-deferred_js.html">chartjs-plugin-deferred.js</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/gitbook/gitbook-plugin-chartjs/chartjs-plugin-deferred_min_js.html">chartjs-plugin-deferred.min.js</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/gitbook/gitbook-plugin-chartjs/style_css.html">style.css</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/gitbook/gitbook-plugin-fontsettings/fontsettings_js.html">fontsettings.js</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/gitbook/gitbook-plugin-fontsettings/website_css.html">website.css</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/gitbook/gitbook-plugin-ga/plugin_js.html">plugin.js</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/gitbook/gitbook-plugin-highlight/ebook_css.html">ebook.css</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/gitbook/gitbook-plugin-highlight/website_css.html">website.css</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/gitbook/gitbook-plugin-search-plus/jquery_mark_min_js.html">jquery.mark.min.js</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/gitbook/gitbook-plugin-search-plus/search_css.html">search.css</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/gitbook/gitbook-plugin-search-plus/search_js.html">search.js</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/gitbook/gitbook-plugin-sharing/buttons_js.html">buttons.js</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/gitbook/gitbook_js.html">gitbook.js</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/gitbook/style_css.html">style.css</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/gitbook/theme_js.html">theme.js</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/notes/comparison_html.html">comparison.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/notes/extensions_html.html">extensions.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/notes/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/notes/license_html.html">license.html</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/search_plus_index_json.html">search_plus_index.json</a>
  
    <li><a href="../../../../node_modules/chart_js/dist/docs/style_css.html">style.css</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/README_md.html">README</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/SUMMARY_md.html">SUMMARY</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/axes/README_md.html">README</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/axes/cartesian/README_md.html">README</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/axes/cartesian/category_md.html">category</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/axes/cartesian/linear_md.html">linear</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/axes/cartesian/logarithmic_md.html">logarithmic</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/axes/cartesian/time_md.html">time</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/axes/labelling_md.html">labelling</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/axes/radial/README_md.html">README</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/axes/radial/linear_md.html">linear</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/axes/styling_md.html">styling</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/charts/README_md.html">README</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/charts/area_md.html">area</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/charts/bar_md.html">bar</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/charts/bubble_md.html">bubble</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/charts/doughnut_md.html">doughnut</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/charts/line_md.html">line</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/charts/mixed_md.html">mixed</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/charts/polar_md.html">polar</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/charts/radar_md.html">radar</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/charts/scatter_md.html">scatter</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/configuration/README_md.html">README</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/configuration/animations_md.html">animations</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/configuration/elements_md.html">elements</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/configuration/layout_md.html">layout</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/configuration/legend_md.html">legend</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/configuration/title_md.html">title</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/configuration/tooltip_md.html">tooltip</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/developers/README_md.html">README</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/developers/api_md.html">api</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/developers/axes_md.html">axes</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/developers/charts_md.html">charts</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/developers/contributing_md.html">contributing</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/developers/plugins_md.html">plugins</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/developers/updates_md.html">updates</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/general/README_md.html">README</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/general/accessibility_md.html">accessibility</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/general/colors_md.html">colors</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/general/device-pixel-ratio_md.html">device-pixel-ratio</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/general/fonts_md.html">fonts</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/general/interactions/README_md.html">README</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/general/interactions/events_md.html">events</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/general/interactions/modes_md.html">modes</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/general/options_md.html">options</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/general/responsive_md.html">responsive</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/getting-started/README_md.html">README</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/getting-started/installation_md.html">installation</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/getting-started/integration_md.html">integration</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/getting-started/usage_md.html">usage</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/notes/README_md.html">README</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/notes/comparison_md.html">comparison</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/notes/extensions_md.html">extensions</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/notes/license_md.html">license</a>
  
    <li><a href="../../../../node_modules/chart_js/docs/style_css.html">style.css</a>
  
    <li><a href="../../../../node_modules/chart_js/gulpfile_js.html">gulpfile.js</a>
  
    <li><a href="../../../../node_modules/chart_js/karma_conf_js.html">karma.conf.js</a>
  
    <li><a href="../../../../node_modules/chart_js/package_json.html">package.json</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/advanced/data-labelling_html.html">data-labelling.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/advanced/progress-bar_html.html">progress-bar.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/charts/area/analyser_js.html">analyser.js</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/charts/area/line-boundaries_html.html">line-boundaries.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/charts/area/line-datasets_html.html">line-datasets.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/charts/area/line-stacked_html.html">line-stacked.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/charts/area/radar_html.html">radar.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/charts/bar/horizontal_html.html">horizontal.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/charts/bar/multi-axis_html.html">multi-axis.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/charts/bar/stacked-group_html.html">stacked-group.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/charts/bar/stacked_html.html">stacked.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/charts/bar/vertical_html.html">vertical.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/charts/bubble_html.html">bubble.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/charts/combo-bar-line_html.html">combo-bar-line.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/charts/doughnut_html.html">doughnut.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/charts/line/basic_html.html">basic.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/charts/line/interpolation-modes_html.html">interpolation-modes.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/charts/line/line-styles_html.html">line-styles.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/charts/line/multi-axis_html.html">multi-axis.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/charts/line/point-sizes_html.html">point-sizes.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/charts/line/point-styles_html.html">point-styles.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/charts/line/skip-points_html.html">skip-points.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/charts/line/stepped_html.html">stepped.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/charts/pie_html.html">pie.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/charts/polar-area_html.html">polar-area.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/charts/radar-skip-points_html.html">radar-skip-points.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/charts/radar_html.html">radar.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/charts/scatter/basic_html.html">basic.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/charts/scatter/multi-axis_html.html">multi-axis.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/legend/point-style_html.html">point-style.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/legend/positioning_html.html">positioning.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/samples_js.html">samples.js</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/scales/filtering-labels_html.html">filtering-labels.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/scales/gridlines-display_html.html">gridlines-display.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/scales/gridlines-style_html.html">gridlines-style.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/scales/linear/min-max-suggested_html.html">min-max-suggested.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/scales/linear/min-max_html.html">min-max.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/scales/linear/step-size_html.html">step-size.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/scales/logarithmic/line_html.html">line.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/scales/logarithmic/scatter_html.html">scatter.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/scales/multiline-labels_html.html">multiline-labels.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/scales/non-numeric-y_html.html">non-numeric-y.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/scales/time/combo_html.html">combo.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/scales/time/financial_html.html">financial.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/scales/time/line-point-data_html.html">line-point-data.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/scales/time/line_html.html">line.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/scales/toggle-scale-type_html.html">toggle-scale-type.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/scriptable/bubble_html.html">bubble.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/style_css.html">style.css</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/tooltips/border_html.html">border.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/tooltips/callbacks_html.html">callbacks.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/tooltips/custom-line_html.html">custom-line.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/tooltips/custom-pie_html.html">custom-pie.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/tooltips/custom-points_html.html">custom-points.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/tooltips/interactions_html.html">interactions.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/tooltips/positioning_html.html">positioning.html</a>
  
    <li><a href="../../../../node_modules/chart_js/samples/utils_js.html">utils.js</a>
  
    <li><a href="../../../../node_modules/chart_js/scripts/deploy_sh.html">deploy.sh</a>
  
    <li><a href="../../../../node_modules/chart_js/scripts/release_sh.html">release.sh</a>
  
    <li><a href="../../../../node_modules/chart_js/src/chart_js.html">chart.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/charts/Chart_Bar_js.html">Chart.Bar.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/charts/Chart_Bubble_js.html">Chart.Bubble.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/charts/Chart_Doughnut_js.html">Chart.Doughnut.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/charts/Chart_Line_js.html">Chart.Line.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/charts/Chart_PolarArea_js.html">Chart.PolarArea.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/charts/Chart_Radar_js.html">Chart.Radar.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/charts/Chart_Scatter_js.html">Chart.Scatter.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/controllers/controller_bar_js.html">controller.bar.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/controllers/controller_bubble_js.html">controller.bubble.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/controllers/controller_doughnut_js.html">controller.doughnut.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/controllers/controller_line_js.html">controller.line.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/controllers/controller_polarArea_js.html">controller.polarArea.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/controllers/controller_radar_js.html">controller.radar.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/controllers/controller_scatter_js.html">controller.scatter.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/core/core_animation_js.html">core.animation.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/core/core_animations_js.html">core.animations.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/core/core_controller_js.html">core.controller.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/core/core_datasetController_js.html">core.datasetController.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/core/core_defaults_js.html">core.defaults.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/core/core_element_js.html">core.element.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/core/core_helpers_js.html">core.helpers.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/core/core_interaction_js.html">core.interaction.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/core/core_js.html">core.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/core/core_layouts_js.html">core.layouts.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/core/core_plugins_js.html">core.plugins.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/core/core_scale_js.html">core.scale.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/core/core_scaleService_js.html">core.scaleService.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/core/core_ticks_js.html">core.ticks.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/core/core_tooltip_js.html">core.tooltip.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/elements/element_arc_js.html">element.arc.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/elements/element_line_js.html">element.line.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/elements/element_point_js.html">element.point.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/elements/element_rectangle_js.html">element.rectangle.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/elements/index_js.html">index.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/helpers/helpers_canvas_js.html">helpers.canvas.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/helpers/helpers_core_js.html">helpers.core.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/helpers/helpers_easing_js.html">helpers.easing.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/helpers/helpers_options_js.html">helpers.options.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/helpers/index_js.html">index.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/platforms/platform_basic_js.html">platform.basic.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/platforms/platform_dom_js.html">platform.dom.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/platforms/platform_js.html">platform.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/plugins/index_js.html">index.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/plugins/plugin_filler_js.html">plugin.filler.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/plugins/plugin_legend_js.html">plugin.legend.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/plugins/plugin_title_js.html">plugin.title.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/scales/scale_category_js.html">scale.category.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/scales/scale_linear_js.html">scale.linear.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/scales/scale_linearbase_js.html">scale.linearbase.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/scales/scale_logarithmic_js.html">scale.logarithmic.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/scales/scale_radialLinear_js.html">scale.radialLinear.js</a>
  
    <li><a href="../../../../node_modules/chart_js/src/scales/scale_time_js.html">scale.time.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/controller_bar/bar-thickness-absolute_json.html">bar-thickness-absolute.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/controller_bar/bar-thickness-flex-offset_json.html">bar-thickness-flex-offset.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/controller_bar/bar-thickness-flex_json.html">bar-thickness-flex.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/controller_bar/bar-thickness-max_json.html">bar-thickness-max.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/controller_bar/bar-thickness-min-interval_json.html">bar-thickness-min-interval.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/controller_bar/bar-thickness-multiple_json.html">bar-thickness-multiple.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/controller_bar/bar-thickness-no-overlap_json.html">bar-thickness-no-overlap.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/controller_bar/bar-thickness-offset_json.html">bar-thickness-offset.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/controller_bar/bar-thickness-single-xy_json.html">bar-thickness-single-xy.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/controller_bar/bar-thickness-single_json.html">bar-thickness-single.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/controller_bar/bar-thickness-stacked_json.html">bar-thickness-stacked.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/controller_bubble/point-style_json.html">point-style.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/controller_line/point-style_json.html">point-style.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/controller_polarArea/angle-array_json.html">angle-array.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/controller_polarArea/angle-undefined_json.html">angle-undefined.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/controller_radar/point-style_json.html">point-style.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/core_scale/label-offset-vertical-axes_json.html">label-offset-vertical-axes.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/core_scale/tick-drawing_json.html">tick-drawing.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/element_point/point-style-circle_json.html">point-style-circle.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/element_point/point-style-cross-rot_json.html">point-style-cross-rot.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/element_point/point-style-cross_json.html">point-style-cross.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/element_point/point-style-dash_json.html">point-style-dash.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/element_point/point-style-line_json.html">point-style-line.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/element_point/point-style-rect-rot_json.html">point-style-rect-rot.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/element_point/point-style-rect-rounded_json.html">point-style-rect-rounded.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/element_point/point-style-rect_json.html">point-style-rect.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/element_point/point-style-star_json.html">point-style-star.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/element_point/point-style-triangle_json.html">point-style-triangle.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/plugin_filler/fill-line-boundary-end-span_json.html">fill-line-boundary-end-span.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/plugin_filler/fill-line-boundary-end_json.html">fill-line-boundary-end.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/plugin_filler/fill-line-boundary-origin-span_json.html">fill-line-boundary-origin-span.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/plugin_filler/fill-line-boundary-origin-spline-span_json.html">fill-line-boundary-origin-spline-span.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/plugin_filler/fill-line-boundary-origin-spline_json.html">fill-line-boundary-origin-spline.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/plugin_filler/fill-line-boundary-origin-stepped-span_json.html">fill-line-boundary-origin-stepped-span.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/plugin_filler/fill-line-boundary-origin-stepped_json.html">fill-line-boundary-origin-stepped.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/plugin_filler/fill-line-boundary-origin_json.html">fill-line-boundary-origin.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/plugin_filler/fill-line-boundary-start-span_json.html">fill-line-boundary-start-span.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/plugin_filler/fill-line-boundary-start_json.html">fill-line-boundary-start.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/plugin_filler/fill-line-dataset-span_json.html">fill-line-dataset-span.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/plugin_filler/fill-line-dataset-spline-span_json.html">fill-line-dataset-spline-span.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/plugin_filler/fill-line-dataset-spline_json.html">fill-line-dataset-spline.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/plugin_filler/fill-line-dataset_json.html">fill-line-dataset.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/plugin_filler/fill-radar-boundary-origin-spline_json.html">fill-radar-boundary-origin-spline.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/fixtures/plugin_filler/fill-radar-boundary-origin_json.html">fill-radar-boundary-origin.json</a>
  
    <li><a href="../../../../node_modules/chart_js/test/jasmine_context_js.html">jasmine.context.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/jasmine_index_js.html">jasmine.index.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/jasmine_matchers_js.html">jasmine.matchers.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/jasmine_utils_js.html">jasmine.utils.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/controller_bar_tests_js.html">controller.bar.tests.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/controller_bubble_tests_js.html">controller.bubble.tests.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/controller_doughnut_tests_js.html">controller.doughnut.tests.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/controller_line_tests_js.html">controller.line.tests.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/controller_polarArea_tests_js.html">controller.polarArea.tests.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/controller_radar_tests_js.html">controller.radar.tests.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/controller_scatter_test_js.html">controller.scatter.test.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/core_controller_tests_js.html">core.controller.tests.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/core_datasetController_tests_js.html">core.datasetController.tests.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/core_element_tests_js.html">core.element.tests.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/core_helpers_tests_js.html">core.helpers.tests.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/core_interaction_tests_js.html">core.interaction.tests.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/core_layouts_tests_js.html">core.layouts.tests.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/core_plugin_tests_js.html">core.plugin.tests.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/core_scale_tests_js.html">core.scale.tests.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/core_scaleService_tests_js.html">core.scaleService.tests.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/core_ticks_tests_js.html">core.ticks.tests.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/core_tooltip_tests_js.html">core.tooltip.tests.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/element_arc_tests_js.html">element.arc.tests.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/element_line_tests_js.html">element.line.tests.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/element_point_tests_js.html">element.point.tests.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/element_rectangle_tests_js.html">element.rectangle.tests.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/global_defaults_tests_js.html">global.defaults.tests.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/global_deprecations_tests_js.html">global.deprecations.tests.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/global_namespace_tests_js.html">global.namespace.tests.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/helpers_canvas_tests_js.html">helpers.canvas.tests.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/helpers_core_tests_js.html">helpers.core.tests.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/helpers_easing_tests_js.html">helpers.easing.tests.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/helpers_options_tests_js.html">helpers.options.tests.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/platform_dom_tests_js.html">platform.dom.tests.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/plugin_filler_tests_js.html">plugin.filler.tests.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/plugin_legend_tests_js.html">plugin.legend.tests.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/plugin_title_tests_js.html">plugin.title.tests.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/scale_category_tests_js.html">scale.category.tests.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/scale_linear_tests_js.html">scale.linear.tests.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/scale_logarithmic_tests_js.html">scale.logarithmic.tests.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/scale_radialLinear_tests_js.html">scale.radialLinear.tests.js</a>
  
    <li><a href="../../../../node_modules/chart_js/test/specs/scale_time_tests_js.html">scale.time.tests.js</a>
  
    <li><a href="../../../../node_modules/chartjs-color-string/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../../../node_modules/chartjs-color-string/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../../node_modules/chartjs-color-string/README_md.html">README</a>
  
    <li><a href="../../../../node_modules/chartjs-color-string/color-string_js.html">color-string.js</a>
  
    <li><a href="../../../../node_modules/chartjs-color-string/package_json.html">package.json</a>
  
    <li><a href="../../../../node_modules/chartjs-color-string/test/basic_js.html">basic.js</a>
  
    <li><a href="../../../../node_modules/chartjs-color/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../../../node_modules/chartjs-color/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../../node_modules/chartjs-color/README_md.html">README</a>
  
    <li><a href="../../../../node_modules/chartjs-color/index_js.html">index.js</a>
  
    <li><a href="../../../../node_modules/chartjs-color/package_json.html">package.json</a>
  
    <li><a href="../../../../node_modules/color-convert/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../../../node_modules/color-convert/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../../node_modules/color-convert/README_md.html">README</a>
  
    <li><a href="../../../../node_modules/color-convert/component_json.html">component.json</a>
  
    <li><a href="../../../../node_modules/color-convert/conversions_js.html">conversions.js</a>
  
    <li><a href="../../../../node_modules/color-convert/index_js.html">index.js</a>
  
    <li><a href="../../../../node_modules/color-convert/package_json.html">package.json</a>
  
    <li><a href="../../../../node_modules/color-convert/test/basic_js.html">basic.js</a>
  
    <li><a href="../../../../node_modules/color-convert/test/speed_js.html">speed.js</a>
  
    <li><a href="../../../../node_modules/color-name/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../../node_modules/color-name/README_md.html">README</a>
  
    <li><a href="../../../../node_modules/color-name/index_js.html">index.js</a>
  
    <li><a href="../../../../node_modules/color-name/package_json.html">package.json</a>
  
    <li><a href="../../../../node_modules/datatables_net-bs4/Readme_md.html">Readme</a>
  
    <li><a href="../../../../node_modules/datatables_net-bs4/css/dataTables_bootstrap4_css.html">dataTables.bootstrap4.css</a>
  
    <li><a href="../../../../node_modules/datatables_net-bs4/css/dataTables_bootstrap4_min_css.html">dataTables.bootstrap4.min.css</a>
  
    <li><a href="../../../../node_modules/datatables_net-bs4/js/dataTables_bootstrap4_js.html">dataTables.bootstrap4.js</a>
  
    <li><a href="../../../../node_modules/datatables_net-bs4/js/dataTables_bootstrap4_min_js.html">dataTables.bootstrap4.min.js</a>
  
    <li><a href="../../../../node_modules/datatables_net-bs4/package_json.html">package.json</a>
  
    <li><a href="../../../../node_modules/datatables_net/License_txt.html">License</a>
  
    <li><a href="../../../../node_modules/datatables_net/Readme_md.html">Readme</a>
  
    <li><a href="../../../../node_modules/datatables_net/js/jquery_dataTables_js.html">jquery.dataTables.js</a>
  
    <li><a href="../../../../node_modules/datatables_net/js/jquery_dataTables_min_js.html">jquery.dataTables.min.js</a>
  
    <li><a href="../../../../node_modules/datatables_net/package_json.html">package.json</a>
  
    <li><a href="../../../../node_modules/font-awesome/HELP-US-OUT_txt.html">HELP-US-OUT</a>
  
    <li><a href="../../../../node_modules/font-awesome/README_md.html">README</a>
  
    <li><a href="../../../../node_modules/font-awesome/css/font-awesome_css.html">font-awesome.css</a>
  
    <li><a href="../../../../node_modules/font-awesome/css/font-awesome_css_map.html">font-awesome.css.map</a>
  
    <li><a href="../../../../node_modules/font-awesome/css/font-awesome_min_css.html">font-awesome.min.css</a>
  
    <li><a href="../../../../node_modules/font-awesome/less/animated_less.html">animated.less</a>
  
    <li><a href="../../../../node_modules/font-awesome/less/bordered-pulled_less.html">bordered-pulled.less</a>
  
    <li><a href="../../../../node_modules/font-awesome/less/core_less.html">core.less</a>
  
    <li><a href="../../../../node_modules/font-awesome/less/fixed-width_less.html">fixed-width.less</a>
  
    <li><a href="../../../../node_modules/font-awesome/less/font-awesome_less.html">font-awesome.less</a>
  
    <li><a href="../../../../node_modules/font-awesome/less/icons_less.html">icons.less</a>
  
    <li><a href="../../../../node_modules/font-awesome/less/larger_less.html">larger.less</a>
  
    <li><a href="../../../../node_modules/font-awesome/less/list_less.html">list.less</a>
  
    <li><a href="../../../../node_modules/font-awesome/less/mixins_less.html">mixins.less</a>
  
    <li><a href="../../../../node_modules/font-awesome/less/path_less.html">path.less</a>
  
    <li><a href="../../../../node_modules/font-awesome/less/rotated-flipped_less.html">rotated-flipped.less</a>
  
    <li><a href="../../../../node_modules/font-awesome/less/screen-reader_less.html">screen-reader.less</a>
  
    <li><a href="../../../../node_modules/font-awesome/less/stacked_less.html">stacked.less</a>
  
    <li><a href="../../../../node_modules/font-awesome/less/variables_less.html">variables.less</a>
  
    <li><a href="../../../../node_modules/font-awesome/package_json.html">package.json</a>
  
    <li><a href="../../../../node_modules/font-awesome/scss/_animated_scss.html">_animated.scss</a>
  
    <li><a href="../../../../node_modules/font-awesome/scss/_bordered-pulled_scss.html">_bordered-pulled.scss</a>
  
    <li><a href="../../../../node_modules/font-awesome/scss/_core_scss.html">_core.scss</a>
  
    <li><a href="../../../../node_modules/font-awesome/scss/_fixed-width_scss.html">_fixed-width.scss</a>
  
    <li><a href="../../../../node_modules/font-awesome/scss/_icons_scss.html">_icons.scss</a>
  
    <li><a href="../../../../node_modules/font-awesome/scss/_larger_scss.html">_larger.scss</a>
  
    <li><a href="../../../../node_modules/font-awesome/scss/_list_scss.html">_list.scss</a>
  
    <li><a href="../../../../node_modules/font-awesome/scss/_mixins_scss.html">_mixins.scss</a>
  
    <li><a href="../../../../node_modules/font-awesome/scss/_path_scss.html">_path.scss</a>
  
    <li><a href="../../../../node_modules/font-awesome/scss/_rotated-flipped_scss.html">_rotated-flipped.scss</a>
  
    <li><a href="../../../../node_modules/font-awesome/scss/_screen-reader_scss.html">_screen-reader.scss</a>
  
    <li><a href="../../../../node_modules/font-awesome/scss/_stacked_scss.html">_stacked.scss</a>
  
    <li><a href="../../../../node_modules/font-awesome/scss/_variables_scss.html">_variables.scss</a>
  
    <li><a href="../../../../node_modules/font-awesome/scss/font-awesome_scss.html">font-awesome.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/CONTRIBUTING_md.html">CONTRIBUTING</a>
  
    <li><a href="../../../../node_modules/foundation-sites/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../../node_modules/foundation-sites/README_md.html">README</a>
  
    <li><a href="../../../../node_modules/foundation-sites/_vendor/sassy-lists/stylesheets/functions/_contain_scss.html">_contain.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/_vendor/sassy-lists/stylesheets/functions/_purge_scss.html">_purge.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/_vendor/sassy-lists/stylesheets/functions/_remove_scss.html">_remove.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/_vendor/sassy-lists/stylesheets/functions/_replace_scss.html">_replace.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/_vendor/sassy-lists/stylesheets/functions/_to-list_scss.html">_to-list.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/_vendor/sassy-lists/stylesheets/helpers/_missing-dependencies_scss.html">_missing-dependencies.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/_vendor/sassy-lists/stylesheets/helpers/_true_scss.html">_true.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/assets/foundation-float_scss.html">foundation-float.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/assets/foundation-prototype_scss.html">foundation-prototype.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/assets/foundation-rtl_scss.html">foundation-rtl.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/assets/foundation_scss.html">foundation.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/code-of-conduct_md.html">code-of-conduct</a>
  
    <li><a href="../../../../node_modules/foundation-sites/customizer/complete_json.html">complete.json</a>
  
    <li><a href="../../../../node_modules/foundation-sites/customizer/essential_json.html">essential.json</a>
  
    <li><a href="../../../../node_modules/foundation-sites/customizer/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/customizer/lib/index_js.html">index.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/customizer/lib/js_js.html">js.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/customizer/lib/sass_js.html">sass.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/css/foundation-float_css.html">foundation-float.css</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/css/foundation-float_css_map.html">foundation-float.css.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/css/foundation-float_min_css.html">foundation-float.min.css</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/css/foundation-float_min_css_map.html">foundation-float.min.css.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/css/foundation-prototype_css.html">foundation-prototype.css</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/css/foundation-prototype_css_map.html">foundation-prototype.css.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/css/foundation-prototype_min_css.html">foundation-prototype.min.css</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/css/foundation-prototype_min_css_map.html">foundation-prototype.min.css.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/css/foundation-rtl_css.html">foundation-rtl.css</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/css/foundation-rtl_css_map.html">foundation-rtl.css.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/css/foundation-rtl_min_css.html">foundation-rtl.min.css</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/css/foundation-rtl_min_css_map.html">foundation-rtl.min.css.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/css/foundation_css.html">foundation.css</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/css/foundation_css_map.html">foundation.css.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/css/foundation_min_css.html">foundation.min.css</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/css/foundation_min_css_map.html">foundation.min.css.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/foundation_cjs_js.html">foundation.cjs.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/foundation_cjs_js_map.html">foundation.cjs.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/foundation_d_ts.html">foundation.d.ts</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/foundation_es6_js.html">foundation.es6.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/foundation_es6_js_map.html">foundation.es6.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/foundation_esm_js.html">foundation.esm.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/foundation_esm_js_map.html">foundation.esm.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/foundation_js.html">foundation.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/foundation_js_map.html">foundation.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/foundation_min_js.html">foundation.min.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/foundation_min_js_map.html">foundation.min.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_abide_js.html">foundation.abide.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_abide_js_map.html">foundation.abide.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_abide_min_js.html">foundation.abide.min.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_abide_min_js_map.html">foundation.abide.min.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_accordion_js.html">foundation.accordion.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_accordion_js_map.html">foundation.accordion.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_accordion_min_js.html">foundation.accordion.min.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_accordion_min_js_map.html">foundation.accordion.min.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_accordionMenu_js.html">foundation.accordionMenu.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_accordionMenu_js_map.html">foundation.accordionMenu.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_accordionMenu_min_js.html">foundation.accordionMenu.min.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_accordionMenu_min_js_map.html">foundation.accordionMenu.min.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_core_js.html">foundation.core.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_core_js_map.html">foundation.core.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_core_min_js.html">foundation.core.min.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_core_min_js_map.html">foundation.core.min.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_drilldown_js.html">foundation.drilldown.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_drilldown_js_map.html">foundation.drilldown.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_drilldown_min_js.html">foundation.drilldown.min.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_drilldown_min_js_map.html">foundation.drilldown.min.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_dropdown_js.html">foundation.dropdown.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_dropdown_js_map.html">foundation.dropdown.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_dropdown_min_js.html">foundation.dropdown.min.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_dropdown_min_js_map.html">foundation.dropdown.min.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_dropdownMenu_js.html">foundation.dropdownMenu.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_dropdownMenu_js_map.html">foundation.dropdownMenu.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_dropdownMenu_min_js.html">foundation.dropdownMenu.min.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_dropdownMenu_min_js_map.html">foundation.dropdownMenu.min.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_equalizer_js.html">foundation.equalizer.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_equalizer_js_map.html">foundation.equalizer.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_equalizer_min_js.html">foundation.equalizer.min.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_equalizer_min_js_map.html">foundation.equalizer.min.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_interchange_js.html">foundation.interchange.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_interchange_js_map.html">foundation.interchange.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_interchange_min_js.html">foundation.interchange.min.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_interchange_min_js_map.html">foundation.interchange.min.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_magellan_js.html">foundation.magellan.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_magellan_js_map.html">foundation.magellan.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_magellan_min_js.html">foundation.magellan.min.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_magellan_min_js_map.html">foundation.magellan.min.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_offcanvas_js.html">foundation.offcanvas.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_offcanvas_js_map.html">foundation.offcanvas.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_offcanvas_min_js.html">foundation.offcanvas.min.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_offcanvas_min_js_map.html">foundation.offcanvas.min.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_orbit_js.html">foundation.orbit.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_orbit_js_map.html">foundation.orbit.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_orbit_min_js.html">foundation.orbit.min.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_orbit_min_js_map.html">foundation.orbit.min.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_responsiveAccordionTabs_js.html">foundation.responsiveAccordionTabs.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_responsiveAccordionTabs_js_map.html">foundation.responsiveAccordionTabs.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_responsiveAccordionTabs_min_js.html">foundation.responsiveAccordionTabs.min.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_responsiveAccordionTabs_min_js_map.html">foundation.responsiveAccordionTabs.min.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_responsiveMenu_js.html">foundation.responsiveMenu.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_responsiveMenu_js_map.html">foundation.responsiveMenu.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_responsiveMenu_min_js.html">foundation.responsiveMenu.min.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_responsiveMenu_min_js_map.html">foundation.responsiveMenu.min.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_responsiveToggle_js.html">foundation.responsiveToggle.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_responsiveToggle_js_map.html">foundation.responsiveToggle.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_responsiveToggle_min_js.html">foundation.responsiveToggle.min.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_responsiveToggle_min_js_map.html">foundation.responsiveToggle.min.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_reveal_js.html">foundation.reveal.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_reveal_js_map.html">foundation.reveal.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_reveal_min_js.html">foundation.reveal.min.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_reveal_min_js_map.html">foundation.reveal.min.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_slider_js.html">foundation.slider.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_slider_js_map.html">foundation.slider.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_slider_min_js.html">foundation.slider.min.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_slider_min_js_map.html">foundation.slider.min.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_smoothScroll_js.html">foundation.smoothScroll.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_smoothScroll_js_map.html">foundation.smoothScroll.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_smoothScroll_min_js.html">foundation.smoothScroll.min.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_smoothScroll_min_js_map.html">foundation.smoothScroll.min.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_sticky_js.html">foundation.sticky.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_sticky_js_map.html">foundation.sticky.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_sticky_min_js.html">foundation.sticky.min.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_sticky_min_js_map.html">foundation.sticky.min.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_tabs_js.html">foundation.tabs.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_tabs_js_map.html">foundation.tabs.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_tabs_min_js.html">foundation.tabs.min.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_tabs_min_js_map.html">foundation.tabs.min.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_toggler_js.html">foundation.toggler.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_toggler_js_map.html">foundation.toggler.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_toggler_min_js.html">foundation.toggler.min.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_toggler_min_js_map.html">foundation.toggler.min.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_tooltip_js.html">foundation.tooltip.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_tooltip_js_map.html">foundation.tooltip.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_tooltip_min_js.html">foundation.tooltip.min.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_tooltip_min_js_map.html">foundation.tooltip.min.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_util_box_js.html">foundation.util.box.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_util_box_js_map.html">foundation.util.box.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_util_box_min_js.html">foundation.util.box.min.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_util_box_min_js_map.html">foundation.util.box.min.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_util_imageLoader_js.html">foundation.util.imageLoader.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_util_imageLoader_js_map.html">foundation.util.imageLoader.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_util_imageLoader_min_js.html">foundation.util.imageLoader.min.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_util_imageLoader_min_js_map.html">foundation.util.imageLoader.min.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_util_keyboard_js.html">foundation.util.keyboard.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_util_keyboard_js_map.html">foundation.util.keyboard.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_util_keyboard_min_js.html">foundation.util.keyboard.min.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_util_keyboard_min_js_map.html">foundation.util.keyboard.min.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_util_mediaQuery_js.html">foundation.util.mediaQuery.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_util_mediaQuery_js_map.html">foundation.util.mediaQuery.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_util_mediaQuery_min_js.html">foundation.util.mediaQuery.min.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_util_mediaQuery_min_js_map.html">foundation.util.mediaQuery.min.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_util_motion_js.html">foundation.util.motion.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_util_motion_js_map.html">foundation.util.motion.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_util_motion_min_js.html">foundation.util.motion.min.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_util_motion_min_js_map.html">foundation.util.motion.min.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_util_nest_js.html">foundation.util.nest.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_util_nest_js_map.html">foundation.util.nest.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_util_nest_min_js.html">foundation.util.nest.min.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_util_nest_min_js_map.html">foundation.util.nest.min.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_util_timer_js.html">foundation.util.timer.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_util_timer_js_map.html">foundation.util.timer.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_util_timer_min_js.html">foundation.util.timer.min.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_util_timer_min_js_map.html">foundation.util.timer.min.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_util_touch_js.html">foundation.util.touch.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_util_touch_js_map.html">foundation.util.touch.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_util_touch_min_js.html">foundation.util.touch.min.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_util_touch_min_js_map.html">foundation.util.touch.min.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_util_triggers_js.html">foundation.util.triggers.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_util_triggers_js_map.html">foundation.util.triggers.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_util_triggers_min_js.html">foundation.util.triggers.min.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/dist/js/plugins/foundation_util_triggers_min_js_map.html">foundation.util.triggers.min.js.map</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/assets/img/gulpfile_js.html">gulpfile.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/assets/js/docs_ad_js.html">docs.ad.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/assets/js/docs_buildingBlocks_js.html">docs.buildingBlocks.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/assets/js/docs_examples_js.html">docs.examples.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/assets/js/docs_interchangeMap_js.html">docs.interchangeMap.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/assets/js/docs_js.html">docs.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/assets/js/docs_kissmetrics_js.html">docs.kissmetrics.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/assets/partials/interchange-default_html.html">interchange-default.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/assets/partials/interchange-large_html.html">interchange-large.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/assets/partials/interchange-medium_html.html">interchange-medium.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/assets/partials/sticky-nav_html.html">sticky-nav.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/assets/scss/_accordion-content_scss.html">_accordion-content.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/assets/scss/_component-list_scss.html">_component-list.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/assets/scss/_course-callout_scss.html">_course-callout.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/assets/scss/_docs-footer_scss.html">_docs-footer.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/assets/scss/content/_install_scss.html">_install.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/assets/scss/docs_scss.html">docs.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/assets/scss/examples/_grid_scss.html">_grid.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/assets/scss/examples/_motion-ui_scss.html">_motion-ui.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/assets/scss/examples/_off-canvas_scss.html">_off-canvas.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/assets/scss/examples/_orbit_scss.html">_orbit.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/assets/scss/examples/_responsive-embed_scss.html">_responsive-embed.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/assets/scss/examples/_reveal_scss.html">_reveal.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/layout/default_html.html">default.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/abide_md.html">abide</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/accessibility_md.html">accessibility</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/accordion-menu_md.html">accordion-menu</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/accordion_md.html">accordion</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/badge_md.html">badge</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/breadcrumbs_md.html">breadcrumbs</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/button-group_md.html">button-group</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/button_md.html">button</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/callout_md.html">callout</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/card_md.html">card</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/close-button_md.html">close-button</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/compatibility_md.html">compatibility</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/drilldown-menu_md.html">drilldown-menu</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/dropdown-menu_md.html">dropdown-menu</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/dropdown_md.html">dropdown</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/equalizer_md.html">equalizer</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/flex-grid_md.html">flex-grid</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/flexbox-mode_md.html">flexbox-mode</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/flexbox-utilities_md.html">flexbox-utilities</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/float-classes_md.html">float-classes</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/forms_md.html">forms</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/global_md.html">global</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/grid_md.html">grid</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/index_md.html">index</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/installation_md.html">installation</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/interchange_md.html">interchange</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/javascript-utilities_md.html">javascript-utilities</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/javascript_md.html">javascript</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/kitchen-sink_md.html">kitchen-sink</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/label_md.html">label</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/magellan_md.html">magellan</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/media-object_md.html">media-object</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/media-queries_md.html">media-queries</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/menu_md.html">menu</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/motion-ui_md.html">motion-ui</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/navigation_md.html">navigation</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/off-canvas_md.html">off-canvas</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/orbit_md.html">orbit</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/pagination_md.html">pagination</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/panini_md.html">panini</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/progress-bar_md.html">progress-bar</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/prototyping-utilities_md.html">prototyping-utilities</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/responsive-accordion-tabs_md.html">responsive-accordion-tabs</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/responsive-embed_md.html">responsive-embed</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/responsive-navigation_md.html">responsive-navigation</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/reveal_md.html">reveal</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/rtl_md.html">rtl</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/sass-functions_md.html">sass-functions</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/sass-mixins_md.html">sass-mixins</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/sass_md.html">sass</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/slider_md.html">slider</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/smooth-scroll_md.html">smooth-scroll</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/starter-projects_md.html">starter-projects</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/sticky_md.html">sticky</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/style-sherpa_md.html">style-sherpa</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/switch_md.html">switch</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/table_md.html">table</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/tabs_md.html">tabs</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/thumbnail_md.html">thumbnail</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/toggler_md.html">toggler</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/tooltip_md.html">tooltip</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/top-bar_md.html">top-bar</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/typography-base_md.html">typography-base</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/typography-helpers_md.html">typography-helpers</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/visibility_md.html">visibility</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/pages/xy-grid_md.html">xy-grid</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/partials/component-list_html.html">component-list.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/partials/docs-video-codepen_html.html">docs-video-codepen.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/partials/footer-contact_html.html">footer-contact.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/partials/footer_html.html">footer.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/partials/info-banner_html.html">info-banner.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/partials/mobile-navigation_html.html">mobile-navigation.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/partials/navigation_html.html">navigation.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/partials/newsletter-signup-rr_html.html">newsletter-signup-rr.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/partials/off-canvi_html.html">off-canvi.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/partials/search-bar_html.html">search-bar.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/partials/toc-template_hbs.html">toc-template.hbs</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docs/partials/training-callout_html.html">training-callout.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/docslink_sh.html">docslink.sh</a>
  
    <li><a href="../../../../node_modules/foundation-sites/gulp/config_js.html">config.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/gulp/tasks/babel-error_js.html">babel-error.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/gulp/tasks/check_js.html">check.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/gulp/tasks/clean_js.html">clean.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/gulp/tasks/copy_js.html">copy.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/gulp/tasks/customizer_js.html">customizer.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/gulp/tasks/deploy_js.html">deploy.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/gulp/tasks/docs_js.html">docs.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/gulp/tasks/javascript_js.html">javascript.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/gulp/tasks/lint_js.html">lint.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/gulp/tasks/sass_js.html">sass.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/gulp/tasks/test_js.html">test.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/gulp/utils_js.html">utils.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/gulpfile_js.html">gulpfile.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/entries/foundation-plugins_js.html">foundation-plugins.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/entries/foundation_js.html">foundation.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/entries/plugins/foundation_abide_js.html">foundation.abide.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/entries/plugins/foundation_accordion_js.html">foundation.accordion.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/entries/plugins/foundation_accordionMenu_js.html">foundation.accordionMenu.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/entries/plugins/foundation_core_js.html">foundation.core.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/entries/plugins/foundation_drilldown_js.html">foundation.drilldown.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/entries/plugins/foundation_dropdown_js.html">foundation.dropdown.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/entries/plugins/foundation_dropdownMenu_js.html">foundation.dropdownMenu.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/entries/plugins/foundation_equalizer_js.html">foundation.equalizer.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/entries/plugins/foundation_interchange_js.html">foundation.interchange.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/entries/plugins/foundation_magellan_js.html">foundation.magellan.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/entries/plugins/foundation_offcanvas_js.html">foundation.offcanvas.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/entries/plugins/foundation_orbit_js.html">foundation.orbit.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/entries/plugins/foundation_responsiveAccordionTabs_js.html">foundation.responsiveAccordionTabs.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/entries/plugins/foundation_responsiveMenu_js.html">foundation.responsiveMenu.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/entries/plugins/foundation_responsiveToggle_js.html">foundation.responsiveToggle.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/entries/plugins/foundation_reveal_js.html">foundation.reveal.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/entries/plugins/foundation_slider_js.html">foundation.slider.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/entries/plugins/foundation_smoothScroll_js.html">foundation.smoothScroll.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/entries/plugins/foundation_sticky_js.html">foundation.sticky.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/entries/plugins/foundation_tabs_js.html">foundation.tabs.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/entries/plugins/foundation_toggler_js.html">foundation.toggler.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/entries/plugins/foundation_tooltip_js.html">foundation.tooltip.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/entries/plugins/foundation_util_box_js.html">foundation.util.box.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/entries/plugins/foundation_util_imageLoader_js.html">foundation.util.imageLoader.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/entries/plugins/foundation_util_keyboard_js.html">foundation.util.keyboard.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/entries/plugins/foundation_util_mediaQuery_js.html">foundation.util.mediaQuery.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/entries/plugins/foundation_util_motion_js.html">foundation.util.motion.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/entries/plugins/foundation_util_nest_js.html">foundation.util.nest.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/entries/plugins/foundation_util_timer_js.html">foundation.util.timer.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/entries/plugins/foundation_util_touch_js.html">foundation.util.touch.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/entries/plugins/foundation_util_triggers_js.html">foundation.util.triggers.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/foundation_abide_js.html">foundation.abide.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/foundation_accordion_js.html">foundation.accordion.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/foundation_accordionMenu_js.html">foundation.accordionMenu.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/foundation_core_js.html">foundation.core.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/foundation_core_plugin_js.html">foundation.core.plugin.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/foundation_core_utils_js.html">foundation.core.utils.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/foundation_drilldown_js.html">foundation.drilldown.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/foundation_dropdown_js.html">foundation.dropdown.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/foundation_dropdownMenu_js.html">foundation.dropdownMenu.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/foundation_equalizer_js.html">foundation.equalizer.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/foundation_interchange_js.html">foundation.interchange.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/foundation_js.html">foundation.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/foundation_magellan_js.html">foundation.magellan.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/foundation_offcanvas_js.html">foundation.offcanvas.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/foundation_orbit_js.html">foundation.orbit.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/foundation_positionable_js.html">foundation.positionable.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/foundation_responsiveAccordionTabs_js.html">foundation.responsiveAccordionTabs.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/foundation_responsiveMenu_js.html">foundation.responsiveMenu.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/foundation_responsiveToggle_js.html">foundation.responsiveToggle.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/foundation_reveal_js.html">foundation.reveal.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/foundation_slider_js.html">foundation.slider.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/foundation_smoothScroll_js.html">foundation.smoothScroll.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/foundation_sticky_js.html">foundation.sticky.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/foundation_tabs_js.html">foundation.tabs.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/foundation_toggler_js.html">foundation.toggler.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/foundation_tooltip_js.html">foundation.tooltip.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/foundation_util_box_js.html">foundation.util.box.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/foundation_util_imageLoader_js.html">foundation.util.imageLoader.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/foundation_util_keyboard_js.html">foundation.util.keyboard.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/foundation_util_mediaQuery_js.html">foundation.util.mediaQuery.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/foundation_util_motion_js.html">foundation.util.motion.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/foundation_util_nest_js.html">foundation.util.nest.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/foundation_util_timer_js.html">foundation.util.timer.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/foundation_util_touch_js.html">foundation.util.touch.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/foundation_util_triggers_js.html">foundation.util.triggers.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/js/typescript/foundation_d_ts.html">foundation.d.ts</a>
  
    <li><a href="../../../../node_modules/foundation-sites/meteor-README_md.html">meteor-README</a>
  
    <li><a href="../../../../node_modules/foundation-sites/package_json.html">package.json</a>
  
    <li><a href="../../../../node_modules/foundation-sites/package_nuspec.html">package.nuspec</a>
  
    <li><a href="../../../../node_modules/foundation-sites/rollup_config_js.html">rollup.config.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/script/husky-commit-lint_js.html">husky-commit-lint.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/script/husky-commit-test_js.html">husky-commit-test.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/script/husky-push-test_js.html">husky-push-test.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/_global_scss.html">_global.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/components/_accordion-menu_scss.html">_accordion-menu.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/components/_accordion_scss.html">_accordion.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/components/_badge_scss.html">_badge.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/components/_breadcrumbs_scss.html">_breadcrumbs.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/components/_button-group_scss.html">_button-group.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/components/_button_scss.html">_button.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/components/_callout_scss.html">_callout.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/components/_card_scss.html">_card.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/components/_close-button_scss.html">_close-button.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/components/_drilldown_scss.html">_drilldown.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/components/_dropdown-menu_scss.html">_dropdown-menu.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/components/_dropdown_scss.html">_dropdown.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/components/_flex-video_scss.html">_flex-video.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/components/_flex_scss.html">_flex.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/components/_float_scss.html">_float.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/components/_label_scss.html">_label.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/components/_media-object_scss.html">_media-object.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/components/_menu-icon_scss.html">_menu-icon.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/components/_menu_scss.html">_menu.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/components/_off-canvas_scss.html">_off-canvas.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/components/_orbit_scss.html">_orbit.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/components/_pagination_scss.html">_pagination.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/components/_progress-bar_scss.html">_progress-bar.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/components/_responsive-embed_scss.html">_responsive-embed.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/components/_reveal_scss.html">_reveal.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/components/_slider_scss.html">_slider.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/components/_sticky_scss.html">_sticky.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/components/_switch_scss.html">_switch.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/components/_table_scss.html">_table.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/components/_tabs_scss.html">_tabs.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/components/_thumbnail_scss.html">_thumbnail.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/components/_title-bar_scss.html">_title-bar.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/components/_tooltip_scss.html">_tooltip.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/components/_top-bar_scss.html">_top-bar.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/components/_visibility_scss.html">_visibility.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/forms/_checkbox_scss.html">_checkbox.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/forms/_error_scss.html">_error.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/forms/_fieldset_scss.html">_fieldset.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/forms/_forms_scss.html">_forms.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/forms/_help-text_scss.html">_help-text.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/forms/_input-group_scss.html">_input-group.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/forms/_label_scss.html">_label.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/forms/_meter_scss.html">_meter.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/forms/_progress_scss.html">_progress.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/forms/_range_scss.html">_range.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/forms/_select_scss.html">_select.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/forms/_text_scss.html">_text.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/foundation_scss.html">foundation.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/grid/_classes_scss.html">_classes.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/grid/_column_scss.html">_column.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/grid/_flex-grid_scss.html">_flex-grid.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/grid/_grid_scss.html">_grid.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/grid/_gutter_scss.html">_gutter.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/grid/_layout_scss.html">_layout.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/grid/_position_scss.html">_position.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/grid/_row_scss.html">_row.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/grid/_size_scss.html">_size.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/prototype/_arrow_scss.html">_arrow.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/prototype/_border-box_scss.html">_border-box.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/prototype/_border-none_scss.html">_border-none.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/prototype/_bordered_scss.html">_bordered.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/prototype/_box_scss.html">_box.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/prototype/_display_scss.html">_display.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/prototype/_font-styling_scss.html">_font-styling.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/prototype/_list-style-type_scss.html">_list-style-type.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/prototype/_overflow_scss.html">_overflow.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/prototype/_position_scss.html">_position.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/prototype/_prototype_scss.html">_prototype.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/prototype/_relation_scss.html">_relation.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/prototype/_rotate_scss.html">_rotate.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/prototype/_rounded_scss.html">_rounded.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/prototype/_separator_scss.html">_separator.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/prototype/_shadow_scss.html">_shadow.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/prototype/_sizing_scss.html">_sizing.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/prototype/_spacing_scss.html">_spacing.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/prototype/_text-decoration_scss.html">_text-decoration.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/prototype/_text-transformation_scss.html">_text-transformation.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/prototype/_text-utilities_scss.html">_text-utilities.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/settings/_settings_scss.html">_settings.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/typography/_alignment_scss.html">_alignment.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/typography/_base_scss.html">_base.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/typography/_helpers_scss.html">_helpers.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/typography/_print_scss.html">_print.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/typography/_typography_scss.html">_typography.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/util/_breakpoint_scss.html">_breakpoint.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/util/_color_scss.html">_color.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/util/_direction_scss.html">_direction.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/util/_flex_scss.html">_flex.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/util/_math_scss.html">_math.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/util/_mixins_scss.html">_mixins.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/util/_selector_scss.html">_selector.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/util/_typography_scss.html">_typography.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/util/_unit_scss.html">_unit.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/util/_util_scss.html">_util.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/util/_value_scss.html">_value.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/vendor/normalize_scss.html">normalize.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/xy-grid/_cell_scss.html">_cell.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/xy-grid/_classes_scss.html">_classes.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/xy-grid/_collapse_scss.html">_collapse.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/xy-grid/_frame_scss.html">_frame.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/xy-grid/_grid_scss.html">_grid.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/xy-grid/_gutters_scss.html">_gutters.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/xy-grid/_layout_scss.html">_layout.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/xy-grid/_position_scss.html">_position.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/scss/xy-grid/_xy-grid_scss.html">_xy-grid.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/shrinkwrap_yaml.html">shrinkwrap.yaml</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/javascript/components/abide_js.html">abide.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/javascript/components/accordion_js.html">accordion.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/javascript/components/accordionMenu_js.html">accordionMenu.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/javascript/components/drilldown_js.html">drilldown.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/javascript/components/dropdown_js.html">dropdown.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/javascript/components/dropdownMenu_js.html">dropdownMenu.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/javascript/components/equalizer_js.html">equalizer.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/javascript/components/interchange_js.html">interchange.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/javascript/components/magellan_js.html">magellan.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/javascript/components/offcanvas_js.html">offcanvas.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/javascript/components/orbit_js.html">orbit.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/javascript/components/responsiveMenu_js.html">responsiveMenu.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/javascript/components/responsiveToggle_js.html">responsiveToggle.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/javascript/components/reveal_js.html">reveal.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/javascript/components/slider_js.html">slider.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/javascript/components/sticky_js.html">sticky.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/javascript/components/tabs_js.html">tabs.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/javascript/components/toggler_js.html">toggler.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/javascript/components/tooltip_js.html">tooltip.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/javascript/core/core_js.html">core.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/javascript/core/utils_js.html">utils.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/javascript/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/javascript/lib/keyboard-event-mock_js.html">keyboard-event-mock.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/javascript/lib/utils_js.html">utils.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/javascript/util/box_js.html">box.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/javascript/util/keyboard_js.html">keyboard.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/sass/_breakpoint_scss.html">_breakpoint.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/sass/_color_scss.html">_color.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/sass/_components_scss.html">_components.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/sass/_selector_scss.html">_selector.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/sass/_unit_scss.html">_unit.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/sass/_value_scss.html">_value.scss</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/sass/test_sass_js.html">test_sass.js</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/_template_html.html">_template.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/abide/abide-radio_html.html">abide-radio.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/abide/accessibility_html.html">accessibility.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/abide/hidden_and_ignored_fields_html.html">hidden_and_ignored_fields.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/abide/text_html.html">text.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/accordion-menu/accordionmenu_html.html">accordionmenu.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/accordion-menu/keyboard_html.html">keyboard.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/accordion-menu/parent-link_html.html">parent-link.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/accordion-menu/submenu-toggle_html.html">submenu-toggle.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/accordion/focus_html.html">focus.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/accordion/nested_html.html">nested.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/breadcrumbs/breadcrumbs_html.html">breadcrumbs.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/button/button-group_html.html">button-group.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/button/button_html.html">button.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/button/cursor_html.html">cursor.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/card/card_html.html">card.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/controls/close-button_html.html">close-button.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/drilldown/drilldown-menu-auto-height_html.html">drilldown-menu-auto-height.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/drilldown/drilldown-menu-parent-link_html.html">drilldown-menu-parent-link.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/drilldown/drilldown-menu-scroll-top_html.html">drilldown-menu-scroll-top.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/drilldown/drilldown-show-menu_html.html">drilldown-show-menu.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/drilldown/long-titles_html.html">long-titles.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/dropdown-menu/basic-dropdown-menu-rtl_html.html">basic-dropdown-menu-rtl.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/dropdown-menu/dropdown-menu-cross-leave_html.html">dropdown-menu-cross-leave.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/dropdown-menu/left-aligned-dropdown-menu-inside-top-bar-right_html.html">left-aligned-dropdown-menu-inside-top-bar-right.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/dropdown-menu/right-aligned-dropdown-menu_html.html">right-aligned-dropdown-menu.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/dropdown-menu/submenu-mouse-reenter_html.html">submenu-mouse-reenter.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/dropdown/basic-dropdown-rtl_html.html">basic-dropdown-rtl.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/dropdown/close-on-click_html.html">close-on-click.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/dropdown/dropdown-on-input_html.html">dropdown-on-input.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/dropdown/explicit-positioning_html.html">explicit-positioning.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/dropdown/in-top-bar_html.html">in-top-bar.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/dropdown/long_html.html">long.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/dropdown/mouse-on-browser-ui_html.html">mouse-on-browser-ui.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/dropdown/offsets_html.html">offsets.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/dropdown/open-the-same-dropdown_html.html">open-the-same-dropdown.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/dropdown/overflow-right-left-allowed_html.html">overflow-right-left-allowed.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/dropdown/overflow-right-left_html.html">overflow-right-left.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/dropdown/overflow_html.html">overflow.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/equalizer/equalizer-events_html.html">equalizer-events.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/flex-grid/column-row_html.html">column-row.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/flex-grid/nesting_html.html">nesting.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/flex-grid/top-bar_html.html">top-bar.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/flex-grid/unstack-block-grid_html.html">unstack-block-grid.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/form/input-group-float_html.html">input-group-float.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/form/input-group-xygrid_html.html">input-group-xygrid.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/form/select-icon_html.html">select-icon.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/grid/centered-columns_html.html">centered-columns.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/grid/collapse-nesting_html.html">collapse-nesting.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/grid/nesting_html.html">nesting.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/grid/uncentered-columns_html.html">uncentered-columns.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/keyboard/trap-release-focus_html.html">trap-release-focus.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/magellan/active-item_html.html">active-item.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/magellan/unordered-links_html.html">unordered-links.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/media-object/media-object-mixins-flex-mode_html.html">media-object-mixins-flex-mode.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/menu/active-menu-flex_html.html">active-menu-flex.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/menu/active-menu-float_html.html">active-menu-float.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/menu/advanced-nested-menu-flex_html.html">advanced-nested-menu-flex.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/menu/advanced-nested-menu-float_html.html">advanced-nested-menu-float.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/menu/basic-menu-flex_html.html">basic-menu-flex.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/menu/basic-menu-float_html.html">basic-menu-float.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/menu/expanded-menu-flex_html.html">expanded-menu-flex.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/menu/expanded-menu-float_html.html">expanded-menu-float.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/menu/horizontal-dropdownmenu-alignment-flex_html.html">horizontal-dropdownmenu-alignment-flex.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/menu/horizontal-dropdownmenu-alignment-float_html.html">horizontal-dropdownmenu-alignment-float.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/menu/horizontal-menu-alignment-flex_html.html">horizontal-menu-alignment-flex.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/menu/horizontal-menu-alignment-float_html.html">horizontal-menu-alignment-float.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/menu/menu-centered-flex_html.html">menu-centered-flex.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/menu/menu-centered-float_html.html">menu-centered-float.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/menu/menu-form-flex_html.html">menu-form-flex.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/menu/menu-form-float_html.html">menu-form-float.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/menu/menu-icons-flex_html.html">menu-icons-flex.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/menu/menu-icons-float_html.html">menu-icons-float.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/menu/menu-text-flex_html.html">menu-text-flex.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/menu/menu-text-float_html.html">menu-text-float.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/menu/nested-menu-flex_html.html">nested-menu-flex.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/menu/nested-menu-float_html.html">nested-menu-float.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/menu/responsive-menu-flex_html.html">responsive-menu-flex.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/menu/responsive-menu-float_html.html">responsive-menu-float.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/menu/simple-menu-flex_html.html">simple-menu-flex.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/menu/simple-menu-float_html.html">simple-menu-float.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/menu/vertical-accordionmenu-alignment-flex_html.html">vertical-accordionmenu-alignment-flex.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/menu/vertical-accordionmenu-alignment-float_html.html">vertical-accordionmenu-alignment-float.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/menu/vertical-drilldownmenu-alignment-flex_html.html">vertical-drilldownmenu-alignment-flex.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/menu/vertical-drilldownmenu-alignment-float_html.html">vertical-drilldownmenu-alignment-float.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/menu/vertical-dropdownmenu-alignment-flex_html.html">vertical-dropdownmenu-alignment-flex.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/menu/vertical-dropdownmenu-alignment-float_html.html">vertical-dropdownmenu-alignment-float.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/menu/vertical-menu-alignment-flex_html.html">vertical-menu-alignment-flex.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/menu/vertical-menu-alignment-float_html.html">vertical-menu-alignment-float.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/offcanvas/absolute_html.html">absolute.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/offcanvas/all-options_html.html">all-options.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/offcanvas/nested_html.html">nested.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/offcanvas/offcanvas-reveal-modal-large_html.html">offcanvas-reveal-modal-large.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/offcanvas/offcanvas-reveal-modal_html.html">offcanvas-reveal-modal.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/offcanvas/reveal-on-option_html.html">reveal-on-option.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/offcanvas/reveal_html.html">reveal.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/offcanvas/sticky_html.html">sticky.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/offcanvas/transition-time_html.html">transition-time.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/orbit/orbit_html.html">orbit.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/orbit/touch_html.html">touch.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/prototype/_template_html.html">_template.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/prototype/arrow_html.html">arrow.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/prototype/border-box_html.html">border-box.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/prototype/border-none_html.html">border-none.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/prototype/component-styling_html.html">component-styling.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/prototype/display_html.html">display.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/prototype/font-styling_html.html">font-styling.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/prototype/image-replacement_html.html">image-replacement.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/prototype/list-styling-ordered_html.html">list-styling-ordered.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/prototype/list-styling-unordered_html.html">list-styling-unordered.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/prototype/overflow_html.html">overflow.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/prototype/separator_html.html">separator.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/prototype/sizing-height_html.html">sizing-height.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/prototype/sizing-width_html.html">sizing-width.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/prototype/text-decoration_html.html">text-decoration.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/prototype/text-transformation_html.html">text-transformation.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/prototype/text-truncate_html.html">text-truncate.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/prototype/text-wrapping_html.html">text-wrapping.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/prototype/typescale_html.html">typescale.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/responsive-accordion-tabs/responsive-accordion-tabs_html.html">responsive-accordion-tabs.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/responsive-menu/accordion-dropdown_html.html">accordion-dropdown.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/responsive-menu/dropdown-on-right-middle_html.html">dropdown-on-right-middle.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/responsive-menu/re-init_html.html">re-init.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/responsive-menu/responsive-menu-left-dropdown_html.html">responsive-menu-left-dropdown.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/responsive-menu/responsive-menu-right-dropdown_html.html">responsive-menu-right-dropdown.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/responsive-menu/responsive-menu_html.html">responsive-menu.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/responsive-toggle/responsive-toggle_html.html">responsive-toggle.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/reveal/basic_html.html">basic.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/reveal/element-outside-dom-click_html.html">element-outside-dom-click.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/reveal/full-reveal_html.html">full-reveal.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/reveal/long-page-with-add-this_html.html">long-page-with-add-this.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/reveal/long-page_html.html">long-page.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/reveal/multiple-anchors_html.html">multiple-anchors.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/reveal/nested-deep-link_html.html">nested-deep-link.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/reveal/reveal-callout_html.html">reveal-callout.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/reveal/reveal-test-data-options_html.html">reveal-test-data-options.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/reveal/tall_html.html">tall.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/slider/nonzero-start_html.html">nonzero-start.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/slider/parseFloat_html.html">parseFloat.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/sticky/accordions-with-anchors_html.html">accordions-with-anchors.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/sticky/anchors-with-callouts_html.html">anchors-with-callouts.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/sticky/height-transition_html.html">height-transition.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/sticky/menus-with-anchors_html.html">menus-with-anchors.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/sticky/simple-menu_html.html">simple-menu.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/tabs/deep-linking_html.html">deep-linking.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/tooltip/explicit-positioning_html.html">explicit-positioning.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/top-bar/responsive-toggle-flex_html.html">responsive-toggle-flex.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/top-bar/stacking_html.html">stacking.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/triggers/containing-toggle_html.html">containing-toggle.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/triggers/programmatic_html.html">programmatic.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/typography-helpers/responsive-text-alignment_html.html">responsive-text-alignment.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/vertical-rhythm/vertical-rhythm_html.html">vertical-rhythm.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/xy-grid/block-grid_html.html">block-grid.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/xy-grid/collapse_html.html">collapse.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/xy-grid/combo-grids_html.html">combo-grids.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/xy-grid/containers_html.html">containers.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/xy-grid/flex-utilities_html.html">flex-utilities.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/xy-grid/frame-grid_html.html">frame-grid.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/xy-grid/kitchen-sink_html.html">kitchen-sink.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/xy-grid/margin-grid_html.html">margin-grid.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/xy-grid/offset_html.html">offset.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/xy-grid/padding-grid_html.html">padding-grid.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/xy-grid/responsive-gutters_html.html">responsive-gutters.html</a>
  
    <li><a href="../../../../node_modules/foundation-sites/test/visual/xy-grid/vertical-grid_html.html">vertical-grid.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/AUTHORS_txt.html">AUTHORS</a>
  
    <li><a href="../../../../node_modules/jquery-ui/CONTRIBUTING_md.html">CONTRIBUTING</a>
  
    <li><a href="../../../../node_modules/jquery-ui/Gruntfile_js.html">Gruntfile.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/README_md.html">README</a>
  
    <li><a href="../../../../node_modules/jquery-ui/bower_json.html">bower.json</a>
  
    <li><a href="../../../../node_modules/jquery-ui/build/release-test_js.html">release-test.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/build/release_js.html">release.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/build/tasks/build_js.html">build.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/build/tasks/testswarm_js.html">testswarm.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/build/themes.html">themes</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/accordion/collapsible_html.html">collapsible.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/accordion/custom-icons_html.html">custom-icons.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/accordion/default_html.html">default.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/accordion/fillspace_html.html">fillspace.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/accordion/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/accordion/no-auto-height_html.html">no-auto-height.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/accordion/sortable_html.html">sortable.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/autocomplete/categories_html.html">categories.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/autocomplete/combobox_html.html">combobox.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/autocomplete/custom-data_html.html">custom-data.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/autocomplete/default_html.html">default.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/autocomplete/folding_html.html">folding.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/autocomplete/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/autocomplete/london_xml.html">london.xml</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/autocomplete/maxheight_html.html">maxheight.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/autocomplete/multiple-remote_html.html">multiple-remote.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/autocomplete/multiple_html.html">multiple.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/autocomplete/remote-jsonp_html.html">remote-jsonp.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/autocomplete/remote-with-cache_html.html">remote-with-cache.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/autocomplete/remote_html.html">remote.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/autocomplete/search_php.html">search.php</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/autocomplete/xml_html.html">xml.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/bootstrap_js.html">bootstrap.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/button/default_html.html">default.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/button/icons_html.html">icons.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/button/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/checkboxradio/default_html.html">default.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/checkboxradio/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/checkboxradio/no-icons_html.html">no-icons.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/checkboxradio/product-selector_html.html">product-selector.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/checkboxradio/radiogroup_html.html">radiogroup.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/controlgroup/default_html.html">default.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/controlgroup/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/controlgroup/splitbutton_html.html">splitbutton.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/controlgroup/toolbar_html.html">toolbar.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/datepicker/alt-field_html.html">alt-field.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/datepicker/animation_html.html">animation.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/datepicker/buttonbar_html.html">buttonbar.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/datepicker/date-formats_html.html">date-formats.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/datepicker/date-range_html.html">date-range.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/datepicker/default_html.html">default.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/datepicker/dropdown-month-year_html.html">dropdown-month-year.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/datepicker/icon-trigger_html.html">icon-trigger.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/datepicker/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/datepicker/inline_html.html">inline.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/datepicker/localization_html.html">localization.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/datepicker/min-max_html.html">min-max.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/datepicker/multiple-calendars_html.html">multiple-calendars.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/datepicker/other-months_html.html">other-months.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/datepicker/show-week_html.html">show-week.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/demos_css.html">demos.css</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/dialog/animated_html.html">animated.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/dialog/default_html.html">default.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/dialog/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/dialog/modal-confirmation_html.html">modal-confirmation.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/dialog/modal-form_html.html">modal-form.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/dialog/modal-message_html.html">modal-message.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/draggable/constrain-movement_html.html">constrain-movement.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/draggable/cursor-style_html.html">cursor-style.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/draggable/default_html.html">default.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/draggable/events_html.html">events.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/draggable/handle_html.html">handle.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/draggable/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/draggable/revert_html.html">revert.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/draggable/scroll_html.html">scroll.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/draggable/snap-to_html.html">snap-to.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/draggable/sortable_html.html">sortable.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/draggable/visual-feedback_html.html">visual-feedback.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/droppable/accepted-elements_html.html">accepted-elements.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/droppable/default_html.html">default.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/droppable/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/droppable/photo-manager_html.html">photo-manager.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/droppable/propagation_html.html">propagation.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/droppable/revert_html.html">revert.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/droppable/visual-feedback_html.html">visual-feedback.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/effect/addClass_html.html">addClass.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/effect/animate_html.html">animate.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/effect/default_html.html">default.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/effect/easing_html.html">easing.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/effect/hide_html.html">hide.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/effect/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/effect/removeClass_html.html">removeClass.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/effect/show_html.html">show.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/effect/switchClass_html.html">switchClass.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/effect/toggle_html.html">toggle.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/effect/toggleClass_html.html">toggleClass.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/menu/categories_html.html">categories.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/menu/default_html.html">default.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/menu/icons_html.html">icons.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/menu/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/position/cycler_html.html">cycler.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/position/default_html.html">default.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/position/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/progressbar/default_html.html">default.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/progressbar/download_html.html">download.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/progressbar/indeterminate_html.html">indeterminate.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/progressbar/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/progressbar/label_html.html">label.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/resizable/animate_html.html">animate.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/resizable/aspect-ratio_html.html">aspect-ratio.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/resizable/constrain-area_html.html">constrain-area.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/resizable/default_html.html">default.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/resizable/helper_html.html">helper.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/resizable/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/resizable/max-min_html.html">max-min.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/resizable/snap-to-grid_html.html">snap-to-grid.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/resizable/synchronous-resize_html.html">synchronous-resize.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/resizable/textarea_html.html">textarea.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/resizable/visual-feedback_html.html">visual-feedback.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/selectable/default_html.html">default.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/selectable/display-grid_html.html">display-grid.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/selectable/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/selectable/serialize_html.html">serialize.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/selectmenu/custom_render_html.html">custom_render.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/selectmenu/default_html.html">default.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/selectmenu/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/selectmenu/product-selection_html.html">product-selection.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/slider/colorpicker_html.html">colorpicker.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/slider/custom-handle_html.html">custom-handle.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/slider/default_html.html">default.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/slider/hotelrooms_html.html">hotelrooms.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/slider/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/slider/multiple-vertical_html.html">multiple-vertical.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/slider/range-vertical_html.html">range-vertical.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/slider/range_html.html">range.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/slider/rangemax_html.html">rangemax.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/slider/rangemin_html.html">rangemin.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/slider/slider-vertical_html.html">slider-vertical.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/slider/steps_html.html">steps.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/sortable/connect-lists_html.html">connect-lists.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/sortable/default_html.html">default.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/sortable/display-grid_html.html">display-grid.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/sortable/empty-lists_html.html">empty-lists.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/sortable/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/sortable/items_html.html">items.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/sortable/placeholder_html.html">placeholder.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/sortable/portlets_html.html">portlets.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/spinner/currency_html.html">currency.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/spinner/decimal_html.html">decimal.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/spinner/default_html.html">default.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/spinner/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/spinner/latlong_html.html">latlong.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/spinner/overflow_html.html">overflow.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/spinner/time_html.html">time.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/tabs/ajax_html.html">ajax.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/tabs/ajax/content1_html.html">content1.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/tabs/ajax/content2_html.html">content2.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/tabs/ajax/content3-slow_php.html">content3-slow.php</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/tabs/ajax/content4-broken_php.html">content4-broken.php</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/tabs/collapsible_html.html">collapsible.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/tabs/default_html.html">default.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/tabs/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/tabs/manipulation_html.html">manipulation.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/tabs/mouseover_html.html">mouseover.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/tabs/sortable_html.html">sortable.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/tabs/vertical_html.html">vertical.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/tooltip/ajax/content1_html.html">content1.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/tooltip/ajax/content2_html.html">content2.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/tooltip/custom-animation_html.html">custom-animation.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/tooltip/custom-content_html.html">custom-content.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/tooltip/custom-style_html.html">custom-style.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/tooltip/default_html.html">default.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/tooltip/forms_html.html">forms.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/tooltip/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/tooltip/tracking_html.html">tracking.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/tooltip/video-player_html.html">video-player.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/widget/default_html.html">default.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/demos/widget/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/globalize/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/globalize/globalize_culture_de-DE_js.html">globalize.culture.de-DE.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/globalize/globalize_culture_ja-JP_js.html">globalize.culture.ja-JP.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/globalize/globalize_js.html">globalize.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_10_0/MIT-LICENSE_txt.html">MIT-LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_10_0/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_10_1/MIT-LICENSE_txt.html">MIT-LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_10_1/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_10_2/MIT-LICENSE_txt.html">MIT-LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_10_2/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_11_0/MIT-LICENSE_txt.html">MIT-LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_11_0/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_11_1/MIT-LICENSE_txt.html">MIT-LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_11_1/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_11_2/MIT-LICENSE_txt.html">MIT-LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_11_2/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_11_3/MIT-LICENSE_txt.html">MIT-LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_11_3/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_12_0/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_12_0/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_12_1/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_12_1/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_12_2/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_12_2/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_12_3/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_12_3/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_12_4/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_12_4/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_7_0/MIT-LICENSE_txt.html">MIT-LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_7_0/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_7_1/MIT-LICENSE_txt.html">MIT-LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_7_1/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_7_2/MIT-LICENSE_txt.html">MIT-LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_7_2/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_8_0/MIT-LICENSE_txt.html">MIT-LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_8_0/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_8_1/MIT-LICENSE_txt.html">MIT-LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_8_1/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_8_2/MIT-LICENSE_txt.html">MIT-LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_8_2/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_8_3/MIT-LICENSE_txt.html">MIT-LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_8_3/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_9_0/MIT-LICENSE_txt.html">MIT-LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_9_0/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_9_1/MIT-LICENSE_txt.html">MIT-LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-1_9_1/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-2_0_0/MIT-LICENSE_txt.html">MIT-LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-2_0_0/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-2_0_1/MIT-LICENSE_txt.html">MIT-LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-2_0_1/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-2_0_2/MIT-LICENSE_txt.html">MIT-LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-2_0_2/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-2_0_3/MIT-LICENSE_txt.html">MIT-LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-2_0_3/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-2_1_0/MIT-LICENSE_txt.html">MIT-LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-2_1_0/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-2_1_1/MIT-LICENSE_txt.html">MIT-LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-2_1_1/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-2_1_2/MIT-LICENSE_txt.html">MIT-LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-2_1_2/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-2_1_3/MIT-LICENSE_txt.html">MIT-LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-2_1_3/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-2_1_4/MIT-LICENSE_txt.html">MIT-LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-2_1_4/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-2_2_0/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-2_2_0/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-2_2_1/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-2_2_1/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-2_2_2/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-2_2_2/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-2_2_3/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-2_2_3/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-2_2_4/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-2_2_4/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-3_0_0/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-3_0_0/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-3_1_0/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-3_1_0/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-custom/MIT-LICENSE_txt.html">MIT-LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-custom/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-mousewheel/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-mousewheel/jquery_mousewheel_js.html">jquery.mousewheel.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-simulate/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery-simulate/jquery_simulate_js.html">jquery.simulate.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery/MIT-LICENSE_txt.html">MIT-LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jquery/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jshint/LICENSE/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/jshint/jshint_js.html">jshint.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/qunit-assert-classes/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/qunit-assert-classes/qunit-assert-classes_js.html">qunit-assert-classes.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/qunit-assert-close/MIT-LICENSE_txt.html">MIT-LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/qunit-assert-close/qunit-assert-close_js.html">qunit-assert-close.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/qunit-composite/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/qunit-composite/qunit-composite_css.html">qunit-composite.css</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/qunit-composite/qunit-composite_js.html">qunit-composite.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/qunit/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/qunit/MIT-LICENSE_txt.html">MIT-LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/qunit/qunit_css.html">qunit.css</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/qunit/qunit_js.html">qunit.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/external/requirejs/require_js.html">require.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/package_json.html">package.json</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/index_css.html">index.css</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/index_js.html">index.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/lib/bootstrap_js.html">bootstrap.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/lib/common_js.html">common.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/lib/css_js.html">css.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/lib/helper_js.html">helper.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/lib/qunit-assert-domequal_js.html">qunit-assert-domequal.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/lib/qunit_js.html">qunit.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/accordion/accordion_html.html">accordion.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/accordion/all_html.html">all.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/accordion/common_js.html">common.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/accordion/core_js.html">core.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/accordion/events_js.html">events.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/accordion/helper_js.html">helper.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/accordion/methods_js.html">methods.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/accordion/options_js.html">options.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/all_html.html">all.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/autocomplete/all_html.html">all.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/autocomplete/autocomplete_html.html">autocomplete.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/autocomplete/common_js.html">common.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/autocomplete/core_js.html">core.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/autocomplete/events_js.html">events.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/autocomplete/methods_js.html">methods.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/autocomplete/options_js.html">options.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/autocomplete/remote_object_array_labels_txt.html">remote_object_array_labels</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/autocomplete/remote_object_array_values_txt.html">remote_object_array_values</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/autocomplete/remote_string_array_txt.html">remote_string_array</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/button/all_html.html">all.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/button/button_html.html">button.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/button/common-deprecated_js.html">common-deprecated.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/button/common_js.html">common.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/button/core_js.html">core.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/button/deprecated_html.html">deprecated.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/button/deprecated_js.html">deprecated.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/button/events_js.html">events.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/button/methods_js.html">methods.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/button/options_js.html">options.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/checkboxradio/all_html.html">all.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/checkboxradio/checkboxradio_html.html">checkboxradio.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/checkboxradio/common_js.html">common.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/checkboxradio/core_js.html">core.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/checkboxradio/events_js.html">events.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/checkboxradio/methods_js.html">methods.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/checkboxradio/options_js.html">options.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/controlgroup/all_html.html">all.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/controlgroup/common_js.html">common.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/controlgroup/controlgroup_html.html">controlgroup.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/controlgroup/core_js.html">core.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/controlgroup/methods_js.html">methods.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/controlgroup/options_js.html">options.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/core/all_html.html">all.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/core/core_html.html">core.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/core/core_js.html">core.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/core/selector_js.html">selector.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/datepicker/all_html.html">all.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/datepicker/common_js.html">common.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/datepicker/core_js.html">core.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/datepicker/datepicker_html.html">datepicker.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/datepicker/events_js.html">events.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/datepicker/helper_js.html">helper.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/datepicker/methods_js.html">methods.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/datepicker/options_js.html">options.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/dialog/all_html.html">all.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/dialog/common-deprecated_js.html">common-deprecated.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/dialog/common_js.html">common.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/dialog/core_js.html">core.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/dialog/deprecated_html.html">deprecated.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/dialog/deprecated_js.html">deprecated.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/dialog/dialog_html.html">dialog.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/dialog/events_js.html">events.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/dialog/helper_js.html">helper.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/dialog/methods_js.html">methods.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/dialog/options_js.html">options.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/draggable/all_html.html">all.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/draggable/common_js.html">common.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/draggable/core_js.html">core.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/draggable/draggable_html.html">draggable.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/draggable/events_js.html">events.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/draggable/helper_js.html">helper.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/draggable/methods_js.html">methods.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/draggable/options_js.html">options.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/droppable/all_html.html">all.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/droppable/common-deprecated_js.html">common-deprecated.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/droppable/common_js.html">common.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/droppable/core_js.html">core.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/droppable/deprecated_html.html">deprecated.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/droppable/deprecated_js.html">deprecated.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/droppable/droppable_html.html">droppable.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/droppable/events_js.html">events.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/droppable/helper_js.html">helper.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/droppable/methods_js.html">methods.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/droppable/options_js.html">options.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/effects/all_html.html">all.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/effects/core_js.html">core.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/effects/effects_html.html">effects.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/effects/scale_js.html">scale.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/form-reset-mixin/all_html.html">all.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/form-reset-mixin/core_js.html">core.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/form-reset-mixin/form-reset-mixin_html.html">form-reset-mixin.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/menu/all_html.html">all.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/menu/common_js.html">common.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/menu/core_js.html">core.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/menu/events_js.html">events.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/menu/helper_js.html">helper.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/menu/menu_html.html">menu.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/menu/methods_js.html">methods.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/menu/options_js.html">options.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/position/all_html.html">all.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/position/core_js.html">core.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/position/position_html.html">position.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/progressbar/all_html.html">all.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/progressbar/common_js.html">common.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/progressbar/core_js.html">core.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/progressbar/events_js.html">events.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/progressbar/methods_js.html">methods.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/progressbar/options_js.html">options.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/progressbar/progressbar_html.html">progressbar.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/resizable/all_html.html">all.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/resizable/common_js.html">common.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/resizable/core_js.html">core.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/resizable/events_js.html">events.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/resizable/helper_js.html">helper.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/resizable/methods_js.html">methods.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/resizable/options_js.html">options.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/resizable/resizable_html.html">resizable.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/selectable/all_html.html">all.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/selectable/common_js.html">common.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/selectable/core_js.html">core.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/selectable/events_js.html">events.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/selectable/methods_js.html">methods.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/selectable/options_js.html">options.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/selectable/selectable_html.html">selectable.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/selectmenu/all_html.html">all.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/selectmenu/common_js.html">common.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/selectmenu/core_js.html">core.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/selectmenu/events_js.html">events.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/selectmenu/methods_js.html">methods.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/selectmenu/options_js.html">options.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/selectmenu/selectmenu_html.html">selectmenu.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/slider/all_html.html">all.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/slider/common_js.html">common.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/slider/core_js.html">core.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/slider/events_js.html">events.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/slider/methods_js.html">methods.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/slider/options_js.html">options.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/slider/slider_html.html">slider.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/sortable/all_html.html">all.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/sortable/common_js.html">common.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/sortable/core_js.html">core.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/sortable/events_js.html">events.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/sortable/helper_js.html">helper.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/sortable/methods_js.html">methods.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/sortable/options_js.html">options.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/sortable/sortable_html.html">sortable.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/spinner/all_html.html">all.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/spinner/common-deprecated_js.html">common-deprecated.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/spinner/common_js.html">common.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/spinner/core_js.html">core.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/spinner/deprecated_html.html">deprecated.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/spinner/deprecated_js.html">deprecated.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/spinner/events_js.html">events.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/spinner/helper_js.html">helper.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/spinner/methods_js.html">methods.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/spinner/options_js.html">options.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/spinner/spinner_html.html">spinner.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/subsuite_js.html">subsuite.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/tabs/all_html.html">all.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/tabs/common_js.html">common.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/tabs/core_js.html">core.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/tabs/data/test_html.html">test.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/tabs/events_js.html">events.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/tabs/helper_js.html">helper.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/tabs/methods_js.html">methods.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/tabs/options_js.html">options.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/tabs/tabs_html.html">tabs.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/tooltip/all_html.html">all.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/tooltip/common-deprecated_js.html">common-deprecated.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/tooltip/common_js.html">common.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/tooltip/core_js.html">core.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/tooltip/deprecated_html.html">deprecated.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/tooltip/deprecated_js.html">deprecated.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/tooltip/events_js.html">events.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/tooltip/methods_js.html">methods.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/tooltip/options_js.html">options.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/tooltip/tooltip_html.html">tooltip.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/widget/all_html.html">all.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/widget/animation_js.html">animation.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/widget/classes_js.html">classes.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/widget/core_js.html">core.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/widget/extend_js.html">extend.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/unit/widget/widget_html.html">widget.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/visual/accordion/icons_html.html">icons.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/visual/addClass/queue_html.html">queue.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/visual/checkboxradio/checkboxradio_html.html">checkboxradio.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/visual/compound/accordion_tabs_html.html">accordion_tabs.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/visual/compound/datepicker_dialog_html.html">datepicker_dialog.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/visual/compound/dialog_widgets_html.html">dialog_widgets.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/visual/compound/draggable_accordion_html.html">draggable_accordion.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/visual/compound/draggable_accordion_accordion_tabs_draggable_html.html">draggable_accordion_accordion_tabs_draggable.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/visual/compound/draggable_resizable_html.html">draggable_resizable.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/visual/compound/sortable_accordion_sortable_tabs_html.html">sortable_accordion_sortable_tabs.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/visual/compound/tabs_selectmenu_html.html">tabs_selectmenu.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/visual/compound/tabs_tabs_html.html">tabs_tabs.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/visual/compound/tabs_tooltips_html.html">tabs_tooltips.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/visual/dialog/animated_html.html">animated.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/visual/dialog/complex-dialogs_html.html">complex-dialogs.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/visual/dialog/form_html.html">form.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/visual/dialog/performance_html.html">performance.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/visual/dialog/stacking_html.html">stacking.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/visual/draggable/replaced_html.html">replaced.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/visual/effects/all_html.html">all.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/visual/effects/clip_html.html">clip.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/visual/effects/effects_css.html">effects.css</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/visual/effects/effects_js.html">effects.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/visual/effects/scale_html.html">scale.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/visual/effects/shake_html.html">shake.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/visual/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/visual/menu/menu_html.html">menu.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/visual/position/position_html.html">position.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/visual/position/position_feedback_html.html">position_feedback.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/visual/selectmenu/selectmenu_html.html">selectmenu.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/visual/slider/range_slider_html.html">range_slider.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/visual/tooltip/animations_html.html">animations.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/visual/tooltip/tooltip_html.html">tooltip.html</a>
  
    <li><a href="../../../../node_modules/jquery-ui/tests/visual/visual_css.html">visual.css</a>
  
    <li><a href="../../../../node_modules/jquery-ui/themes/base/accordion_css.html">accordion.css</a>
  
    <li><a href="../../../../node_modules/jquery-ui/themes/base/all_css.html">all.css</a>
  
    <li><a href="../../../../node_modules/jquery-ui/themes/base/autocomplete_css.html">autocomplete.css</a>
  
    <li><a href="../../../../node_modules/jquery-ui/themes/base/base_css.html">base.css</a>
  
    <li><a href="../../../../node_modules/jquery-ui/themes/base/button_css.html">button.css</a>
  
    <li><a href="../../../../node_modules/jquery-ui/themes/base/checkboxradio_css.html">checkboxradio.css</a>
  
    <li><a href="../../../../node_modules/jquery-ui/themes/base/controlgroup_css.html">controlgroup.css</a>
  
    <li><a href="../../../../node_modules/jquery-ui/themes/base/core_css.html">core.css</a>
  
    <li><a href="../../../../node_modules/jquery-ui/themes/base/datepicker_css.html">datepicker.css</a>
  
    <li><a href="../../../../node_modules/jquery-ui/themes/base/dialog_css.html">dialog.css</a>
  
    <li><a href="../../../../node_modules/jquery-ui/themes/base/draggable_css.html">draggable.css</a>
  
    <li><a href="../../../../node_modules/jquery-ui/themes/base/menu_css.html">menu.css</a>
  
    <li><a href="../../../../node_modules/jquery-ui/themes/base/progressbar_css.html">progressbar.css</a>
  
    <li><a href="../../../../node_modules/jquery-ui/themes/base/resizable_css.html">resizable.css</a>
  
    <li><a href="../../../../node_modules/jquery-ui/themes/base/selectable_css.html">selectable.css</a>
  
    <li><a href="../../../../node_modules/jquery-ui/themes/base/selectmenu_css.html">selectmenu.css</a>
  
    <li><a href="../../../../node_modules/jquery-ui/themes/base/slider_css.html">slider.css</a>
  
    <li><a href="../../../../node_modules/jquery-ui/themes/base/sortable_css.html">sortable.css</a>
  
    <li><a href="../../../../node_modules/jquery-ui/themes/base/spinner_css.html">spinner.css</a>
  
    <li><a href="../../../../node_modules/jquery-ui/themes/base/tabs_css.html">tabs.css</a>
  
    <li><a href="../../../../node_modules/jquery-ui/themes/base/theme_css.html">theme.css</a>
  
    <li><a href="../../../../node_modules/jquery-ui/themes/base/tooltip_css.html">tooltip.css</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/core_js.html">core.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/data_js.html">data.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/disable-selection_js.html">disable-selection.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/effect_js.html">effect.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/effects/effect-blind_js.html">effect-blind.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/effects/effect-bounce_js.html">effect-bounce.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/effects/effect-clip_js.html">effect-clip.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/effects/effect-drop_js.html">effect-drop.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/effects/effect-explode_js.html">effect-explode.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/effects/effect-fade_js.html">effect-fade.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/effects/effect-fold_js.html">effect-fold.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/effects/effect-highlight_js.html">effect-highlight.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/effects/effect-puff_js.html">effect-puff.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/effects/effect-pulsate_js.html">effect-pulsate.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/effects/effect-scale_js.html">effect-scale.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/effects/effect-shake_js.html">effect-shake.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/effects/effect-size_js.html">effect-size.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/effects/effect-slide_js.html">effect-slide.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/effects/effect-transfer_js.html">effect-transfer.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/escape-selector_js.html">escape-selector.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/focusable_js.html">focusable.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/form-reset-mixin_js.html">form-reset-mixin.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/form_js.html">form.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-af_js.html">datepicker-af.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-ar-DZ_js.html">datepicker-ar-DZ.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-ar_js.html">datepicker-ar.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-az_js.html">datepicker-az.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-be_js.html">datepicker-be.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-bg_js.html">datepicker-bg.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-bs_js.html">datepicker-bs.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-ca_js.html">datepicker-ca.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-cs_js.html">datepicker-cs.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-cy-GB_js.html">datepicker-cy-GB.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-da_js.html">datepicker-da.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-de_js.html">datepicker-de.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-el_js.html">datepicker-el.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-en-AU_js.html">datepicker-en-AU.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-en-GB_js.html">datepicker-en-GB.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-en-NZ_js.html">datepicker-en-NZ.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-eo_js.html">datepicker-eo.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-es_js.html">datepicker-es.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-et_js.html">datepicker-et.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-eu_js.html">datepicker-eu.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-fa_js.html">datepicker-fa.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-fi_js.html">datepicker-fi.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-fo_js.html">datepicker-fo.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-fr-CA_js.html">datepicker-fr-CA.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-fr-CH_js.html">datepicker-fr-CH.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-fr_js.html">datepicker-fr.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-gl_js.html">datepicker-gl.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-he_js.html">datepicker-he.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-hi_js.html">datepicker-hi.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-hr_js.html">datepicker-hr.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-hu_js.html">datepicker-hu.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-hy_js.html">datepicker-hy.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-id_js.html">datepicker-id.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-is_js.html">datepicker-is.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-it-CH_js.html">datepicker-it-CH.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-it_js.html">datepicker-it.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-ja_js.html">datepicker-ja.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-ka_js.html">datepicker-ka.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-kk_js.html">datepicker-kk.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-km_js.html">datepicker-km.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-ko_js.html">datepicker-ko.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-ky_js.html">datepicker-ky.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-lb_js.html">datepicker-lb.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-lt_js.html">datepicker-lt.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-lv_js.html">datepicker-lv.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-mk_js.html">datepicker-mk.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-ml_js.html">datepicker-ml.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-ms_js.html">datepicker-ms.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-nb_js.html">datepicker-nb.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-nl-BE_js.html">datepicker-nl-BE.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-nl_js.html">datepicker-nl.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-nn_js.html">datepicker-nn.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-no_js.html">datepicker-no.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-pl_js.html">datepicker-pl.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-pt-BR_js.html">datepicker-pt-BR.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-pt_js.html">datepicker-pt.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-rm_js.html">datepicker-rm.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-ro_js.html">datepicker-ro.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-ru_js.html">datepicker-ru.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-sk_js.html">datepicker-sk.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-sl_js.html">datepicker-sl.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-sq_js.html">datepicker-sq.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-sr-SR_js.html">datepicker-sr-SR.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-sr_js.html">datepicker-sr.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-sv_js.html">datepicker-sv.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-ta_js.html">datepicker-ta.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-th_js.html">datepicker-th.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-tj_js.html">datepicker-tj.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-tr_js.html">datepicker-tr.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-uk_js.html">datepicker-uk.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-vi_js.html">datepicker-vi.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-zh-CN_js.html">datepicker-zh-CN.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-zh-HK_js.html">datepicker-zh-HK.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/i18n/datepicker-zh-TW_js.html">datepicker-zh-TW.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/ie_js.html">ie.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/jquery-1-7_js.html">jquery-1-7.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/keycode_js.html">keycode.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/labels_js.html">labels.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/plugin_js.html">plugin.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/position_js.html">position.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/safe-active-element_js.html">safe-active-element.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/safe-blur_js.html">safe-blur.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/scroll-parent_js.html">scroll-parent.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/tabbable_js.html">tabbable.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/unique-id_js.html">unique-id.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/version_js.html">version.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/widget_js.html">widget.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/widgets/accordion_js.html">accordion.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/widgets/autocomplete_js.html">autocomplete.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/widgets/button_js.html">button.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/widgets/checkboxradio_js.html">checkboxradio.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/widgets/controlgroup_js.html">controlgroup.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/widgets/datepicker_js.html">datepicker.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/widgets/dialog_js.html">dialog.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/widgets/draggable_js.html">draggable.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/widgets/droppable_js.html">droppable.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/widgets/menu_js.html">menu.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/widgets/mouse_js.html">mouse.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/widgets/progressbar_js.html">progressbar.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/widgets/resizable_js.html">resizable.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/widgets/selectable_js.html">selectable.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/widgets/selectmenu_js.html">selectmenu.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/widgets/slider_js.html">slider.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/widgets/sortable_js.html">sortable.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/widgets/spinner_js.html">spinner.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/widgets/tabs_js.html">tabs.js</a>
  
    <li><a href="../../../../node_modules/jquery-ui/ui/widgets/tooltip_js.html">tooltip.js</a>
  
    <li><a href="../../../../node_modules/jquery/AUTHORS_txt.html">AUTHORS</a>
  
    <li><a href="../../../../node_modules/jquery/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery/README_md.html">README</a>
  
    <li><a href="../../../../node_modules/jquery/bower_json.html">bower.json</a>
  
    <li><a href="../../../../node_modules/jquery/dist/core_js.html">core.js</a>
  
    <li><a href="../../../../node_modules/jquery/dist/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery/dist/jquery_min_js.html">jquery.min.js</a>
  
    <li><a href="../../../../node_modules/jquery/dist/jquery_min_map.html">jquery.min.map</a>
  
    <li><a href="../../../../node_modules/jquery/dist/jquery_slim_js.html">jquery.slim.js</a>
  
    <li><a href="../../../../node_modules/jquery/dist/jquery_slim_min_js.html">jquery.slim.min.js</a>
  
    <li><a href="../../../../node_modules/jquery/dist/jquery_slim_min_map.html">jquery.slim.min.map</a>
  
    <li><a href="../../../../node_modules/jquery/external/sizzle/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../node_modules/jquery/external/sizzle/dist/sizzle_js.html">sizzle.js</a>
  
    <li><a href="../../../../node_modules/jquery/external/sizzle/dist/sizzle_min_js.html">sizzle.min.js</a>
  
    <li><a href="../../../../node_modules/jquery/external/sizzle/dist/sizzle_min_map.html">sizzle.min.map</a>
  
    <li><a href="../../../../node_modules/jquery/package_json.html">package.json</a>
  
    <li><a href="../../../../node_modules/jquery/src/ajax_js.html">ajax.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/ajax/jsonp_js.html">jsonp.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/ajax/load_js.html">load.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/ajax/parseXML_js.html">parseXML.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/ajax/script_js.html">script.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/ajax/var/location_js.html">location.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/ajax/var/nonce_js.html">nonce.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/ajax/var/rquery_js.html">rquery.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/ajax/xhr_js.html">xhr.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/attributes_js.html">attributes.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/attributes/attr_js.html">attr.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/attributes/classes_js.html">classes.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/attributes/prop_js.html">prop.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/attributes/support_js.html">support.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/attributes/val_js.html">val.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/callbacks_js.html">callbacks.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/core_js.html">core.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/core/DOMEval_js.html">DOMEval.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/core/access_js.html">access.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/core/camelCase_js.html">camelCase.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/core/init_js.html">init.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/core/nodeName_js.html">nodeName.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/core/parseHTML_js.html">parseHTML.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/core/ready-no-deferred_js.html">ready-no-deferred.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/core/ready_js.html">ready.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/core/readyException_js.html">readyException.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/core/stripAndCollapse_js.html">stripAndCollapse.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/core/support_js.html">support.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/core/toType_js.html">toType.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/core/var/rsingleTag_js.html">rsingleTag.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/css_js.html">css.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/css/addGetHookIf_js.html">addGetHookIf.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/css/adjustCSS_js.html">adjustCSS.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/css/curCSS_js.html">curCSS.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/css/hiddenVisibleSelectors_js.html">hiddenVisibleSelectors.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/css/showHide_js.html">showHide.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/css/support_js.html">support.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/css/var/cssExpand_js.html">cssExpand.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/css/var/getStyles_js.html">getStyles.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/css/var/isHiddenWithinTree_js.html">isHiddenWithinTree.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/css/var/rboxStyle_js.html">rboxStyle.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/css/var/rnumnonpx_js.html">rnumnonpx.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/css/var/swap_js.html">swap.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/data_js.html">data.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/data/Data_js.html">Data.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/data/var/acceptData_js.html">acceptData.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/data/var/dataPriv_js.html">dataPriv.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/data/var/dataUser_js.html">dataUser.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/deferred_js.html">deferred.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/deferred/exceptionHook_js.html">exceptionHook.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/deprecated_js.html">deprecated.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/dimensions_js.html">dimensions.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/effects_js.html">effects.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/effects/Tween_js.html">Tween.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/effects/animatedSelector_js.html">animatedSelector.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/event_js.html">event.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/event/ajax_js.html">ajax.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/event/alias_js.html">alias.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/event/focusin_js.html">focusin.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/event/support_js.html">support.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/event/trigger_js.html">trigger.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/exports/amd_js.html">amd.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/exports/global_js.html">global.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/jquery_js.html">jquery.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/manipulation_js.html">manipulation.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/manipulation/_evalUrl_js.html">_evalUrl.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/manipulation/buildFragment_js.html">buildFragment.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/manipulation/getAll_js.html">getAll.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/manipulation/setGlobalEval_js.html">setGlobalEval.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/manipulation/support_js.html">support.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/manipulation/var/rcheckableType_js.html">rcheckableType.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/manipulation/var/rscriptType_js.html">rscriptType.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/manipulation/var/rtagName_js.html">rtagName.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/manipulation/wrapMap_js.html">wrapMap.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/offset_js.html">offset.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/queue_js.html">queue.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/queue/delay_js.html">delay.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/selector-native_js.html">selector-native.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/selector-sizzle_js.html">selector-sizzle.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/selector_js.html">selector.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/serialize_js.html">serialize.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/traversing_js.html">traversing.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/traversing/findFilter_js.html">findFilter.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/traversing/var/dir_js.html">dir.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/traversing/var/rneedsContext_js.html">rneedsContext.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/traversing/var/siblings_js.html">siblings.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/var/ObjectFunctionString_js.html">ObjectFunctionString.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/var/arr_js.html">arr.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/var/class2type_js.html">class2type.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/var/concat_js.html">concat.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/var/document_js.html">document.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/var/documentElement_js.html">documentElement.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/var/fnToString_js.html">fnToString.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/var/getProto_js.html">getProto.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/var/hasOwn_js.html">hasOwn.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/var/indexOf_js.html">indexOf.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/var/isFunction_js.html">isFunction.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/var/isWindow_js.html">isWindow.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/var/pnum_js.html">pnum.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/var/push_js.html">push.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/var/rcssNum_js.html">rcssNum.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/var/rnothtmlwhite_js.html">rnothtmlwhite.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/var/slice_js.html">slice.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/var/support_js.html">support.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/var/toString_js.html">toString.js</a>
  
    <li><a href="../../../../node_modules/jquery/src/wrap_js.html">wrap.js</a>
  
    <li><a href="../../../../node_modules/moment/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../../../node_modules/moment/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../../node_modules/moment/README_md.html">README</a>
  
    <li><a href="../../../../node_modules/moment/ender_js.html">ender.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/af_js.html">af.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/ar-dz_js.html">ar-dz.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/ar-kw_js.html">ar-kw.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/ar-ly_js.html">ar-ly.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/ar-ma_js.html">ar-ma.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/ar-sa_js.html">ar-sa.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/ar-tn_js.html">ar-tn.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/ar_js.html">ar.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/az_js.html">az.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/be_js.html">be.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/bg_js.html">bg.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/bm_js.html">bm.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/bn_js.html">bn.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/bo_js.html">bo.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/br_js.html">br.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/bs_js.html">bs.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/ca_js.html">ca.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/cs_js.html">cs.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/cv_js.html">cv.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/cy_js.html">cy.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/da_js.html">da.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/de-at_js.html">de-at.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/de-ch_js.html">de-ch.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/de_js.html">de.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/dv_js.html">dv.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/el_js.html">el.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/en-SG_js.html">en-SG.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/en-au_js.html">en-au.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/en-ca_js.html">en-ca.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/en-gb_js.html">en-gb.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/en-ie_js.html">en-ie.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/en-il_js.html">en-il.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/en-nz_js.html">en-nz.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/eo_js.html">eo.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/es-do_js.html">es-do.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/es-us_js.html">es-us.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/es_js.html">es.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/et_js.html">et.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/eu_js.html">eu.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/fa_js.html">fa.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/fi_js.html">fi.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/fo_js.html">fo.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/fr-ca_js.html">fr-ca.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/fr-ch_js.html">fr-ch.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/fr_js.html">fr.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/fy_js.html">fy.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/ga_js.html">ga.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/gd_js.html">gd.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/gl_js.html">gl.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/gom-latn_js.html">gom-latn.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/gu_js.html">gu.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/he_js.html">he.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/hi_js.html">hi.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/hr_js.html">hr.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/hu_js.html">hu.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/hy-am_js.html">hy-am.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/id_js.html">id.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/is_js.html">is.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/it-ch_js.html">it-ch.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/it_js.html">it.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/ja_js.html">ja.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/jv_js.html">jv.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/ka_js.html">ka.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/kk_js.html">kk.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/km_js.html">km.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/kn_js.html">kn.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/ko_js.html">ko.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/ku_js.html">ku.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/ky_js.html">ky.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/lb_js.html">lb.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/lo_js.html">lo.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/lt_js.html">lt.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/lv_js.html">lv.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/me_js.html">me.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/mi_js.html">mi.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/mk_js.html">mk.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/ml_js.html">ml.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/mn_js.html">mn.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/mr_js.html">mr.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/ms-my_js.html">ms-my.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/ms_js.html">ms.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/mt_js.html">mt.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/my_js.html">my.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/nb_js.html">nb.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/ne_js.html">ne.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/nl-be_js.html">nl-be.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/nl_js.html">nl.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/nn_js.html">nn.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/pa-in_js.html">pa-in.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/pl_js.html">pl.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/pt-br_js.html">pt-br.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/pt_js.html">pt.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/ro_js.html">ro.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/ru_js.html">ru.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/sd_js.html">sd.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/se_js.html">se.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/si_js.html">si.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/sk_js.html">sk.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/sl_js.html">sl.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/sq_js.html">sq.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/sr-cyrl_js.html">sr-cyrl.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/sr_js.html">sr.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/ss_js.html">ss.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/sv_js.html">sv.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/sw_js.html">sw.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/ta_js.html">ta.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/te_js.html">te.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/tet_js.html">tet.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/tg_js.html">tg.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/th_js.html">th.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/tl-ph_js.html">tl-ph.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/tlh_js.html">tlh.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/tr_js.html">tr.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/tzl_js.html">tzl.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/tzm-latn_js.html">tzm-latn.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/tzm_js.html">tzm.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/ug-cn_js.html">ug-cn.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/uk_js.html">uk.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/ur_js.html">ur.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/uz-latn_js.html">uz-latn.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/uz_js.html">uz.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/vi_js.html">vi.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/x-pseudo_js.html">x-pseudo.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/yo_js.html">yo.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/zh-cn_js.html">zh-cn.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/zh-hk_js.html">zh-hk.js</a>
  
    <li><a href="../../../../node_modules/moment/locale/zh-tw_js.html">zh-tw.js</a>
  
    <li><a href="../../../../node_modules/moment/min/locales_js.html">locales.js</a>
  
    <li><a href="../../../../node_modules/moment/min/locales_min_js.html">locales.min.js</a>
  
    <li><a href="../../../../node_modules/moment/min/moment-with-locales_js.html">moment-with-locales.js</a>
  
    <li><a href="../../../../node_modules/moment/min/moment-with-locales_min_js.html">moment-with-locales.min.js</a>
  
    <li><a href="../../../../node_modules/moment/min/moment_min_js.html">moment.min.js</a>
  
    <li><a href="../../../../node_modules/moment/moment_d_ts.html">moment.d.ts</a>
  
    <li><a href="../../../../node_modules/moment/moment_js.html">moment.js</a>
  
    <li><a href="../../../../node_modules/moment/package_js.html">package.js</a>
  
    <li><a href="../../../../node_modules/moment/package_json.html">package.json</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/create/check-overflow_js.html">check-overflow.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/create/date-from-array_js.html">date-from-array.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/create/from-anything_js.html">from-anything.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/create/from-array_js.html">from-array.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/create/from-object_js.html">from-object.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/create/from-string-and-array_js.html">from-string-and-array.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/create/from-string-and-format_js.html">from-string-and-format.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/create/from-string_js.html">from-string.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/create/local_js.html">local.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/create/parsing-flags_js.html">parsing-flags.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/create/utc_js.html">utc.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/create/valid_js.html">valid.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/duration/abs_js.html">abs.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/duration/add-subtract_js.html">add-subtract.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/duration/as_js.html">as.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/duration/bubble_js.html">bubble.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/duration/clone_js.html">clone.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/duration/constructor_js.html">constructor.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/duration/create_js.html">create.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/duration/duration_js.html">duration.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/duration/get_js.html">get.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/duration/humanize_js.html">humanize.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/duration/iso-string_js.html">iso-string.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/duration/prototype_js.html">prototype.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/duration/valid_js.html">valid.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/format/format_js.html">format.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/locale/base-config_js.html">base-config.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/locale/calendar_js.html">calendar.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/locale/constructor_js.html">constructor.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/locale/en_js.html">en.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/locale/formats_js.html">formats.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/locale/invalid_js.html">invalid.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/locale/lists_js.html">lists.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/locale/locale_js.html">locale.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/locale/locales_js.html">locales.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/locale/ordinal_js.html">ordinal.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/locale/pre-post-format_js.html">pre-post-format.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/locale/prototype_js.html">prototype.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/locale/relative_js.html">relative.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/locale/set_js.html">set.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/moment/add-subtract_js.html">add-subtract.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/moment/calendar_js.html">calendar.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/moment/clone_js.html">clone.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/moment/compare_js.html">compare.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/moment/constructor_js.html">constructor.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/moment/creation-data_js.html">creation-data.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/moment/diff_js.html">diff.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/moment/format_js.html">format.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/moment/from_js.html">from.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/moment/get-set_js.html">get-set.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/moment/locale_js.html">locale.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/moment/min-max_js.html">min-max.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/moment/moment_js.html">moment.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/moment/now_js.html">now.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/moment/prototype_js.html">prototype.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/moment/start-end-of_js.html">start-end-of.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/moment/to-type_js.html">to-type.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/moment/to_js.html">to.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/moment/valid_js.html">valid.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/parse/regex_js.html">regex.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/parse/token_js.html">token.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/units/aliases_js.html">aliases.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/units/constants_js.html">constants.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/units/day-of-month_js.html">day-of-month.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/units/day-of-week_js.html">day-of-week.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/units/day-of-year_js.html">day-of-year.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/units/hour_js.html">hour.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/units/millisecond_js.html">millisecond.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/units/minute_js.html">minute.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/units/month_js.html">month.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/units/offset_js.html">offset.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/units/priorities_js.html">priorities.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/units/quarter_js.html">quarter.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/units/second_js.html">second.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/units/timestamp_js.html">timestamp.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/units/timezone_js.html">timezone.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/units/units_js.html">units.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/units/week-calendar-utils_js.html">week-calendar-utils.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/units/week-year_js.html">week-year.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/units/week_js.html">week.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/units/year_js.html">year.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/utils/abs-ceil_js.html">abs-ceil.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/utils/abs-floor_js.html">abs-floor.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/utils/abs-round_js.html">abs-round.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/utils/compare-arrays_js.html">compare-arrays.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/utils/defaults_js.html">defaults.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/utils/deprecate_js.html">deprecate.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/utils/extend_js.html">extend.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/utils/has-own-prop_js.html">has-own-prop.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/utils/hooks_js.html">hooks.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/utils/index-of_js.html">index-of.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/utils/is-array_js.html">is-array.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/utils/is-date_js.html">is-date.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/utils/is-function_js.html">is-function.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/utils/is-number_js.html">is-number.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/utils/is-object-empty_js.html">is-object-empty.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/utils/is-object_js.html">is-object.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/utils/is-undefined_js.html">is-undefined.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/utils/keys_js.html">keys.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/utils/map_js.html">map.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/utils/mod_js.html">mod.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/utils/some_js.html">some.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/utils/to-int_js.html">to-int.js</a>
  
    <li><a href="../../../../node_modules/moment/src/lib/utils/zero-fill_js.html">zero-fill.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/af_js.html">af.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/ar-dz_js.html">ar-dz.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/ar-kw_js.html">ar-kw.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/ar-ly_js.html">ar-ly.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/ar-ma_js.html">ar-ma.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/ar-sa_js.html">ar-sa.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/ar-tn_js.html">ar-tn.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/ar_js.html">ar.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/az_js.html">az.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/be_js.html">be.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/bg_js.html">bg.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/bm_js.html">bm.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/bn_js.html">bn.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/bo_js.html">bo.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/br_js.html">br.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/bs_js.html">bs.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/ca_js.html">ca.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/cs_js.html">cs.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/cv_js.html">cv.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/cy_js.html">cy.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/da_js.html">da.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/de-at_js.html">de-at.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/de-ch_js.html">de-ch.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/de_js.html">de.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/dv_js.html">dv.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/el_js.html">el.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/en-SG_js.html">en-SG.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/en-au_js.html">en-au.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/en-ca_js.html">en-ca.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/en-gb_js.html">en-gb.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/en-ie_js.html">en-ie.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/en-il_js.html">en-il.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/en-nz_js.html">en-nz.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/eo_js.html">eo.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/es-do_js.html">es-do.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/es-us_js.html">es-us.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/es_js.html">es.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/et_js.html">et.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/eu_js.html">eu.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/fa_js.html">fa.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/fi_js.html">fi.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/fo_js.html">fo.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/fr-ca_js.html">fr-ca.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/fr-ch_js.html">fr-ch.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/fr_js.html">fr.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/fy_js.html">fy.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/ga_js.html">ga.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/gd_js.html">gd.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/gl_js.html">gl.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/gom-latn_js.html">gom-latn.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/gu_js.html">gu.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/he_js.html">he.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/hi_js.html">hi.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/hr_js.html">hr.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/hu_js.html">hu.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/hy-am_js.html">hy-am.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/id_js.html">id.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/is_js.html">is.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/it-ch_js.html">it-ch.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/it_js.html">it.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/ja_js.html">ja.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/jv_js.html">jv.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/ka_js.html">ka.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/kk_js.html">kk.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/km_js.html">km.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/kn_js.html">kn.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/ko_js.html">ko.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/ku_js.html">ku.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/ky_js.html">ky.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/lb_js.html">lb.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/lo_js.html">lo.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/lt_js.html">lt.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/lv_js.html">lv.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/me_js.html">me.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/mi_js.html">mi.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/mk_js.html">mk.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/ml_js.html">ml.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/mn_js.html">mn.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/mr_js.html">mr.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/ms-my_js.html">ms-my.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/ms_js.html">ms.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/mt_js.html">mt.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/my_js.html">my.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/nb_js.html">nb.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/ne_js.html">ne.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/nl-be_js.html">nl-be.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/nl_js.html">nl.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/nn_js.html">nn.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/pa-in_js.html">pa-in.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/pl_js.html">pl.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/pt-br_js.html">pt-br.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/pt_js.html">pt.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/ro_js.html">ro.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/ru_js.html">ru.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/sd_js.html">sd.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/se_js.html">se.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/si_js.html">si.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/sk_js.html">sk.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/sl_js.html">sl.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/sq_js.html">sq.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/sr-cyrl_js.html">sr-cyrl.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/sr_js.html">sr.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/ss_js.html">ss.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/sv_js.html">sv.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/sw_js.html">sw.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/ta_js.html">ta.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/te_js.html">te.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/tet_js.html">tet.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/tg_js.html">tg.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/th_js.html">th.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/tl-ph_js.html">tl-ph.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/tlh_js.html">tlh.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/tr_js.html">tr.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/tzl_js.html">tzl.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/tzm-latn_js.html">tzm-latn.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/tzm_js.html">tzm.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/ug-cn_js.html">ug-cn.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/uk_js.html">uk.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/ur_js.html">ur.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/uz-latn_js.html">uz-latn.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/uz_js.html">uz.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/vi_js.html">vi.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/x-pseudo_js.html">x-pseudo.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/yo_js.html">yo.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/zh-cn_js.html">zh-cn.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/zh-hk_js.html">zh-hk.js</a>
  
    <li><a href="../../../../node_modules/moment/src/locale/zh-tw_js.html">zh-tw.js</a>
  
    <li><a href="../../../../node_modules/moment/src/moment_js.html">moment.js</a>
  
    <li><a href="../../../../node_modules/popper_js/README_md.html">README</a>
  
    <li><a href="../../../../node_modules/popper_js/dist/esm/popper-utils_js.html">popper-utils.js</a>
  
    <li><a href="../../../../node_modules/popper_js/dist/esm/popper-utils_js_map.html">popper-utils.js.map</a>
  
    <li><a href="../../../../node_modules/popper_js/dist/esm/popper-utils_min_js.html">popper-utils.min.js</a>
  
    <li><a href="../../../../node_modules/popper_js/dist/esm/popper-utils_min_js_map.html">popper-utils.min.js.map</a>
  
    <li><a href="../../../../node_modules/popper_js/dist/esm/popper_js.html">popper.js</a>
  
    <li><a href="../../../../node_modules/popper_js/dist/esm/popper_js_map.html">popper.js.map</a>
  
    <li><a href="../../../../node_modules/popper_js/dist/esm/popper_min_js.html">popper.min.js</a>
  
    <li><a href="../../../../node_modules/popper_js/dist/esm/popper_min_js_map.html">popper.min.js.map</a>
  
    <li><a href="../../../../node_modules/popper_js/dist/popper-utils_js.html">popper-utils.js</a>
  
    <li><a href="../../../../node_modules/popper_js/dist/popper-utils_js_map.html">popper-utils.js.map</a>
  
    <li><a href="../../../../node_modules/popper_js/dist/popper-utils_min_js.html">popper-utils.min.js</a>
  
    <li><a href="../../../../node_modules/popper_js/dist/popper-utils_min_js_map.html">popper-utils.min.js.map</a>
  
    <li><a href="../../../../node_modules/popper_js/dist/popper_js.html">popper.js</a>
  
    <li><a href="../../../../node_modules/popper_js/dist/popper_js_map.html">popper.js.map</a>
  
    <li><a href="../../../../node_modules/popper_js/dist/popper_min_js.html">popper.min.js</a>
  
    <li><a href="../../../../node_modules/popper_js/dist/popper_min_js_map.html">popper.min.js.map</a>
  
    <li><a href="../../../../node_modules/popper_js/dist/umd/popper-utils_js.html">popper-utils.js</a>
  
    <li><a href="../../../../node_modules/popper_js/dist/umd/popper-utils_js_map.html">popper-utils.js.map</a>
  
    <li><a href="../../../../node_modules/popper_js/dist/umd/popper-utils_min_js.html">popper-utils.min.js</a>
  
    <li><a href="../../../../node_modules/popper_js/dist/umd/popper-utils_min_js_map.html">popper-utils.min.js.map</a>
  
    <li><a href="../../../../node_modules/popper_js/dist/umd/popper_js.html">popper.js</a>
  
    <li><a href="../../../../node_modules/popper_js/dist/umd/popper_js_map.html">popper.js.map</a>
  
    <li><a href="../../../../node_modules/popper_js/dist/umd/popper_min_js.html">popper.min.js</a>
  
    <li><a href="../../../../node_modules/popper_js/dist/umd/popper_min_js_map.html">popper.min.js.map</a>
  
    <li><a href="../../../../node_modules/popper_js/dist/umd/poppper_js_flow.html">poppper.js.flow</a>
  
    <li><a href="../../../../node_modules/popper_js/index_d_ts.html">index.d.ts</a>
  
    <li><a href="../../../../node_modules/popper_js/index_js_flow.html">index.js.flow</a>
  
    <li><a href="../../../../node_modules/popper_js/package_json.html">package.json</a>
  
    <li><a href="../../../../node_modules/what-input/Gulpfile_js.html">Gulpfile.js</a>
  
    <li><a href="../../../../node_modules/what-input/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../../node_modules/what-input/README_md.html">README</a>
  
    <li><a href="../../../../node_modules/what-input/dist/maps/what-input_min_js_map.html">what-input.min.js.map</a>
  
    <li><a href="../../../../node_modules/what-input/dist/what-input_js.html">what-input.js</a>
  
    <li><a href="../../../../node_modules/what-input/dist/what-input_min_js.html">what-input.min.js</a>
  
    <li><a href="../../../../node_modules/what-input/package_json.html">package.json</a>
  
    <li><a href="../../../../node_modules/what-input/src/markup/index_html.html">index.html</a>
  
    <li><a href="../../../../node_modules/what-input/src/scripts/what-input_js.html">what-input.js</a>
  
    <li><a href="../../../../node_modules/what-input/src/styles/_html_scss.html">_html.scss</a>
  
    <li><a href="../../../../node_modules/what-input/src/styles/_layout_scss.html">_layout.scss</a>
  
    <li><a href="../../../../node_modules/what-input/src/styles/_mixins_scss.html">_mixins.scss</a>
  
    <li><a href="../../../../node_modules/what-input/src/styles/_variables_scss.html">_variables.scss</a>
  
    <li><a href="../../../../node_modules/what-input/src/styles/index_scss.html">index.scss</a>
  
    <li><a href="../../../../node_modules/what-input/yarn_lock.html">yarn.lock</a>
  
    <li><a href="../../../../package-lock_json.html">package-lock.json</a>
  
    <li><a href="../../../../package_json.html">package.json</a>
  
    <li><a href="../../../../public/404_html.html">404.html</a>
  
    <li><a href="../../../../public/422_html.html">422.html</a>
  
    <li><a href="../../../../public/500_html.html">500.html</a>
  
    <li><a href="../../../../public/apple-touch-icon-precomposed_png.html">apple-touch-icon-precomposed.png</a>
  
    <li><a href="../../../../public/apple-touch-icon_png.html">apple-touch-icon.png</a>
  
    <li><a href="../../../../public/assets/application-46c053c78d257a56bf6d506c99629679b141bbccc6aec85d68d3b747103dd3c4_css.html">application-46c053c78d257a56bf6d506c99629679b141bbccc6aec85d68d3b747103dd3c4.css</a>
  
    <li><a href="../../../../public/assets/application-cf83c321a1a9e18fe1ed781b217828ca517c76d9f657331cc537020260eb75d3_js.html">application-cf83c321a1a9e18fe1ed781b217828ca517c76d9f657331cc537020260eb75d3.js</a>
  
    <li><a href="../../../../public/favicon_ico.html">favicon.ico</a>
  
    <li><a href="../../../../public/robots_txt.html">robots</a>
  
    <li><a href="../../../../tmp/restart_txt.html">restart</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page node_modules/@ckeditor/ckeditor5-build-classic/build/ckeditor.js.map">

<p>{“version”:3,“sources”:[“webpack:///webpack/universalModuleDefinition”,“webpack:///webpack/bootstrap
f89e9584159be906a390”,“webpack:////workspace/ckeditor5/node_modules/style-loader/lib/addStyles.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_root.js”,“webpack:///(webpack)/buildin/harmony-module.js”,“webpack:///../ckeditor5-core/theme/icons/check.svg”,“webpack:///../ckeditor5-core/theme/icons/cancel.svg”,“webpack:///../ckeditor5-heading/theme/heading.css?9006”,“webpack:///../ckeditor5-utils/src/ckeditorerror.js”,“webpack:///../ckeditor5-utils/src/spy.js”,“webpack:///../ckeditor5-utils/src/uid.js”,“webpack:///../ckeditor5-utils/src/priorities.js”,“webpack:///../ckeditor5-utils/src/emittermixin.js”,“webpack:///../ckeditor5-utils/src/mix.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_listCacheClear.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_ListCache.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_Hash.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_MapCache.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_Stack.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_assignValue.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseHas.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_getSymbols.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_getTag.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseClone.js”,“webpack:///../ckeditor5-utils/src/comparearrays.js”,“webpack:///../ckeditor5-engine/src/view/node.js”,“webpack:///../ckeditor5-utils/src/objecttomap.js”,“webpack:///../ckeditor5-utils/src/isiterable.js”,“webpack:///../ckeditor5-engine/src/view/matcher.js”,“webpack:///../ckeditor5-engine/src/view/element.js”,“webpack:///../ckeditor5-engine/src/view/containerelement.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_isIterateeCall.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseKeysIn.js”,“webpack:///../ckeditor5-utils/src/observablemixin.js”,“webpack:///../ckeditor5-engine/src/view/editableelement.js”,“webpack:///../ckeditor5-engine/src/view/range.js”,“webpack:///../ckeditor5-utils/src/count.js”,“webpack:///../ckeditor5-engine/src/view/selection.js”,“webpack:///../ckeditor5-engine/src/view/attributeelement.js”,“webpack:///../ckeditor5-engine/src/view/emptyelement.js”,“webpack:///../ckeditor5-utils/src/env.js”,“webpack:///../ckeditor5-utils/src/keyboard.js”,“webpack:///../ckeditor5-engine/src/view/uielement.js”,“webpack:///../ckeditor5-engine/src/view/documentfragment.js”,“webpack:///../ckeditor5-engine/src/view/writer.js”,“webpack:///../ckeditor5-engine/src/view/filler.js”,“webpack:///../ckeditor5-utils/src/diff.js”,“webpack:///../ckeditor5-utils/src/dom/insertat.js”,“webpack:///../ckeditor5-utils/src/dom/remove.js”,“webpack:///../ckeditor5-utils/src/dom/istext.js”,“webpack:///../ckeditor5-engine/src/view/renderer.js”,“webpack:///../ckeditor5-utils/src/dom/global.js”,“webpack:///../ckeditor5-utils/src/dom/indexof.js”,“webpack:///../ckeditor5-utils/src/dom/getancestors.js”,“webpack:///../ckeditor5-utils/src/dom/getcommonancestor.js”,“webpack:///../ckeditor5-engine/src/view/domconverter.js”,“webpack:///../ckeditor5-utils/src/dom/isnode.js”,“webpack:///../ckeditor5-utils/src/dom/iswindow.js”,“webpack:///../ckeditor5-utils/src/dom/emittermixin.js”,“webpack:///../ckeditor5-engine/src/view/observer/observer.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_SetCache.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_equalObjects.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/isTypedArray.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseIsEqual.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/debounce.js”,“webpack:///../ckeditor5-engine/src/view/observer/fakeselectionobserver.js”,“webpack:///../ckeditor5-utils/src/log.js”,“webpack:///../ckeditor5-utils/src/dom/isrange.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/isElement.js”,“webpack:///../ckeditor5-utils/src/dom/getborderwidths.js”,“webpack:///../ckeditor5-utils/src/dom/rect.js”,“webpack:///../ckeditor5-utils/src/dom/scroll.js”,“webpack:///../ckeditor5-engine/src/view/view.js”,“webpack:///../ckeditor5-utils/src/tomap.js”,“webpack:///../ckeditor5-engine/src/model/node.js”,“webpack:///../ckeditor5-engine/src/model/element.js”,“webpack:///../ckeditor5-engine/src/model/treewalker.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/last.js”,“webpack:///../ckeditor5-engine/src/conversion/modelconsumable.js”,“webpack:///../ckeditor5-engine/src/conversion/downcastdispatcher.js”,“webpack:///../ckeditor5-engine/src/model/selection.js”,“webpack:///../ckeditor5-engine/src/model/liverange.js”,“webpack:///../ckeditor5-engine/src/model/documentselection.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/cloneDeep.js”,“webpack:///../ckeditor5-engine/src/conversion/downcast-converters.js”,“webpack:///../ckeditor5-engine/src/conversion/upcast-selection-converters.js”,“webpack:///../ckeditor5-engine/src/conversion/downcast-selection-converters.js”,“webpack:///../ckeditor5-engine/src/controller/editingcontroller.js”,“webpack:///../ckeditor5-utils/src/translation-service.js”,“webpack:///../ckeditor5-utils/src/locale.js”,“webpack:///../ckeditor5-engine/src/model/schema.js”,“webpack:///../ckeditor5-engine/src/conversion/upcastdispatcher.js”,“webpack:///../ckeditor5-engine/src/conversion/upcast-converters.js”,“webpack:///../ckeditor5-engine/src/controller/datacontroller.js”,“webpack:///../ckeditor5-engine/src/conversion/conversion.js”,“webpack:///../ckeditor5-engine/src/model/operation/operation.js”,“webpack:///../ckeditor5-engine/src/model/documentfragment.js”,“webpack:///../ckeditor5-engine/src/model/operation/utils.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/isEqual.js”,“webpack:///../ckeditor5-engine/src/model/operation/transform.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseSlice.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseFlatten.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseIsMatch.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_isStrictComparable.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/memoize.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_isKey.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseHasIn.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_hasPath.js”,“webpack:///../ckeditor5-engine/src/model/delta/transform.js”,“webpack:///../ckeditor5-engine/src/model/delta/markerdelta.js”,“webpack:///../ckeditor5-engine/src/model/delta/basic-transformations.js”,“webpack:///../ckeditor5-engine/src/model/batch.js”,“webpack:///../ckeditor5-engine/src/model/writer.js”,“webpack:///../ckeditor5-engine/src/model/differ.js”,“webpack:///../ckeditor5-engine/src/model/history.js”,“webpack:///../ckeditor5-utils/src/unicode.js”,“webpack:///../ckeditor5-engine/src/model/document.js”,“webpack:///../ckeditor5-engine/src/model/markercollection.js”,“webpack:///../ckeditor5-engine/src/model/liveposition.js”,“webpack:///../ckeditor5-engine/src/model/utils/insertcontent.js”,“webpack:///../ckeditor5-engine/src/model/utils/deletecontent.js”,“webpack:///../ckeditor5-engine/src/model/utils/modifyselection.js”,“webpack:///../ckeditor5-engine/src/model/utils/getselectedcontent.js”,“webpack:///../ckeditor5-engine/src/model/model.js”,“webpack:///../ckeditor5-utils/src/dom/setdatainelement.js”,“webpack:///../ckeditor5-core/src/editor/utils/elementapimixin.js”,“webpack:///../ckeditor5-core/src/editor/utils/attachtoform.js”,“webpack:///../ckeditor5-engine/src/dataprocessor/basichtmlwriter.js”,“webpack:///../ckeditor5-ui/src/componentfactory.js”,“webpack:///../ckeditor5-utils/src/focustracker.js”,“webpack:///../ckeditor5-ui/src/toolbar/enabletoolbarkeyboardfocus.js”,“webpack:///../ckeditor5-ui/src/toolbar/normalizetoolbarconfig.js”,“webpack:///../ckeditor5-editor-classic/src/classiceditorui.js”,“webpack:///../ckeditor5-ui/src/viewcollection.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/cloneDeepWith.js”,“webpack:///../ckeditor5-ui/src/template.js”,“webpack:///../ckeditor5-utils/src/dom/tounit.js”,“webpack:///../ckeditor5-ui/src/focuscycler.js”,“webpack:///../ckeditor5-ui/src/toolbar/toolbarseparatorview.js”,“webpack:///../ckeditor5-ui/src/bindings/preventdefault.js”,“webpack:///../ckeditor5-utils/src/dom/getdatafromelement.js”,“webpack:///../ckeditor5-editor-classic/src/classiceditor.js”,“webpack:///../ckeditor5-clipboard/src/datatransfer.js”,“webpack:///../ckeditor5-clipboard/src/clipboardobserver.js”,“webpack:///../ckeditor5-clipboard/src/utils/plaintexttohtml.js”,“webpack:///../ckeditor5-clipboard/src/utils/normalizeclipboarddata.js”,“webpack:///../ckeditor5-clipboard/src/utils/viewtoplaintext.js”,“webpack:///../ckeditor5-clipboard/src/clipboard.js”,“webpack:///../ckeditor5-enter/src/entercommand.js”,“webpack:///../ckeditor5-enter/src/enterobserver.js”,“webpack:///../ckeditor5-utils/src/difftochanges.js”,“webpack:///../ckeditor5-typing/src/changebuffer.js”,“webpack:///../ckeditor5-typing/src/input.js”,“webpack:///../ckeditor5-typing/src/deletecommand.js”,“webpack:///../ckeditor5-undo/src/basecommand.js”,“webpack:///../ckeditor5-undo/src/undocommand.js”,“webpack:///../ckeditor5-adapter-ckfinder/src/utils.js”,“webpack:///../ckeditor5-adapter-ckfinder/src/uploadadapter.js”,“webpack:///../ckeditor5-autoformat/src/inlineautoformatediting.js”,“webpack:///../ckeditor5-autoformat/src/autoformat.js”,“webpack:///../ckeditor5-utils/src/first.js”,“webpack:///../ckeditor5-block-quote/src/blockquotecommand.js”,“webpack:///../ckeditor5-block-quote/src/blockquoteediting.js”,“webpack:////workspace/ckeditor5/node_modules/@ckeditor/ckeditor-cloud-services-core/src/uploadgateway/fileuploader.js”,“webpack:////workspace/ckeditor5/node_modules/@ckeditor/ckeditor-cloud-services-core/src/uploadgateway/uploadgateway.js”,“webpack:///../ckeditor5-image/src/image/converters.js”,“webpack:///../ckeditor5-widget/src/highlightstack.js”,“webpack:///../ckeditor5-widget/src/utils.js”,“webpack:///../ckeditor5-image/src/image/utils.js”,“webpack:///../ckeditor5-image/src/image/imageediting.js”,“webpack:///../ckeditor5-engine/src/view/observer/mouseobserver.js”,“webpack:///../ckeditor5-widget/src/widget.js”,“webpack:///../ckeditor5-image/src/imagetextalternative/imagetextalternativecommand.js”,“webpack:///../ckeditor5-ui/src/bindings/clickoutsidehandler.js”,“webpack:///../ckeditor5-ui/src/labeledinput/labeledinputview.js”,“webpack:///../ckeditor5-ui/src/bindings/submithandler.js”,“webpack:///../ckeditor5-utils/src/dom/getpositionedancestor.js”,“webpack:///../ckeditor5-utils/src/dom/position.js”,“webpack:///../ckeditor5-ui/src/panel/balloon/balloonpanelview.js”,“webpack:///../ckeditor5-ui/src/panel/balloon/contextualballoon.js”,“webpack:///../ckeditor5-image/src/image/ui/utils.js”,“webpack:///../ckeditor5-image/src/imagetextalternative/imagetextalternativeui.js”,“webpack:///../ckeditor5-image/src/imageupload/utils.js”,“webpack:///../ckeditor5-image/src/imageupload/imageuploadui.js”,“webpack:///../ckeditor5-image/src/imageupload/imageuploadprogress.js”,“webpack:///../ckeditor5-image/src/imageupload/imageuploadcommand.js”,“webpack:///../ckeditor5-image/src/imageupload/imageuploadediting.js”,“webpack:///../ckeditor5-image/src/imageupload.js”,“webpack:///../ckeditor5-paragraph/src/paragraphcommand.js”,“webpack:///../ckeditor5-paragraph/src/paragraph.js”,“webpack:///../ckeditor5-heading/src/headingcommand.js”,“webpack:///../ckeditor5-heading/src/headingediting.js”,“webpack:///../ckeditor5-ui/src/dropdown/utils.js”,“webpack:///../ckeditor5-heading/src/utils.js”,“webpack:///../ckeditor5-engine/src/view/placeholder.js”,“webpack:///../ckeditor5-image/src/imagecaption/utils.js”,“webpack:///../ckeditor5-image/src/imagecaption/imagecaptionediting.js”,“webpack:///../ckeditor5-image/src/imagestyle/converters.js”,“webpack:///../ckeditor5-image/src/imagestyle/utils.js”,“webpack:///../ckeditor5-image/src/imagestyle/imagestyleediting.js”,“webpack:///../ckeditor5-image/src/imagestyle/imagestyleui.js”,“webpack:///../ckeditor5-image/src/imagestyle.js”,“webpack:///../ckeditor5-link/src/findlinkrange.js”,“webpack:///../ckeditor5-link/src/linkcommand.js”,“webpack:///../ckeditor5-link/src/utils.js”,“webpack:///../ckeditor5-engine/src/utils/bindtwostepcarettoattribute.js”,“webpack:///../ckeditor5-link/src/linkui.js”,“webpack:///../ckeditor5-link/src/link.js”,“webpack:///../ckeditor5-list/src/listcommand.js”,“webpack:///../ckeditor5-list/src/indentcommand.js”,“webpack:///../ckeditor5-list/src/utils.js”,“webpack:///../ckeditor5-list/src/converters.js”,“webpack:///../ckeditor5-list/src/listediting.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/rest.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_getPrototype.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_isHostObject.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/isObjectLike.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/isPlainObject.js”,“webpack:///../ckeditor5-utils/src/config.js”,“webpack:///../ckeditor5-utils/src/eventinfo.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_assocIndexOf.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/eq.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_listCacheDelete.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_listCacheGet.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_listCacheHas.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_listCacheSet.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_stackClear.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/isFunction.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/isObject.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_toSource.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/isNative.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_getNative.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_nativeCreate.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_hashClear.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_hashGet.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_hashHas.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_hashDelete.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_hashSet.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_Map.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_mapCacheClear.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_getMapData.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_isKeyable.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_mapCacheDelete.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_mapCacheGet.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_mapCacheHas.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_mapCacheSet.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_stackSet.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_stackDelete.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_stackGet.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_stackHas.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_arrayEach.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_copyObject.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseKeys.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseTimes.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseProperty.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_getLength.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/isLength.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/isArrayLike.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/isArrayLikeObject.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/isArguments.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/isArray.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/isString.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_indexKeys.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_isIndex.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_isPrototype.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/keys.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseAssign.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_cloneBuffer.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_copyArray.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_copySymbols.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_arrayPush.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseGetAllKeys.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_getAllKeys.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_DataView.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_Promise.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_Set.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_WeakMap.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_initCloneArray.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_Uint8Array.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_cloneArrayBuffer.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_cloneDataView.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_addMapEntry.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_arrayReduce.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_mapToArray.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_cloneMap.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_cloneRegExp.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_addSetEntry.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_setToArray.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_cloneSet.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_Symbol.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_cloneSymbol.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_cloneTypedArray.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_initCloneByTag.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseCreate.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_initCloneObject.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/clone.js”,“webpack:///../ckeditor5-engine/src/view/text.js”,“webpack:///../ckeditor5-engine/src/view/textproxy.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_apply.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/isSymbol.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/toNumber.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/toFinite.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/toInteger.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_createAssigner.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_Reflect.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_iteratorToArray.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/keysIn.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/assignIn.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/extend.js”,“webpack:///../ckeditor5-engine/src/view/rooteditableelement.js”,“webpack:///../ckeditor5-engine/src/view/treewalker.js”,“webpack:///../ckeditor5-engine/src/view/position.js”,“webpack:///../ckeditor5-engine/src/view/documentselection.js”,“webpack:///../ckeditor5-utils/src/collection.js”,“webpack:///../ckeditor5-engine/src/view/document.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_setCacheAdd.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_setCacheHas.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_arraySome.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_equalArrays.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_equalByTag.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseIsEqualDeep.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/isEqualWith.js”,“webpack:///../ckeditor5-engine/src/view/observer/mutationobserver.js”,“webpack:///../ckeditor5-engine/src/view/observer/domeventdata.js”,“webpack:///../ckeditor5-engine/src/view/observer/domeventobserver.js”,“webpack:///../ckeditor5-engine/src/view/observer/keyobserver.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/now.js”,“webpack:///../ckeditor5-engine/src/view/observer/selectionobserver.js”,“webpack:///../ckeditor5-engine/src/view/observer/focusobserver.js”,“webpack:///../ckeditor5-engine/src/view/observer/compositionobserver.js”,“webpack:///../ckeditor5-engine/src/model/text.js”,“webpack:///../ckeditor5-engine/src/model/textproxy.js”,“webpack:///../ckeditor5-engine/src/model/nodelist.js”,“webpack:///../ckeditor5-engine/src/model/position.js”,“webpack:///../ckeditor5-engine/src/model/range.js”,“webpack:///../ckeditor5-engine/src/conversion/mapper.js”,“webpack:///../ckeditor5-core/src/plugincollection.js”,“webpack:///../ckeditor5-core/src/commandcollection.js”,“webpack:///../ckeditor5-engine/src/conversion/viewconsumable.js”,“webpack:///../ckeditor5-engine/src/model/operation/attributeoperation.js”,“webpack:///../ckeditor5-engine/src/model/operation/moveoperation.js”,“webpack:///../ckeditor5-engine/src/model/operation/reinsertoperation.js”,“webpack:///../ckeditor5-engine/src/model/operation/removeoperation.js”,“webpack:///../ckeditor5-engine/src/model/operation/insertoperation.js”,“webpack:///../ckeditor5-engine/src/model/operation/markeroperation.js”,“webpack:///../ckeditor5-engine/src/model/operation/nooperation.js”,“webpack:///../ckeditor5-engine/src/model/operation/renameoperation.js”,“webpack:///../ckeditor5-engine/src/model/operation/rootattributeoperation.js”,“webpack:///../ckeditor5-engine/src/model/operation/operationfactory.js”,“webpack:///../ckeditor5-engine/src/model/delta/deltafactory.js”,“webpack:///../ckeditor5-engine/src/model/delta/delta.js”,“webpack:///../ckeditor5-engine/src/model/delta/attributedelta.js”,“webpack:///../ckeditor5-engine/src/model/delta/splitdelta.js”,“webpack:///../ckeditor5-engine/src/model/delta/mergedelta.js”,“webpack:///../ckeditor5-engine/src/model/delta/movedelta.js”,“webpack:///../ckeditor5-engine/src/model/delta/removedelta.js”,“webpack:///../ckeditor5-engine/src/model/delta/renamedelta.js”,“webpack:///../ckeditor5-engine/src/model/delta/wrapdelta.js”,“webpack:///../ckeditor5-engine/src/model/delta/unwrapdelta.js”,“webpack:///../ckeditor5-engine/src/model/delta/insertdelta.js”,“webpack:///../ckeditor5-engine/src/model/delta/weakinsertdelta.js”,“webpack:///../ckeditor5-engine/src/model/delta/basic-deltas.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/chunk.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_isFlattenable.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/concat.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseIndexOf.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_indexOfNaN.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_arrayIncludes.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_arrayIncludesWith.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_arrayMap.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseUnary.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_cacheHas.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseDifference.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/difference.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseToPairs.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_setToPairs.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_createToPairs.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/toPairs.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_getMatchData.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_matchesStrictComparable.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseMatches.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseToString.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/toString.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_stringToPath.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_castPath.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_toKey.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseGet.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/get.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/hasIn.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseMatchesProperty.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/identity.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_basePropertyDeep.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/property.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseIteratee.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/differenceBy.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/differenceWith.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/drop.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/dropRight.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseWhile.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/dropRightWhile.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/toLength.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseClamp.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseFill.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/fill.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/findIndex.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseFindIndex.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/flatten.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/head.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_castArrayLikeObject.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseIntersection.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/intersection.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/intersectionBy.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/intersectionWith.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/join.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/nth.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseNth.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_basePullAll.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseIndexOfWith.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/pullAll.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/pull.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/pullAllBy.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_parent.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseAt.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_basePullAt.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_compareAscending.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/pullAt.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/remove.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/reverse.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseSortedIndex.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseSortedIndexBy.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/sortedIndex.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/sortedUniq.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseSortedUniq.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_createSet.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseUniq.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/noop.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/union.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/unionBy.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/unionWith.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/uniq.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/unzip.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_arrayFilter.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/unzipWith.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/without.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseXor.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/xor.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/xorBy.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/xorWith.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/zip.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseZipObject.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/zipObject.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/zipObjectDeep.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_baseSet.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/zipWith.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/array.default.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/compact.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/dropWhile.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/findLastIndex.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/flattenDeep.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/flattenDepth.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/fromPairs.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/indexOf.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/initial.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/lastIndexOf.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/pullAllWith.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/slice.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/sortedIndexBy.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/sortedIndexOf.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/sortedLastIndex.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/sortedLastIndexBy.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/sortedLastIndexOf.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/sortedUniqBy.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/tail.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/take.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/takeRight.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/takeRightWhile.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/takeWhile.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/uniqBy.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/uniqWith.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/array.js”,“webpack:///../ckeditor5-engine/src/model/delta/rootattributedelta.js”,“webpack:///../ckeditor5-engine/src/model/operation/detachoperation.js”,“webpack:///../ckeditor5-engine/src/model/rootelement.js”,“webpack:///../ckeditor5-utils/src/keystrokehandler.js”,“webpack:///../ckeditor5-core/src/editingkeystrokehandler.js”,“webpack:///../ckeditor5-core/src/editor/editor.js”,“webpack:///../ckeditor5-core/src/editor/utils/dataapimixin.js”,“webpack:///../ckeditor5-engine/src/dataprocessor/htmldataprocessor.js”,“webpack:///../ckeditor5-ui/src/view.js”,“webpack:///../ckeditor5-ui/src/editorui/editoruiview.js”,“webpack:///../ckeditor5-ui/src/label/labelview.js”,“webpack:///../ckeditor5-ui/src/editorui/boxed/boxededitoruiview.js”,“webpack:///../ckeditor5-ui/src/editableui/editableuiview.js”,“webpack:///../ckeditor5-ui/src/editableui/inline/inlineeditableuiview.js”,“webpack:///../ckeditor5-ui/src/panel/sticky/stickypanelview.js”,“webpack:///../ckeditor5-ui/src/toolbar/toolbarview.js”,“webpack:///../ckeditor5-editor-classic/src/classiceditoruiview.js”,“webpack:///../ckeditor5-utils/src/elementreplacer.js”,“webpack:///../ckeditor5-core/src/plugin.js”,“webpack:///../ckeditor5-core/src/command.js”,“webpack:///../ckeditor5-enter/src/enter.js”,“webpack:///../ckeditor5-typing/src/inputcommand.js”,“webpack:///../ckeditor5-typing/src/deleteobserver.js”,“webpack:///../ckeditor5-typing/src/delete.js”,“webpack:///../ckeditor5-typing/src/typing.js”,“webpack:///../ckeditor5-undo/src/redocommand.js”,“webpack:///../ckeditor5-undo/src/undoediting.js”,“webpack:///../ckeditor5-ui/src/icon/iconview.js”,“webpack:///../ckeditor5-ui/src/tooltip/tooltipview.js”,“webpack:///../ckeditor5-ui/src/button/buttonview.js”,“webpack:///../ckeditor5-undo/src/undoui.js”,“webpack:///../ckeditor5-undo/src/undo.js”,“webpack:///../ckeditor5-essentials/src/essentials.js”,“webpack:///../ckeditor5-upload/src/filereader.js”,“webpack:///../ckeditor5-upload/src/filerepository.js”,“webpack:///../ckeditor5-autoformat/src/blockautoformatediting.js”,“webpack:///../ckeditor5-basic-styles/src/attributecommand.js”,“webpack:///../ckeditor5-basic-styles/src/bold/boldediting.js”,“webpack:///../ckeditor5-basic-styles/src/bold/boldui.js”,“webpack:///../ckeditor5-basic-styles/src/bold.js”,“webpack:///../ckeditor5-basic-styles/src/italic/italicediting.js”,“webpack:///../ckeditor5-basic-styles/src/italic/italicui.js”,“webpack:///../ckeditor5-basic-styles/src/italic.js”,“webpack:///../ckeditor5-block-quote/src/blockquoteui.js”,“webpack:///../ckeditor5-block-quote/src/blockquote.js”,“webpack:////workspace/ckeditor5/node_modules/@ckeditor/ckeditor-cloud-services-core/src/token/token.js”,“webpack:///../ckeditor5-cloud-services/src/cloudservices.js”,“webpack:///../ckeditor5-easy-image/src/cloudservicesuploadadapter.js”,“webpack:///../ckeditor5-image/src/imagetextalternative/imagetextalternativeediting.js”,“webpack:///../ckeditor5-ui/src/inputtext/inputtextview.js”,“webpack:///../ckeditor5-image/src/imagetextalternative/ui/textalternativeformview.js”,“webpack:///../ckeditor5-image/src/imagetextalternative.js”,“webpack:///../ckeditor5-image/src/image.js”,“webpack:///../ckeditor5-upload/src/ui/filedialogbuttonview.js”,“webpack:///../ckeditor5-ui/src/notification/notification.js”,“webpack:///../ckeditor5-easy-image/src/easyimage.js”,“webpack:///../ckeditor5-ui/src/model.js”,“webpack:///../ckeditor5-ui/src/dropdown/dropdownpanelview.js”,“webpack:///../ckeditor5-ui/src/dropdown/dropdownview.js”,“webpack:///../ckeditor5-ui/src/dropdown/button/dropdownbuttonview.js”,“webpack:///../ckeditor5-ui/src/list/listview.js”,“webpack:///../ckeditor5-ui/src/list/listitemview.js”,“webpack:///../ckeditor5-heading/src/headingui.js”,“webpack:///../ckeditor5-heading/src/heading.js”,“webpack:///../ckeditor5-image/src/imagecaption.js”,“webpack:///../ckeditor5-image/src/imagestyle/imagestylecommand.js”,“webpack:///../ckeditor5-image/src/imagetoolbar.js”,“webpack:///../ckeditor5-link/src/unlinkcommand.js”,“webpack:///../ckeditor5-link/src/linkediting.js”,“webpack:///../ckeditor5-engine/src/view/observer/clickobserver.js”,“webpack:///../ckeditor5-link/src/ui/linkformview.js”,“webpack:///../ckeditor5-link/src/ui/linkactionsview.js”,“webpack:///../ckeditor5-list/src/listui.js”,“webpack:///../ckeditor5-list/src/list.js”,“webpack:///./src/ckeditor.js”,“webpack:///(webpack)/buildin/global.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/_checkGlobal.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/isBuffer.js”,“webpack:///../ckeditor5-utils/src/lib/lodash/constant.js”,“webpack:///../ckeditor5-ui/theme/globals/globals.css?4faf”,“webpack:///../ckeditor5-ui/theme/globals/globals.css”,“webpack:////workspace/ckeditor5/node_modules/style-loader/lib/urls.js”,“webpack:///../ckeditor5-ui/theme/components/editorui/editorui.css?1da5”,“webpack:///../ckeditor5-ui/theme/components/editorui/editorui.css”,“webpack:///../ckeditor5-ui/theme/components/label/label.css?f124”,“webpack:///../ckeditor5-ui/theme/components/label/label.css”,“webpack:///../ckeditor5-ui/theme/components/panel/stickypanel.css?9e3d”,“webpack:///../ckeditor5-ui/theme/components/panel/stickypanel.css”,“webpack:///../ckeditor5-ui/theme/components/toolbar/toolbar.css?b19f”,“webpack:///../ckeditor5-ui/theme/components/toolbar/toolbar.css”,“webpack:///../ckeditor5-editor-classic/theme/classiceditor.css?a2b4”,“webpack:///../ckeditor5-editor-classic/theme/classiceditor.css”,“webpack:///../ckeditor5-ui/theme/components/icon/icon.css?435c”,“webpack:///../ckeditor5-ui/theme/components/icon/icon.css”,“webpack:///../ckeditor5-ui/theme/components/tooltip/tooltip.css?938c”,“webpack:///../ckeditor5-ui/theme/components/tooltip/tooltip.css”,“webpack:///../ckeditor5-ui/theme/components/button/button.css?e68e”,“webpack:///../ckeditor5-ui/theme/components/button/button.css”,“webpack:///../ckeditor5-undo/theme/icons/undo.svg”,“webpack:///../ckeditor5-undo/theme/icons/redo.svg”,“webpack:///../ckeditor5-basic-styles/theme/icons/bold.svg”,“webpack:///../ckeditor5-basic-styles/theme/icons/italic.svg”,“webpack:///../ckeditor5-core/theme/icons/quote.svg”,“webpack:///../ckeditor5-block-quote/theme/blockquote.css?88db”,“webpack:///../ckeditor5-block-quote/theme/blockquote.css”,“webpack:///../ckeditor5-widget/theme/widget.css?0ab3”,“webpack:///../ckeditor5-widget/theme/widget.css”,“webpack:///../ckeditor5-ui/theme/components/inputtext/inputtext.css?f03c”,“webpack:///../ckeditor5-ui/theme/components/inputtext/inputtext.css”,“webpack:///../ckeditor5-image/theme/textalternativeform.css?326a”,“webpack:///../ckeditor5-image/theme/textalternativeform.css”,“webpack:///../ckeditor5-ui/theme/components/panel/balloonpanel.css?1dae”,“webpack:///../ckeditor5-ui/theme/components/panel/balloonpanel.css”,“webpack:///../ckeditor5-core/theme/icons/low-vision.svg”,“webpack:///../ckeditor5-image/theme/image.css?ba3f”,“webpack:///../ckeditor5-image/theme/image.css”,“webpack:///../ckeditor5-core/theme/icons/image.svg”,“webpack:///../ckeditor5-image/theme/icons/image_placeholder.svg”,“webpack:///../ckeditor5-image/theme/imageuploadprogress.css?2461”,“webpack:///../ckeditor5-image/theme/imageuploadprogress.css”,“webpack:///../ckeditor5-ui/theme/components/dropdown/dropdown.css?8aa1”,“webpack:///../ckeditor5-ui/theme/components/dropdown/dropdown.css”,“webpack:///../ckeditor5-ui/theme/icons/dropdown-arrow.svg”,“webpack:///../ckeditor5-ui/theme/components/list/list.css?f2d2”,“webpack:///../ckeditor5-ui/theme/components/list/list.css”,“webpack:///../ckeditor5-ui/theme/components/dropdown/toolbardropdown.css?9b6d”,“webpack:///../ckeditor5-ui/theme/components/dropdown/toolbardropdown.css”,“webpack:///../ckeditor5-ui/theme/components/dropdown/listdropdown.css?a2da”,“webpack:///../ckeditor5-ui/theme/components/dropdown/listdropdown.css”,“webpack:///../ckeditor5-heading/theme/heading.css”,“webpack:///../ckeditor5-engine/theme/placeholder.css?4f77”,“webpack:///../ckeditor5-engine/theme/placeholder.css”,“webpack:///../ckeditor5-image/theme/imagecaption.css?e11e”,“webpack:///../ckeditor5-image/theme/imagecaption.css”,“webpack:///../ckeditor5-core/theme/icons/object-full-width.svg”,“webpack:///../ckeditor5-core/theme/icons/object-left.svg”,“webpack:///../ckeditor5-core/theme/icons/object-center.svg”,“webpack:///../ckeditor5-core/theme/icons/object-right.svg”,“webpack:///../ckeditor5-image/theme/imagestyle.css?a408”,“webpack:///../ckeditor5-image/theme/imagestyle.css”,“webpack:///../ckeditor5-link/theme/link.css?03b8”,“webpack:///../ckeditor5-link/theme/link.css”,“webpack:///../ckeditor5-link/theme/linkform.css?2d98”,“webpack:///../ckeditor5-link/theme/linkform.css”,“webpack:///../ckeditor5-link/theme/icons/unlink.svg”,“webpack:///../ckeditor5-core/theme/icons/pencil.svg”,“webpack:///../ckeditor5-link/theme/linkactions.css?6618”,“webpack:///../ckeditor5-link/theme/linkactions.css”,“webpack:///../ckeditor5-link/theme/icons/link.svg”,“webpack:///../ckeditor5-list/theme/icons/numberedlist.svg”,“webpack:///../ckeditor5-list/theme/icons/bulletedlist.svg”],“names”:[],“mappings”:“;;;;ytBACA,2BACA,uCACA,sCACA,WACA,MACA,+CAEA,oBACA,GAAC,CATD,+CAUA,kBCTA,cAMA,IACA,iBAGA,mBACA,CACA,IACA,aAIA,mCAGA,aAGA,OACA,OAIA,OAzBA,YA4BA,MAGA,uBACA,GACA,kCACA,CACA,gBACA,cAGA,OAGA,iBACA,YACA,qBAA2B,UAA0B,UACrD,YAAiC,CAAe,QAChD,EAEA,aADA,QAIA,mBAAsD,wCAA+D,SAGrH,MAGA,6BC1DA,CAiHA,eACA,WAAgB,MAAmB,WACnC,OACA,WAEA,SACA,GAEA,iBAAiB,YAA2B,OAC5C,iBAGA,UAAQ,eAAuB,OAC/B,qBAEA,YAAG,KACH,WAEA,KAAiB,YAAuB,OACxC,eAGA,sBAA2B,eAC3B,QACA,CACA,EAEA,eACA,WACA,KAEA,KAAgB,MAAiB,WACjC,OACA,4BACA,OACA,OACA,OACA,MAAc,cAEd,6BAEA,qBAFkD,WAClD,KAGA,CACA,SAEA,eACA,WAEA,eACA,mBAGA,mIAEA,MAEA,uBAEA,+BAEA,eAEA,kCALG,cAMD,gBACF,wBACE,sEACF,qCACA,UACA,iBACA,sBAEA,sMAEA,aACA,wBACA,sBAEA,uBACA,WACA,iBAEA,GAEA,aACA,8BAEA,SAMA,oBAJA,iBACA,OAEA,SAGA,aACA,8BAEA,QAOA,oBANA,uBAEA,mBACA,OAEA,SAGA,eACA,mCACA,kBACA,KACA,GAEA,eACA,WAGA,oBACA,IAKA,mBAHA,SAOA,4BAEA,CAIA,iBACA,OAEA,YAEA,eACA,sBAEA,YACA,QACA,WACA,wBACA,wCACA,wCACA,yBAEA,2BACA,cACA,sBACA,CAEA,mCACA,KAEA,MACA,cACA,oBACA,CACA,IAGA,SAEA,iBACA,MACA,CACA,aACA,iBACA,uBAEA,UAGA,SACA,IACA,KAEA,IACA,EAYA,mBACA,cAEA,SACA,gCACE,WACF,gBACA,sBAEA,+BAEA,QACA,wBAEA,QAEA,cACA,EAEA,eACA,SACA,QAGA,2BAGA,aACA,wBACE,cACF,QACA,4BAGA,mCACA,kBACA,EAEA,iBACA,SACA,QAQA,cAEA,qCACA,8BAKA,aAAuD,6GAGvD,0BAA6B,MAE7B,iBAEA,gBAEA,0BACA,mBAlXA,MAEA,gBACA,IAEA,oBACA,CAEA,6CADA,aAEA,CAEA,YAMA,gDACA,IAEA,gBACA,iBACA,gBAEA,cACA,OAEA,qBAMA,IACA,2BAEA,iCACA,cAEA,yDACA,qBAGA,qBACA,IAAK,SACL,GACA,IAEA,CACA,MACA,OACA,KACA,CAEA,MACA,OACA,IAEA,WAEA,uBACA,+BACA,iDAGA,qEAEA,4CAIA,4DAGA,iCAGA,gCAEA,gBAEA,aAEA,mBACA,WAEA,KAAiB,MAAmB,WACpC,OACA,WAEA,MACA,SACA,OAEA,MACA,OACA,OACA,MAEA,WAAiB,QAAsB,OACvC,SAEA,gBACA,WAAmB,YAA2B,aAE9C,sBACA,GAEA,CACA,GAyLA,gBACA,OAEA,uBACA,OAEA,+BACA,KACA,CAAC,yDChTD,KACA,CACA,YAIA,kDACA,SAIA,oCAKA,sCAGA,qDAGA,sCAGA,sCAQA,QACA,aACA,2BAEA,2DCxCA,qBACA,uBACA,cAEA,kCACA,qCACA,CACA,4BACA,UACA,CAEA,iCACA,CACA,4BACA,UACA,CAEA,sCACA,CAEA,kCACA,CACA,CACA,uBCvBA,U,kTCAA,U,gWCCA,QAEA,yCAEA,OAKe,qBAAf,EAEA,cACA,EAEA,oBAEA,+BA2BA,yCCiCA,aACA,iBAMA,wBAAiC,iBAA6B,cAC9D,MCpEA,CCFA,YACA,OAEA,cAAiB,EAAO,IACxB,0DAGA,GACA,QCJA,CCmZA,eACA,eACA,kBAGA,QACA,IAUA,CACA,eACA,CACA,iBAEA,IAOA,CACA,aACA,OACA,MAIA,CACA,aACA,UACA,2CACA,OAIA,OACA,OAEA,CACA,YACA,OACA,WACA,eAEA,GAMA,CACA,eACA,SAGA,QAEA,KASA,UAEA,OAGA,aAKA,QACA,SAQA,WAEA,WAIA,0BAGA,QAEA,+BAGA,gBAKA,UACA,mCAIA,yBACA,OACA,CAIA,CACA,eACA,SAEA,WACA,SAGA,YAEA,qBAAiB,kBAAkC,WACnD,eAEA,oBACA,SAEA,CACA,QAIA,CACA,eACA,IAEA,mDAGA,SAUA,WARA,8CAGA,OAIA,IAQuB,CACvB,iBACA,kBAEA,GAEA,6BAGA,WAJG,sBAMH,uBAEA,eACA,KACA,CAMoB,CACpB,iBACA,SAEA,gBACA,kBAAkB,MAAsB,OACxC,SAEA,yBACA,GAIA,ICjlBA,CACA,kBACA,gBACA,6CACA,uCACA,aAIA,2BACA,gCAEA,sCACA,eACA,EACA,ECxCA,CCOA,aACA,QACA,eAEA,WACA,eACA,OACA,qBACA,GACA,CAEA,CCXA,aACA,QACA,eAEA,WACA,eACA,OACA,qBACA,GACA,CAEA,CCXA,aACA,QACA,eAEA,WACA,eACA,OACA,qBACA,GACA,CAEA,CCVA,aACA,eACA,SAEA,CCAA,iBACA,OACA,mBACA,sBACA,UAEA,OAEA,CCVA,eAIA,WACA,uCACA,YAEA,CCdA,aAGA,WACA,UAIA,CCsBA,aACA,WACA,OAIA,CC+BA,yBACA,IAEA,yBAEA,MACA,WAEA,aACA,MAEA,eACA,MACA,MAKA,OACA,eAEA,gBACA,eAEA,gCACA,IACA,iBAEA,aACA,MACA,eAEA,QAAK,KACL,KACA,iBAEA,KACA,WACA,CAEA,WA1BA,MACA,SAEG,eAwBH,gBACA,OACA,KAEA,cAEA,SACA,iBAGA,MAQA,4BANA,KACA,MAEA,aACA,iBACA,IAGA,CCjHA,eACA,uBAEA,kBAAiB,EAAY,IAC7B,aAEA,KAKA,4BAEA,OACE,kBAEF,OAGA,SAEA,WC3BA,CCDA,aACA,YAEA,cACA,gBAGA,MACA,QCZA,CACA,aACA,sBACA,UCLA,CA4KA,eAEA,IACA,2BAGA,cAEA,YACA,yBAEA,SACA,MAKA,OACA,8BAEA,iBACA,YAKA,SACA,wBAEA,cAMA,eACA,sBAEA,aAMA,WAMqB,CACrB,eAEA,oBACA,UAGA,QACA,KAOwB,CACxB,eACA,SAEA,oBACA,SAEA,0BACA,WAEA,mBACA,SACI,4BACJ,cACA,UAEA,mBAEI,eACJ,QAEA,mBAEA,KACA,YAEA,KAEA,CACA,QAMwB,CACxB,eACA,SAEA,YACA,+BACA,WAEA,yBACA,UACA,WAIA,WACA,mBAEA,KAAG,WACH,cAEA,mBAIA,MACA,QAOwB,CACxB,eACA,SAEA,oBACA,SAEA,sBACA,WAEA,2BACA,cACA,UAEA,mBAEI,eACJ,QAEA,mBAEA,KACA,YAEA,KAEA,CACA,QC/SA,CA6tBA,aACA,GACA,MAEA,QAGA,iBACA,UACA,WACG,UACH,sBAIA,YACA,QAMkB,CAClB,eAEA,OACA,OACA,IACA,IAEA,UAGA,QAKA,QACA,+BAIA,eAAiB,MAAyB,WAC1C,WAEA,aAEA,SACA,cAMA,qBAEA,SAGA,GAEA,UACA,QAEA,KAEA,IAGA,UAGA,uBAIA,yBAGA,UAGA,SAIG,OAEH,WAEA,KACA,EAMkB,CAClB,eACA,iBACA,SACA,yBACA,OAKY,CACZ,aAEA,OACA,oBAGA,YACA,SAIA,WACA,YACA,KACA,mBAGA,UACA,yBAKA,SC51BA,CAoCA,YACA,qBAEA,uBACA,mBAKA,kBACA,UC7EA,CACA,iBACA,KACA,MAEA,eACA,iBACA,4BACA,wBAEA,aAGA,OAEA,CCXA,aACA,aAEA,gBACA,UACA,UAEA,QACA,QAGA,CCoOA,aAEA,CAQA,qCACA,UAgDA,kCACA,UA+BA,kCACA,UAEA,OAK2C,CAC3C,gBACA,WACA,kCACA,YAGA,uBAMA,2BAIA,uGAMA,sBAGA,2HAEA,sCAMA,wBAKA,2FACA,2BAEA,gBAEA,cAGA,KACA,+CAGA,kCAGA,OAGA,wCACA,QACA,cACA,EAOoB,CACpB,iBACA,IAMA,mCAGA,gGAEA,MAIA,SAOa,CACb,eACA,oBAGA,2CACA,KAMa,CACb,aACA,qBACA,mBAmBa,CACb,gBAEA,OAMA,oBAGA,8EAAiB,IACjB,OAEA,GAgBA,MAfA,gDAGA,sBACA,IACA,gCACG,gBACH,qBAAqB,yBACrB,SAEA,0BAEA,qEAEA,IAQkB,CAClB,mBACA,SACA,UACA,YAEA,GACA,eAIA,WAGA,YAEA,QAuC8E,CAC9E,aACA,IAEA,8BAIA,oBACA,+CAEA,yBACA,mCACA,aACA,EACA,EAOkB,CAClB,eACA,SACA,UACA,UAOA,KACA,mDAEA,cACA,YAGA,OACA,kBAEA,SAEA,QAO4E,CAC5E,eACA,gBACA,SACA,SAIA,WACA,qDACA,WAKA,iCACA,OACA,SAEA,EAEA,EACA,EC5nBA,CCwcA,aACA,mDAKA,aC1cA,CACA,aACA,OAEA,WACA,QAGA,IACA,QCUA,CC+JA,YAEA,MACA,YAGA,iBAGA,yCACA,IACA,aAGA,UACA,MAEA,WACA,OAIA,UACA,UAKY,CACZ,aACA,oEACA,MClNA,CA0DA,aACA,OACA,KClEA,CCwCA,cACA,IAEA,MACA,uBAaA,yBACA,sBACA,wBAGA,kBAhBA,eAOA,0DAAwE,CAGxE,QAOA,QAmBA,CACA,cACA,OACA,uBAGA,OACA,8BACA,2BACA,EAQA,CACA,cACA,WAIA,MAEA,oBAGA,0BACA,gBACA,QAEA,MAGA,SA6CA,cACA,gBACA,WC5JA,CAmGA,cACA,yCACA,cAIa,CACb,aACA,OACA,KAIA,CACA,kBACA,6BACA,+CACA,kDAGA,2BACA,WACA,cAEA,gBAGA,0BACA,SAIA,UAEA,wCACA,gBAEA,eAIA,2CAUA,4BACA,WAIA,6CAGA,4BAEA,OACA,CACA,CACA,CCnKA,CAgMA,cAEA,OACA,oBAGA,YACA,SAIA,WACA,YACA,KACA,mBAGA,UACA,yBAKA,SC9MA,CA29CA,cACA,oDACA,aAcA,CACA,cACA,SAEA,oBACA,IACA,GAEA,WACA,MAEA,CACA,QASa,CACb,gBACA,iBACA,SACE,8BAKF,6BACA,aAUA,CACA,cACA,WAEA,sBACA,+BAGA,kBAEA,yBACA,iBAIA,IASkD,CAClD,cACA,4BACA,oDAGA,MACA,oDAIA,qCAGA,sDAGA,sDAGA,iDACA,EAOkD,CAClD,gBAEA,gBACA,yBACA,OAEA,UACA,WAOa,CACb,cACA,wDACA,uEACA,UAgBA,CACA,cACA,kBACA,kBASA,6BAGA,wCACA,cAEA,cACA,EAQA,cACA,2CACA,oBAM0C,CAC1C,cACA,cACA,cAEA,gBAQA,mBAEA,sCAQa,CACb,gBACA,qBACA,WCtpDA,CAyCA,cACA,yCACA,UAUA,CACA,cACA,2BACA,KAWA,CACA,cACA,OACA,cAEA,YAEA,IAEA,CAaA,gBACA,UAGA,6BACA,aAGA,YACA,cAOA,CACA,cACA,eACA,aAEA,CACA,gBACA,4BACA,+CAEA,6DACA,yBACA,iCAEA,mBACA,oBAEA,EACA,CACA,CClJA,CACA,kBAEA,cAkCA,qCAEA,qBAEA,kBAGA,IACA,yBAIA,IACA,YAIA,cAGA,eACA,UAGA,0BACA,OACA,IAEA,cAGA,SACA,QAEA,mBAnEA,OACA,MAGA,QAGA,uBACA,MAEA,KACA,IAGA,MACA,WACA,QACA,QACA,WAGA,mBACA,WACA,SAGA,MAEA,KAEA,SAsCA,EAGA,IAEA,OAAe,GAAW,IAC1B,SAIA,WAAsB,IAAW,IACjC,SAKA,UAEA,KACA,GAAE,OAIF,4BACA,ECvGA,CACA,kBACA,mCACA,KCLA,CACA,cACA,WAGA,gBAEA,cCNA,CACA,cACA,OACA,kDCgBA,CA2sBA,cACA,IACA,2CAGA,oDAEA,8BACA,yCC3tBA,CCVA,cACA,OAEA,SACA,qBACA,gBAGA,IACA,QCLA,CACA,cACA,SAGA,4BACA,iBACA,eAGA,WACA,QCbA,CACA,gBACA,SACA,QAEA,YAGA,mBACA,MAGA,yBACA,ECKA,CAwiCA,kBACA,OAGA,wCAGA,gDACA,eAMoB,CACpB,gBACA,eACA,UACA,SAEA,UCjlCA,CACA,cACA,MACA,MACA,8CACG,6CACH,4DAEA,IAEA,CACA,QCXA,CACA,cACA,OACA,qDCmBA,CA0NA,cACA,oDACA,IC7OA,CCPA,cACA,QACA,eAEA,oBACA,OACA,gBAEA,KAEA,CCFA,wBACA,OACA,OACA,UACA,SACA,UAEA,gBACA,GAEA,gBACA,OACA,UACA,kBACA,QAIA,iBACA,OACA,WAEA,SACA,QAEA,gBACA,YACA,GACA,WACA,OAEA,KACA,WACA,EACA,eAGA,kBACA,oBAEA,iBACA,CACA,KACA,KACA,OACA,iBACA,UACA,SACA,gBAGA,YACA,yBACA,2CACA,sCACA,kBAEA,KACA,CAEA,SADA,cC3EA,CCeA,sBACA,SAGA,mCACA,OAGA,wBADA,MAGA,CCgCA,kBACA,cAuBA,IACA,KAEA,IAIA,SAHA,SACA,QACA,YAGA,cAEA,OAEA,OAEA,kBACA,MAEA,cACA,OACA,MACA,MAEA,kBACA,MAEA,cACA,OACA,MAKA,cACA,cACA,IAEA,aACA,OACA,WACA,MAGA,yBACA,MAEA,cACA,QACA,gBAIA,SACA,MAEA,QAEA,WAEA,aACA,CACA,YAEA,oBACA,MACA,QAEA,aACA,uBACA,KAEA,aACA,OACA,OAEA,UACA,YACA,KAEA,MACA,IACA,iBAEA,MAEA,WACA,mBACA,gBAEA,IACA,CAIA,MAHA,gBAEA,kBAEA,OAhHA,IACA,EACA,KACA,KAEA,KAVA,EACA,EACA,EACA,EACA,KAOA,8BAEA,eA2GA,gBA1GA,EACA,cACA,UACA,oCACA,4BAGA,cAiGA,WACA,SAGA,CCnEA,cACA,cACA,kBACA,iBACA,eACA,SC/EA,CC7BA,cACA,OACA,oDCGA,CCJA,cAEA,qCAEA,0BACA,+BACA,sCACA,wCACA,oCAEA,ICNA,CAkXA,gBACA,UACA,cAEA,IAMa,CACb,cACA,SAIA,2BACA,IC1YA,CAaA,YAA6C,2BAA6B,GAC1E,SACA,aACA,OAGA,QACA,IAQA,KACA,KAEA,MAIA,WAMA,IAKA,iBAEA,QAEA,YAKA,YAKA,UAJA,iBAEA,OAGA,CAOA,CAyDA,kBACA,0BACA,0BACA,gBAEA,kCAEA,gCACA,IAAO,WAEP,aACA,mBACG,MACH,wBAKA,UACA,oBACG,OACH,uBAGA,WACA,aACA,CAMoB,CACpB,gBACA,SACA,gBAEA,gBACA,QACA,gBAEA,gCACA,cACA,6BACI,IACJ,kCAGA,QACA,+BACI,KACJ,kCAIA,YAEA,UAMsC,CACtC,gBACA,mBACA,MAMsC,CACtC,gBACA,gBACA,GAMsC,CACtC,gBACA,iBACA,IAMsC,CACtC,gBACA,kBACA,KAMa,CACb,cACA,OACA,sCAEA,4BAEA,WAMa,CACb,cACA,UACA,SAGA,wBAKA,MAJA,aAGA,aAEA,UAEA,UAQa,CACb,gBACA,SACA,QAEA,aACA,MAEA,gBAEA,WACA,WACA,yBAEA,gDAEA,SACA,MAGA,CACA,QC3OA,CCpCA,cACA,OACA,OAEA,QAEA,OCYA,CC0RA,cAEA,OACA,oBAGA,YACA,SAIA,WACA,YACA,KACA,mBAGA,UACA,gCAKA,oBCxUA,CA2UA,sBACA,OACA,CACA,cACA,CACA,OACA,OACA,mBACA,eAGA,UC1VA,CCiTA,cACA,iBAEA,uCACA,EC5NA,CA4eA,kBACA,WACA,0BACA,kBACA,UAEA,8BACA,sBACA,WAEA,6CACA,eACA,CAEA,SACA,ECzkBA,CA8tBA,gBACA,UAIA,WAEA,6CACA,OAGA,CACA,gBACA,+BAAkD,gBAClD,+BAIA,SAGA,wBADA,SCtvBA,CAiGA,aAEA,2CAEA,kBACA,4BACA,MACA,wBACA,WAEA,MAIA,6BACA,eAEA,OACA,EAAG,UAEH,OASA,CACA,cACA,WACA,eAEA,SACA,GAEA,EACA,+DAEA,qEACA,aAGA,6CACA,eAEA,+BAIA,qBAGA,wFAMA,qDAGA,gBAGA,iBAEA,iCAEA,aACA,+DACA,iBAIA,4BAEA,mBACA,iBAEA,+BACA,CACA,OACA,QACA,QAEA,kBAEA,MAfA,2DAgBA,CACA,OACA,QACA,QAGA,mBC8zBA,cACA,yBACA,kBAGA,gBACA,IAM2C,CAC3C,gBACA,oBAEA,qCACA,IACA,iBAGA,4BACA,sBAGA,oCACA,sBACA,kCAEA,yBACA,UAEA,oBAEA,EACA,CCniCA,CCgCA,cACA,UAEA,uBAEA,kBACA,mCAA0E,sBAC1E,UACA,CAoEA,CACA,cACA,GAEA,wCACA,YAEA,0BACA,sBAGA,cACA,8BACA,8BAGA,mCAGA,qBAEA,iBACA,cAAqD,sBACrD,UACA,CAsDA,CACA,cACA,GAEA,wCACA,YAEA,0BACA,sBAGA,cACA,8BACA,sBAGA,0BAGA,cAEA,iBACA,cAAgE,sBAChE,UACA,CAwHsB,CACtB,gBACA,OAKA,8BACA,SAOa,CACb,kBACA,CAEA,uBAA2B,CAG3B,YAEA,QACA,6DAA4F,KAC1F,aACF,6DAA4F,KAG5F,oDAAqF,KAGrF,sBACA,uBAEA,iBACA,uBAEA,YAEA,cACA,WAEA,WACA,qBAEA,4BACA,UAGA,aAEA,CACA,SAEA,cACA,gBACA,cACA,WAGA,iBAGA,OACA,IAEA,IAEA,IAKkB,CAClB,cACA,OACA,yBAAmC,OACjC,UAEF,qBACA,MAIA,YAAoC,WAMpC,WA0BA,CACA,cACA,gBACA,oBAEA,QAIA,kCAIA,mDAEA,+BACA,iBACA,YACA,CAWA,CACA,aACA,gBACA,gCAIA,qBACA,yCACA,6BAEA,QACA,YACA,CAQA,CACA,aACA,gBAEA,mCAEA,sCACA,oCAAkE,CAElE,iBAGA,gCAIA,4CACA,oBAEA,oBACA,CAyHA,CACA,cACA,sBAAgE,eAEhE,yBACA,aACA,2BAEA,yBAIA,qCAIA,wCACA,UAGA,UACA,gDACA,2CAEA,gBACA,UAEA,gBAAI,wBACJ,uBAEA,gBACA,UAEA,gBACA,0BAKA,UACA,gDACA,2CAEA,gBACA,UAEA,aAAI,wBACJ,uBAEA,gBACA,uBAEA,WACA,6BAGA,SACA,CA+BA,CACA,cACA,gBAGA,iCAGA,kCAEA,YAIA,qCAIA,iBACA,oBAEA,qCAEA,4BACG,uBAEH,8BAGA,OACA,oCAGA,aACA,iCAEA,SACA,EACA,CCrvBA,CACA,gBACA,cACA,WACA,eAEA,SAEA,oBACA,qBAGA,2BAAiC,YAEjC,kCACA,0BACA,GACA,eAEA,EACA,CC1BA,CACA,aACA,gBACA,WAEA,gBAIA,oCAIA,sBAEA,gCACA,kBACA,iBACA,OAEA,yBAAkD,YAClD,aACA,CAuBA,CACA,aACA,gBACA,WAEA,eAIA,oCAIA,wBACA,WACA,8BACA,sBAEA,qBACA,gBACA,CAyBA,CACA,aACA,gBACA,WACA,oBAEA,2BAEA,cAEA,0BACA,qCAIA,sBACA,KACA,CClGA,CCoCA,gBACA,SAEA,QAGA,oDAGA,YACA,iDAGA,mBAGA,qEACA,GAWA,CACA,gBACA,CACA,mBACA,mCAEA,yBAEA,aACA,kDACA,MC3FA,CCyyCA,gBACA,SACA,CAEA,eACA,kBACA,cAEA,mBACA,qBAEA,oBAGA,IAcA,MAZA,gBACA,kBACA,yBAEA,qBACA,0BAEA,4BAEA,oBAEA,UAGA,gBACA,qBAEA,uBACA,SAEA,uBACA,WACA,OACA,EAGA,aACA,eAEA,gBACA,gCACA,SAGA,UACA,WAEA,0BACA,KACA,CAEA,aACA,WAEA,gBACA,uCACA,SAEA,UACA,WAEA,0CACA,KACA,CAEA,aACA,kBAEA,gBACA,SAEA,uCACA,SAEA,UACA,iDAEA,gBACA,QACA,cAGA,KACA,CAEA,UACA,gBAGA,CACA,gBACA,SACA,6BAEA,8BACA,SAEA,gBACA,SAEA,4CACA,kBAEA,gBACA,kBACA,iDAEA,gBACA,aAEA,IACA,EAEA,kBACA,UACA,QACA,gCACG,oBACH,oBAGA,MAEA,gBACA,kBACA,WAGA,oCACA,qBACA,4BACA,2BAEA,QACA,EAEA,gBACA,SAEA,mDACA,OAEA,cACA,gCACA,MAEA,cACA,OACA,mBACA,CAEA,2BAEA,iBAGA,GAEA,6BAEA,2BACA,SACA,kBAEA,iBACA,UACA,eAGA,EAQA,CACA,gBACA,QAEA,UACA,IAEA,OACA,WAEA,SACA,OACA,UACA,CACA,iBAGA,OAEA,MACA,WAEA,SACA,OACA,UACA,CACA,iBAGA,OACA,CACA,CC/6CA,CAoRA,gBACA,YACA,UAGA,sBAGA,oBAEA,QACA,qBAKA,wBACA,wBACA,kBAGA,kBACA,uBAOA,wCAJA,0BAKA,SAEA,CACA,QAEA,CACA,gBACA,IAEA,4BACA,SAEA,oBACA,0BAGA,0CAGA,aAGA,iBACA,WAEA,CACA,QCjXA,CACA,cACA,GAEA,cAEA,QACA,uBAEA,qBACA,UAAwC,sBACxC,UACA,CAkEA,CACA,cACA,GAEA,MAEA,cAEA,QACA,uBAEA,qBACA,UAAwC,sBACxC,UACA,CAiEA,CACA,cACA,GAEA,YAEA,sCACA,SAGA,OAEA,gBAEA,iBACA,kBAAwC,sBACxC,OACA,CAkDyB,CACzB,cACA,OACA,0BAGA,8BACA,oCAGA,KACA,IAKsB,CACtB,cACA,kBAEA,qBAEA,mBAGA,UAKA,cAGA,wCAGA,QAKA,qCAOA,2CAGA,aAKA,0BAGA,kDAGA,+CAGA,oBAEA,UAKA,6CAQA,yBACA,2BAIA,2BAEA,MACA,CAO6C,CAC7C,kBACA,oBACA,UAEA,SAEA,gBAOoB,CACpB,cACA,CACA,iCAAiB,OAGjB,sBACA,OAEA,6BACA,8BAEA,WACA,YAEA,MAAE,KACF,2DAEA,QACA,YACA,CAGA,OAEA,CAOA,cANA,qBAGA,QAEA,QASA,CACA,qBACA,0CAGA,+FADA,yBAGA,cAAiB,OACjB,QAQA,CACA,cACA,kBAEA,qBACA,mBAGA,UAIA,sBACA,yEAGA,SAIA,WACA,cAGA,uBAIA,sCAMA,WAEA,8DAIA,uCAA6D,OAG7D,iDAEA,QACA,CAKa,CACb,cACA,mCAIA,qDACA,MAQqB,CACrB,kBACA,IAGA,kCACA,wCACA,qCAEA,SAIA,MACA,QA8BA,CACA,aACA,gBAEA,mDAA6E,CAAa,UAC1F,MAAU,cAA0B,8CAEpC,eACA,eACA,aACA,CACA,CAMA,CACA,aACA,gBACA,sCACA,2CACA,wCAEA,0BAEA,wEACA,uCACA,GAEA,CACA,CCpiBA,CA6PA,cACA,SACA,YAEA,YACA,SAGA,cAEA,2CACA,6BAGA,yBAEA,QAEA,CACA,QCvPA,CAkhBA,gBACA,UACA,QAEA,IAMmB,CACnB,cACA,YACA,qCACA,SAAkB,iBAClB,aACA,yBAEA,2BACA,SAEA,gCAEA,YAEA,kBACA,SAAQ,SAER,UACA,sBAEA,aACA,aAAU,SAEV,OACA,CCrmBA,CCgTA,cAEA,OACA,oBAGA,YACA,SAIA,WACA,YACA,KACA,mBAGA,UACA,gCAKA,oBCrTA,CACA,gBACA,GAGA,6CACA,OAGA,OACA,gBAIA,eAGA,2BACA,QAEA,mBACA,gBASA,CACA,cACA,OAMA,YAIA,uIAGA,YACA,YAGA,iEAIA,OAGA,oBADA,QAWA,CACA,gBACA,OAMA,YAIA,2HAIA,wEAEA,QACA,OAUA,CACA,kBAEA,MACA,YAGA,iCAIA,6BAEA,WACA,WAMA,sBAJA,iCAKA,MAGA,uBACA,MAUA,CACA,cACA,SAEA,eACA,WAIA,eAAiB,MAAkB,OACnC,OACA,oCACG,eACH,+CACG,6CACH,gCACA,QAEG,YACH,2BAMA,gBAAiB,MAAuB,WACxC,SACA,WAEA,qCAEA,gDACA,kBAEA,IAEA,CACA,QAYA,CACA,gBACA,sBACA,OAGA,yDAEA,gCAGA,uCAGA,oBACA,IACA,CASA,CACA,cACA,WACA,aAEA,YACA,oBACA,gBAEA,0BAEA,uCACA,6CAEA,kCACA,MACA,CAUA,CACA,gBACA,WACA,oBAEA,iCACA,4BACA,IAGA,WACA,MAEA,iBACA,ICvPA,CC2jBA,cACA,UACA,QAGA,CACA,gBACA,WAAiB,MAAuB,OACxC,yBAGA,EACA,QAEA,CACA,gBACA,OACA,8EAIA,CACA,cACA,OACA,cACE,KACF,cAEA,2BAEA,MAEA,GAMA,CACA,kBAUA,SAGA,aAAiB,MAAmB,WAEpC,qBAEA,YAGA,oBAAsB,MAAmB,OAMzC,iFAGA,iEACA,cAEA,CACA,SAEA,kBAEA,IAEA,GAEE,iCAMF,kDACA,QACA,2BAEA,SAGA,GAGA,SADA,YChrBA,CCMA,sBACA,QACA,MAEA,eACA,YAEA,WACA,OACA,UACA,KAEA,WAEA,SAEK,QACL,SAEA,UACA,CACA,QAEA,CCpBA,oBACA,SACA,OACA,MAEA,MACA,cAEA,SACA,eACA,OACA,aACA,cACA,QAEA,QAEA,QACA,aACA,GACA,aACA,KACA,SAEA,aACA,IAIA,OACA,OACA,WAEA,kBACA,qBAGA,YAEA,QACA,uBAdA,QAEK,QAaL,CACA,QClDA,CCwCA,gBACA,6BACA,8BAEA,+BACA,OACA,gCACA,OAEA,WACA,gBAEA,qBACA,QAEA,iBADA,UAEA,EAEA,sBADA,YAGA,CCtDA,gBACA,IACA,MAEA,eACA,4CACA,uBAGA,wBACA,sBACA,UAEA,CCpBA,gBACA,YACA,UCOA,CC8SA,gBACA,UACA,yBACA,yBAIA,IACA,QAEA,CACA,cACA,iBACA,sBACE,OACF,EAGA,CACA,gBACA,oBACA,+BAEA,oBAEA,iBAAiB,EAAa,IAC9B,0BAGA,QACA,OAIA,CACA,kBACA,CACA,UACA,UACA,QACA,OAiCA,CACA,kBAEA,yBAEA,+CAEA,4BAEA,kCAEA,WAEA,OAEA,eAEA,eACA,CAWA,CACA,gBACA,yBACA,oBAEA,+CACA,iBAeA,CACA,gBACA,oBACA,0BAIA,2BACA,gBAGA,CACA,kBACA,eAEA,+BAGA,8BACA,oCAGA,mCACA,kBACA,+BACA,yBAEA,CAEA,KACA,KAKA,CACA,KAEA,KAEA,sBACA,QAGA,CACA,gBACA,WACA,mBAEA,uCAEA,mCAIA,6BACA,MASA,CACA,kBACA,UACA,sBACA,wBAEA,sCAEA,qBAEA,mBACA,+BAEA,QAOA,CACA,gBACA,OACA,KACA,KAEA,EACA,UACA,QAGA,iBACA,UAIA,gBAEA,OACA,gBAEA,OAIA,SACA,kBAIA,QACA,SACA,QAKA,iBACA,uBACA,qBAEA,oBAGA,QACA,UACA,QAKA,kCAEA,MACA,gCACA,8BAGA,MACA,UAIA,mBACA,gBAEA,OAGA,wBAEA,IACA,IAKA,cAAqC,MAA6C,WAOlF,mBANA,UAOA,SAIA,UAGA,OAEA,8BAMA,cACA,UAGA,sBACA,IAEA,UAEA,eACA,UAGA,sBAEA,KChnBA,CCqGA,gBACA,WACA,uBAEA,YACA,0DAGA,MACA,0DAGA,IACA,IAmbA,gBACA,aAuCA,SACA,kBACA,2BAGA,4CACA,KACA,eACA,SA9CA,WAGA,wCAIA,OAEA,iBAEA,qBAAiB,MAAkB,WACnC,WACA,8BAIA,KAGA,YACA,OAGA,IACA,IAGA,UACA,UAIA,CAIA,MAFA,MAcA,CACA,aACA,SAGA,OAGA,6BADA,KC7lBA,CC8pCA,oBACA,aA2CA,CACA,iCAGA,oBACA,wCACA,OAEA,oBACA,kBACA,iBACA,SArDA,WACA,UAGA,iBAIA,MAGA,EAGA,EAEA,WACA,iBAIA,mBAEA,OACA,MAGA,IAGA,SACA,aAKA,2BACA,MAGA,GAqByC,CACzC,oBACA,WACA,UACA,aACA,sBAEA,UACA,WAEA,oBACA,kBAEA,cAEA,8BAEA,OACA,iBAAG,KACH,QAIA,oEAIA,iCAGA,kDAEA,OACA,iBAEA,GACA,kBACA,iBACA,CAQ2C,CAC3C,oBACA,WACA,UACA,WAEA,kCAEA,iBACA,cACA,kBACA,iBAS2C,CAC3C,oBACA,IAEA,sBACA,WACA,+BAEA,qBACA,QACA,QAGA,cACA,kBACA,iBAQA,CACA,gBAEA,SAKA,4BAKA,gBCp0CA,CA22BA,cACA,SAEA,YACA,gBACA,kBAAmB,WAAuB,OAC1C,WACA,MACA,6BAIA,+BACA,QACA,0BAKA,mBACA,QA8CA,CACA,gBACA,SAEA,SACA,IAGA,WAEA,UACA,kDAEA,UAIA,UACA,wDAGA,kBACG,SACH,wDAGA,SAEA,YAEA,gDAGA,kBAEA,aAMA,SAKA,MAJA,sCAGA,MAGA,CACA,cACA,qBACA,kDAEA,8CACA,ECz+BA,CCIA,cACA,+FACA,OAUA,CACA,cACA,2CACA,OAUA,CACA,cACA,2CACA,OAQA,CACA,gBACA,gCACA,UAQA,CACA,gBACA,aACA,UC/CwD,CA2XxD,cACA,WAEA,cACA,WACA,kBAEA,6BACA,OAEA,CACA,QC7XA,CC4GA,aAEA,2CAEA,kBACA,4BACA,MACA,wBACA,WAEA,MAIA,6BACA,eAEA,OACA,EAAG,UAEH,OASA,CACA,cAEA,IACA,GAEA,EACA,oEAEA,qEACA,aAGA,6CACA,UAEA,YACA,UACA,iBACA,oEACA,WAEA,UACA,WACA,aACA,sBAEA,qDACA,8BACA,sDAGA,oCACA,6BACI,WACJ,SAKA,0CAEA,uCACA,8BAIA,sBACA,+BAEA,kBACA,iBAEA,eACA,WAEA,EC/LA,kBACA,eACA,GACA,eAGA,sCAEA,WAEA,UACA,sBAEA,cAGA,oBAGA,CACA,WAGA,sBAIA,sBACA,kBAEA,kBAWA,iBAEA,qFACA,EAMA,CCnCA,kBAAqE,GACrE,MACA,YAGA,iBAEA,qBAGA,gCACA,QAKA,WAHA,qBAIA,oBACA,gCAGA,0BACA,QAWA,YACA,gBAQA,gDAGA,kBACA,kBAEA,kBAKA,SACA,SAGA,YACA,QACA,EAGA,CACA,kBACA,WACA,WAIA,UAOA,kBAOA,uBAQA,kBACA,oBAEA,kBAKA,cAMA,cAOA,2BACA,WAEA,YAEA,kBACA,SAGA,CACA,WAEA,gBACA,wBACA,0BAEA,mBACA,KAOA,CACA,kBACA,SAEA,6BACA,+CACA,MAIA,SACA,SAEA,kBACA,yBAEA,eAEA,YACA,iCAEA,aAEA,GAEA,gBACA,wBAEA,+BACA,qBACA,cAKA,CACA,gBACA,WAEA,yBACA,yBAGA,mBAEA,6CAIA,uBACA,YC3NA,CAuCA,kBAAuE,GACvE,WACA,SACA,wCAEA,gBAEA,eACA,YACA,QACA,0CAGA,eAAe,+BAEf,eAEA,eACA,MACA,KAGA,sBAEA,OACA,KAUA,YATA,8BACA,GACA,oBAEA,KAGA,YAGA,CAIyD,CACzD,gBAGA,IACA,qBACA,8BAGA,gCAIA,gEAEA,wBACA,oDAIA,gDACA,kBAEA,YAEA,KAEA,uBAEA,MAMA,0BAJA,8CAKA,kBAEA,YACA,CAMkB,CAClB,gBACA,oBAEA,cACA,WACA,mCAEA,qCACA,WAEA,6BAEA,WAEA,UACA,QAMmB,CACnB,gBACA,kBAEA,SACA,mCAEA,yCACA,GAKA,iDAEA,gBAEA,yCAGA,MAEA,gBAEA,oBAEA,SAEA,uBACA,WAGA,UACA,SAEA,gBACA,WACA,6BAGA,YAEA,YAEA,WAMmB,CACnB,kBAEA,iBAEA,wBACA,UAMmB,CACnB,kBACA,2BACA,EChMA,CACA,gBACA,sBACA,WACA,6BAEA,yBACA,YAGA,yBACA,+BACA,SAeA,oBAEA,yBAIA,YACA,6CACA,+BAIA,gCAGA,iCAAkD,CAClD,kBACA,mCAEA,8BAmBA,sBAEA,6DAEA,6BACA,oCAEA,QACA,QACA,OAEA,CACA,QACA,EAGA,CACA,gBACA,SAEA,yBAA8B,WAG9B,0BAKA,yBAEA,MACA,gDACA,iDAEA,MACA,QACA,gBACA,gBAEA,UACA,SAIA,kBACA,QAEA,0BACA,YAEA,gBAEA,SACA,SACA,CACA,ECtHA,CCjBA,gBACA,aACA,yBAGA,WACA,WCPA,CCIA,cACA,UAMA,4BAGA,0FAGA,2DACA,IACA,aACA,aAIA,qBACA,cAEA,oBACA,CACA,MACA,QAIA,sBAIA,+BACA,uBAGA,kBAEA,SACA,EACA,CC9CA,CC2HA,cACA,cACA,aCjHA,CCFA,YACA,CACA,SACA,yBACA,qBACA,UACA,cACC,aAGD,SAGA,gCACA,8BAEA,eAGA,MAEA,QAEA,IAGA,iCACA,gBACA,cAGA,WAGA,IAEA,IACA,EClCA,CACA,cACA,cACA,WACA,CAKA,yBAMA,OAEA,OAPA,OAIA,GCzBA,CCqMA,cACA,qBACA,mBC5LA,CCk8BA,cAYA,gBACA,YAGA,aACA,cACE,YAKF,iBAQY,CACZ,gBACA,cAEA,KACA,kBAMA,cAOgG,CAChG,gBAAiD,CAAO,QACxD,OAMA,yBACA,kBAEA,eAGA,IACA,QAEA,WAEA,MAOa,CACb,cACA,OACA,OACA,GACA,aAEA,UACA,eACA,EAEA,EASa,CACb,kBACA,OACA,OACA,GACA,qBAEA,UACA,GACA,sBAEA,EAQa,CACb,gBACA,OACA,OACA,GACA,UAEA,UACA,YACA,IAEA,EAKa,CACb,cACA,mBAYA,uCACA,OAEA,QAEA,GACA,QAWmD,CACnD,cACA,IACA,qBACE,QACF,MAGA,QACA,2BAGA,aAGA,YACA,GACA,iBAGA,oBAEA,QACA,iBACA,mBAEA,gCACA,uBACA,QAEA,eAMA,aACA,UAEA,CACA,QAsBkB,CAClB,cACA,UACA,aACA,kCAGA,QAEA,OAmBoB,CACpB,cACA,UACA,QAGA,QACA,QAWmD,CACnD,cACA,OACA,MAEA,IAgBiD,CACjD,cACA,iBACA,kBAEA,MAiBkB,CAClB,gBACA,eACA,cAEA,MAOa,CACb,gBACA,OAEE,SAGF,QAAY,IAAU,KAEtB,EAea,CACb,gBACA,UACA,QACA,kBAEA,WAGA,IAMiD,CACjD,gBACA,MACA,gBACA,0BAGA,sBAGA,eACA,oBACA,kCAGA,0BAGA,mBACA,uBAGA,oCACA,kCAMA,YACA,QAIA,6GAEA,mBACA,uBAEA,OACA,CAMa,CACb,cACA,WACA,KAKa,CACb,cACA,OACA,gBAKa,CACb,cACA,OACA,gBAKa,CACb,cACA,OACA,gBAKA,CACA,aACA,OACA,UACA,YACA,cAEA,GAMkB,CAClB,cACA,mBACA,UA8UA,CCtuDA,cASA,YACA,ICqQA,cACA,mBACA,sDClRA,CCgBA,cACA,+BACA,cACA,WAEA,gBACA,GCpBA,cACA,oBACA,uBAGA,QACA,SCuBA,CCiBA,cAEA,qCACA,iCAEA,YAIA,SACA,cACA,4BACA,YC/CA,CAqCA,gBACA,kBACA,kBACA,YACA,WAGA,mCACA,6BAGA,2BACA,kBACA,yCACA,eAIA,+BAEA,uCAEA,eCzEA,CACA,cACA,CAuBA,SArBA,eACA,qBAGA,wBACA,yBAEA,mBACA,wBAEA,0BAEA,YAEA,2BAAe,OAMf,SCxBA,CACA,cACA,OACA,qEAGA,OACA,YAKA,MCfA,CASA,cACA,OAEA,yBAEA,iBACE,yCAEF,wBACE,WAGF,OAEA,oCACA,SAGA,yCACA,0DACA,SAEA,QAIA,QACA,KACA,GACA,CAEA,CACA,QCsDA,CCpEA,oBACA,WACA,gBACA,0BACA,eAGA,0BAKA,WAOA,eANA,QAGA,kBAIA,cACE,WACF,oCACA,2BAEmC,CAOnC,sBAPA,cAaA,wBAGA,GACA,EAEA,kBACA,WACA,oCAEA,mBAIA,4BACE,WAIF,8BAEA,YAGA,6CACA,ECpFA,CCeA,gBACA,aA4CA,OACA,UAEA,KAEA,cACA,aACA,OACA,SAnDA,SACA,EAEA,EAsCA,sBArCA,CACA,YAEA,IACG,KACH,eACA,wBAEA,OAEA,MACA,MACA,SACA,gBAIA,QAEA,OACA,YAEA,WAEA,MACA,MACA,SACA,gBAIA,GAEA,GAEA,KC7CA,CCqUA,cAEA,WAIA,uBACA,QAGA,CACA,gBACA,yBACA,2BAEA,KAEA,KAKA,CACA,cAEA,IAKA,yEACA,yBAGA,kBAIA,uBAGA,mBAKA,0BAQa,CACb,cACA,SACA,aACA,aACA,6BAAmD,CASnD,0CAA2B,gBAC3B,0DACA,sBAUa,CACb,cACA,IACA,YAIA,kBACA,iCACA,MAIA,SACA,QAKa,CACb,cACA,0BACA,QAMa,CACb,cAEA,OAEA,OAGA,eAAiB,MAAuB,WACxC,SAEA,KACA,eACA,aAEA,IAGA,OAEA,IAEA,SAA6B,KAAmB,KAEhD,IACA,gBAIA,IACA,gBAIA,UAAS,0BACT,gBC3dA,CCyJA,gBACA,YAKA,kDAGA,aAAiB,MAAwB,WACzC,aACA,KAEA,wBAEA,iBACA,eACA,GAEA,IAEA,CACA,QAEA,CACA,gBACA,UACA,yBAGA,qBAAmB,MAAmB,WAEtC,IAEA,YACA,UACA,gBACA,6BACA,iBAGA,cAEA,UACA,WACA,aACA,kBACA,wBACA,iBACA,iBASA,8BAGA,mBAEA,EAIA,CACA,QC9NA,CCEA,aACA,OAEA,OAMA,YALA,eACA,OAGA,WAQA,CACA,cACA,KACA,4CAEA,sBACA,iBACA,sCAEA,kBACA,kCAEA,GAEA,OACA,KAOA,CACA,gBACA,iEACA,SAMa,CACb,cACA,OACA,cAEA,6BAEA,6BAAiB,MAAuB,WACxC,2BACA,8BACA,eAEA,CACA,QChEA,CC+KA,cACA,2DACA,GAOyB,CACzB,gBACA,OACA,gCACA,gEACA,IC7LA,CCHA,cACA,WAEA,gBACA,KAGA,OACA,KCHA,CAoKA,cACA,4CACA,IASa,CACb,cACA,OAEA,EADA,UAGA,oBACA,SACA,WAGA,YAGA,sBACA,oCACA,mBAGA,MACA,GAEA,CACA,QAEA,CACA,gBAEA,+BACA,sCAEA,uBACA,KCjNA,CCsMA,oBACA,IACA,qBACA,uBAEA,OAEA,aAAuB,MAA4B,YACnD,mBACA,eAEA,kBAAmB,MAAkB,OACrC,WAGA,wBACA,eAEA,mBAAgC,CAChC,QAAE,SACF,iBACA,2CACA,CAQA,CACA,cACA,IACA,mBAGA,mBACA,wBACA,OCnPA,CCeA,aACA,kBAMA,iCAAuD,iBAKvD,uEAGA,yDAAqG,CAKrG,qCAGA,+BAQA,gDAGA,4BAGA,2BACA,cACA,YArCA,MACA,mBAEA,CAwCA,CACA,aACA,kBAKA,kCAIA,iBACA,kCACA,mBAEA,iCACA,WAEA,oBACA,yBACA,8BAEA,aACA,yBAGA,WAAG,KACH,WAEA,oBACA,iCAEA,+BAEA,aACA,gCAGA,SACA,EACA,YArCA,MACA,2BAEA,EAoCA,cACA,kBAKA,kCAIA,iBACA,kCACA,mBAEA,GACA,+CAIA,gDAFA,qBAGA,YAlBA,MAA8B,cAC9B,WAEA,CChGA,CAkHA,gBACA,0DACA,QAMa,CACb,gBACA,iBACA,SACE,8BAKF,8BACA,QAMa,CACb,cACA,uCACA,MC1JA,CAyBA,cACA,WACA,qBAgBA,CACA,kBAAuD,GACvD,cAoBA,2BACA,GACA,CAHA,wCAlBA,aACA,iBACA,6BAEA,qBACA,cAGA,SAGA,+BACA,uCAGA,cAgBA,CACA,oBACA,SAEA,gCACA,GACA,qCAGA,UACA,qCAEA,OAEA,iDACA,6DACA,cAUA,CACA,kBACA,GACA,yBAOA,CACA,cACA,WAGA,oDAIA,MADA,EAaA,CACA,gBACA,CAmBA,yCAhBA,uFAGA,4CACA,4CACA,SAEA,oCAEA,cAEA,sDAEA,uCAEA,IAKa,CACb,aACA,OACA,KC/JA,CAYA,kBACA,UAEA,kCAAwC,CAExC,gBACA,oBACA,oBAEA,gBAAsB,IAAa,KACnC,IACA,GAOA,CACA,cACA,kCACA,KAOA,CACA,cACA,WAEA,iCACA,MAQA,CACA,cACA,yBACA,eC1CA,CAqEA,cACA,8BACA,2CAA4D,OAC5D,UAEA,mBADA,gBCjFA,CCsVA,cACA,cACA,kBACA,iBACA,eACA,SAKa,CACb,cACA,OACA,UAKa,CACb,cACA,SACA,uBACA,iBAGA,aACA,MAEA,CACA,QCrXA,CCUA,YAA8C,kCAAgD,mBAC9F,oCAAkD,CAAS,YAC3D,IAIA,cACA,aACA,YAIA,OACA,IACA,ECtBA,CC0BA,YAAwC,CAAO,QAC/C,sCACA,GACA,wBACA,SAAE,EAAG,CACL,gBChCA,cACA,0CACA,IACA,iDAGA,aACA,aAEA,OACA,KCmDA,CACA,YAAqC,0CAAqD,iBAG1F,CACA,UAKA,KACA,UAGA,kBACA,iBACA,YAEA,aACA,GAGA,SACA,cACE,YACF,sBACA,4BAEA,QACA,MAGA,oBACA,OAEA,IAAM,QAAY,OAElB,WACA,YACA,aAMA,WACA,UAOA,SACA,gBAOA,eACA,UACA,GAEA,OAAS,cACT,OAQmB,CACnB,kBACA,MAAQ,cAAkB,QAE1B,0BACA,YAYmB,CACnB,sBACA,OACA,IACA,EACA,EAGA,YAEA,6BACA,aA+CA,CACA,IACA,IACA,IACA,GAIA,YAtDA,aACA,GAEA,EACA,UAEA,WAKA,yBAEA,uBAEA,CACA,UAKA,sCAIA,2BACA,GACA,KAIA,IACA,MACA,KAKA,SACA,KACI,UACJ,KAIA,IAUA,KAEA,WACA,IAOoB,CACpB,YAAsC,QAAY,OAClD,MAAQ,WAAmB,cAE3B,aACA,MACA,QAEA,IAkDA,CC4DA,cACA,OAIA,SACA,QAGA,wBACA,wBAGA,KACA,IAiBA,CAiUA,gBACA,0BACA,mBAOa,CACb,cACA,oBACA,mBC3rBA,CCVA,cACA,uBAEA,8DACA,SAEA,QACA,iBACA,CASA,CACA,cACA,mBACA,UAEA,uBACA,sDACA,gCACA,GACA,kBACA,sBACA,sBACA,kBACA,sBAGA,qBC5BA,CCPA,cACA,SAEA,8CACA,KAgBA,CACA,cACA,WAEA,qBACA,eAGA,oDAEA,WAGA,MACA,kBAGA,uBAGA,8BAKA,mBACA,eAEA,UACA,KC/CA,CCiGA,gBACA,YACA,yBAEA,cAK4C,CAC5C,gBACA,eACA,cAK4C,CAC5C,kBACA,YACA,2CAGA,4CACA,oCAGA,6CAEA,kBACA,2BAEA,UAK4C,CAC5C,gBACA,YACA,8CAGA,4CACA,uCAEA,yBAQwC,CACxC,oBACA,SACA,6BAGA,iDACA,eACA,sBACA,MACA,EACA,EAK4C,CAC5C,gBACA,SAGA,qBAEA,YAMa,CACb,cACA,iCAAqD,OACrD,oBAGA,SADA,4BAQa,CACb,cACA,kBACA,mBACA,sBAGA,QCxMA,CCyKA,cACA,mDACA,2BCrKA,CC6CA,gBACA,+CACA,WCnDA,CAqKA,kBACA,gCAEA,6BACA,+BACA,aAEA,kBACA,SAGA,iCAKA,oCAKA,eC/LA,CA6EA,kBACA,qCACA,WCpFA,CCwEA,mBACA,SAEA,WACA,YAEA,cAWA,2BATA,MACA,oCAEA,wCAGA,UAEA,OAsEA,CACA,gBACA,WACA,oBAEA,uCACA,SAGA,UAGA,iCADA,OAGA,wBAEA,mCACA,KAIwD,CACxD,cACA,CACA,MACA,MACA,KAIwD,CACxD,cACA,mBACA,IACA,CACA,0BACA,oBACA,GACA,SACA,qBAEA,UACA,EAIwD,CACxD,cAEA,oBACA,GACA,SACA,EAIwD,CACxD,cAEA,qCACA,GACA,qBACA,QAEA,IAGA,qCACA,GACA,qBACA,YAEA,IACA,ECxOA,CACA,cACA,WACA,IACA,aACA,mBACA,mBACA,mBAEA,sDACA,aACA,OAKA,eAHA,wBAAqC,KAAW,CAEhD,YAEA,E,CCHA,oBACA,WAGA,YACA,qBAGA,+BAIA,0BACA,CACA,kBAIA,oBACA,QAyB4C,CAC5C,gBACA,YACA,UAEA,eACA,UACA,YAIA,MACA,QAOkB,CAClB,kBACA,WACA,aACA,mBAGA,SACA,GAIA,wBACA,yCACA,wBAGA,gBACA,cACA,WAGA,qBACA,IAUA,kBATA,kCACA,oBAGA,6DAQA,uBACA,yBACA,+BACA,oBAOA,kBACA,uBACA,+BACA,oBAGA,iBACA,kCACA,oBAKA,QCrIA,CASA,gBACA,YACA,iCACA,uBACA,2BAEA,UACA,OACA,CAiBA,CACA,cACA,kBACA,kCACA,kBAIA,eACA,KASA,CACA,cACA,WAGA,mEACA,SAAU,CAGV,SACA,ICpDA,CAuJA,mBACA,gBACA,WAEA,WAGA,6BACA,iCACA,UAEA,oDACA,cACA,YAEA,SACA,uBAEA,sBACA,SACA,CACA,CAOkB,CAClB,oBACA,uBACA,gBACA,qBACA,iBAKa,CACb,cACA,wBAAyC,CACzC,+BACA,uCAGA,yBACA,IAMqB,CACrB,gBACA,kCACA,2BAIA,kBAMqB,CACrB,gBACA,oBACA,6BAIA,kB,CCpOA,cACA,gBACA,kCAKA,oBACA,4BAEA,gDACA,UAGA,0BAIA,6BAEA,aACA,CAOA,CACA,cAEA,0BAEA,0BACA,MAIA,sBACA,2BAGA,yCAKA,uBAEA,+BAA8D,WAE9D,kDAGA,QACA,CAMY,CACZ,gBACA,UACA,aACA,SAGA,SCUA,iBACA,OACA,GACA,+BACA,MAMa,CACb,cAEA,uBACA,MAGA,KAEA,sBAA4B,GAI5B,WACA,KACA,qEAAK,CAIL,WACA,CAGA,QAIA,oBACA,cACA,sBAEA,eACA,UACA,yBAIA,MACA,GAIA,CAKA,oCAJA,oBAGA,QCpIA,CC+DA,gBACA,UAGA,YACA,qBAGA,QACA,QCtEA,CCFA,gBACA,0BACA,WAQmD,CACnD,kBAGA,qCAEA,aAEA,4BACA,gBACA,4BAGA,8CACA,UC1BA,CCDA,cACA,sCACA,qBAOA,CACA,gBAEA,sCAA0D,CAAO,QAAG,UACpE,IAGA,SADA,4BCqDA,CACA,oBACA,SACA,2BAaA,iDAEA,OACA,YAKA,kCACA,QAGA,6BACA,2BAGA,iBACA,GAGA,iBACA,sBAGA,SAEA,6BAMA,iCAEA,MAAE,EAAG,yBACL,GAQA,CAmZA,gBACA,iBACA,OAGkB,CAClB,gBACA,MAAQ,cACR,wBACA,yBAEA,qDACA,gBAGkB,CAClB,gBACA,MAAQ,cACR,wBACA,yBAEA,qDACA,gBAGkB,CAClB,gBACA,MAAQ,cACR,wBACA,yBAEA,sBAIA,4BACA,sBAGkB,CAClB,gBACA,2BACA,MClIA,cACA,mCACA,MCzbA,CCmPA,kBAEA,2BAEA,WACA,4CAcA,gCAIA,8CACA,+BACA,6BAIA,0BAEA,4BAGA,mCAGA,cAOa,CACb,gBACA,8CACA,WCtSA,CCDA,cACA,kCACA,MAGA,SADA,oBAKyB,CACzB,aACA,sDAEA,sDACA,ICDA,CACA,kBACA,WAEA,4BACA,yBACA,iCAKA,sCACA,2BACA,mCAEA,8BACA,OAEA,QACA,UASA,CACA,kBACA,qFACA,WACA,cAIA,2BACA,qCAGA,0BACA,WACA,qBACA,gBAGA,eACA,sBAIA,8BAEA,6DAGA,yCACA,oBAGA,uBACA,MAYA,CACA,kBACA,iCACA,kBAGA,wCACA,UAIA,2BACA,qCAIA,wBACA,oDACA,SAGA,qBACA,oBAGA,yCACA,qCAEA,SASA,CACA,kBACA,gCAIA,sDACA,UAIA,2BACA,qCAGA,0BACA,WACA,qBACA,cAEA,eACA,sBAIA,sDAGA,gBAGA,gCACA,qCAEA,UAyBA,CACA,kBACA,4BACA,uCAEA,iBACA,SAgDA,8BACA,2BAEA,kBAMA,4BACA,4BAGA,wBACA,kBACA,eACA,OAEA,oBAIA,sBACA,WAAmB,MAAkB,WACrC,WACA,wBACA,aAGA,QACA,kBAIA,kBACA,aAEA,QACA,CAGA,qBACA,UACA,CACA,CAuBA,CACA,kBACA,mCACA,cACA,eAKA,eACA,WAaA,CACA,kBACA,oCAAwD,CAAa,UACrE,WACA,4BAGA,wBAGA,+BACA,4BAGA,6EACA,0BAGA,cAGA,4CAIA,gBACA,GAGA,oBAGA,mBAKA,yCAEA,4BACA,kCAIA,0CAIA,UAGA,+BAGA,+BAEA,2BAGA,2BAEA,GACA,CAWA,CACA,kBACA,iCAAqD,CAAa,UAElE,+BAEA,wBACA,aACA,SAGA,SACA,CASA,CACA,kBACA,iCAAqD,CAAa,UAClE,IACA,0BAGA,8BAEA,kBACA,MAEA,cACA,6BACA,SAGA,eAGA,2CAIA,+DACA,uCAEI,wBAEJ,SAGA,MAEA,IACA,CAUA,CACA,gBACA,OAIA,mCAEA,kCACA,kBACA,+DACA,gBACA,6BAGA,cACA,mDACA,kBAEA,iBACA,KAAI,yCACJ,kBAEA,aACA,KAEA,CACA,EAUA,CACA,gBACA,WACA,iBACA,WAEA,qCAEA,eAGA,4BAEA,8BACA,eAAG,KAKH,4BACA,iCAGA,+CACA,eAEA,GACA,MAAE,wFAGF,WAIA,wBACA,MAEA,qCACA,aAEA,sBAGA,mDAEA,kBACA,MACA,CAyBA,CACA,gBACA,cA8CA,WAEA,oCACA,WAEA,kBACA,eAEA,QAAG,KACH,IAEA,UACA,OAGA,oDACA,oBAEA,kBACA,OAIA,eACA,aACA,CAEA,cACA,WACA,IAEA,0BACA,wBAEA,iBACA,IAEA,GACA,YACA,IAEA,MACA,MAGA,OAGA,oBAEA,cACA,IACA,QACA,gCAGA,MACA,WACA,CAEA,cACA,WACA,KAEA,0BACA,wBAEA,+BACA,4BAGA,IACA,aACA,SAEA,oBACA,4BAEA,YAEA,KACA,0BAIA,QACA,QACA,WACA,CACA,2BAtIA,kBAEA,QAEA,eACA,6BACA,uBACG,uDACH,oBAEA,oBAEA,yBACA,8BAEA,YAGA,qBACA,4BAEA,UAEA,KAEA,mCAEA,QACA,IAAG,uBACH,uBACG,+BACH,mCACG,4BACH,kCAIA,wBACA,SACA,KAGA,KAEA,QAkHA,CACA,oBAMA,2CAEA,4BAEA,WACA,yBAEA,oBACA,gBACG,qCACH,kBAIA,cAIA,wBAGA,aAEA,iBACA,qDAEA,iBAGA,WACA,CACA,CAIA,CACA,gBACA,WACA,WACA,iDACA,OAEA,mCACA,MAKA,mBAHA,iBAEA,mBAQA,CACA,gBACA,aACA,iBAEA,2DACA,qDAEA,kCACA,wBAEA,yBACA,IAGA,aACA,eAEA,OACA,KAGA,CACA,kBACA,sDACA,0BAGA,gBACA,IAKA,CACA,kBACA,WACA,WACA,WAGA,iCAKA,8BAAiD,eACjD,uBAEA,yEAGA,WACA,uCACA,eAEA,WAGA,kDAIA,4BAIA,sBAGA,QAGA,kCACA,WAEA,0BACA,YACA,qBAGA,MAGA,+BACA,2BACA,4CACA,gBAEA,uBACA,2BACA,qBAEA,iBACA,UAEA,CAAE,KACF,WAEA,2CACA,OAEA,oCACA,WAEA,gEACA,UAEA,QAEA,MAGA,yBACA,2DAEA,QACA,CAGA,UACA,oBACA,kBAGA,CACA,sBAKA,cACA,CACA,cACA,iBAGA,eACA,WAGA,oCAEA,QAEA,MAiBA,GACE,iBAkBF,4BACA,YACA,cAAE,KAmBF,uBACA,WACA,iBAEA,GAIA,0BACA,iCACA,oCAEA,aACA,oBAGA,mBAMA,CACA,cACA,iDACA,aC3+BA,CA0IA,cACA,OAEA,mBACA,+BACA,8BACA,iBAKA,MACA,uBxK+7BA,0ByKxlCA,oECjCA,WACA,cAQA,eCHA,GDIA,WACA,WACA,UAEA,EESA,GDhBA,WAGA,IACA,kBACA,iCACA,QACA,GAAK,UAEL,CACA,QAEA,EEdA,GDmBA,WACA,YACA,kBAEA,YCjBA,gCAGA,eAGA,0BAOA,cA8BA,SCzCA,GD0CA,WACA,KACA,mBAjDA,mBAkDA,MAEA,eACA,SACA,SAEA,2CACA,kBACA,yCACA,WAEA,ECvDA,QAOA,iBAOA,cAIA,WAKA,0CAEA,UAuCA,SACA,wBACA,YAaA,YAGA,wBACA,eAcA,OACA,iCACA,UAYA,yBAEA,IACA,MAMA,iBAJA,0CAOA,SAGA,eAEA,WACA,aAIA,MAIA,WAEA,WACA,aAGA,MAGA,eAMA,mCAIA,2BACA,QAUA,oBAEA,iBAGA,SAGA,uBACA,cACA,GACA,KACA,KAGA,GACA,IAGA,UACA,WAUA,0BACA,6BACA,uBACA,OACA,EACA,ElN5MA,KACA,IAWA,uFACA,sBAaA,iBACA,GAGA,qBAGA,cAKA,mBAOA,qBACA,MAQA,0BACA,OACA,gBAQA,KmN9DA,IlNIA,UACA,oBACA,GACA,SACA,CAEA,EkNTA,QAKA,iBAOA,MAQA,cAQA,iBASA,aAOA,cAkBA,IACA,EhN1DA,SAQA,OACA,OACA,mCAIA,MAEA,UACA,SACA,WACA,OACA,YAGA,QChCA,OAEA,gBACA,yBAQA,gBAIA,UAAkC,GAClC,eACA,WAKA,aACA,eAUA,uBARA,GAGA,oBACA,KAGA,IAMA,UACA,oBACA,SAKA,mBAAiD,GACjD,OAgBA,EACA,oBAGA,YAEA,SACA,MAGA,aAEA,QACA,eACA,CACA,oBAIA,UACA,iCAGA,MAGA,QACA,eACA,kBAEA,YACA,CACA,WAIA,6BAEA,IAEA,gBAAmB,MAAsB,OACzC,uBACA,YACA,KAEA,KACA,KAKA,MAEA,OACA,CAKA,sBACA,SACA,kBACA,mBACA,eAGA,6BAKA,OACA,KAGA,mBACA,UACA,OAGA,kBACA,YAEA,WACA,YACA,eAEA,yBACA,KAEA,KACA,CACA,mCAEA,eACA,SACA,CAKA,cACA,kCACA,YACA,aAGA,uBAGA,QAEA,YAOA,cAEA,kBAAmB,MAAsB,6BAIzC,cAEA,sBAEA,qBAIA,mBAIA,QAfA,KAkBA,sBACA,2BACA,+BAGA,QAIA,YAEA,QAEA,UACA,MAKA,gBACA,OACA,WACA,MACA,oCAGA,uBACA,2BAGA,WAIA,0CAFA,QAGA,CAEA,EAKA,qBACA,SAIA,gBACA,qBACG,gBACH,qBACG,cACH,2BAGA,YAEA,SACA,CACA,MAqJA,OgN5ZA,GCuBA,aACA,sBACA,KAEA,ECjCA,GFOA,aACA,aACA,OACA,gBACA,MAGA,gBACA,CAEA,WEdA,gBAUA,O/MSA,kBDlBA,UACA,eACA,E+MsBA,E9MLA,sB+MTA,WACA,YACA,WAEA,WACA,IAEA,wBACA,EAMA,MALA,QAEA,kBAEA,KCpBA,EhNiBA,gBgNhBA,WACA,YACA,WAEA,+BACA,ECNA,EjNkBA,gBiNjBA,WACA,QACA,qBCFA,ElNkBA,YAEA,IkNnBA,aACA,YACA,WAEA,cACA,YAEA,YAEA,KACA,IAEA,KChBA,MCLA,GCsBA,WACA,OACA,kCACA,cAEA,YDhBA,gBAmBA,SEhCA,GFiCA,WAIA,wBACA,aAnCA,qBAoCA,GAjCA,4BAmCA,wBEjCA,SCAA,GDCA,WACA,YACA,IACA,WACA,OAAK,UACL,IACA,UACA,EAAK,UACL,CACA,OACA,EAEA,KCVA,yBAGA,wCAGA,gCAGA,eAGA,yBACA,2BACA,kFAoBA,KCrCA,GDsCA,WACA,KACA,MAEA,sBACA,0BACA,MAEA,EEpDA,GDOA,aACA,OACA,WACA,eAEA,eCVA,UCGA,gBCCA,gBAUA,yBCbA,gBAUA,e3NSA,kByNhBA,UACA,2BACA,EGFA,E5NiBA,sB4NhBA,WACA,iCACA,WAEA,E5NaA,gB0NPA,WACA,YACA,eACA,OACA,WACA,KAnBA,oCAoBA,qBACA,WCxBA,E3NyBA,gB2NXA,WACA,YACA,oCACA,SEjBA,E7N0BA,YAEA,I6NhBA,aACA,YACA,yBACA,WAJA,8BAKA,IAEA,gBCjBA,cAEA,OCIA,MCDA,GCFA,WACA,OACA,sDACA,aACA,gBACA,QAEA,ECJA,GFAA,aACA,SACA,eACA,qCACA,UACA,GAEA,E/NQA,kB8NdA,UACA,eACA,MACA,eACA,eAEA,OEXA,EhOoBA,sBiOfA,WACA,mBACA,YCHA,ElOiBA,gBkOhBA,WACA,mBACA,MCHA,EnOkBA,gBmOjBA,WACA,mBACA,MCFA,EpOkBA,YAEA,IoOnBA,aACA,mBACA,SACA,IAEA,KCbA,MpOeA,kBgNVA,UACA,eACA,MqBHA,ErOYA,sBqOXA,WACA,sBACA,YCHA,EtOaA,gBsOZA,WACA,sBACA,MCHA,EvOcA,gBuObA,WACA,sBACA,MAEA,EvOUA,YAEA,IoOTA,aACA,YACA,4CACA,QAJA,+BAMA,aACA,SACA,IAEA,KIjBA,MvOLA,GuOMA,aACA,YACA,MAEA,OACA,gBAIA,aACA,QAEA,YvOfA,gBAWA,ewONA,KvORA,GuOSA,iBACA,OAEA,eACA,MAEA,cACA,OAEA,OACA,SACA,YAEA,KACA,SACA,CACA,QAEA,YvOxBA,gBASA,ewOdA,eASA,KCFA,GDGA,WACA,WACA,UAEA,EETA,GDGA,aACA,YACA,IAEA,SACA,YAEA,KACA,QAEA,EENA,GDNA,WACA,mBACA,uBACA,IACA,CAEA,QEZA,UC2BA,GDEA,WACA,OACA,kCACA,GAJA,gBAMA,EERA,GDEA,WACA,6BACA,KAEA,EE9BA,GDyBA,WACA,eACA,KAEA,YCvBA,gBAOA,qBAGA,eAmBA,qBCbA,GDcA,WAEA,yBACA,qCACA,SArCA,qBAuCA,WClBA,QCvBA,gBAUA,gBAmBA,SCpBA,GDqBA,WACA,OACA,sCACA,SA9BA,iBAgCA,EEtCA,GDaA,WACA,WACA,oBACA,uBACA,YAEA,QACA,IAEA,KCVA,mBCZA,GDaA,aACA,UACA,QAZA,oBAaA,4BACA,wBACA,GAEA,YCZA,UCyBA,GDxBA,WACA,YACA,sCAEA,oBACA,MAEA,EENA,GDwBA,WACA,OACA,cACA,aAEA,aACA,WAEA,OAEA,cACA,QACA,WALA,kBAMA,aACA,oBAGA,QACA,QAEA,EEhDA,GDKA,aACA,gBACA,QAEA,EETA,GDCA,aACA,CACA,cAEA,kCACA,QAEA,SADA,SAGA,EtPhBA,GuPOA,aACA,QACA,MAEA,iBACA,UACA,YAEA,KACA,QAEA,YvPVA,uCAUA,OACA,EAGA,MwPbA,MCHA,GDIA,aACA,aACA,QAEA,EEFA,GDLA,aACA,YACA,MACA,WAEA,OACA,cAEA,KACA,QAEA,EETA,GDIA,eACA,OACA,yBACA,KAEA,EEfA,GDOA,WACA,OACA,YAEA,aCTA,YCFA,iBAEA,WCFA,iBAEA,OCFA,iBAEA,W9PEA,SACA,kBAEA,sBACA,kBAEA,sBAGA,8BAOA,gBAGA,YACA,UACA,UACA,UACA,UAQA,qCAQA,gBACA,sBACA,sBACA,mBACA,4BACA,UACA,aA3CA,oBA4CA,uBAEA,aACA,KACA,kBACA,kBACA,kBACA,kBACA,kBAGA,WACA,QAGA,M+PpEA,gBAGA,gBAQA,eCTA,GDUA,WACA,SACA,WAGA,eAKA,2CAJA,qBACA,gBAEA,QAGA,UCpBA,WCGA,MCCA,GDAA,WACA,2BACA,YAEA,qBADA,YAGA,EERA,GDGA,aACA,wBACA,iDACA,WAEA,EEJA,GDHA,aAEA,CAEA,oBADA,KAGA,EERA,GDMA,iBACA,QACA,MAEA,WACA,WAEA,MACA,aAEA,UACA,QAEA,EEbA,GDLA,WACA,QACA,YAEA,MAIA,8BAHA,QACA,KACA,IAGA,EEhBA,GDYA,eACA,qBACA,2BACA,YAEA,KCTA,OCFA,GDGA,WACA,qCACA,SAEA,qBADA,WAGA,EEVA,GDEA,aACA,CAEA,SADA,QAGA,EEDA,GDLA,WACA,QACA,YAEA,MAIA,4BAHA,GACA,MACA,IAGA,EEdA,GDUA,eACA,qBACA,2BACA,YAEA,UCbA,OCFA,eACA,0BAQA,eCHA,GDIA,WACA,8BACA,EAEA,EERA,GDCA,aACA,wBACA,iDACA,OAEA,EEZA,GDwCA,iBACA,SAGA,uBA5BA,uBAgCA,UAzCA,wBACA,sBA2CA,QAlCA,oBAuCA,YAtCA,6BACA,6BACA,0BACA,2BACA,2BACA,2BACA,kCACA,4BAcA,uBAoBA,YAlDA,eAsDA,cArDA,uBAGA,kBAqDA,aAvDA,kBA0DA,UAzDA,eA4DA,cAzDA,kBA2DA,YAEA,YCnEA,OCFA,GDGA,WACA,oBACA,EAEA,KCNA,WACA,yCACA,MAEA,MADA,MAGA,O/QEA,MACA,wBAKA,uBACA,gCAGA,wBAoBA,UA5BA,kBA6BA,GAdA,2BACA,qBAcA,GA7BA,uBACA,iBA6BA,GAdA,4BACA,yBAcA,GAbA,yBACA,uBAaA,GAZA,0BAfA,gBA4BA,GA3BA,0BA4BA,GA1BA,sBACA,gBA0BA,GAzBA,sBACA,mBAyBA,GAfA,0BACA,8BAeA,GAdA,2BAGA,2BAYA,GApCA,yBAoDA,GAzCA,0BgRRA,M/QHA,G+QIA,WACA,OACA,YAEA,E9QZA,QAMA,cAOA,aACA,IAWA,YACA,IAEA,YACA,aAIA,UAMA,oDAGA,iFACA,QAQA,kBACA,cAEA,kDACA,IAQA,sBACA,cAEA,kDACA,IAQA,WACA,OAEA,YACA,YAGA,OACA,QASA,eAEA,aACA,iCAEA,SAEA,IAiBA,UACA,SACA,aAEA,OACA,oBACA,WAGA,OACA,QAWA,gBAA0B,gBAAyC,gBACnE,SACA,qCAGA,iCACA,kBAGA,OACA,QAYA,uBAAsC,GACtC,cACA,oBAEA,sBAEA,mBACA,MAGA,yBACA,EASA,YAEA,IACA,QAIA,0BACA,KAGA,sBACA,cAEA,YAGA,eAGA,eAIA,sBAEA,IASA,WAEA,OAKA,0BAKA,aACA,WAOA,UACA,kCACA,MAOA,iBACA,WAEA,oBACA,oBAEA,gBAOA,SACA,YAGA,MAGA,gBADA,QAsBA,MACA,OACA,SA+CA,E+QlVA,SACA,mBAUA,eACA,CAUA,aACA,WAKA,MACA,wBACA,KAOA,WACA,aACA,SAgBA,YACA,aACA,IASA,aACA,yBAEA,WACA,WASA,aACA,UAIA,2CACA,KAQA,SACA,oBACA,KChFA,EACA,QAWA,mBAOA,SAEA,yBAMA,oBAGA,gGAMA,oBASA,8FAQA,UACA,cAKA,iBACA,kBACA,MAaA,gBACA,8CACA,MAQA,aACA,sBACA,MAQA,WACA,sBACA,IASA,eACA,sBACA,QAUA,MACA,OACA,cAWA,gBAA0B,gBAAyC,gBACnE,SACA,8CAEA,OACA,iCACA,kBAGA,OACA,QACA,E7Q9JA,QAOA,kBAKA,gBAEA,YACA,KAuCA,UACA,QAEA,yCACA,aAAY,CAIZ,qEACA,wBAGA,yBAEA,OA+BA,YACA,UACA,sCACA,SAEA,OACA,WACA,CACA,UACA,UAGA,QAGA,OACA,KAYA,eACA,SAEA,YACA,sCACA,SAGA,iBACA,CACA,UACA,UAGA,SAGA,qBACA,IAQA,iBACA,IACA,gCAGA,6BACA,OAEA,6DACA,IAQyB,EC9IzB,mBAuBA,mBACA,IAQA,aAQA,mBAQA,oBAGA,wBASA,sBAEA,8BAEA,yBACA,gBACA,+BACA,QAQA,iBAEA,qBAEA,0CACA,6BAUA,oCACA,IAQA,iBACA,uBACA,MAQA,cACA,OACA,0BAWA,aAEA,gCAIA,uCAFA,KAUA,YACA,aACA,YAQA,iBACA,uBACA,UAOA,cACA,8BACA,WAOA,oBACA,CACA,4BAGA,SACA,2BAKA,oCACA,OAEA,OAUA,iBACA,mBAEA,UACA,uDAGA,WACA,sDAEA,UAQA,gBACA,IACA,iBACA,8CAMA,0BACA,wBACA,OAEA,yBACA,WAAuB,IAAc,KAGrC,IACA,QAEA,CACA,MAEA,oBACA,MAQA,gBACA,OACA,WAGA,qBACA,WAGA,gCACA,MAUA,aACA,MACA,iBAIA,YACA,SAIA,yBACA,KAIA,8EACA,oCACA,KAIA,+BACA,qCACA,WAKA,6BACA,wBACA,OAKA,+BACA,wCACA,WAIA,SACA,QAWA,eACA,UACA,0BACA,OAIA,SACA,QAOA,gBACA,sBACA,MASA,YACA,qBACA,MAOA,gBACA,qBACA,MAWA,eACA,UACA,yBACA,OAIA,SACA,QAWA,mBACA,gBACA,qBAEA,UACA,MACA,SAGA,aACA,MAEA,OACA,KAQA,qBACA,+BACA,MAQA,uBACA,8BACA,SAyBA,cACA,+CACA,yCAAyD,OAAY,QAAS,gBAC9E,wCAA4D,OAAa,SAAS,iBAElF,iBACA,eAAqC,YACrC,eAAoC,YACpC,eAAiC,KACjC,GAUA,aACA,SAEA,GACA,yBACA,uBAKA,uDAIA,UAYA,+BAXA,iCAGA,0CAKA,0CAEA,iBAaA,gBACA,+BACA,aAaA,kBACA,6BACA,YAEA,UAEA,cAEA,QACA,mBAGA,mBAEA,6BACA,KACA,IAGA,IACA,QAWA,uBACA,6BAEA,aAAsB,OAAqB,IAC3C,6BAGA,2BACA,WAWA,mBACA,CAEA,qCAEA,MACA,kBACG,YACH,kBAEA,uBAEA,QAWA,oBACA,sCAGA,MACA,cACA,sCASA,YACA,cACA,oCASA,wBACA,SAaA,aACA,+BAEA,2BACA,iCACA,OAYA,gBACA,+BAEA,2BACA,iCACA,UAiBA,eACA,kCAEA,YACA,gBAEA,iBACA,2BAEA,KACA,mBAEA,QAaA,gBACA,+BAEA,2BACA,gCACA,UAWA,wBACA,wBACA,QAUA,yBACA,+BACA,SAeiB,ECttBjB,mBAQA,mBACA,CAQA,kBACA,iBAKA,aAEA,qDAIA,qCAFA,KAOyB,K4QvEzB,MCNA,GDOA,eACA,SAEA,sBACA,yBACA,0BACA,+BAEA,MACA,UAEA,YCRA,gBAmBA,SC3BA,GD4BA,WACA,OACA,8BACA,SA9BA,iBAgCA,OC9BA,KAGA,gBAGA,wBAGA,gBAGA,iBAwBA,SCzCA,GD0CA,WACA,IACA,mBAEA,YACA,MAEA,mBACA,uBACA,sBACA,IACA,IACA,kCAEA,kBACA,aACA,qBACA,0BACA,iBACA,EAEA,OC9DA,ECuBA,GDEA,WACA,IACA,kBAEA,OACA,sBACA,cACA,QACA,GATA,qBAUA,gBACA,CAEA,ExFrCA,GyFwBA,WACA,OACA,UAEA,uBACA,CAEA,QC1BA,G1FyBA,aACA,IACA,8BAEA,WA/BA,+DAgCA,aACA,WACA,aACA,kBACA,KAEA,SACA,cAEA,KACA,+BACA,oCACA,uCAEA,qBACA,UACA,EACA,YAEA,WACA,aACA,OACA,CAEA,U2F1DA,QCCA,MjRFA,GiRGA,WACA,WAGA,GAFA,gBAGA,eAEA,OACA,QAEA,YjRVA,mBACA,uBASA,kCAY6C,SAAe,GAC5D,0BACA,WACA,MAGA,MkR7BA,gBAGA,gBAwBA,eCzBA,GD0BA,WACA,YACA,IACA,QACA,UACA,SACA,WAEA,OAEA,cACA,OACA,MALA,kBAMA,oCACA,cAEA,OACA,CACA,QAEA,YC3CA,gBAGA,iCAAiD,SAAe,GAiChE,cJrCA,WACA,wBACA,QACA,MACA,iBACA,kBAEA,4BACA,sBAGA,2BACA,UACA,eAEA,KACA,iBACA,OAEA,QAEA,UACA,CACA,QACA,EC/BA,eG6CA,eACA,MAGA,iBAFA,gBAGA,eAEA,KAEA,GCzDkB,MnRclB,gBACA,kCACA,8BAUA,sBAIA,SAEA,IACA,MAOA,wCANA,YACA,KAAI,EAEJ,QAKA,cAEA,0BAgBA,oBAGA,sGACA,CACA,cAEA,qBACA,UACA,MAEA,QACA,WAIA,gBACA,WACA,mBAEA,mBAGA,IACA,SAKA,YACA,gBAMA,kBAGA,4FAMA,oBAGA,sEAEA,cAEA,wBACA,MAMA,oBAEA,wEAEA,cAMA,2BACA,SAAoB,eAEpB,MACA,WACA,QAWA,GACA,CACA,KAEA,qBACA,KACA,sBACA,GAEA,YAKA,cAEA,WACA,OAGA,eACA,WAEA,qBACA,KAMA,kBAGA,kFACA,WAGA,UACA,GAGA,iBAEA,oBAEA,KACA,OACA,OACA,SAEA,OAEA,YACA,YAGA,qBACA,WACA,+BAEA,UAEA,KACA,SACA,EACA,uBACA,sBACA,SAEA,KACA,UAEA,OAKA,aACA,SAEA,WAQA,QACA,QACA,kFAAK,aAIL,gCACA,kBACA,OAEA,yBACA,aACA,SACA,CACA,GAIA,aAKwD,OClPxD,gBAUA,YACA,mBAOA,mBACA,CAQA,sBAYA,0BAUA,eAQA,eACA,aACA,qBAQA,iBACA,SAMA,mCAGA,iFAEA,iDAEA,6BAEA,KACA,iDAIA,6CACA,0DACA,IACA,EACA,EmRjGA,SAEA,gBAQA,YACA,mBAMA,eACA,CASA,uBACA,MAKA,aAEA,gDAIA,gCAFA,KAIA,eACA,aACA,qBAEA,gBACA,MACA,wBAWA,aACA,MACA,MCpDA,EACA,QAmBA,eAA0B,GAC1B,sBAMA,2BAGA,2IACA,6BACA,QACA,uFAAK,aAeL,0CASA,qBACA,sCAEA,gFASA,sCASA,oCASA,kCAUA,kCAQA,wFAQA,wEACA,IAOA,oBACA,OACA,KAcA,QACA,SAEA,EACA,UAEA,UAAM,QAAc,cACjB,kBAGH,eAEA,WAQA,OACA,OACA,+BAEA,aAEA,WAUA,QACA,kCACA,uBACA,aAGA,wCACA,iBAAW,CAIX,uEACA,aAAW,CAIX,YAGA,sBACA,MAEA,gCAEA,oBAGA,mBACA,OACA,qBAGA,WACA,4BACA,UAKA,oBAHA,QAKA,wDACG,QACH,wCAyBA,IAEA,WACA,mBACI,MAEJ,uEAEA,aACA,MAEA,oBAEA,mBACA,eAEA,mCACA,eAEA,aACA,oBAEA,gBACA,sBAEA,gCAGA,4BApDA,mCACA,QAEA,gBACI,YACJ,cACA,OAGA,iBACA,0CACA,kBACA,UAEA,qCAEA,UAGA,eAEA,mCACA,eACG,CAuCH,YACA,kCACA,uBACA,aAGA,2BACA,mBAAW,CAIX,0EACA,aAAW,CAIX,YAGA,sBACA,MAEA,kCAEA,qBAGA,8BACA,EACA,4BAGA,MACA,4BACA,WAUA,cAEA,wDAEG,kBAbH,iBAEA,gBACA,sBAEA,oCAGA,0BAMA,wCA2BA,IAEA,6BAEA,oEAEA,MACA,QACA,QAGA,IAEA,6BAEA,sBAEA,mCACA,eAEA,aACA,qBAEA,wDAEA,WAnDA,0CACA,aAEA,gBACI,gBACJ,cACA,OAGA,kCACA,+BAEA,2BACA,mBACA,YACA,eACA,0BAEA,UAGA,qBAEA,mCACA,eACG,CAuCH,8BAKA,OAEA,iEACA,sFACA,6BASA,8BAPA,eAEA,aAMA,qGACA,8BASA,+BAPA,eAEA,cAMA,CACA,cACA,CACA,OACA,OACA,mBACA,eAGA,UChbA,EACA,QAOA,iBAQA,MAQA,cACA,QASA,gBACA,uBACA,QAGA,wCACA,IASA,iBACA,uBACA,QAGA,0CACA,IAQA,gBACA,OACA,gBAQA,cACA,oEAEA,uBACA,UAQA,WACA,oBACA,IAQA,sBACA,YAEA,cACA,uBACA,WAEA,kBAIA,MACA,QAQA,gBACA,+BAEA,UACA,SAGA,oBADA,KAmBA,6BAA4C,GAC5C,iBAEA,aACA,mBAEA,UACA,QAOA,eACA,uBACA,0BAEA,iCAAqC,CAErC,gBASA,qBACA,cACA,mBAEA,qBAEA,mBACA,MAGA,yBACA,EAQA,WACA,8CACA,MAYA,YACA,OACA,6BAYA,WACA,OACA,4BASA,eACA,kBACA,WAGA,oBACA,iBAIA,4DACA,4CAGA,eACA,iBAGA,gBAGA,aACA,aAEA,SACA,gBAGA,2BAEA,OAoBA,qBACA,IACA,4BACG,0BACH,MAEA,QACA,wCACI,mBACJ,wBACI,mBACJ,uBAEA,qBAGA,SACA,YACA,CAQA,sBAEA,SACA,4DAGA,cAOA,sFAAgG,CAGhG,wCACA,EAQA,uBAEA,SACA,wCAGA,oBAOA,wFAAkG,CAGlG,kCACA,MAQA,6BACA,4BACA,OAQA,EpR7WA,QASA,sBAOA,eAQA,6DACA,qBAeA,qBACA,cAA0B,iBAC1B,qBAOA,kBACA,gCACA,IAQA,aACA,qCACA,MAOA,WACA,mBACA,IAkBA,cACA,4CAAoE,WACpE,wBAGA,yDACA,gCAGA,gCACA,6BAGA,SACA,WAkBA,aACA,kBAEA,kEACA,WAGA,sDAAgE,WAChE,uBACA,cAGA,0BACA,qBAGA,YACA,4BAGA,SACA,WAQA,WACA,iEACA,IASA,oBACA,+CACA,IAYA,sBACA,GACA,cAGA,sEACA,6DAEA,WACA,KA8BA,iBACA,SAEA,GAoBA,YAjBA,2CAGA,mCAGA,gCAGA,+BAIA,iCAGA,QAwBA,mBACA,2BAGA,YACA,aAEA,mCAGA,aAGA,+BAGA,WAGA,KACA,WAGA,OACA,KAWA,aAAwB,GACxB,qBAEA,KACA,SAQA,oBACA,0CACA,IAgBA,aAAyB,GACzB,cACA,OAEA,4BAEA,mBACA,gBAEA,IAeA,iBAA6B,GAC7B,cAEA,aAEA,kBAEA,kBACA,gBAEA,YAQA,kBACA,uDACA,MAaA,4CACA,WACA,MACA,YAEA,YAQA,0BACA,2BACA,IAUA,uCACA,MACA,SAEA,4CACA,UASA,mBACA,iDACA,WAQA,mBACA,wCAEA,4CACA,kBAUA,8BACA,YACA,mBAEA,4BACA,YAGA,EE/aA,QA8DA,wBAOA,cAQA,QAQA,2BAQA,oCAEA,QACA,YAQA,aACA,aACA,OAQA,yBACA,aACA,mBAWA,aACA,kBACA,aAEA,+CACA,qCAEA,gBACA,qBAQA,YACA,kBACA,aAEA,+CACA,uCAEA,cACA,qBAQA,kBACA,6CACA,WAOA,iBACA,qBACA,MAOA,iBACA,+BACA,kBAQA,sBACA,aACA,mBAGA,gBACA,IAOA,aACA,qBACA,iBAEA,kBAUA,gBACA,OAEA,yBACA,gCACA,UAIA,oCACA,IASA,eACA,OAEA,yBACA,6BACA,QAIA,oCACA,IASA,mBACA,cAEA,wDACA,IASA,kBACA,cAEA,qDACA,IAUA,WACA,mBACA,OAGA,oDACA,mBAGA,+BACA,WACG,YACH,oBAGA,kEACA,OAGA,qCACA,IAEA,uBACA,wBACA,CACA,KACA,KAGA,IACA,GAEA,QAEA,CACA,QAWA,aACA,uBACA,WAGA,wBACA,mBAGA,gBACA,KAIA,YACA,KAIA,uCACA,KAEA,gBAEA,qBACA,mBAEA,4DACA,CACA,KACA,KAIA,IACA,GAEA,QAGA,CACA,QASA,qBACA,IACA,0BAGA,mBACA,0BACA,kBAEA,0CACA,IAoEA,aACA,IACA,yBACA,SACG,4CACH,gDACA,iCAA0B,uBACvB,6BACH,yCACA,eACG,2BACH,iCACA,iBACG,2CACH,kBACA,YAEA,MAMA,gBAII,oJACJ,WACI,YACJ,WAEA,eAGA,uCACA,YACA,kBAAG,SAGH,4BACA,eAOA,qCAGA,uFACA,SAYA,cACA,IAMA,wBACA,QAIA,iHAEA,iBAIA,gDAEA,oBAEA,MACA,0CAEA,+BAGA,uBACA,UAYA,mBAGA,SAEA,qBAEA,YACA,aAGA,sCACA,EAeA,mBAA8B,GAC9B,kBACA,iDACA,EAmBA,kBACA,MACA,8BAGA,qDACA,uCACA,EAWA,cACA,qBACA,aAQA,uBACA,QACA,4GAAM,cAKN,2CACA,mBAOA,EmRlpBA,SACA,QA2DA,wBAOA,iBAGA,6CAGA,sBACA,YAQA,aACA,wBACA,MAQA,yBACA,wBACA,kBAWA,aACA,wBACA,MAQA,YACA,wBACA,KAQA,kBACA,wBACA,WAOA,iBACA,wBACA,UAOA,iBACA,wBACA,UAQA,sBACA,wBACA,eAOA,cACA,wBACA,OAOA,aACA,uBACA,WAUA,gBACA,wBACA,eASA,eACA,wBACA,cASA,mBACA,wBACA,kBASA,kBACA,wBACA,iBASA,qBACA,wBACA,oBAUA,WACA,wBACA,UAWA,aACA,wBACA,YAiEA,cACA,iBACA,YAaA,eACA,iBACA,aAOA,EC1VA,SACA,QAOA,eAA0B,GAO1B,aAQA,oBAQA,oCAYA,0CAYA,8CAQA,0CASA,EAOA,aACA,oBACA,MAOA,YACA,wBACA,IAOA,WACA,oCACA,IAaA,SACA,IACA,gBAEA,sBACA,MAEA,KAMA,gCAGA,qCAMA,oBAEA,qCACA,aAIA,OACA,yBACG,qCAMH,iBAGA,iEAEA,mBAEA,mBAEA,WACA,IAQA,OACA,IAEA,MACA,mCACG,eACH,0BAOA,4BAGA,oEACA,IASA,YACA,IAEA,YACA,iCAKA,qBACA,UASA,UACA,IAEA,UADA,eAGA,YA6BA,GA5BA,oBACA,oBACA,SAGA,qBAEG,aACH,oBACA,WACA,YAGA,SAGA,QACA,MACA,mBACA,mCAGA,uBASA,+DACA,iBAEA,oDACA,OAMA,yCALA,4CAEA,oBAEA,eAYA,SACA,oBACA,QAWA,UACA,oBACA,SAWA,YACA,oBACA,WAMA,QACA,UACA,4CACA,0CAGA,WACA,oBAEA,EAoGA,UACA,SAMA,+BAGA,yFAEA,oBAOA,SACA,+BACA,SAUA,aACA,CACA,mDAEA,oCAEA,KAEA,EAQA,uBACA,cAKA,6BACA,8BACA,sCAMA,UACA,uCACA,2CACI,aACJ,SAGA,QACA,GAOA,6CALA,WAwBA,yBACA,4BACA,KAiBA,qBACA,4BACA,MAIA,sCACA,2CACA,cAIA,mBAAoB,kCAA2D,OAC/E,SACA,kCAGA,gCACA,CAGA,WACA,mBAIA,6BAGA,2CACA,2CAGA,eAKA,mFACA,QACA,cAGA,GACA,OAII,WACJ,GACA,EAOA,oBACA,2BACA,WAgBA,EChmBA,SACA,QAIA,cAOA,gBAaA,yBAAgC,YAUhC,sBAYA,0BAYA,yBAQA,sCACA,IAUA,kBACA,mBACA,MAoBA,qBACA,kBACA,MAQA,mBACA,IAEA,MACA,uBACA,YAGA,KADA,OAKA,cACA,EAcA,SpR/IA,SAWA,GACA,mBAQA,mBACA,CAQA,kBAQA,uBASA,sBAWA,uBACA,IAQA,eACA,aACA,SASA,SACA,aACA,GAcA,wBACA,IAMA,oBAMA,4JACA,aAKA,aAEA,qDAIA,qCAFA,KAyBA,aAEA,wBACA,wBAGA,wCACA,QAUA,UACA,eAGA,UAMA,wBAHA,qBAEA,KAQA,EACA,GAIyB,oBCjLzB,mBAYA,mBACA,CAQA,kBACA,kBAKA,aAEA,iDAIA,iCAFA,KAWA,kBACA,yBAMA,qCAEA,iFAKa,EC7Db,6BAOA,iBAOA,OAWA,WACA,QACA,wBC1BA,CDgBA,SAOA,OCrBA,SACA,KACA,WACA,YAGA,UACA,MACA,eACA,aAeA,aA0FA,UACA,SACA,WACA,WACA,cACA,aACA,aACA,SACA,SACA,SACA,OACA,OAIA,OAGA,YACA,cACA,YAIA,mBAAqB,GAAY,UACjC,gBAEA,oBACA,gBAGA,WAAqB,GAAY,MACjC,QAIA,gBAAsB,IAAa,OACnC,aAGA,QACA,SAzHA,GC9BA,mBAYA,mBACA,CAQA,kBACA,kBAKA,aAEA,8CAIA,8BAFA,KASA,kBACA,yBAMA,qCAEA,2EAkBA,UACA,aACA,eASA,gBACA,8BAEA,0BACA,yCAGA,iBACA,QAWA,ECjGA,QAQA,eAOA,gBAGA,wBAEA,IASA,oBACA,8BACA,WAQA,iBACA,uBACA,MAQA,cACA,OACA,oBAQA,WACA,OACA,KAQA,aACA,OACA,KAUA,MACA,OACA,qBASA,gBACA,+BACA,aAQA,YACA,aACA,YAQA,iBACA,uBACA,UAOA,cACA,8BACA,WAUA,kBACA,6BACA,YAEA,UAEA,eAEA,QACA,mBAGA,mBAEA,6BACA,KACA,IAGA,IACA,QASA,uBACA,6BAEA,aAAsB,OAAqB,IAC3C,6BAGA,2BACA,WAUA,iBACA,WACA,cACA,EAOY,SCrLZ,QACA,eAKA,MASA,gCACA,IAsEA,oBACA,yBACA,aAWA,uBACA,yBACA,cAUA,cACA,OACA,UAqBA,8BAAuD,GACvD,SAEA,YASA,SARA,yBAGA,YACA,aAGA,KAaA,4BACA,OACA,YAYA,2BACA,SACA,YAGA,wBADA,UAaA,wBACA,OACA,YAsBA,uBACA,SAGA,YAIA,aADA,WAYA,oBACA,GACA,kBAUA,qBACA,GACA,mBAWA,cACA,GACA,YAWA,iBACA,GACA,eAeA,gBACA,QACA,aAGA,OACA,cAWA,iBACA,GACA,eAUA,yBACA,GACA,uBASA,0BACA,UACA,wBAyCA,mBACA,OACA,sBAEA,yBAEA,wBAyBA,kBACA,WAEA,gBAMA,yBACA,QAIA,+GAMA,oBAGA,8DACA,oBACG,8BACH,WAEA,0BAEA,iDACA,mBAEA,QACA,SAEA,WACA,cA4BA,mBACA,WACA,WAGA,eACA,QAIA,uDACA,WACA,WAEA,eACA,eAEA,uDACA,YAEA,sBACA,OAGA,mBACA,GAIA,+BACA,cAGA,+EAEA,WACA,mCAEA,iBACA,eAIA,uDACA,YAEA,CACA,QAoBA,mBACA,WACA,eAEA,sDAMA,yBAIA,oJACA,wDAEA,OAIA,8CAHA,uBAEA,cAsBA,YACA,eAGA,IAEA,cAEA,SAMA,gBAGA,uDACA,0CAEA,mBACA,aAGA,uCACA,uBAGA,sBACA,YACG,iBAEH,GACA,cAGA,sBAEA,yBACA,YACA,CAaA,UACA,IAGA,QACA,kBAIA,aAAS,SAAmC,YAC5C,gCAEA,oBAGA,6BAEA,mBACA,aAIA,+CACA,4BACA,iBAGA,sBACA,SAYA,WACA,CAIA,0BACA,WACA,WAIA,uCACA,WACA,QAGA,yBAEA,kBAEI,wEAEJ,+BACA,wBAKA,uBAEA,YAKA,qBACA,eAGA,wBACA,mBAIA,YAEA,UACA,CAcA,UACA,IAEA,uBACA,QAEA,iCACA,WAEA,kBAEA,mCAEA,sBACA,YACA,aAGA,sBACA,WAuBA,UACA,MACA,8BAGA,yCAEA,SAEA,wBACG,oBAEH,SAEA,oCACA,qDAGA,sBACA,yCAGA,+DACA,aAGA,gBACA,SACA,CAYA,YACA,MAMA,8BAGA,2CAGA,QACA,YAIA,cAAS,SAAmC,YAK5C,4DACA,WAGA,iFACA,cAEA,qBACA,cAGA,sBAEA,yBACA,YACA,CAEA,WAGA,2CAGA,mCAGA,mBACA,cAGA,wCAEA,WACA,YAcA,YACA,oBAEA,iBAKA,sBAJA,8CACA,4BAEA,cAaA,uBACA,IACA,aAEA,aACA,WACA,mBACA,eACA,2BACA,uBAGA,oCAEA,WAGA,WACA,YAEA,kBACA,uBAEA,oCACA,YAGA,kCAGA,cACA,GAGA,OAEA,mBACA,MAGA,YACA,UAGA,sBAGA,qBACA,aACA,IAEA,IAEA,WACA,oCAYA,yBACA,IACA,aAGA,aACA,WAGA,8BACA,WACA,kBAGA,aACA,YAEA,uBAGA,oCACA,KACA,qBAKA,MACA,UACA,CAEA,WACA,gDAGA,cAEA,GAGA,OAEA,mBACA,MAGA,yBACA,UAGA,sBAGA,qBACA,aACA,IAEA,IAEA,WACA,oCAcA,gBAEA,wDACA,iBAEA,iCACA,0CAEA,uBACA,YAGA,MAAS,SAAmC,YAG5C,4DACA,WAEA,8DACA,cAEA,qBACA,cAGA,sBAEA,yBACA,YACA,CAEA,WAGA,2CAGA,sDAGA,mCAGA,mBACA,cAEA,wCAEA,WACA,YAcA,mBAEA,kBACA,qBAIA,mCACA,YAIA,oBACA,oDAIA,+BAGA,0CAGA,SAGA,oCACA,SAGA,oBACA,eAEA,kCACA,gBAIA,QACA,KAYA,2BACA,KACA,QAIA,4CACA,SAIA,0BAEA,mCAKA,sDACA,gBAKA,0BACA,oDACA,YAKA,0BAEA,gCAKA,gBACA,uCAIA,qCACA,kBACA,+BAIA,gCACA,kBACA,kBAIA,cACA,QAYA,6BACA,KACA,QAIA,4CACA,SAIA,0BAEA,mCAKA,wDACA,iBAKA,6BACA,iBAIA,0BAEA,qDACA,YAKA,0BAEA,gCAIA,kBAIA,qBAMA,qCAHA,kDAEA,sBAYA,8BACA,WACA,UAEA,OAGA,oBACA,iCAEA,eACA,YAEA,cACA,iCACA,kBAGA,gDAEA,aACA,WAiBA,yBACA,WACA,WAGA,sBAMA,6BAIA,yDAMA,0BAIA,iEACA,kBAIA,yBACA,gBAIA,8BACA,qCAGA,mBAKA,mBACA,iCAEA,eACA,qBAIA,UACA,2BAEA,mBACA,qBAKA,KACA,iBAGA,MAGA,kBACA,uBAGA,uCACA,iBAGA,uBAGA,iCAEA,sBACA,qBACA,CAcA,6BAEA,eACA,eAKA,eACA,4BACA,mBAIA,uCAEA,MACA,GAGA,+BAGA,gBACA,uBAGA,YACA,SACA,cAcA,kCAGA,SACA,4BACA,mBAIA,4CAEA,GAIA,gCAMA,aAKA,UACA,8BAEA,WAGA,EAsKA,SAKqB,yBClnDrB,yBACA,MAGA,iBADA,cAUA,2BAKA,WAIA,EACA,UAEA,UAAgB,EAA0B,KAC1C,QAaA,SAqCA,YAWA,SKlGA,QAOA,iBAOA,sBAQA,UAQA,wCAQA,4BAQA,yBAQA,UAQA,+BAQA,UAQA,0CACA,IAcA,gBACA,IACA,4CACA,0BAEG,WAGH,uBACA,gBAGA,UACA,uCACI,eACJ,mCAOA,yBAEA,0EACA,CA0BA,SACA,IAKA,6BACA,mCAIA,2BACA,qBAGA,gCACA,mDAGA,6CAGA,6BACA,sBAGA,oCACA,sCAAmC,CAGnC,6CACA,iFACA,4BAA6B,CAU7B,8BACA,2BACA,gCAEA,sCAEA,UAKA,0CAFA,OAIA,yBAGA,UACA,wBAEA,gCACA,8BACA,4BACA,OAcA,wBACA,gCACA,aAEA,QACA,MAGG,mBADH,WAEA,WAEA,mBAOA,aANA,sBAEA,KAGA,WAEA,CAeA,2BACA,wBAEA,sCACA,0DAIA,SAUA,6BACA,kDACA,YAYA,gCACA,uCAEA,oDAKA,QAOA,sBACA,cAGA,kBAOA,mBAGA,mEACA,mBAEA,6BAGA,8BACA,IAQA,gCACA,kDACA,YAGA,gCACA,uBACA,WAGA,4CACA,MAGA,kBACA,WAKA,aACA,MAIA,kBACA,kBAGA,mBACA,eAEA,mCAKA,gBAWA,iBACA,2BACA,8DAEA,mBACA,aAEA,eAEA,wDACA,UAGA,MACA,SAEA,OAQA,gBACA,2BACA,sDACA,UAGA,4BACA,2BAIA,0BACA,UACA,mBAGA,kBAWA,qBACA,gBAmDA,IACA,MAGA,uBACA,iBAGA,eACA,qBAMA,aACA,cAlEA,iBAEA,gBAMA,gBACA,kBACA,yBACA,gDAAqG,CAKrG,gBACA,uCAGA,gBAEA,gBACA,aAEA,cACA,QACA,qBACA,MACI,KACJ,oBACA,SAGA,mDACA,OAOA,cACA,UACA,8BAIA,oBA4BA,6BACA,CAIA,aACA,yBACG,oBACH,4BACA,mBAGA,4BAOA,mBAEA,IACA,8BAMA,YALA,gCAEA,6EAMA,sBAKA,8BACA,YAEA,8BACA,4BAEA,wBAQA,wBACA,WACA,yBAIA,2EAEA,6BACA,UACA,YACA,OAEA,gBAIA,wCAIA,YACA,iBAIA,oEAGA,iBACA,mBAEA,gBACA,oBACA,wBAGA,uDACA,UAQA,uBACA,qCAGA,uBASA,wFACA,6DAIA,SAEA,8BACA,4BACA,QASA,4BACA,uBAEA,yBAGA,sCAEA,gDAKA,0DAOA,aAOA,sBACA,kCACA,WAEA,+BACA,WACA,kCAEA,gBACA,uBAEA,iBACA,CACA,CAOA,uBACA,cAGA,6BAEA,QAOA,eACA,mBACA,wBAGA,qCAEA,QACA,CACA,EAQa,gBCltBG,QCXhB,UGsBA,QAOA,eAA0B,GAkB1B,oBAQA,kCAQA,8DAQA,gCAQA,mCAQA,uCACA,QAUA,uBACA,kCACA,UASA,uBACA,mCACA,MAUA,kBACA,wBACA,gCACA,QAQA,oBACA,gCAEA,YACA,wBACA,iCAGA,sCACA,iBAEA,mBACA,CAUA,2BACA,wBACA,gCACA,QAcA,iBAA+C,GAC/C,iBACA,cAEA,qCACA,iBAAG,KACH,SACA,4BAGA,mBAEA,WAEA,wBAEA,2BACA,WAEI,wCAEJ,aASA,WAPA,YACA,WAGA,wCAKA,QACA,WAIA,mCACA,sCAIA,+CACA,iCACA,2BAIA,eACA,QACA,CAYA,0BAA4D,GAC5D,8BACA,wBAEA,mBACA,cACA,mBAGA,2BAEA,iBAGA,IACA,mBAEA,eASA,kBACA,kCACA,kCAEA,gBACA,cAIA,6BAHA,4BAEA,SAcA,qBACA,WAEA,uBACA,cAEA,+BAEA,SAGA,cAEA,aACA,SAGA,OAAW,UACX,SAAG,KAEH,SAEA,kBACA,WAEA,gBAEA,SAGA,qBACA,EAAI,KACJ,WAEA,qBACA,aACA,gDAEA,YAEA,SAGA,UACA,eACA,WAIA,WACA,YAAY,UAGZ,6BAEA,QAAW,UACX,SACA,CAgBA,eAAiC,GACjC,cACA,mBAIA,6CAEA,mBACA,KAGA,YACA,UACA,YACI,UACJ,cAEA,6CACA,SACG,eACH,mBACG,UACH,SACA,4BAGA,mBAEA,WAEA,wBAEA,SACA,WAEI,+BAEJ,gDACA,gBAEA,YACA,WAIA,4BAEA,8BAAmC,EAAQ,KAC3C,mCAEA,MAEA,+BACA,iCACA,yBAIA,gBACA,QACA,CAWA,wBAA8C,GAC9C,WAAkB,iBAAkC,WACpD,WACA,qBAEA,eACA,WAEA,QACA,CASA,sBAGA,qBACA,uBAGA,eACA,YAGA,yBAEA,uBACA,KAEA,QAEA,cAEA,4BAEA,aAAkB,MAA6B,eAE/C,WACA,qBAGA,uBAEA,OAEA,iBAAyC,CACzC,YASA,kBACA,mDACA,uDAEA,iBACA,MAGA,YACA,IAiBA,uBACA,cACA,wDAIA,oBAEA,2BACA,uBAGA,yBACA,IACA,iDAGA,oBACA,gCAGA,eAIA,QACA,YAGA,KACA,aANA,IASA,UACA,cAEA,gBACA,qBAEA,EAAI,KACJ,wBACA,KACA,WACA,kCAGA,wBACA,sCAEA,EAEA,OAEA,KAaA,gBACA,2DACA,MAsBA,6BACA,IACA,YAIA,mBAEA,sBACA,KAGA,mBAGA,qBACA,UAEA,mBAGA,mBAEA,qBACA,WAGA,kBACA,mBAEA,YAEA,IACA,CAEA,KACA,6BAEA,iBACA,oBAGA,SAGA,mBAEA,IACA,CAEA,OACA,KAYA,gBACA,+BACA,MAiBA,4BACA,WAGA,+BACA,qCAIA,8CACA,+CAGA,GACA,IAOA,SACA,cAEA,wDAEA,MAAU,WAAmB,cAC7B,SAIA,aACA,MAAW,cAEX,sBACA,MAEA,KAMA,kBACA,cAEA,UACA,eACA,WAIA,aACA,aACA,CAQA,aACA,4BACA,YAQA,sBACA,4BACA,sBAQA,aACA,4BACA,YAQA,0BACA,MACA,YAKA,0BAEA,wCACA,qCAEA,uBAEA,UAGA,SADA,UAUA,sBACA,SAGA,YAEA,gBACA,WACA,+BAEA,kBACA,aAEA,QAEA,OACA,KAYA,yBACA,2DACA,iEACA,YAUA,oCAEA,kBAEA,KAGA,oCAEA,eAGA,sBAIA,gCAKA,aAmBA,4BACA,SAIA,+DACA,OAKA,6BACA,cACA,yCAEA,0BACA,wBAEA,GAGA,8BACA,cAGA,4DAEA,OAEA,kBAA4B,QAC5B,QASA,sBACA,2DACA,OAGA,sBAEA,kCACA,yBAeA,2BACA,SAEA,kBACA,mBAOA,mBAAqC,iBAErC,kBACA,qCAIA,8BAyCA,0DAxCA,wBAIA,QACA,yBAOA,aAQA,iCAKA,0DACA,6BAOA,SACA,qDAKA,SAWA,8BACA,gBACA,sCACA,sCAGA,sBACA,sBAGA,0BACI,mBAEJ,sBAIA,WACA,KAWA,6BACA,OACA,iBAGA,2BACA,mBACA,sBAEA,qCAEA,aAEA,sBAEA,mBACA,SAKA,QACA,GACA,cACA,6BAGA,iBAEA,QAEA,OACA,KASqB,EGriCrB,YAAkC,MAelC,iBAGA,iBACA,mCAEA,mBAEA,MACA,GAGA,yBACA,KAiBA,sBAEA,iBACA,cAGA,uBACA,GAGA,OACA,GAGA,uBAEA,YACA,mBAEA,SASA,qBACA,eACA,MAGA,OA+BA,OACA,QAKA,eAEA,QAGA,YACA,UACA,EAEA,mBAqBA,cAAsC,GAGtC,+BAIA,yDAGA,mDAEA,iBACA,mCAKA,SACA,mBAQA,WACA,IAMA,4DACA,8BAEA,gBAaA,yBACA,cACA,MACA,SAKA,EAMA,4BALA,eACA,uCACA,gBAEA,GAQmB,ICzOnB,QAMA,eAOA,MAQA,uBAQA,cACA,YAYA,SACA,MACA,YAQA,UACA,MACA,YAKA,UACA,MACA,eACA,eASA,EgQ1FA,S/PsBA,mC+PVA,WACA,sBACA,MAHA,6BAIA,ICRA,EhQgBA,aAEA,IgQjBA,WACA,sBACA,MAEA,KCJA,OCLA,GDMA,aACA,YACA,MAEA,OACA,YACA,UAGA,SACA,QAEA,EEfA,GDcA,qBACA,OACA,EAHA,MAIA,WAEA,qBACA,KAGA,iBACA,OACA,WAEA,aACA,EACA,SA/BA,EAiCA,oBAGA,gBACA,OACA,OAEA,KACA,WACA,EACA,eAEA,6BACA,CACA,KAEA,SACA,KACA,KAEA,CACA,4BACA,OACA,gBACA,uBAEA,MAAW,GACX,CACA,KACA,KACK,UACL,EACA,OACA,cACA,CACA,KACA,KACA,CACA,CAEA,SADA,cAGA,WCtDA,0BAmBA,elQzCA,GkQ0CA,uBACA,CACA,UACA,IAxBA,uCAyBA,4BACA,WAEA,aACA,WAEA,OACA,IAnCA,gDAoCA,wBAKA,YACA,IApDA,mBAwDA,IAvDA,0BAyDA,GACA,IAzDA,qDA2DA,QAEA,IA3DA,kCA6DA,SACA,IA7DA,kBAiEA,IA/DA,8BAiEA,GACA,IAtEA,kBAwEA,MACA,IAtEA,qBAuEA,EA9EA,SAgFA,sBACA,GAGA,iBAEA,gBAEA,MACA,GA5FA,IA+FA,iBAEA,eACA,IArFA,kBAsFA,4BAGA,SACA,QAEA,KlQ9FA,QCaA,GAXA,4BACA,yBAWA,GAVA,yBACA,uBAUA,GATA,0BACA,uBASA,GARA,iCACA,wBAQA,GALA,2BAMA,GAhCA,yBACA,kBAgCA,GAnBA,2BAZA,oBAgCA,GAnBA,wBAZA,iBAgCA,GA/BA,qBACA,qBA+BA,GA9BA,mBACA,mBA8BA,GA7BA,sBACA,mBA6BA,GA5BA,mBACA,mBA8BA,GA5BA,uBA6BA,cAOA,gBAmBA,SkQ/DA,GlQgEA,WACA,OACA,8BACA,QAEA,KkQjEA,wBACA,oBAGA,4BAGA,gBAgBA,ejQnBA,GiQoBA,qBACA,OACA,QACA,MACA,KAGA,WACA,QAGA,kBACA,QAEA,0BACA,gBACA,QAEA,WACA,gBACA,WACA,MACA,gBAEA,yBAjDA,GAkDA,oBACA,8BAEA,uBACA,WACA,gBAEA,uBACA,QACA,YACA,CAIA,mBACA,QACA,gBAEA,EC/CA,MCHA,GDIA,eACA,GACA,sCACA,2CACA,EAEA,ECTA,mBACA,eACA,CAQA,sBACA,CACA,aACA,iBACA,yBAQA,gCAOA,6BAQA,4BAQA,6EACA,MAMA,QACA,0CACA,cAKA,WACA,mBAEA,aACA,iDAEA,QAKA,SACA,OAEA,6BACA,mDAEA,QAKA,UACA,OAEA,iCACA,YAKA,UACA,OAEA,iCACA,YAQA,gBAEA,gBAsHA,WAKA,iBAIA,8BACA,qBAKA,IACA,IArIA,aAGA,oBAGA,kBACA,UAIA,cACA,gCACA,0BAGA,mBACA,aAGA,kBACA,yBAEA,MAIA,kBACA,0BAGA,qBAIA,wCACA,uCAEA,oBAGA,gBACA,MACA,iBACA,kBACA,QAMA,kBACA,uCAEA,YACA,CAMA,SAEA,oBACA,2CACA,QAGA,yBACA,WACA,+BACA,kDAAoF,CAIpF,mBACA,qCAEA,qBACA,MACA,WACA,cACA,cAGA,SAIA,mCAEA,qBAEA,wBAMA,4CACA,kDAGA,aACA,SACA,YAEA,YAEA,oBAIA,2BAEA,QA6BA,sBACA,OAGA,6DACA,uEACA,CAIA,qCACA,KCrRA,EACA,QAMA,mBAOA,MAQA,uBAQA,cAQA,4BAEA,UACA,OAQA,aACA,iDACA,UAKA,iBACA,eACA,gBAKA,kBACA,eACA,iBC7CA,EACA,mBAqBA,eACA,CAQA,cACA,aAKA,WACA,qEAEA,4BACA,0BACA,MACA,gBAEA,aAAI,EAAG,iBACP,YACA,EAWA,YACA,MACA,4CAEA,UC/EA,EACA,mBACA,eACA,CAEA,sCACA,QAEA,cACA,oBACA,WAEA,iBACA,4BACA,mBAEA,wBACA,WACA,KAEA,GCtBA,EACA,YAEA,ItQdA,SAGA,sBACA,MAmDA,MCtCA,MACA,mBAMA,eACA,CASA,oGACA,IAKA,UACA,cAEA,+BACA,WAEA,wCAEA,cAEA,6CAEA,SAAG,EAAG,UACN,UAKA,UACA,OAEA,iDACA,QAeA,wBACA,uBACA,iCAAkE,uBAGlE,kCACA,oBAIA,6CACA,sBAGA,2BACA,CACA,eACA,4BAIA,yBAMA,0BACA,oCAOa,ECxEb,SAWA,WACA,eACA,OAYA,WACA,cACA,OAGA,MqQhDA,OACA,mBACA,eACA,CAWA,iCAUA,6CAUA,8BASA,gCASA,oGAEA,+EAQA,2BACA,CAKA,WACA,WAGA,8BAIA,+CACA,MACA,yBAEA,mBACA,OAKA,UACA,OAEA,6BACA,mEACA,QAUA,0BAIA,4DAKA,mCAIA,8BACA,mCAEA,wEAOA,8BASA,2BAKA,oBAHA,mHAMA,uBACG,aACH,SACA,mBACA,UACA,eAIA,mCAMA,0BACA,oCACA,GAOA,qBACA,uBACA,CC5KA,EACA,mBACA,eACA,CAEA,oCACA,aACA,2BAEA,0BACA,GAOA,6DACA,GAEA,sBACA,qBAEA,iCACA,YAGA,eAEA,SAQA,EAEA,cACA,aACA,OAKA,UACA,MACA,oCAGA,wBACA,SCvDA,EACA,mBACA,eACA,CAEA,mEACA,+BAEA,qCACA,GACA,cAEA,6BACA,GACA,cACA,EAEA,cACA,aACA,OAwCA,KpQ/DA,IDMA,WACA,oCACA,KAEA,EEJA,QA4BA,eACA,SASA,8CAEA,SACA,WACA,YAGA,yBACA,aAEA,uDAaA,gBACA,KACA,4FAAM,CAKN,4CAEA,cAEA,wBAAG,eACH,MAAU,cAEV,yBACA,KACA,EACA,QACA,cACA,EACA,QAEA,UACA,SA4CA,OAOA,QACA,eACA,KASA,YACA,aACA,wBACA,yBACA,YAEA,OACA,IASA,YACA,aACA,YACA,cACA,aAEA,UACA,IAQA,mBACA,SACA,mBACA,2BACA,+BACA,4BAGA,gCACA,yBAEA,eACA,WAEA,KAEA,SAQA,uBACA,cAGA,8BAEA,UAEA,CAOA,UACA,wBACA,MAYA,aACA,cACA,mBAGA,YACA,gCAGA,mCACA,SACA,cAEA,mBACA,mBAEA,YAIA,gBAGA,UACA,UAGA,CACA,QAUA,WACA,UACA,sBACA,KAIA,SACA,QAQA,YACA,cAEA,iCACA,WAUA,8BACA,cACA,cAEA,KACA,gDACA,uDACG,iBACH,iBAEA,2BACA,+BAEA,kCACA,IAGA,aACA,cAEA,cACA,eAEA,UACA,IAQA,2BACA,SAEA,kBAEA,uBACA,gBACA,eAOA,eACA,SAEA,eACA,YAGA,6BACA,mCACA,aAEA,IACA,OAEA,CACA,QACA,EAEA,gDAMwD,UCzSxD,cAnEA,GAoEA,CACA,8BA2CkB,4BAvDlB,WACA,SAEA,WACA,IAEA,UAGA,IChCA,QACA,cAOA,eAUA,yBAQA,6DACA,oDAQA,2BAQA,wBAQA,UAQA,uBAQA,6BAQA,kDAGA,eACA,qBACA,qBACA,qBACA,qBACA,qBAGA,mBACA,SAGA,2BACA,MACA,SACA,EAaA,0BACA,uBAGA,6BAEA,4BACA,2BACA,4CACA,gDAEA,uEACA,yEACA,qEAEA,0CACA,WAEA,YAQA,qBACA,sBACA,MAeA,eACA,uBAEA,OACA,KAGA,iBAEA,sBAEA,+BACA,WAGA,aAGA,SADA,UASA,eACA,wBACA,MAKA,mBACA,gCACA,WAEA,SAKA,kBACA,gCACA,WAEA,QAMA,uBACA,iCAGA,sBACA,0BACA,iCAGA,IAMA,QACA,6BACA,iCAGA,qCACA,cASA,kBAEA,2EACA,CA4BA,UACA,oCASA,2BAQA,yPACA,2BAOA,mBACA,yBACA,cAGA,uBACA,4DACA,cAEA,mCACA,UASA,SACA,kBACA,EAKA,UACA,gCACA,WAGA,eACA,eAQA,UACA,MACA,6BACA,kCACA,cACA,uBACA,uBAkBA,ECtYA,SCoBA,QASA,eASA,aAQA,iBACA,KAWA,YACA,IAEA,YACA,aAGA,SACA,wDAGA,kFACA,QAYA,kBACA,IAEA,YACA,aAGA,SACA,8DAGA,kFACA,QAWA,iBACA,OACA,EAUA,gBACA,aACA,6BAIA,WADA,IASA,kBACA,cAEA,kDACA,IAQA,sBACA,cAEA,kDACA,IASA,WACA,OAEA,YACA,YAGA,OACA,QASA,eAEA,mBACA,KAIA,yBACA,IAkBA,UACA,SACA,aAEA,OACA,oBACA,iBAGA,OACA,QAWA,gBAA0B,gBAAyC,gBACnE,SACA,qCAGA,iCACA,kBAGA,OACA,QAYA,uBAAsC,GACtC,cACA,oBAEA,sBAEA,mBACA,MAGA,yBACA,EASA,YAEA,IACA,QAIA,0BACA,KAGA,sBACA,cAEA,YAGA,eAGA,eAIA,sBAEA,IASA,WAEA,OAKA,0BAKA,aACA,WAQA,gBACA,oBACA,MAQA,gBACA,oBACA,MAUA,gBACA,oBACA,SAOA,mBACA,oBACA,MAOA,SACA,SAEA,GAKA,mBAJA,6BAGA,UASA,SACA,oBACA,OAQA,UACA,kCACA,MAUA,mBACA,aACA,QASA,oBACA,aACA,KAUA,oBACA,oBACA,SAQA,mBACA,aACA,OAqBA,MACA,OACA,SgQpcA,EACA,mBAWA,iBACA,CAQA,uBACA,EAKA,iBACA,kBACA,MAOA,WACA,aACA,KAKA,MACA,wBACA,KAOA,SACA,eAEA,SAGA,mBADA,MASA,SACA,8BACA,gBAQA,mBACA,wBACA,WC9DA,EACA,QAWA,mBAOA,SAEA,oBAMA,wBAGA,4FAMA,wBASA,+FAQA,UACA,cASA,kBACA,yCACA,gDASA,iBACA,kBACA,MASA,gBACA,gCACA,qCAaA,gBACA,wCACA,UAQA,aACA,sBACA,MAQA,WACA,sBACA,IASA,eACA,sBACA,QAUA,MACA,OACA,cAQA,UACA,uBAEA,UAKA,MAJA,kCAGA,eAYA,gBAA0B,gBAAyC,gBACnE,SACA,qCAGA,iCACA,kBAGA,OACA,QAQA,gBACA,sBACA,eAQA,gBACA,sBACA,eAUA,gBACA,sBACA,eAOA,mBACA,sBACA,kBCtPA,EACA,QAOA,eAOA,aAGA,wBAEA,IASA,oBACA,2BACA,WAQA,aACA,oBACA,MAQA,gBACA,iDACA,EAQA,WACA,wBACA,IAQA,gBACA,qBAEA,uBACA,MASA,sBACA,cAEA,yFACA,EAWA,iBACA,mBACA,mBAGA,uBAEA,aAMA,gBAGA,iGACA,qBAWA,iBACA,OAEA,6BACA,gBACA,uBAGA,qBACA,UAEA,IAMA,kBAGA,mGACA,MASA,kBAEA,UACA,aAMA,8BAIA,wHACA,KAUA,oBACA,oBACA,WAQA,SACA,+BACA,SACA,EjQzLA,mBAaA,mBACA,CAQA,cAQA,sBAGA,4BAEA,IAQA,iBACA,uBACA,MAQA,gBACA,uBACA,SAQA,cACA,OACA,oBAqBA,aAEA,gCAIA,uCAFA,KAUA,YACA,uBACA,UAOA,cACA,8BACA,WAQA,iBACA,uBACA,eAUA,uBACA,uBACA,qBAmBA,iBACA,uBACA,gBAaA,iBACA,OAEA,cACA,uBAGA,kBACA,QAOA,SACA,eAEA,wBAEA,6BACA,YAEA,uBACA,4BAEA,SAEA,CACA,QAUA,aACA,6DAEA,kCACA,kBASA,gBACA,wBACA,aAWA,kBACA,SAEA,eAEA,QACA,mBAGA,mBAGA,oBACA,iBAYA,uBACA,wBAEA,2BACA,iBAGA,KACA,QASA,mBACA,OAEA,mBACA,GAEA,oBACA,WAEA,eAGA,uBAGA,YAEA,wBACA,aAMY,EC/SZ,QAmBA,eAA0B,GAC1B,sBAMA,2BAGA,yHAEA,2BACA,mBACA,QACA,wFAAK,CAUL,mBAaA,0CAWA,qBACA,sCAEA,sFAUA,oCASA,kCAWA,kCAQA,wFAQA,wEASA,uCACA,MAOA,oBACA,OACA,KAcA,QACA,WAEA,EACA,UACA,gBAEA,gBAAM,QAAc,cACjB,kBAGH,eACA,gBAEA,iBAOA,OACA,OACA,+BAEA,aAEA,WAUA,QACA,cACA,sCACA,iBAGA,gDACA,gBAAW,CAIX,uEACA,aAAW,CAGX,yCAEA,aACA,4BAEA,UAMA,sBALA,QAEA,uBAKA,mCACG,sBACH,IAEA,WACA,mBACI,MACJ,SAEA,0DACA,iCAGA,cACA,MAEA,oBACA,cAEA,uBACA,eAEA,cACA,eAEA,eACA,QACA,cACA,iCAEA,YACA,sBAEA,WAGA,mBAUA,YACA,cACA,sCACA,iBAGA,mCACA,mBAAW,CAIX,0EACA,aAAW,CAIX,yCAEA,cACA,yBAEA,cACA,cAYA,mCAEG,mBAbH,gBACA,gBAEA,sBACA,sBAEA,eAGA,wCAKA,IAEA,WACA,mBACI,MACJ,SAEA,gEACA,mCAGA,YACA,QAEA,oBACA,uBAEA,gBACA,eAEA,cACA,eAEA,eACA,WACA,iCAEA,+BAEA,EACA,KiQtTA,IhQtBA,WACA,kBACA,eACA,SAEA,EgQkBA,QAOA,iBACA,4BAQA,iCAGA,iFAOA,kHAAsH,CAItH,uBACA,cASA,UAgCA,YACA,MAQA,aACA,gBACA,KAKA,cACA,4BACA,IAcA,aACA,YAEA,eAAkB,qBAA0B,EAC5C,sCAGA,UACA,QAUA,YACA,uCACA,OASA,eACA,mCAEA,2DACA,IAQA,gBACA,8DACA,IAQA,iBACA,gEACA,IAQA,gBACA,OACA,gBAQA,cACA,iCACA,SAQA,eACA,iBACA,WAGA,kCAGA,YACA,WAEA,OACA,aAEA,SACA,gBAGA,wCAEA,OAuBA,6BAA4C,GAC5C,iBAEA,aACA,mBAEA,UACA,QAUA,gBACA,2BACA,EAOA,eACA,uBACA,0BAEA,iCAAqC,CAErC,gBASA,iBACA,iBACA,WAIA,yBAEA,sDAEA,iCACA,IASA,qBACA,cACA,mBAEA,qBAEA,mBACA,MAGA,yBACA,EASA,gBACA,+BAEA,UACA,SAGA,oBADA,KAWA,WACA,OACA,4BAiCA,YACA,OACA,6BAQA,WACA,OACA,2BAYA,cACA,OACA,OACA,kBAEA,eACA,cACA,OAEA,aACA,iCACA,WACA,sBAEA,UACA,aACA,8CACA,MAEA,MACA,QAIA,sBAEA,oCACA,MACA,WAGA,wCACA,iBACA,UAGA,gCACA,OACA,SACA,QAAI,KACJ,IACA,aAGA,gCACA,EACA,CACA,CAWA,+BACA,+BAGA,sBACA,KAGA,YAEA,2EAEA,oBAEA,aAGA,QAEA,SACG,8DAEH,uBAEA,4BAEA,oBAGA,cAGA,QAEA,UACA,CAEA,CACA,QAaA,kCACA,+BAGA,sBACA,KAGA,YAEA,wFAGA,eAEG,uEAEH,uBAEA,iBAGA,YAEA,WAEA,CACA,QAgBA,iCAEA,YAGA,+BAaA,WAXA,gDAGA,gBAIA,oBAGA,mCA8BA,kBACA,uBAGA,OAKA,sBAOA,wCAHA,8CAEA,KAsBA,qBACA,IACA,4BACG,0BACH,MAEA,QACA,aACI,kBACJ,wBACI,mBACJ,uBAEA,qBAGA,eACA,8BACA,CAQA,sBACA,OAOA,wFAAkG,CAGlG,0DACA,UAQA,uBACA,OAOA,0FAAoG,CAGpG,0DACA,YASA,sCACA,4BAMA,iCAGA,yGAEA,mBAEA,mBACA,OAQA,6BACA,+BACA,QAQA,qBACA,IACA,kDAGA,sBAOA,WACA,QACA,iHAAK,YAIL,yCACA,KC1vBA,EACA,QASA,sBAOA,eAQA,6DACA,qBAgBA,qBACA,cAA0B,iBAC1B,qBAQA,kBACA,gCACA,IAQA,aACA,qCACA,MAOA,WACA,mBACA,IASA,oBACA,+CACA,IAWA,sBACA,GACA,cAGA,sEACA,6DAEA,WACA,KAOA,gBACA,YAEA,4DACA,UAQA,WACA,wDACA,IAQA,kBACA,uDACA,MAwBA,iBACA,SAEA,GAoBA,YAjBA,2CAGA,mCAGA,gCAGA,+BAIA,iCAGA,QAmBA,mBACA,2BAGA,YACA,aAEA,mCAGA,aAGA,+BAGA,WAGA,KACA,WAGA,OACA,KAyCA,uBACA,SACA,wCAEA,oCACA,mBAGA,0BACA,uBAEA,OACA,wBAGA,yCACA,KACA,aACA,MAGA,2CACA,qCACA,SAEA,OACA,wBAGA,oBACA,qBACA,EAEA,CACA,QAWA,aAAwB,GACxB,qBAEA,KACA,SAiBA,aAAyB,GACzB,cACA,OAEA,4BAEA,mBACA,gBAEA,IAeA,iBAA6B,GAC7B,cAEA,aAEA,kBAEA,kBACA,gBAEA,YAYA,yBACA,6BAGA,2CAEA,8BACA,sBACA,gBAAoB,MAAmB,WACvC,IAEA,KACA,sBACA,kCACA,OACA,OACA,iBAGA,gBACA,kCACA,OACA,OACA,iBACA,UAIA,6BAEA,kBACA,CAIA,CACA,QAYA,0BACA,6BAEA,gBACA,kBAAmB,MAAmB,WACtC,cAEA,sCACA,kBACA,CAOA,WAAkB,MAAmB,WACrC,SAEA,iBAAuB,MAAmB,WAC1C,SAEA,gDACA,wBAEA,EACA,CAEA,CACA,QAQA,oBACA,0CACA,IAaA,2CACA,IACA,wBACG,0CACH,YAGA,gCACA,GACA,iBACA,gEACA,MAWA,mCAEA,uBACA,iBAIA,qDAKA,qBAWA,kBACA,yDACA,iCACA,eACA,WACA,oBAEA,iBAEA,2CAEA,0CACA,YAMA,CACA,qDACA,+BACA,mBACA,YACA,oBAOA,8CAEA,iBAGA,uCACA,YAEA,aACA,4BACA,CAqCA,0CACA,YAKA,0BACA,aACA,SACA,SACA,gFAGG,mBACH,4BAEA,YAGA,sCACA,+BAHA,gBAKA,kCACA,GACA,CAYA,6BACA,qBACA,oBAEA,0CACA,UAEA,IAEA,sBAEA,wBACA,uBAEA,kBAEA,mBAEA,cACA,kBACA,wCAEG,gCAEH,gBACA,YACA,eAIA,2CAGA,+BAaA,4CAXA,UAIA,aACA,8BACA,8BAIA,YAWA,uCACA,MACA,SAEA,4CACA,UAWA,4CACA,WACA,SACA,kCAEA,+BAQA,0BACA,2BACA,IASA,mBACA,iDACA,UAQA,mBACA,6DACA,WAUA,8BACA,YACA,mBAEA,4BACA,YAiBA,2BACA,IAOA,0BACG,sFACH,0CAMA,cAGA,UACA,mCAIA,aAKA,gCAIA,iBAA6B,EAAQ,yBAErC,OADA,uCAUA,mBAA6B,MAAmB,6BAEhD,KADA,qCAQA,KACA,QASA,qBACA,sDACA,OCrzBA,EACA,QAIA,cAOA,6BAQA,qCASA,6CAWA,mCAGA,0CACA,OAIA,mEAEA,8DACA,QAAG,EAAG,UAGN,6CACA,MACA,cAGA,4BACA,kCAEA,YACA,QACA,kCAGA,wEAEA,6BACA,8BAAG,EAAG,UACN,OAWA,kBACA,0BACA,kCACA,QAaA,qBACA,cAEA,2CAEA,mCACA,oCAEA,SAaA,sBACA,cAEA,0CAEA,mCACA,oCAEA,SASA,yBACA,+CAEA,OAEA,kCACA,QAOA,gCACA,4BACA,SAKA,gBACA,6BACA,qCACA,uCACA,IAUA,kBACA,iCACA,MAQA,iBACA,iCACA,MAQA,gBACA,oEACA,KAQA,eACA,kEACA,KASA,mBACA,SACA,CACA,sBAGA,uBAEA,2BACA,aAYA,oBAA2C,CAAmB,cAC9D,SACA,CACA,uBACA,iBAGA,4BAEA,2BACA,YASA,wBACA,oCAEA,UACA,SAGA,iBAEA,cACA,gBACA,qCACA,0BAGA,cAIA,OACA,QA+BA,+BACA,kCACA,QAoBA,sBACA,SAEA,wCACA,gBAEA,4BACA,IAKA,SACA,QAIA,eAEA,YAAkB,EAAgB,IAClC,6BAGA,aACA,QAwBA,kBACA,iDACA,gDAEA,YACA,KAAG,6BACH,aACG,WACH,sBACG,eACH,mBACG,OACH,OAEA,mBACA,sBAGA,kBACA,QACA,CA2BA,qBAEA,OAIA,IACA,IAGA,EANA,UAOA,cAMA,kBACA,SACA,mBACA,kBACA,KAIA,UACA,uCAMA,uCAEA,KAcA,+BAGA,WACA,eAEA,aACA,uCACG,cACH,0BAKA,IAqGA,EAEA,SjQlhBA,QAIA,cAOA,qBAaA,gCACA,IAgBA,SACA,GAEA,MACA,yBAGA,4CACA,kCAGA,8BACA,SAiBA,aACA,UAEA,MACA,yBAGA,kCACA,oCAMA,aAkBA,UACA,GAEA,MACA,yBAGA,oDAEA,UACA,iBAGA,gBAEA,aACA,YAIA,MAiBA,YACA,GAEA,MACA,yBAGA,wCAEA,gBACA,gCAGG,cAIH,QACA,IAYA,0BACA,OAEA,2CAEA,kBACA,iBAGA,yBAEA,QAGA,CAIA,qEADA,UAcA,8BACA,gBACA,yBAEA,EAiBA,iCAdA,gBACA,6BAGA,cAGA,gBACA,OAGA,YAEA,UASoB,ECtNpB,QAMA,eAAgC,GAMhC,uBAAgC,YAChC,QAQA,oBAEA,kBACA,uDAIA,0BACA,aACA,+EACI,WACJ,0DAGA,2EAKA,sCACA,iDAEA,QAaA,mBACA,oBAGA,4CAGA,4CACA,WACA,0DACA,UACA,CACA,OAGA,2BAKA,6BACA,qBACA,mCACA,2BAEA,kCAAoC,cAEpC,KAEA,MACA,qBAUA,uBACA,oBAEA,+BAAgC,YAAmB,eAEnD,oBACA,qBAcA,4BACA,oBAGA,wEAAsF,cAGtF,qBACA,WACA,0DACA,0BAQmC,cACnC,GARA,CACA,OACA,QACA,eACA,oBAGA,qBAGA,MACA,qBAcA,wBACA,6CAEA,2CACA,4CAEA,sDAA2B,CAAY,kBAEvC,mBAIA,8BACA,WAEA,4DACA,QAGA,iBACA,CACA,oBACA,KAGA,mEACA,4CAEA,cAEA,qCACA,SACA,CACA,eACA,gBACA,iCACA,yBAIA,qEACA,4DAEA,cAEA,MACA,sBAWA,wBAEA,qBAIA,kDAGA,iBAGA,gCACA,SACA,OAOA,SALA,4BAEA,8BAA0B,cAA0B,oBAEpD,cAIA,oCAGA,2DAEA,mCACA,UAGA,iBAAiB,0CAEjB,kCACA,cAEA,MACA,sBAUA,2BAEA,kBAIA,mDAEA,qCAA4C,cAA0B,oBAEtE,oBACA,sBAUA,2BACA,SAEA,wBACA,WAEA,aAEA,2BACA,2BAEA,eAEA,CACA,QAUA,+BACA,SAEA,wBACA,aAGA,SACA,QAUA,gCACA,SAEA,eAEA,sBACA,+BAGA,uBACA,2BAGA,gBACA,QAWA,kBACA,yCAKA,8BAEA,iCACA,eAOA,sBACA,2BACA,iCACA,UAmHA,EAUa,SCxjBb,QAyDA,mBAOA,MAQA,mCAQA,kBAGA,aAEA,YAcA,aACA,0BACA,0CAEA,0CACA,KAEA,OACA,KAWA,YACA,0BACA,0CAEA,4CACA,GAEA,OACA,KASA,kBACA,sBAEA,eACA,wBAIA,WAQA,iBACA,qBACA,MASA,iBACA,+BACA,kBAUA,WACA,uBACA,WACG,YACH,oBAGA,kEACA,OAGA,qCACA,IAEA,uBACA,wBACA,CACA,KACA,KAGA,IACA,GAEA,QAEA,CACA,QAOA,aACA,qBACA,iBAEA,kBAYA,gBACA,OAEA,yBACA,gCACA,UAIA,oCACA,IAYA,eACA,OAEA,yBACA,6BACA,QAIA,oCACA,IAWA,mBACA,cAEA,wDACA,IAWA,kBACA,cAEA,qDACA,IAyDA,aACA,IACA,yBACG,YACH,gDACG,uBAGH,+DACG,oBACH,6CACG,kBACH,iCACG,oCACH,kBACA,YAEA,MACA,aACI,oBACJ,aACI,oBACJ,gBAOA,iCAKA,8JACA,MAAG,SAEH,8BAOA,4BAEA,6EAaA,mBACA,SAGA,4BACA,MACA,8BAGA,wHACA,QAEA,WAGA,8BAIA,gBAEA,4BACA,aAGA,uCAEA,4BAA8B,CAC9B,kBAYA,cACA,IAMA,wBACA,QAIA,kHAEA,iBAIA,gDAEA,oBACA,aAGA,YACA,4CACA,kBAEA,wCACA,kBAGA,gDAA8B,CAC9B,kBAQA,gBACA,oBACA,MAUA,gBACA,oBACA,SAOA,mBACA,oBACA,MAQA,gBACA,oBACA,MAWA,mBACA,MACA,8BAEA,uCAAmC,mBAEnC,kBAYA,kBACA,MACA,kCAEA,sCAAmC,mBAEnC,kBASA,qBACA,IACA,0BAGA,mBACA,0BACA,kBAEA,0CACA,IA8BA,qBACA,YAEA,yCACA,cAGA,aAGA,0BACA,uCACA,kBAIA,mBAGA,+BACA,eAEA,QACA,CAaA,0CACA,YACA,4BAEA,gCACA,uCACA,kBASA,cACA,MACA,oCACA,mBAQA,eACA,WAAkB,iBAAyB,OAC3C,6BAQA,iBACA,QACA,6GAAM,qCAIN,YAQA,mBACA,MACA,4BAEA,WAOA,YACA,cACA,KA4BA,EAKA,SChuBA,mBAMA,iBACA,CAEA,mBACA,KAOA,SACA,MACA,eA4EA,EChGA,SAEA,SAyBA,aACA,QAMA,eAMA,iBAEA,sDACA,sDACA,KASA,kBACA,wBACA,WAcA,aACA,wBACA,MAWA,YACA,wBACA,KAQA,iBACA,wBACA,UASA,kBACA,wBACA,WASA,iBACA,wBACA,UAUA,0BACA,wBACA,mBAOA,cACA,wBACA,OAOA,YACA,wBACA,WAWA,mBACA,wBACA,kBAWA,kBACA,wBACA,iBAYA,gBACA,wBACA,eAYA,eACA,wBACA,cA8BA,oBACA,wBACA,mBASA,qBACA,wBACA,oBAaA,yBACA,wBACA,wBAKA,UACA,iBACA,SAOA,mBACA,wBACA,kBAUA,gBACA,wBACA,eAQA,gBACA,wBACA,eAQA,gBACA,wBACA,eAcA,eACA,iBACA,aAkBA,cACA,iBACA,YAWA,mBACA,iBACA,iBAYA,oBACA,iBACA,kBAQA,uBACA,wBACA,sBAgBA,mBACA,wBACA,iBAaA,mBACA,iBACA,iBASA,gCACA,OACA,KASA,+BACA,UACA,cACA,EA2CA,SAEA,mBAGA,eACA,CAMA,sBAMA,WAUA,uCAKA,kCAKA,QAQA,uDAGA,gCACA,qBACA,+BAQA,gCACA,QACA,yGAAO,CAIP,SAEA,gDAEA,MAGA,8BACA,SAEA,kDACA,2CACA,MAAW,aAA4B,+CAEvC,aACA,2BAEA,MACA,wBAEA,6CAAgC,CAEhC,kBAAG,EAAG,UACN,UAEA,kBACA,sBAEA,wEACA,WAEA,aACA,wDACA,KAEA,YACA,uDACA,GAEA,iBACA,gDACA,CAOA,kBACA,OACA,sBAOA,0BACA,yCACA,IAGA,UACA,WAAkB,iBAAyB,OAC3C,oBAGA,cACA,eAEA,aACA,cACA,mBAEA,iCAEA,kBAEA,gBACA,8CACA,kBAEA,eACA,6CACA,kBAEA,aACA,OACA,kBACA,oBAEA,cACA,OACA,mBACA,oBAEA,kBACA,4BAEA,8BACmC,eAAnC,IACA,iBACA,CAEA,mBACA,6BAEA,8BACmC,eAAnC,IACA,iBACA,CAEA,kBACA,SAIA,IAOA,uCALA,OACA,+CAGA,sBAGA,kBACA,qCAQA,YACA,QACA,4GAAK,CAIL,wCAGA,eACA,0BAEA,oBAGA,qBACA,MACA,qBAEA,YACA,oBACA,QAEA,cACA,cAIA,iCAEA,OAQA,iBACA,SAEA,sCAMA,UAKA,oBAHA,uHAKA,mBAaA,oCAZA,MAGA,2CACA,6CACA,CACA,6BAGA,gBAEA,IAQA,qBACA,iBACA,uCAEA,iBAEA,gCACA,oBAGA,gCACA,mBACA,uBACA,kCAKA,gBAGA,4BAIA,yBACA,4BACA,cAKA,iBACA,aACA,mBAKA,QACA,yCAAmC,iBAEnC,iBAWA,wBACA,oBAEA,mBAEA,yCAGA,uBAGA,sBAIA,qBAGA,iCAGA,YAcA,yBACA,oBAEA,uBAMA,oEAGA,iBAIA,+BAGA,aAQA,oBACA,YAEA,2BAEA,kBAKA,iBAGA,0CAEA,cAGA,2BAEA,MAEA,CACA,QAMA,wBACA,iCAEA,8BACA,yBACA,uCACA,qBAEA,kBACA,gBAGA,CAQA,4BACA,cACA,iCAEA,aAEA,0BAEA,cAGA,iCAEA,uCACA,MAKA,sBACA,oBAEA,gBACA,CAAG,KAGH,iCACA,qCAGA,kBAEA,wBAKA,aAKA,kCACA,UAEA,QACA,QACA,kBAKA,SACA,UAEA,QACA,QACA,cAMA,iBAEA,uBAEA,CACA,QAOA,4BAGA,YAGA,2CAIA,2CACA,oCACA,KAGA,WAEA,cAGA,uCACA,IAEA,CAQa,KEh+Bb,ID9BA,WACA,OACA,YAEA,EIOA,QAMA,eAOA,MAQA,kBAQA,mBAQA,sCACA,aAGA,4BACA,aACA,uBAKA,qCACA,uBACA,0CACA,kCACA,uBACA,EAAG,EAAG,UAGN,8EAGA,wDAA6D,UAC7D,oDAAmD,UAGnD,oDAA+D,UAC/D,oDAAqE,UACrE,oDAAyE,UAKzE,8EAEA,IACA,+BAGA,uBAEA,MAKA,oBAJA,+BACA,qBAEA,mBAEA,EAMA,UACA,WACA,eACA,eACA,EyP/GA,SACA,QAWA,oBAKA,MAQA,oCAMA,sBAEA,cACA,+BAEA,WACA,yCAGA,aASA,qBACA,qBACA,SACA,0BAGA,QAQA,OACA,sBACA,MAcA,aACA,cA6CA,UAKA,yBAIA,cACA,gBAqBA,CAGA,gFAHmF,CAEnF,YAEA,EAEA,cACA,yBACA,GAEA,SACA,kCACA,SAEA,UAQA,iBAGA,kIAAS,UAIT,eACA,IAGA,WACA,WACA,YAEA,QACA,GACA,EAEA,cACA,OAIA,2CACA,MAEA,cAaA,OACA,YACA,mBACA,GACA,SA7IA,YACA,aACA,OAEA,KACA,OACA,kBAuHA,SAEA,YACA,QACA,QAIA,0BACA,IAEA,CAhIA,SAwBA,SAGA,+GAAyB,CAEzB,oCAAwD,CACxD,YAEA,sBACA,aAEA,MAyGA,UACA,oBACA,WACA,sBACA,yCAEA,0BACA,MASA,UACA,eAEA,mBAMA,6BAWA,UACA,KACA,qFAAK,uDAGL,0BAEA,SCjRA,EACA,QAIA,cAOA,mBACA,IAQA,SACA,gBACA,QAQA,OACA,uBACA,MAOA,gBACA,cAEA,UAOA,+EAA6F,CAG7F,0BACA,KAOA,SACA,sBACA,MAOA,YACA,sBACA,QASA,oBACA,8BACA,WAKA,UACA,qBACA,aAEA,SACA,SzP7FA,qDAoDA,ICnDA,QAMA,eAOA,kBAqBA,4BACA,KAOA,QACA,eAGA,YAMA,iCALA,kBAIA,UyP/BA,EACA,QAIA,cAUA,sBACA,IA4BA,SACA,IAGA,6BACA,2CAMA,iCACA,2BAMA,UALA,yBAEA,YAIA,OA+BA,UACA,2BAEA,aACA,YAIA,wBAKA,wBACA,OA8BA,aACA,cACA,+BAEA,sCAGA,mCAOA,cA8BA,YACA,2BAEA,OACA,gCAEA,sCAGA,YAGA,UAUA,iCACA,SACA,CACA,mBACA,WACA,UAGA,QAEA,4BAEA,oBAIA,yBAGA,kBAEA,yBACA,kBAGA,kBAEA,yBACA,iBAGA,QACA,QAaA,uBAEA,UAGA,aACA,QAMA,SAJA,cAKA,uBAGA,gCACA,uBAGA,wBACA,mBAGA,gBACA,QAQA,EACA,QAIA,cAOA,sBAQA,uBACA,eACA,eACA,gBAEA,KAuBA,OACA,kBACA,YAGA,yBACA,aACA,oBAGA,KAsBA,QAEA,kBACA,4BAGA,oCACA,uBACA,sBAEA,SACA,OAEA,QAIA,CACA,QAoBA,WACA,kBACA,YAGA,yBACA,aACA,wBAGA,KAmBA,UACA,kBACA,YAGA,yBACA,aACA,uBAGA,KAYA,UACA,iBACA,WAEA,iCACA,oCAeA,0BAGA,wFACA,SACA,CAWA,WACA,iBACA,WAEA,yBACA,wDACA,8BAGA,iDAEA,YACA,OAEA,QAAI,KACJ,WAEA,UACA,iBAGA,SACA,GAEA,QAGA,CACA,QASA,cACA,iBACA,WAEA,yBACA,wDACA,8BAGA,kDACA,QACA,QAGA,SASA,aACA,iBACA,WAEA,yBACA,wDACA,8BAGA,iDACA,QAAI,KACJ,WAEA,OACA,UAEA,SAEA,CACA,ExP/ZA,QAIA,cACA,yBAEA,iBACA,4BAEA,kDACA,eACA,GAAG,EAAG,UAEN,wCACA,eACA,8BACA,GAAG,EAAG,UACN,WAYA,cACA,SAEA,gIACA,CAIA,wCACA,eAGA,YACA,aA0BA,YACA,UAEA,4HACA,CAIA,2DAEA,YACA,aAOA,iBACA,aACA,2BAGA,gBACA,oBAQA,iBACA,IAEA,YAEG,+CACH,cAIA,UAGA,UACA,mBAWA,gBACA,cACA,gBAcA,WACA,cAEA,+BACA,QAYA,WACA,cAEA,+BACA,QAcA,YACA,cAEA,+BACA,SAgBA,gBAMA,iBACA,uBAiBA,oBACA,8BAMA,mCACA,WAkBA,qBACA,oBACA,WACA,eAEA,eAMA,8BAGA,qGAMA,8BAGA,0GACA,eAEA,kBACA,uBACA,gBAIA,SACA,QAyCA,iBACA,iCAIA,CAIA,cAEA,OACA,wBACA,SAEA,UAAG,EAAG,UACN,QAyCA,qBACA,qCACA,SAEA,OACA,wBACA,SAEA,SAAG,EAAG,UACN,QAUA,mBAEA,oBACA,2BACA,WAMA,mDAA4D,CAC5D,kBAAI,EAEJ,iBACA,cACA,YAMA,OACA,QAcA,+BACA,MAEA,+EACG,gBACH,WAGA,qBACA,iBACA,iCAEA,QAIA,QAGA,CACA,QASA,oBACA,SAEA,oBACA,SACA,UACA,gBAEA,qBACA,kCACA,aACA,mBAGA,iBAGA,kBAGA,mBACA,mBAEA,YAEA,CACA,QAsBA,qCAEA,sBACA,eAGA,iBAEA,cACA,0BAAqC,2BAGrC,0BACA,yBAAoC,CAGpC,0CACA,kCACA,mBAEA,oCACA,2BAGA,wCACA,yBAEA,aAEA,OACA,KAYA,uBACA,aAEA,UACA,SACA,gBAIA,kCACA,kBAGA,UACA,MAEA,OACA,KAQA,gCACA,kBACA,kBACA,wBACA,uBAIA,0BACA,8CAEA,gBACA,CAKA,cACA,2BACA,IAKA,WACA,SACA,UACA,4BAEA,iBACA,gBAGA,iBACA,QAGA,iBACA,QAGA,iBACA,QACA,QAGA,iBACA,QACA,QAGA,aACA,sBAQA,qCACA,WAEA,oCACA,MAUA,iBATA,KACI,aACJ,cAEA,sDACA,EAEA,CAGA,EAwRA,SACA,QAMA,eACA,OAIA,wBACA,qBACG,WAGH,8BAAoC,CAGpC,uDACA,uBAGA,sBACA,QAOA,aACA,oBACA,MAOA,WACA,uCACA,EASA,oBACA,2BACA,WA0BA,QACA,gBAEA,KAGA,qCADA,SAQA,WACA,aACA,SAOA,YACA,8BACA,KAeA,YACA,8CACA,WA+FA,ECttCA,QAQA,eAAgC,GAUhC,wBAUA,uBAOA,sCAIA,4DACA,oEACA,8EACA,KAgBA,yBACA,WAIA,mCAIA,2BAGA,0CAGA,uCAGA,QAAS,CAAa,uCAGtB,kBAGA,8BAEA,MAGA,0EACA,iBAIA,sBACA,OAGA,CAWA,yBARA,yBAGA,kCACA,8BAGA,MAOA,kBACA,uBAA+B,qCAE/B,eACA,8CACG,oBACH,gCAEA,mDAIA,iCAQA,uCAGA,+FAAU,uCACV,YAMA,sBACA,SACA,aAEA,gDACA,cAEA,oBACA,8CACA,QAEA,YAEA,OAAU,cACV,cAMA,2BAEA,mCAGA,0BACA,SAIA,eACA,aAAW,CAIX,uDACA,kBAIA,wCAOA,kCACA,2BACA,qCAIA,cACA,YACA,kCAEA,OAUA,uBACA,IAEA,0BACA,iBACA,oCACA,8BACA,UAKA,cAEA,sBA0CA,EAQ0D,SEzU1D,QAQA,iBAOA,MAQA,aAUA,wBAQA,sCACA,aAEA,wDAA6D,UAQ7D,wCACA,UAQA,8CAAoD,UACpD,mDAAkE,UAClE,4DAA2E,UAE3E,yBACA,OASA,cAEA,2CACA,WAWA,aAEA,cAGA,gCACA,SAYA,UAEA,YAEA,cAIA,gBACA,yBAEA,0CAEA,6CAGA,SAEA,eACA,kCAEA,uBAGA,CAGA,mBADA,iBAgBA,iBACA,wBAQA,qBAGA,yHAEA,8DACA,eACA,aAEA,WACA,SAcA,gBAEA,6BAEA,uDACA,gBACA,+DAEA,gCACA,2BACA,aACA,EAYA,mBAEA,wBAGA,sBACA,YAgBA,qBACA,0BACA,2BAEA,eAKA,WAQA,EAOA,SClOA,QAIA,cAKA,4BACA,IAcA,cACA,4BAMA,oBAGA,0HACA,QA+CA,OACA,cAEA,yBACA,OACA,OAEA,SACA,IAEA,EAyEA,oBAEA,0BAGA,gBAAe,SAAc,SAC7B,0BACA,OACA,CACA,QACA,kBAIA,WA+JA,sBAEA,0BAGA,gBAAe,SAAc,SAC7B,0BACA,OACA,CACA,OACA,mBAIA,WA6GA,wBAEA,0BAGA,gBAAe,SAAc,SAC7B,0BACA,OACA,CACA,OAIA,UAaA,mBACA,iCAEA,UAMA,gBAGA,4FACA,QA4BoB,EChkBpB,QAOA,eASA,MAQA,uCA2CA,uBASA,YACA,CAQA,SACA,YAEA,SASA,sCANA,mBAGA,eAEA,qBAQA,uBACA,OACA,kCASA,mBACA,mBACA,YC/GA,EACA,QAWA,eASA,iBAQA,oBAGA,4BAEA,IAOA,oBACA,aACA,aAQA,iBACA,uBACA,MAQA,gBACA,uBACA,SAQA,cACA,OACA,oBAQA,WACA,OACA,KAQA,aACA,OACA,KAUA,MACA,OACA,qBAQA,YACA,uBACA,UAOA,cACA,8BACA,WAQA,iBACA,uBACA,eAUA,uBACA,uBACA,qBAOA,UACA,OACA,EAaA,iBACA,OAEA,cACA,uBAGA,kBACA,QAqBA,iBACA,uBACA,gBAQA,SACA,SAEA,uBACA,mBAGA,UACA,QASA,mBACA,SAEA,YACA,UAEA,eAGA,uBAIA,mBACA,UAQA,gBACA,wBACA,aAUA,kBACA,SAEA,eAEA,QACA,mBAGA,mBAGA,oBACA,iBAWA,uBACA,wBAEA,2BACA,iBAGA,KACA,QAMY,KmPzSZ,IjPUA,aACA,OACA,QAEA,EiPbA,mBAoBA,uBACA,CAQA,uBAQA,wBAQA,+BAQA,gCACA,MAKA,WACA,OACA,sBACG,eACH,qBAEA,kBAEA,iBAOA,QACA,oEACA,YAOA,cACA,gFACA,EAKA,YACA,sCACA,4DASA,eAGA,iIAAM,gCAIN,8EAQA,UACA,QACA,qFAAM,iBAGN,KACA,CAKA,WAEA,uBAEA,uCAEA,SAKA,uBACA,OACA,2CASA,qBACA,oEACA,YCxJA,EACA,mBAYA,qBACA,CAOA,gCAOA,2BAOA,iCAUA,2BACA,WAKA,WACA,OACA,MAOA,QACA,wFACA,aAGA,uBADA,UAiBA,qBACA,+EACA,QAOA,cACA,iFAEA,0FACA,GAGA,uBADA,UAMA,YACA,6BACA,6BACA,6BACA,6BAKA,cAMA,QACA,QAEG,4GAMH,eACA,QAEG,iHAMH,aACA,QAEG,wJACH,2FACA,yCAEA,wEAMA,aACA,QAGA,sGAEA,CAKA,WACA,yEACA,eAKA,uBACA,OACA,sCASA,qBACA,uBACA,kCAEA,6CAEA,aAKA,SAJA,aAGA,cC9LA,EACA,mBAMA,eACA,aACA,cAKA,gBACA,MACA,gBAKA,WACA,OACA,UAOA,cACA,iFAEA,iFACA,EAKA,YACA,UAEA,sCACA,sBAGA,oGACA,sBAEA,kFAKA,uBACA,OACA,0CC3DA,EACA,mBAIA,WACA,OACA,QAOA,cACA,iFAEA,iFACA,EAKA,YACA,UAEA,sCAQA,sBAEA,kEAKA,uBACA,OACA,wCCpCA,EACA,mBASA,mBACA,CAQA,0BAQA,wCACA,MAKA,WACA,OACA,QAOA,QACA,2CAEA,gDACA,YAOA,cACA,qCACA,sBAEA,wEACA,EAKA,YACA,uBAEA,wCAMA,YACA,QAGA,oEAKA,WAKA,cACA,0CAEA,qBACA,WAKA,uBACA,OACA,wCASA,qBACA,SAEA,oBACA,QAEA,eAGA,uBAIA,yDACA,YChIA,EACA,mBASA,uBACA,CAQA,cAQA,6CAQA,2CAQA,UACA,UAKA,WACA,OACA,QAOA,QACA,wEACA,YAOA,cACA,oFACA,EAKA,WACA,8BAEA,0CACA,YAKA,SACA,eAEA,SAGA,gBADA,UAMA,uBACA,OACA,wCASA,qBACA,OACA,UACA,0CACA,0CACA,aACA,UAEA,YC3GA,EACA,mBACA,WACA,OACA,MAOA,QACA,oBACA,YAOA,cACA,gCACA,EAEA,WACA,CAKA,uBACA,OACA,oCChCA,EACA,mBAUA,qBACA,CAOA,cAOA,gBAOA,eACA,SAKA,WACA,OACA,QAOA,QACA,mFACA,YAOA,cACA,+FACA,EAKA,YACA,uBAEA,eAMA,sBACA,QAEG,oIAMH,aACA,QAGA,gGAKA,WACA,uBAEA,sBACA,OAKA,uBACA,OACA,wCASA,qBACA,+DACA,YC9GA,EACA,mBAYA,uBACA,CAQA,cAQA,YAQA,WAQA,gBACA,UAKA,WACA,OACA,sBACG,mBACH,qBAEA,sBAEA,qBAOA,QACA,mEACA,YAOA,cACA,+EACA,EAKA,YACA,4CASA,yBACA,QACA,mFAAK,yBAIL,uEASA,cAGA,qIAAK,yBAIL,iFAQA,UACA,QACA,yFAAK,yBAGL,KAKA,WACA,CACA,qDAIA,2CAFA,SAOA,uBACA,OACA,+CASA,qBACA,iBAOA,WACA,QACA,2HAAK,CAIL,2EACA,YC/KA,EAEA,YACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,MAMA,cACA,QAQA,qBACA,0BACA,aCpCA,EAEA,YASA,KACA,QAQA,qBACA,cAOA,kBACA,QACA,yEAAK,QAIL,+BAEA,eAEA,uBACA,6BAIA,wBACA,0BACA,qBAIA,MACA,QAOA,mBACA,UACA,YCnDA,EACA,QAIA,cAQA,YAQA,qBACA,EASA,kBACA,OACA,6CAGA,YACA,IAKA,mBACA,qBACA,yBAEA,GAQA,yBACA,CACA,SAcA,gBACA,CAIA,eAHA,qBAEA,SAQA,QACA,kBAEA,gCACA,4BAGA,SACA,QAaA,cACA,kBAEA,uCACA,4BAGA,4BAEA,oBAAkB,iBAA6B,OAC/C,wFAGA,EACA,QAOA,SACA,YAEA,MAMA,sCAHA,mBAEA,OAUA,uBACA,OACA,0BACA,EAEA,GClJA,aACA,mBAIA,WACA,OACA,WAQA,UACA,kDACA,IAQA,YACA,uDACA,IAQA,YAEA,SACA,mBAGA,aACA,OAEA,yBACA,WAIA,+CACA,oBAGA,qCACA,kBAIA,YACA,mBAEA,iBAGA,QACA,IAEA,yBACA,CACA,SAKA,SACA,eAEA,SAGA,gBADA,QAMA,uBACA,OACA,mCACA,EAEA,GC3FA,aACA,mBAIA,WACA,OACA,OAOA,eACA,+DACA,IAiBA,sBACA,4BACA,IASA,qBACA,+EACA,IAKA,yBACA,CACA,SAKA,uBACA,OACA,+BACA,EAEA,GChEA,aACA,mBAIA,WACA,OACA,OAQA,eACA,mEACA,IAYA,uBACA,4BACA,IAKA,yBACA,CACA,SAKA,uBACA,OACA,+BACA,EAEA,GCjDA,aACA,mBAIA,WACA,OACA,MAOA,cACA,wDACA,IASA,qBACA,+DACA,IASA,qBACA,+DACA,IASA,qBACA,4BACA,IAKA,yBACA,CACA,SAKA,uBACA,OACA,8BACA,EAEA,GClEA,aACA,mBAIA,uBACA,OACA,gCACA,EAEA,GCVA,aACA,mBAIA,WACA,OACA,QAKA,yBACA,CACA,SAKA,uBACA,OACA,gCACA,EAEA,GCtBA,aACA,mBAIA,WACA,OACA,MAOA,YACA,cAEA,kFACA,IAOA,cACA,cAEA,2CACA,CAUA,uBACA,4BACA,IAQA,qBACA,4BACA,IAKA,yBACA,CACA,SAKA,uBACA,OACA,8BACA,EAEA,GCrEA,aACA,mBAIA,WACA,OACA,QAOA,eACA,+DACA,IAQA,qBACA,4BACA,IAKA,yBACA,CACA,SAKA,uBACA,OACA,gCACA,EAEA,GC3CA,aACA,mBAIA,WACA,OACA,QAQA,eACA,6DACA,IAQA,YACA,0DACA,IASA,uBACA,4BACA,IAKA,yBACA,CACA,SAKA,uBACA,OACA,gCACA,EAEA,GCxDA,aACA,mBAIA,uBACA,OACA,oCACA,EAEA,GCLA,gBtQwCA,IA+eA,eAAqC,CAAkB,aACvD,OAEA,EACA,qBACE,gBACF,qBACE,mBACF,qBACE,uBACF,qBACE,gBACF,qBACE,gBACF,qBAEA,cAIA,SACA,oBACG,gBACH,oBACG,mBACH,oBACG,uBACH,oBACG,gBACH,oBACG,gBACH,oBAEA,cAIA,cAEA,qBACA,cAGA,EAxhBA,SACA,iBAGA,uBAEA,WAGA,gDAGA,wFAEA,aACA,GAEA,EAEA,sBAEA,0BAEA,mBAIA,uCACA,WAGA,gDAGA,0CACA,wBACA,iBACA,iBAEA,yBAGA,gBACA,GAGA,sBAEA,qBAEA,+DAGA,wCACA,4CAEA,aAIA,2BACA,kBAIA,4CACA,4CAIA,0CAMA,OAQA,aAPA,uDACM,cACN,4BAIA,MAGA,UAEA,QAEA,EAEA,0BAEA,mBAGA,qCAEA,0DAGA,eAKA,sBAGA,4BAEA,yBAKA,yEACA,kEAOA,gFAGA,WAIA,2DACA,kEAEA,wBAIA,eACA,4CAEA,aAGA,0BACA,CAEA,mBAIA,mDACA,mCACA,2DACA,YAKA,mBADA,aAGA,EAEA,mBAEA,mBAGA,kCAEA,qBAEA,WAGA,mFAEA,cACA,GAEA,EAEA,sBAIA,gDAEA,WAEA,gCACA,eACA,qBAEA,6BAIA,oBACA,GAEA,EAGA,qCACA,WACA,+BAEA,uGAEA,cACA,GAGA,mBAEA,qBAEA,WAEA,iBACA,gGAGA,MACA,gGAGA,IACA,GAEA,EAEA,sBAEA,0BAIA,yCAEA,WAEA,qBACA,UACA,sBAEA,8BAIA,oBACA,GAGA,oBAEA,WAEA,sBACA,8EACA,uBACA,mBAEA,eACA,8EACA,uBACA,mBAEA,OACA,GAGA,iBAGA,uBAEA,wDACA,gCAEA,iFAGA,iDAEA,qBACA,cACA,2BACA,sEACA,eAGA,iCAEA,SACA,GAEA,EAEA,sBAEA,0BAEA,mBAIA,uCAKA,0DACA,4DAIA,iBAIA,gCAIA,8CAGA,gCACA,wBACA,iBACA,iBAEA,yBASA,4BAGA,iBAUA,4CACA,mCACA,oCAIA,2BAGA,6GACA,0EAEA,cAMA,sCACA,mEACA,gEAEA,uBAGA,2EACA,kEAEA,yBAaA,qEAEA,iCAIA,wGACA,0EAEA,cAeA,WACA,qCACA,iBACK,yBACL,kBAMA,eAIA,OAEA,kCAEA,8DACA,kEAGA,iBACA,kIAEA,oBACA,KAGA,WAEA,uCAEA,qDACA,kEAQA,sBACA,eAGA,QACA,yDACA,SAEA,aAMA,mBAIA,MAGA,uBAGA,cACA,SAEA,OuQtiBA,ItQIA,eACA,QACA,MAEA,OACA,eAEA,OACA,QACA,MAEA,oBACA,OAEA,YACA,SACA,cAEA,KACA,QAEA,UsQFA,KrQfA,GsQHA,WACA,eACA,KAEA,ECYA,MChBA,GCDA,eACA,aACA,iBAEA,gBACA,OACA,QACA,MAEA,QACA,QACA,CAEA,ECZA,GFCA,eACA,IACA,YAEA,qBACA,MAEA,OACA,UACA,SAGA,gBACA,CAEA,EGlBA,GDGA,aACA,oBACA,WAEA,EEPA,GDCA,eACA,YACA,MAEA,OACA,cACA,MAGA,SACA,QAEA,EEfA,GDGA,aACA,YACA,MACA,SAEA,SACA,cAEA,UACA,QAEA,EEbA,GDAA,WACA,mBACA,OACA,KACA,CAEA,EELA,GDAA,aACA,UACA,MAEA,EEYA,GDHA,iBACA,QACA,EACA,KACA,SACA,SACA,OAEA,UACA,GAGA,oBAGA,WACA,KAEA,QACA,QApBA,MAqBA,KACA,OAEA,WACA,kBACA,OACA,SAEA,uBACA,WACA,QACA,KACA,QACA,iBAGA,SACA,OACA,KACA,aAEA,OACA,CACA,QAEA,qBCzCA,OACA,iBACA,UACA,EAEA,M/QzBA,KAWA,EgRNA,G/QAA,WACA,gBACA,KAEA,EgRRA,GDKA,aACA,wBACA,UACA,KACA,EAEA,EEXA,GDCA,WACA,QACA,YAEA,MAIA,4BAHA,QACA,KACA,IAGA,KCDA,WACA,mBACA,OACA,YACA,IAbA,eAeA,MACA,GARA,eAUA,WACA,KACA,CCAA,CClBA,KCDA,GDEA,WACA,WACA,UAEA,OACA,qBAEA,IACA,QAEA,EEVA,GDDA,aACA,mBACA,OAGA,UACA,2BACA,WACA,CAEA,EnRhBA,GoRQA,WACA,OACA,+BACA,mBAEA,eACA,eACA,SACA,CAEA,KpR2BA,sBAsBA,GAEA,SqRpEA,aAIA,0BASA,gBCKA,GDJA,WAEA,IACA,mBAEA,YACA,2BAEA,WACA,0BApBA,GAqBA,MAEA,EE1BA,GDmBA,WACA,mBACA,KAEA,KCpBA,yEASA,4BACA,OACA,GAIA,yCAHA,6BACA,KACA,ICZA,GvRLA,GuRMA,WACA,gBACA,KAEA,KvRTA,sDASA,QwRXA,MCQA,GDCA,WACA,wBACA,MAEA,iBACA,0BANA,GAOA,MAEA,EEMA,GDdA,aACA,eAEA,gBACA,MAEA,gBACA,cAEA,iBACA,aAEA,ExRjBA,GyRoBA,eACA,sBACA,cACA,eAEA,ECJA,GzRVA,eACA,eAEA,iBAEA,MAEA,OAHA,SAIA,UACA,sBACA,QAEA,QACA,IACA,CACA,KAEA,0BACA,oBACA,wBACA,MAEA,E0R/BA,GDoBA,aACA,iBACA,UAEA,EElBA,GDKA,aACA,eACA,SAEA,oBACA,OACA,2BACA,MACA,sBAlBA,CAmBA,CAVA,EAWA,CAEA,EExBA,GDQA,WACA,CACA,QAEA,EEMA,GDjBA,WACA,mBACA,OACA,QACA,CAEA,EEHA,GDeA,WACA,wBACA,KAEA,EEAA,GDlBA,WAGA,OAGA,uBAGA,WACA,mBACA,gBACA,IAEA,MACA,KAEA,qBCEA,OACA,YACA,SAEA,UACA,yBACA,OACA,ECZA,sBACA,OACA,YACA,SAEA,UACA,gBACA,mBACA,ECRA,GCAA,GDCA,eACA,kBAEA,8BAGA,eACA,QAFA,EAIA,EEzBA,GDgBA,eACA,kBAEA,8BAGA,QACA,eACA,MAHA,EAKA,EEAA,GDzBA,iBACA,aACA,cAEA,SACA,UAEA,kBACA,kBACA,kBACA,MAEA,EErBA,GCKA,eACA,CASA,MARA,SACA,eAEA,UACA,eAGA,YAGA,ECTA,GFqBA,WACA,qBAFA,YAGA,CAEA,EGNA,GDlBA,iBACA,SAEA,aACA,MACA,eAEA,yBACA,MACA,MAEA,cACA,MACA,OAEA,OACA,QAEA,EEMA,GC3BA,eACA,aACA,cAEA,QACA,YACA,UAGA,gBACA,CAEA,ECPA,GCGA,WACA,sBACA,SAEA,ECdA,GCYA,eACA,WACA,eACA,WACA,OACA,MACA,WACA,WAEA,QACA,OACA,KACA,cAEA,eACA,+BACA,sBAEA,YACA,KAEA,UACA,MAEA,GACA,8BACA,OACA,SAEA,uBACA,EACA,GACA,SACA,SACA,KACA,SACA,OACA,QACA,GACA,WAEA,kBAEA,MAEA,MAEA,UACA,OACA,CACA,CACA,QAEA,ECnDA,GFbA,WACA,gBACA,EAEA,mBEUA,OACA,mCACA,GACA,MACA,ECGA,oBACA,OACA,QAEA,oBACA,MAEA,WAEA,yBACA,QACA,OACA,ECfA,oBACA,OACA,QAEA,oBACA,MAEA,WAEA,yBACA,GACA,eACA,ECtCA,YAGA,gBAgBA,KCGA,GCbA,aACA,SACA,OAGA,qBACA,UACA,WAEA,ECbA,GCIA,iBACA,aACA,MAEA,OACA,YACA,QAGA,gBACA,CAEA,WDbA,gBAYA,OEAA,GFCA,iBACA,OACA,WACA,MACA,OAGA,mBAEA,QACA,iBACA,IACA,SAEA,QACA,kBACA,mBAEA,eAGA,GACA,QAEA,EGpBA,GDJA,aACA,0BACA,OAEA,SAEA,KEFA,OChBA,GCAA,aACA,YACA,MAEA,SAEA,SACA,YAJA,oBAMA,MACA,QAEA,ECdA,GFGA,aACA,mCACA,GAEA,WEJA,gBAUA,OCZA,GDaA,aACA,sBACA,MAEA,OACA,OACA,oBACA,IACA,QACA,kBAEA,oBACA,OACA,QAEA,QACA,qBAEA,OAEA,eAEA,MACA,CACA,CACA,QAEA,EEjBA,GDtBA,aACA,UACA,OACA,aACA,WACA,QAEA,QACA,aACA,WACA,QAEA,qBACA,kBACA,IACA,SACA,OACA,SAEA,kBACA,kBACA,IACA,SACA,OACA,UAEA,CACA,OACA,EAEA,qBCPA,QAEA,oBACA,IAEA,QAKA,4BAJA,gBACA,IAAG,GAEH,WCXA,YC3BA,gBAwBA,QCvBA,GCkBA,iBACA,GAEA,eACA,eACA,IACA,QACA,WACA,QAEA,gBACA,gBACA,OACA,QACA,aACA,WACA,QAEA,MACA,WAEA,kBAEA,kBAEA,oBACK,MAGL,eAGA,WAEA,EAEA,GACA,OACA,MAzDA,WAkBA,EAyCA,EC1CA,GFDA,eACA,OACA,QAEA,0CAlBA,aAaA,EAMA,WACA,aACA,IAEA,gBACA,eACA,SAEA,EAEA,GACA,CACA,QACA,OACA,aAEA,EGzBA,GCLA,aACA,YACA,MACA,SACA,IAEA,UACA,OACA,SAEA,uBACA,IACA,kBACA,GACA,CACA,CACA,QAEA,mCCfA,aACA,OACA,UCRA,ECOA,UAEA,CAEA,ECEA,GFFA,eACA,QACA,EACA,SACA,OACA,OACA,GAEA,IACA,KACA,KAEA,gBAbA,IAcA,cACA,MACA,WAEA,OACA,KACA,OACA,MAEA,UAEA,KACA,kBACA,OACA,SAEA,uBACA,WACA,aACA,OACA,QACA,iBAIA,YAEA,UACA,OACA,KACA,YACA,SAEA,UAEA,QACA,CACA,QAEA,mBEjDA,gBACA,SCOA,oBACA,OACA,YACA,SAEA,2BACA,MCVA,oBACA,OACA,YACA,SAEA,kBACA,kBCdA,GCSA,GClBA,aACA,YACA,MACA,SACA,IAEA,UACA,OACA,KACA,aAEA,OACA,CACA,QAEA,ECAA,GFIA,WACA,WACA,cAEA,SACA,2BACA,IACA,MAGA,cAFA,YAGA,mBACA,aACA,MACA,EAEA,EGtBA,GDGA,aACA,WACA,cAEA,SACA,YAGA,2BACA,OACA,eACA,EAEA,qBCfA,OACA,OACA,QACA,ECbA,GCUA,GDTA,eACA,YACA,MAEA,OACA,aACA,EACA,QACA,aAEA,aAEA,kCACA,EAEA,mBCLA,WACA,SCKA,oBACA,OACA,YACA,SAEA,sBACA,MCVA,oBACA,OACA,YACA,SAEA,aACA,kBCbA,MCXA,OCUA,GDTA,eACA,YACA,MACA,WACA,SAEA,UACA,WACA,gBACA,OACA,CACA,QAEA,EELA,GCAA,iBACA,eAEA,iBACA,MACA,OAGA,oBACA,UACA,eACA,IACA,aANA,EAOA,OACA,SACA,gBACA,eACA,sBAGA,KACA,CACA,SACA,GACA,IACA,CACA,QAEA,mBCtBA,SACA,iBAEA,2CACA,gBACA,OCoCA,MAGA,O5FtCA,eACA,gBACA,YAEA,WAEA,oBACA,SACA,UAEA,aACA,IACA,aAEA,MACA,mBAEA,MACA,Q6FjCA,UACA,WACA,YACA,eACA,IACA,IAEA,UACA,OAEA,WAEA,OACA,CACA,QAEA,S3FHA,UACA,qBACA,qBACA,eACA,GAEA,IACA,YAEA,mBACA,2BACA,IACA,EE/BA,gBwF4DA,sEvD7BA,aACA,aACA,iBACA,UACA,EyDLA,EF+BA,UE9BA,aACA,aACA,iBACA,OACA,EAEA,OrDbA,iBACA,kBAEA,mCAGA,cACA,EAEA,KACA,aALA,EE5BA,YD6BA,aACA,aACA,iBACA,KACA,CqDLA,gBACA,aACA,aACA,iBACA,QACA,CAEA,WH0BA,QhDtDA,WACA,kBACA,mBACA,EoDhBA,cAgBA,WACA,kBACA,kBAHA,GAIA,ECAA,eACA,aACA,kBAEA,2BAGA,MACA,SAFA,ECdA,YACA,WACA,YACA,eACA,IAEA,UACA,OACA,eACA,EACA,CACA,QCGA,UP2CA,QO1CA,eACA,kBAEA,cAGA,MACA,eAEA,IACA,YALA,CCnBA,UACA,WACA,aACA,EAEA,wDRoDA,KzCnDA,aACA,uBACA,EkDIA,sBACA,eACA,kBACA,KACA,UAEA,KACA,QACA,eACA,QACA,CACA,WACA,UACA,IAEA,GACA,YAEA,iBACA,QACA,SAGA,gBACA,CAEA,MjD7BA,aACA,yBACA,aGjBA,UqCgEA,qBlC9CA,eACA,0BACA,cAEA,Q4CPA,cACA,eACA,0BACA,OAEA,kBAEA,mBtCCA,aACA,OACA,aACA,QAEA,gBACA,IACA,OAEA,kBACA,UACA,OACA,KACA,aACA,UAEA,QACA,CAEA,MADA,UCjDA,E2ByEA,Q3B7CA,WACA,aACA,SsCZA,QACA,eACA,kBAEA,mCAGA,aACA,EAGA,kBACA,qBAEA,OACA,WATA,EAWA,cnCdA,aACA,OACA,QoCIA,gBACA,eACA,eACA,MCbA,gBACA,aACA,kBACA,OACA,OACA,mBACA,QAEA,QACA,QACA,CCTA,EdwDA,gBcvDA,aACA,OACA,WCCA,oBACA,eACA,eACA,SCRA,oBACA,aACA,kBACA,OACA,kBACA,QACA,QAEA,QACA,QACA,CAEA,avCbA,WACA,aACA,OACA,MACA,EwCHA,eACA,aACA,aACA,YACA,OACA,ECRA,ElB6DA,KkB5DA,WACA,aACA,ECSA,OACA,eACA,aACA,0BAGA,iBACA,MAFA,ECLA,YACA,eACA,kBAEA,8BAGA,QACA,aACA,QAHA,ECKA,iBACA,aACA,aACA,iBACA,UACA,ECLA,YACA,aACA,aACA,iBACA,IACA,EAEA,EtBgCA,sCf1DA,WACA,aACA,OACA,MACA,EsCCA,SACA,aACA,aACA,YACA,OACA,ECTA,ExB0DA,SwBzDA,aACA,aACA,OACA,eACA,EAEA,0CxBoDA,qCJ5DA,aACA,oBACA,MELA,gBDEA,aACA,oBACA,MEEA,E0B2C6B,YnXvC7B,YAKA,QAuBA,iBACA,2CAGA,uCACA,+BAEA,kBACA,QAaA,yBAGA,SAGA,WAGA,aAGA,+BAGA,SAGA,aAEA,kBAAoB,MAAgB,WAEpC,SAkBA,OAKA,+CAEA,uBAIA,wBACA,oBACA,0DAGA,qBAIA,+BACA,UAYA,CACA,MAIA,YACA,UAKA,OAEA,aACA,cASA,8BACA,UAGA,gBACA,QAGA,YACA,QAQA,4BACA,gBAIA,0CACA,YAEA,gBACA,wDACA,MAEA,OACA,KAEA,CAGA,kBAIA,mBAkBA,gCACA,eACA,gBAEA,UAEA,WACA,CAGA,kBACA,kBACA,wBACA,OACA,aAEA,qBACA,wBAEA,QAEA,WAAkB,MAA+B,WACjD,UAEA,gBAAmB,MAA+B,WAClD,UAEA,gBAAoB,MAAmB,OACvC,cAAqB,MAAmB,WAExC,YAGA,uCACA,gBACA,8BACA,0BACA,2BACA,2BAGA,oCACA,iBACA,8BACA,2BACA,2BACA,2BAGA,gBACA,IAEA,sCAEA,eACA,wBAEA,QAEA,cACA,kBAEA,eACA,kBACA,CAGA,cACA,kBACA,CAEA,cACA,kBACA,CAEA,eACA,cAEA,YACA,UACG,KACH,UAGA,KAAU,WACV,UAGA,MAEA,OC3SA,mBAIA,WACA,OACA,QAQA,yBACA,CACA,SAKA,uBACA,OACA,gCACA,EAEA,GCpCA,aACA,YACA,4BA2BA,iBACA,kBAGA,SAEA,UAKA,kCAJA,kBAGA,UAGA,GACA,kBAEA,OACA,eAGA,qBACA,2DAEA,MAGA,oBACA,+BAGA,0BAGA,oEACA,SAEA,wBACA,QACA,kCAEA,6DAEA,oBACA,OACA,cACA,eACA,SACA,SAGA,MAEA,QACA,KAGA,CACA,QAEA,GACA,kBAEA,OACA,eAGA,qBAKA,wCACA,UACA,GACA,gBAIA,SACA,SAAC,GAiBD,aACA,aACA,aACA,aACA,aAGA,aACA,kBACA,WAGA,kBACA,eAMA,gBACA,qCACA,MAEA,mKAEA,aACA,MACA,GACA,gBAIA,SACA,SAEA,GACA,kBAEA,OACA,eAGA,qBAIA,wCACA,WAGA,MACA,SAEA,GACA,kBACA,WAGA,kBACA,eAKA,gBACA,qCACA,MAEA,mKAEA,aACA,OAGA,MACA,SAAC,GAED,kBACA,WAGA,SACA,WAIA,8BACA,eAGA,8BACA,6BAGA,qDACA,sBAEA,8FAIA,oCACA,wGAEA,yCAKA,2EACA,qEAEA,aAEA,uBAEA,WACA,gCAGA,aACA,oBACA,wDAEA,qBAGA,UACA,GAAG,KAGH,uBACA,eACA,cAEA,gBACA,SAGA,OACA,UAEA,GACA,SAEA,WACA,2CAMA,wDAGA,MAGA,UAPA,WAQA,kBAEA,OACA,eAMA,kDACA,UACA,8IAEA,UACA,YACE,qFAIF,WAOA,wCAGA,6BAGA,0BACA,qBAKA,sBAEA,6CACA,yBAKA,4BACA,yCACA,oBAEA,iBACA,GAEA,OACA,UAEA,GACA,kBAEA,OACA,eAGA,eAEA,kBACA,2DAGA,cACA,qCAKA,qBACA,oEACA,CACA,wEAKA,8DAHA,UAIA,KAGA,OACA,GAEA,GACA,SAEA,WACA,2CAMA,uDACA,GACA,gBAIA,SAGA,UAVA,WAWA,gBAEA,YAEA,SAKA,kCAJA,kBAGA,UAGA,GACA,kBAEA,OACA,eAKA,kDACA,UACA,8IAEA,UACA,WACA,GACA,gBAEE,wFACF,WAGA,2CAGA,0BAGA,2FAEA,KACA,GAEA,OACA,UAEA,GACA,kBACA,WACA,WAGA,oBACA,+BAGA,0DAEA,6CAGA,WACA,gDAEA,KACA,OAEA,CACA,QAEA,GACA,kBACA,KAEA,kBAGA,mBACA,qCAGA,qDAGA,iDACA,WACA,uDACA,8DAEA,KACA,KAEA,OACA,GAEA,GACA,kBACA,SAEA,0DAGA,kBACA,SAGA,qBAGA,SACA,KAIA,kBAEA,2BACA,WACA,iDAEA,WACA,wBAEA,EAGA,CACA,QAEA,GACA,kBACA,WAGA,SACA,WAQA,iEAGA,kBACA,SAGA,eACA,kBACA,iDAEA,kBACA,wBAGA,GACA,SAGA,GCjiBA,QAQA,yBAOA,aAaA,QACA,MASA,kBACA,qBACA,UACA,8BAIA,kBACA,KASA,YACA,CAIA,eAHA,iBAEA,SAQA,iBACA,qBACA,eAEA,UiXzEA,EACA,mBAIA,uBACA,OACA,uCACA,EAEA,GCTA,aACA,mBASA,iBACA,OAOA,6BAOA,2BACA,SAKA,WACA,OACA,QAKA,YACA,6BAOA,sBAEA,kEAKA,WACA,2DACA,SAKA,uBACA,OACA,wCCpEA,EACA,mBASA,0BACA,CAQA,cAQA,YACA,UAUA,eACA,aACA,IAKA,QAEA,gDAIA,gCAFA,KASA,SACA,aACA,QACA,ElXfA,QAWA,iBAKA,MAMA,aACA,OAYA,gBACA,OACA,YAYA,mBACA,OACA,YAOA,yBACA,OACA,OAuCA,cACA,MAEA,wCAGA,kDAGA,mBAEA,gBAEA,MAMA,yBAJA,yBAMA,yBAIA,yGAGA,SAEA,iDAEA,OAEA,4BACA,cACA,2BAGA,kBACA,2CAEA,uBACA,QACA,eACA,wBAGA,oCAAiC,SACjC,mBAEA,CAuBA,oBACA,mCACA,iCAEA,oCAEA,oBAuBA,uBACA,mCACA,iCAEA,uCAEA,uBAiBA,YACA,iBACA,MAYA,kBACA,kBACA,iDAEA,0CAEA,MAYA,qBACA,kBACA,oDAEA,6CAEA,MAWA,oBACA,MAEA,6BACA,mBAEA,eAEA,WAeA,mBACA,iBACA,YAEA,mBAUA,qBACA,MAEA,6BACA,0BAEA,kBAEA,OAQA,mBACA,MAEA,0CACA,kBACA,wBAEA,oBAEA,OACA,iBAEA,2BACA,WAGA,IA0BA,YACA,SAEA,+BAMA,8BAGA,2DAMA,oBAGA,qEAEA,8BAOA,mBAGA,mGACA,kBAEA,4DAEA,2CACA,cACA,2BACA,iBAOA,UACA,MAEA,4CACA,SACA,kBAEA,0BACA,MAEA,qBAEA,kCAEA,mBACA,uCAEA,OAAG,KACH,mCAEA,OACA,kBACA,CAUA,SACA,MAEA,qCACA,kBAEA,sBACA,eAEA,eAMA,8BAGA,uFAMA,8BAGA,uHACA,sCAEA,qDAEA,OAEA,WAKA,iBACA,cACA,2BAEA,gCACA,MAQA,YACA,SAEA,+BAMA,sBACA,QAIA,+GACA,kBAEA,4DAEA,mCACA,YACA,2BACA,iBAgBA,WACA,MAEA,qCAEA,aAMA,oBAKA,uFAGA,+BAAuC,CAAoB,iBAC3D,yBAMA,uFAEA,IACA,SACA,kBAEA,oCACA,2DAEA,OACA,UAKA,sBACA,2BAEA,mCAEA,WAEA,uBACA,sCAGA,QAEA,cACA,2BAGA,kBACA,OACA,IAGA,UACA,oBACA,MAAG,OAEH,aACA,CACA,gDAEA,aAUA,UACA,SAEA,gCAMA,oBAGA,oFAEA,aAMA,4BAGA,wEAMA,6BAGA,iGACA,kBAEA,4DAEA,gBACA,WACA,2BAEA,mCAEA,0CACA,KACA,SACA,2BAIA,cACA,2BACA,iBAQA,UACA,SAEA,6BAMA,6BAGA,6FACA,kBAEA,mDACA,6CAEA,OAEA,WACA,aAIA,qBACA,cACA,2BAEA,iDACA,MA8BA,eACA,SAEA,iCAMA,wCACA,QAIA,8HACA,mBAEA,4BAMA,oBAGA,gFAMA,gBAIA,wGAKA,2BACA,2BAHA,WAsCA,kBACA,MAEA,4DAEA,0BAEA,UAMA,gBAGA,kGACA,aAEA,0CAMA,gBAGA,uJAEA,MAIA,oCACI,gBAGJ,WACA,uBAGA,gCACA,MAEA,CACA,MAGA,GACA,mCAEA,iCAEA,SASA,gBACA,MAEA,4DAEA,4BAMA,oBAGA,2GAEA,aACA,uBAKA,+BAHA,qBAKA,uBACA,KAyDA,oBACA,MAEA,2DACA,aAWA,uBACA,MAEA,2DACA,cAqBA,2BACA,SAEA,6BACA,wBAEA,iDACA,YAGA,2BAeA,4BACA,SAEA,6BACA,wBAEA,2CACA,aAGA,4BAsBA,2BACA,sCACA,kBAWA,2BACA,+BACA,kBAOA,4BACA,6BAGA,oDACA,YAEA,wDACA,OAEA,GACA,kBAMA,6BACA,6BAGA,oDACA,YAEA,yDACA,OAEA,GACA,mBAOA,6BAUA,gCACA,kBAEA,2EAY2C,EC7pC3C,QAMA,eAOA,MAWA,8CAUA,+BAYA,6BASA,uBAYA,sBAYA,sCACA,IAQA,cACA,wCACA,4BAUA,mBACA,UACA,mBACA,yCACA,QAGA,oEAEA,WACA,KACA,KACA,mBACA,wCACA,wBACA,uCAIA,cAGA,kBACA,KACA,KACA,aACA,sBACA,oDACA,qDAGA,8EAIA,qFAGA,SACA,KACA,cACA,yCACA,QAGA,4DACA,wDAEA,oDAEA,wEACA,WAEA,qCACA,SAEA,CACA,KAIA,sBACA,IAUA,0BACA,8BAGA,YAOA,6BAGA,uCAGA,sCAZA,CACA,WAGA,YAeA,qBACA,SAEA,yBACA,gBACA,yBAAkB,gBAIlB,WACA,QAOA,kBACA,SAEA,yBACA,gBACA,yBAAkB,gBAIlB,WACA,QAkBA,cAAwB,CAAmC,8BAE3D,SACA,wBACA,2DAEA,4BAKA,gBAGA,gDAEA,4CACA,oBACA,iBAIA,KAMA,sBAHA,uBAOA,4BAEA,cAGA,sBAEA,gBACA,IAGA,WACA,WAEA,4CAEA,OACK,YAEL,4CAEA,OACK,oBAEL,cACA,kBACA,cAEA,MACA,4DACM,OACN,WACA,oEACA,EAIA,gBAEA,2BACA,IACA,GAEA,KACA,KAGA,GAGA,QAIA,mCACA,0BAMA,yCAIA,qCAIA,uDAVA,aAUkB,MAAoB,WACtC,aACA,KAGA,KACA,oBACA,mCACA,sCAGA,UACA,oBACA,mCACA,+CACA,+CAGA,OACA,uBACA,mDACA,gCACA,+CACA,0BACA,qCACA,0CAEA,mBACA,kBAGA,4DAGA,eACA,GAEA,IAGA,UACA,iBAEA,YACA,+BACA,kBAIA,iCAGA,qCACA,sCAEA,aACA,+BAEA,iCAEA,cAKA,QACA,wBACA,+BACA,6BACA,4BACA,IAUA,mBACA,SAAsB,6CAEtB,qBACA,gBAUA,mBACA,SAAsB,6CAEtB,qBAEA,sBACA,8BAQA,kBACA,SAAsB,uEAEtB,mCACA,SASA,iBAEA,MAGA,8BAGA,8BAGA,qBAIA,kBAAkB,MAAoB,OACtC,IACA,4BAEA,GAGA,IASA,yBACA,IAEA,GASA,8BARA,gCAEA,UAEA,0BAGA,WASA,iBACA,wBACA,0CAEA,eAUA,mBAiBA,mBAEA,yBACA,oBACA,qBAEA,WACA,mBACA,+BACA,mBACM,UACN,wBACA,8BAIA,IACA,6BACA,qBAIA,SACA,oCACA,mBACM,2BAWN,WAEA,6BAIA,iBACA,MACA,YACA,qBACA,mBAEA,gBAIA,qBACA,IACA,yBACA,mBACM,gBACN,2BACA,aAEA,kBAEA,SACA,aACA,gBACA,mBACA,8BAGA,uBACA,0BACA,kBACO,qBACP,aAEA,SACA,aACA,gBAIA,IACA,wBACA,mBACM,mBACN,4BACA,kBAIA,IACA,4BACA,mBACM,kCACN,aAEA,kBACA,SACA,UAAM,WACN,iBAMA,WAEA,6BAEA,6BAIA,wBACA,MACA,qBACA,OACA,qBAEA,gBACA,qBAIA,MAEA,wBAEA,IACA,kDACA,QAOA,SACA,MACA,YACA,iBACA,eAGA,qBAEA,qBACA,OAEA,4BACA,mBACA,aAAM,4BACN,WACA,qBACA,MAEA,0BAKA,GAEA,0CAEA,sBACA,YACA,WACM,uBAEN,iBAGA,GACA,CAEA,aACA,uBACA,aAWA,sBACA,OACA,MACA,qBACA,+BACA,cACA,mBAEA,eAWA,sBACA,OACA,MACA,qBACA,+BACA,cACA,mBAEA,eAWA,0BAEA,SAGA,QAGA,2BAEA,2BAGA,KAEA,cACA,MACA,uBACA,eACA,0BACA,EACA,eACA,oBACA,qCAKA,mBACA,SAGA,UAEA,iBACA,MACA,uBACA,eACA,0BACA,EACA,iCACA,KACA,qCAIA,iBACA,QASA,wBACA,WAEA,UACA,GAGA,wCACA,WAEA,YACA,cACA,uDACA,QAKA,qBACA,uBAWA,+BACA,8CAEA,+BAAuC,CACvC,kBACA,oCACA,iCAEA,6CAGA,WAIA,EC/2BA,QAIA,cAOA,cASA,0BAYA,wBAQA,2BACA,IAOA,YACA,mEACA,sBAEA,YACA,uCACA,cACA,CAWA,qBAEA,IAKA,oCAGA,iBAKA,iCACA,sBAEA,UACA,eAGA,MACA,OACA,EAQA,YACA,6BAEA,mCACA,UASA,sBACA,iBACA,4BACA,MAQA,kBACA,wBACA,MAQA,iBACA,2BACA,MASA,kBACA,wBACA,MAQA,aACA,6BAGA,qBACA,0CACA,gCAEA,eAEA,YAQA,eACA,mFAEA,CACA,QC7KA,ECMA,SAQA,aACA,QAKA,eAOA,MAWA,qBAUA,sBAQA,4BASA,wBAAgC,YAQhC,kCAQA,6BAGA,qBAGA,oDACA,WAEA,kDAOA,aACA,QACA,sGAAM,CAGN,aAAG,EAAG,UAGN,oDACA,WAEA,KACA,iCAEA,kBAAG,EAAG,UAGN,iDACA,WAEA,KACA,2BACA,kCAEA,OAAG,EAAG,UAGN,WAEA,gDACA,CACA,IAKA,oCACA,eACA,mBAEA,wCAEA,mBACA,QAEA,KAKA,+CAEA,kCAEA,UAEA,+BACA,2CACA,WAEA,EACA,EAQA,gBACA,aACA,WAUA,+BACA,eAQA,YACA,QACA,kFAAK,CAIL,wBACA,UAGA,kBADA,QAMA,UACA,gBACA,eACA,eASA,kBACA,mBACA,MAOA,eACA,2DACA,MAqCA,qBACA,kBACA,MAOA,SACA,YAGA,MAIA,mBAHA,2CAEA,wBAUA,kBACA,qBACA,kBACA,UAIA,qBACA,SASA,mBACA,cACA,+BAGA,mBACA,QAGA,sCACA,SAUA,2BACA,0BACA,IAOA,mBACA,IAEA,MACA,uBACA,YAGA,KADA,OAKA,cA+BA,EAKA,SChXA,QAIA,cAOA,kBACA,IASA,oBACA,sBACA,QAQA,OACA,sBACA,MASA,OACA,8BACA,IAkBA,eACA,2BACA,uBAEA,YACA,WACA,cAEA,MAeA,SAdA,mCACA,oBAGA,WACA,2BACA,0BAIA,mBAGA,oBAGA,YACA,qBAEA,cAIA,qBAHA,iCAEA,SAWA,WACA,2BACA,uBAGA,iCACA,+CAEA,WAMA,qBAQA,yBACA,eACA,mBACA,sBAGA,QAQA,gCACA,eACA,MACA,yCAGA,QAKA,UACA,8BACA,cAGA,gCAEA,UACA,eAeA,oBACA,8BACA,6BACA,OAGA,QAQA,kBACA,GACA,kBACA,kBAYA,EA0EA,SACA,QAQA,mBAOA,MAQA,YAQA,+CACA,mBASA,6BACA,UACA,wBAGA,yEACA,uBAOA,WACA,UACA,wBAGA,0GACA,MAOA,SACA,UACA,wBAGA,0GACA,IAcA,WACA,UACA,wBAGA,4FACA,WASA,oBACA,CAWA,YAVA,iBAIA,iDACA,sCAEA,WAEA,cAQA,mBACA,+CACA,sDACA,sBACA,yBACA,IA6BA,EClbA,SACA,mBAUA,mBACA,IAEA,yBAMA,oBACA,QAwBA,0HAEA,uBACA,KAOA,SACA,MACA,eAkDA,EC1GA,SAoDA,QACA,mBAMA,MAOA,aAOA,cAaA,oDAOA,uBAEA,gCACA,EASA,iBACA,SAEA,kBAAkB,MAAkB,WACpC,SAEA,wBACA,kBACA,iCAEA,QAGA,sEACA,iCACA,EAQA,oBACA,aACA,8BAGA,8DACA,SAWA,iBAIA,gBACA,YAQA,iBANA,gCASA,wDAmBA,gBACA,iCAfA,0BAsBA,mBAEA,MACA,wCAIA,gBAEA,yBAOA,2BAEA,MACA,8BAIA,sBAEA,yBAMA,WAEA,iCAGA,YAQA,eAPA,MACA,mFAAK,sBAGL,8CAKA,oCAEA,2BACA,wBAGA,cAGA,4EAFA,WAKA,8BACA,OAOA,sBACA,IAIA,8BACA,0BACA,yBACA,qBAEA,oBACA,oCAEA,sBAEA,0BACA,wBACA,QAEA,MAEA,eAIA,qBAKA,wIAIA,4DAEA,gCAEA,0BACA,wBACA,QAEA,EAGA,mDAGA,UACA,WACA,SAUA,mBACA,WAEA,yBACA,SACA,mCACA,0BACA,eAUA,oBACA,WAEA,qBACA,QACA,mCACA,0BACA,eASA,0BACA,mCAKA,qEACA,oBACA,qBAEA,iBAQA,mCACA,4CAEA,WACA,GAGA,uCAEA,sCACA,QAGA,oCACA,uBACA,wBAIA,kBACA,qBAEA,SAAI,uBACJ,mDACI,YACJ,sCAEA,+BAEA,eAEA,+CACA,UACA,CAEA,CACA,QAUA,mBACA,oBAIA,oBACA,8BAGA,QACA,ICtZA,EC9BA,SAoCA,cEhBA,QACA,cAOA,cAQA,4BAQA,kBASA,4BAQA,uBAEA,6EACA,oCAIA,6CACA,WAEA,KACA,WAAG,EAAG,UAGN,yCACA,CAEA,2CACA,SACA,QAEA,0CACA,SAEA,mDACA,gBACA,QAEA,wCAAgC,SAMhC,oDACA,kBAEA,WAqCA,UACA,OAEA,4DAA+B,cAE/B,uCAGA,WAEA,eAmCA,mBACA,CACA,qBACG,UACH,uBACA,MAGA,kCAA8B,SAE9B,aACA,qCAEA,oBAQA,kBACA,GACA,UAkBA,0BACA,kDACA,KAWA,mBACA,IACA,SAoCA,mBACA,IACA,SA+BA,qBACA,IACA,SAsBA,sBACA,WACA,OAWA,cACA,IACA,uBAGA,eACA,YAGA,0BAEA,6CACA,YAIA,SACA,QAKA,UACA,eACA,eACA,eASA,qBACA,SAEA,qCAEA,iCACA,iCAGA,sDACA,kBAGA,iCAEA,qCACA,4BACA,IAEA,CACA,QAyEA,EwW3cA,SACA,QAIA,cAOA,uBACA,UAOA,YAUA,4CACA,iCACA,QACA,EAeA,WAAuC,GACvC,SACA,UAIA,qEACA,SAGA,GACA,mBAIA,oBACA,MAGA,KACA,SAAG,EAAG,CACN,YAQA,SACA,yCACA,QAKA,UACA,gBACA,eCxFA,EACA,mBAMA,eACA,CAQA,aACA,QAmBA,WAAuC,GACvC,uBACA,MAEA,cACA,aACA,WACA,GACA,CAEA,OACA,UC7BA,EACA,QAQA,eACA,wDAWA,4EAEA,2BAUA,iCAgBA,sBAMA,0CAQA,gCAWA,WAUA,4BASA,6BASA,gCACA,wDAUA,sBAEA,sFACA,8EACA,wEAEA,kEAsBA,0CACA,iDACA,SAOA,cACA,gBAkBA,iBACA,OAIA,iBACI,mBACJ,UACA,SAzBA,YAEA,wBAQA,2BACA,6BAEA,oBACA,SAEA,CAbA,QACA,SACA,qBAEA,kCAEA,gBAwBA,UACA,kBAEA,gBAEA,8BAEA,uBACA,mBACA,YACA,oBACA,uBACA,0BACA,SACA,EAYA,cACA,uBACA,KAUA,iBACA,yBACA,YAEA,SACA,IACA,uBACA,QACA,oBACA,QACA,QAEA,OACA,EACA,ECxQA,SACA,SAIA,WACA,WACA,MAKA,WACA,kBACA,KA8CA,GzWzDA,SAIA,gBACA,2BACA,MCJA,GCFA,QAOA,WACA,oDACA,sBACA,gBAEA,iBACA,SwWVA,EACA,QAIA,cAOA,oBAQA,qCAA0C,CAQ1C,kCACA,MASA,UAEA,wCAGA,kCACA,UAQA,UAEA,cAGA,oCACA,YAUA,UACA,2CACA,iBACA,kCAEA,gBACA,4BAGA,IACA,QACA,EvWlEA,QAOA,eAOA,MAQA,6BACA,IAOA,SACA,iCACA,iBAEA,YAWA,SACA,SAOA,YACA,0FAAwF,CAIxF,oCAAgD,YAChD,gBAYA,UACA,UASA,YACA,kGAAgG,CAIhG,iEACA,OAQA,OACA,6BACA,MAQa,EC7Gb,QACA,cAQA,UAQA,oCAQA,uBAQA,gCACA,IAOA,OACA,mBACA,oBAGA,qFAAkE,CAClE,wDAAuD,CACvD,+BACA,MAOA,UACA,UACA,qBAGA,wBACA,cACA,gCAEA,UAQA,UACA,mBAEA,4BACA,sBACA,YASA,QACA,mBAEA,iEACA,qBACA,UACA,YAAG,EACH,EASA,EAEA,SC7GA,SENA,QAOA,iBAIA,MAKA,cAKA,6BAKA,4BAQA,2CACA,WAKA,OACA,cACA,cAEA,OAGA,6DACA,4CAEA,4BACA,wEAIA,mDACA,wCACA,qDACA,4BAEA,yCAEA,iFAEA,qBACA,kBACA,6BACA,sCACA,6BAEA,SAKA,UACA,WACA,SC9CA,EACA,mBAMA,eACA,OAGA,YAIA,mCACA,GACA,cAGA,yBACA,+EAEA,YAGA,2BACA,iBACA,0BAEA,QAQA,QAQA,6BACA,IAMA,UACA,iBACA,UASA,aACA,MACA,gBAmCA,eACA,gBAMA,mBAGA,mFASA,SAEA,eACA,eACA,sBAKA,2BACA,UACA,sBAEA,KAGA,2BACA,UACA,UAEA,mBACA,EAEA,EAaA,EAQa,YEjMb,IDSA,aACA,OACA,cAEA,ECyBA,QAMA,eACA,uBAUA,aAiDA,gCACA,IAWA,SACA,0BACA,CAGA,kBAGA,YADA,gBAsCA,SACA,CASA,wBAPA,sBACA,CACA,OACA,8BAGA,eASA,UACA,UAMA,yBAGA,uIACA,YA8BA,YACA,cACA,MACA,0BACA,SACA,MACM,QACN,cAIA,KAEA,SACA,KAuCA,iBACA,OACA,QACA,eACA,CACA,sBACA,mCAEA,YAEA,WACA,eACA,kDAEA,YAEA,EA0DA,mBACA,GAQA,qBAGA,oGACA,OAQA,eACA,IAEA,GAeA,OAbA,oBAGA,8BAGA,YAQA,QAIA,qHACA,UAEA,oBAEA,iBAQA,kBACA,SAGA,KAQA,sDA3XA,oCAsXA,WACA,0BACA,+BAEA,oBASA,eACA,SAIA,KAiCA,6BA/BA,6CAaA,YACA,6BACA,aACA,aACA,MAUA,sCAGA,KASA,qBACA,WAEA,UAIA,sBACA,SAEA,yBAEA,kBAGA,uBAIA,oBAUA,6CAmBA,WAQA,gBAIA,WACA,SAGA,kCACA,CACA,iBACA,UAEA,QASA,iBACA,mDAmBA,aACA,SAGA,aAUA,eAEA,sCAEA,cAEA,IACA,SAIA,uBA6BA,2BACA,WAEA,sBACA,SAQA,KACA,6BACA,QACA,YACA,QAWA,WAEA,UACA,CAQA,0BACA,WACA,+BACA,+BACA,iBAEA,sBACA,YACA,aACA,GAGA,sBACA,wBAEA,QACI,UAEJ,aACA,cAGA,yBAEI,kBACJ,QAEA,yBACA,WACA,aAEA,gBAEA,sBACA,mBACA,KACA,cAEA,cACA,sBAKA,YACA,gBAEA,cASA,mBACA,SAIA,kDACA,yCACA,oBAEA,cACA,+BAEA,KACA,kCAEA,OACA,CAeA,mBAAqB,oBAAwB,QAC7C,WAGA,WAEA,kBAEA,eAEA,qBAIA,uBAGA,gDAEA,OAWA,6BACA,kBAWA,kBACA,QAIA,SACA,KAKA,4BAHA,kCAIA,WAGA,cACA,WAEA,qBAEA,iBAEA,WAAkB,eAAgC,OAClD,mDAEA,YACA,EAQA,SACA,QAMA,eACA,eA+BA,OAWA,YACA,8BAEA,qCACA,eAYA,iCACA,aAEA,sEAGA,iBACA,2DACA,YACA,CAYA,EACA,mBAUA,gCACA,gBACA,eACA,cACA,iDAEA,iDAGA,uBAEA,iCAGA,cACA,8BACA,SACA,CAQA,EACA,mBAIA,YACA,eAEA,gCACA,gBAca,oBiW14Bb,MACA,QAQA,eAgCA,cAQA,UAUA,mBAWA,qBAQA,wBASA,kCAGA,yDACA,GACA,QAiBA,iBACA,SA6CA,mBACA,aACA,mBAGA,8CACA,KAmCA,mBACA,SAEA,OAGA,6BADA,QA8DA,iBACA,CACA,SAGA,cACA,8BAEA,MAUA,mBACA,CACA,SAGA,cACA,8BAEA,SAWA,eACA,eACA,SAeA,kBACA,gBACA,WA2DA,SACA,SAMA,wBAIA,8EACA,sCAGA,0CAGA,kBACA,aAUA,UACA,MAEA,iDACA,UAUA,EAEA,SACA,2BCxeA,MACA,mBAMA,eACA,CASA,wBAQA,kBAKA,SACA,OAEA,cACA,uBAKA,UACA,sCAEA,eACA,SAOA,wBACA,8CACA,KACA,iBACA,OACA,CACA,KACA,eACA,UAGA,qCACG,OAEH,uBACA,cACA,oBCrEA,MACA,mBAIA,eACA,CAQA,kBAQA,iBAEA,oBAEA,8BACA,KACA,mBACA,OACA,CACA,KAEA,qBAEA,iBACA,CACA,WAIA,WC3CA,EACA,mBAMA,eACA,CACA,iBAQA,kBAQA,kCAQA,6CACA,sCACA,KACA,iBACA,OACA,CACA,KACA,WACA,YAEA,2BACA,kBACA,aACA,2BAA4D,0BAE5D,aACA,MACA,gBACA,KACA,iBACA,OACA,CACA,KACA,iBAEA,qBAEA,8BAEA,KACA,KACA,iBACA,OACA,CACA,KAEA,wBAEA,8BAIA,QAOA,qBACA,cACA,IACA,OAQA,gBAPA,uBACA,YACA,IAA6C,0BAC7C,SAGA,qBC5FA,EACA,mBAQA,iBACA,CAEA,sBAGA,mCAGA,oCACA,KACA,iBACA,OACA,CACA,KACA,aACA,sBACA,0DAEA,sDAUA,gBAQA,0BAQA,qBAQA,iBAMA,SACA,OAEA,cACA,sDAEA,2CAEA,OAKA,UACA,MACA,2CAGA,uBACA,SC1FA,EACA,mBASA,iBACA,CACA,wBACA,oBAOA,kBACA,0BAIA,YACA,MACA,4BACA,OANA,YAEA,YAOA,+BACA,oBC9BA,MAEA,YAIA,MACA,mBAIA,eACA,CAEA,sBASA,sBASA,wBAaA,yCAYA,qCAgBA,iCAUA,0BAWA,eAYA,qCAQA,8CAwBA,wDACA,KACA,iBACA,OACA,CACA,KAEA,sCACA,wCACA,+BACA,kCAIG,UASH,mCACA,KAEA,iBACA,OACA,CACA,KAEA,2CACA,gEAEA,uDACA,uBACA,uEAGA,uCACA,kCAGA,0CACA,oCAGA,sBAIA,+BACG,UAEH,0BACA,KACA,iBACA,OACA,CACA,KAGA,6BACA,MACA,8BAGA,gBAKA,SACA,OAGA,cAGA,8DACA,MACA,wBAGA,4CACA,MACA,wBACA,EAQA,yBACA,4CACA,2BAEA,QACA,wDAKA,2CAEA,qBAKA,qEAKA,aAfA,iBAgBA,eACA,sEACA,iFACA,iFAIA,gBACA,8BACA,0CAEA,KACA,ErWnOA,QAUA,eACA,kBA2CA,qBACA,0CACA,SAEA,WACA,uBAGA,cACA,wCACA,CACA,UACA,GAEA,EAEA,CASA,YACA,kCACA,IASA,WACA,iDACA,IASA,WACA,+BACA,EASA,eACA,gCACA,EASA,cACA,OAGA,WACA,yCAGA,kCACA,uCAGA,eAIA,WADA,MAIA,KAKA,aACA,kBACA,MAKA,YACA,kBACA,KAKA,YACA,kBACA,KAKA,gBACA,kBACA,SAQA,UAEA,MAEA,OAWA,qBAEA,cACA,0BAEA,UACA,SAKA,SACA,mCAIA,eAEA,WACA,yBAGA,UACA,MAIA,YACA,QAAG,OAEH,aACA,KAOa,EC9Qb,mBAIA,eACA,CAEA,0BACA,KACA,kBACA,OACA,CACA,KAIA,2BCFA,oBoWNA,MACA,mBAIA,eACA,CAEA,sBAQA,6BAQA,qCAQA,uBAQA,gBAQA,0BASA,sCACA,iBACA,wBACA,mCACA,mBAEA,4BAGA,mCAIA,iCACA,KACA,iBACA,OACA,CACA,KACA,+BACA,4BAIA,6BAEA,SAEA,cAGA,QAKA,SACA,OAGA,6BACA,8BAGA,oCACA,yBACA,QAEA,iCACA,4BACA,QAGA,iCACA,QAKA,QACA,mBACA,YAKA,YACA,mBACA,WASA,oBACA,YACA,CACA,sBACI,UACJ,wBAmBA,cACA,KACA,2EAAM,CAGN,QACA,EACA,oBCxKA,MACA,mBAMA,eACA,CASA,0BAQA,uBAQA,wBACA,SAKA,SACA,OAGA,2CAEA,2BACA,gCACA,SAKA,sBACA,sBACA,OC/DA,EACA,QACA,cAOA,wBACA,EAUA,aACA,6BAAgC,WAEhC,+BAGA,wCAEA,YAKA,UACA,iCAAqC,WAAsB,gBAC3D,iBAGA,QAEA,QAEA,0BACA,EACA,EpWTA,mBAYA,iBACA,CAQA,+BAEA,YAEA,8BAEA,2BAEA,6CAEA,YACA,KASA,UACA,aACA,sCACA,kBAEA,gBACA,SA0CA,mBACA,yBACA,YAEA,WACA,IACA,4BACA,iBACA,wCACA,gBACA,UACA,mDACA,uCACA,iBACA,QACA,oBACA,QACA,QAEA,OACA,EACA,EAEA,SqW9IA,SACA,QAIA,eAiBA,MACA,QAKA,UACA,MACA,eACA,EA0HA,SpW9JA,QACA,eAOA,YAQA,WACA,SAOA,YACA,qBACA,KAUA,WACA,qBACA,UAQA,aACA,cACA,YACA,EChCA,mBACA,eACA,gBAUA,GAEA,0EAEA,qCACA,gBACA,aAEA,gBACA,CAjBA,sBAEA,wDAEA,sCAAsD,UACtD,iCAAqD,UAErD,OAYA,cACA,SACA,uDAGA,eACA,qCAGA,qBACA,SACA,EGnDA,uBAOA,MCwFA,mBAIA,wBACA,OACA,WAKA,OACA,gBA6DA,WAEA,eAEA,oEAEA,qCAA0C,mCAC1C,MAEA,cArEA,iBACA,qBACA,SAQA,iCAEA,SAIA,wDAGA,MACA,WAGA,iBACA,mBAEA,aACA,4BACI,wBACJ,+BAGA,0CAEA,0CAAsC,CAEtC,cACA,sBAAG,EAAG,UAEN,wDACA,uBACA,qBACA,mBAKA,4BAEA,uBACA,gBAGA,2BACA,UACA,CAAG,EAAG,UAIN,iCAUmD,UACnD,qCAGA,GACA,aAEA,iBAEA,MAAG,EAAG,UAEN,iDACA,WACA,8EACA,mDAGA,WACA,yCAEA,UAAG,EAAG,UACN,OgWzLA,EACA,QAMA,eAOA,aAqDA,MACA,YACA,MAzCA,kBAUA,yBAEA,8BAGA,iEACA,MACA,SAEA,0BACA,MACA,aAEA,MAAG,EAAG,UAGN,sDAIA,iCAAgD,UAChD,gBAEA,wBACA,2BAEA,UAEA,EAYA,UACA,MACA,YAaA,WAKA,UACA,MACA,eAaA,EAEA,S/V5HA,mBAIA,UACA,qBACA,UAEA,uBACA,sCACA,iCAA+B,CAC/B,UACA,EAS6C,ECnB7C,mBACA,eACA,CAEA,sBAEA,+BACA,wCAEA,IACA,2BAAqD,UAErD,sCAIA,qBACA,UAEA,MACA,CACA,EAKA,W+V3BA,EACA,mBAIA,wBACA,OACA,OAEA,OACA,cACA,mBACA,SAEA,WAEA,uCAGA,0CACA,WACA,WACA,mBACA,sBAAG,EAAG,UACN,OACA,E7VbA,QAOA,oBAOA,MASA,kBAQA,OAQA,aAQA,wCACA,iCACA,aAEA,UAEA,oCACA,MACA,QAEA,uCAEA,sEACA,mFAsBA,yBAQA,YACA,aACA,qBAGA,aACA,MAQA,SACA,MAEA,wBACA,YAEA,UAKA,OACA,MACA,WAKA,SACA,MACA,WAKA,UACA,uCACA,uEACA,oFACA,yBAQA,UACA,QACA,2BACA,eAEA,E8V/JA,EACA,mBAQA,iBACA,CASA,+BACA,QAOA,aACA,aACA,OAKA,UACA,OAEA,uBACA,SAgBA,WAAsB,GACtB,qBACA,UACA,mBACA,OACA,8BACA,oBAEA,oDACA,WAEA,yBAGA,YAIA,0DAIA,WAGA,0CAGA,8BAEA,sBACA,QACA,EACA,E7V/EA,mBAIA,wBACA,OACA,OAKA,OACA,cACA,mBACA,iDAIA,mBAEA,qDACA,MACA,mBAAG,EAAG,UAEN,yDACA,MACA,qBACA,EAkBA,oBACA,qBACA,UACA,aAOA,UAIA,8BAIA,gBAEA,mCACA,mCACA,UAEA,KACA,SAUA,sBACA,qBACA,WAOA,EACA,QAMA,eAOA,MAQA,kCACA,OASA,YACA,IACA,WAEA,qDAEA,aACA,8BAGA,2BAoBA,uCAEA,SAGA,SACA,GAGA,wCAGA,iBAIA,kBACA,0BACA,UACA,uBAGA,gCAQA,qBACA,GAIA,4BACA,8BAGA,2BACA,MAKA,6DACA,+BAGA,OACA,MAGA,eAEA,QAAS,8BAAuC,aAGhD,YAGA,8CAGA,4BACA,iBAIA,kCAGA,iCACA,CACA,OACA,QAEA,eAKA,yBACA,IACA,eAYA,2CAEA,mCAEA,OAEA,QAAS,8BAAuC,aAGhD,YAGA,8CAIA,mCACA,8BACA,wBACA,oCAEA,wCACA,CACA,OACA,QAEA,eAKA,4BACA,IAIA,4BACA,wBACA,6BACA,iCAEA,iCAKA,0BACA,WAEA,YACA,EAEA,SACA,IACA,cACA,iBACA,gBACA,aACA,EACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAGA,KACA,UAAqB,IAAa,OAClC,OASa,QC1Ub,mBAQA,iBACA,CASA,cASA,qDACA,mBAYA,WAAsB,GACtB,qBACA,UAEA,iDACA,cAEA,wBAOA,eAGA,iBACA,iCAAuC,iCAIvC,oEACA,GAMA,iBAJA,2CAKA,YAGA,aAEA,wDACA,IACA,cAAuB,yCAEvB,aAEA,qBAAoC,CACpC,yCAEA,WAEA,6BACA,QACA,EAoBA,+CAEA,IACA,IAGA,6BACA,UACA,aACA,qBAIA,sCAEA,4BACA,GAGA,mCACA,aAGA,4BAKA,cAKA,qBAOA,sCACA,qBACA,UACA,aACA,qBACA,4BAEA,yBACA,eAEA,6BACA,E6VnKA,EACA,mBACA,eACA,CAEA,mBACA,eAEA,sBACA,sCACA,eAEA,EAEA,yBACA,SAEA,oBACA,mBACA,iBACI,kCACJ,sBACA,kBAEA,gBAGA,oCACA,0BACA,gBAGA,OACA,4BAAqD,UAErD,uCAIA,uBACA,UAEA,MACA,EAKA,WCjDA,EACA,mBAIA,wBACA,OACA,QAEA,OACA,cACA,mBACA,SAEA,WAEA,wDACA,6CAEA,6CACA,2DAA8E,wBAC9E,aACA,mBACA,sBACA,ECxBA,EACA,mBACA,sBACA,OACA,OAKA,wBACA,OACA,QA+BA,E9V1CA,mBACA,eACA,CAWA,qBAQA,2BAGA,cACA,SAKA,UACA,gBACA,oBAQA,YACA,oCAEA,YACA,gDACA,gBAGA,6BAAqB,SACrB,mBACA,SAKA,aACA,aACA,QACA,SAUA,yBACA,qBACA,UAGA,WAGA,oBACA,SAMA,YACA,0BAKA,gBAEA,OAGA,GACA,sBACA,kBAA2C,CAC3C,YAEA,EAUA,WACA,qBACA,UAGA,8BAEA,wBACA,UAIA,mBAIA,yDAGA,oCAGA,8BACA,qCACA,yBAGA,yBAEA,iBAGA,UAGA,6BACA,aAGA,4BACA,qBACA,CAEA,CAIA,ECxJA,mBAUA,gBAEA,qEAEA,4BACA,KAIA,6CACA,cAEA,sEACA,mEAEA,mCACA,QAEA,QACA,S8V7BA,EACA,mBASA,UACA,qBACA,QAIA,6CACA,8CACA,gCACA,4CAEA,mEACA,2BACA,QAEA,QACA,SC3BA,EACA,mBAIA,eACA,CAwBA,gCACA,QAKA,OACA,cAGA,yBACA,4BAGA,qCACA,yCAEA,4DACA,WAOA,QAIA,qCAGA,kCAGA,0DAEA,yBACK,+CAGL,2BACA,8BAKA,kCACA,QAAG,EAAG,UAEN,8DACA,mBACA,WAEA,6BACA,kCACA,wCACA,OACA,oBCzFA,MACA,mBAIA,cACA,CAEA,qBAQA,gCAUA,uBASA,kCAEA,qBACA,KACA,SACA,wCACA,OACA,CACA,KAEA,wBAGA,aAKA,SACA,OAEA,cACA,yBAIA,+CACA,MACA,yBACA,iBAEA,kCACA,MACA,iBACA,EAOA,oBACA,iBACA,6DACA,mCACA,wBAGA,wBAGA,kCAEA,GACA,6DAEA,GACA,CAOA,kBACA,MACA,wEACA,mBACA,SAEA,EACA,oBC5GA,MACA,mBAIA,eACA,CAQA,yBAqBA,wBAEA,kBAEA,8BACA,KACA,kBACA,OACA,CACA,KACA,kCACA,iDAGA,mBACA,CACA,KAEA,kBACA,OACA,CACA,KAIA,8BACA,CACA,WAMA,aACA,oBCnDA,MACA,mBAIA,eACA,CAEA,sBAGA,sBACA,iBACA,yBACA,oBACA,yBACA,sBACA,8BACA,YACA,sCACA,qBACA,mBAQA,kCAQA,yCAQA,yCASA,iCAEA,oCACA,YACA,OAaA,iDACA,QACA,eACA,aACA,wCAGA,wBACA,KAEA,oBACA,OACA,CACA,KACA,iDACA,iDACA,+BACA,0BAEA,kDACA,wBAGA,2BAEA,YACA,qBACA,GACA,gBAEA,mBAGA,MACA,oBAIA,aAEA,gBAGA,KAKA,SACA,OAEA,cACA,6CACA,+BAGA,kCACA,oCACA,UAKA,QACA,cACA,OASA,qBACA,SAEA,OAIA,8BAHA,6CAEA,oBASA,mBACA,SAEA,OAkBA,qBAjBA,KAEA,kBACA,OACA,CACA,KAIA,8BACA,CACA,2BAKA,cAeA,yBAEA,UAIA,4BAGA,mBACA,UAEA,OAAe,IAAU,KAAkB,MAAY,MAKvD,IACA,EACA,wCC1OA,MACA,mBAIA,OACA,cACA,WACA,6CACA,8CACA,EAUA,oBACA,cACA,wCACA,oBACA,SACA,UASA,aARA,CACA,QACA,OACA,YAEA,sCACA,6CACA,aAEA,ECoDA,EACA,mBAIA,sBACA,OACA,OAKA,wBACA,OACA,MCrFA,EACA,mBAIA,sBACA,OACA,aAKA,wBACA,OACA,YC7BA,EACA,QAIA,cACA,oBAQA,gBASA,4BAEA,qBACA,eACA,MACA,CAOA,YACA,qBACA,KASA,QACA,cACA,4BAEA,wBACA,cACA,KACA,OAEA,gBACA,GACA,QAEA,gBACA,GACA,UAEA,eACA,gBACA,EAKA,QACA,cACA,OACA,ECtDA,SACA,mBAIA,wBACA,OACA,gBAKA,OAMA,cAqBA,2BAaA,0BASA,yEACA,mBAEA,EAUA,aACA,qBACA,aACA,QAIA,eACA,KAUA,gBACA,UA+BA,oCAEA,oEAGA,aACA,UA2BA,uBAzBA,oCAEA,kCACA,OAEA,sBACA,aAGA,cACA,UAEA,iCACA,OAEA,sBACA,UACA,mBAIA,kBACA,aAEA,IASA,iBACA,gCAEA,eAEA,wBACA,SACA,EAOA,SACA,QAOA,iBAOA,SAQA,SAQA,YAQA,wBA2BA,yBASA,4BASA,0BASA,yEACA,mBAUA,6BACA,KAuBA,OACA,IACA,iCAGA,mHAEA,iCACA,WACA,kBAIA,sBACA,IACA,gCACA,UAGA,4BACA,qBACA,KACA,EAsBA,SACA,IACA,iCAGA,uHAEA,0BACA,cACA,WACA,6BAIA,sBACA,IACA,6BAGA,UAEA,kBADA,SAEA,EAKA,QACA,cACA,mBAEA,UACA,2BAGA,sCACA,qBAGA,aACA,UAOA,WACA,MACA,oBACA,qBACA,iBACA,2BACA,WACA,EAqFA,StWlgBA,SACA,iBACA,MAQA,uCCFA,mBAIA,sBACA,OACA,IAIA,wBACA,OACA,uBAIA,OACA,gCAKA,sGACA,GAOA,EACA,QAQA,mBAMA,MAMA,cAMA,WACA,GAOA,SACA,2BACA,MACA,oBACA,yBACA,cACA,EAOA,QACA,MACA,cAEA,OAMA,eACA,qBACA,mCACA,uBACA,MAQA,oBACA,cACA,WACA,cACA,WAA0C,eAC1C,mCACA,qCACA,mCACA,WACA,qBACA,gBAEqB,WACrB,4CADA,UAIA,KACA,kDACA,GACA,mCACA,mBAEA,OAEA,EAMA,eAEA,YACA,wCACA,6BAEA,eACA,OsWvIA,EACA,QA6BA,mBACA,IAEA,MACA,qBACG,QAIH,OACA,GACA,UACA,CAEA,qCACA,IACA,sBAGA,kDACA,kBAGA,uDACA,YAEA,+CAEA,0BACA,aAGA,wBAOA,oCAEA,iEAGA,UAEA,YAAe,CACf,SACA,EACA,EACA,ErW/EA,QA8CA,mBACA,IACA,GACA,EACA,EAEA,cACA,QAEA,IAGA,IACA,mBAEA,IAIA,eACA,IACA,WACA,KAEA,QAEA,2BAIA,iBACA,CACA,QACA,IACA,IAIA,uBACA,OAGA,eAEA,OAEA,UACA,cACA,6BAGA,UACA,UAEA,wCAGA,eACA,CACA,SAEA,SAGA,gBACA,UACA,UAKA,uBACA,2BAEA,uCACA,IACA,sBAGA,gCAGA,gBACA,YAGA,kDACA,kBAGA,uDACA,YAGA,uBACA,+BACA,UACA,cACA,iBAEA,oBAKA,mCACA,wBAGA,oBAGA,wBACA,YAEA,SACA,EACA,EAOa,EC7Kb,mBAIA,wBACA,OACA,YAKA,YACA,MACA,2BACA,kCACA,8BACA,2BAWA,sBACA,qBAEA,eAEA,+CAGA,sBAEA,mDAEA,eAeA,6BACA,qBAEA,eAEA,qDACA,+CAIA,eAKA,8DACA,yDAIA,iBAEA,8CAGA,OAaA,yBACA,kCAGA,gBACA,kCACA,gCACA,WACA,gBAAwC,QAGxC,mCACA,+BAAuC,CACvC,SACA,EAEA,EAUA,4BACA,0BAEA,0CAEA,aqWxHA,EACA,mBAKA,iBACA,CAQA,cAcA,cAKA,UACA,qBACA,UAEA,kDACA,iFACA,aAsBA,WAAsB,GACtB,qBACA,UACA,aACA,gDAEA,yBACA,MAEA,2CAEA,iDAEI,kBACJ,oDAEA,uBAEA,8BAEA,yCAGA,eACA,CACA,ECnGA,EAEA,SASA,OACA,mBAIA,OACA,cAEA,qCAAwC,CAIxC,qDACA,CACA,cACA,oBACA,CACA,IACA,QACA,eAOA,8BAGA,+BACA,YACA,oBC3CA,MACA,SAKA,OACA,mBAIA,OACA,cACA,WAEA,oCACA,oBACA,UACA,UAUA,aATA,SACA,aACA,YACA,SAEA,qDAEA,6CACA,cAEA,EClBA,EACA,mBAIA,sBACA,OACA,OAKA,wBACA,OACA,MCxBA,EAEA,SASA,SACA,mBAIA,OACA,cAGA,qCAAwC,CAExC,qDACA,CACA,cACA,eACA,CACA,KACA,QACA,cAOA,gCAGA,+BACA,YACA,oBC1CA,MACA,SAKA,SACA,mBAIA,OACA,cACA,WAEA,oCACA,oBACA,UACA,UAUA,aATA,SACA,aACA,YACA,SAEA,qDAEA,6CACA,cAEA,EClBA,EACA,mBAIA,sBACA,OACA,OAKA,wBACA,OACA,QACA,EzWdA,mBAYA,UACA,iBACA,gCACA,eASA,UACA,qBACA,UACA,aACA,gCAEA,mCACA,SACA,4BACI,gBACJ,kBAGA,YAGA,cACA,gBACA,CACA,EAQA,YACA,iDAGA,iCACA,MAQA,gBACA,SACA,MAGA,4CACA,8BAEA,cAMA,gCACA,OAaA,kBAEA,8BACA,6BACA,QAMA,6BAJA,6BAKA,iCAEA,QAGA,cADA,SAKA,OACA,mBAKA,kCAEA,UACA,SACA,EASA,iBACA,SAGA,gCACA,YAGA,oBAEA,gBAGA,aACA,OAMA,sBACA,SACA,2BAOA,qBACA,ECnKA,mBAIA,OACA,cACA,iBAEA,mCAEA,mCACA,YACA,wBAIA,iCACA,8BACA,qBAEA,QAEA,iCAAuC,yBACvC,cAKA,YACA,cACA,wBAOA,6EACA,2BACA,yCAEA,6CACA,4BACA,uCAEA,yBACA,mBAEA,OACA,EACA,wCyWpDA,MACA,mBAIA,OACA,cACA,WACA,8CACA,wBACA,gBACA,UAUA,aATA,SACA,aACA,EAGA,qDAEA,qDACA,gBAEA,ECnBA,EACA,mBAIA,sBACA,OACA,OAKA,wBACA,OACA,YACA,EzWvBA,SAIA,uBACA,QAQA,mBACA,IACA,mBAGA,4BACA,mBAGA,6BACA,mBAQA,gDAQA,aAQA,cACA,aASA,cACA,kCAEA,MACA,IASA,WACA,iCAEA,MACA,IAKA,QACA,UACA,OAQA,OACA,aACA,uBAEA,2BACA,cAOA,kBACA,YAEA,mCACA,4DACA,sBAEA,YACA,KAOA,sBACA,cA4BA,kBACA,UACA,SA7BA,YAEA,iCACA,+CAGA,YACA,kDACA,GACA,uCACA,SACA,iBAGA,QAGA,iCACA,WACA,WAEA,mBACA,4CAEA,MAEA,EAUA,eACA,YACA,iBAEA,gCAEA,yBACA,+BACA,WACA,WAEA,uBACA,qBAGA,OACA,IAEA,oCACA,mDAEA,YACA,OACA,EAeA,EAWA,S0W3MA,SAAyB,sBAOzB,gBACA,QAWA,oBACA,IACA,mBAcA,kDAMA,gBAMA,wCACA,QAOA,OACA,oBACA,sBACA,kBAGA,wBACA,aASA,gBARA,gBACA,QAKA,UAUA,gBACA,2BACA,YAEA,kCAEA,yCACA,WACA,WAEA,uBACA,QAGA,wCAEA,aACA,MAEA,oCACA,mDAEA,YACA,MACA,EAOA,mBACA,+EACA,gBAOA,kBACA,oBACA,iBAYA,sBACA,SAEA,qBACA,MACA,ECpIA,SACA,mBAIA,OACA,cACA,WAEA,iCAEA,YACA,gBAyBA,iBACA,uCAOA,qBACA,wBAHA,KAIA,EAEA,GC5CA,SACA,mBAIA,sBACA,OACA,OAKA,OACA,cAEA,mBAEA,YACA,UAMA,yCAEA,0DACA,iBAEA,kBAKA,EACA,QACA,iBACA,MAEA,qBACA,QAEA,SACA,gEAEA,6CACA,2BACA,6BACA,QAEA,qBACA,MAEA,QACA,mBACA,OAIA,EACA,G1W1DA,eDbA,KAOA,iBACA,IACA,mBAGA,6BACA,mBASA,qCAQA,cACA,aA0BA,UACA,kCACA,YyW7DA,GvWaA,QAIA,cACA,aACA,EASA,SACA,cAGA,WACA,QACA,+BAGA,UACA,gCACA,CACA,gBACA,gBAGA,UASA,YACA,cAEA,WACA,QACA,+BAGA,UACA,gCACA,CACA,gBACA,gBAGA,UASA,qBACA,cACA,mCAGA,aAKA,QACA,gBAKA,SAEA,gBACA,SAGA,eACA,KAQA,qBACA,cACA,4BAGA,SACA,gBAEA,EACA,EAQqB,SC5HrB,gBACA,sBAOA,YAOA,eAOA,+BCVA,WCIA,mBAIA,OACA,cACA,iBACA,WACA,MAEA,8BACA,CACA,YACA,sBACA,yBACA,CACA,MACA,MAGA,yCACA,OACA,oBAEA,yCACA,OACA,iCAEA,6DACA,6BACA,MACA,MACA,iBAA6B,CAE7B,8CAAmF,oBAC1E,mBACT,MACA,MACA,UAEA,aACS,gBACT,MACA,MACA,UAEA,gBACA,KACA,oBACA,SAAmC,qBACnC,WAIA,sBAHA,kCAEA,WAGS,UACT,KAUY,EC3EZ,mBACA,eACA,CAEA,2BACA,WAEA,cACA,aACA,OAcA,oBCvBA,MAEA,YAUA,UACA,mBAIA,wBACA,OACA,QAKA,OACA,6BACA,SAQA,qCAIA,oEAEA,wCAEA,kBACA,oBACA,cAEA,sCACA,6BACA,WAEA,sBACA,UACA,wCAGA,OACA,mCAA4D,eAG5D,QAEA,CAAG,EAAG,UAGN,UACA,sEAGA,+DAAsF,UAGtF,yCACA,oBACA,4BACA,mBAEA,OAAG,EAAG,UACN,QASA,kBACA,cACA,mBACA,SACA,iBAGA,WAKA,QACA,YAEA,kBAKA,QAGA,mBACA,aAIA,iCAEA,uBACA,4BASA,gBACA,WACA,+CACA,cAIA,MACA,aACG,oBACH,uDAIA,2BACA,mBAEA,OASA,iBAEA,gBACA,WAGA,iCACA,aAGA,gBACA,YAGA,oBAEA,oCACA,KAgBA,qCAfA,oBAGA,kBACA,MACA,SAEA,SACA,SAEA,MACA,2BAEA,KAUA,oBACA,qBACA,UACA,WACA,aACA,cAGA,yCACA,iCACA,8DAGA,YAMA,wBALA,GACA,eAGA,KAKA,MAIA,0BAEA,0DACA,YAIA,YAFA,+BAYA,kCACA,qBACA,mBACA,qBAEA,4CAIA,wBACA,mBACA,YAGA,MAQA,oBACA,qBACA,oBACA,YACA,SACA,aAEA,cAIA,iCACA,mCAEA,QAKA,qBAJA,mBACA,YAEA,KAGA,CACA,QAQA,4BACA,+BACA,mBACA,YACA,EAWA,oCACA,qBACA,UACA,oBAIA,YACA,8BAAiC,uBACjC,kDAEA,oCAIA,cACA,IAQA,mCACA,qBACA,sBAGA,2CACA,OAMa,ECtVb,mBAYA,UACA,8CAEA,oCAEA,0CACA,wBAIA,MASA,WACA,qBACA,6BAEA,mCACA,wBACA,WACA,EoWtCA,EACA,mBAIA,OACA,6DACA,QACA,ElWNA,mBAOA,iBACA,CAEA,iBAAyB,eAQzB,YAQA,kBAQA,kBAOA,qCAOA,wCAEA,mCAEA,8BACA,KACA,iBACA,OACA,CACA,KACA,qCAGA,0BACA,MACA,eAGA,YASA,oBACA,qBAEA,QAIA,SAHA,6BAEA,UAWA,sBACA,oBAEA,QAKA,SAJA,wBACA,8BAEA,OAMA,SACA,gBACA,QAKA,QACA,gBACA,OACA,oBmWrHA,MACA,mBAIA,eACA,CAQA,kBAQA,kBAQA,eAQA,wBAEA,8BAEA,8BACA,KACA,mBACA,MACA,aACA,CACA,KACA,WAEA,yBACA,uBACA,6BAGA,gBAKA,SACA,OAEA,sBACA,+BACA,EAEA,SAIA,uCACA,CACA,IACA,EAKA,SACA,cACA,QAKA,QACA,cACA,OACA,0DCpFA,MACA,mBAIA,eACA,CACA,6BAOA,oBAOA,uBAMA,8BAMA,8EACA,2CAMA,kFAQA,2BAQA,gCACA,iBACA,8BACA,mCACA,mBAEA,eAEA,wBAGA,0BACA,KACA,kBACA,OACA,CACA,KAGA,qCAEA,eACA,MACA,kBACA,oBAGA,mBAIA,SACA,OACA,uCACA,YAAuB,MACvB,OACA,MACA,kBACA,oBACA,+BAEA,kBAEA,+BACA,QACA,EAWA,uBACA,qBACA,QAUA,aATA,CACA,QACA,OAEA,8BAA+B,YAAc,CAE7C,uCAEA,SAQA,0BACA,qBACA,gBACA,WAGA,iBAFA,gCACA,OAEA,oBhWjJA,MAEA,YACA,qBAwCA,KACA,mBAIA,eACA,CAEA,sBASA,4BASA,mBAiBA,uBASA,qBAUA,yBAQA,yBAgBA,+BAEA,oCACA,KACA,iBACA,OACA,CACA,KACA,wCAAuD,qBACvD,qBACA,6CACA,oCAGA,oBACA,UACA,oBAIA,2BAEA,SAOA,OACA,MACA,YAOA,OACA,MACA,YAiCA,YACA,MAEA,kBACA,iCAA2C,GAC3C,cACA,kBACA,GACA,kBACA,sBACA,sBACA,kBACA,sBAEA,qBACA,WAGA,qBAAS,cAA4B,QAErC,yBAAwB,cACxB,YAmCA,OACA,MAEA,2CACA,MACA,eAEA,sBAEA,cAEA,OAKA,4DACA,0BAKA,QACA,MAEA,iCAIA,+DAEA,0DAEA,UAEA,OASA,iBACA,MAEA,yBACA,yBAGA,sDACA,WAGA,cAGA,mBAIA,uBACA,UAEA,WAAG,EAAG,CAGN,qDACA,MACA,WACA,EAOA,eACA,gCACA,uCACA,SAQa,EAiCb,yBAkBA,GACA,uBA4KA,GACA,oBAGA,yBACA,KACA,sCACA,OAGA,wCACA,KACA,yCACA,2BAGA,yCACA,KACA,iCACA,2BAKA,yCACA,KACA,4BACA,OAGA,4CACA,KACA,uBACA,2BAGA,6CACA,KACA,+BACA,2BAKA,yCACA,KACA,6BACA,OAGA,4CACA,KACA,gCACA,2BAGA,6CACA,KACA,wBACA,2BAKA,qCACA,KACA,sCACA,OAGA,wCACA,KACA,yCACA,2BAGA,yCACA,KACA,iCACA,2BAKA,yCACA,KACA,4BACA,OAGA,4CACA,KACA,uBACA,2BAGA,6CACA,KACA,+BACA,2BAKA,yCACA,KACA,6BACA,OAGA,4CACA,KACA,gCACA,2BAGA,6CACA,KACA,wBACA,2BASa,cC7qBb,mBAIA,wBACA,OACA,mBAKA,OAOA,WAaA,gCACA,6BACA,SACA,uBAGA,uDAGA,MACA,IASA,iBAGA,uCAGA,gDACA,QAQA,kBACA,+CAEA,oBACA,IAQA,WACA,oBACA,MAUA,OACA,mBAMA,mBAIA,2FAEA,2CAIA,+BAGA,aACA,QASA,UACA,UAMA,wBAIA,sHAEA,mBAGA,sBAGA,mDAKA,aAGA,mBAEA,MAEA,kBAEA,SAQA,kBAEA,uCAGA,+BACA,sBAWA,OAAS,2BAA8B,IACvC,WAEA,8BACA,0BACA,sBASA,sBACA,gCAGA,SAQA,aANA,0BAA+B,KAC/B,cAIA,oBAEA,oBCxNA,MCOA,mBAIA,sBACA,OACA,IAIA,OACA,MACA,qBACA,aAOA,gBACA,cACA,WACA,wDACA,wBACA,0BACA,UAQA,aAPA,SACA,aACA,EAEA,sCACA,gDACA,cAEA,EAOA,cACA,cACA,mBACA,SAOA,+CAMA,yCAEA,mBACA,+CACA,kCAAoD,oDACpD,aACA,aACA,yCACA,MACA,aAEA,0CACA,MACA,cACA,GAEA,gCACA,MACA,gBAEA,YAEA,WAHa,aAKb,MACA,cACA,yBACA,uCACA,2BAEA,aAMA,YACA,UAGA,yBACA,wBACA,qCACA,wCACA,0BACA,WACA,eAQA,mDACA,2BACA,SAOA,aACA,MAGA,uCAEA,mCAEA,QAOA,iBACA,wCACA,K8V/IA,EACA,mBAIA,sBACA,OACA,OAKA,wBACA,OACA,sBACA,oBCXA,MACA,mBAIA,sBACA,OACA,UAKA,wBACA,OACA,OCAA,EACA,mBAIA,eACA,CAOA,yBAQA,8BAWA,sDAQA,wDAcA,8CAEA,uBACA,KACA,kBACA,OAEA,kCACA,MACA,gBAIA,mDACA,qBACA,MACA,EAKA,QACA,iBACA,OAQA,EACA,mBAIA,eACA,CAWA,kBAQA,yBAEA,sCAEA,8BACA,KAEA,mBACA,OACA,CAEA,kBACA,gBACA,iBACA,8BAGA,0BAEA,iBACA,sDACA,sCAGA,0BACA,EAGA,KAKA,OACA,cACA,OACA,oB/VxKA,MCIA,mBAIA,OACA,cACA,WAEA,+CACA,SACA,2BACA,eAsBA,aArBA,cACA,UAEA,yCACA,SACA,aACA,EAEA,4CACA,yBACA,8BACA,6BACA,WACA,+BACA,CACA,OAGA,YACA,CACA,IAEA,EACA,wCCjCA,MACA,mBAIA,eACA,CAQA,0BAAyC,iDACzC,EAKA,OACA,cAGA,sGACA,MAUA,0BACA,cACA,WACA,sBAEA,6CAIA,yBACA,gCACA,YACA,+BACA,qBAEA,UAGA,aAOA,MANA,aAEA,6BAKA,mBAGA,OAcA,MARA,iBAIA,2BAGA,OAJA,UAQA,CACA,QACA,QACA,QAGA,EACA,gBAK4C,gBC/F5C,mBAYA,WACA,cACA,iBACA,aACA,iBAEA,4BACA,WAGA,mBACA,GAGA,8BACA,YAGA,QAEA,OACA,0BAEA,cAGA,kBAGA,qBACA,0BAEA,YACA,E6VzCA,EACA,mBAIA,wBACA,OACA,cAKA,OAEA,+BACA,gBACA,QAAG,EAAG,UACN,UAwBA,iBAAgC,GAChC,wBACA,CACA,eACA,sBACA,kBAEA,OAwBA,cAA6B,GAC7B,wBACA,CACA,eACA,mBACA,kBAEA,OA+CA,iBAAgC,GAChC,wBACA,CACA,eACA,sBACA,kBAEA,OAYA,qBACA,SAAwB,cAAY,gBAA2B,eAAiB,GAEhF,gBACA,WACA,eACA,oBAEA,IA4CA,E5VxMA,mBAIA,sBACA,OAIA,OAIA,OACA,cACA,iBACA,mBACA,mBAEA,yBACA,iBACA,CACA,WAIA,+CAEA,8DAGA,SACA,cAEA,6DACA,sDACA,SACA,MACA,gCACA,CACA,OAEA,eAIA,YACA,SACA,CAEA,gDACA,GACA,gBACA,qBACA,6BAAmD,CACnD,wCACA,6CACA,oBACA,YAEA,wDACA,eACA,GAGA,2BACA,UACA,GAIA,aACqB,QAErB,uBAEA,UAEA,CACA,EAUA,WACA,aAiEA,oCACA,mBACA,gCACA,iBACA,KACA,gBACA,cAtEA,WACA,iBACA,cACA,oBACA,kDACA,+BACA,YACA,sBACA,0BACA,8BACA,OACA,SAOA,kCANA,gBACA,UACA,sCACA,+BACA,cACA,IACS,aACT,oCACA,iBACA,cACA,iBAGA,kBACA,iBACA,oBACA,oBACA,QACA,SAGA,SAFA,UAGA,YAAe,OAAe,KAC9B,UACA,MACA,+BACA,CACA,OAGA,WACA,GACA,GAAS,cAGT,wBACA,qBAGA,QACA,mCACA,SACA,eAGA,WAEA,uCACA,GACA,SACA,EACA,EAYa,ECjKb,mBAIA,wBACA,OACA,aAKA,sBACA,OACA,U4VZA,EACA,mBAIA,sBACA,OAKA,UAKA,wBACA,OACA,WACA,E3V7BA,mBAYA,UACA,qBACA,UACA,0BAEA,0CACA,wCACA,OAYA,WAAsB,GACtB,qBACA,UAEA,uBACA,oCAEA,6BACA,mCACA,oBAGA,YACA,EAQa,EC/Cb,mBAIA,wBACA,OACA,WAKA,OACA,cACA,WACA,UAEA,gCAGA,yCAAuC,gBAEvC,yCAAuC,wBAMvC,+CAEA,iCAAwD,iBAKxD,wDACA,eACA,QAGA,sCAKA,0CAGA,gBACA,GAIA,2BAGA,eAAW,CAAa,8CAKxB,sDACA,gCAGA,GAAI,oCACJ,4CAEA,gBAAG,EAAG,UAGN,8CAEA,GAIA,0CACA,4CAEA,gBAAG,EAAG,UAON,kDAEA,kDACA,yCACA,4BAAG,EAAG,UACN,UAQA,4BACA,qBAEA,+CACA,oBAEA,yBAEA,gDACA,aAKA,uBAHA,iBAIA,CAiCA,EACA,iCACA,CACA,aACA,KACA,MACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,IACA,OCvKA,mBAOA,iBACA,CAmBA,cACA,eAKA,UACA,iDAEA,4EACA,+EACA,QAUA,WACA,qBACA,UAEA,aAEA,oBACA,gCACA,4BACA,cAGA,kBACA,UACA,SAGA,WACA,EASa,EC/Eb,SAQA,YACA,mBAIA,eACA,CAEA,mCACA,SACA,CAAK,2CACL,wBAAK,oDACL,uBAAK,oDACL,uBAAK,oDAGL,yBAKA,sBACA,OACA,IAKA,OACA,cACA,sBAEA,qBAEA,YAEA,UAEA,6CACA,gBAGA,wBAEA,6BAKA,iCACA,YAKA,YAGA,cACA,wBACA,wBAGA,4DACA,uDACA,4BAEA,sBACA,2BAEA,YAEA,EyV5EA,EACA,QAOA,iBAGA,OAKA,gBAEA,MACA,ECnBA,SACA,mBAIA,eACA,CAEA,sBAQA,sBAYA,mCAEA,oCACA,KAEA,iBACA,OACA,CACA,KACA,WACA,sCAIA,8CAEA,YAGA,yBAGA,oBAOA,QACA,eACA,4BAEA,OAOA,YACA,yBACA,uBAEA,KACA,iCAEA,cAEA,OACA,CACA,oBChCA,MACA,mBAUA,mBACA,CAEA,sBAQA,kBAgBA,kBAQA,qBAUA,sBAQA,kCAYA,uBAEA,wBACA,KAEA,iBACA,OACA,CACA,KACA,yCAIA,0BAMA,yBACA,YACA,OACA,CAuCA,yBAKA,SACA,OAGA,kDACA,mBACA,MAGA,4CAGA,wCAGA,oCAEA,wBACA,MACA,yBACA,aACA,UAEA,IAGA,yCAEA,kCACA,cACA,UAEA,IAGA,2CACA,MACA,QAEA,GAGA,uBACA,mCACA,QAKA,QACA,iBACA,OACA,oBCjOA,MACA,mBAIA,eACA,CAQA,6BAGA,oDACA,OAKA,SACA,OAEA,gCACA,UAQA,mBACA,SAEA,OASA,oBAPA,mBACA,YACA,OAIA,yBAEA,oBC5DA,MACA,mBAIA,cACA,CAQA,wBAQA,qCAQA,uBASA,gCACA,iBACA,wBACA,mCACA,mBAEA,eAGA,oBAIA,gCACA,KAEA,gBACA,OACA,CACA,KACA,WAIA,0BAEA,OAKA,SACA,OAGA,6BACA,8BAGA,oCACA,yBACA,QAEA,iCACA,4BACA,QAGA,iCACA,QAKA,QACA,mBACA,YAKA,YACA,mBACA,WC3GA,EACA,mBAIA,cACA,CASA,6BAQA,mBAEA,oBAEA,8BACA,KAEA,gBACA,OACA,CACA,KACA,qBACA,yBAEA,oCACA,uBAGA,sBACA,CACA,WAIA,cACA,YAqCA,aAKA,SACA,OAEA,wBACA,WACA,WACA,GAEA,gCAGA,6BACA,+BACA,UAKA,QACA,cACA,OACA,wC7V7CA,mB8V9DA,MACA,mBAIA,OACA,cACA,WACA,IACA,UACA,SAEA,8CACA,SACA,KACA,wBACA,4BACA,eACA,qBACA,gBACA,SACA,cAEA,QACA,+CACA,6BACA,eAEA,qDACA,aACA,aACA,yBAIA,WACA,oBACA,KACA,SACA,MAqBA,MApBA,0BACA,CACA,QACA,YAEA,6BAAyC,YAAc,QACvD,oEACA,cAEA,kEACA,eAEA,wBACA,MAEA,kCACA,sDAAkF,gBAClF,qCACA,OACA,IAEA,ECzDA,EACA,mBAIA,sBACA,OACA,OAKA,wBACA,OACA,SA6EA,oB7VxGA,MACA,YAWA,mBCFA,gBCGA,mBAIA,OACA,cACA,mBACA,eACA,WACA,SACA,YASA,uBACA,SACA,uBACA,SAGA,0DAEA,wEACA,CACA,cAGA,sDAGA,iCAFA,kCAGA,+CAEA,gFAAgG,UAEhG,6FAA2G,UAE3G,gDACA,4BASA,4BACA,6BACA,cACA,wBAEA,sCACA,cACA,yCACA,SACA,UACA,gBAEA,WACA,0BAEA,QAOA,WAJA,6BAKA,MAEA,SACA,aACA,uBAGA,eACA,uBAIA,cACA,SACA,QAEA,iCADA,MAEA,CAGA,QASA,yBACA,gBACA,SACA,OACA,4BACA,WACA,YACA,WAEA,uBACA,yBAEA,0BAGA,eACA,CACA,CASA,qCACA,qBACA,0BACA,sBACA,6CACA,oBACA,cACA,MAGA,uBAFA,eAIA,CAOY,oB4VzJZ,MACA,mBAIA,sBACA,OACA,IAKA,wBACA,OACA,cClBA,EACA,mBAOA,iBACA,CAQA,cAQA,sCACA,YAEA,UACA,iCAIG,SACH,GAKA,UACA,8CAEA,uCAEA,MACA,QACG,8CACH,wBACA,gCACA,YACA,sBAEA,aAYA,WACA,WAEA,oBACA,6BAEA,mCAGA,gBACA,4BAEA,+BAEA,iBACA,EACA,gF3VhEA,MACA,SAEA,MACA,MACA,aACA,0BACA,EAIA,mBACA,MACA,aACA,qBACA,YAIA,8BACA,MACA,kBACA,6BACA,YAIA,sCACA,MACA,oBACA,yBACA,YAIA,uCACA,MACA,mBACA,8BACA,YAYA,+BACA,SACA,UACA,WACA,YAQA,GC1EA,mBAIA,sBACA,OACA,IAKA,wBACA,OACA,mBAKA,OACA,cACA,iBACA,WACA,SAGA,+CAGA,iCAIA,kCAA2B,iBAG3B,uBACA,8BACA,wDAGA,6EAAoF,UAGpF,oCACA,YAoCA,oBCtFA,MACA,mBAeA,mCACA,qBACA,QACA,qBACA,oBACA,4BACA,wBACA,6BAEA,KAIA,OACA,cACA,sBACA,gCACA,uCACA,aAEA,gBAOA,iBACA,cACA,SAA4C,oBAC5C,oCACA,wBACA,gBACA,UASA,aARA,SACA,aACA,KAEA,sCACA,oDACA,2DAA+E,SAC/E,SAEA,EAQA,EC3DA,mBAIA,sBACA,OACA,OAKA,wBACA,OACA,YyVrBA,EAcA,mBAIA,sBACA,OACA,IAKA,wBACA,OACA,cAKA,OACA,cACA,uBAMA,iDACA,4BACA,cAEA,MAAI,EAAG,UAEP,QAKA,YACA,cACA,sBAGA,sBAUA,+CAQA,mCAGA,2CAGA,4DACA,MACA,iBAGA,0DACA,MACA,iBAAG,EAAG,UACN,QAOA,kBACA,cAEA,yBACA,qCAGA,gBAEA,oBAGA,oBANA,cAaA,eACA,cAEA,YACA,WAEA,kCACA,6BACA,WACA,kBACA,MAIA,iBAnHA,wBA0HA,eACA,MAIA,sCACA,SAQA,iBACA,wCACA,QAyBA,EvV5KA,mBAYA,UACA,qBACA,UAEA,6CACA,0EACA,WAkBA,WACA,qBACA,mBAEA,wBAEA,kBACA,WAGA,iDAEA,gDAEA,4BAGA,kBACA,eAIA,gBACA,cAEA,uBAEA,wBAEA,kBAGA,8BACA,YACA,CAAI,KAGJ,+CAEA,qBACA,uBAEA,eACA,CACA,EwVnFA,EACA,mBAIA,UACA,kEACA,WAUA,UACA,qBACA,mBAEA,wBAEA,WACA,oEAGA,qBACA,0BAEA,aACA,EACA,EvVvCA,gBAOA,eCiIA,QASA,mBAOA,MAQA,aAQA,4CASA,4BAUA,UAGA,mFAIA,YACA,2CAOA,gDAOA,+DAIA,4BAEA,mBAUA,2BACA,cAWA,sBAWA,wCAYA,4CACA,6BACA,8BASA,gCACA,cACA,8BASA,qCACA,6BACA,8BAIA,6BAUA,4BACA,cAGA,kBAUA,0CACA,6BACA,8BACA,uBAWA,sCACA,8BAYA,oBACA,gBAUA,sDACA,6BACA,8BAUA,0DAMA,aAMA,4BAIA,eACA,4CAeA,2BACA,8BAWA,iDACA,eACA,6BACA,iCAcA,yCAIA,eACA,4CAOA,oBASA,2BACA,cACA,YASA,6BACA,+CACA,UAUA,mBACA,4CACA,2BASA,kBACA,wBACA,gCACA,gCACA,IACA,EAOA,yBACA,GACA,gBAQA,4BACA,wBACA,iCACA,UACA,EAUA,2CACA,cAEA,iCACA,qDACA,gBACA,EAUA,uCACA,MACA,mCAKqB,oBuV/gBrB,MAEA,SAQA,mBACA,mBAIA,OACA,cAGA,qCAAwC,iBAExC,8BACA,mBAAsC,kBAEtC,4BACA,iBACA,MACA,MACA,eACA,CAGA,gBACA,KACA,qCAKA,kCACA,mCAGA,0CAGA,iBACA,qBAgBA,sBACA,cACA,mBACA,UAGA,uCACA,0BAEA,wCACA,gDACA,gCAIA,gCACA,gBACA,SACA,iBAGA,OACA,CAGA,gDAEA,aAMA,eACA,kBACA,WACA,oBAEA,SACA,EACA,iBAb8C,UAC9C,4BAA8C,UAC9C,+BAAiD,UACjD,+BAAiD,UAEjD,WASA,ECxGA,EACA,mBACA,eACA,CAEA,2BACA,OAEA,cACA,aACA,OAeA,oBCnBA,MACA,mBAIA,eACA,CACA,mBAOA,oBAOA,uBAMA,8BAMA,sEACA,2CAMA,kFAQA,2BAQA,gCACA,iBACA,8BACA,mCACA,mBAEA,eAEA,wBAGA,0BACA,KACA,kBACA,OACA,CACA,KAGA,yBAEA,eACA,MACA,kBACA,oBAGA,mBAIA,SACA,OACA,YAAuB,MACvB,eACA,MACA,kBACA,oBAEA,iCAEA,kBAEA,+BACA,QAEA,iCACA,QAIA,QACA,mBACA,YAOA,kBACA,qBACA,gBACA,WAGA,iBAFA,8BACA,uBAYA,uBACA,qBACA,QAUA,aATA,CACA,QACA,OAEA,8BAA+B,YAAc,CAE7C,uCAEA,SAYA,4DChKA,MACA,mBAIA,eACA,CACA,mBAOA,oBAOA,uBAMA,mCAMA,4EAMA,6DAOA,iBAQA,yBAQA,gCACA,iBACA,8BACA,mCACA,mBAEA,eAEA,wBAGA,0BACA,KACA,iBACA,OACA,CACA,KAGA,4BAEA,eACA,MACA,uBACA,oBAGA,mBAIA,SACA,OACA,iBACA,MACA,uBACA,oBAEA,iCAEA,kBAEA,+BACA,QAEA,iCACA,QAIA,QACA,mBACA,YAUA,qBACA,qBACA,QAOA,aANA,CACA,QACA,OAEA,sCACA,SAQA,uBACA,qBACA,eACA,oBACA,EAqBA,aApBA,CACA,sBAEA,wBACA,YACA,OACA,CACA,KAEA,sCACA,eAGA,2CACA,UAEA,gDACA,mBACA,8BACA,IAWA,oBzVpLA,MACA,SAQA,SACA,mBAIA,sBACA,OACA,IAIA,OACA,cACA,sBAMA,sCAMA,wCAOA,0CAEA,aAEA,gCACA,gCAOA,qBACA,cACA,kBACA,yBACA,yBACA,UAuBA,2BAtBA,4CACA,2CAEA,iCACA,MACA,cAEA,gCACA,WACA,eACA,SAEA,iCACA,MACA,UACA,GAEA,8BACA,MACA,eACA,GACA,IAQA,kBACA,cACA,kBACA,yBACA,QAmBA,yCAjBA,iEACA,uCAEA,mCACA,mDACA,YACA,iBAEA,gCACA,MACA,iBAEA,iCACA,MACA,kBACA,GACA,IAQA,2BACA,cACA,wBACA,YAEA,6BAEA,CACA,MACA,gBAEA,SACA,yCACA,SACA,UAUA,SATA,uBACA,eACA,IACA,eAEA,oCAEA,gDACA,YAEA,EAOA,iCACA,kCAGA,qCACA,cAGA,kCAEA,SAEA,2CACA,yDACA,6BACA,QAEA,IAAS,EAIT,UAGA,iDACA,MACA,oBACA,UAEA,IAEA,MACA,cACA,4BACA,iDACA,2BAEA,WAMA,kBACA,MAGA,sCACA,WACA,0BAEA,2BAMA,eACA,UAGA,6BACA,wBACA,0BACA,WACA,uBAEA,uDAOA,qEACA,GAMA,kBACA,MACA,2CAGA,mCAEA,QAOA,UACA,cACA,wBACA,UAIA,iBACA,+BAMA,wBAGA,oBAIA,wBAZA,uBAIA,qBASA,+BAQA,UACA,SAGA,0CACA,0BAEA,eAEA,4CAEA,eACA,QASA,+BACA,aAiCA,2EACA,WACA,cAlCA,WACA,YACA,gBACA,4BACA,iCACA,cACA,4BAWA,iBACA,yCAUA,gCAFA,UAGA,IACA,GACA,EAWA,qBACA,mCACA,SAQA,yBACA,mCACA,YASA,yBACA,yCACA,WAQA,mBACA,kCACA,kBASA,mBACA,uBACA,0CACA,kBAWA,0BACA,6BACA,SACA,gBACA,4BACA,iBACA,0DACA,uBAAgB,CAChB,SAYA,0BACA,2CACA,eACA,wBACS,wBAGT,2BACA,oBACA,cACA,eACA,iCAMA,aAEA,KALA,IAMA,CAMuE,ECrbvE,mBAIA,sBACA,OACA,OAKA,wBACA,OACA,MClBA,EACA,mBAOA,iBACA,CAQA,4CASA,UAKA,UACA,iBACA,gCACA,eAOA,UACA,qBACA,UACA,kCACA,wCAGA,qBAGA,oBAGA,MAEA,qBACA,YACA,OAkDA,6DAGA,wBAGA,UAEA,MAKA,aAKA,WAAoB,WAGpB,eACA,WAEA,KAEA,mBACA,2CAEA,QAmBA,OAGA,IAEA,eACA,yCACA,+BAKA,mBAGA,IAGA,WACA,UAMA,kBACA,aAGA,8BACK,gBAGL,uEAKA,iCAGA,yBAR4B,uBAC5B,iBACK,YAOL,EAQA,YAEA,iDAEA,+EACA,IAQA,gBAEA,SACA,MAGA,4CACA,8BAEA,cAOA,gCACA,OAUkB,ECrPlB,mBAQA,iBACA,CASA,wCACA,CAKA,UACA,qBACA,eAOA,UACA,qBACA,UACA,sCAEA,mCACA,oBAGA,eAGA,2EACA,aAEA,YAOA,YACA,uBAGA,4BACA,uCAIA,UAIA,eAIA,4BAEA,aACA,CACA,EAQA,gBAEA,iDAGA,kCACA,YAGA,6BAGA,wBACA,2BAEA,oBAEA,kEACA,mBAKA,mCAGA,eACA,eAGA,CACA,QAGA,CACA,QC1HA,EEuBA,mBAIA,sBACA,OACA,IAKA,OACA,cAMA,0CACA,gBACA,iCAIA,sBACA,SAEA,qDAEA,6CACA,4CAEA,qBACA,sCACA,sCAEA,8DAAoE,UACpE,iCACA,0DAAiE,UACjE,iCAEA,8CACA,sDACA,sDACA,wDAEA,wDACA,0DAAiE,UACjE,gCACA,0DAA8D,UAE9D,8CAAsD,UACtD,+CAAsD,UACtD,+CAA0D,UAC1D,+BAGA,+CAA4D,UAG5D,gDACA,oDAGA,kDACA,kDAEA,8CAIA,wCACA,2BACA,yCAEA,sDACA,8BAEA,iBACA,mBAEA,OAIA,mCAEA,IAIA,6DAEA,eAIA,uBAEA,wBAIA,qBAEA,UAIA,gDAMA,4DAEA,iBACA,mBACA,WAAG,EAAG,UAEN,iBACA,YACA,8BAEA,SACA,wBACA,WAEA,IAGA,qCACA,wDACA,eACA,wCoV5JA,MACA,mBAIA,OAEA,qBACA,2CACA,4CACA,EASA,kBACA,cACA,wCACA,oBACA,SACA,UAUA,aATA,CACA,QACA,OAGA,qDAEA,6CACA,aAEA,EC9BA,EACA,mBAIA,sBACA,OACA,OAKA,wBACA,OACA,MCdA,EAEA,qCAEA,SACA,SAkBA,yDACA,SACA,OACA,CACA,UACA,IACA,OACA,SACA,OACA,eACA,eACA,cACA,aACA,OAGA,eACA,SACA,CACA,kBACA,kBACA,IAGA,kCAEA,oBCtEA,GAGA,aACA,OACA,KAAC,IAED,GAEA,0CACA,OAAC,SAED,CACA,4BACA,OAI4C,CAE5C,2BCdA,iBACA,WACA,+BACA,IAEA,6DCPA,KACA,CACA,YAIA,kDACA,SAIA,oCAKA,yBAKA,6BAmBA,6BACA,OACA,eAEA,yDChCA,iBACA,WACA,kBACA,CACA,QACA,CAEA,mBCtBA,QAEA,yCAEA,OAKe,qBAAf,EAEA,cACA,EAEA,oBAEA,+BA2BA,wBC5CA,UAAojJ,ijJCYpjJ,CAEA,qBAEA,0CAEA,YACA,mBAIA,2CACA,mBAGA,iCACA,wCA4BA,oFAEA,OACA,EACA,uCAAwC,CAAW,QACnD,mCAAwC,CAAW,QAGnD,0DACA,QAIA,YAEA,YAGG,sBAEH,mBAGA,wBAIA,6BACA,GAGA,GACA,2BCvFA,QAEA,yCAEA,OAKe,qBAAf,EAEA,cACA,EAEA,oBAEA,+BA2BA,wBC5CA,UAA+3B,i4BCC/3B,QAEA,yCAEA,OAKe,qBAAf,EAEA,cACA,EAEA,oBAEA,+BA2BA,wBC5CA,UAA0G,4GCC1G,QAEA,yCAEA,OAKe,qBAAf,EAEA,cACA,EAEA,oBAEA,+BA2BA,wBC5CA,UAAuX,yXCCvX,QAEA,yCAEA,OAKe,qBAAf,EAEA,cACA,EAEA,oBAEA,+BA2BA,wBC5CA,UAAooC,soCCCpoC,QAEA,yCAEA,OAKe,qBAAf,EAEA,cACA,EAEA,oBAEA,+BA2BA,wBC5CA,UAAowC,swCCCpwC,QAEA,yCAEA,OAKe,qBAAf,EAEA,cACA,EAEA,oBAEA,+BA2BA,wBC5CA,UAA6U,+UCC7U,QAEA,yCAEA,OAKe,qBAAf,EAEA,cACA,EAEA,oBAEA,+BA2BA,wBC5CA,UAA0rD,0rDCC1rD,QAEA,yCAEA,OAKe,qBAAf,EAEA,cACA,EAEA,oBAEA,+BA2BA,wBC5CA,UAAk5I,g5ICAl5I,U,iZCAA,U,kZCAA,U,wxBCAA,U,8fCAA,U,ofCCA,QAEA,yCAEA,OAKe,qBAAf,EAEA,cACA,EAEA,oBAEA,+BA2BA,wBC5CA,UAA2J,6JCC3J,QAEA,yCAEA,OAKe,qBAAf,EAEA,cACA,EAEA,oBAEA,+BA2BA,wBC5CA,UAA2gC,6gCCC3gC,QAEA,yCAEA,OAKe,qBAAf,EAEA,cACA,EAEA,oBAEA,+BA2BA,wBC5CA,UAA21B,61BCC31B,QAEA,yCAEA,OAKe,qBAAf,EAEA,cACA,EAEA,oBAEA,+BA2BA,wBC5CA,UAAiV,mVCCjV,QAEA,yCAEA,OAKe,qBAAf,EAEA,cACA,EAEA,oBAEA,+BA2BA,wBC5CA,UAAq5G,i5GCAr5G,U,qqDCCA,QAEA,yCAEA,OAKe,qBAAf,EAEA,cACA,EAEA,oBAEA,+BA2BA,wBC5CA,UAAoI,kICApI,U,6aCAA,U,uTCCA,QAEA,yCAEA,OAKe,qBAAf,EAEA,cACA,EAEA,oBAEA,+BA2BA,wBC5CA,UAA+8B,+8BCC/8B,QAEA,yCAEA,OAKe,qBAAf,EAEA,cACA,EAEA,oBAEA,+BA2BA,wBC5CA,UAA0yD,wyDCA1yD,U,0RCCA,QAEA,yCAEA,OAKe,qBAAf,EAEA,cACA,EAEA,oBAEA,+BA2BA,wBC5CA,UAAu8B,y8BCCv8B,QAEA,yCAEA,OAKe,qBAAf,EAEA,cACA,EAEA,oBAEA,+BA2BA,wBC5CA,UAAuN,yNCCvN,QAEA,yCAEA,OAKe,qBAAf,EAEA,cACA,EAEA,oBAEA,+BA2BA,wBC5CA,UAAyd,udCAzd,UAA2Q,6QCC3Q,QAEA,yCAEA,OAKe,qBAAf,EAEA,cACA,EAEA,oBAEA,+BA2BA,wBC5CA,UAAoL,sLCCpL,QAEA,yCAEA,OAKe,qBAAf,EAEA,cACA,EAEA,oBAEA,+BA2BA,wBC5CA,UAAqI,mICArI,U,uUCAA,U,scCAA,U,iUCAA,U,iYCCA,QAEA,yCAEA,OAKe,qBAAf,EAEA,cACA,EAEA,oBAEA,+BA2BA,wBC5CA,UAAoiB,siBCCpiB,QAEA,yCAEA,OAKe,qBAAf,EAEA,cACA,EAEA,oBAEA,+BA2BA,wBC5CA,UAA4F,8FCC5F,QAEA,yCAEA,OAKe,qBAAf,EAEA,cACA,EAEA,oBAEA,+BA2BA,wBC5CA,UAAqR,mRCArR,U,84BCAA,U,qiBCCA,QAEA,yCAEA,OAKe,qBAAf,EAEA,cACA,EAEA,oBAEA,+BA2BA,wBC5CA,UAA2sC,ysCCA3sC,U,srBCAA,U,oeCAA,U”,“file”:“ckeditor.js”,“sourcesContent”:[“(function
webpackUniversalModuleDefinition(root, factory) {ntif(typeof exports ===
&#39;object&#39; &amp;&amp; typeof module ===
&#39;object&#39;)nttmodule.exports = factory();ntelse if(typeof define ===
&#39;function&#39; &amp;&amp; define.amd)nttdefine([], factory);ntelse
if(typeof exports === &#39;<a
href="\"ClassicEditor\"">object’)nttexports</a> = <a
href="\"ClassicEditor\"">factory();ntelsenttroot</a> = factory();n})(typeof
self !== &#39;undefined&#39; ? self : this, function() {nreturn nnn//
WEBPACK FOOTER //n// webpack/universalModuleDefinition”,“ t// The module
cachen tvar installedModules = {};nn t// The require functionn tfunction
<em>webpack_require</em>(moduleId) {nn tt// Check if module is in cachen
ttif(installedModules[moduleId]) {n tttreturn <a
href="moduleId">installedModules</a>.exports;n tt}n tt// Create a new
module (and put it into the cache)n ttvar module = <a
href="moduleId">installedModules</a> = {n ttti: moduleId,n tttl: false,n
tttexports: {}n tt};nn tt// Execute the module functionn
ttmodules[moduleId].call(module.exports, module, module.exports,
<em>webpack_require</em>);nn tt// Flag the module as loadedn ttmodule.l =
true;nn tt// Return the exports of the modulen ttreturn module.exports;n
t}nnn t// expose the modules object (<em>webpack_modules</em>)n
t__webpack_require__.m = modules;nn t// expose the module cachen
t__webpack_require__.c = installedModules;nn t// define getter function for
harmony exportsn t__webpack_require__.d = function(exports, name, getter)
{n ttif(!<em>webpack_require</em>.o(exports, name)) {n
tttObject.defineProperty(exports, name, {n ttttconfigurable: false,n
ttttenumerable: true,n ttttget: gettern ttt});n tt}n t};nn t//
getDefaultExport function for compatibility with non-harmony modulesn
t__webpack_require__.n = function(module) {n ttvar getter = module
&amp;&amp; module.__esModule ?n tttfunction getDefault() { return <a
href="'default'">module</a>; } :n tttfunction getModuleExports() { return
module; };n tt__webpack_require__.d(getter, &#39;a&#39;, getter);n ttreturn
getter;n t};nn t// Object.prototype.hasOwnProperty.calln
t__webpack_require__.o = function(object, property) { return
Object.prototype.hasOwnProperty.call(object, property); };nn t//
<em>webpack_public_path</em>n t__webpack_require__.p = "&quot;;nn t// Load
entry module and return exportsn treturn
<em>webpack_require</em>(<em>webpack_require</em>.s = 6);nnnn// WEBPACK
FOOTER //n// webpack/bootstrap f89e9584159be906a390”,“  ntMIT <a
href="../../../admin-lte/plugins/datatables/extensions/ColReorder/License_txt.html">License</a>
<a
href="http://www.opensource.org/licenses/mit-license.php\n\tAuthor">www.opensource.org/licenses/mit-license.phpntAuthor</a>
Tobias Koppers @sokran  nnvar stylesInDom = {};nnvartmemoize = function
(fn) {ntvar memo;nntreturn function () {nttif (typeof memo ===
"undefined&quot;) memo = fn.apply(this, arguments);nttreturn
memo;nt};n};nnvar isOldIE = memoize(function () {nt// Test for IE &lt;= 9
as proposed by Browserhacksnt// @see <a
href="http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t">browserhacks.com/#hack-e71d8692f65334173fee715c222cb805nt</a>//
Tests for existence of standard globals is to allow style-loadernt// to
operate correctly into non-standard environmentsnt// @see <a
href="https://github.com/webpack-contrib/style-loader/issues/177\n\treturn">github.com/webpack-contrib/style-loader/issues/177ntreturn</a>
window &amp;&amp; document &amp;&amp; document.all &amp;&amp;
!window.atob;n});nnvar getTarget = function (target) {n  return
document.querySelector(target);n};nnvar getElement = (function (fn) {ntvar
memo = {};nntreturn function(target) {n                // If passing
function in options, then use it for resolve "head&quot; element.n         
// Useful for Shadow Root style i.en                // {n                //
insertInto: function () { return
document.querySelector(&quot;#foo&quot;).shadowRoot }n                // }n
if (typeof target === &#39;function&#39;) {n                        return
target();n                }n                if (typeof <a
href="target">memo</a> === "undefined&quot;) {ntttvar styleTarget =
getTarget.call(this, target);nttt// Special case to return head of iframe
instead of iframe itselfntttif (window.HTMLIFrameElement &amp;&amp;
styleTarget instanceof window.HTMLIFrameElement) {ntttttry {nttttt// This
will throw an exception if access to iframe is blockednttttt// due to
cross-origin restrictionsntttttstyleTarget =
styleTarget.contentDocument.head;ntttt} catch(e) {ntttttstyleTarget =
null;ntttt}nttt}<a href=”target“>ntttmemo</a> = styleTarget;ntt}nttreturn
<a href="target">memo</a>nt};n})();nnvar singleton =
null;nvartsingletonCounter = 0;nvartstylesInsertedAtTop = [];nnvartfixUrls
= require(&quot;./urls&quot;);nnmodule.exports = function(list, options)
{ntif (typeof DEBUG !== "undefined&quot; &amp;&amp; DEBUG) {nttif (typeof
document !== "object&quot;) throw new Error(&quot;The style-loader cannot
be used in a non-browser environment&quot;);nt}nntoptions = options ||
{};nntoptions.attrs = typeof options.attrs === "object&quot; ?
options.attrs : {};nnt// Force single-tag solution on IE6-9, which has a
hard limit on the # of &lt;style&gt;nt// tags it will allow on a pagentif
(!options.singleton &amp;&amp; typeof options.singleton !== "boolean&quot;)
options.singleton = isOldIE();nnt// By default, add &lt;style&gt; tags to
the &lt;head&gt; elementn        if (!options.insertInto)
options.insertInto = "head&quot;;nnt// By default, add &lt;style&gt; tags
to the bottom of the targetntif (!options.insertAt) options.insertAt =
"bottom&quot;;nntvar styles = listToStyles(list,
options);nntaddStylesToDom(styles, options);nntreturn function update
(newList) {nttvar mayRemove = [];nnttfor (var i = 0; i &lt; styles.length;
i++) {ntttvar item = <a href="i">styles</a>;ntttvar domStyle = <a
href="item.id">stylesInDom</a>;nntttdomStyle.refs–;ntttmayRemove.push(domStyle);ntt}nnttif(newList)
{ntttvar newStyles = listToStyles(newList,
options);ntttaddStylesToDom(newStyles, options);ntt}nnttfor (var i = 0; i
&lt; mayRemove.length; i++) {ntttvar domStyle = <a
href="i">mayRemove</a>;nntttif(domStyle.refs === 0) {nttttfor (var j = 0; j
&lt; domStyle.parts.length; j++) <a
href="j">domStyle.parts</a>();nnttttdelete <a
href="domStyle.id">stylesInDom</a>;nttt}ntt}nt};n};nnfunction
addStylesToDom (styles, options) {ntfor (var i = 0; i &lt; styles.length;
i++) {nttvar item = <a href="i">styles</a>;nttvar domStyle = <a
href="item.id">stylesInDom</a>;nnttif(domStyle)
{ntttdomStyle.refs++;nntttfor(var j = 0; j &lt; domStyle.parts.length; j++)
{<a href=”j“>nttttdomStyle.parts</a>(<a
href="j">item.parts</a>);nttt}nntttfor(; j &lt; item.parts.length; j++) {<a
href=”j“>nttttdomStyle.parts.push(addStyle(item.parts</a>,
options));nttt}ntt} else {ntttvar parts = [];nntttfor(var j = 0; j &lt;
item.parts.length; j++) {<a
href=”j“>nttttparts.push(addStyle(item.parts</a>, options));nttt}<a
href=”item.id“>nntttstylesInDom</a> = {id: item.id, refs: 1, parts:
parts};ntt}nt}n}nnfunction listToStyles (list, options) {ntvar styles =
[];ntvar newStyles = {};nntfor (var i = 0; i &lt; list.length; i++) {nttvar
item = <a href="i">list</a>;nttvar id = options.base ? <a href="0">item</a>
+ options.base : <a href="0">item</a>;nttvar css = <a
href="1">item</a>;nttvar media = <a href="2">item</a>;nttvar sourceMap = <a
href="3">item</a>;nttvar part = {css: css, media: media, sourceMap:
sourceMap};<a href=”id“>nnttif(!newStyles</a>) <a
href="id">styles.push(newStyles</a> = {id: id, parts: [part]});nttelse <a
href="id">newStyles</a>.parts.push(part);nt}nntreturn styles;n}nnfunction
insertStyleElement (options, style) {ntvar target =
getElement(options.insertInto)nntif (!target) {nttthrow new
Error(&quot;Couldn&#39;t find a style target. This probably means that the
value for the &#39;insertInto&#39; parameter is invalid.&quot;);nt}nntvar
lastStyleElementInsertedAtTop =
stylesInsertedAtTop[stylesInsertedAtTop.length - 1];nntif (options.insertAt
=== "top&quot;) {nttif (!lastStyleElementInsertedAtTop)
{nttttarget.insertBefore(style, target.firstChild);ntt} else if
(lastStyleElementInsertedAtTop.nextSibling) {nttttarget.insertBefore(style,
lastStyleElementInsertedAtTop.nextSibling);ntt} else
{nttttarget.appendChild(style);ntt}nttstylesInsertedAtTop.push(style);nt}
else if (options.insertAt === "bottom&quot;)
{ntttarget.appendChild(style);nt} else if (typeof options.insertAt ===
"object&quot; &amp;&amp; options.insertAt.before) {nttvar nextSibling =
getElement(options.insertInto + " " +
options.insertAt.before);ntttarget.insertBefore(style, nextSibling);nt}
else {nttthrow new Error(&quot;[Style Loader]\n\n Invalid value for
parameter &#39;insertAt&#39; (&#39;options.insertAt&#39;) found.\n Must be
&#39;top&#39;, &#39;bottom&#39;, or <a
href="../../../../Object.html">Object</a>.\n (<a
href="https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction">github.com/webpack-contrib/style-loader#insertat)\n");nt}n}nnfunction</a>
removeStyleElement (style) {ntif (style.parentNode === null) return
false;ntstyle.parentNode.removeChild(style);nntvar idx =
stylesInsertedAtTop.indexOf(style);ntif(idx &gt;= 0)
{nttstylesInsertedAtTop.splice(idx, 1);nt}n}nnfunction createStyleElement
(options) {ntvar style =
document.createElement(&quot;style&quot;);nntoptions.attrs.type =
"text/css&quot;;nntaddAttrs(style,
options.attrs);ntinsertStyleElement(options, style);nntreturn
style;n}nnfunction createLinkElement (options) {ntvar link =
document.createElement(&quot;link&quot;);nntoptions.attrs.type =
"text/css&quot;;ntoptions.attrs.rel = "stylesheet&quot;;nntaddAttrs(link,
options.attrs);ntinsertStyleElement(options, link);nntreturn
link;n}nnfunction addAttrs (el, attrs)
{ntObject.keys(attrs).forEach(function (key) {nttel.setAttribute(key, <a
href="key">attrs</a>);nt});n}nnfunction addStyle (obj, options) {ntvar
style, update, remove, result;nnt// If a transform function was defined,
run it on the cssntif (options.transform &amp;&amp; obj.css) {nt    result
= options.transform(obj.css);nnt    if (result) {nt    t// If transform
returns a value, use that instead of the original css.nt    t// This allows
running runtime transformations on the css.nt    tobj.css = result;nt    }
else {nt    t// If the transform function returns a falsy value, don&#39;t
add this css.nt    t// This allows conditional loading of cssnt    treturn
function() {nt    tt// noopnt    t};nt    }nt}nntif (options.singleton)
{nttvar styleIndex = singletonCounter++;nnttstyle = singleton || (singleton
= createStyleElement(options));nnttupdate = applyToSingletonTag.bind(null,
style, styleIndex, false);nttremove = applyToSingletonTag.bind(null, style,
styleIndex, true);nnt} else if (nttobj.sourceMap &amp;&amp;ntttypeof URL
=== "function&quot; &amp;&amp;ntttypeof URL.createObjectURL ===
"function&quot; &amp;&amp;ntttypeof URL.revokeObjectURL === "function&quot;
&amp;&amp;ntttypeof Blob === "function&quot; &amp;&amp;ntttypeof btoa ===
"function&quot;nt) {nttstyle = createLinkElement(options);nttupdate =
updateLink.bind(null, style, options);nttremove = function ()
{ntttremoveStyleElement(style);nntttif(style.href)
URL.revokeObjectURL(style.href);ntt};nt} else {nttstyle =
createStyleElement(options);nttupdate = applyToTag.bind(null,
style);nttremove = function ()
{ntttremoveStyleElement(style);ntt};nt}nntupdate(obj);nntreturn function
updateStyle (newObj) {nttif (newObj) {ntttif (nttttnewObj.css === obj.css
&amp;&amp;nttttnewObj.media === obj.media &amp;&amp;nttttnewObj.sourceMap
=== obj.sourceMapnttt) {nttttreturn;nttt}nntttupdate(obj = newObj);ntt}
else {ntttremove();ntt}nt};n}nnvar replaceText = (function () {ntvar
textStore = [];nntreturn function (index, replacement) {<a
href=”index“>ntttextStore</a> = replacement;nnttreturn
textStore.filter(Boolean).join(&#39;\n&#39;);nt};n})();nnfunction
applyToSingletonTag (style, index, remove, obj) {ntvar css = remove ?
"&quot; : obj.css;nntif (style.styleSheet) {nttstyle.styleSheet.cssText =
replaceText(index, css);nt} else {nttvar cssNode =
document.createTextNode(css);nttvar childNodes = style.childNodes;nnttif
(<a href="index">childNodes</a>) <a
href="index">style.removeChild(childNodes</a>);nnttif (childNodes.length)
{ntttstyle.insertBefore(cssNode, <a href="index">childNodes</a>);ntt} else
{ntttstyle.appendChild(cssNode);ntt}nt}n}nnfunction applyToTag (style, obj)
{ntvar css = obj.css;ntvar media = obj.media;nntif(media)
{nttstyle.setAttribute(&quot;media&quot;, media)nt}nntif(style.styleSheet)
{nttstyle.styleSheet.cssText = css;nt} else {nttwhile(style.firstChild)
{ntttstyle.removeChild(style.firstChild);ntt}nnttstyle.appendChild(document.createTextNode(css));nt}n}nnfunction
updateLink (link, options, obj) {ntvar css = obj.css;ntvar sourceMap =
obj.sourceMap;nnt  nttIf convertToAbsoluteUrls isn&#39;t defined, but
sourcemaps are enablednttand there is no publicPath defined then lets turn
convertToAbsoluteUrlsntton by default.  Otherwise default to the
convertToAbsoluteUrls optionnttdirectlynt  ntvar autoFixUrls =
options.convertToAbsoluteUrls === undefined &amp;&amp; sourceMap;nntif
(options.convertToAbsoluteUrls || autoFixUrls) {nttcss =
fixUrls(css);nt}nntif (sourceMap) {ntt// <a
href="http://stackoverflow.com/a/26603875\n\t\tcss">stackoverflow.com/a/26603875nttcss</a>
+= "\n/*# sourceMappingURL=data:application/json;base64,&quot; +
btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + "
*/&quot;;nt}nntvar blob = new <a href="css">Blob(</a>, { type:
"text/css&quot; });nntvar oldSrc = link.href;nntlink.href =
URL.createObjectURL(blob);nntif(oldSrc)
URL.revokeObjectURL(oldSrc);n}nnnn//////////////////n// WEBPACK FOOTERn//
/workspace/ckeditor5/node_modules/style-loader/lib/addStyles.jsn// module
id = 0n// module chunks = 0”,“import checkGlobal from
&#39;./_checkGlobal&#39;;nn/** Used to determine if values are of the
language type `Object`. */nvar objectTypes = {n  &#39;function&#39;: true,n
&#39;object&#39;: truen};nn/** Detect free variable `exports`. */nvar
freeExports = (objectTypes[typeof exports] &amp;&amp; exports &amp;&amp;
!exports.nodeType)n  ? exportsn  : undefined;nn/** Detect free variable
`module`. */nvar freeModule = (objectTypes[typeof module] &amp;&amp; module
&amp;&amp; !module.nodeType)n  ? modulen  : undefined;nn/** Detect free
variable `global` from Node.js. */nvar freeGlobal = checkGlobal(freeExports
&amp;&amp; freeModule &amp;&amp; typeof global == &#39;object&#39;
&amp;&amp; global);nn/** Detect free variable `self`. */nvar freeSelf =
checkGlobal(objectTypes[typeof self] &amp;&amp; self);nn/** Detect free
variable `window`. */nvar freeWindow = checkGlobal(objectTypes[typeof
window] &amp;&amp; window);nn/** Detect `this` as the global object. */nvar
thisGlobal = checkGlobal(objectTypes[typeof this] &amp;&amp; this);nn/**n *
Used as a reference to the global object.n *n * The `this` value is used if
it&#39;s the global object to avoid Greasemonkey&#39;sn * restricted
`window` object, otherwise the `window` object is used.n */nvar root =
freeGlobal ||n  ((freeWindow !== (thisGlobal &amp;&amp; thisGlobal.window))
&amp;&amp; freeWindow) ||n    freeSelf || thisGlobal ||
Function(&#39;return this&#39;)();nnexport default
root;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_root.jsn// module id = 1n// module
chunks = 0”,“module.exports = function(originalModule)
{rntif(!originalModule.webpackPolyfill) {rnttvar module =
Object.create(originalModule);rntt// module.parent = undefined by
defaultrnttif(!module.children) module.children =
[];rnttObject.defineProperty(module, "loaded&quot;, {rntttenumerable:
true,rntttget: function() {rnttttreturn
module.l;rnttt}rntt});rnttObject.defineProperty(module, "id&quot;,
{rntttenumerable: true,rntttget: function() {rnttttreturn
module.i;rnttt}rntt});rnttObject.defineProperty(module, "exports&quot;,
{rntttenumerable: true,rntt});rnttmodule.webpackPolyfill = 1;rnt}rntreturn
module;rn};rnnnn//////////////////n// WEBPACK FOOTERn//
(webpack)/buildin/harmony-module.jsn// module id = 2n// module chunks =
0”,“module.exports = "&lt;svg width=\&quot;20\&quot;
height=\&quot;20\&quot; viewBox=\&quot;0 0 20 20\&quot; xmlns=\&quot;<a
href="http://www.w3.org/2000/svg\\\"><path">www.w3.org/2000/svg\"><path</a>
d=\&quot;M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1
1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717
16.323a.997.997 0 0 1-.745.292z\&quot; fill=\&quot;#000\&quot;
fill-rule=\&quot;evenodd\&quot;/&gt;&lt;/svg&gt;&quot;nnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-core/theme/icons/check.svgn// module id =
3n// module chunks = 0”,“module.exports = "&lt;svg width=\&quot;20\&quot;
height=\&quot;20\&quot; viewBox=\&quot;0 0 20 20\&quot; xmlns=\&quot;<a
href="http://www.w3.org/2000/svg\\\"><path">www.w3.org/2000/svg\"><path</a>
d=\&quot;M11.591 10.177l4.243 4.242a1 1 0 0 1-1.415
1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52
5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415
1.414l-4.243 4.243z\&quot; fill=\&quot;#000\&quot;
fill-rule=\&quot;evenodd\&quot;/&gt;&lt;/svg&gt;&quot;nnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-core/theme/icons/cancel.svgn// module id =
4n// module chunks = 0”,“nvar content =
require(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./heading.css&quot;);nnif(typeof
content === &#39;string&#39;) content = [[module.id, content,
&#39;&#39;]];nnvar transform;nvar insertInto;nnnnvar options =
{&quot;singleton&quot;:true,&quot;hmr&quot;:true}nnoptions.transform =
transformnoptions.insertInto = undefined;nnvar update =
require(&quot;!../../../node_modules/style-loader/lib/addStyles.js&quot;)(content,
options);nnif(content.locals) module.exports =
content.locals;nnif(module.hot)
{ntmodule.hot.accept(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./heading.css&quot;,
function() {nttvar newContent =
require(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./heading.css&quot;);nnttif(typeof
newContent === &#39;string&#39;) newContent = [[module.id, newContent,
&#39;&#39;]];nnttvar locals = (function(a, b) {ntttvar key, idx =
0;nntttfor(key in a) {nttttif(!b || <a href="key">a</a> !== <a
href="key">b</a>) return false;nttttidx++;nttt}nntttfor(key in b)
idx–;nntttreturn idx === 0;ntt}(content.locals,
newContent.locals));nnttif(!locals) throw new Error(&#39;Aborting CSS HMR
due to changed css-modules
locals.&#39;);nnttupdate(newContent);nt});nntmodule.hot.dispose(function()
{ update(); });n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-heading/theme/heading.cssn// module id = 5n// module chunks =
0”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben.
All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
utils/ckeditorerrorn */nn/**n * URL to the documentation with error codes.n
*/nexport const DOCUMENTATION_URL =nt&#39;<a
href="https://docs.ckeditor.com/ckeditor5/latest/framework/guides/support/error-codes.html';\n\n/**\n">docs.ckeditor.com/ckeditor5/latest/framework/guides/support/error-codes.html’;nn/**n</a>
* The CKEditor error class.n *n * All errors will be shortened during the
minification process in order to reduce the code size.n * Therefore, all
error messages should be documented in the same way as those in {@link
module:utils/log}.n *n * Read more in the {@link module:utils/log} module.n
*n * @extends Errorn */nexport default class CKEditorError extends Error
{nt/**nt * Creates an instance of the CKEditorError class.nt *nt * Read
more about error logging in the {@link module:utils/log} module.nt *nt *
@param {String} message The error message in an `error-name: Error
message.` format.nt * During the minification process the "Error
message&quot; part will be removed to limit the code sizent * and a link to
this error documentation will be added to the `message`.nt * @param
{Object} [data] Additional data describing the error. A stringified version
of this objectnt * will be appended to the error message, so the data are
quickly visible in the console. The originalnt * data object will also be
later available under the {@link data} property.nt */ntconstructor(
message, data ) {nttmessage = attachLinkToDocumentation( message );nnttif (
data ) {ntttmessage += &#39; &#39; + JSON.stringify( data );ntt}nnttsuper(
message );nntt/**ntt * @member {String}ntt */nttthis.name =
&#39;CKEditorError&#39;;nntt/**ntt * The additional error data passed to
the constructor.ntt *ntt * @member {Object}ntt */nttthis.data =
data;nt}nnt/**nt * Checks if error is an instance of CKEditorError class.nt
*nt * @param {Object} error <a href="../../../../Object.html">Object</a> to
check.nt * @returns {Boolean}nt */ntstatic isCKEditorError( error )
{nttreturn error instanceof CKEditorError;nt}n}nn/**n * Attaches link to
the documentation at the end of the error message.n *n * @param {String}
message Message to be logged.n * @returns {String}n */nexport function
attachLinkToDocumentation( message ) {ntconst matchedErrorName =
message.match( /^([^:]+):/ );nntif ( !matchedErrorName ) {nttreturn
message;nt}nntreturn message + ` Read more: ${ DOCUMENTATION_URL }#error-${
matchedErrorName[ 1 ] }\n`;n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/ckeditorerror.jsn// module id = nulln// module
chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module utils/spyn */nn/**n * Creates a spy function (ala Sinon.js) that
can be used to inspect call to it.n *n * The following are the present
features:n *n * * spy.called: property set to `true` if the function has
been called at least once.n *n * @returns {Function} The spy function.n
*/nfunction spy() {ntreturn function spy() {nttspy.called =
true;nt};n}nnexport default spy;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/spy.jsn// module id = nulln// module chunks =
”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben. All
rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
utils/uidn */nn/**n * Returns a unique id. This id consist of an
&#39;e&#39; character and a randomly generated string of 32 aphanumeric
characters.n * Each character in uid string represents a hexadecimal digit
(base 16).n *n * @returns {String} A hexadecimal number representing the
id.n */nexport default function uid() {ntlet uuid = &#39;e&#39;; // Make
sure that id does not start with number.nntfor ( let i = 0; i &lt; 8; i++ )
{nttuuid += Math.floor( ( 1 + Math.random() ) * 0x10000 ).toString( 16
).substring( 1 );nt}nntreturn uuid;n}nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/uid.jsn// module id = nulln// module
chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module utils/prioritiesn */nn/**n * String representing a priority value.n
*n * @typedef
{&#39;highest&#39;|&#39;high&#39;|&#39;normal&#39;|&#39;low&#39;|&#39;lowest&#39;}
module:utils/priorities~PriorityStringn */nn/**n * Provides group of
constants to use instead of hardcoding numeric priority values.n *n *
@namespacen */nconst priorities = {nt/**nt * Converts a string with
priority name to it&#39;s numeric value. If `Number` is given, it just
returns it.nt *nt * @staticnt * @param
{module:utils/priorities~PriorityString|Number} priority Priority to
convert.nt * @returns {Number} Converted priority.nt */ntget( priority )
{nttif ( typeof priority != &#39;number&#39; ) {ntttreturn this[ priority ]
|| this.normal;ntt} else {ntttreturn priority;ntt}nt},nnthighest:
100000,nthigh: 1000,ntnormal: 0,ntlow: -1000,ntlowest: -100000n};nnexport
default priorities;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/priorities.jsn// module id = nulln// module chunks =
”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben. All
rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
utils/emittermixinn */nnimport EventInfo from &#39;./eventinfo&#39;;nimport
uid from &#39;./uid&#39;;nimport priorities from
&#39;./priorities&#39;;nnconst _listeningTo = Symbol( &#39;listeningTo&#39;
);nconst _emitterId = Symbol( &#39;emitterId&#39; );nn/**n * Mixin that
injects the {@link ~Emitter events API} into its host.n *n * @mixin
EmitterMixinn * @implements module:utils/emittermixin~Emittern */nconst
EmitterMixin = {nt/**nt * @inheritDocnt */nton( event, callback, options =
{} ) {nttthis.listenTo( this, event, callback, options );nt},nnt/**nt *
@inheritDocnt */ntonce( event, callback, options ) {nttconst onceCallback =
function( event, …args ) {nttt// Go off() at the first
call.ntttevent.off();nnttt// Go with the original
callback.ntttcallback.call( this, event, …args );ntt};nntt// Make a similar
on() call, simply replacing the callback.nttthis.listenTo( this, event,
onceCallback, options );nt},nnt/**nt * @inheritDocnt */ntoff( event,
callback ) {nttthis.stopListening( this, event, callback );nt},nnt/**nt *
@inheritDocnt */ntlistenTo( emitter, event, callback, options = {} )
{nttlet emitterInfo, eventCallbacks;nntt// _listeningTo contains a list of
emitters that this object is listening to.ntt// This list has the following
format:ntt//ntt// _listeningTo: {ntt//     emitterId: {ntt//        
emitter: emitter,ntt//         callbacks: {ntt//             event1: [
callback1, callback2, … ]ntt//             .…ntt//         }ntt//    
},ntt//     …ntt// }nnttif ( !this[ _listeningTo ] ) {ntttthis[
_listeningTo ] = {};ntt}nnttconst emitters = this[ _listeningTo ];nnttif (
!_getEmitterId( emitter ) ) {nttt_setEmitterId( emitter );ntt}nnttconst
emitterId = _getEmitterId( emitter );nnttif ( !( emitterInfo = emitters[
emitterId ] ) ) {ntttemitterInfo = emitters[ emitterId ] =
{nttttemitter,nttttcallbacks: {}nttt};ntt}nnttif ( !( eventCallbacks =
emitterInfo.callbacks[ event ] ) ) {nttteventCallbacks =
emitterInfo.callbacks[ event ] = [];ntt}nntteventCallbacks.push( callback
);nntt// Finally register the callback to the
event.nttcreateEventNamespace( emitter, event );nttconst lists =
getCallbacksListsForNamespace( emitter, event );nttconst priority =
priorities.get( options.priority );nnttconst callbackDefinition =
{ntttcallback,ntttpriorityntt};nntt// Add the callback to all callbacks
list.nttfor ( const callbacks of lists ) {nttt// Add the callback to the
list in the right priority position.ntttlet added = false;nntttfor ( let i
= 0; i &lt; callbacks.length; i++ ) {nttttif ( callbacks[ i ].priority &lt;
priority ) {ntttttcallbacks.splice( i, 0, callbackDefinition );ntttttadded
= true;nntttttbreak;ntttt}nttt}nnttt// Add at the end, if right place was
not found.ntttif ( !added ) {nttttcallbacks.push( callbackDefinition
);nttt}ntt}nt},nnt/**nt * @inheritDocnt */ntstopListening( emitter, event,
callback ) {nttconst emitters = this[ _listeningTo ];nttlet emitterId =
emitter &amp;&amp; _getEmitterId( emitter );nttconst emitterInfo = emitters
&amp;&amp; emitterId &amp;&amp; emitters[ emitterId ];nttconst
eventCallbacks = emitterInfo &amp;&amp; event &amp;&amp;
emitterInfo.callbacks[ event ];nntt// Stop if nothing has been
listened.nttif ( !emitters || ( emitter &amp;&amp; !emitterInfo ) || (
event &amp;&amp; !eventCallbacks ) ) {ntttreturn;ntt}nntt// All params
provided. off() that single callback.nttif ( callback )
{ntttremoveCallback( emitter, event, callback );ntt}ntt// Only `emitter`
and `event` provided. off() all callbacks for that event.nttelse if (
eventCallbacks ) {ntttwhile ( ( callback = eventCallbacks.pop() ) )
{nttttremoveCallback( emitter, event, callback );nttt}nntttdelete
emitterInfo.callbacks[ event ];ntt}ntt// Only `emitter` provided. off() all
events for that emitter.nttelse if ( emitterInfo ) {ntttfor ( event in
emitterInfo.callbacks ) {nttttthis.stopListening( emitter, event
);nttt}ntttdelete emitters[ emitterId ];ntt}ntt// No params provided. off()
all emitters.nttelse {ntttfor ( emitterId in emitters )
{nttttthis.stopListening( emitters[ emitterId ].emitter );nttt}ntttdelete
this[ _listeningTo ];ntt}nt},nnt/**nt * @inheritDocnt */ntfire(
eventOrInfo, …args ) {nttconst eventInfo = eventOrInfo instanceof EventInfo
? eventOrInfo : new EventInfo( this, eventOrInfo );nttconst event =
eventInfo.name;nttlet callbacks = getCallbacksForEvent( this, event
);nntt// Record that the event passed this emitter on its
path.ntteventInfo.path.push( this );nntt// Handle event listener callbacks
first.nttif ( callbacks ) {nttt// Arguments passed to each
callback.ntttconst callbackArgs = [ eventInfo, …args ];nnttt// Copying
callbacks array is the easiest and most secure way of preventing infinite
loops, when event callbacksnttt// are added while processing other
callbacks. Previous solution involved adding counters (unique ids)
butnttt// failed if callbacks were added to the queue before currently
processed callback.nttt// If this proves to be too inefficient, another
method is to change `.on()` so callbacks are stored if samenttt// event is
currently processed. Then, `.fire()` at the end, would have to add all
stored events.ntttcallbacks = Array.from( callbacks );nntttfor ( let i = 0;
i &lt; callbacks.length; i++ ) {nttttcallbacks[ i ].callback.apply( this,
callbackArgs );nntttt// Remove the callback from future requests if off()
has been called.nttttif ( eventInfo.off.called ) {nttttt// Remove the
called mark for the next calls.ntttttdelete
eventInfo.off.called;nntttttremoveCallback( this, event, callbacks[ i
].callback );ntttt}nntttt// Do not execute next callbacks if stop() was
called.nttttif ( eventInfo.stop.called ) {ntttttbreak;ntttt}nttt}ntt}nntt//
Delegate event to other emitters if needed.nttif ( this._delegations )
{ntttconst destinations = this._delegations.get( event );ntttconst
passAllDestinations = this._delegations.get( &#39;*&#39; );nntttif (
destinations ) {nttttfireDelegatedEvents( destinations, eventInfo, args
);nttt}nntttif ( passAllDestinations ) {nttttfireDelegatedEvents(
passAllDestinations, eventInfo, args );nttt}ntt}nnttreturn
eventInfo.return;nt},nnt/**nt * @inheritDocnt */ntdelegate( …events )
{nttreturn {ntttto: ( emitter, nameOrFunction ) =&gt; {nttttif (
!this._delegations ) {ntttttthis._delegations = new Map();ntttt}nnttttfor (
const eventName of events ) {ntttttconst destinations =
this._delegations.get( eventName );nntttttif ( !destinations )
{nttttttthis._delegations.set( eventName, new Map( [ [ emitter,
nameOrFunction ] ] ) );nttttt} else {nttttttdestinations.set( emitter,
nameOrFunction );nttttt}ntttt}nttt}ntt};nt},nnt/**nt * @inheritDocnt
*/ntstopDelegating( event, emitter ) {nttif ( !this._delegations )
{ntttreturn;ntt}nnttif ( !event ) {ntttthis._delegations.clear();ntt} else
if ( !emitter ) {ntttthis._delegations.delete( event );ntt} else {ntttconst
destinations = this._delegations.get( event );nntttif ( destinations )
{nttttdestinations.delete( emitter );nttt}ntt}nt}n};nnexport default
EmitterMixin;nn/**n * Emitter/listener interface.n *n * Can be easily
implemented by a class by mixing the {@link
module:utils/emittermixin~EmitterMixin} mixin.n *n * @interface Emittern
*/nn/**n * Registers a callback function to be executed when an event is
fired.n *n * Shorthand for {@link listenTo `this.listenTo( this, event,
callback, options )`} (it makes the emittern * listen on itself).n *n *
@method onn * @param {String} event The name of the event.n * @param
{Function} callback The function to be called on event.n * @param {Object}
[options={}] Additional options.n * @param
{module:utils/priorities~PriorityString|Number}
[options.priority=&#39;normal&#39;] The priority of this event callback.
The highern * the priority value the sooner the callback will be fired.
Events having the same priority are called in then * order they were
added.n */nn/**n * Registers a callback function to be executed on the next
time the event is fired only. This is similar ton * calling {@link on}
followed by {@link off} in the callback.n *n * @method oncen * @param
{String} event The name of the event.n * @param {Function} callback The
function to be called on event.n * @param {Object} [options={}] Additional
options.n * @param {module:utils/priorities~PriorityString|Number}
[options.priority=&#39;normal&#39;] The priority of this event callback.
The highern * the priority value the sooner the callback will be fired.
Events having the same priority are called in then * order they were
added.n */nn/**n * Stops executing the callback on the given event.n *
Shorthand for {@link stopListening `this.stopListening( this, event,
callback )`}.n *n * @method offn * @param {String} event The name of the
event.n * @param {Function} callback The function to stop being called.n
*/nn/**n * Registers a callback function to be executed when an event is
fired in a specific (emitter) object.n *n * Events can be grouped in
namespaces using `:`.n * When namespaced event is fired, it additionally
fires all callbacks for that namespace.n *n *tt// myEmitter.on( … ) is a
shorthand for myEmitter.listenTo( myEmitter, … ).n *ttmyEmitter.on(
&#39;myGroup&#39;, genericCallback );n *ttmyEmitter.on(
&#39;myGroup:myEvent&#39;, specificCallback );n *n *tt// genericCallback is
fired.n *ttmyEmitter.fire( &#39;myGroup&#39; );n *tt// both genericCallback
and specificCallback are fired.n *ttmyEmitter.fire(
&#39;myGroup:myEvent&#39; );n *tt// genericCallback is fired even though
there are no callbacks for "foo&quot;.n *ttmyEmitter.fire(
&#39;myGroup:foo&#39; );n *n * An event callback can {@link
module:utils/eventinfo~EventInfo#stop stop the event} andn * set the {@link
module:utils/eventinfo~EventInfo#return return value} of the {@link fire}
method.n *n * @method listenTon * @param
{module:utils/emittermixin~Emitter} emitter The object that fires the
event.n * @param {String} event The name of the event.n * @param {Function}
callback The function to be called on event.n * @param {Object}
[options={}] Additional options.n * @param
{module:utils/priorities~PriorityString|Number}
[options.priority=&#39;normal&#39;] The priority of this event callback.
The highern * the priority value the sooner the callback will be fired.
Events having the same priority are called in then * order they were
added.n */nn/**n * Stops listening for events. It can be used at different
levels:n *n * * To stop listening to a specific callback.n * * To stop
listening to a specific event.n * * To stop listening to all events fired
by a specific object.n * * To stop listening to all events fired by all
objects.n *n * @method stopListeningn * @param
{module:utils/emittermixin~Emitter} [emitter] The object to stop listening
to. If omitted, stops it for all objects.n * @param {String} [event]
(Requires the `emitter`) The name of the event to stop listening to. If
omitted, stops itn * for all events from `emitter`.n * @param {Function}
[callback] (Requires the `event`) The function to be removed from the call
list for the givenn * `event`.n */nn/**n * Fires an event, executing all
callbacks registered for it.n *n * The first parameter passed to callbacks
is an {@link module:utils/eventinfo~EventInfo} object,n * followed by the
optional `args` provided in the `fire()` method call.n *n * @method firen *
@param {String|module:utils/eventinfo~EventInfo} eventOrInfo The name of
the event or `EventInfo` object if event is delegated.n * @param {…*}
[args] Additional arguments to be passed to the callbacks.n * @returns {*}
By default the method returns `undefined`. However, the return value can be
changed by listenersn * through modification of the {@link
module:utils/eventinfo~EventInfo#return `evt.return`}&#39;s property (the
event infon * is the first param of every callback).n */nn/**n * Delegates
selected events to another {@link module:utils/emittermixin~Emitter}. For
instance:n *n *ttemitterA.delegate( &#39;eventX&#39; ).to( emitterB );n
*ttemitterA.delegate( &#39;eventX&#39;, &#39;eventY&#39; ).to( emitterC );n
*n * then `eventX` is delegated (fired by) `emitterB` and `emitterC` along
with `data`:n *n *ttemitterA.fire( &#39;eventX&#39;, data );n *n * and
`eventY` is delegated (fired by) `emitterC` along with `data`:n *n
*ttemitterA.fire( &#39;eventY&#39;, data );n *n * @method delegaten *
@param {…String} events Event names that will be delegated to another
emitter.n * @returns {module:utils/emittermixin~EmitterMixinDelegateChain}n
*/nn/**n * Stops delegating events. It can be used at different levels:n *n
* * To stop delegating all events.n * * To stop delegating a specific event
to all emitters.n * * To stop delegating a specific event to a specific
emitter.n *n * @method stopDelegatingn * @param {String} [event] The name
of the event to stop delegating. If omitted, stops it all delegations.n *
@param {module:utils/emittermixin~Emitter} [emitter] (requires `event`) The
object to stop delegating a particular event to.n * If omitted, stops
delegation of `event` to all emitters.n */nn/**n * Checks if
`listeningEmitter` listens to an emitter with given `listenedToEmitterId`
and if so, returns that emitter.n * If not, returns `null`.n *n *
@protectedn * @param {module:utils/emittermixin~EmitterMixin}
listeningEmitter Emitter that listens.n * @param {String}
listenedToEmitterId Unique emitter id of emitter listened to.n * @returns
{module:utils/emittermixin~EmitterMixin|null}n */nexport function
_getEmitterListenedTo( listeningEmitter, listenedToEmitterId ) {ntif (
listeningEmitter[ _listeningTo ] &amp;&amp; listeningEmitter[ _listeningTo
][ listenedToEmitterId ] ) {nttreturn listeningEmitter[ _listeningTo ][
listenedToEmitterId ].emitter;nt}nntreturn null;n}nn/**n * Sets
emitter&#39;s unique id.n *n * *<strong>Note:</strong>* `_emitterId` can be
set only once.n *n * @protectedn * @param
{module:utils/emittermixin~EmitterMixin} emitter Emitter for which id will
be set.n * @param {String} [id] Unique id to set. If not passed, random
unique id will be set.n */nexport function _setEmitterId( emitter, id )
{ntif ( !emitter[ _emitterId ] ) {nttemitter[ _emitterId ] = id ||
uid();nt}n}nn/**n * Returns emitter&#39;s unique id.n *n * @protectedn *
@param {module:utils/emittermixin~EmitterMixin} emitter Emitter which id
will be returned.n */nexport function _getEmitterId( emitter ) {ntreturn
emitter[ _emitterId ];n}nn// Gets the internal `_events` property of the
given object.n// `_events` property store all lists with callbacks for
registered event names.n// If there were no events registered on the
object, empty `_events` object is created.nfunction getEvents( source )
{ntif ( !source._events ) {nttObject.defineProperty( source,
&#39;_events&#39;, {ntttvalue: {}ntt} );nt}nntreturn source._events;n}nn//
Creates event node for generic-specific events relation
architecture.nfunction makeEventNode() {ntreturn {nttcallbacks:
[],nttchildEvents: []nt};n}nn// Creates an architecture for
generic-specific events relation.n// If needed, creates all events for
given eventName, i.e. if the first registered eventn// is foo:bar:abc, it
will create foo:bar:abc, foo:bar and foo event and tie them together.n// It
also copies callbacks from more generic events to more specific events
whenn// specific events are created.nfunction createEventNamespace( source,
eventName ) {ntconst events = getEvents( source );nnt// First, check if the
event we want to add to the structure already exists.ntif ( events[
eventName ] ) {ntt// If it exists, we don&#39;t have to do
anything.nttreturn;nt}nnt// In other case, we have to create the structure
for the event.nt// Note, that we might need to create intermediate events
too.nt// I.e. if foo:bar:abc is being registered and we only have foo in
the structure,nt// we need to also register foo:bar.nnt// Currently
processed event name.ntlet name = eventName;nt// Name of the event that is
a child event for currently processed event.ntlet childEventName =
null;nnt// Array containing all newly created specific events.ntconst
newEventNodes = [];nnt// While loop can&#39;t check for &#39;:&#39; index
because we have to handle generic events too.nt// In each loop, we truncate
event name, going from the most specific name to the generic one.nt// I.e.
foo:bar:abc -&gt; foo:bar -&gt; foo.ntwhile ( name !== &#39;&#39; ) {nttif
( events[ name ] ) {nttt// If the currently processed event name is already
registered, we can be surenttt// that it already has all the structure
created, so we can break the loop herenttt// as no more events need to be
registered.ntttbreak;ntt}nntt// If this event is not yet registered, create
a new object for it.nttevents[ name ] = makeEventNode();ntt// Add it to the
array with newly created events.nttnewEventNodes.push( events[ name ]
);nntt// Add previously processed event name as a child of this event.nttif
( childEventName ) {ntttevents[ name ].childEvents.push( childEventName
);ntt}nnttchildEventName = name;ntt// If `.lastIndexOf()` returns -1,
`.substr()` will return &#39;&#39; which will break the loop.nttname =
name.substr( 0, name.lastIndexOf( &#39;:&#39; ) );nt}nntif ( name !==
&#39;&#39; ) {ntt// If name is not empty, we found an already registered
event that was a parent of thentt// event we wanted to register.nntt// Copy
that event&#39;s callbacks to newly registered events.nttfor ( const node
of newEventNodes ) {ntttnode.callbacks = events[ name
].callbacks.slice();ntt}nntt// Add last newly created event to the already
registered event.nttevents[ name ].childEvents.push( childEventName
);nt}n}nn// Gets an array containing callbacks list for a given event and
it&#39;s more specific events.n// I.e. if given event is foo:bar and there
is also foo:bar:abc event registered, this willn// return callback list of
foo:bar and foo:bar:abc (but not foo).nfunction
getCallbacksListsForNamespace( source, eventName ) {ntconst eventNode =
getEvents( source )[ eventName ];nntif ( !eventNode ) {nttreturn
[];nt}nntlet callbacksLists = [ eventNode.callbacks ];nntfor ( let i = 0; i
&lt; eventNode.childEvents.length; i++ ) {nttconst childCallbacksLists =
getCallbacksListsForNamespace( source, eventNode.childEvents[ i ]
);nnttcallbacksLists = callbacksLists.concat( childCallbacksLists
);nt}nntreturn callbacksLists;n}nn// Get the list of callbacks for a given
event, but only if there any callbacks have been registered.n// If there
are no callbacks registered for given event, it checks if this is a
specific event and looksn// for callbacks for it&#39;s more generic
version.nfunction getCallbacksForEvent( source, eventName ) {ntlet
event;nntif ( !source._events || !( event = source._events[ eventName ] )
|| !event.callbacks.length ) {ntt// There are no callbacks registered for
specified eventName.ntt// But this could be a specific-type event that is
in a namespace.nttif ( eventName.indexOf( &#39;:&#39; ) &gt; -1 ) {nttt//
If the eventName is specific, try to find callback lists for more generic
event.ntttreturn getCallbacksForEvent( source, eventName.substr( 0,
eventName.lastIndexOf( &#39;:&#39; ) ) );ntt} else {nttt// If this is a
top-level generic event, return null;ntttreturn null;ntt}nt}nntreturn
event.callbacks;n}nn// Fires delegated events for given map of
destinations.n//n// @privaten// * @param {Map.&lt;utils.Emitter&gt;}
destinations A map containing `[ {@link utils.Emitter}, "event name&quot;
]` pair destinations.n// * @param {utils.EventInfo} eventInfo The original
event info object.n// * @param {Array.&lt;*&gt;} fireArgs Arguments the
original event was fired with.nfunction fireDelegatedEvents( destinations,
eventInfo, fireArgs ) {ntfor ( let [ emitter, name ] of destinations )
{nttif ( !name ) {ntttname = eventInfo.name;ntt} else if ( typeof name ==
&#39;function&#39; ) {ntttname = name( eventInfo.name );ntt}nnttconst
delegatedInfo = new EventInfo( eventInfo.source, name
);nnttdelegatedInfo.path = [ …eventInfo.path ];nnttemitter.fire(
delegatedInfo, …fireArgs );nt}n}nn// Removes callback from emitter for
given event.n//n// @param {module:utils/emittermixin~Emitter} emittern//
@param {String} eventn// @param {Function} callbacknfunction
removeCallback( emitter, event, callback ) {ntconst lists =
getCallbacksListsForNamespace( emitter, event );nntfor ( const callbacks of
lists ) {nttfor ( let i = 0; i &lt; callbacks.length; i++ ) {ntttif (
callbacks[ i ].callback == callback ) {ntttt// Remove the callback from the
list (fixing the next index).nttttcallbacks.splice( i, 1
);ntttti–;nttt}ntt}nt}n}nn/**n * The return value of {@link
~EmitterMixin#delegate}.n *n * @interface
module:utils/emittermixin~EmitterMixinDelegateChainn */nn/**n * Selects
destination for {@link module:utils/emittermixin~EmitterMixin#delegate}
events.n *n * @method ton * @param {module:utils/emittermixin~Emitter}
emitter An `EmitterMixin` instance which is the destination for delegated
events.n * @param {String|Function} nameOrFunction A custom event name or
function which converts the original name string.n
*/nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/emittermixin.jsn// module id = nulln// module chunks
= ”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben.
All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
utils/mixn */nn/**n * Copies enumerable properties and symbols from the
objects given as 2nd+ parameters to then * prototype of first object (a
constructor).n *n *ttclass Editor {n *ttt…n *tt}n *n *ttconst SomeMixin =
{n *ttta() {n *ttttreturn &#39;a&#39;;n *ttt}n *tt};n *n *ttmix( Editor,
SomeMixin, … );n *n *ttnew Editor().a(); // -&gt; &#39;a&#39;n *n * Note:
Properties which already exist in the base class will not be overriden.n *n
* @param {Function} [baseClass] Class which prototype will be extended.n *
@param {Object} […mixins] Objects from which to get properties.n */nexport
default function mix( baseClass, …mixins ) {ntmixins.forEach( mixin =&gt;
{nttObject.getOwnPropertyNames( mixin ).concat(
Object.getOwnPropertySymbols( mixin ) )nttt.forEach( key =&gt; {nttttif (
key in baseClass.prototype ) {ntttttreturn;ntttt}nnttttconst
sourceDescriptor = Object.getOwnPropertyDescriptor( mixin, key
);nttttsourceDescriptor.enumerable = false;nnttttObject.defineProperty(
baseClass.prototype, key, sourceDescriptor );nttt} );nt}
);n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/mix.jsn// module id = nulln// module chunks =
”,“/**n * Removes all key-value entries from the list cache.n *n *
@privaten * @name clearn * @memberOf ListCachen */nfunction
listCacheClear() {n  this.__data__ = [];n}nnexport default
listCacheClear;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_listCacheClear.jsn// module id = nulln//
module chunks = ”,“import listCacheClear from
&#39;./_listCacheClear&#39;;nimport listCacheDelete from
&#39;./_listCacheDelete&#39;;nimport listCacheGet from
&#39;./_listCacheGet&#39;;nimport listCacheHas from
&#39;./_listCacheHas&#39;;nimport listCacheSet from
&#39;./_listCacheSet&#39;;nn/**n * Creates an list cache object.n *n *
@privaten * @constructorn * @param {Array} [entries] The key-value pairs to
cache.n */nfunction ListCache(entries) {n  var index = -1,n      length =
entries ? entries.length : 0;nn  this.clear();n  while (++index &lt;
length) {n    var entry = <a href="index">entries</a>;n    <a
href="0">this.set(entry</a>, <a href="1">entry</a>);n  }n}nn// Add methods
to `ListCache`.nListCache.prototype.clear = <a
href="'delete'">listCacheClear;nListCache.prototype</a> =
listCacheDelete;nListCache.prototype.get =
listCacheGet;nListCache.prototype.has =
listCacheHas;nListCache.prototype.set = listCacheSet;nnexport default
ListCache;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_ListCache.jsn// module id = nulln//
module chunks = ”,“import hashClear from &#39;./_hashClear&#39;;nimport
hashDelete from &#39;./_hashDelete&#39;;nimport hashGet from
&#39;./_hashGet&#39;;nimport hashHas from &#39;./_hashHas&#39;;nimport
hashSet from &#39;./_hashSet&#39;;nn/**n * Creates a hash object.n *n *
@privaten * @constructorn * @param {Array} [entries] The key-value pairs to
cache.n */nfunction Hash(entries) {n  var index = -1,n      length =
entries ? entries.length : 0;nn  this.clear();n  while (++index &lt;
length) {n    var entry = <a href="index">entries</a>;n    <a
href="0">this.set(entry</a>, <a href="1">entry</a>);n  }n}nn// Add methods
to `Hash`.nHash.prototype.clear = <a
href="'delete'">hashClear;nHash.prototype</a> =
hashDelete;nHash.prototype.get = hashGet;nHash.prototype.has =
hashHas;nHash.prototype.set = hashSet;nnexport default
Hash;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_Hash.jsn// module id = nulln// module
chunks = ”,“import mapCacheClear from &#39;./_mapCacheClear&#39;;nimport
mapCacheDelete from &#39;./_mapCacheDelete&#39;;nimport mapCacheGet from
&#39;./_mapCacheGet&#39;;nimport mapCacheHas from
&#39;./_mapCacheHas&#39;;nimport mapCacheSet from
&#39;./_mapCacheSet&#39;;nn/**n * Creates a map cache object to store
key-value pairs.n *n * @privaten * @constructorn * @param {Array} [entries]
The key-value pairs to cache.n */nfunction MapCache(entries) {n  var index
= -1,n      length = entries ? entries.length : 0;nn  this.clear();n  while
(++index &lt; length) {n    var entry = <a href="index">entries</a>;n    <a
href="0">this.set(entry</a>, <a href="1">entry</a>);n  }n}nn// Add methods
to `MapCache`.nMapCache.prototype.clear = <a
href="'delete'">mapCacheClear;nMapCache.prototype</a> =
mapCacheDelete;nMapCache.prototype.get =
mapCacheGet;nMapCache.prototype.has = mapCacheHas;nMapCache.prototype.set =
mapCacheSet;nnexport default MapCache;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/_MapCache.jsn// module id =
nulln// module chunks = ”,“import ListCache from
&#39;./_ListCache&#39;;nimport stackClear from
&#39;./_stackClear&#39;;nimport stackDelete from
&#39;./_stackDelete&#39;;nimport stackGet from
&#39;./_stackGet&#39;;nimport stackHas from &#39;./_stackHas&#39;;nimport
stackSet from &#39;./_stackSet&#39;;nn/**n * Creates a stack cache object
to store key-value pairs.n *n * @privaten * @constructorn * @param {Array}
[entries] The key-value pairs to cache.n */nfunction Stack(entries) {n 
this.__data__ = new ListCache(entries);n}nn// Add methods to
`Stack`.nStack.prototype.clear = <a
href="'delete'">stackClear;nStack.prototype</a> =
stackDelete;nStack.prototype.get = stackGet;nStack.prototype.has =
stackHas;nStack.prototype.set = stackSet;nnexport default
Stack;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_Stack.jsn// module id = nulln// module
chunks = ”,“import eq from &#39;./eq&#39;;nn/** Used for built-in method
references. */nvar objectProto = Object.prototype;nn/** Used to check
objects for own properties. */nvar hasOwnProperty =
objectProto.hasOwnProperty;nn/**n * Assigns `value` to `key` of `object` if
the existing value is not equivalentn * using [`SameValueZero`](<a
href="http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n">ecma-international.org/ecma-262/6.0/#sec-samevaluezero)n</a>
* for equality comparisons.n *n * @privaten * @param {Object} object The
object to modify.n * @param {string} key The key of the property to
assign.n * @param {*} value The value to assign.n */nfunction
assignValue(object, key, value) {n  var objValue = <a
href="key">object</a>;n  if (!(hasOwnProperty.call(object, key) &amp;&amp;
eq(objValue, value)) ||n      (value === undefined &amp;&amp; !(key in
object))) {n    <a href="key">object</a> = value;n  }n}nnexport default
assignValue;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_assignValue.jsn// module id = nulln//
module chunks = ”,“import getPrototype from &#39;./_getPrototype&#39;;nn/**
Used for built-in method references. */nvar objectProto =
Object.prototype;nn/** Used to check objects for own properties. */nvar
hasOwnProperty = objectProto.hasOwnProperty;nn/**n * The base
implementation of `_.has` without support for deep paths.n *n * @privaten *
@param {Object} object The object to query.n * @param {Array|string} key
The key to check.n * @returns {boolean} Returns `true` if `key` exists,
else `false`.n */nfunction baseHas(object, key) {n  // Avoid a bug in IE
10-11 where objects with a [[Prototype]] of `null`,n  // that are composed
entirely of index properties, return `false` forn  // `hasOwnProperty`
checks of them.n  return hasOwnProperty.call(object, key) ||n    (typeof
object == &#39;object&#39; &amp;&amp; key in object &amp;&amp;
getPrototype(object) === null);n}nnexport default
baseHas;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_baseHas.jsn// module id = nulln// module
chunks = ”,“/** Built-in value references. */nvar getOwnPropertySymbols =
Object.getOwnPropertySymbols;nn/**n * Creates an array of the own
enumerable symbol properties of `object`.n *n * @privaten * @param {Object}
object The object to query.n * @returns {Array} Returns the array of
symbols.n */nfunction getSymbols(object) {n  // Coerce `object` to an
object to avoid non-object errors in V8.n  // See <a
href="https://bugs.chromium.org/p/v8/issues/detail?id=3443">bugs.chromium.org/p/v8/issues/detail?id=3443</a>
for more details.n  return getOwnPropertySymbols(Object(object));n}nn//
Fallback for IE &lt; 11.nif (!getOwnPropertySymbols) {n  getSymbols =
function() {n    return [];n  };n}nnexport default
getSymbols;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_getSymbols.jsn// module id = nulln//
module chunks = ”,“import DataView from &#39;./_DataView&#39;;nimport Map
from &#39;./_Map&#39;;nimport Promise from &#39;./_Promise&#39;;nimport Set
from &#39;./_Set&#39;;nimport WeakMap from &#39;./_WeakMap&#39;;nimport
toSource from &#39;./_toSource&#39;;nn/** `Object#toString` result
references. */nvar mapTag = &#39;[object Map]&#39;,n    objectTag =
&#39;[object Object]&#39;,n    promiseTag = &#39;[object Promise]&#39;,n   
setTag = &#39;[object Set]&#39;,n    weakMapTag = &#39;[object
WeakMap]&#39;;nnvar dataViewTag = &#39;[object DataView]&#39;;nn/** Used
for built-in method references. */nvar objectProto =
Object.prototype;nn/**n * Used to resolve then * [`toStringTag`](<a
href="http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n">ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)n</a>
* of values.n */nvar objectToString = objectProto.toString;nn/** Used to
detect maps, sets, and weakmaps. */nvar dataViewCtorString =
toSource(DataView),n    mapCtorString = toSource(Map),n   
promiseCtorString = toSource(Promise),n    setCtorString = toSource(Set),n 
weakMapCtorString = toSource(WeakMap);nn/**n * Gets the `toStringTag` of
`value`.n *n * @privaten * @param {*} value The value to query.n * @returns
{string} Returns the `toStringTag`.n */nfunction getTag(value) {n  return
objectToString.call(value);n}nn// Fallback for data views, maps, sets, and
weak maps in IE 11,n// for data views in Edge, and promises in Node.js.nif
((DataView &amp;&amp; getTag(new DataView(new ArrayBuffer(1))) !=
dataViewTag) ||n    (Map &amp;&amp; getTag(new Map) != mapTag) ||n   
(Promise &amp;&amp; getTag(Promise.resolve()) != promiseTag) ||n    (Set
&amp;&amp; getTag(new Set) != setTag) ||n    (WeakMap &amp;&amp; getTag(new
WeakMap) != weakMapTag)) {n  getTag = function(value) {n    var result =
objectToString.call(value),n        Ctor = result == objectTag ?
value.constructor : undefined,n        ctorString = Ctor ? toSource(Ctor) :
undefined;nn    if (ctorString) {n      switch (ctorString) {n        case
dataViewCtorString: return dataViewTag;n        case mapCtorString: return
mapTag;n        case promiseCtorString: return promiseTag;n        case
setCtorString: return setTag;n        case weakMapCtorString: return
weakMapTag;n      }n    }n    return result;n  };n}nnexport default
getTag;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_getTag.jsn// module id = nulln// module
chunks = ”,“import Stack from &#39;./_Stack&#39;;nimport arrayEach from
&#39;./_arrayEach&#39;;nimport assignValue from
&#39;./_assignValue&#39;;nimport baseAssign from
&#39;./_baseAssign&#39;;nimport cloneBuffer from
&#39;./_cloneBuffer&#39;;nimport copyArray from
&#39;./_copyArray&#39;;nimport copySymbols from
&#39;./_copySymbols&#39;;nimport getAllKeys from
&#39;./_getAllKeys&#39;;nimport getTag from &#39;./_getTag&#39;;nimport
initCloneArray from &#39;./_initCloneArray&#39;;nimport initCloneByTag from
&#39;./_initCloneByTag&#39;;nimport initCloneObject from
&#39;./_initCloneObject&#39;;nimport isArray from
&#39;./isArray&#39;;nimport isBuffer from &#39;./isBuffer&#39;;nimport
isHostObject from &#39;./_isHostObject&#39;;nimport isObject from
&#39;./isObject&#39;;nimport keys from &#39;./keys&#39;;nn/**
`Object#toString` result references. */nvar argsTag = &#39;[object
Arguments]&#39;,n    arrayTag = &#39;[object Array]&#39;,n    boolTag =
&#39;[object Boolean]&#39;,n    dateTag = &#39;[object Date]&#39;,n   
errorTag = &#39;[object Error]&#39;,n    funcTag = &#39;[object
Function]&#39;,n    genTag = &#39;[object GeneratorFunction]&#39;,n   
mapTag = &#39;[object Map]&#39;,n    numberTag = &#39;[object
Number]&#39;,n    objectTag = &#39;[object Object]&#39;,n    regexpTag =
&#39;[object RegExp]&#39;,n    setTag = &#39;[object Set]&#39;,n   
stringTag = &#39;[object String]&#39;,n    symbolTag = &#39;[object
Symbol]&#39;,n    weakMapTag = &#39;[object WeakMap]&#39;;nnvar
arrayBufferTag = &#39;[object ArrayBuffer]&#39;,n    dataViewTag =
&#39;[object DataView]&#39;,n    float32Tag = &#39;[object
Float32Array]&#39;,n    float64Tag = &#39;[object Float64Array]&#39;,n   
int8Tag = &#39;[object Int8Array]&#39;,n    int16Tag = &#39;[object
Int16Array]&#39;,n    int32Tag = &#39;[object Int32Array]&#39;,n   
uint8Tag = &#39;[object Uint8Array]&#39;,n    uint8ClampedTag =
&#39;[object Uint8ClampedArray]&#39;,n    uint16Tag = &#39;[object
Uint16Array]&#39;,n    uint32Tag = &#39;[object Uint32Array]&#39;;nn/**
Used to identify `toStringTag` values supported by `_.clone`. */nvar
cloneableTags = {};<a href=”argsTag“>ncloneableTags</a> = <a
href="arrayTag">cloneableTags</a> =<a
href=”arrayBufferTag“>ncloneableTags</a> = <a
href="dataViewTag">cloneableTags</a> =<a href=”boolTag“>ncloneableTags</a>
= <a href="dateTag">cloneableTags</a> =<a
href=”float32Tag“>ncloneableTags</a> = <a
href="float64Tag">cloneableTags</a> =<a href=”int8Tag“>ncloneableTags</a> =
<a href="int16Tag">cloneableTags</a> =<a href=”int32Tag“>ncloneableTags</a>
= <a href="mapTag">cloneableTags</a> =<a
href=”numberTag“>ncloneableTags</a> = <a href="objectTag">cloneableTags</a>
=<a href=”regexpTag“>ncloneableTags</a> = <a
href="setTag">cloneableTags</a> =<a href=”stringTag“>ncloneableTags</a> =
<a href="symbolTag">cloneableTags</a> =<a
href=”uint8Tag“>ncloneableTags</a> = <a
href="uint8ClampedTag">cloneableTags</a> =<a
href=”uint16Tag“>ncloneableTags</a> = <a href="uint32Tag">cloneableTags</a>
= <a href="errorTag">true;ncloneableTags</a> = <a
href="funcTag">cloneableTags</a> =<a href=”weakMapTag“>ncloneableTags</a> =
false;nn/**n * The base implementation of `_.clone` and `_.cloneDeep` which
tracksn * traversed objects.n *n * @privaten * @param {*} value The value
to clone.n * @param {boolean} [isDeep] Specify a deep clone.n * @param
{boolean} [isFull] Specify a clone including symbols.n * @param {Function}
[customizer] The function to customize cloning.n * @param {string} [key]
The key of `value`.n * @param {Object} [object] The parent object of
`value`.n * @param {Object} [stack] Tracks traversed objects and their
clone counterparts.n * @returns {*} Returns the cloned value.n */nfunction
baseClone(value, isDeep, isFull, customizer, key, object, stack) {n  var
result;n  if (customizer) {n    result = object ? customizer(value, key,
object, stack) : customizer(value);n  }n  if (result !== undefined) {n   
return result;n  }n  if (!isObject(value)) {n    return value;n  }n  var
isArr = isArray(value);n  if (isArr) {n    result = initCloneArray(value);n
if (!isDeep) {n      return copyArray(value, result);n    }n  } else {n   
var tag = getTag(value),n        isFunc = tag == funcTag || tag ==
genTag;nn    if (isBuffer(value)) {n      return cloneBuffer(value,
isDeep);n    }n    if (tag == objectTag || tag == argsTag || (isFunc
&amp;&amp; !object)) {n      if (isHostObject(value)) {n        return
object ? value : {};n      }n      result = initCloneObject(isFunc ? {} :
value);n      if (!isDeep) {n        return copySymbols(value,
baseAssign(result, value));n      }n    } else {n      if (!<a
href="tag">cloneableTags</a>) {n        return object ? value : {};n     
}n      result = initCloneByTag(value, tag, baseClone, isDeep);n    }n  }n 
// Check for circular references and return its corresponding clone.n 
stack || (stack = new Stack);n  var stacked = stack.get(value);n  if
(stacked) {n    return stacked;n  }n  stack.set(value, result);nn  if
(!isArr) {n    var props = isFull ? getAllKeys(value) : keys(value);n  }n 
// Recursively populate clone (susceptible to call stack limits).n 
arrayEach(props || value, function(subValue, key) {n    if (props) {n     
key = subValue;n      subValue = <a href="key">value</a>;n    }n   
assignValue(result, key, baseClone(subValue, isDeep, isFull, customizer,
key, value, stack));n  });n  return result;n}nnexport default
baseClone;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_baseClone.jsn// module id = nulln//
module chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module utils/comparearraysn */nn/**n * Compares how given
arrays relate to each other. One array can be: same as another array,
prefix of another arrayn * or completely different. If arrays are
different, first index at which they differ is returned. Otherwise,n * a
flag specifying the relation is returned. Flags are negative numbers, so
whenever a number &gt;= 0 is returnedn * it means that arrays differ.n *n
*ttcompareArrays( [ 0, 2 ], [ 0, 2 ] );tt// &#39;same&#39;n
*ttcompareArrays( [ 0, 2 ], [ 0, 2, 1 ] );tt// &#39;prefix&#39;n
*ttcompareArrays( [ 0, 2 ], [ 0 ] );ttt// &#39;extension&#39;n
*ttcompareArrays( [ 0, 2 ], [ 1, 2 ] );tt// 0n *ttcompareArrays( [ 0, 2 ],
[ 0, 1 ] );tt// 1n *n * @param {Array} a Array that is compared.n * @param
{Array} b Array to compare with.n * @returns
{module:utils/comparearrays~ArrayRelation} How array `a` is related to
`b`.n */nexport default function compareArrays( a, b ) {ntconst minLen =
Math.min( a.length, b.length );nntfor ( let i = 0; i &lt; minLen; i++ )
{nttif ( a[ i ] != b[ i ] ) {nttt// The arrays are different.ntttreturn
i;ntt}nt}nnt// Both arrays were same at all points.ntif ( a.length ==
b.length ) {ntt// If their length is also same, they are the same.nttreturn
&#39;same&#39;;nt} else if ( a.length &lt; b.length ) {ntt// Compared array
is shorter so it is a prefix of the other array.nttreturn
&#39;prefix&#39;;nt} else {ntt// Compared array is longer so it is an
extension of the other array.nttreturn &#39;extension&#39;;nt}n}nn/**n *
@typedef {&#39;extension&#39;|&#39;same&#39;|&#39;prefix&#39;}
module:utils/comparearrays~ArrayRelationn */nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-utils/src/comparearrays.jsn// module id =
nulln// module chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module engine/view/noden */nnimport CKEditorError
from &#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nimport
EmitterMixin from
&#39;@ckeditor/ckeditor5-utils/src/emittermixin&#39;;nimport mix from
&#39;@ckeditor/ckeditor5-utils/src/mix&#39;;nimport clone from
&#39;@ckeditor/ckeditor5-utils/src/lib/lodash/clone&#39;;nimport
compareArrays from
&#39;@ckeditor/ckeditor5-utils/src/comparearrays&#39;;nn/**n * Abstract
tree view node class.n *n * @abstractn */nexport default class Node
{nt/**nt * Creates a tree view node.nt *nt * This is an abstract class, so
this constructor should not be used directly.nt */ntconstructor()
{ntt/**ntt * Parent element. Null by default. Set by {@link
module:engine/view/element~Element#_insertChild}.ntt *ntt * @readonlyntt *
@member
{module:engine/view/element~Element|module:engine/view/documentfragment~DocumentFragment|null}ntt
*/nttthis.parent = null;nt}nnt/**nt * Index of the node in the parent
element or null if the node has no parent.nt *nt * Accessing this property
throws an error if this node&#39;s parent element does not contain it.nt *
This means that view tree got broken.nt *nt * @readonlynt * @type
{Number|null}nt */ntget index() {nttlet pos;nnttif ( !this.parent )
{ntttreturn null;ntt}nntt// No parent or child doesn&#39;t exist in
parent&#39;s children.nttif ( ( pos = this.parent.getChildIndex( this ) )
== -1 ) {nttt/**nttt * The node&#39;s parent does not contain this node. It
means that the document tree is corrupted.nttt *nttt * @error
view-node-not-found-in-parentnttt */ntttthrow new CKEditorError(
&#39;view-node-not-found-in-parent: The node\&#39;s parent does not contain
this node.&#39; );ntt}nnttreturn pos;nt}nnt/**nt * Node&#39;s next sibling,
or `null` if it is the last child.nt *nt * @readonlynt * @type
{module:engine/view/node~Node|null}nt */ntget nextSibling() {nttconst index
= this.index;nnttreturn ( index !== null &amp;&amp; this.parent.getChild(
index + 1 ) ) || null;nt}nnt/**nt * Node&#39;s previous sibling, or `null`
if it is the first child.nt *nt * @readonlynt * @type
{module:engine/view/node~Node|null}nt */ntget previousSibling() {nttconst
index = this.index;nnttreturn ( index !== null &amp;&amp;
this.parent.getChild( index - 1 ) ) || null;nt}nnt/**nt * Top-most ancestor
of the node. If the node has no parent it is the root itself.nt *nt *
@readonlynt * @type
{module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment}nt
*/ntget root() {nttlet root = this; // eslint-disable-line
consistent-thisnnttwhile ( root.parent ) {ntttroot =
root.parent;ntt}nnttreturn root;nt}nnt/**nt * {@link
module:engine/view/document~Document View document} that owns this node, or
`null` if the node is insident * {@link
module:engine/view/documentfragment~DocumentFragment document fragment}.nt
*nt * @readonlynt * @type {module:engine/view/document~Document|null}nt
*/ntget document() {ntt// Parent might be Node, null or
DocumentFragment.nttif ( this.parent instanceof Node ) {ntttreturn
this.parent.document;ntt} else {ntttreturn null;ntt}nt}nnt/**nt * Gets a
path to the node. The path is an array containing indices of consecutive
ancestors of this node,nt * beginning from {@link
module:engine/view/node~Node#root root}, down to this node&#39;s index.nt
*nt *ttconst abc = new Text( &#39;abc&#39; );nt *ttconst foo = new Text(
&#39;foo&#39; );nt *ttconst h1 = new Element( &#39;h1&#39;, null, new Text(
&#39;header&#39; ) );nt *ttconst p = new Element( &#39;p&#39;, null, [ abc,
foo ] );nt *ttconst div = new Element( &#39;div&#39;, null, [ h1, p ] );nt
*ttfoo.getPath(); // Returns [ 1, 3 ]. `foo` is in `p` which is in `div`.
`p` starts at offset 1, while `foo` at 3.nt *tth1.getPath(); // Returns [ 0
].nt *ttdiv.getPath(); // Returns [].nt *nt * @returns
{Array.&lt;Number&gt;} The path.nt */ntgetPath() {nttconst path = [];nttlet
node = this; // eslint-disable-line consistent-thisnnttwhile ( node.parent
) {ntttpath.unshift( node.index );ntttnode = node.parent;ntt}nnttreturn
path;nt}nnt/**nt * Returns ancestors array of this node.nt *nt * @param
{Object} options Options object.nt * @param {Boolean}
[options.includeSelf=false] When set to `true` this node will be also
included in parent&#39;s array.nt * @param {Boolean}
[options.parentFirst=false] When set to `true`, array will be sorted from
node&#39;s parent to root element,nt * otherwise root element will be the
first item in the array.nt * @returns {Array} Array with ancestors.nt
*/ntgetAncestors( options = { includeSelf: false, parentFirst: false } )
{nttconst ancestors = [];nttlet parent = options.includeSelf ? this :
this.parent;nnttwhile ( parent ) {ntttancestors[ options.parentFirst ?
&#39;push&#39; : &#39;unshift&#39; ]( parent );ntttparent =
parent.parent;ntt}nnttreturn ancestors;nt}nnt/**nt * Returns a {@link
module:engine/view/element~Element} or {@link
module:engine/view/documentfragment~DocumentFragment}nt * which is a common
ancestor of both nodes.nt *nt * @param {module:engine/view/node~Node} node
The second node.nt * @param {Object} options Options object.nt * @param
{Boolean} [options.includeSelf=false] When set to `true` both nodes will be
considered "ancestors&quot; too.nt * Which means that if e.g. node A is
inside B, then their common ancestor will be B.nt * @returns
{module:engine/view/element~Element|module:engine/view/documentfragment~DocumentFragment|null}nt
*/ntgetCommonAncestor( node, options = {} ) {nttconst ancestorsA =
this.getAncestors( options );nttconst ancestorsB = node.getAncestors(
options );nnttlet i = 0;nnttwhile ( ancestorsA[ i ] == ancestorsB[ i ]
&amp;&amp; ancestorsA[ i ] ) {nttti++;ntt}nnttreturn i === 0 ? null :
ancestorsA[ i - 1 ];nt}nnt/**nt * Returns whether this node is before given
node. `false` is returned if nodes are in different trees (for example,nt *
in different {@link
module:engine/view/documentfragment~DocumentFragment}s).nt *nt * @param
{module:engine/view/node~Node} node Node to compare with.nt * @returns
{Boolean}nt */ntisBefore( node ) {ntt// Given node is not before this node
if they are same.nttif ( this == node ) {ntttreturn false;ntt}nntt// Return
`false` if it is impossible to compare nodes.nttif ( this.root !==
node.root ) {ntttreturn false;ntt}nnttconst thisPath =
this.getPath();nttconst nodePath = node.getPath();nnttconst result =
compareArrays( thisPath, nodePath );nnttswitch ( result ) {ntttcase
&#39;prefix&#39;:nttttreturn true;nntttcase &#39;extension&#39;:nttttreturn
false;nntttdefault:nttttreturn thisPath[ result ] &lt; nodePath[ result
];ntt}nt}nnt/**nt * Returns whether this node is after given node. `false`
is returned if nodes are in different trees (for example,nt * in different
{@link module:engine/view/documentfragment~DocumentFragment}s).nt *nt *
@param {module:engine/view/node~Node} node Node to compare with.nt *
@returns {Boolean}nt */ntisAfter( node ) {ntt// Given node is not before
this node if they are same.nttif ( this == node ) {ntttreturn
false;ntt}nntt// Return `false` if it is impossible to compare nodes.nttif
( this.root !== node.root ) {ntttreturn false;ntt}nntt// In other cases,
just check if the `node` is before, and return the opposite.nttreturn
!this.isBefore( node );nt}nnt/**nt * Removes node from parent.nt *nt *
@protectednt */nt_remove() {nttthis.parent._removeChildren( this.index
);nt}nnt/**nt * @param {module:engine/view/document~ChangeType} type Type
of the change.nt * @param {module:engine/view/node~Node} node Changed
node.nt * @fires changent */nt_fireChange( type, node ) {nttthis.fire(
&#39;change:&#39; + type, node );nnttif ( this.parent )
{ntttthis.parent._fireChange( type, node );ntt}nt}nnt/**nt * Custom toJSON
method to solve child-parent circular dependencies.nt *nt * @returns
{Object} Clone of this object with the parent property removed.nt
*/nttoJSON() {nttconst json = clone( this );nntt// Due to circular
references we need to remove parent reference.nttdelete
json.parent;nnttreturn json;nt}nnt/**nt * Checks whether given view tree
object is of given type.nt *nt * This method is useful when processing view
tree objects that are of unknown type. For example, a functionnt * may
return {@link module:engine/view/documentfragment~DocumentFragment} or
{@link module:engine/view/node~Node}nt * that can be either text node or
element. This method can be used to check what kind of object is
returned.nt *nt *ttobj.is( &#39;node&#39; ); // true for any node, false
for document fragment and text fragmentnt *ttobj.is(
&#39;documentFragment&#39; ); // true for document fragment, false for any
nodent *ttobj.is( &#39;element&#39; ); // true for any element, false for
text node or document fragmentnt *ttobj.is( &#39;element&#39;, &#39;p&#39;
); // true only for element which name is &#39;p&#39;nt *ttobj.is(
&#39;p&#39; ); // shortcut for obj.is( &#39;element&#39;, &#39;p&#39; )nt
*ttobj.is( &#39;text&#39; ); // true for text node, false for element and
document fragmentnt *nt * @method isnt * @param
{&#39;element&#39;|&#39;containerElement&#39;|&#39;attributeElement&#39;|&#39;emptyElement&#39;|&#39;uiElement&#39;|nt
*
&#39;rootElement&#39;|&#39;documentFragment&#39;|&#39;text&#39;|&#39;textProxy&#39;}
typent * @returns {Boolean}nt */ntis( type ) {nttreturn type ==
&#39;node&#39;;nt}nnt/**nt * Clones this node.nt *nt * @protectednt *
@method #_clonent * @returns {module:engine/view/node~Node} Clone of this
node.nt */nnt/**nt * Checks if provided node is similar to this node.nt *nt
* @method isSimilarnt * @returns {Boolean} True if nodes are similar.nt
*/n}nn/**n * Fired when list of {@link module:engine/view/element~Element
elements} children changes.n *n * Change event is bubbled – it is fired on
all ancestors.n *n * @event change:childrenn * @param
{module:engine/view/node~Node} changedNoden */nn/**n * Fired when list of
{@link module:engine/view/element~Element elements} attributes changes.n *n
* Change event is bubbled – it is fired on all ancestors.n *n * @event
change:attributesn * @param {module:engine/view/node~Node} changedNoden
*/nn/**n * Fired when {@link module:engine/view/text~Text text nodes} data
changes.n *n * Change event is bubbled – it is fired on all ancestors.n *n
* @event change:textn * @param {module:engine/view/node~Node} changedNoden
*/nn/**n * @event changen */nnmix( Node, EmitterMixin
);nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/view/node.jsn// module id = nulln// module chunks =
”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben. All
rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
utils/objecttomapn */nn/**n * Transforms object to map.n *n *ttconst map =
objectToMap( { &#39;foo&#39;: 1, &#39;bar&#39;: 2 } );n *ttmap.get(
&#39;foo&#39; ); // 1n *n * @param {Object} obj <a
href="../../../../Object.html">Object</a> to transform.n * @returns {Map}
Map created from object.n */nexport default function objectToMap( obj )
{ntconst map = new Map();nntfor ( const key in obj ) {nttmap.set( key, obj[
key ] );nt}nntreturn map;n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/objecttomap.jsn// module id = nulln// module chunks
= ”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben.
All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
utils/isiterablen */nn/**n * Checks if value implements iterator
interface.n *n * @param {*} value The value to check.n * @returns {Boolean}
True if value implements iterator interface.n */nexport default function
isIterable( value ) {ntreturn !!( value &amp;&amp; value[ Symbol.iterator ]
);n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/isiterable.jsn// module id = nulln// module chunks =
”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben. All
rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
engine/view/matchern */nn/**n * View matcher class.n * Instance of this
class can be used to find {@link module:engine/view/element~Element
elements} that match given pattern.n */nexport default class Matcher
{nt/**nt * Creates new instance of Matcher.nt *nt * @param
{String|RegExp|Object} [pattern] Match patterns. See {@link
module:engine/view/matcher~Matcher#add add method} fornt * more
information.nt */ntconstructor( …pattern ) {ntt/**ntt * @privatentt * @type
{Array&lt;String|RegExp|Object&gt;}ntt */nttthis._patterns =
[];nnttthis.add( …pattern );nt}nnt/**nt * Adds pattern or patterns to
matcher instance.nt *nt *tt// String.nt *ttmatcher.add( &#39;div&#39; );nt
*nt *tt// Regular expression.nt *ttmatcher.add( /^\w/ );nt *nt *tt// Single
class.nt *ttmatcher.add( {nt *tttclasses: &#39;foobar&#39;nt *tt} );nt *nt
* See {@link module:engine/view/matcher~MatcherPattern} for more
examples.nt *nt * Multiple patterns can be added in one call:nt *nt *
ttmatcher.add( &#39;div&#39;, { classes: &#39;foobar&#39; } );nt *nt *
@param {Object|String|RegExp|Function} pattern <a
href="../../../../Object.html">Object</a> describing pattern details. If
string or regular expressionnt * is provided it will be used to match
element&#39;s name. Pattern can be also provided in a formnt * of a
function - then this function will be called with each {@link
module:engine/view/element~Element element} as a parameter.nt *
Function&#39;s return value will be stored under `match` key of the object
returned fromnt * {@link module:engine/view/matcher~Matcher#match match} or
{@link module:engine/view/matcher~Matcher#matchAll matchAll} methods.nt *
@param {String|RegExp} [pattern.name] Name or regular expression to match
element&#39;s name.nt * @param {Object} [pattern.attributes] <a
href="../../../../Object.html">Object</a> with key-value pairs representing
attributes to match. Each object keynt * represents attribute name. Value
under that key can be either:nt * * `true` - then attribute is just
required (can be empty),nt * * a string - then attribute has to be equal,
ornt * * a regular expression - then attribute has to match the
expression.nt * @param {String|RegExp|Array} [pattern.classes] Class name
or array of class names to match. Each name can bent * provided in a form
of string or regular expression.nt * @param {Object} [pattern.styles] <a
href="../../../../Object.html">Object</a> with key-value pairs representing
styles to match. Each object keynt * represents style name. Value under
that key can be either a string or a regular expression and it will be
usednt * to match style value.nt */ntadd( …pattern ) {nttfor ( let item of
pattern ) {nttt// String or RegExp pattern is used as element&#39;s
name.ntttif ( typeof item == &#39;string&#39; || item instanceof RegExp )
{nttttitem = { name: item };nttt}nnttt// Single class name/RegExp can be
provided.ntttif ( item.classes &amp;&amp; ( typeof item.classes ==
&#39;string&#39; || item.classes instanceof RegExp ) ) {nttttitem.classes =
[ item.classes ];nttt}nntttthis._patterns.push( item );ntt}nt}nnt/**nt *
Matches elements for currently stored patterns. Returns match information
about first foundnt * {@link module:engine/view/element~Element element},
otherwise returns `null`.nt *nt * Example of returned object:nt *nt *tt{nt
*tttelement: &lt;instance of found element&gt;,nt *tttpattern: &lt;pattern
used to match found element&gt;,nt *tttmatch: {nt *ttttname: true,nt
*ttttattributes: [ &#39;title&#39;, &#39;href&#39; ],nt *ttttclasses: [
&#39;foo&#39; ],nt *ttttstyles: [ &#39;color&#39;, &#39;position&#39; ]nt
*ttt}nt *tt}nt *nt * @see module:engine/view/matcher~Matcher#addnt * @see
module:engine/view/matcher~Matcher#matchAllnt * @param
{…module:engine/view/element~Element} element View element to match against
stored patterns.nt * @returns {Object|null} resultnt * @returns
{module:engine/view/element~Element} result.element Matched view element.nt
* @returns {Object|String|RegExp|Function} result.pattern Pattern that was
used to find matched element.nt * @returns {Object} result.match <a
href="../../../../Object.html">Object</a> representing matched element
parts.nt * @returns {Boolean} [result.match.name] True if name of the
element was matched.nt * @returns {Array} [result.match.attributes] Array
with matched attribute names.nt * @returns {Array} [result.match.classes]
Array with matched class names.nt * @returns {Array} [result.match.styles]
Array with matched style names.nt */ntmatch( …element ) {nttfor ( const
singleElement of element ) {ntttfor ( const pattern of this._patterns )
{nttttconst match = isElementMatching( singleElement, pattern );nnttttif (
match ) {ntttttreturn {nttttttelement:
singleElement,nttttttpattern,nttttttmatchnttttt};ntttt}nttt}ntt}nnttreturn
null;nt}nnt/**nt * Matches elements for currently stored patterns. Returns
array of match information with all foundnt * {@link
module:engine/view/element~Element elements}. If no element is found -
returns `null`.nt *nt * @see module:engine/view/matcher~Matcher#addnt *
@see module:engine/view/matcher~Matcher#matchnt * @param
{…module:engine/view/element~Element} element View element to match against
stored patterns.nt * @returns {Array.&lt;Object&gt;|null} Array with match
information about found elements or `null`. For more informationnt * see
{@link module:engine/view/matcher~Matcher#match match method}
description.nt */ntmatchAll( …element ) {nttconst results = [];nnttfor (
const singleElement of element ) {ntttfor ( const pattern of this._patterns
) {nttttconst match = isElementMatching( singleElement, pattern );nnttttif
( match ) {ntttttresults.push( {nttttttelement:
singleElement,nttttttpattern,nttttttmatchnttttt}
);ntttt}nttt}ntt}nnttreturn results.length &gt; 0 ? results :
null;nt}nnt/**nt * Returns the name of the element to match if there is
exactly one pattern added to the matcher instancent * and it matches
element name defined by `string` (not `RegExp`). Otherwise, returns
`null`.nt *nt * @returns {String|null} Element name trying to match.nt
*/ntgetElementName() {nttif ( this._patterns.length !== 1 ) {ntttreturn
null;ntt}nnttconst pattern = this._patterns[ 0 ];nttconst name =
pattern.name;nnttreturn ( typeof pattern != &#39;function&#39; &amp;&amp;
name &amp;&amp; !( name instanceof RegExp ) ) ? name : null;nt}n}nn//
Returns match information if {@link module:engine/view/element~Element
element} is matching provided pattern.n// If element cannot be matched to
provided pattern - returns `null`.n//n// @param
{module:engine/view/element~Element} elementn// @param
{Object|String|RegExp|Function} patternn// @returns {Object|null} Returns
object with match information or null if element is not matching.nfunction
isElementMatching( element, pattern ) {nt// If pattern is provided as
function - return result of that function;ntif ( typeof pattern ==
&#39;function&#39; ) {nttreturn pattern( element );nt}nntconst match =
{};nt// Check element&#39;s name.ntif ( pattern.name ) {nttmatch.name =
matchName( pattern.name, element.name );nnttif ( !match.name ) {ntttreturn
null;ntt}nt}nnt// Check element&#39;s attributes.ntif ( pattern.attributes
) {nttmatch.attributes = matchAttributes( pattern.attributes, element
);nnttif ( !match.attributes ) {ntttreturn null;ntt}nt}nnt// Check
element&#39;s classes.ntif ( pattern.classes ) {nttmatch.classes =
matchClasses( pattern.classes, element );nnttif ( !match.classes )
{ntttreturn false;ntt}nt}nnt// Check element&#39;s styles.ntif (
pattern.styles ) {nttmatch.styles = matchStyles( pattern.styles, element
);nnttif ( !match.styles ) {ntttreturn false;ntt}nt}nntreturn match;n}nn//
Checks if name can be matched by provided pattern.n//n// @param
{String|RegExp} patternn// @param {String} namen// @returns {Boolean}
Returns `true` if name can be matched, `false` otherwise.nfunction
matchName( pattern, name ) {nt// If pattern is provided as RegExp - test
against this regexp.ntif ( pattern instanceof RegExp ) {nttreturn
pattern.test( name );nt}nntreturn pattern === name;n}nn// Checks if
attributes of provided element can be matched against provided
patterns.n//n// @param {Object} patterns <a
href="../../../../Object.html">Object</a> with information about attributes
to match. Each key of the object will ben// used as attribute name. Value
of each key can be a string or regular expression to match against
attribute value.n// @param {module:engine/view/element~Element} element
Element which attributes will be tested.n// @returns {Array|null} Returns
array with matched attribute names or `null` if no attributes were
matched.nfunction matchAttributes( patterns, element ) {ntconst match =
[];nntfor ( const name in patterns ) {nttconst pattern = patterns[ name
];nnttif ( element.hasAttribute( name ) ) {ntttconst attribute =
element.getAttribute( name );nntttif ( pattern === true ) {nttttmatch.push(
name );nttt} else if ( pattern instanceof RegExp ) {nttttif ( pattern.test(
attribute ) ) {ntttttmatch.push( name );ntttt} else {ntttttreturn
null;ntttt}nttt} else if ( attribute === pattern ) {nttttmatch.push( name
);nttt} else {nttttreturn null;nttt}ntt} else {ntttreturn
null;ntt}nt}nntreturn match;n}nn// Checks if classes of provided element
can be matched against provided patterns.n//n// @param
{Array.&lt;String|RegExp&gt;} patterns Array of strings or regular
expressions to match against element&#39;s classes.n// @param
{module:engine/view/element~Element} element Element which classes will be
tested.n// @returns {Array|null} Returns array with matched class names or
`null` if no classes were matched.nfunction matchClasses( patterns, element
) {ntconst match = [];nntfor ( const pattern of patterns ) {nttif ( pattern
instanceof RegExp ) {ntttconst classes = element.getClassNames();nntttfor (
const name of classes ) {nttttif ( pattern.test( name ) )
{ntttttmatch.push( name );ntttt}nttt}nntttif ( match.length === 0 )
{nttttreturn null;nttt}ntt} else if ( element.hasClass( pattern ) )
{ntttmatch.push( pattern );ntt} else {ntttreturn null;ntt}nt}nntreturn
match;n}nn// Checks if styles of provided element can be matched against
provided patterns.n//n// @param {Object} patterns <a
href="../../../../Object.html">Object</a> with information about styles to
match. Each key of the object will ben// used as style name. Value of each
key can be a string or regular expression to match against style value.n//
@param {module:engine/view/element~Element} element Element which styles
will be tested.n// @returns {Array|null} Returns array with matched style
names or `null` if no styles were matched.nfunction matchStyles( patterns,
element ) {ntconst match = [];nntfor ( const name in patterns ) {nttconst
pattern = patterns[ name ];nnttif ( element.hasStyle( name ) ) {ntttconst
style = element.getStyle( name );nntttif ( pattern instanceof RegExp )
{nttttif ( pattern.test( style ) ) {ntttttmatch.push( name );ntttt} else
{ntttttreturn null;ntttt}nttt} else if ( style === pattern )
{nttttmatch.push( name );nttt} else {nttttreturn null;nttt}ntt} else
{ntttreturn null;ntt}nt}nntreturn match;n}nn/**n * An entity that is a
valid pattern recognized by a matcher. `MatcherPattern` is used by {@link
~Matcher} to recognizen * if a view element fits in a group of view
elements described by the pattern.n *n * `MatcherPattern` can be given as a
`String`, a `RegExp`, an `Object` or a `Function`.n *n * If
`MatcherPattern` is given as a `String` or `RegExp`, it will match any view
element that has a matching name:n *n *tt// Match any element with name
equal to &#39;div&#39;.n *ttconst pattern = &#39;div&#39;;n *n *tt// Match
any element which name starts on &#39;p&#39;.n *ttconst pattern = /^p/;n *n
* If `MatcherPattern` is given as an `Object`, all the object&#39;s
properties will be matched with view element properties.n *n *tt// Match
view element&#39;s name.n *ttconst pattern = { name: /^p/ };n *n *tt//
Match view element which has matching attributes.n *ttconst pattern = {n
*tttattribute: {n *tttttitle: &#39;foobar&#39;,t// Attribute title should
equal &#39;foobar&#39;.n *ttttfoo: /^\w+/,tt// Attribute foo should match
/^\w+/ regexp.n *ttttbar: truettt// Attribute bar should be set (can be
empty).n *ttt}n *tt};n *n *tt// Match view element which has given class.n
*ttconst pattern = {n *tttclasses: &#39;foobar&#39;n *tt};n *n *tt// Match
view element class using regular expression.n *ttconst pattern = {n
*tttclasses: /foo…/n *tt};n *n *tt// Multiple classes to match.n *ttconst
pattern = {n *tttclasses: [ &#39;baz&#39;, &#39;bar&#39;, /foo…/ ]n *tt}:n
*n *tt// Match view element which has given styles.n *ttconst pattern = {n
*tttstyles: {n *ttttposition: &#39;absolute&#39;,n *ttttcolor: /^\w*blue$/n
*ttt}n *tt};n *n *tt// Pattern with multiple properties.n *ttconst pattern
= {n *tttname: &#39;span&#39;,n *tttstyles: {n *tttt&#39;font-weight&#39;:
&#39;bold&#39;n *ttt},n *tttclasses: &#39;highlighted&#39;n *tt};n *n * If
`MatcherPattern` is given as a `Function`, the function takes a view
element as a first and only parameter andn * the function should decide
whether that element matches. If so, it should return what part of the view
element has been matched.n * Otherwise, the function should return `null`.
The returned result will be included in `match` property of the objectn *
returned by {@link ~Matcher#match} call.n *n *tt// Match an empty
&lt;div&gt; element.n *ttconst pattern = element =&gt; {n *tttif (
element.name == &#39;div&#39; &amp;&amp; element.childCount &gt; 0 ) {n
*tttt// Return which part of the element was matched.n *ttttreturn { name:
true };n *ttt}n *n *tttreturn null;n *tt};n *n *tt// Match a &lt;p&gt;
element with big font (&quot;heading-like&quot; element).n *ttconst pattern
= element =&gt; {n *tttif ( element.name == &#39;p&#39; ) {n *ttttconst
fontSize = element.getStyle( &#39;font-size&#39; );n *ttttconst size =
fontSize.match( /(\d+)/px );n *n *ttttif ( size &amp;&amp; Number( size[ 1
] ) &gt; 26 ) {n *tttttreturn { name: true, attribute: [
&#39;font-size&#39; ] };n *tttt}n *ttt}n *n *tttreturn null;n *tt};n *n *
`MatcherPattern` is defined in a way that it is a superset of {@link
module:engine/view/elementdefinition~ElementDefinition},n * that is, every
`ElementDefinition` also can be used as a `MatcherPattern`.n *n * @typedef
{String|RegExp|Object|Function} module:engine/view/matcher~MatcherPatternn
*n * @property {String|RegExp} [name] View element name to match.n *
@property {String|RegExp|Array.&lt;String|RegExp&gt;} [classes] View
element&#39;s class name(s) to match.n * @property {Object} [styles] <a
href="../../../../Object.html">Object</a> with key-value pairs representing
styles to match.n * Each object key represents style name. Value can be
given as `String` or `RegExp`.n * @property {Object} [attributes] <a
href="../../../../Object.html">Object</a> with key-value pairs representing
attributes to match.n * Each object key represents attribute name. Value
can be given as `String` or `RegExp`.n */nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-engine/src/view/matcher.jsn// module id = nulln//
module chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module engine/view/elementn */nnimport Node from
&#39;./node&#39;;nimport Text from &#39;./text&#39;;nimport TextProxy from
&#39;./textproxy&#39;;nimport objectToMap from
&#39;@ckeditor/ckeditor5-utils/src/objecttomap&#39;;nimport isIterable from
&#39;@ckeditor/ckeditor5-utils/src/isiterable&#39;;nimport isPlainObject
from
&#39;@ckeditor/ckeditor5-utils/src/lib/lodash/isPlainObject&#39;;nimport
Matcher from &#39;./matcher&#39;;nn/**n * View element.n *n * The editing
engine does not define a fixed semantics of its elements (it is
"DTD-free&quot;).n * This is why the type of the {@link
module:engine/view/element~Element} need ton * be defined by the feature
developer. When creating an element you should use one of the following
methods:n *n * * {@link
module:engine/view/writer~Writer#createContainerElement
`writer.createContainerElement()`} in order to createn * a {@link
module:engine/view/containerelement~ContainerElement},n * * {@link
module:engine/view/writer~Writer#createAttributeElement
`writer.createAttributeElement()`} in order to createn * a {@link
module:engine/view/attributeelement~AttributeElement},n * * {@link
module:engine/view/writer~Writer#createEmptyElement
`writer.createEmptyElement()`} in order to createn * a {@link
module:engine/view/emptyelement~EmptyElement}.n * * {@link
module:engine/view/writer~Writer#createUIElement
`writer.createUIElement()`} in order to createn * a {@link
module:engine/view/uielement~UIElement}.n * * {@link
module:engine/view/writer~Writer#createEditableElement
`writer.createEditableElement()`} in order to createn * a {@link
module:engine/view/editableelement~EditableElement}.n *n * Note that for
view elements which are not created from the model, like elements from
mutations, paste orn * {@link
module:engine/controller/datacontroller~DataController#set data.set} it is
not possible to define the type of the element, son * these will be
instances of the {@link module:engine/view/element~Element}.n *n * @extends
module:engine/view/node~Noden */nexport default class Element extends Node
{nt/**nt * Creates a view element.nt *nt * Attributes can be passed in
various formats:nt *nt *ttnew Element( &#39;div&#39;, { &#39;class&#39;:
&#39;editor&#39;, &#39;contentEditable&#39;: &#39;true&#39; } ); //
objectnt *ttnew Element( &#39;div&#39;, [ [ &#39;class&#39;,
&#39;editor&#39; ], [ &#39;contentEditable&#39;, &#39;true&#39; ] ] ); //
map-like iteratornt *ttnew Element( &#39;div&#39;, mapOfAttributes ); //
mapnt *nt * *<strong>Note:</strong>* Constructor of this class
shouldn&#39;t be used directly in the code. Use thent * {@link
module:engine/view/writer~Writer#createAttributeElement} for inline
element,nt * {@link
module:engine/view/writer~Writer#createContainerElement} for block
element,nt * {@link module:engine/view/writer~Writer#createEditableElement}
for editable element,nt * {@link
module:engine/view/writer~Writer#createEmptyElement} for empty element ornt
* {@link module:engine/view/writer~Writer#createUIElement} for UI element
instead.nt *nt * @protectednt * @param {String} name Node name.nt * @param
{Object|Iterable} [attrs] Collection of attributes.nt * @param
{module:engine/view/node~Node|Iterable.&lt;module:engine/view/node~Node&gt;}
[children]nt * List of nodes to be inserted into created element.nt
*/ntconstructor( name, attrs, children ) {nttsuper();nntt/**ntt * Name of
the element.ntt *ntt * @readonlyntt * @member {String}ntt */nttthis.name =
name;nntt/**ntt * Map of attributes, where attributes names are keys and
attributes values are values.ntt *ntt * @protectedntt * @member {Map}
#_attrsntt */nttthis._attrs = parseAttributes( attrs );nntt/**ntt * Array
of child nodes.ntt *ntt * @protectedntt * @member
{Array.&lt;module:engine/view/node~Node&gt;}ntt */nttthis._children =
[];nnttif ( children ) {ntttthis._insertChild( 0, children );ntt}nntt/**ntt
* Set of classes associated with element instance.ntt *ntt * @protectedntt
* @member {Set}ntt */nttthis._classes = new Set();nnttif ( this._attrs.has(
&#39;class&#39; ) ) {nttt// Remove class attribute and handle it by class
set.ntttconst classString = this._attrs.get( &#39;class&#39;
);ntttparseClasses( this._classes, classString );ntttthis._attrs.delete(
&#39;class&#39; );ntt}nntt/**ntt * Map of styles.ntt *ntt * @protectedntt *
@member {Set} module:engine/view/element~Element#_stylesntt
*/nttthis._styles = new Map();nnttif ( this._attrs.has( &#39;style&#39; ) )
{nttt// Remove style attribute and handle it by styles
map.ntttparseInlineStyles( this._styles, this._attrs.get( &#39;style&#39; )
);ntttthis._attrs.delete( &#39;style&#39; );ntt}nntt/**ntt * Map of custom
properties.ntt * Custom properties can be added to element instance, will
be cloned but not rendered into DOM.ntt *ntt * @protectedntt * @memeber
{Map}ntt */nttthis._customProperties = new Map();nt}nnt/**nt * Number of
element&#39;s children.nt *nt * @readonlynt * @type {Number}nt */ntget
childCount() {nttreturn this._children.length;nt}nnt/**nt * Is `true` if
there are no nodes inside this element, `false` otherwise.nt *nt *
@readonlynt * @type {Boolean}nt */ntget isEmpty() {nttreturn
this._children.length === 0;nt}nnt/**nt * Checks whether given view tree
object is of given type.nt *nt * Read more in {@link
module:engine/view/node~Node#is}.nt *nt * @param {String} typent * @param
{String} [name] Element name.nt * @returns {Boolean}nt */ntis( type, name =
null ) {nttif ( !name ) {ntttreturn type == &#39;element&#39; || type ==
this.name || super.is( type );ntt} else {ntttreturn type ==
&#39;element&#39; &amp;&amp; name == this.name;ntt}nt}nnt/**nt * Gets child
at the given index.nt *nt * @param {Number} index Index of child.nt *
@returns {module:engine/view/node~Node} Child node.nt */ntgetChild( index )
{nttreturn this._children[ index ];nt}nnt/**nt * Gets index of the given
child node. Returns `-1` if child node is not found.nt *nt * @param
{module:engine/view/node~Node} node Child node.nt * @returns {Number} Index
of the child node.nt */ntgetChildIndex( node ) {nttreturn
this._children.indexOf( node );nt}nnt/**nt * Gets child nodes iterator.nt
*nt * @returns {Iterable.&lt;module:engine/view/node~Node&gt;} Child nodes
iterator.nt */ntgetChildren() {nttreturn this._children[ Symbol.iterator
]();nt}nnt/**nt * Returns an iterator that contains the keys for
attributes. Order of inserting attributes is not preserved.nt *nt *
@returns {Iterable.&lt;String&gt;} Keys for attributes.nt */nt*
getAttributeKeys() {nttif ( this._classes.size &gt; 0 ) {ntttyield
&#39;class&#39;;ntt}nnttif ( this._styles.size &gt; 0 ) {ntttyield
&#39;style&#39;;ntt}nntt// This is not an optimal solution because of <a
href="https://github.com/ckeditor/ckeditor5-engine/issues/454.\n\t\t">github.com/ckeditor/ckeditor5-engine/issues/454.ntt</a>//
It can be simplified to `yield* this._attrs.keys();`.nttfor ( const key of
this._attrs.keys() ) {ntttyield key;ntt}nt}nnt/**nt * Returns iterator that
iterates over this element&#39;s attributes.nt *nt * Attributes are
returned as arrays containing two items. First one is attribute key and
second is attribute value.nt * This format is accepted by native `Map`
object and also can be passed in `Node` constructor.nt *nt * @returns
{Iterable.&lt;*&gt;}nt */nt* getAttributes() {nttyield*
this._attrs.entries();nnttif ( this._classes.size &gt; 0 ) {ntttyield [
&#39;class&#39;, this.getAttribute( &#39;class&#39; ) ];ntt}nnttif (
this._styles.size &gt; 0 ) {ntttyield [ &#39;style&#39;, this.getAttribute(
&#39;style&#39; ) ];ntt}nt}nnt/**nt * Gets attribute by key. If attribute
is not present - returns undefined.nt *nt * @param {String} key Attribute
key.nt * @returns {String|undefined} Attribute value.nt */ntgetAttribute(
key ) {nttif ( key == &#39;class&#39; ) {ntttif ( this._classes.size &gt; 0
) {nttttreturn [ …this._classes ].join( &#39; &#39; );nttt}nntttreturn
undefined;ntt}nnttif ( key == &#39;style&#39; ) {ntttif ( this._styles.size
&gt; 0 ) {nttttlet styleString = &#39;&#39;;nnttttfor ( const [ property,
value ] of this._styles ) {ntttttstyleString += `${ property }:${ value
};`;ntttt}nnttttreturn styleString;nttt}nntttreturn
undefined;ntt}nnttreturn this._attrs.get( key );nt}nnt/**nt * Returns a
boolean indicating whether an attribute with the specified key exists in
the element.nt *nt * @param {String} key Attribute key.nt * @returns
{Boolean} `true` if attribute with the specified key exists in the element,
false otherwise.nt */nthasAttribute( key ) {nttif ( key == &#39;class&#39;
) {ntttreturn this._classes.size &gt; 0;ntt}nnttif ( key == &#39;style&#39;
) {ntttreturn this._styles.size &gt; 0;ntt}nnttreturn this._attrs.has( key
);nt}nnt/**nt * Checks if this element is similar to other element.nt *
Both elements should have the same name and attributes to be considered as
similar. Two similar elementsnt * can contain different set of children
nodes.nt *nt * @param {module:engine/view/element~Element} otherElementnt *
@returns {Boolean}nt */ntisSimilar( otherElement ) {nttif ( !( otherElement
instanceof Element ) ) {ntttreturn false;ntt}nntt// If exactly the same
Element is provided - return true immediately.nttif ( this === otherElement
) {ntttreturn true;ntt}nntt// Check element name.nttif ( this.name !=
otherElement.name ) {ntttreturn false;ntt}nntt// Check number of
attributes, classes and styles.nttif ( this._attrs.size !==
otherElement._attrs.size || this._classes.size !==
otherElement._classes.size ||ntttthis._styles.size !==
otherElement._styles.size ) {ntttreturn false;ntt}nntt// Check if
attributes are the same.nttfor ( const [ key, value ] of this._attrs )
{ntttif ( !otherElement._attrs.has( key ) || otherElement._attrs.get( key )
!== value ) {nttttreturn false;nttt}ntt}nntt// Check if classes are the
same.nttfor ( const className of this._classes ) {ntttif (
!otherElement._classes.has( className ) ) {nttttreturn
false;nttt}ntt}nntt// Check if styles are the same.nttfor ( const [
property, value ] of this._styles ) {ntttif ( !otherElement._styles.has(
property ) || otherElement._styles.get( property ) !== value ) {nttttreturn
false;nttt}ntt}nnttreturn true;nt}nnt/**nt * Returns true if class is
present.nt * If more then one class is provided - returns true only when
all classes are present.nt *nt *ttelement.hasClass( &#39;foo&#39; ); //
Returns true if &#39;foo&#39; class is present.nt *ttelement.hasClass(
&#39;foo&#39;, &#39;bar&#39; ); // Returns true if &#39;foo&#39; and
&#39;bar&#39; classes are both present.nt *nt * @param {…String}
classNament */nthasClass( …className ) {nttfor ( const name of className )
{ntttif ( !this._classes.has( name ) ) {nttttreturn
false;nttt}ntt}nnttreturn true;nt}nnt/**nt * Returns iterator that contains
all class names.nt *nt * @returns {Iterable.&lt;String&gt;}nt
*/ntgetClassNames() {nttreturn this._classes.keys();nt}nnt/**nt * Returns
style value for given property.nt * Undefined is returned if style does not
exist.nt *nt * @param {String} propertynt * @returns {String|undefined}nt
*/ntgetStyle( property ) {nttreturn this._styles.get( property
);nt}nnt/**nt * Returns iterator that contains all style names.nt *nt *
@returns {Iterable.&lt;String&gt;}nt */ntgetStyleNames() {nttreturn
this._styles.keys();nt}nnt/**nt * Returns true if style keys are present.nt
* If more then one style property is provided - returns true only when all
properties are present.nt *nt *ttelement.hasStyle( &#39;color&#39; ); //
Returns true if &#39;border-top&#39; style is present.nt
*ttelement.hasStyle( &#39;color&#39;, &#39;border-top&#39; ); // Returns
true if &#39;color&#39; and &#39;border-top&#39; styles are both present.nt
*nt * @param {…String} propertynt */nthasStyle( …property ) {nttfor ( const
name of property ) {ntttif ( !this._styles.has( name ) ) {nttttreturn
false;nttt}ntt}nnttreturn true;nt}nnt/**nt * Returns ancestor element that
match specified pattern.nt * Provided patterns should be compatible with
{@link module:engine/view/matcher~Matcher Matcher} as it is used
internally.nt *nt * @see module:engine/view/matcher~Matchernt * @param
{Object|String|RegExp|Function} patterns Patterns used to match correct
ancestor.nt * See {@link module:engine/view/matcher~Matcher}.nt * @returns
{module:engine/view/element~Element|null} Found element or `null` if no
matching ancestor was found.nt */ntfindAncestor( …patterns ) {nttconst
matcher = new Matcher( …patterns );nttlet parent = this.parent;nnttwhile (
parent ) {ntttif ( matcher.match( parent ) ) {nttttreturn
parent;nttt}nntttparent = parent.parent;ntt}nnttreturn null;nt}nnt/**nt *
Returns the custom property value for the given key.nt *nt * @param
{String|Symbol} keynt * @returns {*}nt */ntgetCustomProperty( key )
{nttreturn this._customProperties.get( key );nt}nnt/**nt * Returns an
iterator which iterates over this element&#39;s custom properties.nt *
Iterator provides `[ key, value ]` pairs for each stored property.nt *nt *
@returns {Iterable.&lt;*&gt;}nt */nt* getCustomProperties() {nttyield*
this._customProperties.entries();nt}nnt/**nt * Returns identity string
based on element&#39;s name, styles, classes and other attributes.nt * Two
elements that {@link isSimilar are similar} will have same identity
string.nt * It has the following format:nt *nt *tt&#39;name
class=&quot;class1,class2&quot;
style=&quot;style1:value1;style2:value2&quot; attr1=&quot;val1&quot;
attr2=&quot;val2&quot;&#39;n t *nt * For example:nt *nt *ttconst element =
writer.createContainerElement( &#39;foo&#39;, {nt *tttbanana:
&#39;10&#39;,nt *tttapple: &#39;20&#39;,nt *tttstyle: &#39;color: red;
border-color: white;&#39;,nt *tttclass: &#39;baz&#39;nt *tt} );nt *nt *tt//
returns &#39;foo class=&quot;baz&quot;
style=&quot;border-color:white;color:red&quot; apple=&quot;20&quot;
banana=&quot;10&quot;&#39;nt *ttelement.getIdentity();nt *nt * NOTE:
Classes, styles and other attributes are sorted alphabetically.nt *nt *
@returns {String}nt */ntgetIdentity() {nttconst classes = Array.from(
this._classes ).sort().join( &#39;,&#39; );nttconst styles = Array.from(
this._styles ).map( i =&gt; `${ i[ 0 ] }:${ i[ 1 ] }` ).sort().join(
&#39;;&#39; );nttconst attributes = Array.from( this._attrs ).map( i =&gt;
`${ i[ 0 ] }=&quot;${ i[ 1 ] }&quot;` ).sort().join( &#39; &#39;
);nnttreturn this.name +nttt( classes == &#39;&#39; ? &#39;&#39; : `
class=&quot;${ classes }&quot;` ) +nttt( styles == &#39;&#39; ? &#39;&#39;
: ` style=&quot;${ styles }&quot;` ) +nttt( attributes == &#39;&#39; ?
&#39;&#39; : ` ${ attributes }` );nt}nnt/**nt * Clones provided element.nt
*nt * @protectednt * @param {Boolean} [deep=false] If set to `true` clones
element and all its children recursively. When set to `false`,nt * element
will be cloned without any children.nt * @returns
{module:engine/view/element~Element} Clone of this element.nt */nt_clone(
deep = false ) {nttconst childrenClone = [];nnttif ( deep ) {ntttfor (
const child of this.getChildren() ) {nttttchildrenClone.push( child._clone(
deep ) );nttt}ntt}nntt// ContainerElement and AttributeElement should be
also cloned properly.nttconst cloned = new this.constructor( this.name,
this._attrs, childrenClone );nntt// Classes and styles are cloned
separately - this solution is faster than adding them back to attributes
andntt// parse once again in constructor.nttcloned._classes = new Set(
this._classes );nttcloned._styles = new Map( this._styles );nntt// Clone
custom properties.nttcloned._customProperties = new Map(
this._customProperties );nntt// Clone filler offset method.ntt// We
can&#39;t define this method in a prototype because it&#39;s behavior
whichntt// is changed by e.g. toWidget() function from ckeditor5-widget.
Perhaps this should be one of custom props.nttcloned.getFillerOffset =
this.getFillerOffset;nnttreturn cloned;nt}nnt/**nt * {@link
module:engine/view/element~Element#_insertChild Insert} a child node or a
list of child nodes at the end of this nodent * and sets the parent of
these nodes to this element.nt *nt * @see
module:engine/view/writer~Writer#insertnt * @protectednt * @param
{module:engine/view/item~Item|Iterable.&lt;module:engine/view/item~Item&gt;}
items Items to be inserted.nt * @fires
module:engine/view/node~Node#changent * @returns {Number} Number of
appended nodes.nt */nt_appendChild( items ) {nttreturn this._insertChild(
this.childCount, items );nt}nnt/**nt * Inserts a child node or a list of
child nodes on the given index and sets the parent of these nodes tont *
this element.nt *nt * @see module:engine/view/writer~Writer#insertnt *
@protectednt * @param {Number} index Position where nodes should be
inserted.nt * @param
{module:engine/view/item~Item|Iterable.&lt;module:engine/view/item~Item&gt;}
items Items to be inserted.nt * @fires
module:engine/view/node~Node#changent * @returns {Number} Number of
inserted nodes.nt */nt_insertChild( index, items ) {nttthis._fireChange(
&#39;children&#39;, this );nttlet count = 0;nnttconst nodes = normalize(
items );nnttfor ( const node of nodes ) {nttt// If node that is being added
to this element is already inside another element, first remove it from the
old parent.ntttif ( node.parent !== null )
{nttttnode._remove();nttt}nntttnode.parent =
this;nntttthis._children.splice( index, 0, node
);ntttindex++;ntttcount++;ntt}nnttreturn count;nt}nnt/**nt * Removes number
of child nodes starting at the given index and set the parent of these
nodes to `null`.nt *nt * @see module:engine/view/writer~Writer#removent *
@param {Number} index Number of the first node to remove.nt * @param
{Number} [howMany=1] Number of nodes to remove.nt * @fires
module:engine/view/node~Node#changent * @returns
{Array.&lt;module:engine/view/node~Node&gt;} The array of removed nodes.nt
*/nt_removeChildren( index, howMany = 1 ) {nttthis._fireChange(
&#39;children&#39;, this );nnttfor ( let i = index; i &lt; index + howMany;
i++ ) {ntttthis._children[ i ].parent = null;ntt}nnttreturn
this._children.splice( index, howMany );nt}nnt/**nt * Adds or overwrite
attribute with a specified key and value.nt *nt * @see
module:engine/view/writer~Writer#setAttributent * @protectednt * @param
{String} key Attribute key.nt * @param {String} value Attribute value.nt *
@fires module:engine/view/node~Node#changent */nt_setAttribute( key, value
) {nttvalue = String( value );nnttthis._fireChange( &#39;attributes&#39;,
this );nnttif ( key == &#39;class&#39; ) {ntttparseClasses( this._classes,
value );ntt} else if ( key == &#39;style&#39; ) {ntttparseInlineStyles(
this._styles, value );ntt} else {ntttthis._attrs.set( key, value
);ntt}nt}nnt/**nt * Removes attribute from the element.nt *nt * @see
module:engine/view/writer~Writer#removeAttributent * @protectednt * @param
{String} key Attribute key.nt * @returns {Boolean} Returns true if an
attribute existed and has been removed.nt * @fires
module:engine/view/node~Node#changent */nt_removeAttribute( key )
{nttthis._fireChange( &#39;attributes&#39;, this );nntt// Remove class
attribute.nttif ( key == &#39;class&#39; ) {ntttif ( this._classes.size
&gt; 0 ) {nttttthis._classes.clear();nnttttreturn true;nttt}nntttreturn
false;ntt}nntt// Remove style attribute.nttif ( key == &#39;style&#39; )
{ntttif ( this._styles.size &gt; 0 )
{nttttthis._styles.clear();nnttttreturn true;nttt}nntttreturn
false;ntt}nntt// Remove other attributes.nttreturn this._attrs.delete( key
);nt}nnt/**nt * Adds specified class.nt *nt *ttelement._addClass(
&#39;foo&#39; ); // Adds &#39;foo&#39; class.nt *ttelement._addClass( [
&#39;foo&#39;, &#39;bar&#39; ] ); // Adds &#39;foo&#39; and &#39;bar&#39;
classes.nt *nt * @see module:engine/view/writer~Writer#addClassnt *
@protectednt * @param {Array.&lt;String&gt;|String} classNament * @fires
module:engine/view/node~Node#changent */nt_addClass( className )
{nttthis._fireChange( &#39;attributes&#39;, this );nnttclassName =
Array.isArray( className ) ? className : [ className
];nttclassName.forEach( name =&gt; this._classes.add( name ) );nt}nnt/**nt
* Removes specified class.nt *nt *ttelement._removeClass( &#39;foo&#39; ); 
// Removes &#39;foo&#39; class.nt *ttelement._removeClass( [ &#39;foo&#39;,
&#39;bar&#39; ] ); // Removes both &#39;foo&#39; and &#39;bar&#39;
classes.nt *nt * @see module:engine/view/writer~Writer#removeClassnt *
@param {Array.&lt;String&gt;|String} classNament * @fires
module:engine/view/node~Node#changent */nt_removeClass( className )
{nttthis._fireChange( &#39;attributes&#39;, this );nnttclassName =
Array.isArray( className ) ? className : [ className
];nttclassName.forEach( name =&gt; this._classes.delete( name )
);nt}nnt/**nt * Adds style to the element.nt *nt *ttelement._setStyle(
&#39;color&#39;, &#39;red&#39; );nt *ttelement._setStyle( {nt *tttcolor:
&#39;red&#39;,nt *tttposition: &#39;fixed&#39;nt *tt} );nt *nt * @see
module:engine/view/writer~Writer#setStylent * @protectednt * @param
{String|Object} property Property name or object with key - value pairs.nt
* @param {String} [value] Value to set. This parameter is ignored if object
is provided as the first parameter.nt * @fires
module:engine/view/node~Node#changent */nt_setStyle( property, value )
{nttthis._fireChange( &#39;attributes&#39;, this );nnttif ( isPlainObject(
property ) ) {ntttconst keys = Object.keys( property );nntttfor ( const key
of keys ) {nttttthis._styles.set( key, property[ key ] );nttt}ntt} else
{ntttthis._styles.set( property, value );ntt}nt}nnt/**nt * Removes
specified style.nt *nt *ttelement._removeStyle( &#39;color&#39; );  //
Removes &#39;color&#39; style.nt *ttelement._removeStyle( [
&#39;color&#39;, &#39;border-top&#39; ] ); // Removes both &#39;color&#39;
and &#39;border-top&#39; styles.nt *nt * @see
module:engine/view/writer~Writer#removeStylent * @protectednt * @param
{Array.&lt;String&gt;|String} propertynt * @fires
module:engine/view/node~Node#changent */nt_removeStyle( property )
{nttthis._fireChange( &#39;attributes&#39;, this );nnttproperty =
Array.isArray( property ) ? property : [ property ];nttproperty.forEach(
name =&gt; this._styles.delete( name ) );nt}nnt/**nt * Sets a custom
property. Unlike attributes, custom properties are not rendered to the
DOM,nt * so they can be used to add special data to elements.nt *nt * @see
module:engine/view/writer~Writer#setCustomPropertynt * @protectednt *
@param {String|Symbol} keynt * @param {*} valuent */nt_setCustomProperty(
key, value ) {nttthis._customProperties.set( key, value );nt}nnt/**nt *
Removes the custom property stored under the given key.nt *nt * @see
module:engine/view/writer~Writer#removeCustomPropertynt * @protectednt *
@param {String|Symbol} keynt * @returns {Boolean} Returns true if property
was removed.nt */nt_removeCustomProperty( key ) {nttreturn
this._customProperties.delete( key );nt}nnt/**nt * Returns block {@link
module:engine/view/filler filler} offset or `null` if block filler is not
needed.nt *nt * @abstractnt * @method
module:engine/view/element~Element#getFillerOffsetnt */n}nn// Parses
attributes provided to the element constructor before they are applied to
an element. If attributes are passedn// as an object (instead of `Map`),
the object is transformed to the map. Attributes with `null` value are
removed.n// Attributes with non-`String` value are converted to
`String`.n//n// @param {Object|Map} attrs Attributes to parse.n// @returns
{Map} Parsed attributes.nfunction parseAttributes( attrs ) {ntif (
isPlainObject( attrs ) ) {nttattrs = objectToMap( attrs );nt} else
{nttattrs = new Map( attrs );nt}nntfor ( const [ key, value ] of attrs )
{nttif ( value === null ) {ntttattrs.delete( key );ntt} else if ( typeof
value != &#39;string&#39; ) {ntttattrs.set( key, String( value )
);ntt}nt}nntreturn attrs;n}nn// Parses inline styles and puts property -
value pairs into styles map.n// Styles map is cleared before
insertion.n//n// @param {Map.&lt;String, String&gt;} stylesMap Map to
insert parsed properties and values.n// @param {String} stylesString Styles
to parse.nfunction parseInlineStyles( stylesMap, stylesString ) {nt//
`null` if no quote was found in input string or last found quote was a
closing quote. See below.ntlet quoteType = null;ntlet propertyNameStart =
0;ntlet propertyValueStart = 0;ntlet propertyName =
null;nntstylesMap.clear();nnt// Do not set anything if input string is
empty.ntif ( stylesString === &#39;&#39; ) {nttreturn;nt}nnt// Fix inline
styles that do not end with `;` so they are compatible with algorithm
below.ntif ( stylesString.charAt( stylesString.length - 1 ) != &#39;;&#39;
) {nttstylesString = stylesString + &#39;;&#39;;nt}nnt// Seek the whole
string for "special characters&quot;.ntfor ( let i = 0; i &lt;
stylesString.length; i++ ) {nttconst char = stylesString.charAt( i );nnttif
( quoteType === null ) {nttt// No quote found yet or last found quote was a
closing quote.ntttswitch ( char ) {nttttcase &#39;:&#39;:nttttt// Most of
time colon means that property name just ended.nttttt// Sometimes however
`:` is found inside property value (for example in background image
url).ntttttif ( !propertyName ) {ntttttt// Treat this as end of property
only if property name is not already saved.ntttttt// Save property
name.nttttttpropertyName = stylesString.substr( propertyNameStart, i -
propertyNameStart );ntttttt// Save this point as the start of property
value.nttttttpropertyValueStart = i + 1;nttttt}nntttttbreak;nnttttcase
&#39;&quot;&#39;:nttttcase &#39;\&#39;&#39;:nttttt// Opening quote found
(this is an opening quote, because `quoteType` is `null`).ntttttquoteType =
char;nntttttbreak;nntttt// eslint-disable-next-line
no-case-declarationsnttttcase &#39;;&#39;:nttttt// Property value just
ended.nttttt// Use previously stored property value start to obtain
property value.ntttttconst propertyValue = stylesString.substr(
propertyValueStart, i - propertyValueStart );nntttttif ( propertyName )
{ntttttt// Save parsed part.nttttttstylesMap.set( propertyName.trim(),
propertyValue.trim() );nttttt}nntttttpropertyName = null;nnttttt// Save
this point as property name start. Property name starts immediately after
previous property value ends.ntttttpropertyNameStart = i +
1;nntttttbreak;nttt}ntt} else if ( char === quoteType ) {nttt// If a quote
char is found and it is a closing quote, mark this fact by `null`-ing
`quoteType`.ntttquoteType = null;ntt}nt}n}nn// Parses class attribute and
puts all classes into classes set.n// Classes set s cleared before
insertion.n//n// @param {Set.&lt;String&gt;} classesSet Set to insert
parsed classes.n// @param {String} classesString String with classes to
parse.nfunction parseClasses( classesSet, classesString ) {ntconst
classArray = classesString.split( /\s+/
);ntclassesSet.clear();ntclassArray.forEach( name =&gt; classesSet.add(
name ) );n}nn// Converts strings to Text and non-iterables to arrays.n//n//
@param
{String|module:engine/view/item~Item|Iterable.&lt;String|module:engine/view/item~Item&gt;}n//
@return {Iterable.&lt;module:engine/view/node~Node&gt;}nfunction normalize(
nodes ) {nt// Separate condition because string is iterable.ntif ( typeof
nodes == &#39;string&#39; ) {nttreturn [ new Text( nodes ) ];nt}nntif (
!isIterable( nodes ) ) {nttnodes = [ nodes ];nt}nnt// Array.from to enable
.map() on non-arrays.ntreturn Array.from( nodes )ntt.map( node =&gt;
{ntttif ( typeof node == &#39;string&#39; ) {nttttreturn new Text( node
);nttt}nntttif ( node instanceof TextProxy ) {nttttreturn new Text(
node.data );nttt}nntttreturn node;ntt} );n}nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-engine/src/view/element.jsn// module id =
nulln// module chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module engine/view/containerelementn */nnimport
Element from &#39;./element&#39;;nn/**n * Containers are elements which
define document structure. They define boundaries forn * {@link
module:engine/view/attributeelement~AttributeElement attributes}. They are
mostly use for block elements like `&lt;p&gt;` or `&lt;div&gt;`.n *n *
Editing engine does not define fixed HTML DTD. This is why the type of the
{@link module:engine/view/element~Element} need ton * be defined by the
feature developer.n *n * Creating an element you should use
`ContainerElement` class or {@link
module:engine/view/attributeelement~AttributeElement}. This isn * important
to define the type of the element because of two reasons:n *n * Firstly,
{@link module:engine/view/domconverter~DomConverter} needs the information
what is an editable block to convert elements ton * DOM properly. {@link
module:engine/view/domconverter~DomConverter} will ensure that
`ContainerElement` is editable and it is possiblen * to put caret inside
it, even if the container is empty.n *n * Secondly, {@link
module:engine/view/writer~Writer view writer} uses this information.n *
Nodes {@link module:engine/view/writer~Writer#breakAttributes breaking} and
{@link module:engine/view/writer~Writer#mergeAttributesn * merging}n * is
performed only in a bounds of a container nodes.n *n * For instance if
`&lt;p&gt;` is an container and `<strong>` is attribute:n *n
*tt&lt;p&gt;fo^o&lt;/p&gt;n *n * {@link
module:engine/view/writer~Writer#breakAttributes breakAttributes} will
create:n *n *tt&lt;p&gt;foo&lt;/p&gt;n *n * There might be a need to mark
`&lt;span&gt;` element as a container node, for example in situation when
it will be an * container of an inline widget:n *n *tt&lt;span
color=&quot;red&quot;&gt;foobar&lt;/span&gt;tt// attributen *tt&lt;span
data-widget&gt;foobar&lt;/span&gt;tt// containern *n * @extends
module:engine/view/element~Elementn */nexport default class
ContainerElement extends Element {nt/**nt * Creates a container element.nt
*nt * @see module:engine/view/element~Elementnt * @see
module:engine/view/writer~Writer#createContainerElementnt * @protectednt
*/ntconstructor( name, attrs, children ) {nttsuper( name, attrs, children
);nntt/**ntt * Returns block {@link module:engine/view/filler filler}
offset or `null` if block filler is not needed.ntt *ntt * @method
getFillerOffsetntt * @returns {Number|null} Block filler offset or `null`
if block filler is not needed.ntt */nttthis.getFillerOffset =
getFillerOffset;nt}nnt/**nt * @inheritDocnt */ntis( type, name = null )
{nttif ( !name ) {ntttreturn type == &#39;containerElement&#39; ||
super.is( type );ntt} else {ntttreturn ( type == &#39;containerElement&#39;
&amp;&amp; name == this.name ) || super.is( type, name );ntt}nt}n}nn//
Returns block {@link module:engine/view/filler filler} offset or `null` if
block filler is not needed.n//n// @returns {Number|null} Block filler
offset or `null` if block filler is not needed.nfunction getFillerOffset()
{ntfor ( const child of this.getChildren() ) {ntt// If there&#39;s any
non-UI element – don&#39;t render the bogus.nttif ( !child.is(
&#39;uiElement&#39; ) ) {ntttreturn null;ntt}nt}nnt// If there are only UI
elements – render the bogus at the end of the element.ntreturn
this.childCount;n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/view/containerelement.jsn// module id = nulln//
module chunks = ”,“import eq from &#39;./eq&#39;;nimport isArrayLike from
&#39;./isArrayLike&#39;;nimport isIndex from &#39;./_isIndex&#39;;nimport
isObject from &#39;./isObject&#39;;nn/**n * Checks if the given arguments
are from an iteratee call.n *n * @privaten * @param {*} value The potential
iteratee value argument.n * @param {*} index The potential iteratee index
or key argument.n * @param {*} object The potential iteratee object
argument.n * @returns {boolean} Returns `true` if the arguments are from an
iteratee call,n *  else `false`.n */nfunction isIterateeCall(value, index,
object) {n  if (!isObject(object)) {n    return false;n  }n  var type =
typeof index;n  if (type == &#39;number&#39;n        ? (isArrayLike(object)
&amp;&amp; isIndex(index, object.length))n        : (type ==
&#39;string&#39; &amp;&amp; index in object)n      ) {n    return <a
href="index">eq(object</a>, value);n  }n  return false;n}nnexport default
isIterateeCall;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_isIterateeCall.jsn// module id = nulln//
module chunks = ”,“import Reflect from &#39;./_Reflect&#39;;nimport
iteratorToArray from &#39;./_iteratorToArray&#39;;nn/** Used for built-in
method references. */nvar objectProto = Object.prototype;nn/** Built-in
value references. */nvar enumerate = Reflect ? Reflect.enumerate :
undefined,n    propertyIsEnumerable =
objectProto.propertyIsEnumerable;nn/**n * The base implementation of
`_.keysIn` which doesn&#39;t skip the constructorn * property of prototypes
or treat sparse arrays as dense.n *n * @privaten * @param {Object} object
The object to query.n * @returns {Array} Returns the array of property
names.n */nfunction baseKeysIn(object) {n  object = object == null ? object
: Object(object);nn  var result = [];n  for (var key in object) {n   
result.push(key);n  }n  return result;n}nn// Fallback for IE &lt; 9 with
es6-shim.nif (enumerate &amp;&amp; !propertyIsEnumerable.call({
&#39;valueOf&#39;: 1 }, &#39;valueOf&#39;)) {n  baseKeysIn =
function(object) {n    return iteratorToArray(enumerate(object));n 
};n}nnexport default baseKeysIn;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_baseKeysIn.jsn// module id = nulln//
module chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module utils/observablemixinn */nnimport EmitterMixin from
&#39;./emittermixin&#39;;nimport CKEditorError from
&#39;./ckeditorerror&#39;;nimport extend from
&#39;./lib/lodash/extend&#39;;nimport isObject from
&#39;./lib/lodash/isObject&#39;;nnconst observablePropertiesSymbol =
Symbol( &#39;observableProperties&#39; );nconst boundObservablesSymbol =
Symbol( &#39;boundObservables&#39; );nconst boundPropertiesSymbol = Symbol(
&#39;boundProperties&#39; );nn/**n * Mixin that injects the "observable
properties&quot; and data binding functionality described in then * {@link
~Observable} interface.n *n * @mixin ObservableMixinn * @mixes
module:utils/emittermixin~EmitterMixinn * @implements
module:utils/observablemixin~Observablen */nconst ObservableMixin =
{nt/**nt * @inheritDocnt */ntset( name, value ) {ntt// If the first
parameter is an <a href="../../../../Object.html">Object</a>, iterate over
its properties.nttif ( isObject( name ) ) {ntttObject.keys( name ).forEach(
property =&gt; {nttttthis.set( property, name[ property ] );nttt}, this
);nntttreturn;ntt}nnttinitObservable( this );nnttconst properties = this[
observablePropertiesSymbol ];nnttif ( ( name in this ) &amp;&amp;
!properties.has( name ) ) {nttt/**nttt * Cannot override an existing
property.nttt *nttt * This error is thrown when trying to {@link
~Observable#set set} an property withnttt * a name of an already existing
property. For example:nttt *nttt *ttlet observable = new Model();nttt
*ttobservable.property = 1;nttt *ttobservable.set( &#39;property&#39;, 2
);ttt// throwsnttt *nttt *ttobservable.set( &#39;property&#39;, 1 );nttt
*ttobservable.set( &#39;property&#39;, 2 );ttt// ok, because this is an
existing property.nttt *nttt * @error observable-set-cannot-overridenttt
*/ntttthrow new CKEditorError( &#39;observable-set-cannot-override: Cannot
override an existing property.&#39; );ntt}nnttObject.defineProperty( this,
name, {ntttenumerable: true,ntttconfigurable: true,nntttget() {nttttreturn
properties.get( name );nttt},nntttset( value ) {nttttconst oldValue =
properties.get( name );nntttt// Allow undefined as an initial value like
A.define( &#39;x&#39;, undefined ) (#132).ntttt// Note: When properties map
has no such own property, then its value is undefined.nttttif ( oldValue
!== value || !properties.has( name ) ) {ntttttproperties.set( name, value
);ntttttthis.fire( &#39;change:&#39; + name, name, value, oldValue
);ntttt}nttt}ntt} );nnttthis[ name ] = value;nt},nnt/**nt * @inheritDocnt
*/ntbind( …bindProperties ) {nttif ( !bindProperties.length ||
!isStringArray( bindProperties ) ) {nttt/**nttt * All properties must be
strings.nttt *nttt * @error observable-bind-wrong-propertiesnttt
*/ntttthrow new CKEditorError( &#39;observable-bind-wrong-properties: All
properties must be strings.&#39; );ntt}nnttif ( ( new Set( bindProperties )
).size !== bindProperties.length ) {nttt/**nttt * Properties must be
unique.nttt *nttt * @error observable-bind-duplicate-propertiesnttt
*/ntttthrow new CKEditorError( &#39;observable-bind-duplicate-properties:
Properties must be unique.&#39; );ntt}nnttinitObservable( this );nnttconst
boundProperties = this[ boundPropertiesSymbol ];nnttbindProperties.forEach(
propertyName =&gt; {ntttif ( boundProperties.has( propertyName ) )
{ntttt/**ntttt * Cannot bind the same property more that once.ntttt *ntttt
* @error observable-bind-rebindntttt */nttttthrow new CKEditorError(
&#39;observable-bind-rebind: Cannot bind the same property more that
once.&#39; );nttt}ntt} );nnttconst bindings = new Map();nntt// @typedef
{Object} Bindingntt// @property {Array} property Property which is
bound.ntt// @property {Array} to Array of observable–property components of
the binding (`{ observable: …, property: .. }`).ntt// @property {Array}
callback A function which processes `to`
components.nttbindProperties.forEach( a =&gt; {ntttconst binding = {
property: a, to: [] };nntttboundProperties.set( a, binding
);ntttbindings.set( a, binding );ntt} );nntt// @typedef {Object}
BindChainntt// @property {Function} to See {@link
~ObservableMixin#_bindTo}.ntt// @property {Function} toMany See {@link
~ObservableMixin#_bindToMany}.ntt// @property
{module:utils/observablemixin~Observable} _observable The observable which
initializes the binding.ntt// @property {Array} _bindProperties Array of
`_observable` properties to be bound.ntt// @property {Array} _to Array of
`to()` observable–properties (`{ observable: toObservable, properties:
…toProperties }`).ntt// @property {Map} _bindings Stores bindings to be
kept inntt// {@link ~ObservableMixin#_boundProperties}/{@link
~ObservableMixin#_boundObservables}ntt// initiated in this binding
chain.nttreturn {ntttto: bindTo,nttttoMany: bindToMany,nnttt_observable:
this,nttt_bindProperties: bindProperties,nttt_to: [],nttt_bindings:
bindingsntt};nt},nnt/**nt * @inheritDocnt */ntunbind( …unbindProperties )
{ntt// Nothing to do here if not inited yet.nttif ( !(
observablePropertiesSymbol in this ) ) {ntttreturn;ntt}nnttconst
boundProperties = this[ boundPropertiesSymbol ];nttconst boundObservables =
this[ boundObservablesSymbol ];nnttif ( unbindProperties.length ) {ntttif (
!isStringArray( unbindProperties ) ) {ntttt/**ntttt * Properties must be
strings.ntttt *ntttt * @error observable-unbind-wrong-propertiesntttt
*/nttttthrow new CKEditorError( &#39;observable-unbind-wrong-properties:
Properties must be strings.&#39; );nttt}nntttunbindProperties.forEach(
propertyName =&gt; {nttttconst binding = boundProperties.get( propertyName
);nntttt// Nothing to do if the binding is not definednttttif ( !binding )
{ntttttreturn;ntttt}nnttttlet toObservable, toProperty, toProperties,
toPropertyBindings;nnttttbinding.to.forEach( to =&gt; {nttttt// TODO: ES6
destructuring.nttttttoObservable = to[ 0 ];nttttttoProperty = to[ 1
];nttttttoProperties = boundObservables.get( toObservable
);nttttttoPropertyBindings = toProperties[ toProperty
];nnttttttoPropertyBindings.delete( binding );nntttttif (
!toPropertyBindings.size ) {nttttttdelete toProperties[ toProperty
];nttttt}nntttttif ( !Object.keys( toProperties ).length )
{nttttttboundObservables.delete( toObservable );nttttttthis.stopListening(
toObservable, &#39;change&#39; );nttttt}ntttt}
);nnttttboundProperties.delete( propertyName );nttt} );ntt} else
{ntttboundObservables.forEach( ( bindings, boundObservable ) =&gt;
{nttttthis.stopListening( boundObservable, &#39;change&#39; );nttt}
);nntttboundObservables.clear();ntttboundProperties.clear();ntt}nt},nnt/**nt
* @inheritDocnt */ntdecorate( methodName ) {nttconst originalMethod = this[
methodName ];nnttif ( !originalMethod ) {nttt/**nttt * Cannot decorate an
undefined method.nttt *nttt * @error
observablemixin-cannot-decorate-undefinednttt * @param {Object} object The
object which method should be decorated.nttt * @param {String} methodName
Name of the method which does not exist.nttt */ntttthrow new
CKEditorError(ntttt&#39;observablemixin-cannot-decorate-undefined: Cannot
decorate an undefined method.&#39;,ntttt{ object: this, methodName
}nttt);ntt}nnttthis.on( methodName, ( evt, args ) =&gt; {ntttevt.return =
originalMethod.apply( this, args );ntt} );nnttthis[ methodName ] =
function( …args ) {ntttreturn this.fire( methodName, args
);ntt};nt}n};nnextend( ObservableMixin, EmitterMixin );nnexport default
ObservableMixin;nn// Init symbol properties needed to for the observable
mechanism to work.n//n// @privaten// @param
{module:utils/observablemixin~ObservableMixin} observablenfunction
initObservable( observable ) {nt// Do nothing if already inited.ntif (
observablePropertiesSymbol in observable ) {nttreturn;nt}nnt// The internal
hash containing the observable&#39;s state.nt//nt// @privatent// @type
{Map}ntObject.defineProperty( observable, observablePropertiesSymbol,
{nttvalue: new Map()nt} );nnt// Map containing bindings to external
observables. It shares the binding objectsnt// (`{ observable: A, property:
&#39;a&#39;, to: … }`) with {@link
module:utils/observablemixin~ObservableMixin#_boundProperties} andnt// it
is used to observe external observables to update own properties
accordingly.nt// See {@link
module:utils/observablemixin~ObservableMixin#bind}.nt//nt//ttA.bind(
&#39;a&#39;, &#39;b&#39;, &#39;c&#39; ).to( B, &#39;x&#39;, &#39;y&#39;,
&#39;x&#39; );nt//ttconsole.log( A._boundObservables );nt//nt//tttMap(
{nt//ttttB: {nt//tttttx: Set( [nt//tttttt{ observable: A, property:
&#39;a&#39;, to: [ [ B, &#39;x&#39; ] ] },nt//tttttt{ observable: A,
property: &#39;c&#39;, to: [ [ B, &#39;x&#39; ] ] }nt//ttttt] ),nt//ttttty:
Set( [nt//tttttt{ observable: A, property: &#39;b&#39;, to: [ [ B,
&#39;y&#39; ] ] },nt//ttttt] )nt//tttt}nt//ttt} )nt//nt//ttA.bind(
&#39;d&#39; ).to( B, &#39;z&#39; ).to( C, &#39;w&#39; ).as( callback
);nt//ttconsole.log( A._boundObservables );nt//nt//tttMap( {nt//ttttB:
{nt//tttttx: Set( [nt//tttttt{ observable: A, property: &#39;a&#39;, to: [
[ B, &#39;x&#39; ] ] },nt//tttttt{ observable: A, property: &#39;c&#39;,
to: [ [ B, &#39;x&#39; ] ] }nt//ttttt] ),nt//ttttty: Set( [nt//tttttt{
observable: A, property: &#39;b&#39;, to: [ [ B, &#39;y&#39; ] ]
},nt//ttttt] ),nt//tttttz: Set( [nt//tttttt{ observable: A, property:
&#39;d&#39;, to: [ [ B, &#39;z&#39; ], [ C, &#39;w&#39; ] ], callback:
callback }nt//ttttt] )nt//tttt},nt//ttttC: {nt//tttttw: Set( [nt//tttttt{
observable: A, property: &#39;d&#39;, to: [ [ B, &#39;z&#39; ], [ C,
&#39;w&#39; ] ], callback: callback }nt//ttttt] )nt//tttt}nt//ttt}
)nt//nt// @privatent// @type {Map}ntObject.defineProperty( observable,
boundObservablesSymbol, {nttvalue: new Map()nt} );nnt// <a
href="../../../../Object.html">Object</a> that stores which properties of
this observable are bound and how. It sharesnt// the binding objects (`{
observable: A, property: &#39;a&#39;, to: … }`) with {@link
utils.ObservableMixin#_boundObservables}.nt// This data structure is a
reverse of {@link utils.ObservableMixin#_boundObservables} and it is
helpful fornt// {@link utils.ObservableMixin#unbind}.nt//nt// See {@link
utils.ObservableMixin#bind}.nt//nt//ttA.bind( &#39;a&#39;, &#39;b&#39;,
&#39;c&#39; ).to( B, &#39;x&#39;, &#39;y&#39;, &#39;x&#39;
);nt//ttconsole.log( A._boundProperties );nt//nt//tttMap( {nt//tttta: {
observable: A, property: &#39;a&#39;, to: [ [ B, &#39;x&#39; ] ]
},nt//ttttb: { observable: A, property: &#39;b&#39;, to: [ [ B, &#39;y&#39;
] ] },nt//ttttc: { observable: A, property: &#39;c&#39;, to: [ [ B,
&#39;x&#39; ] ] }nt//ttt} )nt//nt//ttA.bind( &#39;d&#39; ).to( B,
&#39;z&#39; ).to( C, &#39;w&#39; ).as( callback );nt//ttconsole.log(
A._boundProperties );nt//nt//tttMap( {nt//tttta: { observable: A, property:
&#39;a&#39;, to: [ [ B, &#39;x&#39; ] ] },nt//ttttb: { observable: A,
property: &#39;b&#39;, to: [ [ B, &#39;y&#39; ] ] },nt//ttttc: {
observable: A, property: &#39;c&#39;, to: [ [ B, &#39;x&#39; ] ]
},nt//ttttd: { observable: A, property: &#39;d&#39;, to: [ [ B, &#39;z&#39;
], [ C, &#39;w&#39; ] ], callback: callback }nt//ttt} )nt//nt//
@privatent// @type {Map}ntObject.defineProperty( observable,
boundPropertiesSymbol, {nttvalue: new Map()nt} );n}nn// A chaining for
{@link module:utils/observablemixin~ObservableMixin#bind} providing `.to()`
interface.n//n// @privaten// @param {…[Observable|String|Function]} args
Arguments of the `.to( args )` binding.nfunction bindTo( …args ) {ntconst
parsedArgs = parseBindToArgs( …args );ntconst bindingsKeys = Array.from(
this._bindings.keys() );ntconst numberOfBindings =
bindingsKeys.length;nnt// Eliminate A.bind( &#39;x&#39; ).to( B, C )ntif (
!parsedArgs.callback &amp;&amp; parsedArgs.to.length &gt; 1 ) {ntt/**ntt *
Binding multiple observables only possible with callback.ntt *ntt * @error
observable-bind-no-callbackntt */nttthrow new CKEditorError(
&#39;observable-bind-to-no-callback: Binding multiple observables only
possible with callback.&#39; );nt}nnt// Eliminate A.bind( &#39;x&#39;,
&#39;y&#39; ).to( B, callback )ntif ( numberOfBindings &gt; 1 &amp;&amp;
parsedArgs.callback ) {ntt/**ntt * Cannot bind multiple properties and use
a callback in one binding.ntt *ntt * @error
observable-bind-to-extra-callbackntt */nttthrow new CKEditorError(
&#39;observable-bind-to-extra-callback: Cannot bind multiple properties and
use a callback in one binding.&#39; );nt}nntparsedArgs.to.forEach( to =&gt;
{ntt// Eliminate A.bind( &#39;x&#39;, &#39;y&#39; ).to( B, &#39;a&#39;
)nttif ( to.properties.length &amp;&amp; to.properties.length !==
numberOfBindings ) {nttt/**nttt * The number of properties must match.nttt
*nttt * @error observable-bind-to-properties-lengthnttt */ntttthrow new
CKEditorError( &#39;observable-bind-to-properties-length: The number of
properties must match.&#39; );ntt}nntt// When no to.properties specified,
observing source properties instead i.e.ntt// A.bind( &#39;x&#39;,
&#39;y&#39; ).to( B ) -&gt; Observe B.x and B.ynttif (
!to.properties.length ) {ntttto.properties = this._bindProperties;ntt}nt}
);nntthis._to = parsedArgs.to;nnt// Fill {@link BindChain#_bindings} with
callback. When the callback is set there&#39;s only one binding.ntif (
parsedArgs.callback ) {nttthis._bindings.get( bindingsKeys[ 0 ] ).callback
= parsedArgs.callback;nt}nntattachBindToListeners( this._observable,
this._to );nnt// Update observable._boundProperties and
observable._boundObservables.ntupdateBindToBound( this );nnt// Set initial
values of bound properties.ntthis._bindProperties.forEach( propertyName
=&gt; {nttupdateBoundObservableProperty( this._observable, propertyName
);nt} );n}nn// Binds to an attribute in a set of iterable
observables.n//n// @privaten// @param {Array.&lt;Observable&gt;}
observablesn// @param {String} attributen// @param {Function}
callbacknfunction bindToMany( observables, attribute, callback ) {ntif (
this._bindings.size &gt; 1 ) {ntt/**ntt * Binding one attribute to many
observables only possible with one attribute.ntt *ntt * @error
observable-bind-to-many-not-one-bindingntt */nttthrow new CKEditorError(
&#39;observable-bind-to-many-not-one-binding: Cannot bind multiple
properties with toMany().&#39; );nt}nntthis.to(ntt// Bind to attribute of
each observable…ntt…getBindingTargets( observables, attribute ),ntt//
…using given callback to parse attribute values.nttcallbacknt);n}nn//
Returns an array of binding components forn// {@link Observable#bind} from
a set of iterable observables.n//n// @param {Array.&lt;Observable&gt;}
observablesn// @param {String} attributen// @returns
{Array.&lt;String|Observable&gt;}nfunction getBindingTargets( observables,
attribute ) {ntconst observableAndAttributePairs = observables.map(
observable =&gt; [ observable, attribute ] );nnt// Merge pairs to
one-dimension array of observables and attributes.ntreturn
Array.prototype.concat.apply( [], observableAndAttributePairs );n}nn//
Check if all entries of the array are of `String` type.n//n// @privaten//
@param {Array} arr An array to be checked.n// @returns {Boolean}nfunction
isStringArray( arr ) {ntreturn arr.every( a =&gt; typeof a ==
&#39;string&#39; );n}nn// Parses and validates {@link Observable#bind}`.to(
args )` arguments and returnsn// an object with a parsed structure. For
examplen//n//ttA.bind( &#39;x&#39; ).to( B, &#39;a&#39;, C, &#39;b&#39;,
call );n//n// becomesn//n//tt{n//tttto: [n//tttt{ observable: B,
properties: [ &#39;a&#39; ] },n//tttt{ observable: C, properties: [
&#39;b&#39; ] },n//ttt],n//tttcallback: calln// tt}n//n// @privaten//
@param {…*} args Arguments of {@link Observable#bind}`.to( args )`.n//
@returns {Object}nfunction parseBindToArgs( …args ) {nt// Eliminate A.bind(
&#39;x&#39; ).to()ntif ( !args.length ) {ntt/**ntt * Invalid argument
syntax in `to()`.ntt *ntt * @error observable-bind-to-parse-errorntt
*/nttthrow new CKEditorError( &#39;observable-bind-to-parse-error: Invalid
argument syntax in `to()`.&#39; );nt}nntconst parsed = { to: [] };ntlet
lastObservable;nntif ( typeof args[ args.length - 1 ] == &#39;function&#39;
) {nttparsed.callback = args.pop();nt}nntargs.forEach( a =&gt; {nttif (
typeof a == &#39;string&#39; ) {ntttlastObservable.properties.push( a
);ntt} else if ( typeof a == &#39;object&#39; ) {ntttlastObservable = {
observable: a, properties: [] };ntttparsed.to.push( lastObservable );ntt}
else {ntttthrow new CKEditorError( &#39;observable-bind-to-parse-error:
Invalid argument syntax in `to()`.&#39; );ntt}nt} );nntreturn parsed;n}nn//
Synchronizes {@link module:utils/observablemixin#_boundObservables} with
{@link Binding}.n//n// @privaten// @param {Binding} binding A binding to
store in {@link Observable#_boundObservables}.n// @param {Observable}
toObservable A observable, which is a new component of `binding`.n// @param
{String} toPropertyName A name of `toObservable`&#39;s property, a new
component of the `binding`.nfunction updateBoundObservables( observable,
binding, toObservable, toPropertyName ) {ntconst boundObservables =
observable[ boundObservablesSymbol ];ntconst bindingsToObservable =
boundObservables.get( toObservable );ntconst bindings =
bindingsToObservable || {};nntif ( !bindings[ toPropertyName ] )
{nttbindings[ toPropertyName ] = new Set();nt}nnt// Pass the binding to a
corresponding Set in `observable._boundObservables`.ntbindings[
toPropertyName ].add( binding );nntif ( !bindingsToObservable )
{nttboundObservables.set( toObservable, bindings );nt}n}nn// Synchronizes
{@link Observable#_boundProperties} and {@link
Observable#_boundObservables}n// with {@link BindChain}.n//n// Assuming the
following binding being createdn//n// ttA.bind( &#39;a&#39;, &#39;b&#39;
).to( B, &#39;x&#39;, &#39;y&#39; );n//n// the following bindings were
initialized by {@link Observable#bind} in {@link
BindChain#_bindings}:n//n// tt{n// ttta: { observable: A, property:
&#39;a&#39;, to: [] },n// tttb: { observable: A, property: &#39;b&#39;, to:
[] },n// tt}n//n// Iterate over all bindings in this chain and fill their
`to` properties withn// corresponding to( … ) arguments (components of the
binding), son//n// tt{n// ttta: { observable: A, property: &#39;a&#39;, to:
[ B, &#39;x&#39; ] },n// tttb: { observable: A, property: &#39;b&#39;, to:
[ B, &#39;y&#39; ] },n// tt}n//n// Then update the structure of {@link
Observable#_boundObservables} with updatedn// binding, so it becomes:n//n//
ttMap( {n// tttB: {n// ttttx: Set( [n// ttttt{ observable: A, property:
&#39;a&#39;, to: [ [ B, &#39;x&#39; ] ] }n// tttt] ),n// tttty: Set( [n//
ttttt{ observable: A, property: &#39;b&#39;, to: [ [ B, &#39;y&#39; ] ]
},n// tttt] )n//ttt}n// tt} )n//n// @privaten// @param {BindChain} chain
The binding initialized by {@link Observable#bind}.nfunction
updateBindToBound( chain ) {ntlet toProperty;nntchain._bindings.forEach( (
binding, propertyName ) =&gt; {ntt// Note: For a binding without a
callback, this will run only oncentt// like in A.bind( &#39;x&#39;,
&#39;y&#39; ).to( B, &#39;a&#39;, &#39;b&#39; )ntt// TODO: ES6
destructuring.nttchain._to.forEach( to =&gt; {nttttoProperty =
to.properties[ binding.callback ? 0 : chain._bindProperties.indexOf(
propertyName ) ];nntttbinding.to.push( [ to.observable, toProperty ]
);ntttupdateBoundObservables( chain._observable, binding, to.observable,
toProperty );ntt} );nt} );n}nn// Updates an property of a {@link
Observable} with a valuen// determined by an entry in {@link
Observable#_boundProperties}.n//n// @privaten// @param {Observable}
observable A observable which property is to be updated.n// @param {String}
propertyName An property to be updated.nfunction
updateBoundObservableProperty( observable, propertyName ) {ntconst
boundProperties = observable[ boundPropertiesSymbol ];ntconst binding =
boundProperties.get( propertyName );ntlet propertyValue;nnt// When a
binding with callback is created likent//nt// ttA.bind( &#39;a&#39; ).to(
B, &#39;b&#39;, C, &#39;c&#39;, callback );nt//nt// collect B.b and C.c,
then pass them to callback to set A.a.ntif ( binding.callback )
{nttpropertyValue = binding.callback.apply( observable, binding.to.map( to
=&gt; to[ 0 ][ to[ 1 ] ] ) );nt} else {nttpropertyValue = binding.to[ 0
];nttpropertyValue = propertyValue[ 0 ][ propertyValue[ 1 ] ];nt}nntif (
observable.hasOwnProperty( propertyName ) ) {nttobservable[ propertyName ]
= propertyValue;nt} else {nttobservable.set( propertyName, propertyValue
);nt}n}nn// Starts listening to changes in {@link BindChain._to}
observables to updaten// {@link BindChain._observable} {@link
BindChain._bindProperties}. Also sets then// initial state of {@link
BindChain._observable}.n//n// @privaten// @param {BindChain} chain The
chain initialized by {@link Observable#bind}.nfunction
attachBindToListeners( observable, toBindings ) {nttoBindings.forEach( to
=&gt; {nttconst boundObservables = observable[ boundObservablesSymbol
];nttlet bindings;nntt// If there&#39;s already a chain between the
observables (`observable` listens tontt// `to.observable`), there&#39;s no
need to create another `change` event listener.nttif (
!boundObservables.get( to.observable ) ) {ntttobservable.listenTo(
to.observable, &#39;change&#39;, ( evt, propertyName ) =&gt; {nttttbindings
= boundObservables.get( to.observable )[ propertyName ];nntttt// Note:
to.observable will fire for any property change, reactntttt// to changes of
properties which are bound only.nttttif ( bindings )
{ntttttbindings.forEach( binding =&gt;
{nttttttupdateBoundObservableProperty( observable, binding.property
);nttttt} );ntttt}nttt} );ntt}nt} );n}nn/**n * Interface which adds
"observable properties&quot; and data binding functionality.n *n * Can be
easily implemented by a class by mixing the {@link
module:utils/observablemixin~ObservableMixin} mixin.n *n * @interface
Observablen * @extends module:utils/emittermixin~Emittern */nn/**n * Fired
when a property changed value.n *n *ttobservable.set( &#39;prop&#39;, 1 );n
*n *ttobservable.on( &#39;change:prop&#39;, ( evt, propertyName, newValue,
oldValue ) =&gt; {n *tttconsole.log( `${ propertyName } has changed from ${
oldValue } to ${ newValue }` );n *tt} )n *n *ttobservable.prop = 2; //
-&gt; &#39;prop has changed from 1 to 2&#39;n *n * @event
change:{property}n * @param {String} name The property name.n * @param {*}
value The new property value.n * @param {*} oldValue The previous property
value.n */nn/**n * Creates and sets the value of an observable property of
this object. Such an property becomes a partn * of the state and is be
observable.n *n * It accepts also a single object literal containing
key/value pairs with properties to be set.n *n * This method throws the
`observable-set-cannot-override` error if the observable instance alreadyn
* have a property with the given property name. This prevents from
mistakenly overriding existingn * properties and methods, but means that
`foo.set( &#39;bar&#39;, 1 )` may be slightly slower than `foo.bar = 1`.n
*n * @method setn * @param {String|Object} name The property&#39;s name or
object with `name=&gt;value` pairs.n * @param {*} [value] The
property&#39;s value (if `name` was passed in the first parameter).n
*/nn/**n * Binds observable properties to another objects implementing
{@link module:utils/observablemixin~Observable}n * interface (like {@link
module:ui/model~Model}).n *n * Once bound, the observable will immediately
share the current state of propertiesn * of the observable it is bound to
and react to the changes to these propertiesn * in the future.n *n *
*Note*: To release the binding use {@link
module:utils/observablemixin~Observable#unbind}.n *n * Using `bind().to()`
chain:n *n *ttA.bind( &#39;a&#39; ).to( B );n *ttA.bind( &#39;a&#39; ).to(
B, &#39;b&#39; );n *ttA.bind( &#39;a&#39;, &#39;b&#39; ).to( B,
&#39;c&#39;, &#39;d&#39; );n *ttA.bind( &#39;a&#39; ).to( B, &#39;b&#39;,
C, &#39;d&#39;, ( b, d ) =&gt; b + d );n *n * It is also possible to bind
to the same property in a observables collection using `bind().toMany()`
chain:n *n *ttA.bind( &#39;a&#39; ).toMany( [ B, C, D ], &#39;x&#39;, ( a,
b, c ) =&gt; a + b + c );n *ttA.bind( &#39;a&#39; ).toMany( [ B, C, D ],
&#39;x&#39;, ( …x ) =&gt; x.every( x =&gt; x ) );n *n * @method bindn *
@param {…String} bindProperties Observable properties that will be bound to
another observable(s).n * @returns {Object} The bind chain with the `to()`
and `toMany()` methods.n */nn/**n * Removes the binding created with {@link
bind}.n *n *ttA.unbind( &#39;a&#39; );n *ttA.unbind();n *n * @method
unbindn * @param {…String} [unbindProperties] Observable properties to be
unbound. All the bindings willn * be released if no properties provided.n
*/nn/**n * Turns the given methods of this object into event-based ones.
This means that the new method will fire an eventn * (named after the
method) and the original action will be plugged as a listener to that
event.n *n * This is a very simplified method decoration. Itself it
doesn&#39;t change the behavior of a method (expect adding the event),n *
but it allows to modify it later on by listening to the method&#39;s
event.n *n * For example, in order to cancel the method execution one can
stop the event:n *n *ttclass Foo {n *tttconstructor() {n
*ttttthis.decorate( &#39;method&#39; );n *ttt}n *n *tttmethod() {n
*ttttconsole.log( &#39;called!&#39; );n *ttt}n *tt}n *n *ttconst foo = new
Foo();n *ttfoo.on( &#39;method&#39;, ( evt ) =&gt; {n *tttevt.stop();n
*tt}, { priority: &#39;high&#39; } );n *n *ttfoo.method(); // Nothing is
logged.n *n *n * Note: we used a high priority listener here to execute
this callback before the one whichn * calls the original method (which used
the default priority).n *n * It&#39;s also possible to change the return
value:n *n *ttfoo.on( &#39;method&#39;, ( evt ) =&gt; {n *tttevt.return =
&#39;Foo!&#39;;n *tt} );n *n *ttfoo.method(); // -&gt; &#39;Foo&#39;n *n *
Finally, it&#39;s possible to access and modify the parameters:n *n
*ttmethod( a, b ) {n *tttconsole.log( `${ a }, ${ b }`  );n *tt}n *n *tt//
…n *n *ttfoo.on( &#39;method&#39;, ( evt, args ) =&gt; {n *tttargs[ 0 ] =
3;n *n *tttconsole.log( args[ 1 ] ); // -&gt; 2n *tt}, { priority:
&#39;high&#39; } );n *n *ttfoo.method( 1, 2 ); // -&gt; &#39;3, 2&#39;n *n
* @method decoraten * @param {String} methodName Name of the method to
decorate.n */nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/observablemixin.jsn// module id = nulln// module
chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module engine/view/editableelementn */nnimport ContainerElement from
&#39;./containerelement&#39;;nimport CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nimport mix from
&#39;@ckeditor/ckeditor5-utils/src/mix&#39;;nimport ObservableMixin from
&#39;@ckeditor/ckeditor5-utils/src/observablemixin&#39;;nnconst
documentSymbol = Symbol( &#39;document&#39; );nn/**n * Editable element
which can be a {@link
module:engine/view/rooteditableelement~RootEditableElement root}n * or
nested editable area in the editor.n *n * Editable is automatically
read-only when its {module:engine/view/document~Document Document} is
read-only.n *n * @extends
module:engine/view/containerelement~ContainerElementn * @mixes
module:utils/observablemixin~ObservableMixinn */nexport default class
EditableElement extends ContainerElement {nt/**nt * Creates an editable
element.nt *nt * @see
module:engine/view/writer~Writer#createEditableElementnt * @protectednt
*/ntconstructor( name, attrs, children ) {nttsuper( name, attrs, children
);nntt/**ntt * Whether the editable is in read-write or read-only mode.ntt
*ntt * @observablentt * @member {Boolean}
module:engine/view/editableelement~EditableElement#isReadOnlyntt
*/nttthis.set( &#39;isReadOnly&#39;, false );nntt/**ntt * Whether the
editable is focused.ntt *ntt * This property updates when {@link
module:engine/view/document~Document#isFocused document.isFocused} or
viewntt * selection is changed.ntt *ntt * @readonlyntt * @observablentt *
@member {Boolean}
module:engine/view/editableelement~EditableElement#isFocusedntt
*/nttthis.set( &#39;isFocused&#39;, false );nntt/**ntt * The {@link
module:engine/view/document~Document} which is an owner of this root.ntt *
Can only by set once.ntt * Throws {@link
module:utils/ckeditorerror~CKEditorError CKEditorError}
`view-editableelement-document-already-set`ntt * when document is already
set.ntt *ntt * @member {module:engine/view/document~Document} documentntt
*/nt}nnt/**nt * Returns document associated with the editable.nt *nt *
@readonlynt * @return {module:engine/view/document~Document}nt */ntget
document() {nttreturn this.getCustomProperty( documentSymbol );nt}nnt/**nt
* Sets document of this editable element.nt *nt * @protectednt * @param
{module:engine/view/document~Document} documentnt */ntset _document(
document ) {nttif ( this.getCustomProperty( documentSymbol ) ) {nttt/**nttt
* View document is already set. It can only be set once.nttt *nttt * @error
view-editableelement-document-already-setnttt */ntttthrow new
CKEditorError( &#39;view-editableelement-document-already-set: View
document is already set.&#39; );ntt}nnttthis._setCustomProperty(
documentSymbol, document );nnttthis.bind( &#39;isReadOnly&#39; ).to(
document );nnttthis.bind( &#39;isFocused&#39;
).to(ntttdocument,nttt&#39;isFocused&#39;,ntttisFocused =&gt; isFocused
&amp;&amp; document.selection.editableElement == thisntt);nntt// Update
focus state based on selection changes.nttthis.listenTo(
document.selection, &#39;change&#39;, () =&gt; {ntttthis.isFocused =
document.isFocused &amp;&amp; document.selection.editableElement ==
this;ntt} );nt}n}nnmix( EditableElement, ObservableMixin
);nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/view/editableelement.jsn// module id = nulln//
module chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module engine/view/rangen */nnimport Position from
&#39;./position&#39;;nimport TreeWalker from &#39;./treewalker&#39;;nn/**n
* Tree view range.n */nexport default class Range {nt/**nt * Creates a
range spanning from `start` position to `end` position.nt *nt * *Note:*
Constructor creates it&#39;s own {@link
module:engine/view/position~Position} instances basing on passed values.nt
*nt * @param {module:engine/view/position~Position} start Start position.nt
* @param {module:engine/view/position~Position} [end] End position. If not
set, range will be collapsed at `start` position.nt */ntconstructor( start,
end = null ) {ntt/**ntt * Start position.ntt *ntt * @readonlyntt * @member
{module:engine/view/position~Position}ntt */nttthis.start =
Position.createFromPosition( start );nntt/**ntt * End position.ntt *ntt *
@readonlyntt * @member {module:engine/view/position~Position}ntt
*/nttthis.end = end ? Position.createFromPosition( end ) :
Position.createFromPosition( start );nt}nnt/**nt * Iterable interface.nt
*nt * Iterates over all {@link module:engine/view/item~Item view items}
that are in this range and returnsnt * them together with additional
information like length or {@link module:engine/view/position~Position
positions},nt * grouped as {@link
module:engine/view/treewalker~TreeWalkerValue}.nt *nt * This iterator uses
{@link module:engine/view/treewalker~TreeWalker TreeWalker} with
`boundaries` set to this range andnt * `ignoreElementEnd` optionnt * set to
`true`.nt *nt * @returns
{Iterable.&lt;module:engine/view/treewalker~TreeWalkerValue&gt;}nt */nt* [
Symbol.iterator ]() {nttyield* new TreeWalker( { boundaries: this,
ignoreElementEnd: true } );nt}nnt/**nt * Returns whether the range is
collapsed, that is it start and end positions are equal.nt *nt * @type
{Boolean}nt */ntget isCollapsed() {nttreturn this.start.isEqual( this.end
);nt}nnt/**nt * Returns whether this range is flat, that is if {@link
module:engine/view/range~Range#start start} position andnt * {@link
module:engine/view/range~Range#end end} position are in the same {@link
module:engine/view/position~Position#parent parent}.nt *nt * @type
{Boolean}nt */ntget isFlat() {nttreturn this.start.parent ===
this.end.parent;nt}nnt/**nt * Range root element.nt *nt * @type
{module:engine/view/element~Element|module:engine/view/documentfragment~DocumentFragment}nt
*/ntget root() {nttreturn this.start.root;nt}nnt/**nt * Creates a maximal
range that has the same content as this range but is expanded in both ways
(at the beginningnt * and at the end).nt *nt * For example:nt *nt *
tt&lt;p&gt;Foo&lt;/p&gt;&lt;p&gt;{Bar}&lt;/p&gt; -&gt; &lt;<a
href="<p>Bar”>p>Foo</p></a>&lt;/p&gt;nt *
tt&lt;p&gt;foo{bar}&lt;span&gt;&lt;/span&gt;&lt;/p&gt; -&gt; &lt;<a
href="bar<span></span>“>p>foo</a>&lt;/p&gt;nt *nt * Note that in the sample
above:nt *  - `&lt;p&gt;` have type of {@link
module:engine/view/containerelement~ContainerElement},nt *  - “ have type
of {@link module:engine/view/attributeelement~AttributeElement},nt *  -
`&lt;span&gt;` have type of {@link
module:engine/view/uielement~UIElement}.nt *nt * @returns
{module:engine/view/range~Range} Enlarged range.nt */ntgetEnlarged()
{nttlet start = this.start.getLastMatchingPosition( enlargeTrimSkip, {
direction: &#39;backward&#39; } );nttlet end =
this.end.getLastMatchingPosition( enlargeTrimSkip );nntt// Fix positions,
in case if they are in Text node.nttif ( start.parent.is( &#39;text&#39; )
&amp;&amp; start.isAtStart ) {ntttstart = Position.createBefore(
start.parent );ntt}nnttif ( end.parent.is( &#39;text&#39; ) &amp;&amp;
end.isAtEnd ) {ntttend = Position.createAfter( end.parent );ntt}nnttreturn
new Range( start, end );nt}nnt/**nt * Creates a minimum range that has the
same content as this range but is trimmed in both ways (at the beginningnt
* and at the end).nt *nt * For example:nt *nt *
tt<p>Foo</p>[<p>Bar]&lt;/p&gt; -&gt;
&lt;p&gt;Foo&lt;/p&gt;&lt;p&gt;{Bar}&lt;/p&gt;nt *
tt<p>foo[bar<span></span>]&lt;/p&gt; -&gt;
&lt;p&gt;foo{bar}&lt;span&gt;&lt;/span&gt;&lt;/p&gt;nt *nt * Note that in
the sample above:nt *  - `&lt;p&gt;` have type of {@link
module:engine/view/containerelement~ContainerElement},nt *  - “ have type
of {@link module:engine/view/attributeelement~AttributeElement},nt *  -
`&lt;span&gt;` have type of {@link
module:engine/view/uielement~UIElement}.nt *nt * @returns
{module:engine/view/range~Range} Shrink range.nt */ntgetTrimmed() {nttlet
start = this.start.getLastMatchingPosition( enlargeTrimSkip );nnttif (
start.isAfter( this.end ) || start.isEqual( this.end ) ) {ntttreturn new
Range( start, start );ntt}nnttlet end = this.end.getLastMatchingPosition(
enlargeTrimSkip, { direction: &#39;backward&#39; } );nttconst
nodeAfterStart = start.nodeAfter;nttconst nodeBeforeEnd =
end.nodeBefore;nntt// Because TreeWalker prefers positions next to text
node, we need to move them manually into these text nodes.nttif (
nodeAfterStart &amp;&amp; nodeAfterStart.is( &#39;text&#39; ) ) {ntttstart
= new Position( nodeAfterStart, 0 );ntt}nnttif ( nodeBeforeEnd &amp;&amp;
nodeBeforeEnd.is( &#39;text&#39; ) ) {ntttend = new Position(
nodeBeforeEnd, nodeBeforeEnd.data.length );ntt}nnttreturn new Range( start,
end );nt}nnt/**nt * Two ranges are equal if their start and end positions
are equal.nt *nt * @param {module:engine/view/range~Range} otherRange Range
to compare with.nt * @returns {Boolean} `true` if ranges are equal, `false`
otherwisent */ntisEqual( otherRange ) {nttreturn this == otherRange || (
this.start.isEqual( otherRange.start ) &amp;&amp; this.end.isEqual(
otherRange.end ) );nt}nnt/**nt * Checks whether this range contains given
{@link module:engine/view/position~Position position}.nt *nt * @param
{module:engine/view/position~Position} position Position to check.nt *
@returns {Boolean} `true` if given {@link
module:engine/view/position~Position position} is contained in this
range,nt * `false` otherwise.nt */ntcontainsPosition( position ) {nttreturn
position.isAfter( this.start ) &amp;&amp; position.isBefore( this.end
);nt}nnt/**nt * Checks whether this range contains given {@link
module:engine/view/range~Range range}.nt *nt * @param
{module:engine/view/range~Range} otherRange Range to check.nt * @param
{Boolean} [loose=false] Whether the check is loose or strict. If the check
is strict (`false`), compared range cannotnt * start or end at the same
position as this range boundaries. If the check is loose (`true`), compared
range can start, end ornt * even be equal to this range. Note that
collapsed ranges are always compared in strict mode.nt * @returns {Boolean}
`true` if given {@link module:engine/view/range~Range range} boundaries are
contained by this range, `false`nt * otherwise.nt */ntcontainsRange(
otherRange, loose = false ) {nttif ( otherRange.isCollapsed ) {ntttloose =
false;ntt}nnttconst containsStart = this.containsPosition( otherRange.start
) || ( loose &amp;&amp; this.start.isEqual( otherRange.start ) );nttconst
containsEnd = this.containsPosition( otherRange.end ) || ( loose &amp;&amp;
this.end.isEqual( otherRange.end ) );nnttreturn containsStart &amp;&amp;
containsEnd;nt}nnt/**nt * Computes which part(s) of this {@link
module:engine/view/range~Range range} is not a part of givennt * {@link
module:engine/view/range~Range range}.nt * Returned array contains zero,
one or two {@link module:engine/view/range~Range ranges}.nt *nt *
Examples:nt *nt *ttlet foo = new Text( &#39;foo&#39; );nt *ttlet img = new
ContainerElement( &#39;img&#39; );nt *ttlet bar = new Text( &#39;bar&#39;
);nt *ttlet p = new ContainerElement( &#39;p&#39;, null, [ foo, img, bar ]
);nt *nt *ttlet range = new Range( new Position( foo, 2 ), new Position(
bar, 1 ); // "o&quot;, img, "b&quot; are in range.nt *ttlet otherRange =
new Range( new Position( foo, 1 ), new Position( bar, 2 ); "oo&quot;, img,
"ba&quot; are in range.nt *ttlet transformed = range.getDifference(
otherRange );nt *tt// transformed array has no ranges because `otherRange`
contains `range`nt *nt *ttotherRange = new Range( new Position( foo, 1 ),
new Position( p, 2 ); // "oo&quot;, img are in range.nt *tttransformed =
range.getDifference( otherRange );nt *tt// transformed array has one range:
from ( p, 2 ) to ( bar, 1 )nt *nt *ttotherRange = new Range( new Position(
p, 1 ), new Position( p, 2 ) ); // img is in range.nt *tttransformed =
range.getDifference( otherRange );nt *tt// transformed array has two
ranges: from ( foo, 1 ) to ( p, 1 ) and from ( p, 2 ) to ( bar, 1 )nt *nt *
@param {module:engine/view/range~Range} otherRange Range to differentiate
against.nt * @returns {Array.&lt;module:engine/view/range~Range&gt;} The
difference between ranges.nt */ntgetDifference( otherRange ) {nttconst
ranges = [];nnttif ( this.isIntersecting( otherRange ) ) {nttt// Ranges
intersect.nntttif ( this.containsPosition( otherRange.start ) ) {ntttt//
Given range start is inside this range. This means that we have tontttt//
add shrunken range - from the start to the middle of this
range.nttttranges.push( new Range( this.start, otherRange.start )
);nttt}nntttif ( this.containsPosition( otherRange.end ) ) {ntttt// Given
range end is inside this range. This means that we have tontttt// add
shrunken range - from the middle of this range to the end.nttttranges.push(
new Range( otherRange.end, this.end ) );nttt}ntt} else {nttt// Ranges do
not intersect, return the original range.ntttranges.push(
Range.createFromRange( this ) );ntt}nnttreturn ranges;nt}nnt/**nt * Returns
an intersection of this {@link module:engine/view/range~Range range} and
given {@link module:engine/view/range~Range range}.nt * Intersection is a
common part of both of those ranges. If ranges has no common part, returns
`null`.nt *nt * Examples:nt *nt *ttlet foo = new Text( &#39;foo&#39; );nt
*ttlet img = new ContainerElement( &#39;img&#39; );nt *ttlet bar = new
Text( &#39;bar&#39; );nt *ttlet p = new ContainerElement( &#39;p&#39;,
null, [ foo, img, bar ] );nt *nt *ttlet range = new Range( new Position(
foo, 2 ), new Position( bar, 1 ); // "o&quot;, img, "b&quot; are in
range.nt *ttlet otherRange = new Range( new Position( foo, 1 ), new
Position( p, 2 ); // "oo&quot;, img are in range.nt *ttlet transformed =
range.getIntersection( otherRange ); // range from ( foo, 1 ) to ( p, 2
).nt *nt *ttotherRange = new Range( new Position( bar, 1 ), new Position(
bar, 3 ); "ar&quot; is in range.nt *tttransformed = range.getIntersection(
otherRange ); // null - no common part.nt *nt * @param
{module:engine/view/range~Range} otherRange Range to check for
intersection.nt * @returns {module:engine/view/range~Range|null} A common
part of given ranges or `null` if ranges have no common part.nt
*/ntgetIntersection( otherRange ) {nttif ( this.isIntersecting( otherRange
) ) {nttt// Ranges intersect, so a common range will be returned.nttt// At
most, it will be same as this range.ntttlet commonRangeStart =
this.start;ntttlet commonRangeEnd = this.end;nntttif (
this.containsPosition( otherRange.start ) ) {ntttt// Given range start is
inside this range. This means thaNt we have tontttt// shrink common range
to the given range start.nttttcommonRangeStart =
otherRange.start;nttt}nntttif ( this.containsPosition( otherRange.end ) )
{ntttt// Given range end is inside this range. This means that we have
tontttt// shrink common range to the given range end.nttttcommonRangeEnd =
otherRange.end;nttt}nntttreturn new Range( commonRangeStart, commonRangeEnd
);ntt}nntt// Ranges do not intersect, so they do not have common
part.nttreturn null;nt}nnt/**nt * Creates a {@link
module:engine/view/treewalker~TreeWalker TreeWalker} instance with this
range as a boundary.nt *nt * @param {Object} options <a
href="../../../../Object.html">Object</a> with configuration options. See
{@link module:engine/view/treewalker~TreeWalker}.nt * @param
{module:engine/view/position~Position} [options.startPosition]nt * @param
{Boolean} [options.singleCharacters=false]nt * @param {Boolean}
[options.shallow=false]nt * @param {Boolean}
[options.ignoreElementEnd=false]nt */ntgetWalker( options = {} )
{nttoptions.boundaries = this;nnttreturn new TreeWalker( options
);nt}nnt/**nt * Returns a {@link module:engine/view/node~Node} or {@link
module:engine/view/documentfragment~DocumentFragment}nt * which is a common
ancestor of range&#39;s both ends (in which the entire range is
contained).nt *nt * @returns
{module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment|null}nt
*/ntgetCommonAncestor() {nttreturn this.start.getCommonAncestor( this.end
);nt}nnt/**nt * Returns an iterator that iterates over all {@link
module:engine/view/item~Item view items} that are in this range and
returnsnt * them.nt *nt * This method uses {@link
module:engine/view/treewalker~TreeWalker} with `boundaries` set to this
range and `ignoreElementEnd` optionnt * set to `true`. However it returns
only {@link module:engine/view/item~Item items},nt * not {@link
module:engine/view/treewalker~TreeWalkerValue}.nt *nt * You may specify
additional options for the tree walker. See {@link
module:engine/view/treewalker~TreeWalker} fornt * a full list of available
options.nt *nt * @param {Object} options <a
href="../../../../Object.html">Object</a> with configuration options. See
{@link module:engine/view/treewalker~TreeWalker}.nt * @returns
{Iterable.&lt;module:engine/view/item~Item&gt;}nt */nt* getItems( options =
{} ) {nttoptions.boundaries = this;nttoptions.ignoreElementEnd =
true;nnttconst treeWalker = new TreeWalker( options );nnttfor ( const value
of treeWalker ) {ntttyield value.item;ntt}nt}nnt/**nt * Returns an iterator
that iterates over all {@link module:engine/view/position~Position
positions} that are boundaries ornt * contained in this range.nt *nt * This
method uses {@link module:engine/view/treewalker~TreeWalker} with
`boundaries` set to this range. However it returns onlynt * {@link
module:engine/view/position~Position positions}, not {@link
module:engine/view/treewalker~TreeWalkerValue}.nt *nt * You may specify
additional options for the tree walker. See {@link
module:engine/view/treewalker~TreeWalker} fornt * a full list of available
options.nt *nt * @param {Object} options <a
href="../../../../Object.html">Object</a> with configuration options. See
{@link module:engine/view/treewalker~TreeWalker}.nt * @returns
{Iterable.&lt;module:engine/view/position~Position&gt;}nt */nt*
getPositions( options = {} ) {nttoptions.boundaries = this;nnttconst
treeWalker = new TreeWalker( options );nnttyield
treeWalker.position;nnttfor ( const value of treeWalker ) {ntttyield
value.nextPosition;ntt}nt}nnt/**nt * Checks and returns whether this range
intersects with given range.nt *nt * @param
{module:engine/view/range~Range} otherRange Range to compare with.nt *
@returns {Boolean} True if ranges intersect.nt */ntisIntersecting(
otherRange ) {nttreturn this.start.isBefore( otherRange.end ) &amp;&amp;
this.end.isAfter( otherRange.start );nt}nnt/**nt * Creates a range from
given parents and offsets.nt *nt * @param
{module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment}
startElement Start positionnt * parent element.nt * @param {Number}
startOffset Start position offset.nt * @param
{module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment}
endElement End positionnt * parent element.nt * @param {Number} endOffset
End position offset.nt * @returns {module:engine/view/range~Range} Created
range.nt */ntstatic createFromParentsAndOffsets( startElement, startOffset,
endElement, endOffset ) {nttreturn new this(ntttnew Position( startElement,
startOffset ),ntttnew Position( endElement, endOffset )ntt);nt}nnt/**nt *
Creates and returns a new instance of Range which is equal to passed
range.nt *nt * @param {module:engine/view/range~Range} range Range to
clone.nt * @returns {module:engine/view/range~Range}nt */ntstatic
createFromRange( range ) {nttreturn new this( range.start, range.end
);nt}nnt/**nt * Creates a new range, spreading from specified {@link
module:engine/view/position~Position position} to a position moved bynt *
given `shift`. If `shift` is a negative value, shifted position is treated
as the beginning of the range.nt *nt * @param
{module:engine/view/position~Position} position Beginning of the range.nt *
@param {Number} shift How long the range should be.nt * @returns
{module:engine/view/range~Range}nt */ntstatic createFromPositionAndShift(
position, shift ) {nttconst start = position;nttconst end =
position.getShiftedBy( shift );nnttreturn shift &gt; 0 ? new this( start,
end ) : new this( end, start );nt}nnt/**nt * Creates a range inside an
{@link module:engine/view/element~Element element} which starts before the
first child ofnt * that element and ends after the last child of that
element.nt *nt * @param {module:engine/view/element~Element} element
Element which is a parent for the range.nt * @returns
{module:engine/view/range~Range}nt */ntstatic createIn( element )
{nttreturn this.createFromParentsAndOffsets( element, 0, element,
element.childCount );nt}nnt/**nt * Creates a range that starts before given
{@link module:engine/view/item~Item view item} and ends after it.nt *nt *
@param {module:engine/view/item~Item} itemnt * @returns
{module:engine/view/range~Range}nt */ntstatic createOn( item ) {nttconst
size = item.is( &#39;textProxy&#39; ) ? item.offsetSize : 1;nnttreturn
this.createFromPositionAndShift( Position.createBefore( item ), size
);nt}nnt/**nt * Creates a collapsed range at given {@link
module:engine/view/position~Position position}nt * or on the given {@link
module:engine/view/item~Item item}.nt *nt * @param
{module:engine/view/item~Item|module:engine/view/position~Position}
itemOrPositionnt * @param
{Number|&#39;end&#39;|&#39;before&#39;|&#39;after&#39;} [offset=0] Offset
or one of the flags. Used only whennt * first parameter is a {@link
module:engine/view/item~Item view item}.nt */ntstatic createCollapsedAt(
itemOrPosition, offset ) {nttconst start = Position.createAt(
itemOrPosition, offset );nttconst end = Position.createFromPosition( start
);nnttreturn new Range( start, end );nt}n}nn// Function used by getEnlarged
and getTrimmed methods.nfunction enlargeTrimSkip( value ) {ntif (
value.item.is( &#39;attributeElement&#39; ) || value.item.is(
&#39;uiElement&#39; ) ) {nttreturn true;nt}nntreturn
false;n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/view/range.jsn// module id = nulln// module chunks
= ”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben.
All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
utils/countn */nn/**n * Returns the number of items return by the
iterator.n *n *ttcount( [ 1, 2, 3, 4, 5 ] ); // 5;n *n * @param
{Iterable.&lt;*&gt;} iterator Any iterator.n * @returns {Number} Number of
items returned by that iterator.n */nexport default function count(
iterator ) {ntlet count = 0;nntfor ( const _ of iterator ) { //
eslint-disable-line no-unused-varsnttcount++;nt}nntreturn
count;n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/count.jsn// module id = nulln// module chunks =
”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben. All
rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
engine/view/selectionn */nnimport CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nimport Range from
&#39;./range&#39;;nimport Position from &#39;./position&#39;;nimport mix
from &#39;@ckeditor/ckeditor5-utils/src/mix&#39;;nimport EmitterMixin from
&#39;@ckeditor/ckeditor5-utils/src/emittermixin&#39;;nimport Node from
&#39;./node&#39;;nimport Element from &#39;./element&#39;;nimport count
from &#39;@ckeditor/ckeditor5-utils/src/count&#39;;nimport isIterable from
&#39;@ckeditor/ckeditor5-utils/src/isiterable&#39;;nimport
DocumentSelection from &#39;./documentselection&#39;;nn/**n * Class
representing selection in tree view.n *n * Selection can consist of {@link
module:engine/view/range~Range ranges} that can be set usingn * {@link
module:engine/view/selection~Selection#setTo setTo} method.n * That method
create copies of provided ranges and store those copies internally. Further
modifications to passedn * ranges will not change selection&#39;s state.n *
Selection&#39;s ranges can be obtained via {@link
module:engine/view/selection~Selection#getRanges getRanges},n * {@link
module:engine/view/selection~Selection#getFirstRange getFirstRange} andn *
{@link module:engine/view/selection~Selection#getLastRange getLastRange}
methods, which return copies of rangesn * stored inside selection.
Modifications made on these copies will not change selection&#39;s state.
Similar situationn * occurs when getting {@link
module:engine/view/selection~Selection#anchor anchor},n * {@link
module:engine/view/selection~Selection#focus focus}, {@link
module:engine/view/selection~Selection#getFirstPosition first}n * and
{@link module:engine/view/selection~Selection#getLastPosition last}
positions - all will returnn * copies of requested positions.n */nexport
default class Selection {nt/**nt * Creates new selection instance.nt *nt *
tt// Creates empty selection without ranges.nt *ttconst selection = new
Selection();nt *nt *tt// Creates selection at the given range.nt *ttconst
range = new Range( start, end );nt *ttconst selection = new Selection(
range );nt *nt *tt// Creates selection at the given rangesnt * ttconst
ranges = [ new Range( start1, end2 ), new Range( star2, end2 ) ];nt
*ttconst selection = new Selection( ranges );nt *nt *tt// Creates selection
from the other selection.nt *ttconst otherSelection = new Selection();nt
*ttconst selection = new Selection( otherSelection );nt *nt *tt// Creates
selection from the document selection.nt *ttconst selection = new
Selection( editor.editing.view.document.selection );nt *nt * tt// Creates
selection at the given position.nt *ttconst position = new Position( root,
path );nt *ttconst selection = new Selection( position );nt *nt *tt//
Creates collapsed selection at the position of given item and offset.nt
*ttconst paragraph = writer.createContainerElement( &#39;paragraph&#39;
);nt *ttconst selection = new Selection( paragraph, offset );nt *nt *tt//
Creates a range inside an {@link module:engine/view/element~Element
element} which starts before thent *tt// first child of that element and
ends after the last child of that element.nt *ttconst selection = new
Selection( paragraph, &#39;in&#39; );nt *nt *tt// Creates a range on an
{@link module:engine/view/item~Item item} which starts before the item and
endsnt *tt// just after the item.nt *ttconst selection = new Selection(
paragraph, &#39;on&#39; );nt *nt * `Selection`&#39;s constructor allow
passing additional options (`backward`, `fake` and `label`) as the last
argument.nt *nt *tt// Creates backward selection.nt *ttconst selection =
new Selection( range, { backward: true } );nt *nt * Fake selection does not
render as browser native selection over selected elements and is hidden to
the user.nt * This way, no native selection UI artifacts are displayed to
the user and selection over elements can bent * represented in other way,
for example by applying proper CSS class.nt *nt * Additionally fake&#39;s
selection label can be provided. It will be used to describe fake selection
in DOMnt * (and be  properly handled by screen readers).nt *nt *tt//
Creates fake selection with label.nt *ttconst selection = new Selection(
range, { fake: true, label: &#39;foo&#39; } );nt *nt * @param
{module:engine/view/selection~Selection|module:engine/view/documentselection~DocumentSelection|nt
*
module:engine/view/position~Position|Iterable.&lt;module:engine/view/range~Range&gt;|module:engine/view/range~Range|nt
* module:engine/view/item~Item|null} [selectable=null]nt * @param
{Number|&#39;before&#39;|&#39;end&#39;|&#39;after&#39;|&#39;on&#39;|&#39;in&#39;}
[placeOrOffset] Offset or place when selectable is an `Item`.nt * @param
{Object} [options]nt * @param {Boolean} [options.backward] Sets this
selection instance to be backward.nt * @param {Boolean} [options.fake] Sets
this selection instance to be marked as `fake`.nt * @param {String}
[options.label] Label for the fake selection.nt */ntconstructor( selectable
= null, placeOrOffset, options ) {ntt/**ntt * Stores all ranges that are
selected.ntt *ntt * @protectedntt * @member
{Array.&lt;module:engine/view/range~Range&gt;}ntt */nttthis._ranges =
[];nntt/**ntt * Specifies whether the last added range was added as a
backward or forward range.ntt *ntt * @protectedntt * @member {Boolean}ntt
*/nttthis._lastRangeBackward = false;nntt/**ntt * Specifies whether
selection instance is fake.ntt *ntt * @privatentt * @member {Boolean}ntt
*/nttthis._isFake = false;nntt/**ntt * Fake selection&#39;s label.ntt *ntt
* @privatentt * @member {String}ntt */nttthis._fakeSelectionLabel =
&#39;&#39;;nnttthis.setTo( selectable, placeOrOffset, options );nt}nnt/**nt
* Returns true if selection instance is marked as `fake`.nt *nt * @see
setTont * @returns {Boolean}nt */ntget isFake() {nttreturn
this._isFake;nt}nnt/**nt * Returns fake selection label.nt *nt * @see
setTont * @returns {String}nt */ntget fakeSelectionLabel() {nttreturn
this._fakeSelectionLabel;nt}nnt/**nt * Selection anchor. Anchor may be
described as a position where the selection starts. Together withnt *
{@link focus focus} they define the direction of selection, which is
importantnt * when expanding/shrinking selection. Anchor is always the
start or end of the most recent added range.nt * It may be a bit
unintuitive when there are multiple ranges in selection.nt *nt * @see
focusnt * @type {module:engine/view/position~Position}nt */ntget anchor()
{nttif ( !this._ranges.length ) {ntttreturn null;ntt}nttconst range =
this._ranges[ this._ranges.length - 1 ];nttconst anchor =
this._lastRangeBackward ? range.end : range.start;nnttreturn
Position.createFromPosition( anchor );nt}nnt/**nt * Selection focus. Focus
is a position where the selection ends.nt *nt * @see anchornt * @type
{module:engine/view/position~Position}nt */ntget focus() {nttif (
!this._ranges.length ) {ntttreturn null;ntt}nttconst range = this._ranges[
this._ranges.length - 1 ];nttconst focus = this._lastRangeBackward ?
range.start : range.end;nnttreturn Position.createFromPosition( focus
);nt}nnt/**nt * Returns whether the selection is collapsed. Selection is
collapsed when there is exactly one range which isnt * collapsed.nt *nt *
@type {Boolean}nt */ntget isCollapsed() {nttreturn this.rangeCount === 1
&amp;&amp; this._ranges[ 0 ].isCollapsed;nt}nnt/**nt * Returns number of
ranges in selection.nt *nt * @type {Number}nt */ntget rangeCount()
{nttreturn this._ranges.length;nt}nnt/**nt * Specifies whether the {@link
focus} precedes {@link anchor}.nt *nt * @type {Boolean}nt */ntget
isBackward() {nttreturn !this.isCollapsed &amp;&amp;
this._lastRangeBackward;nt}nnt/**nt * {@link
module:engine/view/editableelement~EditableElement EditableElement}
instance that contains this selection, or `null`nt * if the selection is
not inside an editable element.nt *nt * @type
{module:engine/view/editableelement~EditableElement|null}nt */ntget
editableElement() {nttif ( this.anchor ) {ntttreturn
this.anchor.editableElement;ntt}nnttreturn null;nt}nnt/**nt * Returns an
iterable that contains copies of all ranges added to the selection.nt *nt *
@returns {Iterable.&lt;module:engine/view/range~Range&gt;}nt */nt*
getRanges() {nttfor ( const range of this._ranges ) {ntttyield
Range.createFromRange( range );ntt}nt}nnt/**nt * Returns copy of the first
range in the selection. First range is the one whichnt * {@link
module:engine/view/range~Range#start start} position {@link
module:engine/view/position~Position#isBefore is before} startnt * position
of all other ranges (not to confuse with the first range added to the
selection).nt * Returns `null` if no ranges are added to selection.nt *nt *
@returns {module:engine/view/range~Range|null}nt */ntgetFirstRange()
{nttlet first = null;nnttfor ( const range of this._ranges ) {ntttif (
!first || range.start.isBefore( first.start ) ) {nttttfirst =
range;nttt}ntt}nnttreturn first ? Range.createFromRange( first ) :
null;nt}nnt/**nt * Returns copy of the last range in the selection. Last
range is the one which {@link module:engine/view/range~Range#end end}nt *
position {@link module:engine/view/position~Position#isAfter is after} end
position of all other ranges (not to confusent * with the last range added
to the selection). Returns `null` if no ranges are added to selection.nt
*nt * @returns {module:engine/view/range~Range|null}nt */ntgetLastRange()
{nttlet last = null;nnttfor ( const range of this._ranges ) {ntttif ( !last
|| range.end.isAfter( last.end ) ) {nttttlast = range;nttt}ntt}nnttreturn
last ? Range.createFromRange( last ) : null;nt}nnt/**nt * Returns copy of
the first position in the selection. First position is the position thatnt
* {@link module:engine/view/position~Position#isBefore is before} any other
position in the selection ranges.nt * Returns `null` if no ranges are added
to selection.nt *nt * @returns
{module:engine/view/position~Position|null}nt */ntgetFirstPosition()
{nttconst firstRange = this.getFirstRange();nnttreturn firstRange ?
Position.createFromPosition( firstRange.start ) : null;nt}nnt/**nt *
Returns copy of the last position in the selection. Last position is the
position thatnt * {@link module:engine/view/position~Position#isAfter is
after} any other position in the selection ranges.nt * Returns `null` if no
ranges are added to selection.nt *nt * @returns
{module:engine/view/position~Position|null}nt */ntgetLastPosition()
{nttconst lastRange = this.getLastRange();nnttreturn lastRange ?
Position.createFromPosition( lastRange.end ) : null;nt}nnt/**nt * Checks
whether, this selection is equal to given selection. Selections are equal
if they have same directions,nt * same number of ranges and all ranges from
one selection equal to a range from other selection.nt *nt * @param
{module:engine/view/selection~Selection|module:engine/view/documentselection~DocumentSelection}
otherSelectionnt * Selection to compare with.nt * @returns {Boolean} `true`
if selections are equal, `false` otherwise.nt */ntisEqual( otherSelection )
{nttif ( this.isFake != otherSelection.isFake ) {ntttreturn
false;ntt}nnttif ( this.isFake &amp;&amp; this.fakeSelectionLabel !=
otherSelection.fakeSelectionLabel ) {ntttreturn false;ntt}nnttif (
this.rangeCount != otherSelection.rangeCount ) {ntttreturn false;ntt} else
if ( this.rangeCount === 0 ) {ntttreturn true;ntt}nnttif (
!this.anchor.isEqual( otherSelection.anchor ) || !this.focus.isEqual(
otherSelection.focus ) ) {ntttreturn false;ntt}nnttfor ( const thisRange of
this._ranges ) {ntttlet found = false;nntttfor ( const otherRange of
otherSelection._ranges ) {nttttif ( thisRange.isEqual( otherRange ) )
{ntttttfound = true;ntttttbreak;ntttt}nttt}nntttif ( !found ) {nttttreturn
false;nttt}ntt}nnttreturn true;nt}nnt/**nt * Checks whether this selection
is similar to given selection. Selections are similar if they have same
directions, sament * number of ranges, and all {@link
module:engine/view/range~Range#getTrimmed trimmed} ranges from one
selection arent * equal to any trimmed range from other selection.nt *nt *
@param
{module:engine/view/selection~Selection|module:engine/view/documentselection~DocumentSelection}
otherSelectionnt * Selection to compare with.nt * @returns {Boolean} `true`
if selections are similar, `false` otherwise.nt */ntisSimilar(
otherSelection ) {nttif ( this.isBackward != otherSelection.isBackward )
{ntttreturn false;ntt}nnttconst numOfRangesA = count( this.getRanges()
);nttconst numOfRangesB = count( otherSelection.getRanges() );nntt// If
selections have different number of ranges, they cannot be similar.nttif (
numOfRangesA != numOfRangesB ) {ntttreturn false;ntt}nntt// If both
selections have no ranges, they are similar.nttif ( numOfRangesA == 0 )
{ntttreturn true;ntt}nntt// Check if each range in one selection has a
similar range in other selection.nttfor ( let rangeA of this.getRanges() )
{ntttrangeA = rangeA.getTrimmed();nntttlet found = false;nntttfor ( let
rangeB of otherSelection.getRanges() ) {nttttrangeB =
rangeB.getTrimmed();nnttttif ( rangeA.start.isEqual( rangeB.start )
&amp;&amp; rangeA.end.isEqual( rangeB.end ) ) {ntttttfound =
true;ntttttbreak;ntttt}nttt}nnttt// For `rangeA`, neither range in
`otherSelection` was similar. So selections are not similar.ntttif ( !found
) {nttttreturn false;nttt}ntt}nntt// There were no ranges that weren&#39;t
matched. Selections are similar.nttreturn true;nt}nnt/**nt * Returns the
selected element. {@link module:engine/view/element~Element Element} is
considered as selected if there is onlynt * one range in the selection, and
that range contains exactly one element.nt * Returns `null` if there is no
selected element.nt *nt * @returns
{module:engine/view/element~Element|null}nt */ntgetSelectedElement() {nttif
( this.rangeCount !== 1 ) {ntttreturn null;ntt}nnttconst range =
this.getFirstRange();nttconst nodeAfterStart =
range.start.nodeAfter;nttconst nodeBeforeEnd =
range.end.nodeBefore;nnttreturn ( nodeAfterStart instanceof Element
&amp;&amp; nodeAfterStart == nodeBeforeEnd ) ? nodeAfterStart :
null;nt}nnt/**nt * Sets this selection&#39;s ranges and direction to the
specified location based on the givennt * {@link
module:engine/view/documentselection~DocumentSelection document
selection},nt * {@link module:engine/view/selection~Selection selection},
{@link module:engine/view/position~Position position},nt * {@link
module:engine/view/item~Item item}, {@link module:engine/view/range~Range
range},nt * an iterable of {@link module:engine/view/range~Range ranges} or
null.nt *nt *tt// Sets selection to the given range.nt *ttconst range = new
Range( start, end );nt *ttselection.setTo( range );nt *nt *tt// Sets
selection to given ranges.nt * ttconst ranges = [ new Range( start1, end2
), new Range( star2, end2 ) ];nt *ttselection.setTo( range );nt *nt *tt//
Sets selection to the other selection.nt *ttconst otherSelection = new
Selection();nt *ttselection.setTo( otherSelection );nt *nt *t t// Sets
selection to contents of DocumentSelection.nt *ttselection.setTo(
editor.editing.view.document.selection );nt *nt * tt// Sets collapsed
selection at the given position.nt *ttconst position = new Position( root,
path );nt *ttselection.setTo( position );nt *nt * tt// Sets collapsed
selection at the position of given item and offset.nt *ttselection.setTo(
paragraph, offset );nt *nt * Creates a range inside an {@link
module:engine/view/element~Element element} which starts before the first
child ofnt * that element and ends after the last child of that element.nt
*nt *ttselection.setTo( paragraph, &#39;in&#39; );nt *nt * Creates a range
on an {@link module:engine/view/item~Item item} which starts before the
item and ends just after the item.nt *nt *ttselection.setTo( paragraph,
&#39;on&#39; );nt *nt * tt// Clears selection. Removes all ranges.nt
*ttselection.setTo( null );nt *nt * `Selection#setTo()` method allow
passing additional options (`backward`, `fake` and `label`) as the last
argument.nt *nt *tt// Sets selection as backward.nt *ttselection.setTo(
range, { backward: true } );nt *nt * Fake selection does not render as
browser native selection over selected elements and is hidden to the
user.nt * This way, no native selection UI artifacts are displayed to the
user and selection over elements can bent * represented in other way, for
example by applying proper CSS class.nt *nt * Additionally fake&#39;s
selection label can be provided. It will be used to describe fake selection
in DOMnt * (and be  properly handled by screen readers).nt *nt *tt//
Creates fake selection with label.nt *ttselection.setTo( range, { fake:
true, label: &#39;foo&#39; } );nt *nt * @fires changent * @param
{module:engine/view/selection~Selection|module:engine/view/documentselection~DocumentSelection|nt
*
module:engine/view/position~Position|Iterable.&lt;module:engine/view/range~Range&gt;|module:engine/view/range~Range|nt
* module:engine/view/item~Item|null} selectablent * @param
{Number|&#39;before&#39;|&#39;end&#39;|&#39;after&#39;|&#39;on&#39;|&#39;in&#39;}
[placeOrOffset] Sets place or offset of the selection.nt * @param {Object}
[options]nt * @param {Boolean} [options.backward] Sets this selection
instance to be backward.nt * @param {Boolean} [options.fake] Sets this
selection instance to be marked as `fake`.nt * @param {String}
[options.label] Label for the fake selection.nt */ntsetTo( selectable,
placeOrOffset, options ) {nttif ( selectable === null )
{ntttthis._setRanges( [] );ntttthis._setFakeOptions( placeOrOffset );ntt}
else if ( selectable instanceof Selection || selectable instanceof
DocumentSelection ) {ntttthis._setRanges( selectable.getRanges(),
selectable.isBackward );ntttthis._setFakeOptions( { fake:
selectable.isFake, label: selectable.fakeSelectionLabel } );ntt} else if (
selectable instanceof Range ) {ntttthis._setRanges( [ selectable ],
placeOrOffset &amp;&amp; placeOrOffset.backward );ntttthis._setFakeOptions(
placeOrOffset );ntt} else if ( selectable instanceof Position )
{ntttthis._setRanges( [ new Range( selectable ) ]
);ntttthis._setFakeOptions( placeOrOffset );ntt} else if ( selectable
instanceof Node ) {ntttconst backward = !!options &amp;&amp;
!!options.backward;ntttlet range;nntttif ( placeOrOffset === undefined )
{ntttt/**ntttt * selection.setTo requires the second parameter when the
first parameter is a node.ntttt *ntttt * @error
view-selection-setTo-required-second-parameterntttt */nttttthrow new
CKEditorError(nttttt&#39;view-selection-setTo-required-second-parameter:
&#39; +nttttt&#39;selection.setTo requires the second parameter when the
first parameter is a node.&#39;ntttt);nttt} else if ( placeOrOffset ==
&#39;in&#39; ) {nttttrange = Range.createIn( selectable );nttt} else if (
placeOrOffset == &#39;on&#39; ) {nttttrange = Range.createOn( selectable
);nttt} else {nttttrange = Range.createCollapsedAt( selectable,
placeOrOffset );nttt}nntttthis._setRanges( [ range ], backward
);ntttthis._setFakeOptions( options );ntt} else if ( isIterable( selectable
) ) {nttt// We assume that the selectable is an iterable of ranges.nttt//
Array.from() is used to prevent setting ranges to the old
iterablentttthis._setRanges( selectable, placeOrOffset &amp;&amp;
placeOrOffset.backward );ntttthis._setFakeOptions( placeOrOffset );ntt}
else {nttt/**nttt * Cannot set selection to given place.nttt *nttt * @error
view-selection-setTo-not-selectablenttt */ntttthrow new CKEditorError(
&#39;view-selection-setTo-not-selectable: Cannot set selection to given
place.&#39; );ntt}nnttthis.fire( &#39;change&#39; );nt}nnt/**nt * Moves
{@link focus} to the specified location.nt *nt * The location can be
specified in the same form as {@link
module:engine/view/position~Position.createAt} parameters.nt *nt * @fires
changent * @param
{module:engine/view/item~Item|module:engine/view/position~Position}
itemOrPositionnt * @param
{Number|&#39;end&#39;|&#39;before&#39;|&#39;after&#39;} [offset=0] Offset
or one of the flags. Used only whennt * first parameter is a {@link
module:engine/view/item~Item view item}.nt */ntsetFocus( itemOrPosition,
offset ) {nttif ( this.anchor === null ) {nttt/**nttt * Cannot set
selection focus if there are no ranges in selection.nttt *nttt * @error
view-selection-setFocus-no-rangesnttt */ntttthrow new
CKEditorError(ntttt&#39;view-selection-setFocus-no-ranges: Cannot set
selection focus if there are no ranges in
selection.&#39;nttt);ntt}nnttconst newFocus = Position.createAt(
itemOrPosition, offset );nnttif ( newFocus.compareWith( this.focus ) ==
&#39;same&#39; ) {ntttreturn;ntt}nnttconst anchor =
this.anchor;nnttthis._ranges.pop();nnttif ( newFocus.compareWith( anchor )
== &#39;before&#39; ) {ntttthis._addRange( new Range( newFocus, anchor ),
true );ntt} else {ntttthis._addRange( new Range( anchor, newFocus )
);ntt}nnttthis.fire( &#39;change&#39; );nt}nnt/**nt * Replaces all ranges
that were added to the selection with given array of ranges. Last range of
the arraynt * is treated like the last added range and is used to set
{@link anchor anchor} and {@link focus focus}.nt * Accepts a flag
describing in which way the selection is made.nt *nt * @privatent * @param
{Iterable.&lt;module:engine/view/range~Range&gt;} newRanges Iterable object
of ranges to set.nt * @param {Boolean} [isLastBackward=false] Flag
describing if last added range was selected forward - from start to endnt *
(`false`) or backward - from end to start (`true`). Defaults to `false`.nt
*/nt_setRanges( newRanges, isLastBackward = false ) {ntt// New ranges
should be copied to prevent removing them by setting them to `[]`
first.ntt// Only applies to situations when selection is set to the same
selection or same selection&#39;s ranges.nttnewRanges = Array.from(
newRanges );nnttthis._ranges = [];nnttfor ( const range of newRanges )
{ntttthis._addRange( range );ntt}nnttthis._lastRangeBackward =
!!isLastBackward;nt}nnt/**nt * Sets this selection instance to be marked as
`fake`. A fake selection does not render as browser native selectionnt *
over selected elements and is hidden to the user. This way, no native
selection UI artifacts are displayed tont * the user and selection over
elements can be represented in other way, for example by applying proper
CSS class.nt *nt * Additionally fake&#39;s selection label can be provided.
It will be used to describe fake selection in DOM (and bent * properly
handled by screen readers).nt *nt * @privatent * @param {Object} [options]
Options.nt * @param {Boolean} [options.fake] If set to true selection will
be marked as `fake`.nt * @param {String} [options.label=&#39;&#39;] Fake
selection label.nt */nt_setFakeOptions( options = {} ) {nttthis._isFake =
!!options.fake;nttthis._fakeSelectionLabel = options.fake ? options.label
|| &#39;&#39; : &#39;&#39;;nt}nnt/**nt * Adds a range to the selection.
Added range is copied. This means that passed range is not saved in thent *
selection instance and you can safely operate on it.nt *nt * Accepts a flag
describing in which way the selection is made - passed range might be
selected fromnt * {@link module:engine/view/range~Range#start start} to
{@link module:engine/view/range~Range#end end}nt * or from {@link
module:engine/view/range~Range#end end} to {@link
module:engine/view/range~Range#start start}.nt * The flag is used to set
{@link anchor anchor} and {@link focus focus} properties.nt *nt * Throws
{@link module:utils/ckeditorerror~CKEditorError CKEditorError}
`view-selection-range-intersects` if added range intersectsnt * with ranges
already stored in Selection instance.nt *nt * @privatent * @fires changent
* @param {module:engine/view/range~Range} rangent * @param {Boolean}
[isBackward]nt */nt_addRange( range, isBackward = false ) {nttif ( !( range
instanceof Range ) ) {ntttthrow new CKEditorError(
&#39;view-selection-invalid-range: Invalid Range.&#39;
);ntt}nnttthis._pushRange( range );nttthis._lastRangeBackward =
!!isBackward;nt}nnt/**nt * Adds range to selection - creates copy of given
range so it can be safely used and modified.nt *nt * Throws {@link
module:utils/ckeditorerror~CKEditorError CKEditorError}
`view-selection-range-intersects` if added range intersectsnt * with ranges
already stored in selection instance.nt *nt * @privatent * @param
{module:engine/view/range~Range} rangent */nt_pushRange( range ) {nttfor (
const storedRange of this._ranges ) {ntttif ( range.isIntersecting(
storedRange ) ) {ntttt/**ntttt * Trying to add a range that intersects with
another range from selection.ntttt *ntttt * @error
view-selection-range-intersectsntttt * @param
{module:engine/view/range~Range} addedRange Range that was added to the
selection.ntttt * @param {module:engine/view/range~Range} intersectingRange
Range from selection that intersects with `addedRange`.ntttt */nttttthrow
new CKEditorError(nttttt&#39;view-selection-range-intersects: Trying to add
a range that intersects with another range from selection.&#39;,nttttt{
addedRange: range, intersectingRange: storedRange
}ntttt);nttt}ntt}nnttthis._ranges.push( Range.createFromRange( range )
);nt}nnt/**nt * Fired whenever selection ranges are changed through {@link
~Selection Selection API}.nt *nt * @event changent */n}nnmix( Selection,
EmitterMixin );nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/view/selection.jsn// module id = nulln// module
chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module engine/view/attributeelementn */nnimport Element from
&#39;./element&#39;;nimport CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nn// Default
attribute priority.nconst DEFAULT_PRIORITY = 10;nn/**n * Attributes are
elements which define document presentation. They are mostly elements like
“ or `&lt;span&gt;`.n * Attributes can be broken and merged by the {@link
module:engine/view/writer~Writer view writer}.n *n * Editing engine does
not define fixed HTML DTD. This is why the type of the {@link
module:engine/view/element~Element} need ton * be defined by the feature
developer. Creating an element you should use {@link
module:engine/view/containerelement~ContainerElement}n * class or
`AttributeElement`.n *n * @extends module:engine/view/element~Elementn
*/nexport default class AttributeElement extends Element {nt/**nt * Creates
a attribute element.nt *nt * @see
module:engine/view/writer~Writer#createAttributeElementnt * @protectednt *
@see module:engine/view/element~Elementnt */ntconstructor( name, attrs,
children ) {nttsuper( name, attrs, children );nntt/**ntt * Returns block
{@link module:engine/view/filler filler} offset or `null` if block filler
is not needed.ntt *ntt * @method getFillerOffsetntt * @returns
{Number|null} Block filler offset or `null` if block filler is not
needed.ntt */nttthis.getFillerOffset = getFillerOffset;nntt/**ntt * Element
priority. Decides in what order elements are wrapped by {@link
module:engine/view/writer~Writer}.ntt *ntt * @protectedntt * @member
{Number}ntt */nttthis._priority = DEFAULT_PRIORITY;nntt/**ntt * Element
identifier. If set, it is used by {@link
module:engine/view/element~Element#isSimilar},ntt * and then two elements
are considered similar if, and only if they have the same `_id`.ntt *ntt *
@protectedntt * @member {String|Number}ntt */nttthis._id = null;nntt/**ntt
* Keeps all the attribute elements that have the same {@link
module:engine/view/attributeelement~AttributeElement#id ids}ntt * and still
exist in the view tree.ntt *ntt * This property is managed by {@link
module:engine/view/writer~Writer}.ntt *ntt * @protectedntt * @member
{Set|null}ntt */nttthis._clonesGroup = null;nt}nnt/**nt * Element priority.
Decides in what order elements are wrapped by {@link
module:engine/view/writer~Writer}.nt *nt * @readonlynt * @returns
{Number}nt */ntget priority() {nttreturn this._priority;nt}nnt/**nt *
Element identifier. If set, it is used by {@link
module:engine/view/element~Element#isSimilar},nt * and then two elements
are considered similar if, and only if they have the same `id`.nt *nt *
@readonlynt * @returns {String|Number}nt */ntget id() {nttreturn
this._id;nt}nnt/**nt * Returns all {@link
module:engine/view/attributeelement~AttributeElement attribute elements}
that has thent * same {@link
module:engine/view/attributeelement~AttributeElement#id id} and are in the
view tree (were not removed).nt *nt * Note: If this element has been
removed from the tree, returned set will not include it.nt *nt * Throws
{@link module:utils/ckeditorerror~CKEditorError
attribute-element-get-elements-with-same-id-no-id}nt * if this element has
no `id`.nt *nt * @returns
{Set.&lt;module:engine/view/attributeelement~AttributeElement&gt;} Set
containing all the attribute elementsnt * with the same `id` that were
added and not removed from the view tree.nt */ntgetElementsWithSameId()
{nttif ( this.id === null ) {nttt/**nttt * Cannot get elements with the
same id for an attribute element without id.nttt *nttt * @error
attribute-element-get-elements-with-same-id-no-idnttt */ntttthrow new
CKEditorError(ntttt&#39;attribute-element-get-elements-with-same-id-no-id:
&#39; +ntttt&#39;Cannot get elements with the same id for an attribute
element without id.&#39;nttt);ntt}nnttreturn new Set( this._clonesGroup
);nt}nnt/**nt * @inheritDocnt */ntis( type, name = null ) {nttif ( !name )
{ntttreturn type == &#39;attributeElement&#39; || super.is( type );ntt}
else {ntttreturn ( type == &#39;attributeElement&#39; &amp;&amp; name ==
this.name ) || super.is( type, name );ntt}nt}nnt/**nt * Checks if this
element is similar to other element.nt *nt * If none of elements has set
{@link module:engine/view/attributeelement~AttributeElement#id}, then both
elementsnt * should have the same name, attributes and priority to be
considered as similar. Two similar elements can containnt * different set
of children nodes.nt *nt * If at least one element has {@link
module:engine/view/attributeelement~AttributeElement#id} set, then bothnt *
elements have to have the same {@link
module:engine/view/attributeelement~AttributeElement#id} value to bent *
considered similar.nt *nt * Similarity is important for {@link
module:engine/view/writer~Writer}. For example:nt *nt * * two following
similar elements can be merged together into one, longer element,nt * *
{@link module:engine/view/writer~Writer#unwrap} checks similarity of passed
element and processed element tont * decide whether processed element
should be unwrapped,nt * * etc.nt *nt * @param
{module:engine/view/element~Element} otherElementnt * @returns {Boolean}nt
*/ntisSimilar( otherElement ) {ntt// If any element has an `id` set, just
compare the ids.nttif ( this.id !== null || otherElement.id !== null )
{ntttreturn this.id === otherElement.id;ntt}nnttreturn super.isSimilar(
otherElement ) &amp;&amp; this.priority ==
otherElement.priority;nt}nnt/**nt * Clones provided element with
priority.nt *nt * @protectednt * @param {Boolean} deep If set to `true`
clones element and all its children recursively. When set to `false`,nt *
element will be cloned without any children.nt * @returns
{module:engine/view/attributeelement~AttributeElement} Clone of this
element.nt */nt_clone( deep ) {nttconst cloned = super._clone( deep
);nntt// Clone priority too.nttcloned._priority = this._priority;nntt// And
id too.nttcloned._id = this._id;nnttreturn cloned;nt}n}nn/**n * Default
attribute priority.n *n * @member {Number}
module:engine/view/attributeelement~AttributeElement.DEFAULT_PRIORITYn
*/nAttributeElement.DEFAULT_PRIORITY = DEFAULT_PRIORITY;nn// Returns block
{@link module:engine/view/filler~Filler filler} offset or `null` if block
filler is not needed.n//n// @returns {Number|null} Block filler offset or
`null` if block filler is not needed.nfunction getFillerOffset() {nt// foo
does not need filler.ntif ( nonUiChildrenCount( this ) ) {nttreturn
null;nt}nntlet element = this.parent;nnt// &lt;p&gt;&lt;/p&gt; needs filler
-&gt; &lt;p&gt;<br>&lt;/p&gt;ntwhile ( element &amp;&amp; element.is(
&#39;attributeElement&#39; ) ) {nttif ( nonUiChildrenCount( element ) &gt;
1 ) {ntttreturn null;ntt}nnttelement = element.parent;nt}nntif ( !element
|| nonUiChildrenCount( element ) &gt; 1 ) {nttreturn null;nt}nnt// Render
block filler at the end of element (after all ui elements).ntreturn
this.childCount;n}nn// Returns total count of children that are not {@link
module:engine/view/uielement~UIElement UIElements}.n//n// @param
{module:engine/view/element~Element} elementn// @return {Number}nfunction
nonUiChildrenCount( element ) {ntreturn Array.from( element.getChildren()
).filter( element =&gt; !element.is( &#39;uiElement&#39; )
).length;n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/view/attributeelement.jsn// module id = nulln//
module chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module engine/view/emptyelementn */nnimport Element from
&#39;./element&#39;;nimport CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nimport Node from
&#39;./node&#39;;nn/**n * EmptyElement class. It is used to represent
elements that cannot contain any child nodes.n */nexport default class
EmptyElement extends Element {nt/**nt * Creates new instance of
EmptyElement.nt *nt * Throws {@link
module:utils/ckeditorerror~CKEditorError CKEditorError}
`view-emptyelement-cannot-add` when third parameter is passed,nt * to
inform that usage of EmptyElement is incorrect (adding child nodes to
EmptyElement is forbidden).nt *nt * @see
module:engine/view/writer~Writer#createEmptyElementnt * @protectednt *
@param {String} name Node name.nt * @param {Object|Iterable} [attributes]
Collection of attributes.nt */ntconstructor( name, attributes, children )
{nttsuper( name, attributes, children );nntt/**ntt * Returns `null` because
filler is not needed for EmptyElements.ntt *ntt * @method
getFillerOffsetntt * @returns {null} Always returns null.ntt
*/nttthis.getFillerOffset = getFillerOffset;nt}nnt/**nt * @inheritDocnt
*/ntis( type, name = null ) {nttif ( !name ) {ntttreturn type ==
&#39;emptyElement&#39; || super.is( type );ntt} else {ntttreturn ( type ==
&#39;emptyElement&#39; &amp;&amp; name == this.name ) || super.is( type,
name );ntt}nt}nnt/**nt * Overrides {@link
module:engine/view/element~Element#_insertChild} method.nt * Throws {@link
module:utils/ckeditorerror~CKEditorError CKEditorError}
`view-emptyelement-cannot-add` to preventnt * adding any child nodes to
EmptyElement.nt *nt * @protectednt */nt_insertChild( index, nodes ) {nttif
( nodes &amp;&amp; ( nodes instanceof Node || Array.from( nodes ).length
&gt; 0 ) ) {nttt/**nttt * Cannot add children to {@link
module:engine/view/emptyelement~EmptyElement}.nttt *nttt * @error
view-emptyelement-cannot-addnttt */ntttthrow new CKEditorError(
&#39;view-emptyelement-cannot-add: Cannot add child nodes to EmptyElement
instance.&#39; );ntt}nt}n}nn// Returns `null` because block filler is not
needed for EmptyElements.n//n// @returns {null}nfunction getFillerOffset()
{ntreturn null;n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/view/emptyelement.jsn// module id = nulln// module
chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/*
globals navigator:false */nn/**n * @module utils/envn */nnconst userAgent =
navigator.userAgent.toLowerCase();nn/**n * A namespace containing
environment and browser information.n *n * @namespacen */nconst env =
{nt/**nt * Indicates that application is running on Macintosh.nt *nt *
@staticnt * @member {Boolean} module:utils/env~env#isMacnt */ntisMac:
isMac( userAgent )n};nnexport default env;nn/**n * Checks if <a
href="../../../../User.html">User</a> <a
href="../../../../Agent.html">Agent</a> represented by the string is
running on Macintosh.n *n * @param {String} userAgent *Lowercase*
`navigator.userAgent` string.n * @returns {Boolean} Whether <a
href="../../../../User.html">User</a> <a
href="../../../../Agent.html">Agent</a> is running on Macintosh or not.n
*/nexport function isMac( userAgent ) {ntreturn userAgent.indexOf(
&#39;macintosh&#39; ) &gt; -1;n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/env.jsn// module id = nulln// module chunks =
”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben. All
rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * Set of utils
related to keyboard support.n *n * @module utils/keyboardn */nnimport
CKEditorError from &#39;./ckeditorerror&#39;;nimport env from
&#39;./env&#39;;nnconst macGlyphsToModifiers = {nt&#39;⌘&#39;:
&#39;ctrl&#39;,nt&#39;⇧&#39;: &#39;shift&#39;,nt&#39;⌥&#39;:
&#39;alt&#39;n};nnconst modifiersToMacGlyphs = {nt&#39;ctrl&#39;:
&#39;⌘&#39;,nt&#39;shift&#39;: &#39;⇧&#39;,nt&#39;alt&#39;:
&#39;⌥&#39;n};nn/**n * <a href="../../../../Object.html">Object</a> with
`keyName =&gt; keyCode` pairs for a set of known keys.n *n * Contains:n *n
* * `a-z`,n * * `0-9`,n * * `f1-f12`,n * * `arrow(left|up|right|bottom)`,n
* * `backspace`, `delete`, `enter`, `esc`, `tab`,n * * `ctrl`, `cmd`,
`shift`, `alt`.n */nexport const keyCodes = generateKnownKeyCodes();nn/**n
* Converts a key name or a {@link module:utils/keyboard~KeystrokeInfo
keystroke info} into a key code.n *n * Note: Key names are matched with
{@link module:utils/keyboard~keyCodes} in a case-insensitive way.n *n *
@param {String|module:utils/keyboard~KeystrokeInfo} Key name (see {@link
module:utils/keyboard~keyCodes})n * or a keystroke data object.n * @returns
{Number} Key or keystroke code.n */nexport function getCode( key ) {ntlet
keyCode;nntif ( typeof key == &#39;string&#39; ) {nttkeyCode = keyCodes[
key.toLowerCase() ];nnttif ( !keyCode ) {nttt/**nttt * Unknown key name.
Only key names contained by the {@link module:utils/keyboard~keyCodes} can
be used.nttt *nttt * @errror keyboard-unknown-keynttt * @param {String}
keynttt */ntttthrow new CKEditorError( &#39;keyboard-unknown-key: Unknown
key name.&#39;, { key } );ntt}nt} else {nttkeyCode = key.keyCode +nttt(
key.altKey ? keyCodes.alt : 0 ) +nttt( key.ctrlKey ? keyCodes.ctrl : 0 )
+nttt( key.shiftKey ? keyCodes.shift : 0 );nt}nntreturn keyCode;n}nn/**n *
Parses keystroke and returns a keystroke code that will match the code
returned byn * link {@link module:utils/keyboard.getCode} for a
corresponding {@link module:utils/keyboard~KeystrokeInfo keystroke info}.n
*n * The keystroke can be passed in two formats:n *n * * as a single string
– e.g. `ctrl + A`,n * * as an array of {@link
module:utils/keyboard~keyCodes known key names} and key codes – e.g.:n *  
* `[ &#39;ctrl&#39;, 32 ]` (ctrl + space),n *   * `[ &#39;ctrl&#39;,
&#39;a&#39; ]` (ctrl + A).n *n * Note: Key names are matched with {@link
module:utils/keyboard~keyCodes} in a case-insensitive way.n *n * Note: Only
keystrokes with a single non-modifier key are supported (e.g. `ctrl+A` is
OK, but `ctrl+A+B` is not).n *n * @param
{String|Array.&lt;Number|String&gt;} keystroke Keystroke definition.n *
@returns {Number} Keystroke code.n */nexport function parseKeystroke(
keystroke ) {ntif ( typeof keystroke == &#39;string&#39; ) {nttkeystroke =
splitKeystrokeText( keystroke );nt}nntreturn keystrokentt.map( key =&gt; (
typeof key == &#39;string&#39; ) ? getCode( key ) : key )ntt.reduce( ( key,
sum ) =&gt; sum + key, 0 );n}nn/**n * It translates any keystroke string
text like `&quot;CTRL+A&quot;` to ann * environment–specific keystroke,
i.e. `&quot;⌘A&quot;` on Mac OSX.n *n * @param {String} keystroke Keystroke
text.n * @returns {String} Keystroke text specific for the environment.n
*/nexport function getEnvKeystrokeText( keystroke ) {ntif ( !env.isMac )
{nttreturn keystroke;nt}nntreturn splitKeystrokeText( keystroke )ntt//
Replace modifiers (e.g. "ctrl&quot;) with Mac glyphs (e.g. "⌘&quot;)
first.ntt.map( key =&gt; modifiersToMacGlyphs[ key.toLowerCase() ] || key
)nntt// Decide whether to put "+&quot; between keys in the keystroke or
not.ntt.reduce( ( value, key ) =&gt; {ntttif ( value.slice( -1 ) in
macGlyphsToModifiers ) {nttttreturn value + key;nttt} else {nttttreturn
value + &#39;+&#39; + key;nttt}ntt} );n}nnfunction generateKnownKeyCodes()
{ntconst keyCodes = {nttarrowleft: 37,nttarrowup: 38,nttarrowright:
39,nttarrowdown: 40,nttbackspace: 8,nttdelete: 46,nttenter: 13,nttspace:
32,nttesc: 27,ntttab: 9,nntt// The idea about these numbers is that they do
not collide with any real key codes, so we can use themntt// like bit
masks.nttctrl: 0x110000,ntt// Has the same code as ctrl, because their
behaviour should be unified across the editor.ntt// See <a
href="http://ckeditor.github.io/editor-recommendations/general-policies#ctrl-vs-cmd\n\t\tcmd">ckeditor.github.io/editor-recommendations/general-policies#ctrl-vs-cmdnttcmd</a>:
0x110000,nttshift: 0x220000,nttalt: 0x440000nt};nnt// a-zntfor ( let code =
65; code &lt;= 90; code++ ) {nttconst letter = String.fromCharCode( code
);nnttkeyCodes[ letter.toLowerCase() ] = code;nt}nnt// 0-9ntfor ( let code
= 48; code &lt;= 57; code++ ) {nttkeyCodes[ code - 48 ] = code;nt}nnt//
F1-F12ntfor ( let code = 112; code &lt;= 123; code++ ) {nttkeyCodes[
&#39;f&#39; + ( code - 111 ) ] = code;nt}nntreturn keyCodes;n}nnfunction
splitKeystrokeText( keystroke ) {ntreturn keystroke.split( /\s*+\s*/
);n}nn/**n * Information about a keystroke.n *n * @interface
module:utils/keyboard~KeystrokeInfon */nn/**n * The [key code](<a
href="https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/keyCode).\n">developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/keyCode).n</a>
*n * @member {Number} module:utils/keyboard~KeystrokeInfo#keyCoden */nn/**n
* Whether the &lt;kbd&gt;Alt&lt;/kbd&gt; modifier was pressed.n *n *
@member {Bolean} module:utils/keyboard~KeystrokeInfo#altKeyn */nn/**n *
Whether the &lt;kbd&gt;Ctrl&lt;/kbd&gt; or &lt;kbd&gt;Cmd&lt;/kbd&gt;
modifier was pressed.n *n * @member {Bolean}
module:utils/keyboard~KeystrokeInfo#ctrlKeyn */nn/**n * Whether the
&lt;kbd&gt;Shift&lt;/kbd&gt; modifier was pressed.n *n * @member {Bolean}
module:utils/keyboard~KeystrokeInfo#shiftKeyn */nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-utils/src/keyboard.jsn// module id = nulln//
module chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module engine/view/uielementn */nnimport Element from
&#39;./element&#39;;nimport CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nimport Node from
&#39;./node&#39;;nimport { keyCodes } from
&#39;@ckeditor/ckeditor5-utils/src/keyboard&#39;;nn/**n * UIElement class.
It is used to represent UI not a content of the document.n * This element
can&#39;t be split and selection can&#39;t be placed inside this element.n
*/nexport default class UIElement extends Element {nt/**nt * Creates new
instance of UIElement.nt *nt * Throws {@link
module:utils/ckeditorerror~CKEditorError CKEditorError}
`view-uielement-cannot-add` when third parameter is passed,nt * to inform
that usage of UIElement is incorrect (adding child nodes to UIElement is
forbidden).nt *nt * @see module:engine/view/writer~Writer#createUIElementnt
* @protectednt * @param {String} name Node name.nt * @param
{Object|Iterable} [attributes] Collection of attributes.nt */ntconstructor(
name, attributes, children ) {nttsuper( name, attributes, children
);nntt/**ntt * Returns `null` because filler is not needed for
UIElements.ntt *ntt * @method getFillerOffsetntt * @returns {null} Always
returns null.ntt */nttthis.getFillerOffset = getFillerOffset;nt}nnt/**nt *
@inheritDocnt */ntis( type, name = null ) {nttif ( !name ) {ntttreturn type
== &#39;uiElement&#39; || super.is( type );ntt} else {ntttreturn ( type ==
&#39;uiElement&#39; &amp;&amp; name == this.name ) || super.is( type, name
);ntt}nt}nnt/**nt * Overrides {@link
module:engine/view/element~Element#_insertChild} method.nt * Throws {@link
module:utils/ckeditorerror~CKEditorError CKEditorError}
`view-uielement-cannot-add` to prevent adding any child nodesnt * to
UIElement.nt */nt_insertChild( index, nodes ) {nttif ( nodes &amp;&amp; (
nodes instanceof Node || Array.from( nodes ).length &gt; 0 ) ) {nttt/**nttt
* Cannot add children to {@link
module:engine/view/uielement~UIElement}.nttt *nttt * @error
view-uielement-cannot-addnttt */ntttthrow new CKEditorError(
&#39;view-uielement-cannot-add: Cannot add child nodes to UIElement
instance.&#39; );ntt}nt}nnt/**nt * Renders this {@link
module:engine/view/uielement~UIElement} to DOM. This method is called bynt
* {@link module:engine/view/domconverter~DomConverter}.nt * Do not use
inheritance to create custom rendering method, replace `render()` method
instead:nt *nt *ttconst myUIElement = new UIElement( &#39;span&#39; );nt
*ttmyUIElement.render = function( domDocument ) {nt *tttconst domElement =
this.toDomElement( domDocument );nt *tttdomElement.innerHTML = &#39;this is
ui element&#39;;nt *nt *tttreturn domElement;nt *tt};nt *nt * @param
{Document} domDocumentnt * @return {HTMLElement}nt */ntrender( domDocument
) {nttreturn this.toDomElement( domDocument );nt}nnt/**nt * Creates DOM
element based on this view UIElement.nt * Note that each time this method
is called new DOM element is created.nt *nt * @param {Document}
domDocumentnt * @returns {HTMLElement}nt */nttoDomElement( domDocument )
{nttconst domElement = domDocument.createElement( this.name );nnttfor (
const key of this.getAttributeKeys() ) {ntttdomElement.setAttribute( key,
this.getAttribute( key ) );ntt}nnttreturn domElement;nt}n}nn/**n * This
function injects UI element handling to the given {@link
module:engine/view/document~Document document}.n *n * A callback is added
to {@link module:engine/view/document~Document#event:keydown document
keydown event}.n * The callback handles the situation when right arrow key
is pressed and selection is collapsed before a UI element.n * Without this
handler, it would be impossible to "jump over&quot; UI element using right
arrow key.n *n * @param {module:engine/view/view~View} view View controller
to which the quirks handling will be injected.n */nexport function
injectUiElementHandling( view ) {ntview.document.on( &#39;keydown&#39;, (
evt, data ) =&gt; jumpOverUiElement( evt, data, view.domConverter )
);n}nn// Returns `null` because block filler is not needed for
UIElements.n//n// @returns {null}nfunction getFillerOffset() {ntreturn
null;n}nn// Selection cannot be placed in a `UIElement`. Whenever it is
placed there, it is moved before it. Thisn// causes a situation when it is
impossible to jump over `UIElement` using right arrow key, because the
selectionn// ends up in ui element (in DOM) and is moved back to the left.
This handler fixes this situation.nfunction jumpOverUiElement( evt, data,
domConverter ) {ntif ( data.keyCode == keyCodes.arrowright ) {nttconst
domSelection =
data.domTarget.ownerDocument.defaultView.getSelection();nttconst
domSelectionCollapsed = domSelection.rangeCount == 1 &amp;&amp;
domSelection.getRangeAt( 0 ).collapsed;nntt// Jump over UI element if
selection is collapsed or shift key is pressed. These are the cases when
selection would extend.nttif ( domSelectionCollapsed || data.shiftKey )
{ntttconst domParent = domSelection.focusNode;ntttconst domOffset =
domSelection.focusOffset;nntttconst viewPosition =
domConverter.domPositionToView( domParent, domOffset );nnttt// In case if
dom element is not converted to view or is not mapped or something. Happens
for example in some tests.ntttif ( viewPosition === null )
{nttttreturn;nttt}nnttt// Skip all following ui elements.ntttlet
jumpedOverAnyUiElement = false;nntttconst nextViewPosition =
viewPosition.getLastMatchingPosition( value =&gt; {nttttif ( value.item.is(
&#39;uiElement&#39; ) ) {nttttt// Remember that there was at least one ui
element.ntttttjumpedOverAnyUiElement = true;ntttt}nntttt// Jump over ui
elements, jump over empty attribute elements, move up from inside of
attribute element.nttttif ( value.item.is( &#39;uiElement&#39; ) ||
value.item.is( &#39;attributeElement&#39; ) ) {ntttttreturn
true;ntttt}nntttt// Don&#39;t jump over text or don&#39;t get out of
container element.nttttreturn false;nttt} );nnttt// If anything has been
skipped, fix position.nttt// This `if` could be possibly omitted but maybe
it is better not to mess with DOM selection if not needed.ntttif (
jumpedOverAnyUiElement ) {nttttconst newDomPosition =
domConverter.viewPositionToDom( nextViewPosition );nnttttif (
domSelectionCollapsed ) {nttttt// Selection was collapsed, so collapse it
at further position.ntttttdomSelection.collapse( newDomPosition.parent,
newDomPosition.offset );ntttt} else {nttttt// Selection was not collapse,
so extend it instead of collapsing.ntttttdomSelection.extend(
newDomPosition.parent, newDomPosition.offset
);ntttt}nttt}ntt}nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/view/uielement.jsn// module id = nulln// module
chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module engine/view/documentfragmentn */nnimport Text from
&#39;./text&#39;;nimport TextProxy from &#39;./textproxy&#39;;nimport mix
from &#39;@ckeditor/ckeditor5-utils/src/mix&#39;;nimport isIterable from
&#39;@ckeditor/ckeditor5-utils/src/isiterable&#39;;nimport EmitterMixin
from &#39;@ckeditor/ckeditor5-utils/src/emittermixin&#39;;nn/**n *
DocumentFragment class.n */nexport default class DocumentFragment {nt/**nt
* Creates new DocumentFragment instance.nt *nt * @protectednt * @param
{module:engine/view/node~Node|Iterable.&lt;module:engine/view/node~Node&gt;}
[children] List of nodes to be inserted intont * created document
fragment.nt */ntconstructor( children ) {ntt/**ntt * Array of child
nodes.ntt *ntt * @protectedntt * @member
{Array.&lt;module:engine/view/element~Element&gt;}
module:engine/view/documentfragment~DocumentFragment#_childrenntt
*/nttthis._children = [];nnttif ( children ) {ntttthis._insertChild( 0,
children );ntt}nt}nnt/**nt * Iterable interface.nt *nt * Iterates over
nodes added to this document fragment.nt *nt * @returns
{Iterable.&lt;module:engine/view/node~Node&gt;}nt */nt[ Symbol.iterator ]()
{nttreturn this._children[ Symbol.iterator ]();nt}nnt/**nt * Number of
child nodes in this document fragment.nt *nt * @readonlynt * @type
{Number}nt */ntget childCount() {nttreturn
this._children.length;nt}nnt/**nt * Is `true` if there are no nodes inside
this document fragment, `false` otherwise.nt *nt * @readonlynt * @type
{Boolean}nt */ntget isEmpty() {nttreturn this.childCount === 0;nt}nnt/**nt
* Artificial root of `DocumentFragment`. Returns itself. Added for
compatibility reasons.nt *nt * @readonlynt * @type
{module:engine/model/documentfragment~DocumentFragment}nt */ntget root()
{nttreturn this;nt}nnt/**nt * Artificial parent of `DocumentFragment`.
Returns `null`. Added for compatibility reasons.nt *nt * @readonlynt *
@type {null}nt */ntget parent() {nttreturn null;nt}nnt/**nt * Checks
whether given view tree object is of given type.nt *nt * Read more in
{@link module:engine/view/node~Node#is}.nt *nt * @param {String} typent *
@returns {Boolean}nt */ntis( type ) {nttreturn type ==
&#39;documentFragment&#39;;nt}nnt/**nt * {@link
module:engine/view/documentfragment~DocumentFragment#_insertChild Insert} a
child node or a list of child nodes at the endnt * and sets the parent of
these nodes to this fragment.nt *nt * @param
{module:engine/view/item~Item|Iterable.&lt;module:engine/view/item~Item&gt;}
items Items to be inserted.nt * @returns {Number} Number of appended
nodes.nt */nt_appendChild( items ) {nttreturn this._insertChild(
this.childCount, items );nt}nnt/**nt * Gets child at the given index.nt *nt
* @param {Number} index Index of child.nt * @returns
{module:engine/view/node~Node} Child node.nt */ntgetChild( index )
{nttreturn this._children[ index ];nt}nnt/**nt * Gets index of the given
child node. Returns `-1` if child node is not found.nt *nt * @param
{module:engine/view/node~Node} node Child node.nt * @returns {Number} Index
of the child node.nt */ntgetChildIndex( node ) {nttreturn
this._children.indexOf( node );nt}nnt/**nt * Gets child nodes iterator.nt
*nt * @returns {Iterable.&lt;module:engine/view/node~Node&gt;} Child nodes
iterator.nt */ntgetChildren() {nttreturn this._children[ Symbol.iterator
]();nt}nnt/**nt * Inserts a child node or a list of child nodes on the
given index and sets the parent of these nodes tont * this fragment.nt *nt
* @param {Number} index Position where nodes should be inserted.nt * @param
{module:engine/view/item~Item|Iterable.&lt;module:engine/view/item~Item&gt;}
items Items to be inserted.nt * @returns {Number} Number of inserted
nodes.nt */nt_insertChild( index, items ) {nttthis._fireChange(
&#39;children&#39;, this );nttlet count = 0;nnttconst nodes = normalize(
items );nnttfor ( const node of nodes ) {nttt// If node that is being added
to this element is already inside another element, first remove it from the
old parent.ntttif ( node.parent !== null )
{nttttnode._remove();nttt}nntttnode.parent =
this;nntttthis._children.splice( index, 0, node
);ntttindex++;ntttcount++;ntt}nnttreturn count;nt}nnt/**nt * Removes number
of child nodes starting at the given index and set the parent of these
nodes to `null`.nt *nt * @param {Number} index Number of the first node to
remove.nt * @param {Number} [howMany=1] Number of nodes to remove.nt *
@returns {Array.&lt;module:engine/view/node~Node&gt;} The array of removed
nodes.nt */nt_removeChildren( index, howMany = 1 ) {nttthis._fireChange(
&#39;children&#39;, this );nnttfor ( let i = index; i &lt; index + howMany;
i++ ) {ntttthis._children[ i ].parent = null;ntt}nnttreturn
this._children.splice( index, howMany );nt}nnt/**nt * Fires `change` event
with given type of the change.nt *nt * @privatent * @param
{module:engine/view/document~ChangeType} type Type of the change.nt *
@param {module:engine/view/node~Node} node Changed node.nt * @fires
module:engine/view/node~Node#changent */nt_fireChange( type, node )
{nttthis.fire( &#39;change:&#39; + type, node );nt}n}nnmix(
DocumentFragment, EmitterMixin );nn// Converts strings to Text and
non-iterables to arrays.n//n// @param
{String|module:engine/view/item~Item|Iterable.&lt;String|module:engine/view/item~Item&gt;}n//
@return {Iterable.&lt;module:engine/view/node~Node&gt;}nfunction normalize(
nodes ) {nt// Separate condition because string is iterable.ntif ( typeof
nodes == &#39;string&#39; ) {nttreturn [ new Text( nodes ) ];nt}nntif (
!isIterable( nodes ) ) {nttnodes = [ nodes ];nt}nnt// Array.from to enable
.map() on non-arrays.ntreturn Array.from( nodes )ntt.map( node =&gt;
{ntttif ( typeof node == &#39;string&#39; ) {nttttreturn new Text( node
);nttt}nntttif ( node instanceof TextProxy ) {nttttreturn new Text(
node.data );nttt}nntttreturn node;ntt} );n}nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-engine/src/view/documentfragment.jsn//
module id = nulln// module chunks = ”,“/**n * @license Copyright ©
2003-2018, CKSource - Frederico Knabben. All rights reserved.n * For
licensing, see LICENSE.md.n */nn/**n * @module module:engine/view/writern
*/nnimport Position from &#39;./position&#39;;nimport ContainerElement from
&#39;./containerelement&#39;;nimport AttributeElement from
&#39;./attributeelement&#39;;nimport EmptyElement from
&#39;./emptyelement&#39;;nimport UIElement from
&#39;./uielement&#39;;nimport Range from &#39;./range&#39;;nimport
CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nimport
DocumentFragment from &#39;./documentfragment&#39;;nimport isIterable from
&#39;@ckeditor/ckeditor5-utils/src/isiterable&#39;;nimport isPlainObject
from
&#39;@ckeditor/ckeditor5-utils/src/lib/lodash/isPlainObject&#39;;nimport
Text from &#39;./text&#39;;nimport EditableElement from
&#39;./editableelement&#39;;nn/**n * View writer class. Provides set of
methods used to properly manipulate nodes attached ton * {@link
module:engine/view/document~Document view document}. It is not recommended
to use it directly. To get an instancen * of view writer associated with
the document use {@link module:engine/view/view~View#change view.change())
method.n */nexport default class Writer {ntconstructor( document )
{ntt/**ntt * @readonlyntt * @type {module:engine/view/document~Document}ntt
*/nttthis.document = document;nntt/**ntt * Holds references to the
attribute groups that share the same {@link
module:engine/view/attributeelement~AttributeElement#id id}.ntt * The keys
are `id`s, the values are `Set`s holding {@link
module:engine/view/attributeelement~AttributeElement}s.ntt *ntt *
@privatentt * @type {Map}ntt */nttthis._cloneGroups = new Map();nt}nnt/**nt
* Sets {@link module:engine/view/documentselection~DocumentSelection
selection&#39;s} ranges and direction to thent * specified location based
on the given {@link module:engine/view/documentselection~DocumentSelection
document selection},nt * {@link module:engine/view/selection~Selection
selection}, {@link module:engine/view/position~Position position},nt *
{@link module:engine/view/item~Item item}, {@link
module:engine/view/range~Range range},nt * an iterable of {@link
module:engine/view/range~Range ranges} or null.nt *nt * ### Usage:nt *nt
*tt// Sets selection to the given range.nt *ttconst range = new Range(
start, end );nt *ttwriter.setSelection( range );nt *nt *tt// Sets backward
selection to the given range.nt *ttconst range = new Range( start, end );nt
*ttwriter.setSelection( range );nt *nt *tt// Sets selection to given
ranges.nt * ttconst ranges = [ new Range( start1, end2 ), new Range( star2,
end2 ) ];nt *ttwriter.setSelection( range );nt *nt *tt// Sets selection to
the other selection.nt *ttconst otherSelection = new Selection();nt
*ttwriter.setSelection( otherSelection );nt *nt * tt// Sets collapsed
selection at the given position.nt *ttconst position = new Position( root,
path );nt *ttwriter.setSelection( position );nt *nt * tt// Sets collapsed
selection at the position of given item and offset.nt *ttconst paragraph =
writer.createContainerElement( &#39;paragraph&#39; );nt
*ttwriter.setSelection( paragraph, offset );nt *nt * Creates a range inside
an {@link module:engine/view/element~Element element} which starts before
the first child ofn t * that element and ends after the last child of that
element.nt *nt * ttwriter.setSelection( paragraph, &#39;in&#39; );nt *nt *
Creates a range on the {@link module:engine/view/item~Item item} which
starts before the item and ends just after the item.nt *nt
*ttwriter.setSelection( paragraph, &#39;on&#39; );nt *nt * tt// Removes all
ranges.nt *ttwriter.setSelection( null );nt *nt * `Writer#setSelection()`
allow passing additional options (`backward`, `fake` and `label`) as the
last argument.nt *nt *tt// Sets selection as backward.nt
*ttwriter.setSelection( range, { backward: true } );nt *nt *tt// Sets
selection as fake.nt *tt// Fake selection does not render as browser native
selection over selected elements and is hidden to the user.nt * tt// This
way, no native selection UI artifacts are displayed to the user and
selection over elements can bent * tt// represented in other way, for
example by applying proper CSS class.nt *ttwriter.setSelection( range, {
fake: true } );nt *nt * tt// Additionally fake&#39;s selection label can be
provided. It will be used to describe fake selection in DOMnt * tt// (and
be  properly handled by screen readers).nt *ttwriter.setSelection( range, {
fake: true, label: &#39;foo&#39; } );nt *nt * @param
{module:engine/view/selection~Selection|module:engine/view/position~Position|nt
*
Iterable.&lt;module:engine/view/range~Range&gt;|module:engine/view/range~Range|module:engine/view/item~Item|null}
selectablent * @param
{Number|&#39;before&#39;|&#39;end&#39;|&#39;after&#39;|&#39;on&#39;|&#39;in&#39;}
[placeOrOffset] Sets place or offset of the selection.nt * @param {Object}
[options]nt * @param {Boolean} [options.backward] Sets this selection
instance to be backward.nt * @param {Boolean} [options.fake] Sets this
selection instance to be marked as `fake`.nt * @param {String}
[options.label] Label for the fake selection.nt */ntsetSelection(
selectable, placeOrOffset, options ) {nttthis.document.selection._setTo(
selectable, placeOrOffset, options );nt}nnt/**nt * Moves {@link
module:engine/view/documentselection~DocumentSelection#focus
selection&#39;s focus} to the specified location.nt *nt * The location can
be specified in the same form as {@link
module:engine/view/position~Position.createAt} parameters.nt *nt * @param
{module:engine/view/item~Item|module:engine/view/position~Position}
itemOrPositionnt * @param
{Number|&#39;end&#39;|&#39;before&#39;|&#39;after&#39;} [offset=0] Offset
or one of the flags. Used only whennt * first parameter is a {@link
module:engine/view/item~Item view item}.nt */ntsetSelectionFocus(
itemOrPosition, offset ) {nttthis.document.selection._setFocus(
itemOrPosition, offset );nt}nnt/**nt * Creates a new {@link
module:engine/view/text~Text text node}.nt *nt *ttwriter.createText(
&#39;foo&#39; );nt *nt * @param {String} data Text data.nt * @returns
{module:engine/view/text~Text} Created text node.nt */ntcreateText( data )
{nttreturn new Text( data );nt}nnt/**nt * Creates new {@link
module:engine/view/attributeelement~AttributeElement}.nt *nt
*ttwriter.createAttributeElement( &#39;strong&#39; );nt
*ttwriter.createAttributeElement( &#39;strong&#39;, { &#39;alignment&#39;:
&#39;center&#39; } );nt *nt *tt// Make `&lt;a&gt;` element contain other
attributes element so the `&lt;a&gt;` element is not broken.nt
*ttwriter.createAttributeElement( &#39;a&#39;, { href: &#39;foo.bar&#39; },
{ priority: 5 } );nt *nt *tt// Set `id` of a marker element so it is not
joined or merged with "normal&quot; elements.nt
*ttwriter.createAttributeElement( &#39;span&#39;, { class:
&#39;myMarker&#39; }, { id: &#39;marker:my&#39; } );nt *nt * @param
{String} name Name of the element.nt * @param {Object} [attributes]
Element&#39;s attributes.nt * @param {Object} [options] Element&#39;s
options.nt * @param {Number} [options.priority] Element&#39;s {@link
module:engine/view/attributeelement~AttributeElement#priority priority}.nt
* @param {Number|String} [options.id] Element&#39;s {@link
module:engine/view/attributeelement~AttributeElement#id id}.nt * @returns
{module:engine/view/attributeelement~AttributeElement} Created element.nt
*/ntcreateAttributeElement( name, attributes, options = {} ) {nttconst
attributeElement = new AttributeElement( name, attributes );nnttif (
options.priority ) {ntttattributeElement._priority =
options.priority;ntt}nnttif ( options.id ) {ntttattributeElement._id =
options.id;ntt}nnttreturn attributeElement;nt}nnt/**nt * Creates new {@link
module:engine/view/containerelement~ContainerElement}.nt *nt
*ttwriter.createContainerElement( &#39;paragraph&#39; );nt
*ttwriter.createContainerElement( &#39;paragraph&#39;, {
&#39;alignment&#39;: &#39;center&#39; } );nt *nt * @param {String} name
Name of the element.nt * @param {Object} [attributes] Elements
attributes.nt * @returns
{module:engine/view/containerelement~ContainerElement} Created element.nt
*/ntcreateContainerElement( name, attributes ) {nttreturn new
ContainerElement( name, attributes );nt}nnt/**nt * Creates new {@link
module:engine/view/editableelement~EditableElement}.nt *nt
*ttwriter.createEditableElement( &#39;div&#39; );nt
*ttwriter.createEditableElement( &#39;div&#39;, { &#39;alignment&#39;:
&#39;center&#39; } );nt *nt * @param {String} name Name of the element.nt *
@param {Object} [attributes] Elements attributes.nt * @returns
{module:engine/view/editableelement~EditableElement} Created element.nt
*/ntcreateEditableElement( name, attributes ) {nttconst editableElement =
new EditableElement( name, attributes );ntteditableElement._document =
this.document;nnttreturn editableElement;nt}nnt/**nt * Creates new {@link
module:engine/view/emptyelement~EmptyElement}.nt *nt
*ttwriter.createEmptyElement( &#39;img&#39; );nt
*ttwriter.createEmptyElement( &#39;img&#39;, { &#39;alignment&#39;:
&#39;center&#39; } );nt *nt * @param {String} name Name of the element.nt *
@param {Object} [attributes] Elements attributes.nt * @returns
{module:engine/view/emptyelement~EmptyElement} Created element.nt
*/ntcreateEmptyElement( name, attributes ) {nttreturn new EmptyElement(
name, attributes );nt}nnt/**nt * Creates new {@link
module:engine/view/uielement~UIElement}.nt *nt *ttwriter.createUIElement(
&#39;span&#39; );nt *ttwriter.createUIElement( &#39;span&#39;, {
&#39;alignment&#39;: &#39;center&#39; } );nt *nt * Custom render function
can be provided as third parameter:nt *nt *ttwriter.createUIElement(
&#39;span&#39;, null, function( domDocument ) {nt *tttconst domElement =
this.toDomElement( domDocument );nt *tttdomElement.innerHTML = &#39;this is
ui element&#39;;nt *nt *tttreturn domElement;nt *tt} );nt *nt * @param
{String} name Name of the element.nt * @param {Object} [attributes]
Elements attributes.nt * @param {Function} [renderFunction] Custom render
function.nt * @returns {module:engine/view/uielement~UIElement} Created
element.nt */ntcreateUIElement( name, attributes, renderFunction )
{nttconst uiElement = new UIElement( name, attributes );nnttif (
renderFunction ) {ntttuiElement.render = renderFunction;ntt}nnttreturn
uiElement;nt}nnt/**nt * Adds or overwrite element&#39;s attribute with a
specified key and value.nt *nt *ttwriter.setAttribute( &#39;href&#39;,
&#39;<a href="http://ckeditor.com">ckeditor.com</a>&#39;, linkElement );nt
*nt * @param {String} key Attribute key.nt * @param {String} value
Attribute value.nt * @param {module:engine/view/element~Element} elementnt
*/ntsetAttribute( key, value, element ) {nttelement._setAttribute( key,
value );nt}nnt/**nt * Removes attribute from the element.nt *nt
*ttwriter.removeAttribute( &#39;href&#39;, linkElement );nt *nt * @param
{String} key Attribute key.nt * @param {module:engine/view/element~Element}
elementnt */ntremoveAttribute( key, element ) {nttelement._removeAttribute(
key );nt}nnt/**nt * Adds specified class to the element.nt *nt
*ttwriter.addClass( &#39;foo&#39;, linkElement );nt *ttwriter.addClass( [
&#39;foo&#39;, &#39;bar&#39; ], linkElement );nt *nt * @param
{Array.&lt;String&gt;|String} classNament * @param
{module:engine/view/element~Element} elementnt */ntaddClass( className,
element ) {nttelement._addClass( className );nt}nnt/**nt * Removes
specified class from the element.nt *nt *ttwriter.removeClass(
&#39;foo&#39;, linkElement );nt *ttwriter.removeClass( [ &#39;foo&#39;,
&#39;bar&#39; ], linkElement );nt *nt * @param
{Array.&lt;String&gt;|String} classNament * @param
{module:engine/view/element~Element} elementnt */ntremoveClass( className,
element ) {nttelement._removeClass( className );nt}nnt/**nt * Adds style to
the element.nt *nt *ttwriter.setStyle( &#39;color&#39;, &#39;red&#39;,
element );nt *ttwriter.setStyle( {nt *tttcolor: &#39;red&#39;,nt
*tttposition: &#39;fixed&#39;nt *tt}, element );nt *nt * @param
{String|Object} property Property name or object with key - value pairs.nt
* @param {String} [value] Value to set. This parameter is ignored if object
is provided as the first parameter.nt * @param
{module:engine/view/element~Element} element Element to set styles on.nt
*/ntsetStyle( property, value, element ) {nttif ( isPlainObject( property )
&amp;&amp; element === undefined ) {ntttelement =
value;ntt}nnttelement._setStyle( property, value );nt}nnt/**nt * Removes
specified style from the element.nt *nt *ttwriter.removeStyle(
&#39;color&#39;, element );  // Removes &#39;color&#39; style.nt
*ttwriter.removeStyle( [ &#39;color&#39;, &#39;border-top&#39; ], element
); // Removes both &#39;color&#39; and &#39;border-top&#39; styles.nt *nt *
@param {Array.&lt;String&gt;|String} propertynt * @param
{module:engine/view/element~Element} elementnt */ntremoveStyle( property,
element ) {nttelement._removeStyle( property );nt}nnt/**nt * Sets a custom
property on element. Unlike attributes, custom properties are not rendered
to the DOM,nt * so they can be used to add special data to elements.nt *nt
* @param {String|Symbol} keynt * @param {*} valuent * @param
{module:engine/view/element~Element} elementnt */ntsetCustomProperty( key,
value, element ) {nttelement._setCustomProperty( key, value );nt}nnt/**nt *
Removes a custom property stored under the given key.nt *nt * @param
{String|Symbol} keynt * @param {module:engine/view/element~Element}
elementnt * @returns {Boolean} Returns true if property was removed.nt
*/ntremoveCustomProperty( key, element ) {nttreturn
element._removeCustomProperty( key );nt}nnt/**nt * Breaks attribute nodes
at provided position or at boundaries of provided range. It breaks
attribute elements insident * up to a container element.nt *nt * In
following examples `&lt;p&gt;` is a container, “ and `&lt;u&gt;` are
attribute nodes:nt *nt *       
&lt;p&gt;foo&lt;u&gt;bar{}&lt;/u&gt;&lt;/p&gt; -&gt;
&lt;p&gt;foo&lt;u&gt;bar&lt;/u&gt;[]&lt;/p&gt;nt *       
&lt;p&gt;foo&lt;u&gt;{}bar&lt;/u&gt;&lt;/p&gt; -&gt;
&lt;p&gt;foo{}&lt;u&gt;bar&lt;/u&gt;&lt;/p&gt;nt *       
&lt;p&gt;foo&lt;u&gt;b{}ar&lt;/u&gt;&lt;/p&gt; -&gt;
&lt;p&gt;foo&lt;u&gt;b&lt;/u&gt;[]&lt;u&gt;ar&lt;/u&gt;&lt;/p&gt;nt *      
&lt;p&gt;fo{o&lt;u&gt;ba}r&lt;/u&gt;&lt;/p&gt; -&gt;
&lt;p&gt;foo&lt;u&gt;ba&lt;/u&gt;&lt;u&gt;r&lt;/u&gt;&lt;/p&gt;nt *nt *
*Note:* {@link module:engine/view/documentfragment~DocumentFragment
DocumentFragment} is treated like a container.nt *nt * *Note:* Difference
between {@link module:engine/view/writer~Writer#breakAttributes
breakAttributes} andnt * {@link
module:engine/view/writer~Writer#breakContainer breakContainer} is that
`breakAttributes` breaks allnt * {@link
module:engine/view/attributeelement~AttributeElement attribute elements}
that are ancestors of given `position`,nt * up to the first encountered
{@link module:engine/view/containerelement~ContainerElement container
element}.nt * `breakContainer` assumes that given `position` is directly in
container element and breaks that container element.nt *nt * Throws {@link
module:utils/ckeditorerror~CKEditorError CKEditorError}
`view-writer-invalid-range-container`nt * when {@link
module:engine/view/range~Range#start start}nt * and {@link
module:engine/view/range~Range#end end} positions of a passed range are not
placed inside same parent container.nt *nt * Throws {@link
module:utils/ckeditorerror~CKEditorError CKEditorError}
`view-writer-cannot-break-empty-element`nt * when trying to break
attributesnt * inside {@link module:engine/view/emptyelement~EmptyElement
EmptyElement}.nt *nt * Throws {@link
module:utils/ckeditorerror~CKEditorError CKEditorError}
`view-writer-cannot-break-ui-element`nt * when trying to break attributesnt
* inside {@link module:engine/view/uielement~UIElement UIElement}.nt *nt *
@see module:engine/view/attributeelement~AttributeElementnt * @see
module:engine/view/containerelement~ContainerElementnt * @see
module:engine/view/writer~Writer#breakContainernt * @param
{module:engine/view/position~Position|module:engine/view/range~Range}
positionOrRange Position wherent * to break attribute elements.nt *
@returns
{module:engine/view/position~Position|module:engine/view/range~Range} New
position or range, after breaking the attributent * elements.nt
*/ntbreakAttributes( positionOrRange ) {nttif ( positionOrRange instanceof
Position ) {ntttreturn this._breakAttributes( positionOrRange );ntt} else
{ntttreturn this._breakAttributesRange( positionOrRange );ntt}nt}nnt/**nt *
Breaks {@link module:engine/view/containerelement~ContainerElement
container view element} into two, at the given position. Positionnt * has
to be directly inside container element and cannot be in root. Does not
break if position is at the beginningnt * or at the end of it&#39;s parent
element.nt *nt *        &lt;p&gt;foo^bar&lt;/p&gt; -&gt;
&lt;p&gt;foo&lt;/p&gt;&lt;p&gt;bar&lt;/p&gt;nt *       
&lt;div&gt;&lt;p&gt;foo&lt;/p&gt;^&lt;p&gt;bar&lt;/p&gt;&lt;/div&gt; -&gt;
&lt;div&gt;&lt;p&gt;foo&lt;/p&gt;&lt;/div&gt;&lt;div&gt;&lt;p&gt;bar&lt;/p&gt;&lt;/div&gt;nt
*        &lt;p&gt;^foobar&lt;/p&gt; -&gt; ^&lt;p&gt;foobar&lt;/p&gt;nt *   
&lt;p&gt;foobar^&lt;/p&gt; -&gt; &lt;p&gt;foobar&lt;/p&gt;^nt *nt * *Note:*
Difference between {@link module:engine/view/writer~Writer#breakAttributes
breakAttributes} andnt * {@link
module:engine/view/writer~Writer#breakContainer breakContainer} is that
`breakAttributes` breaks allnt * {@link
module:engine/view/attributeelement~AttributeElement attribute elements}
that are ancestors of given `position`,nt * up to the first encountered
{@link module:engine/view/containerelement~ContainerElement container
element}.nt * `breakContainer` assumes that given `position` is directly in
container element and breaks that container element.nt *nt * @see
module:engine/view/attributeelement~AttributeElementnt * @see
module:engine/view/containerelement~ContainerElementnt * @see
module:engine/view/writer~Writer#breakAttributesnt * @param
{module:engine/view/position~Position} position Position where to break
element.nt * @returns {module:engine/view/position~Position} Position
between broken elements. If element has not been broken,nt * the returned
position is placed either before it or after it.nt */ntbreakContainer(
position ) {nttconst element = position.parent;nnttif ( !( element.is(
&#39;containerElement&#39; ) ) ) {nttt/**nttt * Trying to break an element
which is not a container element.nttt *nttt * @error
view-writer-break-non-container-elementnttt */ntttthrow new
CKEditorError(ntttt&#39;view-writer-break-non-container-element: Trying to
break an element which is not a container element.&#39;nttt);ntt}nnttif (
!element.parent ) {nttt/**nttt * Trying to break root element.nttt *nttt *
@error view-writer-break-rootnttt */ntttthrow new CKEditorError(
&#39;view-writer-break-root: Trying to break root element.&#39;
);ntt}nnttif ( position.isAtStart ) {ntttreturn Position.createBefore(
element );ntt} else if ( !position.isAtEnd ) {ntttconst newElement =
element._clone( false );nntttthis.insert( Position.createAfter( element ),
newElement );nntttconst sourceRange = new Range( position,
Position.createAt( element, &#39;end&#39; ) );ntttconst targetPosition =
new Position( newElement, 0 );nntttthis.move( sourceRange, targetPosition
);ntt}nnttreturn Position.createAfter( element );nt}nnt/**nt * Merges
{@link module:engine/view/attributeelement~AttributeElement attribute
elements}. It also merges text nodes if needed.nt * Only {@link
module:engine/view/attributeelement~AttributeElement#isSimilar similar}
attribute elements can be merged.nt *nt * In following examples `&lt;p&gt;`
is a container and “ is an attribute element:nt *nt *       
&lt;p&gt;foo[]bar&lt;/p&gt; -&gt; &lt;p&gt;foo{}bar&lt;/p&gt;nt *       
&lt;p&gt;foo[]bar&lt;/p&gt; -&gt; &lt;p&gt;foo{}bar&lt;/p&gt;nt *       
&lt;p&gt;&lt;b foo=&quot;bar&quot;&gt;a[]&lt;b
foo=&quot;baz&quot;&gt;b&lt;/p&gt; -&gt; &lt;p&gt;&lt;b
foo=&quot;bar&quot;&gt;a[]&lt;b foo=&quot;baz&quot;&gt;b&lt;/p&gt;nt *nt *
It will also take care about empty attributes when merging:nt *nt *       
&lt;p&gt;[]&lt;/p&gt; -&gt; &lt;p&gt;[]&lt;/p&gt;nt *       
&lt;p&gt;foo<em>[]</em>bar&lt;/p&gt; -&gt; &lt;p&gt;foo{}bar&lt;/p&gt;nt
*nt * *Note:* Difference between {@link
module:engine/view/writer~Writer#mergeAttributes mergeAttributes} andnt *
{@link module:engine/view/writer~Writer#mergeContainers mergeContainers} is
that `mergeAttributes` merges twont * {@link
module:engine/view/attributeelement~AttributeElement attribute elements} or
{@link module:engine/view/text~Text text nodes}nt * while `mergeContainer`
merges two {@link module:engine/view/containerelement~ContainerElement
container elements}.nt *nt * @see
module:engine/view/attributeelement~AttributeElementnt * @see
module:engine/view/containerelement~ContainerElementnt * @see
module:engine/view/writer~Writer#mergeContainersnt * @param
{module:engine/view/position~Position} position Merge position.nt *
@returns {module:engine/view/position~Position} Position after merge.nt
*/ntmergeAttributes( position ) {nttconst positionOffset =
position.offset;nttconst positionParent = position.parent;nntt// When
inside text node - nothing to merge.nttif ( positionParent.is(
&#39;text&#39; ) ) {ntttreturn position;ntt}nntt// When inside empty
attribute - remove it.nttif ( positionParent.is( &#39;attributeElement&#39;
) &amp;&amp; positionParent.childCount === 0 ) {ntttconst parent =
positionParent.parent;ntttconst offset =
positionParent.index;nntttpositionParent._remove();ntttthis._removeFromClonedElementsGroup(
positionParent );nntttreturn this.mergeAttributes( new Position( parent,
offset ) );ntt}nnttconst nodeBefore = positionParent.getChild(
positionOffset - 1 );nttconst nodeAfter = positionParent.getChild(
positionOffset );nntt// Position should be placed between two nodes.nttif (
!nodeBefore || !nodeAfter ) {ntttreturn position;ntt}nntt// When position
is between two text nodes.nttif ( nodeBefore.is( &#39;text&#39; )
&amp;&amp; nodeAfter.is( &#39;text&#39; ) ) {ntttreturn mergeTextNodes(
nodeBefore, nodeAfter );ntt}ntt// When position is between two same
attribute elements.nttelse if ( nodeBefore.is( &#39;attributeElement&#39; )
&amp;&amp; nodeAfter.is( &#39;attributeElement&#39; ) &amp;&amp;
nodeBefore.isSimilar( nodeAfter ) ) {nttt// Move all children nodes from
node placed after selection and remove that node.ntttconst count =
nodeBefore.childCount;ntttnodeBefore._appendChild( nodeAfter.getChildren()
);nntttnodeAfter._remove();ntttthis._removeFromClonedElementsGroup(
nodeAfter );nnttt// New position is located inside the first node, before
new nodes.nttt// Call this method recursively to merge again if
needed.ntttreturn this.mergeAttributes( new Position( nodeBefore, count )
);ntt}nnttreturn position;nt}nnt/**nt * Merges two {@link
module:engine/view/containerelement~ContainerElement container elements}
that are before and after given position.nt * Precisely, the element after
the position is removed and it&#39;s contents are moved to element before
the position.nt *nt *        &lt;p&gt;foo&lt;/p&gt;^&lt;p&gt;bar&lt;/p&gt;
-&gt; &lt;p&gt;foo^bar&lt;/p&gt;nt *       
&lt;div&gt;foo&lt;/div&gt;^&lt;p&gt;bar&lt;/p&gt; -&gt;
&lt;div&gt;foo^bar&lt;/div&gt;nt *nt * *Note:* Difference between {@link
module:engine/view/writer~Writer#mergeAttributes mergeAttributes} andnt *
{@link module:engine/view/writer~Writer#mergeContainers mergeContainers} is
that `mergeAttributes` merges twont * {@link
module:engine/view/attributeelement~AttributeElement attribute elements} or
{@link module:engine/view/text~Text text nodes}nt * while `mergeContainer`
merges two {@link module:engine/view/containerelement~ContainerElement
container elements}.nt *nt * @see
module:engine/view/attributeelement~AttributeElementnt * @see
module:engine/view/containerelement~ContainerElementnt * @see
module:engine/view/writer~Writer#mergeAttributesnt * @param
{module:engine/view/position~Position} position Merge position.nt *
@returns {module:engine/view/position~Position} Position after merge.nt
*/ntmergeContainers( position ) {nttconst prev =
position.nodeBefore;nttconst next = position.nodeAfter;nnttif ( !prev ||
!next || !prev.is( &#39;containerElement&#39; ) || !next.is(
&#39;containerElement&#39; ) ) {nttt/**nttt * Element before and after
given position cannot be merged.nttt *nttt * @error
view-writer-merge-containers-invalid-positionnttt */ntttthrow new
CKEditorError( &#39;view-writer-merge-containers-invalid-position: &#39;
+ntttt&#39;Element before and after given position cannot be merged.&#39;
);ntt}nnttconst lastChild = prev.getChild( prev.childCount - 1 );nttconst
newPosition = lastChild instanceof Text ? Position.createAt( lastChild,
&#39;end&#39; ) : Position.createAt( prev, &#39;end&#39; );nnttthis.move(
Range.createIn( next ), Position.createAt( prev, &#39;end&#39; )
);nttthis.remove( Range.createOn( next ) );nnttreturn
newPosition;nt}nnt/**nt * Insert node or nodes at specified position. Takes
care about breaking attributes before insertionnt * and merging them
afterwards.nt *nt * Throws {@link module:utils/ckeditorerror~CKEditorError
CKEditorError} `view-writer-insert-invalid-node` when nodes to insertnt *
contains instances that are not {@link module:engine/view/text~Text
Texts},nt * {@link module:engine/view/attributeelement~AttributeElement
AttributeElements},nt * {@link
module:engine/view/containerelement~ContainerElement ContainerElements},nt
* {@link module:engine/view/emptyelement~EmptyElement EmptyElements} ornt *
{@link module:engine/view/uielement~UIElement UIElements}.nt *nt * @param
{module:engine/view/position~Position} position Insertion position.nt *
@param
{module:engine/view/text~Text|module:engine/view/attributeelement~AttributeElement|nt
*
module:engine/view/containerelement~ContainerElement|module:engine/view/emptyelement~EmptyElement|nt
*
module:engine/view/uielement~UIElement|Iterable.&lt;module:engine/view/text~Text|nt
*
module:engine/view/attributeelement~AttributeElement|module:engine/view/containerelement~ContainerElement|nt
*
module:engine/view/emptyelement~EmptyElement|module:engine/view/uielement~UIElement&gt;}
nodes Node or nodes to insert.nt * @returns
{module:engine/view/range~Range} Range around inserted nodes.nt */ntinsert(
position, nodes ) {nttnodes = isIterable( nodes ) ? [ …nodes ] : [ nodes
];nntt// Check if nodes to insert are instances of AttributeElements,
ContainerElements, EmptyElements, UIElements or
Text.nttvalidateNodesToInsert( nodes );nnttconst container =
getParentContainer( position );nnttif ( !container ) {nttt/**nttt *
Position&#39;s parent container cannot be found.nttt *nttt * @error
view-writer-invalid-position-containernttt */ntttthrow new CKEditorError(
&#39;view-writer-invalid-position-container&#39; );ntt}nnttconst
insertionPosition = this._breakAttributes( position, true );nttconst length
= container._insertChild( insertionPosition.offset, nodes );nnttfor ( const
node of nodes ) {ntttthis._addToClonedElementsGroup( node );ntt}nnttconst
endPosition = insertionPosition.getShiftedBy( length );nttconst start =
this.mergeAttributes( insertionPosition );nntt// When no nodes were
inserted - return collapsed range.nttif ( length === 0 ) {ntttreturn new
Range( start, start );ntt} else {nttt// If start position was merged - move
end position.ntttif ( !start.isEqual( insertionPosition ) )
{nttttendPosition.offset–;nttt}nntttconst end = this.mergeAttributes(
endPosition );nntttreturn new Range( start, end );ntt}nt}nnt/**nt * Removes
provided range from the container.nt *nt * Throws {@link
module:utils/ckeditorerror~CKEditorError CKEditorError}
`view-writer-invalid-range-container` whennt * {@link
module:engine/view/range~Range#start start} and {@link
module:engine/view/range~Range#end end} positions are not placed insident *
same parent container.nt *nt * @param {module:engine/view/range~Range}
range Range to remove from container. After removing, it will be updatednt
* to a collapsed range showing the new position.nt * @returns
{module:engine/view/documentfragment~DocumentFragment} Document fragment
containing removed nodes.nt */ntremove( range ) {nttvalidateRangeContainer(
range );nntt// If range is collapsed - nothing to remove.nttif (
range.isCollapsed ) {ntttreturn new DocumentFragment();ntt}nntt// Break
attributes at range start and end.nttconst { start: breakStart, end:
breakEnd } = this._breakAttributesRange( range, true );nttconst
parentContainer = breakStart.parent;nnttconst count = breakEnd.offset -
breakStart.offset;nntt// Remove nodes in range.nttconst removed =
parentContainer._removeChildren( breakStart.offset, count );nnttfor ( const
node of removed ) {ntttthis._removeFromClonedElementsGroup( node
);ntt}nntt// Merge after removing.nttconst mergePosition =
this.mergeAttributes( breakStart );nttrange.start =
mergePosition;nttrange.end = Position.createFromPosition( mergePosition
);nntt// Return removed nodes.nttreturn new DocumentFragment( removed
);nt}nnt/**nt * Removes matching elements from given range.nt *nt * Throws
{@link module:utils/ckeditorerror~CKEditorError CKEditorError}
`view-writer-invalid-range-container` whennt * {@link
module:engine/view/range~Range#start start} and {@link
module:engine/view/range~Range#end end} positions are not placed insident *
same parent container.nt *nt * @param {module:engine/view/range~Range}
range Range to clear.nt * @param {module:engine/view/element~Element}
element Element to remove.nt */ntclear( range, element )
{nttvalidateRangeContainer( range );nntt// Create walker on given
range.ntt// We walk backward because when we remove element during walk it
modifies range end position.nttconst walker = range.getWalker(
{ntttdirection: &#39;backward&#39;,ntttignoreElementEnd: truentt} );nntt//
Let&#39;s walk.nttfor ( const current of walker ) {ntttconst item =
current.item;ntttlet rangeToRemove;nnttt// When current item matches to the
given element.ntttif ( item.is( &#39;element&#39; ) &amp;&amp;
element.isSimilar( item ) ) {ntttt// Create range on this
element.nttttrangeToRemove = Range.createOn( item );ntttt// When range
starts inside Text or TextProxy element.nttt} else if (
!current.nextPosition.isAfter( range.start ) &amp;&amp; item.is(
&#39;textProxy&#39; ) ) {ntttt// We need to check if parent of this text
matches to given element.nttttconst parentElement =
item.getAncestors().find( ancestor =&gt; {ntttttreturn ancestor.is(
&#39;element&#39; ) &amp;&amp; element.isSimilar( ancestor );ntttt}
);nntttt// If it is then create range inside this element.nttttif (
parentElement ) {ntttttrangeToRemove = Range.createIn( parentElement
);ntttt}nttt}nnttt// If we have found element to remove.ntttif (
rangeToRemove ) {ntttt// We need to check if element range stick out of the
given range and truncate if it is.nttttif ( rangeToRemove.end.isAfter(
range.end ) ) {ntttttrangeToRemove.end = range.end;ntttt}nnttttif (
rangeToRemove.start.isBefore( range.start ) ) {ntttttrangeToRemove.start =
range.start;ntttt}nntttt// At the end we remove range with found
element.nttttthis.remove( rangeToRemove );nttt}ntt}nt}nnt/**nt * Moves
nodes from provided range to target position.nt *nt * Throws {@link
module:utils/ckeditorerror~CKEditorError CKEditorError}
`view-writer-invalid-range-container` whennt * {@link
module:engine/view/range~Range#start start} and {@link
module:engine/view/range~Range#end end} positions are not placed insident *
same parent container.nt *nt * @param {module:engine/view/range~Range}
sourceRange Range containing nodes to move.nt * @param
{module:engine/view/position~Position} targetPosition Position to insert.nt
* @returns {module:engine/view/range~Range} Range in target container.
Inserted nodes are placed betweennt * {@link
module:engine/view/range~Range#start start} and {@link
module:engine/view/range~Range#end end} positions.nt */ntmove( sourceRange,
targetPosition ) {nttlet nodes;nnttif ( targetPosition.isAfter(
sourceRange.end ) ) {nttttargetPosition = this._breakAttributes(
targetPosition, true );nntttconst parent = targetPosition.parent;ntttconst
countBefore = parent.childCount;nntttsourceRange =
this._breakAttributesRange( sourceRange, true );nntttnodes = this.remove(
sourceRange );nnttttargetPosition.offset += ( parent.childCount -
countBefore );ntt} else {ntttnodes = this.remove( sourceRange
);ntt}nnttreturn this.insert( targetPosition, nodes );nt}nnt/**n     *
Wraps elements within range with provided {@link
module:engine/view/attributeelement~AttributeElement AttributeElement}.n   
* If a collapsed range is provided, it will be wrapped only if it is equal
to view selection.n     *n     * If a collapsed range was passed and is
same as selection, the selectionn     * will be moved to the inside of the
wrapped attribute element.n     *n     * Throws {@link
module:utils/ckeditorerror~CKEditorError}
`view-writer-invalid-range-container`n     * when {@link
module:engine/view/range~Range#start}n     * and {@link
module:engine/view/range~Range#end} positions are not placed inside same
parent container.n     *n     * Throws {@link
module:utils/ckeditorerror~CKEditorError}
`view-writer-wrap-invalid-attribute` when passed attribute element is notn 
* an instance of {module:engine/view/attributeelement~AttributeElement
AttributeElement}.n     *n     * Throws {@link
module:utils/ckeditorerror~CKEditorError}
`view-writer-wrap-nonselection-collapsed-range` when passed rangen     * is
collapsed and different than view selection.n     *n     * @param
{module:engine/view/range~Range} range Range to wrap.n     * @param
{module:engine/view/attributeelement~AttributeElement} attribute Attribute
element to use as wrapper.n     * @returns {module:engine/view/range~Range}
range Range after wrapping, spanning over wrapping attribute element.n   
*/ntwrap( range, attribute ) {nttif ( !( attribute instanceof
AttributeElement ) ) {ntttthrow new CKEditorError(
&#39;view-writer-wrap-invalid-attribute&#39;
);ntt}nnttvalidateRangeContainer( range );nnttif ( !range.isCollapsed )
{nttt// Non-collapsed range. Wrap it with the attribute element.ntttreturn
this._wrapRange( range, attribute );ntt} else {nttt// Collapsed range. Wrap
position.ntttlet position = range.start;nntttif ( position.parent.is(
&#39;element&#39; ) &amp;&amp; !_hasNonUiChildren( position.parent ) )
{nttttposition = position.getLastMatchingPosition( value =&gt;
value.item.is( &#39;uiElement&#39; ) );nttt}nntttposition =
this._wrapPosition( position, attribute );ntttconst viewSelection =
this.document.selection;nnttt// If wrapping position is equal to view
selection, move view selection inside wrapping attribute element.ntttif (
viewSelection.isCollapsed &amp;&amp;
viewSelection.getFirstPosition().isEqual( range.start ) )
{nttttthis.setSelection( position );nttt}nntttreturn new Range( position
);ntt}nt}nnt/**nt * Unwraps nodes within provided range from attribute
element.nt *nt * Throws {@link module:utils/ckeditorerror~CKEditorError
CKEditorError} `view-writer-invalid-range-container` whennt * {@link
module:engine/view/range~Range#start start} and {@link
module:engine/view/range~Range#end end} positions are not placed insident *
same parent container.nt *nt * @param {module:engine/view/range~Range}
rangent * @param {module:engine/view/attributeelement~AttributeElement}
attributent */ntunwrap( range, attribute ) {nttif ( !( attribute instanceof
AttributeElement ) ) {nttt/**nttt * Attribute element need to be instance
of attribute element.nttt *nttt * @error
view-writer-unwrap-invalid-attributenttt */ntttthrow new CKEditorError(
&#39;view-writer-unwrap-invalid-attribute&#39;
);ntt}nnttvalidateRangeContainer( range );nntt// If range is collapsed -
nothing to unwrap.nttif ( range.isCollapsed ) {ntttreturn range;ntt}nntt//
Break attributes at range start and end.nttconst { start: breakStart, end:
breakEnd } = this._breakAttributesRange( range, true );nntt// Range around
one element - check if AttributeElement can be unwrapped partially when
it&#39;s not similar.ntt// For example:ntt// &lt;b class=&quot;foo
bar&quot; title=&quot;baz&quot;&gt;</strong> unwrap with:t&lt;b
class=&quot;foo&quot;&gt;&lt;/p&gt; result: &lt;b class&quot;bar&quot;
title=&quot;baz&quot;&gt;&lt;/b&gt;nttif ( breakEnd.isEqual(
breakStart.getShiftedBy( 1 ) ) ) {ntttconst node =
breakStart.nodeAfter;nnttt// Unwrap single attribute element.ntttif (
!attribute.isSimilar( node ) &amp;&amp; node instanceof AttributeElement
&amp;&amp; this._unwrapAttributeElement( attribute, node ) ) {nttttconst
start = this.mergeAttributes( breakStart );nnttttif ( !start.isEqual(
breakStart ) ) {ntttttbreakEnd.offset–;ntttt}nnttttconst end =
this.mergeAttributes( breakEnd );nnttttreturn new Range( start, end
);nttt}ntt}nnttconst parentContainer = breakStart.parent;nntt// Unwrap
children located between break points.nttconst newRange =
this._unwrapChildren( parentContainer, breakStart.offset, breakEnd.offset,
attribute );nntt// Merge attributes at the both ends and return a new
range.nttconst start = this.mergeAttributes( newRange.start );nntt// If
start position was merged - move end position back.nttif ( !start.isEqual(
newRange.start ) ) {ntttnewRange.end.offset–;ntt}nnttconst end =
this.mergeAttributes( newRange.end );nnttreturn new Range( start, end
);nt}nnt/**nt * Renames element by creating a copy of renamed element but
with changed name and then moving contents of thent * old element to the
new one. Keep in mind that this will invalidate all {@link
module:engine/view/position~Position positions} whichnt * has renamed
element as {@link module:engine/view/position~Position#parent a parent}.nt
*nt * New element has to be created because `Element#tagName` property in
DOM is readonly.nt *nt * Since this function creates a new element and
removes the given one, the new element is returned to keep reference.nt *nt
* @param {module:engine/view/containerelement~ContainerElement} viewElement
Element to be renamed.nt * @param {String} newName New name for element.nt
*/ntrename( viewElement, newName ) {nttconst newElement = new
ContainerElement( newName, viewElement.getAttributes() );nnttthis.insert(
Position.createAfter( viewElement ), newElement );nttthis.move(
Range.createIn( viewElement ), Position.createAt( newElement )
);nttthis.remove( Range.createOn( viewElement ) );nnttreturn
newElement;nt}nnt/**nt * Wraps children with provided `attribute`. Only
children contained in `parent` element betweennt * `startOffset` and
`endOffset` will be wrapped.nt *nt * @privatent * @param
{module:engine/view/element~Element} parentnt * @param {Number}
startOffsetnt * @param {Number} endOffsetnt * @param
{module:engine/view/element~Element} attributent */nt_wrapChildren( parent,
startOffset, endOffset, attribute ) {nttlet i = startOffset;nttconst
wrapPositions = [];nnttwhile ( i &lt; endOffset ) {ntttconst child =
parent.getChild( i );ntttconst isText = child.is( &#39;text&#39;
);ntttconst isAttribute = child.is( &#39;attributeElement&#39; );ntttconst
isEmpty = child.is( &#39;emptyElement&#39; );ntttconst isUI = child.is(
&#39;uiElement&#39; );nnttt// Wrap text, empty elements, ui elements or
attributes with higher or equal priority.ntttif ( isText || isEmpty || isUI
|| ( isAttribute &amp;&amp; shouldABeOutsideB( attribute, child ) ) )
{ntttt// Clone attribute.nttttconst newAttribute =
attribute._clone();nntttt// Wrap current node with new
attribute.nttttchild._remove();nttttnewAttribute._appendChild( child
);nnttttparent._insertChild( i, newAttribute
);nttttthis._addToClonedElementsGroup( newAttribute
);nnttttwrapPositions.push(tnew Position( parent, i ) );nttt}nttt// If
other nested attribute is found start wrapping there.ntttelse if (
isAttribute ) {nttttthis._wrapChildren( child, 0, child.childCount,
attribute );nttt}nnttti++;ntt}nntt// Merge at each wrap.nttlet offsetChange
= 0;nnttfor ( const position of wrapPositions ) {ntttposition.offset -=
offsetChange;nnttt// Do not merge with elements outside selected
children.ntttif ( position.offset == startOffset )
{nttttcontinue;nttt}nntttconst newPosition = this.mergeAttributes( position
);nnttt// If nodes were merged - other merge offsets will change.ntttif (
!newPosition.isEqual( position ) )
{nttttoffsetChange++;nttttendOffset–;nttt}ntt}nnttreturn
Range.createFromParentsAndOffsets( parent, startOffset, parent, endOffset
);nt}nnt/**nt * Unwraps children from provided `attribute`. Only children
contained in `parent` element betweennt * `startOffset` and `endOffset`
will be unwrapped.nt *nt * @privatent * @param
{module:engine/view/element~Element} parentnt * @param {Number}
startOffsetnt * @param {Number} endOffsetnt * @param
{module:engine/view/element~Element} attributent */nt_unwrapChildren(
parent, startOffset, endOffset, attribute ) {nttlet i =
startOffset;nttconst unwrapPositions = [];nntt// Iterate over each element
between provided offsets inside parent.nttwhile ( i &lt; endOffset )
{ntttconst child = parent.getChild( i );nnttt// If attributes are the
similar, then unwrap.ntttif ( child.isSimilar( attribute ) ) {nttttconst
unwrapped = child.getChildren();nttttconst count =
child.childCount;nntttt// Replace wrapper element with its
childrennttttchild._remove();nttttparent._insertChild( i, unwrapped
);nnttttthis._removeFromClonedElementsGroup( child );nntttt// Save start
and end position of moved items.nttttunwrapPositions.push(ntttttnew
Position( parent, i ),ntttttnew Position( parent, i + count
)ntttt);nntttt// Skip elements that were unwrapped. Assuming that there
won&#39;t be another element to unwrap in childntttt// elements.ntttti +=
count;nttttendOffset += count - 1;nttt} else {ntttt// If other nested
attribute is found start unwrapping there.nttttif ( child.is(
&#39;attributeElement&#39; ) ) {ntttttthis._unwrapChildren( child, 0,
child.childCount, attribute );ntttt}nntttti++;nttt}ntt}nntt// Merge at each
unwrap.nttlet offsetChange = 0;nnttfor ( const position of unwrapPositions
) {ntttposition.offset -= offsetChange;nnttt// Do not merge with elements
outside selected children.ntttif ( position.offset == startOffset ||
position.offset == endOffset ) {nttttcontinue;nttt}nntttconst newPosition =
this.mergeAttributes( position );nnttt// If nodes were merged - other merge
offsets will change.ntttif ( !newPosition.isEqual( position ) )
{nttttoffsetChange++;nttttendOffset–;nttt}ntt}nnttreturn
Range.createFromParentsAndOffsets( parent, startOffset, parent, endOffset
);nt}nnt/**nt * Helper function for `view.writer.wrap`. Wraps range with
provided attribute element.nt * This method will also merge newly added
attribute element with its siblings whenever possible.nt *nt * Throws
{@link module:utils/ckeditorerror~CKEditorError}
`view-writer-wrap-invalid-attribute` when passed attribute element is notnt
* an instance of {module:engine/view/attributeelement~AttributeElement
AttributeElement}.nt *nt * @privatent * @param
{module:engine/view/range~Range} rangent * @param
{module:engine/view/attributeelement~AttributeElement} attributent *
@returns {module:engine/view/range~Range} New range after wrapping,
spanning over wrapping attribute element.nt */nt_wrapRange( range,
attribute ) {ntt// Range is inside single attribute and spans on all
children.nttif ( rangeSpansOnAllChildren( range ) &amp;&amp;
this._wrapAttributeElement( attribute, range.start.parent ) ) {ntttconst
parent = range.start.parent;nntttconst end = this.mergeAttributes(
Position.createAfter( parent ) );ntttconst start = this.mergeAttributes(
Position.createBefore( parent ) );nntttreturn new Range( start, end
);ntt}nntt// Break attributes at range start and end.nttconst { start:
breakStart, end: breakEnd } = this._breakAttributesRange( range, true
);nntt// Range around one element.nttif ( breakEnd.isEqual(
breakStart.getShiftedBy( 1 ) ) ) {ntttconst node =
breakStart.nodeAfter;nntttif ( node instanceof AttributeElement &amp;&amp;
this._wrapAttributeElement( attribute, node ) ) {nttttconst start =
this.mergeAttributes( breakStart );nnttttif ( !start.isEqual( breakStart )
) {ntttttbreakEnd.offset–;ntttt}nnttttconst end = this.mergeAttributes(
breakEnd );nnttttreturn new Range( start, end );nttt}ntt}nnttconst
parentContainer = breakStart.parent;nntt// Unwrap children located between
break points.nttconst unwrappedRange = this._unwrapChildren(
parentContainer, breakStart.offset, breakEnd.offset, attribute );nntt//
Wrap all children with attribute.nttconst newRange = this._wrapChildren(
parentContainer, unwrappedRange.start.offset, unwrappedRange.end.offset,
attribute );nntt// Merge attributes at the both ends and return a new
range.nttconst start = this.mergeAttributes( newRange.start );nntt// If
start position was merged - move end position back.nttif ( !start.isEqual(
newRange.start ) ) {ntttnewRange.end.offset–;ntt}nttconst end =
this.mergeAttributes( newRange.end );nnttreturn new Range( start, end
);nt}nnt/**nt * Helper function for {@link wrap}. Wraps position with
provided attribute element.nt * This method will also merge newly added
attribute element with its siblings whenever possible.nt *nt * Throws
{@link module:utils/ckeditorerror~CKEditorError}
`view-writer-wrap-invalid-attribute` when passed attribute element is notnt
* an instance of {module:engine/view/attributeelement~AttributeElement
AttributeElement}.nt *nt * @privatent * @param
{module:engine/view/position~Position} positionnt * @param
{module:engine/view/attributeelement~AttributeElement} attributent *
@returns {module:engine/view/position~Position} New position after
wrapping.nt */nt_wrapPosition( position, attribute ) {ntt// Return same
position when trying to wrap with attribute similar to position
parent.nttif ( attribute.isSimilar( position.parent ) ) {ntttreturn
movePositionToTextNode( Position.createFromPosition( position )
);ntt}nntt// When position is inside text node - break it and place new
position between two text nodes.nttif ( position.parent.is( &#39;text&#39;
) ) {ntttposition = breakTextNode( position );ntt}nntt// Create fake
element that will represent position, and will not be merged with other
attributes.nttconst fakePosition =
this.createAttributeElement();nttfakePosition._priority =
Number.POSITIVE_INFINITY;nttfakePosition.isSimilar = () =&gt; false;nntt//
Insert fake element in position location.nttposition.parent._insertChild(
position.offset, fakePosition );nntt// Range around inserted fake attribute
element.nttconst wrapRange = new Range( position, position.getShiftedBy( 1
) );nntt// Wrap fake element with attribute (it will also merge if
possible).nttthis.wrap( wrapRange, attribute );nntt// Remove fake element
and place new position there.nttconst newPosition = new Position(
fakePosition.parent, fakePosition.index );nttfakePosition._remove();nntt//
If position is placed between text nodes - merge them and return position
inside.nttconst nodeBefore = newPosition.nodeBefore;nttconst nodeAfter =
newPosition.nodeAfter;nnttif ( nodeBefore instanceof Text &amp;&amp;
nodeAfter instanceof Text ) {ntttreturn mergeTextNodes( nodeBefore,
nodeAfter );ntt}nntt// If position is next to text node - move position
inside.nttreturn movePositionToTextNode( newPosition );nt}nnt/**nt * tWraps
one {@link module:engine/view/attributeelement~AttributeElement
AttributeElement} into another bynt * tmerging them if possible. When
merging is possible - all attributes, styles and classes are moved from
wrappernt * telement to element being wrapped.nt *nt * tnt * t
{module:engine/view/attributeelement~AttributeElement} wrapper Wrapper
AttributeElement.nt * t
{module:engine/view/attributeelement~AttributeElement} toWrap
AttributeElement to wrap using wrapper element.nt * t {Boolean} Returns
`true` if elements are merged.nt */nt_wrapAttributeElement( wrapper, toWrap
) {nttif ( !canBeJoined( wrapper, toWrap ) ) {ntttreturn false;ntt}nntt//
Can&#39;t merge if name or priority differs.nttif ( wrapper.name !==
toWrap.name || wrapper.priority !== toWrap.priority ) {ntttreturn
false;ntt}nntt// Check if attributes can be merged.nttfor ( const key of
wrapper.getAttributeKeys() ) {nttt// Classes and styles should be checked
separately.ntttif ( key === &#39;class&#39; || key === &#39;style&#39; )
{nttttcontinue;nttt}nnttt// If some attributes are different we cannot
wrap.ntttif ( toWrap.hasAttribute( key ) &amp;&amp; toWrap.getAttribute(
key ) !== wrapper.getAttribute( key ) ) {nttttreturn false;nttt}ntt}nntt//
Check if styles can be merged.nttfor ( const key of wrapper.getStyleNames()
) {ntttif ( toWrap.hasStyle( key ) &amp;&amp; toWrap.getStyle( key ) !==
wrapper.getStyle( key ) ) {nttttreturn false;nttt}ntt}nntt// Move all
attributes/classes/styles from wrapper to wrapped AttributeElement.nttfor (
const key of wrapper.getAttributeKeys() ) {nttt// Classes and styles should
be checked separately.ntttif ( key === &#39;class&#39; || key ===
&#39;style&#39; ) {nttttcontinue;nttt}nnttt// Move only these attributes
that are not present - other are similar.ntttif ( !toWrap.hasAttribute( key
) ) {nttttthis.setAttribute( key, wrapper.getAttribute( key ), toWrap
);nttt}ntt}nnttfor ( const key of wrapper.getStyleNames() ) {ntttif (
!toWrap.hasStyle( key ) ) {nttttthis.setStyle( key, wrapper.getStyle( key
), toWrap );nttt}ntt}nnttfor ( const key of wrapper.getClassNames() )
{ntttif ( !toWrap.hasClass( key ) ) {nttttthis.addClass( key, toWrap
);nttt}ntt}nnttreturn true;nt}nnt/**nt * Unwraps {@link
module:engine/view/attributeelement~AttributeElement AttributeElement} from
another by removingnt * corresponding attributes, classes and styles. All
attributes, classes and styles from wrapper should be presentnt * inside
element being unwrapped.nt *nt * @privatent * @param
{module:engine/view/attributeelement~AttributeElement} wrapper Wrapper
AttributeElement.nt * @param
{module:engine/view/attributeelement~AttributeElement} toUnwrap
AttributeElement to unwrap using wrapper element.nt * @returns {Boolean}
Returns `true` if elements are unwrapped.nt **/nt_unwrapAttributeElement(
wrapper, toUnwrap ) {nttif ( !canBeJoined( wrapper, toUnwrap ) )
{ntttreturn false;ntt}nntt// Can&#39;t unwrap if name or priority
differs.nttif ( wrapper.name !== toUnwrap.name || wrapper.priority !==
toUnwrap.priority ) {ntttreturn false;ntt}nntt// Check if AttributeElement
has all wrapper attributes.nttfor ( const key of wrapper.getAttributeKeys()
) {nttt// Classes and styles should be checked separately.ntttif ( key ===
&#39;class&#39; || key === &#39;style&#39; ) {nttttcontinue;nttt}nnttt// If
some attributes are missing or different we cannot unwrap.ntttif (
!toUnwrap.hasAttribute( key ) || toUnwrap.getAttribute( key ) !==
wrapper.getAttribute( key ) ) {nttttreturn false;nttt}ntt}nntt// Check if
AttributeElement has all wrapper classes.nttif ( !toUnwrap.hasClass(
…wrapper.getClassNames() ) ) {ntttreturn false;ntt}nntt// Check if
AttributeElement has all wrapper styles.nttfor ( const key of
wrapper.getStyleNames() ) {nttt// If some styles are missing or different
we cannot unwrap.ntttif ( !toUnwrap.hasStyle( key ) || toUnwrap.getStyle(
key ) !== wrapper.getStyle( key ) ) {nttttreturn false;nttt}ntt}nntt//
Remove all wrapper&#39;s attributes from unwrapped element.nttfor ( const
key of wrapper.getAttributeKeys() ) {nttt// Classes and styles should be
checked separately.ntttif ( key === &#39;class&#39; || key ===
&#39;style&#39; ) {nttttcontinue;nttt}nntttthis.removeAttribute( key,
toUnwrap );ntt}nntt// Remove all wrapper&#39;s classes from unwrapped
element.nttthis.removeClass( Array.from( wrapper.getClassNames() ),
toUnwrap );nntt// Remove all wrapper&#39;s styles from unwrapped
element.nttthis.removeStyle( Array.from( wrapper.getStyleNames() ),
toUnwrap );nnttreturn true;nt}nnt/**nt * Helper function used by other
`Writer` methods. Breaks attribute elements at the boundaries of given
range.nt *nt * @privatent * @param {module:engine/view/range~Range} range
Range which `start` and `end` positions will be used to break attributes.nt
* @param {Boolean} [forceSplitText=false] If set to `true`, will break text
nodes even if they are directly in container element.nt * This behavior
will result in incorrect view state, but is needed by other view writing
methods which then fixes view state.nt * @returns
{module:engine/view/range~Range} New range with located at break
positions.nt */nt_breakAttributesRange( range, forceSplitText = false )
{nttconst rangeStart = range.start;nttconst rangeEnd =
range.end;nnttvalidateRangeContainer( range );nntt// Break at the collapsed
position. Return new collapsed range.nttif ( range.isCollapsed ) {ntttconst
position = this._breakAttributes( range.start, forceSplitText );nntttreturn
new Range( position, position );ntt}nnttconst breakEnd =
this._breakAttributes( rangeEnd, forceSplitText );nttconst count =
breakEnd.parent.childCount;nttconst breakStart = this._breakAttributes(
rangeStart, forceSplitText );nntt// Calculate new break end
offset.nttbreakEnd.offset += breakEnd.parent.childCount - count;nnttreturn
new Range( breakStart, breakEnd );nt}nnt/**nt * Helper function used by
other `Writer` methods. Breaks attribute elements at given position.nt *nt
* Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError}
`view-writer-cannot-break-empty-element` when break positionnt * is placed
inside {@link module:engine/view/emptyelement~EmptyElement EmptyElement}.nt
*nt * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError}
`view-writer-cannot-break-ui-element` when break positionnt * is placed
inside {@link module:engine/view/uielement~UIElement UIElement}.nt *nt *
@privatent * @param {module:engine/view/position~Position} position
Position where to break attributes.nt * @param {Boolean}
[forceSplitText=false] If set to `true`, will break text nodes even if they
are directly in container element.nt * This behavior will result in
incorrect view state, but is needed by other view writing methods which
then fixes view state.nt * @returns {module:engine/view/position~Position}
New position after breaking the attributes.nt */nt_breakAttributes(
position, forceSplitText = false ) {nttconst positionOffset =
position.offset;nttconst positionParent = position.parent;nntt// If
position is placed inside EmptyElement - throw an exception as we cannot
break inside.nttif ( position.parent.is( &#39;emptyElement&#39; ) )
{nttt/**nttt * Cannot break inside EmptyElement instance.nttt *nttt *
@error view-writer-cannot-break-empty-elementnttt */ntttthrow new
CKEditorError( &#39;view-writer-cannot-break-empty-element&#39;
);ntt}nntt// If position is placed inside UIElement - throw an exception as
we cannot break inside.nttif ( position.parent.is( &#39;uiElement&#39; ) )
{nttt/**nttt * Cannot break inside UIElement instance.nttt *nttt * @error
view-writer-cannot-break-ui-elementnttt */ntttthrow new CKEditorError(
&#39;view-writer-cannot-break-ui-element&#39; );ntt}nntt// There are no
attributes to break and text nodes breaking is not forced.nttif (
!forceSplitText &amp;&amp; positionParent.is( &#39;text&#39; ) &amp;&amp;
isContainerOrFragment( positionParent.parent ) ) {ntttreturn
Position.createFromPosition( position );ntt}nntt// Position&#39;s parent is
container, so no attributes to break.nttif ( isContainerOrFragment(
positionParent ) ) {ntttreturn Position.createFromPosition( position
);ntt}nntt// Break text and start again in new position.nttif (
positionParent.is( &#39;text&#39; ) ) {ntttreturn this._breakAttributes(
breakTextNode( position ), forceSplitText );ntt}nnttconst length =
positionParent.childCount;nntt//
&lt;p&gt;foo<strong>&lt;u&gt;bar{}&lt;/u&gt;</strong>&lt;/p&gt;ntt//
&lt;p&gt;foo<strong>&lt;u&gt;bar&lt;/u&gt;[]</strong>&lt;/p&gt;ntt//
&lt;p&gt;foo<strong>&lt;u&gt;bar&lt;/u&gt;</strong>[]&lt;/p&gt;nttif (
positionOffset == length ) {ntttconst newPosition = new Position(
positionParent.parent, positionParent.index + 1 );nntttreturn
this._breakAttributes( newPosition, forceSplitText );ntt} elsentt//
&lt;p&gt;foo<strong>&lt;u&gt;{}bar&lt;/u&gt;</strong>&lt;/p&gt;ntt//
&lt;p&gt;foo<strong>[]&lt;u&gt;bar&lt;/u&gt;</strong>&lt;/p&gt;ntt//
&lt;p&gt;foo{}<strong>&lt;u&gt;bar&lt;/u&gt;</strong>&lt;/p&gt;nttif (
positionOffset === 0 ) {ntttconst newPosition = new Position(
positionParent.parent, positionParent.index );nntttreturn
this._breakAttributes( newPosition, forceSplitText );ntt}ntt//
&lt;p&gt;foo<strong>&lt;u&gt;b{}ar&lt;/u&gt;</strong>&lt;/p&gt;ntt//
&lt;p&gt;foo<strong>&lt;u&gt;b[]ar&lt;/u&gt;</strong>&lt;/p&gt;ntt//
&lt;p&gt;foo<strong>&lt;u&gt;b&lt;/u&gt;[]&lt;u&gt;ar&lt;/u&gt;</strong>&lt;/p&gt;ntt//
&lt;p&gt;foo<strong>&lt;u&gt;b&lt;/u&gt;</strong>[]<strong>&lt;u&gt;ar&lt;/u&gt;</strong>&lt;/p&gt;nttelse
{ntttconst offsetAfter = positionParent.index + 1;nnttt// Break
element.ntttconst clonedNode = positionParent._clone();nnttt// Insert
cloned node to position&#39;s parent
node.ntttpositionParent.parent._insertChild( offsetAfter, clonedNode
);ntttthis._addToClonedElementsGroup( clonedNode );nnttt// Get nodes to
move.ntttconst count = positionParent.childCount - positionOffset;ntttconst
nodesToMove = positionParent._removeChildren( positionOffset, count
);nnttt// Move nodes to cloned node.ntttclonedNode._appendChild(
nodesToMove );nnttt// Create new position to work on.ntttconst newPosition
= new Position( positionParent.parent, offsetAfter );nntttreturn
this._breakAttributes( newPosition, forceSplitText );ntt}nt}nnt/**nt *
Stores the information that an {@link
module:engine/view/attributeelement~AttributeElement attribute element}
wasnt * added to the tree. Saves the reference to the group in the given
element and updates the group, so other elementsnt * from the group now
keep a reference to the given attribute element.nt *nt * The clones group
can be obtained using {@link
module:engine/view/attributeelement~AttributeElement#getElementsWithSameId}.nt
*nt * Does nothing if added element has no {@link
module:engine/view/attributeelement~AttributeElement#id id}.nt *nt *
@privatent * @param {module:engine/view/attributeelement~AttributeElement}
element Attribute element to save.nt */nt_addToClonedElementsGroup( element
) {ntt// Add only if the element is in document tree.nttif (
!element.root.is( &#39;rootElement&#39; ) ) {ntttreturn;ntt}nntt// Traverse
the element&#39;s children recursively to find other attribute elements
that also might got inserted.ntt// The loop is at the beginning so we can
make fast returns later in the code.nttif ( element.is( &#39;element&#39; )
) {ntttfor ( const child of element.getChildren() )
{nttttthis._addToClonedElementsGroup( child );nttt}ntt}nnttconst id =
element.id;nnttif ( !id ) {ntttreturn;ntt}nnttlet group =
this._cloneGroups.get( id );nnttif ( !group ) {ntttgroup = new
Set();ntttthis._cloneGroups.set( id, group );ntt}nnttgroup.add( element
);nttelement._clonesGroup = group;nt}nnt/**nt * Removes all the information
about the given {@link module:engine/view/attributeelement~AttributeElement
attribute element}nt * from its clones group.nt *nt * Keep in mind, that
the element will still keep a reference to the group (but the group will
not keep a reference to it).nt * This allows to reference the whole group
even if the element was already removed from the tree.nt *nt * Does nothing
if the element has no {@link
module:engine/view/attributeelement~AttributeElement#id id}.nt *nt *
@privatent * @param {module:engine/view/attributeelement~AttributeElement}
element Attribute element to remove.nt */nt_removeFromClonedElementsGroup(
element ) {ntt// Traverse the element&#39;s children recursively to find
other attribute elements that also got removed.ntt// The loop is at the
beginning so we can make fast returns later in the code.nttif ( element.is(
&#39;element&#39; ) ) {ntttfor ( const child of element.getChildren() )
{nttttthis._removeFromClonedElementsGroup( child );nttt}ntt}nnttconst id =
element.id;nnttif ( !id ) {ntttreturn;ntt}nnttconst group =
this._cloneGroups.get( id );nnttif ( !group )
{ntttreturn;ntt}nnttgroup.delete( element );ntt// Not removing group from
element on purpose!ntt// If other parts of code have reference to this
element, they will be able to get references to other elements from the
group.ntt// If all other elements are removed from the set, everything will
be garbage collected.nnttif ( group.size === 0 )
{ntttthis._cloneGroups.delete( id );ntt}nt}n}nn// Helper function for
`view.writer.wrap`. Checks if given element has any children that are not
ui elements.nfunction _hasNonUiChildren( parent ) {ntreturn Array.from(
parent.getChildren() ).some( child =&gt; !child.is( &#39;uiElement&#39; )
);n}nn/**n * Attribute element need to be instance of attribute element.n
*n * @error view-writer-wrap-invalid-attributen */nn// Returns first parent
container of specified {@link module:engine/view/position~Position
Position}.n// Position&#39;s parent node is checked as first, then next
parents are checked.n// Note that {@link
module:engine/view/documentfragment~DocumentFragment DocumentFragment} is
treated like a container.n//n// @param
{module:engine/view/position~Position} position Position used as a start
point to locate parent container.n// @returns
{module:engine/view/containerelement~ContainerElement|module:engine/view/documentfragment~DocumentFragment|undefined}n//
Parent container element or `undefined` if container is not found.nfunction
getParentContainer( position ) {ntlet parent = position.parent;nntwhile (
!isContainerOrFragment( parent ) ) {nttif ( !parent ) {ntttreturn
undefined;ntt}nttparent = parent.parent;nt}nntreturn parent;n}nn// Checks
if first {@link module:engine/view/attributeelement~AttributeElement
AttributeElement} provided to the functionn// can be wrapped otuside second
element. It is done by comparing elements&#39;n// {@link
module:engine/view/attributeelement~AttributeElement#priority priorities},
if both have same priorityn// {@link
module:engine/view/element~Element#getIdentity identities} are
compared.n//n// @param
{module:engine/view/attributeelement~AttributeElement} an// @param
{module:engine/view/attributeelement~AttributeElement} bn// @returns
{Boolean}nfunction shouldABeOutsideB( a, b ) {ntif ( a.priority &lt;
b.priority ) {nttreturn true;nt} else if ( a.priority &gt; b.priority )
{nttreturn false;nt}nnt// When priorities are equal and names are different
- use identities.ntreturn a.getIdentity() &lt; b.getIdentity();n}nn//
Returns new position that is moved to near text node. Returns same position
if there is no text node before of aftern// specified
position.n//n//tt&lt;p&gt;foo[]&lt;/p&gt;  -&gt; 
&lt;p&gt;foo{}&lt;/p&gt;n//tt&lt;p&gt;[]foo&lt;/p&gt;  -&gt; 
&lt;p&gt;{}foo&lt;/p&gt;n//n// @param
{module:engine/view/position~Position} positionn// @returns
{module:engine/view/position~Position} Position located inside text node or
same position if there is no text nodesn// before or after position
location.nfunction movePositionToTextNode( position ) {ntconst nodeBefore =
position.nodeBefore;nntif ( nodeBefore &amp;&amp; nodeBefore.is(
&#39;text&#39; ) ) {nttreturn new Position( nodeBefore,
nodeBefore.data.length );nt}nntconst nodeAfter = position.nodeAfter;nntif (
nodeAfter &amp;&amp; nodeAfter.is( &#39;text&#39; ) ) {nttreturn new
Position( nodeAfter, 0 );nt}nntreturn position;n}nn// Breaks text node into
two text nodes when possible.n//n//tt&lt;p&gt;foo{}bar&lt;/p&gt; -&gt;
&lt;p&gt;foo[]bar&lt;/p&gt;n//tt&lt;p&gt;{}foobar&lt;/p&gt; -&gt;
&lt;p&gt;[]foobar&lt;/p&gt;n//tt&lt;p&gt;foobar{}&lt;/p&gt; -&gt;
&lt;p&gt;foobar[]&lt;/p&gt;n//n// @param
{module:engine/view/position~Position} position Position that need to be
placed inside text node.n// @returns {module:engine/view/position~Position}
New position after breaking text node.nfunction breakTextNode( position )
{ntif ( position.offset == position.parent.data.length ) {nttreturn new
Position( position.parent.parent, position.parent.index + 1 );nt}nntif (
position.offset === 0 ) {nttreturn new Position( position.parent.parent,
position.parent.index );nt}nnt// Get part of the text that need to be
moved.ntconst textToMove = position.parent.data.slice( position.offset
);nnt// Leave rest of the text in position&#39;s
parent.ntposition.parent._data = position.parent.data.slice( 0,
position.offset );nnt// Insert new text node after position&#39;s parent
text node.ntposition.parent.parent._insertChild( position.parent.index + 1,
new Text( textToMove ) );nnt// Return new position between two newly
created text nodes.ntreturn new Position( position.parent.parent,
position.parent.index + 1 );n}nn// Merges two text nodes into first node.
Removes second node and returns merge position.n//n// @param
{module:engine/view/text~Text} t1 First text node to merge. Data from
second text node will be moved at the end ofn// this text node.n// @param
{module:engine/view/text~Text} t2 Second text node to merge. This node will
be removed after merging.n// @returns
{module:engine/view/position~Position} Position after merging text
nodes.nfunction mergeTextNodes( t1, t2 ) {nt// Merge text data into first
text node and remove second one.ntconst nodeBeforeLength =
t1.data.length;ntt1._data += t2.data;ntt2._remove();nntreturn new Position(
t1, nodeBeforeLength );n}nn// Returns `true` if range is located in same
{@link module:engine/view/attributeelement~AttributeElement
AttributeElement}n// (`start` and `end` positions are located inside same
{@link module:engine/view/attributeelement~AttributeElement
AttributeElement}),n// starts on 0 offset and ends after last child
node.n//n// @param {module:engine/view/range~Range} Rangen// @returns
{Boolean}nfunction rangeSpansOnAllChildren( range ) {ntreturn
range.start.parent == range.end.parent &amp;&amp; range.start.parent.is(
&#39;attributeElement&#39; ) &amp;&amp;nttrange.start.offset === 0
&amp;&amp; range.end.offset === range.start.parent.childCount;n}nn// Checks
if provided nodes are valid to insert. Checks if each node is an instance
ofn// {@link module:engine/view/text~Text Text} or {@link
module:engine/view/attributeelement~AttributeElement AttributeElement},n//
{@link module:engine/view/containerelement~ContainerElement
ContainerElement},n// {@link module:engine/view/emptyelement~EmptyElement
EmptyElement} orn// {@link module:engine/view/uielement~UIElement
UIElement}.n//n// Throws {@link module:utils/ckeditorerror~CKEditorError
CKEditorError} `view-writer-insert-invalid-node` when nodes to insertn//
contains instances that are not {@link module:engine/view/text~Text
Texts},n// {@link module:engine/view/emptyelement~EmptyElement
EmptyElements},n// {@link module:engine/view/uielement~UIElement
UIElements},n// {@link module:engine/view/attributeelement~AttributeElement
AttributeElements} orn// {@link
module:engine/view/containerelement~ContainerElement
ContainerElements}.n//n// @param
Iterable.&lt;module:engine/view/text~Text|module:engine/view/attributeelement~AttributeElementn//
|module:engine/view/containerelement~ContainerElement&gt; nodesnfunction
validateNodesToInsert( nodes ) {ntfor ( const node of nodes ) {nttif (
!validNodesToInsert.some( ( validNode =&gt; node instanceof validNode ) ) )
{ // eslint-disable-line no-use-before-definenttt/**nttt * Inserted nodes
should be valid to insert. of {@link
module:engine/view/attributeelement~AttributeElement AttributeElement},nttt
* {@link module:engine/view/containerelement~ContainerElement
ContainerElement},nttt * {@link
module:engine/view/emptyelement~EmptyElement EmptyElement},nttt * {@link
module:engine/view/uielement~UIElement UIElement}, {@link
module:engine/view/text~Text Text}.nttt *nttt * @error
view-writer-insert-invalid-nodenttt */ntttthrow new CKEditorError(
&#39;view-writer-insert-invalid-node&#39; );ntt}nnttif ( !node.is(
&#39;text&#39; ) ) {ntttvalidateNodesToInsert( node.getChildren()
);ntt}nt}n}nnconst validNodesToInsert = [ Text, AttributeElement,
ContainerElement, EmptyElement, UIElement ];nn// Checks if node is
ContainerElement or DocumentFragment, because in most cases they should be
treated the same way.n//n// @param {module:engine/view/node~Node} noden//
@returns {Boolean} Returns `true` if node is instance of ContainerElement
or DocumentFragment.nfunction isContainerOrFragment( node ) {ntreturn node
&amp;&amp; ( node.is( &#39;containerElement&#39; ) || node.is(
&#39;documentFragment&#39; ) );n}nn// Checks if {@link
module:engine/view/range~Range#start range start} and {@link
module:engine/view/range~Range#end range end} are placedn// inside same
{@link module:engine/view/containerelement~ContainerElement container
element}.n// Throws {@link module:utils/ckeditorerror~CKEditorError
CKEditorError} `view-writer-invalid-range-container` when validation
fails.n//n// @param {module:engine/view/range~Range} rangenfunction
validateRangeContainer( range ) {ntconst startContainer =
getParentContainer( range.start );ntconst endContainer =
getParentContainer( range.end );nntif ( !startContainer || !endContainer ||
startContainer !== endContainer ) {ntt/**ntt * Range container is invalid.
This can happen if {@link module:engine/view/range~Range#start range start}
andntt * {@link module:engine/view/range~Range#end range end} positions are
not placed inside same container orntt * parent container for these
positions cannot be found.ntt *ntt * @error
view-writer-invalid-range-containerntt */nttthrow new CKEditorError(
&#39;view-writer-invalid-range-container&#39; );nt}n}nn// Checks if two
attribute elements can be joined together. Elements can be joined together
if, and only ifn// they do not have ids specified.n//n// @privaten// @param
{module:engine/view/element~Element} an// @param
{module:engine/view/element~Element} bn// @returns {Boolean}nfunction
canBeJoined( a, b ) {ntreturn a.id === null &amp;&amp; b.id ===
null;n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/view/writer.jsn// module id = nulln// module chunks
= ”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben.
All rights reserved.n * For licensing, see LICENSE.md.n */nn/* globals
window, Text */nnimport { keyCodes } from
&#39;@ckeditor/ckeditor5-utils/src/keyboard&#39;;nn/**n * Set of utils
related to block and inline fillers handling.n *n * Browsers do not allow
to put caret in elements which does not have height. Because of it, we need
to fill alln * empty elements which should be selectable with elements or
characters called "fillers&quot;. Unfortunately there is no onen *
universal filler, this is why two types are uses:n *n * * Block filler is
an element which fill block elements, like `&lt;p&gt;`. CKEditor uses
`<br>` as a block filler during the editing,n * as browsers do natively. So
instead of an empty `&lt;p&gt;` there will be `&lt;p&gt;<br>&lt;/p&gt;`.
The advantage of block filler is thatn * it is transparent for the
selection, so when the caret is before the `<br>` and user presses right
arrow he will ben * moved to the next paragraph, not after the `<br>`. The
disadvantage is that it breaks a block, so it can not be usedn * in the
middle of a line of text. The {@link module:engine/view/filler~BR_FILLER
`<br>` filler} can be replaced with any othern * character in the data
output, for instance {@link module:engine/view/filler~NBSP_FILLER
non-breaking space}.n *n * * Inline filler is a filler which does not break
a line of text, so it can be used inside the text, for instance in the
emptyn * `<strong>` surrendered by text: `foo&lt;b&gt;</strong>bar`, if we
want to put the caret there. CKEditor uses a sequence of the zero-widthn *
spaces as an {@link module:engine/view/filler~INLINE_FILLER inline filler}
having the predeterminedn * {@link
module:engine/view/filler~INLINE_FILLER_LENGTH length}. A sequence is used,
instead of a single character ton * avoid treating random zero-width spaces
as the inline filler. Disadvantage of the inline filler is that it is notn
* transparent for the selection. The arrow key moves the caret between
zero-width spaces characters, so the additionaln * code is needed to handle
the caret.n *n * Both inline and block fillers are handled by the {@link
module:engine/view/renderer~Renderer renderer} and are not present in then
* view.n *n * @module engine/view/fillern */nn/**n * `<br> filler creator.
This is a function which creates `&lt;br
data-cke-filler=&quot;true&quot;&gt;` element.n * It defines how the filler
is created.n *n * @see module:engine/view/filler~NBSP_FILLERn * @functionn
*/nexport const BR_FILLER = domDocument =&gt; {ntconst fillerBr =
domDocument.createElement( &#39;br&#39; );ntfillerBr.dataset.ckeFiller =
true;nntreturn fillerBr;n};nn/**n * Non-breaking space filler creator. This
is a function which creates `&amp;nbsp;` text node.n * It defines how the
filler is created.n *n * @see module:engine/view/filler~BR_FILLERn *
@functionn */nexport const NBSP_FILLER = domDocument =&gt;
domDocument.createTextNode( &#39;\u00A0&#39; );nn/**n * Length of the
{@link module:engine/view/filler~INLINE_FILLER INLINE_FILLER}.n */nexport
const INLINE_FILLER_LENGTH = 7;nn/**n * Inline filler which is sequence of
the zero width spaces.n */nexport let INLINE_FILLER = &#39;&#39;;nnfor (
let i = 0; i &lt; INLINE_FILLER_LENGTH; i++ ) {ntINLINE_FILLER +=
&#39;\u200b&#39;;n}nn/**n * Checks if the node is a text node which starts
with the {@link module:engine/view/filler~INLINE_FILLER inline filler}.n *n
*ttstartsWithFiller( document.createTextNode( INLINE_FILLER ) ); // truen
*ttstartsWithFiller( document.createTextNode( INLINE_FILLER + &#39;foo&#39;
) ); // truen *ttstartsWithFiller( document.createTextNode( &#39;foo&#39; )
); // falsen *ttstartsWithFiller( document.createElement( &#39;p&#39; ) );
// falsen *n * @param {Node} domNode DOM node.n * @returns {Boolean} True
if the text node starts with the {@link
module:engine/view/filler~INLINE_FILLER inline filler}.n */nexport function
startsWithFiller( domNode ) {ntreturn ( domNode instanceof Text )
&amp;&amp; ( domNode.data.substr( 0, INLINE_FILLER_LENGTH ) ===
INLINE_FILLER );n}nn/**n * Checks if the text node contains only the {@link
module:engine/view/filler~INLINE_FILLER inline filler}.n *n
*ttisInlineFiller( document.createTextNode( INLINE_FILLER ) ); // truen
*ttisInlineFiller( document.createTextNode( INLINE_FILLER + &#39;foo&#39; )
); // falsen *n * @param {Text} domText DOM text node.n * @returns
{Boolean} True if the text node contains only the {@link
module:engine/view/filler~INLINE_FILLER inline filler}.n */nexport function
isInlineFiller( domText ) {ntreturn domText.data.length ==
INLINE_FILLER_LENGTH &amp;&amp; startsWithFiller( domText );n}nn/**n * Get
string data from the text node, removing an {@link
module:engine/view/filler~INLINE_FILLER inline filler} from it,n * if text
node contains it.n *n *ttgetDataWithoutFiller( document.createTextNode(
INLINE_FILLER + &#39;foo&#39; ) ) == &#39;foo&#39; // truen
*ttgetDataWithoutFiller( document.createTextNode( &#39;foo&#39; ) ) ==
&#39;foo&#39; // truen *n * @param {Text} domText DOM text node, possible
with inline filler.n * @returns {String} Data without filler.n */nexport
function getDataWithoutFiller( domText ) {ntif ( startsWithFiller( domText
) ) {nttreturn domText.data.slice( INLINE_FILLER_LENGTH );nt} else
{nttreturn domText.data;nt}n}nn// Cache block fillers templates to improve
performance.nconst templateBlockFillers = new WeakMap();nn/**n * Checks if
the node is an instance of the block filler of the given type.n *n *ttconst
brFillerInstance = BR_FILLER( document );n *ttisBlockFiller(
brFillerInstance, BR_FILLER ); // truen *n * @param {Node} domNode DOM node
to check.n * @param {Function} blockFiller Block filler creator.n *
@returns {Boolean} True if text node contains only {@link
module:engine/view/filler~INLINE_FILLER inline filler}.n */nexport function
isBlockFiller( domNode, blockFiller ) {ntlet templateBlockFiller =
templateBlockFillers.get( blockFiller );nntif ( !templateBlockFiller )
{ntttemplateBlockFiller = blockFiller( window.document
);ntttemplateBlockFillers.set( blockFiller, templateBlockFiller
);nt}nntreturn domNode.isEqualNode( templateBlockFiller );n}nn/**n * Assign
key observer which move cursor from the end of the inline filler to the
beginning of it whenn * the left arrow is pressed, so the filler does not
break navigation.n *n * @param {module:engine/view/view~View} view View
controller instance we should inject quirks handling on.n */nexport
function injectQuirksHandling( view ) {ntview.document.on(
&#39;keydown&#39;, jumpOverInlineFiller );n}nn// Move cursor from the end
of the inline filler to the beginning of it when, so the filler does not
break navigation.nfunction jumpOverInlineFiller( evt, data ) {ntif (
data.keyCode == keyCodes.arrowleft ) {nttconst domSelection =
data.domTarget.ownerDocument.defaultView.getSelection();nnttif (
domSelection.rangeCount == 1 &amp;&amp; domSelection.getRangeAt( 0
).collapsed ) {ntttconst domParent = domSelection.getRangeAt( 0
).startContainer;ntttconst domOffset = domSelection.getRangeAt( 0
).startOffset;nntttif ( startsWithFiller( domParent ) &amp;&amp; domOffset
&lt;= INLINE_FILLER_LENGTH ) {nttttdomSelection.collapse( domParent, 0
);nttt}ntt}nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/view/filler.jsn// module id = nulln// module chunks
= ”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben.
All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
utils/diffn */nn// The following code is based on the "O(NP) Sequence
Comparison Algorithm&quot;n// by Sun Wu, Udi Manber, Gene Myers, Webb
Miller.nn/**n * Calculates the difference between two arrays or strings
producing an array containing a list of changesn * necessary to transform
input into output.n *n *ttdiff( &#39;aba&#39;, &#39;acca&#39; ); // [
&#39;equal&#39;, &#39;insert&#39;, &#39;insert&#39;, &#39;delete&#39;,
&#39;equal&#39; ]n *n * @param {Array|String} a Input array or string.n *
@param {Array|String} b Output array or string.n * @param {Function} [cmp]
Optional function used to compare array values, by default === is used.n *
@returns {Array} Array of changes.n */nexport default function diff( a, b,
cmp ) {nt// Set the comparator function.ntcmp = cmp || function( a, b )
{nttreturn a === b;nt};nnt// Temporary action type statics.ntlet _insert,
_delete;nnt// Swapped the arrays to use the shorter one as the first
one.ntif ( b.length &lt; a.length ) {nttconst tmp = a;nntta = b;nttb =
tmp;nntt// We swap the action types as well.ntt_insert =
&#39;delete&#39;;ntt_delete = &#39;insert&#39;;nt} else {ntt_insert =
&#39;insert&#39;;ntt_delete = &#39;delete&#39;;nt}nntconst m =
a.length;ntconst n = b.length;ntconst delta = n - m;nnt// Edit scripts, for
each diagonal.ntconst es = {};nt// Furthest points, the furthest y we can
get on each diagonal.ntconst fp = {};nntfunction snake( k ) {ntt// We use
-1 as an alternative below to handle initial values ( instead of filling
the fp with -1 first ).ntt// Furthest points (y) on the diagonal below
k.nttconst y1 = ( fp[ k - 1 ] !== undefined ? fp[ k - 1 ] : -1 ) + 1;ntt//
Furthest points (y) on the diagonal above k.nttconst y2 = fp[ k + 1 ] !==
undefined ? fp[ k + 1 ] : -1;ntt// The way we should go to get
further.nttconst dir = y1 &gt; y2 ? -1 : 1;nntt// Clone previous changes
array (if any).nttif ( es[ k + dir ] ) {ntttes[ k ] = es[ k + dir ].slice(
0 );ntt}nntt// Create changes array.nttif ( !es[ k ] ) {ntttes[ k ] =
[];ntt}nntt// Push the action.nttes[ k ].push( y1 &gt; y2 ? _insert :
_delete );nntt// Set the beginning coordinates.nttlet y = Math.max( y1, y2
);nttlet x = y - k;nntt// Traverse the diagonal as long as the values
match.nttwhile ( x &lt; m &amp;&amp; y &lt; n &amp;&amp; cmp( a[ x ], b[ y
] ) ) {ntttx++;nttty++;nttt// Push no change action.ntttes[ k ].push(
&#39;equal&#39; );ntt}nnttreturn y;nt}nntlet p = 0;ntlet k;nnt// Traverse
the graph until we reach the end of the longer string.ntdo {ntt// Updates
furthest points and edit scripts for diagonals below delta.nttfor ( k = -p;
k &lt; delta; k++ ) {ntttfp[ k ] = snake( k );ntt}nntt// Updates furthest
points and edit scripts for diagonals above delta.nttfor ( k = delta + p; k
&gt; delta; k– ) {ntttfp[ k ] = snake( k );ntt}nntt// Updates furthest
point and edit script for the delta diagonal.ntt// note that the delta
diagonal is the one which goes through the sink (m, n).nttfp[ delta ] =
snake( delta );nnttp++;nt} while ( fp[ delta ] !== n );nnt// Return the
final list of edit changes.nt// We remove the first item that represents
the action for the injected nulls.ntreturn es[ delta ].slice( 1
);n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/diff.jsn// module id = nulln// module chunks =
”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben. All
rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
utils/dom/insertatn */nn/**n * Inserts node to the parent at given index.n
*n * @param {Element} parentElement Parent element.n * @param {Number}
index Insertions index.n * @param {Node} nodeToInsert Node to insert.n
*/nexport default function insertAt( parentElement, index, nodeToInsert )
{ntparentElement.insertBefore( nodeToInsert, parentElement.childNodes[
index ] || null );n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/dom/insertat.jsn// module id = nulln// module chunks
= ”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben.
All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
utils/dom/removen */nn/**n * Removes given node from parent.n *n * @param
{Node} node Node to remove.n */nexport default function remove( node )
{ntconst parent = node.parentNode;nntif ( parent ) {nttparent.removeChild(
node );nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/dom/remove.jsn// module id = nulln// module chunks =
”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben. All
rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
utils/dom/istextn */nn/**n * Checks if the object is a native DOM Text
node.n *n * @param {*} objn * @returns {Boolean}n */nexport default
function isText( obj ) {ntreturn Object.prototype.toString.call( obj ) ==
&#39;[object Text]&#39;;n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/dom/istext.jsn// module id = nulln// module chunks =
”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben. All
rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
engine/view/renderern */nnimport ViewText from &#39;./text&#39;;nimport
ViewPosition from &#39;./position&#39;;nimport { INLINE_FILLER,
INLINE_FILLER_LENGTH, startsWithFiller, isInlineFiller, isBlockFiller }
from &#39;./filler&#39;;nnimport mix from
&#39;@ckeditor/ckeditor5-utils/src/mix&#39;;nimport diff from
&#39;@ckeditor/ckeditor5-utils/src/diff&#39;;nimport insertAt from
&#39;@ckeditor/ckeditor5-utils/src/dom/insertat&#39;;nimport remove from
&#39;@ckeditor/ckeditor5-utils/src/dom/remove&#39;;nimport ObservableMixin
from &#39;@ckeditor/ckeditor5-utils/src/observablemixin&#39;;nimport
CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nimport isText from
&#39;@ckeditor/ckeditor5-utils/src/dom/istext&#39;;nn/**n * Renderer
updates DOM structure and selection, to make them a reflection of the view
structure and selection.n *n * View nodes which may need to be rendered
needs to be {@link module:engine/view/renderer~Renderer#markToSync
marked}.n * Then, on {@link module:engine/view/renderer~Renderer#render
render}, renderer compares view nodes with DOM nodesn * in order to check
which ones really need to be refreshed. Finally, it creates DOM nodes from
these view nodes,n * {@link
module:engine/view/domconverter~DomConverter#bindElements binds} them and
inserts into the DOM tree.n *n * Every time {@link
module:engine/view/renderer~Renderer#render render} is called, renderer
additionally checks ifn * {@link
module:engine/view/renderer~Renderer#selection selection} needs update and
updates it if so.n *n * Renderer uses {@link
module:engine/view/domconverter~DomConverter} to transform and bind nodes.n
*/nexport default class Renderer {nt/**nt * Creates a renderer instance.nt
*nt * @param {module:engine/view/domconverter~DomConverter} domConverter
Converter instance.nt * @param
{module:engine/view/documentselection~DocumentSelection} selection View
selection.nt */ntconstructor( domConverter, selection ) {ntt/**ntt * Set of
DOM Documents instances.ntt *ntt * @readonlyntt * @member
{Set.&lt;Document&gt;}ntt */nttthis.domDocuments = new Set();nntt/**ntt *
Converter instance.ntt *ntt * @readonlyntt * @member
{module:engine/view/domconverter~DomConverter}ntt */nttthis.domConverter =
domConverter;nntt/**ntt * Set of nodes which attributes changed and may
need to be rendered.ntt *ntt * @readonlyntt * @member
{Set.&lt;module:engine/view/node~Node&gt;}ntt */nttthis.markedAttributes =
new Set();nntt/**ntt * Set of elements which child lists changed and may
need to be rendered.ntt *ntt * @readonlyntt * @member
{Set.&lt;module:engine/view/node~Node&gt;}ntt */nttthis.markedChildren =
new Set();nntt/**ntt * Set of text nodes which text data changed and may
need to be rendered.ntt *ntt * @readonlyntt * @member
{Set.&lt;module:engine/view/node~Node&gt;}ntt */nttthis.markedTexts = new
Set();nntt/**ntt * View selection. Renderer updates DOM selection based on
the view selection.ntt *ntt * @readonlyntt * @member
{module:engine/view/documentselection~DocumentSelection}ntt
*/nttthis.selection = selection;nntt/**ntt * The text node in which the
inline filler was rendered.ntt *ntt * @privatentt * @member {Text}ntt
*/nttthis._inlineFiller = null;nntt/**ntt * Indicates if the view document
is focused and selection can be rendered. Selection will not be rendered
ifntt * this is set to `false`.ntt *ntt * @member {Boolean}ntt
*/nttthis.isFocused = false;nntt/**ntt * DOM element containing fake
selection.ntt *ntt * @privatentt * @type {null|HTMLElement}ntt
*/nttthis._fakeSelectionContainer = null;nt}nnt/**nt * Mark node to be
synchronized.nt *nt * Note that only view nodes which parents have
corresponding DOM elements need to be marked to be synchronized.nt *nt *
@see markedAttributesnt * @see markedChildrennt * @see markedTextsnt *nt *
@param {module:engine/view/document~ChangeType} type Type of the change.nt
* @param {module:engine/view/node~Node} node Node to be marked.nt
*/ntmarkToSync( type, node ) {nttif ( type === &#39;text&#39; ) {ntttif (
this.domConverter.mapViewToDom( node.parent ) ) {nttttthis.markedTexts.add(
node );nttt}ntt} else {nttt// If the node has no DOM element it is not
rendered yet,nttt// its children/attributes do not need to be marked to be
sync.ntttif ( !this.domConverter.mapViewToDom( node ) )
{nttttreturn;nttt}nntttif ( type === &#39;attributes&#39; )
{nttttthis.markedAttributes.add( node );nttt} else if ( type ===
&#39;children&#39; ) {nttttthis.markedChildren.add( node );nttt} else
{ntttt/**ntttt * Unknown type passed to Renderer.markToSync.ntttt *ntttt *
@error renderer-unknown-typentttt */nttttthrow new CKEditorError(
&#39;view-renderer-unknown-type: Unknown type passed to
Renderer.markToSync.&#39; );nttt}ntt}nt}nnt/**nt * Render method checks
{@link markedAttributes},nt * {@link markedChildren} and {@link
markedTexts} and updates allnt * nodes which need to be updated. Then it
clears all three sets. Also, every time render is called it compares andnt
* if needed updates the selection.nt *nt * Renderer tries not to break text
composition (e.g. IME) and x-index of the selection,nt * so it does as
little as it is needed to update the DOM.nt *nt * For attributes it adds
new attributes to DOM elements, updates values and removesnt * attributes
which do not exist in the view element.nt *nt * For text nodes it updates
the text string if it is different. Note that if parent element is marked
as an elementnt * which changed child list, text node update will not be
done, because it may not be possible tont * {@link
module:engine/view/domconverter~DomConverter#findCorrespondingDomText find
a corresponding DOM text}.nt * The change will be handled in the parent
element.nt *nt * For elements, which child lists have changed, it
calculates a {@link module:utils/diff~diff} and adds or removes children
which havent * changed.nt *nt * Rendering also handles {@link
module:engine/view/filler fillers}. Especially, it checks if the inline
filler is needednt * at selection position and adds or removes it. To
prevent breaking text composition inline filler will not bent * removed as
long selection is in the text node which needed it at first.nt */ntrender()
{nttlet inlineFillerPosition;nntt// There was inline filler rendered in the
DOM but it&#39;s notntt// at the selection position any more, so we can
remove itntt// (cause even if it&#39;s needed, it must be placed in another
location).nttif ( this._inlineFiller &amp;&amp;
!this._isSelectionInInlineFiller() )
{ntttthis._removeInlineFiller();ntt}nntt// If we&#39;ve got the filler,
let&#39;s try to guess its position in the view.nttif ( this._inlineFiller
) {ntttinlineFillerPosition = this._getInlineFillerPosition();ntt}ntt//
Otherwise, if it&#39;s needed, create it at the selection position.nttelse
if ( this._needsInlineFillerAtSelection() ) {ntttinlineFillerPosition =
this.selection.getFirstPosition();nnttt// Do not use `markToSync` so it
will be added even if the parent is already
added.ntttthis.markedChildren.add( inlineFillerPosition.parent
);ntt}nnttfor ( const element of this.markedAttributes )
{ntttthis._updateAttrs( element );ntt}nnttfor ( const element of
this.markedChildren ) {ntttthis._updateChildren( element, {
inlineFillerPosition } );ntt}nnttfor ( const node of this.markedTexts )
{ntttif ( !this.markedChildren.has( node.parent ) &amp;&amp;
this.domConverter.mapViewToDom( node.parent ) ) {nttttthis._updateText(
node, { inlineFillerPosition } );nttt}ntt}nntt// Check whether the inline
filler is required and where it really is in the DOM.ntt// At this point in
most cases it will be in the DOM, but there are exceptions.ntt// For
example, if the inline filler was deep in the created DOM structure, it
will not be created.ntt// Similarly, if it was removed at the beginning of
this function and then neither text nor children were updated,ntt// it will
not be present.ntt// Fix those and similar scenarios.nttif (
inlineFillerPosition ) {ntttconst fillerDomPosition =
this.domConverter.viewPositionToDom( inlineFillerPosition );ntttconst
domDocument = fillerDomPosition.parent.ownerDocument;nntttif (
!startsWithFiller( fillerDomPosition.parent ) ) {ntttt// Filler has not
been created at filler position. Create it now.nttttthis._inlineFiller =
this._addInlineFiller( domDocument, fillerDomPosition.parent,
fillerDomPosition.offset );nttt} else {ntttt// Filler has been found, save
it.nttttthis._inlineFiller = fillerDomPosition.parent;nttt}ntt} else
{nttt// There is no filler needed.ntttthis._inlineFiller =
null;ntt}nnttthis._updateSelection();nttthis._updateFocus();nnttthis.markedTexts.clear();nttthis.markedAttributes.clear();nttthis.markedChildren.clear();nt}nnt/**nt
* Adds inline filler at given position.nt *nt * The position can be given
as an array of DOM nodes and an offset in that array,nt * or a DOM parent
element and offset in that element.nt *nt * @privatent * @param {Document}
domDocumentnt * @param {Element|Array.&lt;Node&gt;} domParentOrArraynt *
@param {Number} offsetnt * @returns {Text} The DOM text node that contains
inline filler.nt */nt_addInlineFiller( domDocument, domParentOrArray,
offset ) {nttconst childNodes = domParentOrArray instanceof Array ?
domParentOrArray : domParentOrArray.childNodes;nttconst nodeAfterFiller =
childNodes[ offset ];nnttif ( isText( nodeAfterFiller ) )
{ntttnodeAfterFiller.data = INLINE_FILLER +
nodeAfterFiller.data;nntttreturn nodeAfterFiller;ntt} else {ntttconst
fillerNode = domDocument.createTextNode( INLINE_FILLER );nntttif (
Array.isArray( domParentOrArray ) ) {nttttchildNodes.splice( offset, 0,
fillerNode );nttt} else {nttttinsertAt( domParentOrArray, offset,
fillerNode );nttt}nntttreturn fillerNode;ntt}nt}nnt/**nt * Gets the
position of the inline filler based on the current selection.nt * Here, we
assume that we know that the filler is needed andnt * {@link
#_isSelectionInInlineFiller is at the selection position}, and, since
it&#39;s needed,nt * it&#39;s somewhere at the selection postion.nt *nt *
Note: we cannot restore the filler position based on the filler&#39;s DOM
text node, becausent * when this method is called (before rendering) the
bindings will often be broken. View to DOMnt * bindings are only dependable
after rendering.nt *nt * @privatent * @returns
{module:engine/view/position~Position}nt */nt_getInlineFillerPosition()
{nttconst firstPos = this.selection.getFirstPosition();nnttif (
firstPos.parent.is( &#39;text&#39; ) ) {ntttreturn
ViewPosition.createBefore( this.selection.getFirstPosition().parent );ntt}
else {ntttreturn firstPos;ntt}nt}nnt/**nt * Returns `true` if the selection
hasn&#39;t left the inline filler&#39;s text node.nt * If it is `true` it
means that the filler had been added for a reason and the selection does
notnt * left the filler&#39;s text node. E.g. the user can be in the middle
of a composition so it should not be touched.nt *nt * @privatent * @returns
{Boolean} True if the inline filler and selection are in the same place.nt
*/nt_isSelectionInInlineFiller() {nttif ( this.selection.rangeCount != 1 ||
!this.selection.isCollapsed ) {ntttreturn false;ntt}nntt// Note, we
can&#39;t check if selection&#39;s position equals position of thentt//
this._inlineFiller node, because of #663. We may not be able to
calculatentt// the filler&#39;s position in the view at this stage.ntt//
Instead, we check it the other way – whether selection is anchored inntt//
that text node or next to it.nntt// Possible options are:ntt//
"FILLER{}&quot;ntt// "FILLERadded-text{}&quot;nttconst selectionPosition =
this.selection.getFirstPosition();nttconst position =
this.domConverter.viewPositionToDom( selectionPosition );nnttif ( position
&amp;&amp; isText( position.parent ) &amp;&amp; startsWithFiller(
position.parent ) ) {ntttreturn true;ntt}nnttreturn false;nt}nnt/**nt *
Removes the inline filler.nt *nt * @privatent */nt_removeInlineFiller()
{nttconst domFillerNode = this._inlineFiller;nntt// Something weird
happened and the stored node doesn&#39;t contain the filler&#39;s
text.nttif ( !startsWithFiller( domFillerNode ) ) {nttt/**nttt * The inline
filler node was lost. Most likely, something overwrote the filler text
nodenttt * in the DOM.nttt *nttt * @error view-renderer-filler-was-lostnttt
*/ntttthrow new CKEditorError( &#39;view-renderer-filler-was-lost: The
inline filler node was lost.&#39; );ntt}nnttif ( isInlineFiller(
domFillerNode ) ) {ntttdomFillerNode.parentNode.removeChild( domFillerNode
);ntt} else {ntttdomFillerNode.data = domFillerNode.data.substr(
INLINE_FILLER_LENGTH );ntt}nnttthis._inlineFiller = null;nt}nnt/**nt *
Checks if the inline {@link module:engine/view/filler filler} should be
added.nt *nt * @privatent * @returns {Boolean} True if the inline fillers
should be added.nt */nt_needsInlineFillerAtSelection() {nttif (
this.selection.rangeCount != 1 || !this.selection.isCollapsed ) {ntttreturn
false;ntt}nnttconst selectionPosition =
this.selection.getFirstPosition();nttconst selectionParent =
selectionPosition.parent;nttconst selectionOffset =
selectionPosition.offset;nntt// If there is no DOM root we do not care
about fillers.nttif ( !this.domConverter.mapViewToDom( selectionParent.root
) ) {ntttreturn false;ntt}nnttif ( !( selectionParent.is( &#39;element&#39;
) ) ) {ntttreturn false;ntt}nntt// Prevent adding inline filler inside
elements with contenteditable=false.ntt// <a
href="https://github.com/ckeditor/ckeditor5-engine/issues/1170\n\t\tif">github.com/ckeditor/ckeditor5-engine/issues/1170nttif</a>
( !_isEditable( selectionParent ) ) {ntttreturn false;ntt}nntt// We have
block filler, we do not need inline one.nttif ( selectionOffset ===
selectionParent.getFillerOffset() ) {ntttreturn false;ntt}nnttconst
nodeBefore = selectionPosition.nodeBefore;nttconst nodeAfter =
selectionPosition.nodeAfter;nnttif ( nodeBefore instanceof ViewText ||
nodeAfter instanceof ViewText ) {ntttreturn false;ntt}nnttreturn
true;nt}nnt/**nt * Checks if text needs to be updated and possibly updates
it.nt *nt * @privatent * @param {module:engine/view/text~Text} viewText
View text to update.nt * @param {Object} optionsnt * @param
{module:engine/view/position~Position} options.inlineFillerPosition The
position on which the inlinent * filler should be rendered.nt
*/nt_updateText( viewText, options ) {nttconst domText =
this.domConverter.findCorrespondingDomText( viewText );nttconst newDomText
= this.domConverter.viewToDom( viewText, domText.ownerDocument );nnttconst
actualText = domText.data;nttlet expectedText = newDomText.data;nnttconst
filler = options.inlineFillerPosition;nnttif ( filler &amp;&amp;
filler.parent == viewText.parent &amp;&amp; filler.offset == viewText.index
) {ntttexpectedText = INLINE_FILLER + expectedText;ntt}nnttif ( actualText
!= expectedText ) {ntttdomText.data = expectedText;ntt}nt}nnt/**nt * Checks
if attributes list needs to be updated and possibly updates it.nt *nt *
@privatent * @param {module:engine/view/element~Element} viewElement View
element to update.nt */nt_updateAttrs( viewElement ) {nttconst domElement =
this.domConverter.mapViewToDom( viewElement );nttconst domAttrKeys =
Array.from( domElement.attributes ).map( attr =&gt; attr.name );nttconst
viewAttrKeys = viewElement.getAttributeKeys();nntt// Add or overwrite
attributes.nttfor ( const key of viewAttrKeys )
{ntttdomElement.setAttribute( key, viewElement.getAttribute( key )
);ntt}nntt// Remove from DOM attributes which do not exists in the
view.nttfor ( const key of domAttrKeys ) {ntttif (
!viewElement.hasAttribute( key ) ) {nttttdomElement.removeAttribute( key
);nttt}ntt}nt}nnt/**nt * Checks if elements child list needs to be updated
and possibly updates it.nt *nt * @privatent * @param
{module:engine/view/element~Element} viewElement View element to update.nt
* @param {Object} optionsnt * @param {module:engine/view/position~Position}
options.inlineFillerPosition The position on which the inlinent * filler
should be rendered.nt */nt_updateChildren( viewElement, options ) {nttconst
domConverter = this.domConverter;nttconst domElement =
domConverter.mapViewToDom( viewElement );nnttif ( !domElement ) {nttt// If
there is no `domElement` it means that it was already removed from
DOM.nttt// There is no need to update it. It will be updated when
re-inserted.ntttreturn;ntt}nnttconst domDocument =
domElement.ownerDocument;nttconst filler =
options.inlineFillerPosition;nttconst actualDomChildren =
domElement.childNodes;nttconst expectedDomChildren = Array.from(
domConverter.viewChildrenToDom( viewElement, domDocument, { bind: true } )
);nntt// Inline filler element has to be created during children update
because we need it to diff actual domntt// elements with expected dom
elements. We need inline filler in expected dom elements so we won&#39;t
re-renderntt// text node if it is not necessary.nttif ( filler &amp;&amp;
filler.parent == viewElement ) {ntttthis._addInlineFiller( domDocument,
expectedDomChildren, filler.offset );ntt}nnttconst actions = diff(
actualDomChildren, expectedDomChildren, sameNodes );nnttlet i = 0;nttconst
nodesToUnbind = new Set();nnttfor ( const action of actions ) {ntttif (
action === &#39;insert&#39; ) {nttttinsertAt( domElement, i,
expectedDomChildren[ i ] );ntttti++;nttt} else if ( action ===
&#39;delete&#39; ) {nttttnodesToUnbind.add( actualDomChildren[ i ]
);nttttremove( actualDomChildren[ i ] );nttt} else { //
&#39;equal&#39;ntttt// Force updating text nodes inside elements which did
not change and do not need to be re-rendered
(#1125).nttttthis._markDescendantTextToSync( domConverter.domToView(
expectedDomChildren[ i ] ) );ntttti++;nttt}ntt}nntt// Unbind removed nodes.
When node does not have a parent it means that it was removed from DOM tree
duringntt// comparision with the expected DOM. We don&#39;t need to check
child nodes, because if child node was reinserted,ntt// it was moved to DOM
tree out of the removed node.nttfor ( const node of nodesToUnbind ) {ntttif
( !node.parentNode ) {nttttthis.domConverter.unbindDomElement( node
);nttt}ntt}nnttfunction sameNodes( actualDomChild, expectedDomChild )
{nttt// Elements.ntttif ( actualDomChild === expectedDomChild )
{nttttreturn true;nttt}nttt// Texts.ntttelse if ( isText( actualDomChild )
&amp;&amp; isText( expectedDomChild ) ) {nttttreturn actualDomChild.data
=== expectedDomChild.data;nttt}nttt// Block fillers.ntttelse if (
isBlockFiller( actualDomChild, domConverter.blockFiller )
&amp;&amp;nttttisBlockFiller( expectedDomChild, domConverter.blockFiller )
) {nttttreturn true;nttt}nnttt// Not matching types.ntttreturn
false;ntt}nt}nnt/**nt * Marks text nodes to be synced.nt *nt * If a text
node is passed, it will be marked. If an element is passed, all descendant
text nodes inside it will be marked.nt *nt * @privatent * @param
{module:engine/view/node~Node} viewNode View node to sync.nt
*/nt_markDescendantTextToSync( viewNode ) {nttif ( !viewNode )
{ntttreturn;ntt}nnttif ( viewNode.is( &#39;text&#39; ) )
{ntttthis.markedTexts.add( viewNode );ntt} else if ( viewNode.is(
&#39;element&#39; ) ) {ntttfor ( const child of viewNode.getChildren() )
{nttttthis._markDescendantTextToSync( child );nttt}ntt}nt}nnt/**nt * Checks
if selection needs to be updated and possibly updates it.nt *nt *
@privatent */nt_updateSelection() {ntt// If there is no selection - remove
DOM and fake selections.nttif ( this.selection.rangeCount === 0 )
{ntttthis._removeDomSelection();ntttthis._removeFakeSelection();nntttreturn;ntt}nnttconst
domRoot = this.domConverter.mapViewToDom( this.selection.editableElement
);nntt// Do nothing if there is no focus, or there is no DOM element
corresponding to selection&#39;s editable element.nttif ( !this.isFocused
|| !domRoot ) {ntttreturn;ntt}nntt// Render selection.nttif (
this.selection.isFake ) {ntttthis._updateFakeSelection( domRoot );ntt} else
{ntttthis._removeFakeSelection();ntttthis._updateDomSelection( domRoot
);ntt}nt}nnt/**nt * Updates fake selection.nt *nt * @privatent * @param
{HTMLElement} domRoot Valid DOM root where fake selection container should
be added.nt */nt_updateFakeSelection( domRoot ) {nttconst domDocument =
domRoot.ownerDocument;nttlet container =
this._fakeSelectionContainer;nntt// Create fake selection container if one
does not exist.nttif ( !container ) {ntttthis._fakeSelectionContainer =
container = domDocument.createElement( &#39;div&#39; );nntttObject.assign(
container.style, {nttttposition: &#39;fixed&#39;,ntttttop: 0,nttttleft:
&#39;-9999px&#39;,ntttt// See <a
href="https://github.com/ckeditor/ckeditor5/issues/752.\n\t\t\t\twidth">github.com/ckeditor/ckeditor5/issues/752.nttttwidth</a>:
&#39;42px&#39;nttt} );nnttt// Fill it with a text node so we can update it
later.ntttcontainer.appendChild( domDocument.createTextNode(
&#39;\u00A0&#39; ) );ntt}nntt// Add fake container if not already
added.nttif ( !container.parentElement ) {ntttdomRoot.appendChild(
container );ntt}nntt// Update contents.nttcontainer.firstChild.data =
this.selection.fakeSelectionLabel || &#39;\u00A0&#39;;nntt// Update
selection.nttconst domSelection = domDocument.getSelection();nttconst
domRange =
domDocument.createRange();nnttdomSelection.removeAllRanges();nttdomRange.selectNodeContents(
container );nttdomSelection.addRange( domRange );nntt// Bind fake selection
container with current selection.nttthis.domConverter.bindFakeSelection(
container, this.selection );nt}nnt/**nt * Updates DOM selection.nt *nt *
@privatent * @param {HTMLElement} domRoot Valid DOM root where DOM
selection should be rendered.nt */nt_updateDomSelection( domRoot )
{nttconst domSelection =
domRoot.ownerDocument.defaultView.getSelection();nntt// Let&#39;s check
whether DOM selection needs updating at all.nttif (
!this._domSelectionNeedsUpdate( domSelection ) ) {ntttreturn;ntt}nntt//
Multi-range selection is not available in most browsers, and, at least in
Chrome, trying tontt// set such selection, that is not continuous, throws
an error. Because of that, we will just use anchorntt// and focus of view
selection.ntt// Since we are not supporting multi-range selection, we also
do not need to check if proper editable isntt// selected. If there is any
editable selected, it is okay (editable is taken from selection
anchor).nttconst anchor = this.domConverter.viewPositionToDom(
this.selection.anchor );nttconst focus =
this.domConverter.viewPositionToDom( this.selection.focus );nntt// Focus
the new editing host.ntt// Otherwise, FF may throw an error (<a
href="https://github.com/ckeditor/ckeditor5/issues/721).\n\t\tdomRoot.focus();\n\n\t\tdomSelection.collapse">github.com/ckeditor/ckeditor5/issues/721).nttdomRoot.focus();nnttdomSelection.collapse</a>(
anchor.parent, anchor.offset );nttdomSelection.extend( focus.parent,
focus.offset );nt}nnt/**nt * Checks whether given DOM selection needs to be
updated.nt *nt * @privatent * @param {Selection} domSelection DOM selection
to check.nt * @returns {Boolean}nt */nt_domSelectionNeedsUpdate(
domSelection ) {nttif ( !this.domConverter.isDomSelectionCorrect(
domSelection ) ) {nttt// Current DOM selection is in incorrect position. We
need to update it.ntttreturn true;ntt}nnttconst oldViewSelection =
domSelection &amp;&amp; this.domConverter.domSelectionToView( domSelection
);nnttif ( oldViewSelection &amp;&amp; this.selection.isEqual(
oldViewSelection ) ) {ntttreturn false;ntt}nntt// If selection is not
collapsed, it does not need to be updated if it is similar.nttif (
!this.selection.isCollapsed &amp;&amp; this.selection.isSimilar(
oldViewSelection ) ) {nttt// Selection did not changed and is correct, do
not update.ntttreturn false;ntt}nntt// Selections are not similar.nttreturn
true;nt}nnt/**nt * Removes DOM selection.nt *nt * @privatent
*/nt_removeDomSelection() {nttfor ( const doc of this.domDocuments )
{ntttconst domSelection = doc.getSelection();nntttif (
domSelection.rangeCount ) {nttttconst activeDomElement =
doc.activeElement;nttttconst viewElement = this.domConverter.mapDomToView(
activeDomElement );nnttttif ( activeDomElement &amp;&amp; viewElement )
{ntttttdoc.getSelection().removeAllRanges();ntttt}nttt}ntt}nt}nnt/**nt *
Removes fake selection.nt *nt * @privatent */nt_removeFakeSelection()
{nttconst container = this._fakeSelectionContainer;nnttif ( container )
{ntttcontainer.remove();ntt}nt}nnt/**nt * Checks if focus needs to be
updated and possibly updates it.nt *nt * @privatent */nt_updateFocus()
{nttif ( this.isFocused ) {ntttconst editable =
this.selection.editableElement;nntttif ( editable )
{nttttthis.domConverter.focus( editable );nttt}ntt}nt}n}nnmix( Renderer,
ObservableMixin );nn// Checks if provided element is editable.n//n//
@privaten// @param {module:engine/view/element~Element} elementn// @returns
{Boolean}nfunction _isEditable( element ) {ntif ( element.getAttribute(
&#39;contenteditable&#39; ) == &#39;false&#39; ) {nttreturn
false;nt}nntconst parent = element.findAncestor( element =&gt;
element.hasAttribute( &#39;contenteditable&#39; ) );nntreturn !parent ||
parent.getAttribute( &#39;contenteditable&#39; ) ==
&#39;true&#39;;n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/view/renderer.jsn// module id = nulln// module
chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/*
globals window, document */nn/**n * @module utils/dom/globaln */nn/**n * A
helper (module) giving an access to the global DOM objects such as `window`
andn * `document`. Accessing these objects using this helper allows easy
and bulletproofn * testing, i.e. stubbing native properties:n *n *ttimport
global from &#39;ckeditor5/utils/dom/global.js&#39;;n *n *tt// This stub
will work for any code using global module.n *tttestUtils.sinon.stub(
global, &#39;window&#39;, {n *tttinnerWidth: 10000n *tt} );n *n
*ttconsole.log( global.window.innerWidth );n */nexport default { window,
document };nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/dom/global.jsn// module id = nulln// module chunks =
”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben. All
rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
utils/dom/indexofn */nn/**n * Returns index of the node in the parent
element.n *n * @param {Node} node Node which index is tested.n * @returns
{Number} Index of the node in the parent element. Returns 0 if node has no
parent.n */nexport default function indexOf( node ) {ntlet index =
0;nntwhile ( node.previousSibling ) {nttnode =
node.previousSibling;nttindex++;nt}nntreturn
index;n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/dom/indexof.jsn// module id = nulln// module chunks
= ”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben.
All rights reserved.n * For licensing, see LICENSE.md.n */nn/* globals Node
*/nn/**n * @module utils/dom/getancestorsn */nn/**n * Returns all ancestors
of given DOM node, starting from the top-most (root). Includes the given
node itself. If then * node is a part of `DocumentFragment` that
`DocumentFragment` will be returned. In contrary, if the node isn *
appended to a `Document`, that `Document` will not be returned (algorithms
operating on DOM tree care for `Document#documentElement`n * at most, which
will be returned).n *n * @param {Node} node DOM node.n * @returns
{Array.&lt;Node|DocumentFragment&gt;} Array of given `node` parents.n
*/nexport default function getAncestors( node ) {ntconst nodes = [];nnt//
We are interested in `Node`s `DocumentFragment`s only.ntwhile ( node
&amp;&amp; node.nodeType != Node.DOCUMENT_NODE ) {nttnodes.unshift( node
);nttnode = node.parentNode;nt}nntreturn nodes;n}nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-utils/src/dom/getancestors.jsn// module id =
nulln// module chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module utils/dom/getcommonancestorn */nnimport
getAncestors from &#39;./getancestors&#39;;nn/**n * Searches and returns
the lowest common ancestor of two given nodes.n *n * @param {Node} nodeA
First node.n * @param {Node} nodeB Second node.n * @returns
{Node|DocumentFragment|Document|null} Lowest common ancestor of both nodes
or `null` if nodes do not have a common ancestor.n */nexport default
function getCommonAncestor( nodeA, nodeB ) {ntconst ancestorsA =
getAncestors( nodeA );ntconst ancestorsB = getAncestors( nodeB );nntlet i =
0;nnt// It does not matter which array is shorter.ntwhile ( ancestorsA[ i ]
== ancestorsB[ i ] &amp;&amp; ancestorsA[ i ] ) {ntti++;nt}nntreturn i ===
0 ? null : ancestorsA[ i - 1 ];n}nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/dom/getcommonancestor.jsn// module id =
nulln// module chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module engine/view/domconvertern */nn/* globals
document, Node, NodeFilter, Text */nnimport ViewText from
&#39;./text&#39;;nimport ViewElement from &#39;./element&#39;;nimport
ViewPosition from &#39;./position&#39;;nimport ViewRange from
&#39;./range&#39;;nimport ViewSelection from &#39;./selection&#39;;nimport
ViewDocumentFragment from &#39;./documentfragment&#39;;nimport
ViewTreeWalker from &#39;./treewalker&#39;;nimport { BR_FILLER,
INLINE_FILLER_LENGTH, isBlockFiller, isInlineFiller, startsWithFiller,
getDataWithoutFiller } from &#39;./filler&#39;;nnimport global from
&#39;@ckeditor/ckeditor5-utils/src/dom/global&#39;;nimport indexOf from
&#39;@ckeditor/ckeditor5-utils/src/dom/indexof&#39;;nimport getAncestors
from &#39;@ckeditor/ckeditor5-utils/src/dom/getancestors&#39;;nimport
getCommonAncestor from
&#39;@ckeditor/ckeditor5-utils/src/dom/getcommonancestor&#39;;nimport
isText from &#39;@ckeditor/ckeditor5-utils/src/dom/istext&#39;;nn/**n *
DomConverter is a set of tools to do transformations between DOM nodes and
view nodes. It also handlesn * {@link
module:engine/view/domconverter~DomConverter#bindElements binding} these
nodes.n *n * DomConverter does not check which nodes should be rendered
(use {@link module:engine/view/renderer~Renderer}), does not keep an *
state of a tree nor keeps synchronization between tree view and DOM tree
(use {@link module:engine/view/document~Document}).n *n * DomConverter
keeps DOM elements to View element bindings, so when the converter will be
destroyed, the binding willn * be lost. Two converters will keep separate
binding maps, so one tree view can be bound with two DOM trees.n */nexport
default class DomConverter {nt/**nt * Creates DOM converter.nt *nt * @param
{Object} options <a href="../../../../Object.html">Object</a> with
configuration options.nt * @param {Function}
[options.blockFiller=module:engine/view/filler~BR_FILLER] Block filler
creator.nt */ntconstructor( options = {} ) {ntt// Using WeakMap prevent
memory leaks: when the converter will be destroyed all referenced between
View and DOMntt// will be removed. Also because it is a *Weak*Map when both
view and DOM elements will be removed referencedntt// will be also removed,
isn&#39;t it brilliant?ntt//ntt// Yes, PJ. It is.ntt//ntt// You guys so
smart.ntt//ntt// I&#39;ve been here. Seen stuff. Afraid of code
now.nntt/**ntt * Block {@link module:engine/view/filler filler} creator,
which is used to create all block fillers during thentt * view to DOM
conversion and to recognize block fillers during the DOM to view
conversion.ntt *ntt * @readonlyntt * @member {Function}
module:engine/view/domconverter~DomConverter#blockFillerntt
*/nttthis.blockFiller = options.blockFiller || BR_FILLER;nntt/**ntt * Tag
names of DOM `Element`s which are considered pre-formatted elements.ntt
*ntt * @readonlyntt * @member {Array.&lt;String&gt;}
module:engine/view/domconverter~DomConverter#preElementsntt
*/nttthis.preElements = [ &#39;pre&#39; ];nntt/**ntt * Tag names of DOM
`Element`s which are considered block elements.ntt *ntt * @readonlyntt *
@member {Array.&lt;String&gt;}
module:engine/view/domconverter~DomConverter#blockElementsntt
*/nttthis.blockElements = [ &#39;p&#39;, &#39;div&#39;, &#39;h1&#39;,
&#39;h2&#39;, &#39;h3&#39;, &#39;h4&#39;, &#39;h5&#39;, &#39;h6&#39;
];nntt/**ntt * DOM to View mapping.ntt *ntt * @privatentt * @member
{WeakMap} module:engine/view/domconverter~DomConverter#_domToViewMappingntt
*/nttthis._domToViewMapping = new WeakMap();nntt/**ntt * View to DOM
mapping.ntt *ntt * @privatentt * @member {WeakMap}
module:engine/view/domconverter~DomConverter#_viewToDomMappingntt
*/nttthis._viewToDomMapping = new WeakMap();nntt/**ntt * Holds mapping
between fake selection containers and corresponding view selections.ntt
*ntt * @privatentt * @member {WeakMap}
module:engine/view/domconverter~DomConverter#_fakeSelectionMappingntt
*/nttthis._fakeSelectionMapping = new WeakMap();nt}nnt/**nt * Binds given
DOM element that represents fake selection to {@link
module:engine/view/documentselection~DocumentSelectionnt * document
selection}. Document selection copy is stored and can be retrieved bynt *
{@link module:engine/view/domconverter~DomConverter#fakeSelectionToView}
method.nt *nt * @param {HTMLElement} domElementnt * @param
{module:engine/view/documentselection~DocumentSelection}
viewDocumentSelectionnt */ntbindFakeSelection( domElement,
viewDocumentSelection ) {nttthis._fakeSelectionMapping.set( domElement, new
ViewSelection( viewDocumentSelection ) );nt}nnt/**nt * Returns {@link
module:engine/view/selection~Selection view selection} instance
corresponding tont * given DOM element that represents fake selection.
Returns `undefined` if binding to given DOM element does not exists.nt *nt
* @param {HTMLElement} domElementnt * @returns
{module:engine/view/selection~Selection|undefined}nt
*/ntfakeSelectionToView( domElement ) {nttreturn
this._fakeSelectionMapping.get( domElement );nt}nnt/**nt * Binds DOM and
View elements, so it will be possible to get corresponding elements usingnt
* {@link module:engine/view/domconverter~DomConverter#mapDomToView} andnt *
{@link module:engine/view/domconverter~DomConverter#mapViewToDom}.nt *nt *
@param {HTMLElement} domElement DOM element to bind.nt * @param
{module:engine/view/element~Element} viewElement View element to bind.nt
*/ntbindElements( domElement, viewElement ) {nttthis._domToViewMapping.set(
domElement, viewElement );nttthis._viewToDomMapping.set( viewElement,
domElement );nt}nnt/**nt * Unbinds given `domElement` from the view element
it was bound to. Unbinding is deep, meaning that all children ofnt *
`domElement` will be unbound too.nt *nt * @param {HTMLElement} domElement
DOM element to unbind.nt */ntunbindDomElement( domElement ) {nttconst
viewElement = this._domToViewMapping.get( domElement );nnttif ( viewElement
) {ntttthis._domToViewMapping.delete( domElement
);ntttthis._viewToDomMapping.delete( viewElement );nnttt// Use Array.from
because of MS Edge (#923).ntttfor ( const child of Array.from(
domElement.childNodes ) ) {nttttthis.unbindDomElement( child
);nttt}ntt}nt}nnt/**nt * Binds DOM and View document fragments, so it will
be possible to get corresponding document fragments usingnt * {@link
module:engine/view/domconverter~DomConverter#mapDomToView} andnt * {@link
module:engine/view/domconverter~DomConverter#mapViewToDom}.nt *nt * @param
{DocumentFragment} domFragment DOM document fragment to bind.nt * @param
{module:engine/view/documentfragment~DocumentFragment} viewFragment View
document fragment to bind.nt */ntbindDocumentFragments( domFragment,
viewFragment ) {nttthis._domToViewMapping.set( domFragment, viewFragment
);nttthis._viewToDomMapping.set( viewFragment, domFragment );nt}nnt/**nt *
Converts view to DOM. For all text nodes, not bound elements and document
fragments new items willnt * be created. For bound elements and document
fragments function will return corresponding items.nt *nt * @param
{module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment}
viewNodent * View node or document fragment to transform.nt * @param
{Document} domDocument Document which will be used to create DOM nodes.nt *
@param {Object} [options] Conversion options.nt * @param {Boolean}
[options.bind=false] Determines whether new elements will be bound.nt *
@param {Boolean} [options.withChildren=true] If `true`, node&#39;s and
document fragment&#39;s children will be converted too.nt * @returns
{Node|DocumentFragment} Converted node or DocumentFragment.nt
*/ntviewToDom( viewNode, domDocument, options = {} ) {nttif ( viewNode.is(
&#39;text&#39; ) ) {ntttconst textData = this._processDataFromViewText(
viewNode );nntttreturn domDocument.createTextNode( textData );ntt} else
{ntttif ( this.mapViewToDom( viewNode ) ) {nttttreturn this.mapViewToDom(
viewNode );nttt}nntttlet domElement;nntttif ( viewNode.is(
&#39;documentFragment&#39; ) ) {ntttt// Create DOM document
fragment.nttttdomElement = domDocument.createDocumentFragment();nnttttif (
options.bind ) {ntttttthis.bindDocumentFragments( domElement, viewNode
);ntttt}nttt} else if ( viewNode.is( &#39;uiElement&#39; ) ) {ntttt//
UIElement has its own render() method (see #799).nttttdomElement =
viewNode.render( domDocument );nnttttif ( options.bind )
{ntttttthis.bindElements( domElement, viewNode );ntttt}nnttttreturn
domElement;nttt} else {ntttt// Create DOM element.nttttdomElement =
domDocument.createElement( viewNode.name );nnttttif ( options.bind )
{ntttttthis.bindElements( domElement, viewNode );ntttt}nntttt// Copy
element&#39;s attributes.nttttfor ( const key of
viewNode.getAttributeKeys() ) {ntttttdomElement.setAttribute( key,
viewNode.getAttribute( key ) );ntttt}nttt}nntttif ( options.withChildren ||
options.withChildren === undefined ) {nttttfor ( const child of
this.viewChildrenToDom( viewNode, domDocument, options ) )
{ntttttdomElement.appendChild( child );ntttt}nttt}nntttreturn
domElement;ntt}nt}nnt/**nt * Converts children of the view element to DOM
using thent * {@link
module:engine/view/domconverter~DomConverter#viewToDom} method.nt *
Additionally, this method adds block {@link module:engine/view/filler
filler} to the list of children, if needed.nt *nt * @param
{module:engine/view/element~Element|module:engine/view/documentfragment~DocumentFragment}
viewElement Parent view element.nt * @param {Document} domDocument Document
which will be used to create DOM nodes.nt * @param {Object} options See
{@link module:engine/view/domconverter~DomConverter#viewToDom} options
parameter.nt * @returns {Iterable.&lt;Node&gt;} DOM nodes.nt */nt*
viewChildrenToDom( viewElement, domDocument, options = {} ) {nttconst
fillerPositionOffset = viewElement.getFillerOffset &amp;&amp;
viewElement.getFillerOffset();nttlet offset = 0;nnttfor ( const childView
of viewElement.getChildren() ) {ntttif ( fillerPositionOffset === offset )
{nttttyield this.blockFiller( domDocument );nttt}nntttyield this.viewToDom(
childView, domDocument, options );nntttoffset++;ntt}nnttif (
fillerPositionOffset === offset ) {ntttyield this.blockFiller( domDocument
);ntt}nt}nnt/**nt * Converts view {@link module:engine/view/range~Range} to
DOM range.nt * Inline and block {@link module:engine/view/filler fillers}
are handled during the conversion.nt *nt * @param
{module:engine/view/range~Range} viewRange View range.nt * @returns {Range}
DOM range.nt */ntviewRangeToDom( viewRange ) {nttconst domStart =
this.viewPositionToDom( viewRange.start );nttconst domEnd =
this.viewPositionToDom( viewRange.end );nnttconst domRange =
document.createRange();nttdomRange.setStart( domStart.parent,
domStart.offset );nttdomRange.setEnd( domEnd.parent, domEnd.offset
);nnttreturn domRange;nt}nnt/**nt * Converts view {@link
module:engine/view/position~Position} to DOM parent and offset.nt *nt *
Inline and block {@link module:engine/view/filler fillers} are handled
during the conversion.nt * If the converted position is directly before
inline filler it is moved inside the filler.nt *nt * @param
{module:engine/view/position~Position} viewPosition View position.nt *
@returns {Object|null} position DOM position or `null` if view position
could not be converted to DOM.nt * @returns {Node} position.parent DOM
position parent.nt * @returns {Number} position.offset DOM position
offset.nt */ntviewPositionToDom( viewPosition ) {nttconst viewParent =
viewPosition.parent;nnttif ( viewParent.is( &#39;text&#39; ) ) {ntttconst
domParent = this.findCorrespondingDomText( viewParent );nntttif (
!domParent ) {ntttt// Position is in a view text node that has not been
rendered to DOM yet.nttttreturn null;nttt}nntttlet offset =
viewPosition.offset;nntttif ( startsWithFiller( domParent ) ) {nttttoffset
+= INLINE_FILLER_LENGTH;nttt}nntttreturn { parent: domParent, offset };ntt}
else {nttt// viewParent is instance of ViewElement.ntttlet domParent,
domBefore, domAfter;nntttif ( viewPosition.offset === 0 ) {nttttdomParent =
this.mapViewToDom( viewParent );nnttttif ( !domParent ) {nttttt// Position
is in a view element that has not been rendered to DOM yet.ntttttreturn
null;ntttt}nnttttdomAfter = domParent.childNodes[ 0 ];nttt} else
{nttttconst nodeBefore = viewPosition.nodeBefore;nnttttdomBefore =
nodeBefore.is( &#39;text&#39; ) ?ntttttthis.findCorrespondingDomText(
nodeBefore ) :ntttttthis.mapViewToDom( viewPosition.nodeBefore );nnttttif (
!domBefore ) {nttttt// Position is after a view element that has not been
rendered to DOM yet.ntttttreturn null;ntttt}nnttttdomParent =
domBefore.parentNode;nttttdomAfter = domBefore.nextSibling;nttt}nnttt// If
there is an inline filler at position return position inside the filler. We
should never returnnttt// the position before the inline filler.ntttif (
isText( domAfter ) &amp;&amp; startsWithFiller( domAfter ) ) {nttttreturn {
parent: domAfter, offset: INLINE_FILLER_LENGTH };nttt}nntttconst offset =
domBefore ? indexOf( domBefore ) + 1 : 0;nntttreturn { parent: domParent,
offset };ntt}nt}nnt/**nt * Converts DOM to view. For all text nodes, not
bound elements and document fragments new items willnt * be created. For
bound elements and document fragments function will return corresponding
items. Fornt * {@link module:engine/view/filler fillers} `null` will be
returned.nt * For all DOM elements rendered by {@link
module:engine/view/uielement~UIElement} that UIElement will be returned.nt
*nt * @param {Node|DocumentFragment} domNode DOM node or document fragment
to transform.nt * @param {Object} [options] Conversion options.nt * @param
{Boolean} [options.bind=false] Determines whether new elements will be
bound.nt * @param {Boolean} [options.withChildren=true] If `true`,
node&#39;s and document fragment&#39;s children will be converted too.nt *
@param {Boolean} [options.keepOriginalCase=false] If `false`, node&#39;s
tag name will be converter to lower case.nt * @returns
{module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment|null}
Converted node or document fragmentnt * or `null` if DOM node is a {@link
module:engine/view/filler filler} or the given node is an empty text
node.nt */ntdomToView( domNode, options = {} ) {nttif ( isBlockFiller(
domNode, this.blockFiller ) ) {ntttreturn null;ntt}nntt// When node is
inside UIElement return that UIElement as it&#39;s view
representation.nttconst uiElement = this.getParentUIElement( domNode,
this._domToViewMapping );nnttif ( uiElement ) {ntttreturn
uiElement;ntt}nnttif ( isText( domNode ) ) {ntttif ( isInlineFiller(
domNode ) ) {nttttreturn null;nttt} else {nttttconst textData =
this._processDataFromDomText( domNode );nnttttreturn textData ===
&#39;&#39; ? null : new ViewText( textData );nttt}ntt} else if (
this.isComment( domNode ) ) {ntttreturn null;ntt} else {ntttif (
this.mapDomToView( domNode ) ) {nttttreturn this.mapDomToView( domNode
);nttt}nntttlet viewElement;nntttif ( this.isDocumentFragment( domNode ) )
{ntttt// Create view document fragment.nttttviewElement = new
ViewDocumentFragment();nnttttif ( options.bind )
{ntttttthis.bindDocumentFragments( domNode, viewElement );ntttt}nttt} else
{ntttt// Create view element.nttttconst viewName = options.keepOriginalCase
? domNode.tagName : domNode.tagName.toLowerCase();nttttviewElement = new
ViewElement( viewName );nnttttif ( options.bind ) {ntttttthis.bindElements(
domNode, viewElement );ntttt}nntttt// Copy element&#39;s
attributes.nttttconst attrs = domNode.attributes;nnttttfor ( let i =
attrs.length - 1; i &gt;= 0; i– ) {ntttttviewElement._setAttribute( attrs[
i ].name, attrs[ i ].value );ntttt}nttt}nntttif ( options.withChildren ||
options.withChildren === undefined ) {nttttfor ( const child of
this.domChildrenToView( domNode, options ) )
{ntttttviewElement._appendChild( child );ntttt}nttt}nntttreturn
viewElement;ntt}nt}nnt/**nt * Converts children of the DOM element to view
nodes usingnt * the {@link
module:engine/view/domconverter~DomConverter#domToView} method.nt *
Additionally this method omits block {@link module:engine/view/filler
filler}, if it exists in the DOM parent.nt *nt * @param {HTMLElement}
domElement Parent DOM element.nt * @param {Object} options See {@link
module:engine/view/domconverter~DomConverter#domToView} options
parameter.nt * @returns {Iterable.&lt;module:engine/view/node~Node&gt;}
View nodes.nt */nt* domChildrenToView( domElement, options = {} ) {nttfor (
let i = 0; i &lt; domElement.childNodes.length; i++ ) {ntttconst domChild =
domElement.childNodes[ i ];ntttconst viewChild = this.domToView( domChild,
options );nntttif ( viewChild !== null ) {nttttyield
viewChild;nttt}ntt}nt}nnt/**nt * Converts DOM selection to view {@link
module:engine/view/selection~Selection}.nt * Ranges which cannot be
converted will be omitted.nt *nt * @param {Selection} domSelection DOM
selection.nt * @returns {module:engine/view/selection~Selection} View
selection.nt */ntdomSelectionToView( domSelection ) {ntt// DOM selection
might be placed in fake selection container.ntt// If container contains
fake selection - return corresponding view selection.nttif (
domSelection.rangeCount === 1 ) {ntttlet container =
domSelection.getRangeAt( 0 ).startContainer;nnttt// The DOM selection might
be moved to the text node inside the fake selection container.ntttif (
isText( container ) ) {nttttcontainer =
container.parentNode;nttt}nntttconst viewSelection =
this.fakeSelectionToView( container );nntttif ( viewSelection )
{nttttreturn viewSelection;nttt}ntt}nnttconst isBackward =
this.isDomSelectionBackward( domSelection );nnttconst viewRanges =
[];nnttfor ( let i = 0; i &lt; domSelection.rangeCount; i++ ) {nttt// DOM
Range have correct start and end, no matter what is the DOM Selection
direction. So we don&#39;t have to fix anything.ntttconst domRange =
domSelection.getRangeAt( i );ntttconst viewRange = this.domRangeToView(
domRange );nntttif ( viewRange ) {nttttviewRanges.push( viewRange
);nttt}ntt}nnttreturn new ViewSelection( viewRanges, { backward: isBackward
} );nt}nnt/**nt * Converts DOM Range to view {@link
module:engine/view/range~Range}.nt * If the start or end position can not
be converted `null` is returned.nt *nt * @param {Range} domRange DOM
range.nt * @returns {module:engine/view/range~Range|null} View range.nt
*/ntdomRangeToView( domRange ) {nttconst viewStart =
this.domPositionToView( domRange.startContainer, domRange.startOffset
);nttconst viewEnd = this.domPositionToView( domRange.endContainer,
domRange.endOffset );nnttif ( viewStart &amp;&amp; viewEnd ) {ntttreturn
new ViewRange( viewStart, viewEnd );ntt}nnttreturn null;nt}nnt/**nt *
Converts DOM parent and offset to view {@link
module:engine/view/position~Position}.nt *nt * If the position is inside a
{@link module:engine/view/filler filler} which has no corresponding view
node,nt * position of the filler will be converted and returned.nt *nt * If
the position is inside DOM element rendered by {@link
module:engine/view/uielement~UIElement}nt * that position will be converted
to view position before that UIElement.nt *nt * If structures are too
different and it is not possible to find corresponding position then `null`
will be returned.nt *nt * @param {Node} domParent DOM position parent.nt *
@param {Number} domOffset DOM position offset.nt * @returns
{module:engine/view/position~Position} viewPosition View position.nt
*/ntdomPositionToView( domParent, domOffset ) {nttif ( isBlockFiller(
domParent, this.blockFiller ) ) {ntttreturn this.domPositionToView(
domParent.parentNode, indexOf( domParent ) );ntt}nntt// If position is
somewhere inside UIElement - return position before that element.nttconst
viewElement = this.mapDomToView( domParent );nnttif ( viewElement
&amp;&amp; viewElement.is( &#39;uiElement&#39; ) ) {ntttreturn
ViewPosition.createBefore( viewElement );ntt}nnttif ( isText( domParent ) )
{ntttif ( isInlineFiller( domParent ) ) {nttttreturn
this.domPositionToView( domParent.parentNode, indexOf( domParent )
);nttt}nntttconst viewParent = this.findCorrespondingViewText( domParent
);ntttlet offset = domOffset;nntttif ( !viewParent ) {nttttreturn
null;nttt}nntttif ( startsWithFiller( domParent ) ) {nttttoffset -=
INLINE_FILLER_LENGTH;nttttoffset = offset &lt; 0 ? 0 :
offset;nttt}nntttreturn new ViewPosition( viewParent, offset );ntt}ntt//
domParent instanceof HTMLElement.nttelse {ntttif ( domOffset === 0 )
{nttttconst viewParent = this.mapDomToView( domParent );nnttttif (
viewParent ) {ntttttreturn new ViewPosition( viewParent, 0 );ntttt}nttt}
else {nttttconst domBefore = domParent.childNodes[ domOffset - 1
];nttttconst viewBefore = isText( domBefore )
?ntttttthis.findCorrespondingViewText( domBefore )
:ntttttthis.mapDomToView( domBefore );nntttt// TODO #663nttttif (
viewBefore &amp;&amp; viewBefore.parent ) {ntttttreturn new ViewPosition(
viewBefore.parent, viewBefore.index + 1 );ntttt}nttt}nntttreturn
null;ntt}nt}nnt/**nt * Returns corresponding view {@link
module:engine/view/element~Element Element} ornt * {@link
module:engine/view/documentfragment~DocumentFragment} for provided DOM
element ornt * document fragment. If there is no view item {@link
module:engine/view/domconverter~DomConverter#bindElements bound}nt * to the
given DOM - `undefined` is returned.nt * For all DOM elements rendered by
{@link module:engine/view/uielement~UIElement} that UIElement will be
returned.nt *nt * @param {DocumentFragment|Element}
domElementOrDocumentFragment DOM element or document fragment.nt * @returns
{module:engine/view/element~Element|module:engine/view/documentfragment~DocumentFragment|undefined}nt
* Corresponding view element, document fragment or `undefined` if no
element was bound.nt */ntmapDomToView( domElementOrDocumentFragment )
{nttreturn this.getParentUIElement( domElementOrDocumentFragment ) ||
this._domToViewMapping.get( domElementOrDocumentFragment );nt}nnt/**nt *
Finds corresponding text node. Text nodes are not {@link
module:engine/view/domconverter~DomConverter#bindElements bound},nt *
corresponding text node is returned based on the sibling or parent.nt *nt *
If the directly previous sibling is a {@link
module:engine/view/domconverter~DomConverter#bindElements bound} element,
it is usednt * to find the corresponding text node.nt *nt * If this is a
first child in the parent and the parent is a {@link
module:engine/view/domconverter~DomConverter#bindElements bound}nt *
element, it is used to find the corresponding text node.nt *nt * For all
text nodes rendered by {@link module:engine/view/uielement~UIElement} that
UIElement will be returned.nt *nt * Otherwise `null` is returned.nt *nt *
Note that for the block or inline {@link module:engine/view/filler filler}
this method returns `null`.nt *nt * @param {Text} domText DOM text node.nt
* @returns {module:engine/view/text~Text|null} Corresponding view text node
or `null`, if it was not possible to find ant * corresponding node.nt
*/ntfindCorrespondingViewText( domText ) {nttif ( isInlineFiller( domText )
) {ntttreturn null;ntt}nntt// If DOM text was rendered by UIElement -
return that element.nttconst uiElement = this.getParentUIElement( domText
);nnttif ( uiElement ) {ntttreturn uiElement;ntt}nnttconst previousSibling
= domText.previousSibling;nntt// Try to use previous sibling to find the
corresponding text node.nttif ( previousSibling ) {ntttif ( !(
this.isElement( previousSibling ) ) ) {ntttt// The previous is text or
comment.nttttreturn null;nttt}nntttconst viewElement = this.mapDomToView(
previousSibling );nntttif ( viewElement ) {nttttconst nextSibling =
viewElement.nextSibling;nntttt// It might be filler which has no
corresponding view node.nttttif ( nextSibling instanceof ViewText )
{ntttttreturn viewElement.nextSibling;ntttt} else {ntttttreturn
null;ntttt}nttt}ntt}ntt// Try to use parent to find the corresponding text
node.nttelse {ntttconst viewElement = this.mapDomToView( domText.parentNode
);nntttif ( viewElement ) {nttttconst firstChild = viewElement.getChild( 0
);nntttt// It might be filler which has no corresponding view node.nttttif
( firstChild instanceof ViewText ) {ntttttreturn firstChild;ntttt} else
{ntttttreturn null;ntttt}nttt}ntt}nnttreturn null;nt}nnt/**nt * Returns
corresponding DOM item for provided {@link
module:engine/view/element~Element Element} ornt * {@link
module:engine/view/documentfragment~DocumentFragment DocumentFragment}.nt *
To find a corresponding text for {@link module:engine/view/text~Text view
Text instance}nt * use {@link findCorrespondingDomText}.nt *nt * @param
{module:engine/view/element~Element|module:engine/view/documentfragment~DocumentFragment}
viewNodent * View element or document fragment.nt * @returns
{Node|DocumentFragment|undefined} Corresponding DOM node or document
fragment.nt */ntmapViewToDom( documentFragmentOrElement ) {nttreturn
this._viewToDomMapping.get( documentFragmentOrElement );nt}nnt/**nt * Finds
corresponding text node. Text nodes are not {@link
module:engine/view/domconverter~DomConverter#bindElements bound},nt *
corresponding text node is returned based on the sibling or parent.nt *nt *
If the directly previous sibling is a {@link
module:engine/view/domconverter~DomConverter#bindElements bound} element,
it is usednt * to find the corresponding text node.nt *nt * If this is a
first child in the parent and the parent is a {@link
module:engine/view/domconverter~DomConverter#bindElements bound}nt *
element, it is used to find the corresponding text node.nt *nt * Otherwise
`null` is returned.nt *nt * @param {module:engine/view/text~Text} viewText
View text node.nt * @returns {Text|null} Corresponding DOM text node or
`null`, if it was not possible to find a corresponding node.nt
*/ntfindCorrespondingDomText( viewText ) {nttconst previousSibling =
viewText.previousSibling;nntt// Try to use previous sibling to find the
corresponding text node.nttif ( previousSibling &amp;&amp;
this.mapViewToDom( previousSibling ) ) {ntttreturn this.mapViewToDom(
previousSibling ).nextSibling;ntt}nntt// If this is a first node, try to
use parent to find the corresponding text node.nttif ( !previousSibling
&amp;&amp; viewText.parent &amp;&amp; this.mapViewToDom( viewText.parent )
) {ntttreturn this.mapViewToDom( viewText.parent ).childNodes[ 0
];ntt}nnttreturn null;nt}nnt/**nt * Focuses DOM editable that is
corresponding to provided {@link
module:engine/view/editableelement~EditableElement}.nt *nt * @param
{module:engine/view/editableelement~EditableElement} viewEditablent
*/ntfocus( viewEditable ) {nttconst domEditable = this.mapViewToDom(
viewEditable );nnttif ( domEditable &amp;&amp;
domEditable.ownerDocument.activeElement !== domEditable ) {nttt// Save the
scrollX and scrollY positions before the focus.ntttconst { scrollX, scrollY
} = global.window;ntttconst scrollPositions = [];nnttt// Save all
scrollLeft and scrollTop values starting from domEditable up tonttt//
document#documentElement.ntttforEachDomNodeAncestor( domEditable, node
=&gt; {nttttconst { scrollLeft, scrollTop } =
node;nnttttscrollPositions.push( [ scrollLeft, scrollTop ] );nttt}
);nntttdomEditable.focus();nnttt// Restore scrollLeft and scrollTop values
starting from domEditable up tonttt// document#documentElement.nttt// <a
href="https://github.com/ckeditor/ckeditor5-engine/issues/951\n\t\t\t">github.com/ckeditor/ckeditor5-engine/issues/951nttt</a>//
<a
href="https://github.com/ckeditor/ckeditor5-engine/issues/957\n\t\t\tforEachDomNodeAncestor">github.com/ckeditor/ckeditor5-engine/issues/957ntttforEachDomNodeAncestor</a>(
domEditable, node =&gt; {nttttconst [ scrollLeft, scrollTop ] =
scrollPositions.shift();nnttttnode.scrollLeft =
scrollLeft;nttttnode.scrollTop = scrollTop;nttt} );nnttt// Restore the
scrollX and scrollY positions after the focus.nttt// <a
href="https://github.com/ckeditor/ckeditor5-engine/issues/951\n\t\t\tglobal.window.scrollTo">github.com/ckeditor/ckeditor5-engine/issues/951ntttglobal.window.scrollTo</a>(
scrollX, scrollY );ntt}nt}nnt/**nt * Returns `true` when `node.nodeType`
equals `Node.ELEMENT_NODE`.nt *nt * @param {Node} node Node to check.nt *
@returns {Boolean}nt */ntisElement( node ) {nttreturn node &amp;&amp;
node.nodeType == Node.ELEMENT_NODE;nt}nnt/**nt * Returns `true` when
`node.nodeType` equals `Node.DOCUMENT_FRAGMENT_NODE`.nt *nt * @param {Node}
node Node to check.nt * @returns {Boolean}nt */ntisDocumentFragment( node )
{nttreturn node &amp;&amp; node.nodeType ==
Node.DOCUMENT_FRAGMENT_NODE;nt}nnt/**nt * Returns `true` when
`node.nodeType` equals `Node.COMMENT_NODE`.nt *nt * @param {Node} node Node
to check.nt * @returns {Boolean}nt */ntisComment( node ) {nttreturn node
&amp;&amp; node.nodeType == Node.COMMENT_NODE;nt}nnt/**nt * Returns `true`
if given selection is a backward selection, that is, if it&#39;s `focus` is
before `anchor`.nt *nt * @param {Selection} DOM Selection instance to
check.nt * @returns {Boolean}nt */ntisDomSelectionBackward( selection )
{nttif ( selection.isCollapsed ) {ntttreturn false;ntt}nntt// Since it
takes multiple lines of code to check whether a "DOM Position&quot; is
before/after another "DOM Position&quot;,ntt// we will use the fact that
range will collapse if it&#39;s end is before it&#39;s start.nttconst range
= document.createRange();nnttrange.setStart( selection.anchorNode,
selection.anchorOffset );nttrange.setEnd( selection.focusNode,
selection.focusOffset );nnttconst backward =
range.collapsed;nnttrange.detach();nnttreturn backward;nt}nnt/**nt *
Returns parent {@link module:engine/view/uielement~UIElement} for provided
DOM node. Returns `null` if there is nont * parent UIElement.nt *nt *
@param {Node} domNodent * @return
{module:engine/view/uielement~UIElement|null}nt */ntgetParentUIElement(
domNode ) {nttconst ancestors = getAncestors( domNode );nntt// Remove
domNode from the list.nttancestors.pop();nnttwhile ( ancestors.length )
{ntttconst domNode = ancestors.pop();ntttconst viewNode =
this._domToViewMapping.get( domNode );nntttif ( viewNode &amp;&amp;
viewNode.is( &#39;uiElement&#39; ) ) {nttttreturn
viewNode;nttt}ntt}nnttreturn null;nt}nnt/**nt * Checks if given
selection&#39;s boundaries are at correct places.nt *nt * The following
places are considered as incorrect for selection boundaries:nt * * before
or in the middle of the inline filler sequence,nt * * inside the DOM
element which represents {@link module:engine/view/uielement~UIElement a
view ui element}.nt *nt * @param {Selection} domSelection DOM Selection
object to be checked.nt * @returns {Boolean} `true` if the given selection
is at a correct place, `false` otherwise.nt */ntisDomSelectionCorrect(
domSelection ) {nttreturn this._isDomSelectionPositionCorrect(
domSelection.anchorNode, domSelection.anchorOffset )
&amp;&amp;ntttthis._isDomSelectionPositionCorrect( domSelection.focusNode,
domSelection.focusOffset );nt}nnt/**nt * Checks if the given DOM position
is a correct place for selection boundary. See {@link
isDomSelectionCorrect}.nt *nt * @privatent * @param {Element} domParent
Position parent.nt * @param {Number} offset Position offset.nt * @returns
{Boolean} `true` if given position is at a correct place for selection
boundary, `false` otherwise.nt */nt_isDomSelectionPositionCorrect(
domParent, offset ) {ntt// If selection is before or in the middle of
inline filler string, it is incorrect.nttif ( isText( domParent )
&amp;&amp; startsWithFiller( domParent ) &amp;&amp; offset &lt;
INLINE_FILLER_LENGTH ) {nttt// Selection in a text node, at wrong position
(before or in the middle of filler).ntttreturn false;ntt}nnttif (
this.isElement( domParent ) &amp;&amp; startsWithFiller(
domParent.childNodes[ offset ] ) ) {nttt// Selection in an element node,
before filler text node.ntttreturn false;ntt}nnttconst viewParent =
this.mapDomToView( domParent );nntt// If selection is in `view.UIElement`,
it is incorrect. Note that `mapDomToView()` returns `view.UIElement`ntt//
also for any dom element that is inside the view ui element (so we
don&#39;t need to perform any additional checks).nttif ( viewParent
&amp;&amp; viewParent.is( &#39;uiElement&#39; ) ) {ntttreturn
false;ntt}nnttreturn true;nt}nnt/**nt * Takes text data from a given {@link
module:engine/view/text~Text#data} and processes it sont * it is correctly
displayed in the DOM.nt *nt * Following changes are done:nt *nt * * a space
at the beginning is changed to `&amp;nbsp;` if this is the first text node
in its containernt * element or if a previous text node ends with a space
character,nt * * space at the end of the text node is changed to
`&amp;nbsp;` if this is the last text node in its container,nt * *
remaining spaces are replaced to a chain of spaces and `&amp;nbsp;` (e.g.
`&#39;x   x&#39;` becomes `&#39;x &amp;nbsp; x&#39;`).nt *nt * Content of
{@link preElements} is not processed.nt *nt * @privatent * @param
{module:engine/view/text~Text} node View text node to process.nt * @returns
{String} Processed text data.nt */nt_processDataFromViewText( node )
{nttlet data = node.data;nntt// If any of node ancestors has a name which
is in `preElements` array, then currently processedntt// view text node is
(will be) in preformatted element. We should not change whitespaces
then.nttif ( node.getAncestors().some( parent =&gt;
this.preElements.includes( parent.name ) ) ) {ntttreturn data;ntt}nntt// 1.
Replace the first space with a nbsp if the previous node ends with a space
or there is no previous nodentt// (container element boundary).nttif (
data.charAt( 0 ) == &#39; &#39; ) {ntttconst prevNode =
this._getTouchingViewTextNode( node, false );ntttconst prevEndsWithSpace =
prevNode &amp;&amp; this._nodeEndsWithSpace( prevNode );nntttif (
prevEndsWithSpace || !prevNode ) {nttttdata = &#39;\u00A0&#39; +
data.substr( 1 );nttt}ntt}nntt// 2. Replace the last space with a nbsp if
this is the last text node (container element boundary).nttif (
data.charAt( data.length - 1 ) == &#39; &#39; ) {ntttconst nextNode =
this._getTouchingViewTextNode( node, true );nntttif ( !nextNode )
{nttttdata = data.substr( 0, data.length - 1 ) +
&#39;\u00A0&#39;;nttt}ntt}nnttreturn data.replace( / {2}/g, &#39;
\u00A0&#39; );nt}nnt/**nt * Checks whether given node ends with a space
character after changing appropriate space characters to `&amp;nbsp;`s.nt
*nt * @privatent * @param {module:engine/view/text~Text} node Node to
check.nt * @returns {Boolean} `true` if given `node` ends with space,
`false` otherwise.nt */nt_nodeEndsWithSpace( node ) {nttif (
node.getAncestors().some( parent =&gt; this.preElements.includes(
parent.name ) ) ) {ntttreturn false;ntt}nnttconst data =
this._processDataFromViewText( node );nnttreturn data.charAt( data.length -
1 ) == &#39; &#39;;nt}nnt/**nt * Takes text data from native `Text` node
and processes it to a correct {@link module:engine/view/text~Text view text
node} data.nt *nt * Following changes are done:nt * * multiple whitespaces
are replaced to a single space,nt * * space at the beginning of the text
node is removed, if it is a first text node in it&#39;s containernt *
element or if previous text node ends by space character,nt * * space at
the end of the text node is removed, if it is a last text node in it&#39;s
container.nt *nt * @param {Node} node DOM text node to process.nt *
@returns {String} Processed data.nt * @privatent
*/nt_processDataFromDomText( node ) {nttlet data = node.data;nnttif (
_hasDomParentOfType( node, this.preElements ) ) {ntttreturn
getDataWithoutFiller( node );ntt}nntt// Change all consecutive whitespace
characters (from the [ \n\t\r] set –ntt// see <a
href="https://github.com/ckeditor/ckeditor5-engine/issues/822#issuecomment-311670249">github.com/ckeditor/ckeditor5-engine/issues/822#issuecomment-311670249</a>)
to a single space character.ntt// That&#39;s how multiple whitespaces are
treated when rendered, so we normalize those whitespaces.ntt// We&#39;re
replacing 1+ (and not 2+) to also normalize singular \n\t\r characters
(#822).nttdata = data.replace( /[ \n\t\r]{1,}/g, &#39; &#39; );nnttconst
prevNode = this._getTouchingDomTextNode( node, false );nttconst nextNode =
this._getTouchingDomTextNode( node, true );nntt// If previous dom text node
does not exist or it ends by whitespace character, remove space character
from the beginningntt// of this text node. Such space character is treated
as a whitespace.nttif ( !prevNode || /[^\S\u00A0]/.test(
prevNode.data.charAt( prevNode.data.length - 1 ) ) ) {ntttdata =
data.replace( /^ /, &#39;&#39; );ntt}nntt// If next text node does not
exist remove space character from the end of this text node.nttif (
!nextNode &amp;&amp; !startsWithFiller( node ) ) {ntttdata = data.replace(
/ $/, &#39;&#39; );ntt}nntt// At the beginning and end of a block element,
Firefox inserts normal space + <br> instead of non-breaking space.ntt//
This means that the text node starts/end with normal space instead of
non-breaking space.ntt// This causes a problem because the normal space
would be removed in `.replace` calls above. To prevent that,ntt// the
inline filler is removed only after the data is initially processed (by the
`.replace` above). See ckeditor5#692.nttdata = getDataWithoutFiller( new
Text( data ) );nntt// At this point we should have removed all whitespaces
from DOM text data.nntt// Now we have to change &amp;nbsp; chars, that were
in DOM text data because of rendering reasons, to spaces.ntt// First,
change all ` \u00A0` pairs (space + &amp;nbsp;) to two spaces. DOM
converter changes two spaces from model/view asntt// ` \u00A0` to ensure
proper rendering. Since here we convert back, we recognize those pairs and
change themntt// to `  ` which is what we expect to have in
model/view.nttdata = data.replace( / \u00A0/g, &#39;  &#39; );nntt// Then,
change &amp;nbsp; character that is at the beginning of the text node to
space character.ntt// As above, that &amp;nbsp; was created for rendering
reasons but it&#39;s real meaning is just a space character.ntt// We do
that replacement only if this is the first node or the previous node ends
on whitespace character.nttif ( !prevNode || /[^\S\u00A0]/.test(
prevNode.data.charAt( prevNode.data.length - 1 ) ) ) {ntttdata =
data.replace( /^\u00A0/, &#39; &#39; );ntt}nntt// Since input text data
could be: `x_ _`, we would not replace the first &amp;nbsp; after `x`
character.ntt// We have to fix it. Since we already change all `
&amp;nbsp;`, we will have something like this at the end of text data:ntt//
`x_ _ _` -&gt; `x_    `. Find &amp;nbsp; at the end of string (can be
followed only by spaces).ntt// We do that replacement only if this is the
last node or the next node starts by &amp;nbsp;.nttif ( !nextNode ||
nextNode.data.charAt( 0 ) == &#39;\u00A0&#39; ) {ntttdata = data.replace(
/\u00A0( *)$/, &#39; $1&#39; );ntt}nntt// At this point, all whitespaces
should be removed and all &amp;nbsp; created for rendering reasons should
bentt// changed to normal space. All left &amp;nbsp; are &amp;nbsp;
inserted intentionally.nttreturn data;nt}nnt/**nt * Helper function. For
given {@link module:engine/view/text~Text view text node}, it finds
previous or next siblingnt * that is contained in the same container
element. If there is no such sibling, `null` is returned.nt *nt * @param
{module:engine/view/text~Text} node Reference node.nt * @param {Boolean}
getNextnt * @returns {module:engine/view/text~Text|null} Touching text node
or `null` if there is no next or previous touching text node.nt
*/nt_getTouchingViewTextNode( node, getNext ) {nttconst treeWalker = new
ViewTreeWalker( {ntttstartPosition: getNext ? ViewPosition.createAfter(
node ) : ViewPosition.createBefore( node ),ntttdirection: getNext ?
&#39;forward&#39; : &#39;backward&#39;ntt} );nnttfor ( const value of
treeWalker ) {ntttif ( value.item.is( &#39;containerElement&#39; ) )
{ntttt// ViewContainerElement is found on a way to next ViewText node, so
given `node` was first/lastntttt// text node in its container
element.nttttreturn null;nttt} else if ( value.item.is( &#39;textProxy&#39;
) ) {ntttt// Found a text node in the same container element.nttttreturn
value.item;nttt}ntt}nnttreturn null;nt}nnt/**nt * Helper function. For
given `Text` node, it finds previous or next sibling that is contained in
the same block element.nt * If there is no such sibling, `null` is
returned.nt *nt * @privatent * @param {Text} nodent * @param {Boolean}
getNextnt * @returns {Text|null}nt */nt_getTouchingDomTextNode( node,
getNext ) {nttif ( !node.parentNode ) {ntttreturn null;ntt}nnttconst
direction = getNext ? &#39;nextNode&#39; : &#39;previousNode&#39;;nttconst
document = node.ownerDocument;nttconst topmostParent = getAncestors( node
)[ 0 ];nnttconst treeWalker = document.createTreeWalker( topmostParent,
NodeFilter.SHOW_TEXT );nntttreeWalker.currentNode = node;nnttconst
touchingNode = treeWalker[ direction ]();nnttif ( touchingNode !== null )
{ntttconst lca = getCommonAncestor( node, touchingNode );nnttt// If there
is common ancestor between the text node and next/prev text node,nttt// and
there are no block elements on a way from the text node to that
ancestor,nttt// and there are no block elements on a way from next/prev
text node to that ancestor…ntttif (nttttlca
&amp;&amp;ntttt!_hasDomParentOfType( node, this.blockElements, lca )
&amp;&amp;ntttt!_hasDomParentOfType( touchingNode, this.blockElements, lca
)nttt) {ntttt// Then they are in the same container element.nttttreturn
touchingNode;nttt}ntt}nnttreturn null;nt}n}nn// Helper function.n// Used to
check if given native `Element` or `Text` node has parent with tag name
from `types` array.n//n// @param {Node} noden// @param
{Array.&lt;String&gt;} typesn// @param {Boolean} [boundaryParent] Can be
given if parents should be checked up to a given element (excluding that
element).n// @returns {Boolean} `true` if such parent exists or `false` if
it does not.nfunction _hasDomParentOfType( node, types, boundaryParent )
{ntlet parents = getAncestors( node );nntif ( boundaryParent ) {nttparents
= parents.slice( parents.indexOf( boundaryParent ) + 1 );nt}nntreturn
parents.some( parent =&gt; parent.tagName &amp;&amp; types.includes(
parent.tagName.toLowerCase() ) );n}nn// A helper that executes given
callback for each DOM node&#39;s ancestor, starting from the given noden//
and ending in document#documentElement.n//n// @param {Node} noden// @param
{Function} callback A callback to be executed for each ancestor.nfunction
forEachDomNodeAncestor( node, callback ) {ntwhile ( node &amp;&amp; node !=
global.document ) {nttcallback( node );nttnode =
node.parentNode;nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/view/domconverter.jsn// module id = nulln// module
chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module utils/dom/isnoden */nn/**n * Checks if the object is a native DOM
Node.n *n * @param {*} objn * @returns {Boolean}n */nexport default
function isNode( obj ) {ntif ( obj ) {nttif ( obj.defaultView ) {ntttreturn
obj instanceof obj.defaultView.Document;ntt} else if ( obj.ownerDocument
&amp;&amp; obj.ownerDocument.defaultView ) {ntttreturn obj instanceof
obj.ownerDocument.defaultView.Node;ntt}nt}nntreturn
false;n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/dom/isnode.jsn// module id = nulln// module chunks =
”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben. All
rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
utils/dom/iswindown */nn/**n * Checks if the object is a native DOM
Window.n *n * @param {*} objn * @returns {Boolean}n */nexport default
function isWindow( obj ) {ntreturn Object.prototype.toString.apply( obj )
== &#39;[object Window]&#39;;n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/dom/iswindow.jsn// module id = nulln// module chunks
= ”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben.
All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
utils/dom/emittermixinn */nnimport { default as EmitterMixin,
_getEmitterListenedTo, _setEmitterId } from
&#39;../emittermixin&#39;;nimport uid from &#39;../uid&#39;;nimport extend
from &#39;../lib/lodash/extend&#39;;nimport isNode from
&#39;./isnode&#39;;nimport isWindow from &#39;./iswindow&#39;;nn/**n *
Mixin that injects the DOM events API into its host. It provides the APIn *
compatible with {@link module:utils/emittermixin~EmitterMixin}.n *n * DOM
emitter mixin is by default available in the {@link module:ui/view~View}
class,n * but it can also be mixed into any other class:n *n *ttimport mix
from &#39;../utils/mix.js&#39;;n *ttimport DomEmitterMixin from
&#39;../utils/dom/emittermixin.js&#39;;n *n *ttclass SomeView {}n *ttmix(
SomeView, DomEmitterMixin );n *n *ttconst view = new SomeView();n
*ttview.listenTo( domElement, ( evt, domEvt ) =&gt; {n *tttconsole.log(
evt, domEvt );n *tt} );n *n * @mixin EmitterMixinn * @mixes
module:utils/emittermixin~EmitterMixinn * @implements
module:utils/dom/emittermixin~Emittern */nconst DomEmitterMixin = extend(
{}, EmitterMixin, {nt/**nt * Registers a callback function to be executed
when an event is fired in a specific Emitter or DOM Node.nt * It is
backwards compatible with {@link
module:utils/emittermixin~EmitterMixin#listenTo}.nt *nt * @param
{module:utils/emittermixin~Emitter|Node} emitter The object that fires the
event.nt * @param {String} event The name of the event.nt * @param
{Function} callback The function to be called on event.nt * @param {Object}
[options={}] Additional options.nt * @param
{module:utils/priorities~PriorityString|Number}
[options.priority=&#39;normal&#39;] The priority of this event callback.
The highernt * the priority value the sooner the callback will be fired.
Events having the same priority are called in thent * order they were
added.nt * @param {Boolean} [options.useCapture=false] Indicates that
events of this type will be dispatched to the registerednt * listener
before being dispatched to any EventTarget beneath it in the DOM tree.nt
*/ntlistenTo( emitter, …rest ) {ntt// Check if emitter is an instance of
DOM Node. If so, replace the argument withntt// corresponding ProxyEmitter
(or create one if not existing).nttif ( isNode( emitter ) || isWindow(
emitter ) ) {ntttconst proxy = this._getProxyEmitter( emitter ) || new
ProxyEmitter( emitter );nntttproxy.attach( …rest );nntttemitter =
proxy;ntt}nntt// Execute parent class method with Emitter (or ProxyEmitter)
instance.nttEmitterMixin.listenTo.call( this, emitter, …rest );nt},nnt/**nt
* Stops listening for events. It can be used at different levels:nt * It is
backwards compatible with {@link
module:utils/emittermixin~EmitterMixin#listenTo}.nt *nt * * To stop
listening to a specific callback.nt * * To stop listening to a specific
event.nt * * To stop listening to all events fired by a specific object.nt
* * To stop listening to all events fired by all object.nt *nt * @param
{module:utils/emittermixin~Emitter|Node} [emitter] The object to stop
listening to. If omitted, stops it for all objects.nt * @param {String}
[event] (Requires the `emitter`) The name of the event to stop listening
to. If omitted, stops itnt * for all events from `emitter`.nt * @param
{Function} [callback] (Requires the `event`) The function to be removed
from the call list for the givennt * `event`.nt */ntstopListening( emitter,
event, callback ) {ntt// Check if emitter is an instance of DOM Node. If
so, replace the argument with corresponding ProxyEmitter.nttif ( isNode(
emitter ) || isWindow( emitter ) ) {ntttconst proxy =
this._getProxyEmitter( emitter );nnttt// Element has no listeners.ntttif (
!proxy ) {nttttreturn;nttt}nntttemitter = proxy;ntt}nntt// Execute parent
class method with Emitter (or ProxyEmitter)
instance.nttEmitterMixin.stopListening.call( this, emitter, event, callback
);nnttif ( emitter instanceof ProxyEmitter ) {ntttemitter.detach( event
);ntt}nt},nnt/**nt * Retrieves ProxyEmitter instance for given DOM Node
residing in this Host.nt *nt * @pivatent * @param {Node} node DOM Node of
the ProxyEmitter.nt * @returns {module:utils/dom/emittermixin~ProxyEmitter}
ProxyEmitter instance or null.nt */nt_getProxyEmitter( node ) {nttreturn
_getEmitterListenedTo( this, getNodeUID( node ) );nt}n} );nnexport default
DomEmitterMixin;nn/**n * Creates a ProxyEmitter instance. Such an instance
is a bridge between a DOM Node firing eventsn * and any Host listening to
them. It is backwards compatible with {@link
module:utils/emittermixin~EmitterMixin#on}.n *n *                          
listenTo( click, … )n *                   
<code>-----------------------------------------</code>n *                  
|              stopListening( … )       |n *    
<code>----------------------------</code>                           |      
addEventListener( click, … )n *     | Host                       |         
|   <code>---------------------------------------------</code>n *    
<code>----------------------------</code>                           |   |  
removeEventListener( click, … )     |n *     | _listeningTo: {            |
<code>----------v-------------</code>                                   |n
*     |   UID: {                   |                | ProxyEmitter         
|                                   |n *     |     emitter: ProxyEmitter, |
<code>------------------------</code>                     
<code>------------v----------</code>n *     |     callbacks: {           | 
| events: {              |                      | Node (HTMLElement)    |n
*     |       click: [ callbacks ] |                |   click: [ callbacks
] |                      <code>-----------------------</code>n *     |    
}                      |                | },                     |         
| data-ck-expando: UID  |n *     |   }                        |            
| _domNode: Node,        |                     
<code>-----------------------</code>n *     | }                          | 
| _domListeners: {},     |                                   |n *     |
<code>------------------------</code> |                | _emitterId: UID   
|                                   |n *     | | DomEmitterMixin        | |
+————–^———+                                   |n *     |
<code>------------------------</code> |                           |   |    
|n *     +————–^————-+                           |  
<code>---------------------------------------------</code>n *              
|                                         |                  click (DOM
Event)n *                   
<code>-----------------------------------------</code>n *                  
fire( click, DOM Event )n *n * @mixes
module:utils/emittermixin~EmitterMixinn * @implements
module:utils/dom/emittermixin~Emittern * @privaten */nclass ProxyEmitter
{nt/**nt * @param {Node} node DOM Node that fires events.nt * @returns
{Object} ProxyEmitter instance bound to the DOM Node.nt */ntconstructor(
node ) {ntt// Set emitter ID to match DOM Node "expando&quot;
property.ntt_setEmitterId( this, getNodeUID( node ) );nntt// Remember the
DOM Node this ProxyEmitter is bound to.nttthis._domNode =
node;nt}n}nnextend( ProxyEmitter.prototype, EmitterMixin, {nt/**nt *
Collection of native DOM listeners.nt *nt * @privatent * @member {Object}
module:utils/dom/emittermixin~ProxyEmitter#_domListenersnt */nnt/**nt *
Registers a callback function to be executed when an event is fired.nt *nt
* It attaches a native DOM listener to the DOM Node. When fired,nt * a
corresponding Emitter event will also fire with DOM Event object as an
argument.nt *nt * @method
module:utils/dom/emittermixin~ProxyEmitter#attachnt * @param {String} event
The name of the event.nt * @param {Function} callback The function to be
called on event.nt * @param {Object} [options={}] Additional options.nt *
@param {Boolean} [options.useCapture=false] Indicates that events of this
type will be dispatched to the registerednt * listener before being
dispatched to any EventTarget beneath it in the DOM tree.nt */ntattach(
event, callback, options = {} ) {ntt// If the DOM Listener for given event
already exist it is pointlessntt// to attach another one.nttif (
this._domListeners &amp;&amp; this._domListeners[ event ] )
{ntttreturn;ntt}nnttconst domListener = this._createDomListener( event,
!!options.useCapture );nntt// Attach the native DOM listener to DOM
Node.nttthis._domNode.addEventListener( event, domListener,
!!options.useCapture );nnttif ( !this._domListeners )
{ntttthis._domListeners = {};ntt}nntt// Store the native DOM listener in
this ProxyEmitter. It will be helpfulntt// when stopping listening to the
event.nttthis._domListeners[ event ] = domListener;nt},nnt/**nt * Stops
executing the callback on the given event.nt *nt * @method
module:utils/dom/emittermixin~ProxyEmitter#detachnt * @param {String} event
The name of the event.nt */ntdetach( event ) {nttlet events;nntt// Remove
native DOM listeners which are orphans. If no callbacksntt// are awaiting
given event, detach native DOM listener from DOM Node.ntt// See: {@link
attach}.nnttif ( this._domListeners[ event ] &amp;&amp; ( !( events =
this._events[ event ] ) || !events.callbacks.length ) )
{ntttthis._domListeners[ event ].removeListener();ntt}nt},nnt/**nt *
Creates a native DOM listener callback. When the native DOM eventnt * is
fired it will fire corresponding event on this ProxyEmitter.nt * Note: A
native DOM Event is passed as an argument.nt *nt * @privatent * @method
module:utils/dom/emittermixin~ProxyEmitter#_createDomListenernt * @param
{String} event The name of the event.nt * @param {Boolean} useCapture
Indicates whether the listener was created for capturing event.nt *
@returns {Function} The DOM listener callback.nt */nt_createDomListener(
event, useCapture ) {nttconst domListener = domEvt =&gt; {ntttthis.fire(
event, domEvt );ntt};nntt// Supply the DOM listener callback with a
function that will helpntt// detach it from the DOM Node, when it is no
longer necessary.ntt// See: {@link detach}.nttdomListener.removeListener =
() =&gt; {ntttthis._domNode.removeEventListener( event, domListener,
useCapture );ntttdelete this._domListeners[ event ];ntt};nnttreturn
domListener;nt}n} );nn// Gets an unique DOM Node identifier. The identifier
will be set if not defined.n//n// @privaten// @param {Node} noden// @return
{String} UID for given DOM Node.nfunction getNodeUID( node ) {ntreturn
node[ &#39;data-ck-expando&#39; ] || ( node[ &#39;data-ck-expando&#39; ] =
uid() );n}nn/**n * Interface representing classes which mix in {@link
module:utils/dom/emittermixin~EmitterMixin}.n *n * @interface Emittern
*/nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/dom/emittermixin.jsn// module id = nulln// module
chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module engine/view/observer/observern */nnimport DomEmitterMixin from
&#39;@ckeditor/ckeditor5-utils/src/dom/emittermixin&#39;;nimport mix from
&#39;@ckeditor/ckeditor5-utils/src/mix&#39;;nn/**n * Abstract base observer
class. Observers are classes which listen to DOM events, do the
preliminaryn * processing and fire events on the {@link
module:engine/view/document~Document} objects.n * Observers can also add
features to the view, for instance by updating its status or marking
elementsn * which need refresh on DOM events.n *n * @abstractn */nexport
default class Observer {nt/**nt * Creates an instance of the observer.nt
*nt * @param {module:engine/view/view~View} viewnt */ntconstructor( view )
{ntt/**ntt * Instance of the view controller.ntt *ntt * @readonlyntt *
@member {module:engine/view/view~View}ntt */nttthis.view = view;nntt/**ntt
* Reference to the {@link module:engine/view/document~Document} object.ntt
*ntt * @readonlyntt * @member {module:engine/view/document~Document}ntt
*/nttthis.document = view.document;nntt/**ntt * State of the observer. If
it is disabled events will not be fired.ntt *ntt * @readonlyntt * @member
{Boolean}ntt */nttthis.isEnabled = false;nt}nnt/**nt * Enables the
observer. This method is called when the observer is registered to thent *
{@link module:engine/view/view~View} and after {@link
module:engine/view/view~View#render rendering}nt * (all observers are
{@link disable disabled} before rendering).nt *nt * A typical use case for
disabling observers is that mutation observers need to be disabled for the
rendering.nt * However, a child class may not need to be disabled, so it
can implement an empty method.nt *nt * @see
module:engine/view/observer/observer~Observer#disablent */ntenable()
{nttthis.isEnabled = true;nt}nnt/**nt * Disables the observer. This method
is called beforent * {@link module:engine/view/view~View#render rendering}
to prevent firing events during rendering.nt *nt * @see
module:engine/view/observer/observer~Observer#enablent */ntdisable()
{nttthis.isEnabled = false;nt}nnt/**nt * Disables and destroys the
observer, among others removes event listeners created by the observer.nt
*/ntdestroy() {nttthis.disable();nttthis.stopListening();nt}nnt/**nt *
Starts observing the given root element.nt *nt * @method observent * @param
{HTMLElement} domElementnt * @param {String} name The name of the root
element.nt */n}nnmix( Observer, DomEmitterMixin );nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-engine/src/view/observer/observer.jsn//
module id = nulln// module chunks = ”,“import MapCache from
&#39;./_MapCache&#39;;nimport setCacheAdd from
&#39;./_setCacheAdd&#39;;nimport setCacheHas from
&#39;./_setCacheHas&#39;;nn/**n *n * Creates an array cache object to store
unique values.n *n * @privaten * @constructorn * @param {Array} [values]
The values to cache.n */nfunction SetCache(values) {n  var index = -1,n    
length = values ? values.length : 0;nn  this.__data__ = new MapCache;n 
while (++index &lt; length) {n    <a href="index">this.add(values</a>);n 
}n}nn// Add methods to `SetCache`.nSetCache.prototype.add =
SetCache.prototype.push = setCacheAdd;nSetCache.prototype.has =
setCacheHas;nnexport default SetCache;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/_SetCache.jsn// module id =
nulln// module chunks = ”,“import baseHas from &#39;./_baseHas&#39;;nimport
keys from &#39;./keys&#39;;nn/** Used to compose bitmasks for comparison
styles. */nvar PARTIAL_COMPARE_FLAG = 2;nn/**n * A specialized version of
`baseIsEqualDeep` for objects with support forn * partial deep
comparisons.n *n * @privaten * @param {Object} object The object to
compare.n * @param {Object} other The other object to compare.n * @param
{Function} equalFunc The function to determine equivalents of values.n *
@param {Function} customizer The function to customize comparisons.n *
@param {number} bitmask The bitmask of comparison flags. See `baseIsEqual`n
*  for more details.n * @param {Object} stack Tracks traversed `object` and
`other` objects.n * @returns {boolean} Returns `true` if the objects are
equivalent, else `false`.n */nfunction equalObjects(object, other,
equalFunc, customizer, bitmask, stack) {n  var isPartial = bitmask &amp;
PARTIAL_COMPARE_FLAG,n      objProps = keys(object),n      objLength =
objProps.length,n      othProps = keys(other),n      othLength =
othProps.length;nn  if (objLength != othLength &amp;&amp; !isPartial) {n   
return false;n  }n  var index = objLength;n  while (index–) {n    var key =
<a href="index">objProps</a>;n    if (!(isPartial ? key in other :
baseHas(other, key))) {n      return false;n    }n  }n  // Assume cyclic
values are equal.n  var stacked = stack.get(object);n  if (stacked) {n   
return stacked == other;n  }n  var result = true;n  stack.set(object,
other);nn  var skipCtor = isPartial;n  while (++index &lt; objLength) {n   
key = <a href="index">objProps</a>;n    var objValue = <a
href="key">object</a>,n        othValue = <a href="key">other</a>;nn    if
(customizer) {n      var compared = isPartialn        ?
customizer(othValue, objValue, key, other, object, stack)n        :
customizer(objValue, othValue, key, object, other, stack);n    }n    //
Recursively compare objects (susceptible to call stack limits).n    if
(!(compared === undefinedn          ? (objValue === othValue ||
equalFunc(objValue, othValue, customizer, bitmask, stack))n          :
comparedn        )) {n      result = false;n      break;n    }n    skipCtor
|| (skipCtor = key == &#39;constructor&#39;);n  }n  if (result &amp;&amp;
!skipCtor) {n    var objCtor = object.constructor,n        othCtor =
other.constructor;nn    // Non `Object` object instances with different
constructors are not equal.n    if (objCtor != othCtor &amp;&amp;n       
(&#39;constructor&#39; in object &amp;&amp; &#39;constructor&#39; in other)
&amp;&amp;n        !(typeof objCtor == &#39;function&#39; &amp;&amp;
objCtor instanceof objCtor &amp;&amp;n          typeof othCtor ==
&#39;function&#39; &amp;&amp; othCtor instanceof othCtor)) {n      result =
false;n    }n  }n  <a href="'delete'">stack</a>(object);n  return
result;n}nnexport default equalObjects;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/_equalObjects.jsn// module id =
nulln// module chunks = ”,“import isLength from
&#39;./isLength&#39;;nimport isObjectLike from
&#39;./isObjectLike&#39;;nn/** `Object#toString` result references. */nvar
argsTag = &#39;[object Arguments]&#39;,n    arrayTag = &#39;[object
Array]&#39;,n    boolTag = &#39;[object Boolean]&#39;,n    dateTag =
&#39;[object Date]&#39;,n    errorTag = &#39;[object Error]&#39;,n   
funcTag = &#39;[object Function]&#39;,n    mapTag = &#39;[object
Map]&#39;,n    numberTag = &#39;[object Number]&#39;,n    objectTag =
&#39;[object Object]&#39;,n    regexpTag = &#39;[object RegExp]&#39;,n   
setTag = &#39;[object Set]&#39;,n    stringTag = &#39;[object
String]&#39;,n    weakMapTag = &#39;[object WeakMap]&#39;;nnvar
arrayBufferTag = &#39;[object ArrayBuffer]&#39;,n    dataViewTag =
&#39;[object DataView]&#39;,n    float32Tag = &#39;[object
Float32Array]&#39;,n    float64Tag = &#39;[object Float64Array]&#39;,n   
int8Tag = &#39;[object Int8Array]&#39;,n    int16Tag = &#39;[object
Int16Array]&#39;,n    int32Tag = &#39;[object Int32Array]&#39;,n   
uint8Tag = &#39;[object Uint8Array]&#39;,n    uint8ClampedTag =
&#39;[object Uint8ClampedArray]&#39;,n    uint16Tag = &#39;[object
Uint16Array]&#39;,n    uint32Tag = &#39;[object Uint32Array]&#39;;nn/**
Used to identify `toStringTag` values of typed arrays. */nvar
typedArrayTags = {};<a href=”float32Tag“>ntypedArrayTags</a> = <a
href="float64Tag">typedArrayTags</a> =<a href=”int8Tag“>ntypedArrayTags</a>
= <a href="int16Tag">typedArrayTags</a> =<a
href=”int32Tag“>ntypedArrayTags</a> = <a href="uint8Tag">typedArrayTags</a>
=<a href=”uint8ClampedTag“>ntypedArrayTags</a> = <a
href="uint16Tag">typedArrayTags</a> =<a
href=”uint32Tag“>ntypedArrayTags</a> = <a
href="argsTag">true;ntypedArrayTags</a> = <a
href="arrayTag">typedArrayTags</a> =<a
href=”arrayBufferTag“>ntypedArrayTags</a> = <a
href="boolTag">typedArrayTags</a> =<a
href=”dataViewTag“>ntypedArrayTags</a> = <a
href="dateTag">typedArrayTags</a> =<a href=”errorTag“>ntypedArrayTags</a> =
<a href="funcTag">typedArrayTags</a> =<a href=”mapTag“>ntypedArrayTags</a>
= <a href="numberTag">typedArrayTags</a> =<a
href=”objectTag“>ntypedArrayTags</a> = <a
href="regexpTag">typedArrayTags</a> =<a href=”setTag“>ntypedArrayTags</a> =
<a href="stringTag">typedArrayTags</a> =<a
href=”weakMapTag“>ntypedArrayTags</a> = false;nn/** Used for built-in
method references. */nvar objectProto = Object.prototype;nn/**n * Used to
resolve then * [`toStringTag`](<a
href="http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n">ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)n</a>
* of values.n */nvar objectToString = objectProto.toString;nn/**n * Checks
if `value` is classified as a typed array.n *n * @staticn * @memberOf _n *
@since 3.0.0n * @category Langn * @param {*} value The value to check.n *
@returns {boolean} Returns `true` if `value` is correctly classified,n * 
else `false`.n * @examplen *n * _.isTypedArray(new Uint8Array);n * // =&gt;
truen *n * _.isTypedArray([]);n * // =&gt; falsen */nfunction
isTypedArray(value) {n  return isObjectLike(value) &amp;&amp;n   
isLength(value.length) &amp;&amp; !!<a
href="objectToString.call(value)">typedArrayTags</a>;n}nnexport default
isTypedArray;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/isTypedArray.jsn// module id = nulln//
module chunks = ”,“import baseIsEqualDeep from
&#39;./_baseIsEqualDeep&#39;;nimport isObject from
&#39;./isObject&#39;;nimport isObjectLike from
&#39;./isObjectLike&#39;;nn/**n * The base implementation of `_.isEqual`
which supports partial comparisonsn * and tracks traversed objects.n *n *
@privaten * @param {*} value The value to compare.n * @param {*} other The
other value to compare.n * @param {Function} [customizer] The function to
customize comparisons.n * @param {boolean} [bitmask] The bitmask of
comparison flags.n *  The bitmask may be composed of the following flags:n
*     1 - Unordered comparisonn *     2 - Partial comparisonn * @param
{Object} [stack] Tracks traversed `value` and `other` objects.n * @returns
{boolean} Returns `true` if the values are equivalent, else `false`.n
*/nfunction baseIsEqual(value, other, customizer, bitmask, stack) {n  if
(value === other) {n    return true;n  }n  if (value == null || other ==
null || (!isObject(value) &amp;&amp; !isObjectLike(other))) {n    return
value !== value &amp;&amp; other !== other;n  }n  return
baseIsEqualDeep(value, other, baseIsEqual, customizer, bitmask,
stack);n}nnexport default baseIsEqual;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/_baseIsEqual.jsn// module id =
nulln// module chunks = ”,“import isObject from
&#39;./isObject&#39;;nimport now from &#39;./now&#39;;nimport toNumber from
&#39;./toNumber&#39;;nn/** Used as the `TypeError` message for
"Functions&quot; methods. */nvar FUNC_ERROR_TEXT = &#39;Expected a
function&#39;;nn/* Built-in method references for those with the same name
as other `lodash` methods. */nvar nativeMax = Math.max,n    nativeMin =
Math.min;nn/**n * Creates a debounced function that delays invoking `func`
until after `wait`n * milliseconds have elapsed since the last time the
debounced function wasn * invoked. The debounced function comes with a
`cancel` method to canceln * delayed `func` invocations and a `flush`
method to immediately invoke them.n * Provide an options object to indicate
whether `func` should be invoked onn * the leading and/or trailing edge of
the `wait` timeout. The `func` is invokedn * with the last arguments
provided to the debounced function. Subsequent callsn * to the debounced
function return the result of the last `func` invocation.n *n *
*<strong>Note:</strong>* If `leading` and `trailing` options are `true`,
`func` is invokedn * on the trailing edge of the timeout only if the
debounced function isn * invoked more than once during the `wait` timeout.n
*n * See [David Corbacho&#39;s article](<a
href="https://css-tricks.com/debouncing-throttling-explained-examples/)\n">css-tricks.com/debouncing-throttling-explained-examples/)n</a>
* for details over the differences between `_.debounce` and `_.throttle`.n
*n * @staticn * @memberOf _n * @since 0.1.0n * @category Functionn * @param
{Function} func The function to debounce.n * @param {number} [wait=0] The
number of milliseconds to delay.n * @param {Object} [options={}] The
options object.n * @param {boolean} [options.leading=false]n *  Specify
invoking on the leading edge of the timeout.n * @param {number}
[options.maxWait]n *  The maximum time `func` is allowed to be delayed
before it&#39;s invoked.n * @param {boolean} [options.trailing=true]n * 
Specify invoking on the trailing edge of the timeout.n * @returns
{Function} Returns the new debounced function.n * @examplen *n * // Avoid
costly calculations while the window size is in flux.n *
jQuery(window).on(&#39;resize&#39;, _.debounce(calculateLayout, 150));n *n
* // Invoke `sendMail` when clicked, debouncing subsequent calls.n *
jQuery(element).on(&#39;click&#39;, _.debounce(sendMail, 300, {n *  
&#39;leading&#39;: true,n *   &#39;trailing&#39;: falsen * }));n *n * //
Ensure `batchLog` is invoked once after 1 second of debounced calls.n * var
debounced = _.debounce(batchLog, 250, { &#39;maxWait&#39;: 1000 });n * var
source = new EventSource(&#39;/stream&#39;);n *
jQuery(source).on(&#39;message&#39;, debounced);n *n * // Cancel the
trailing debounced invocation.n * jQuery(window).on(&#39;popstate&#39;,
debounced.cancel);n */nfunction debounce(func, wait, options) {n  var
lastArgs,n      lastThis,n      maxWait,n      result,n      timerId,n     
lastCallTime = 0,n      lastInvokeTime = 0,n      leading = false,n     
maxing = false,n      trailing = true;nn  if (typeof func !=
&#39;function&#39;) {n    throw new TypeError(FUNC_ERROR_TEXT);n  }n  wait
= toNumber(wait) || 0;n  if (isObject(options)) {n    leading =
!!options.leading;n    maxing = &#39;maxWait&#39; in options;n    maxWait =
maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;n   
trailing = &#39;trailing&#39; in options ? !!options.trailing : trailing;n 
}nn  function invokeFunc(time) {n    var args = lastArgs,n        thisArg =
lastThis;nn    lastArgs = lastThis = undefined;n    lastInvokeTime = time;n
result = func.apply(thisArg, args);n    return result;n  }nn  function
leadingEdge(time) {n    // Reset any `maxWait` timer.n    lastInvokeTime =
time;n    // Start the timer for the trailing edge.n    timerId =
setTimeout(timerExpired, wait);n    // Invoke the leading edge.n    return
leading ? invokeFunc(time) : result;n  }nn  function remainingWait(time) {n
var timeSinceLastCall = time - lastCallTime,n        timeSinceLastInvoke =
time - lastInvokeTime,n        result = wait - timeSinceLastCall;nn   
return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;n
}nn  function shouldInvoke(time) {n    var timeSinceLastCall = time -
lastCallTime,n        timeSinceLastInvoke = time - lastInvokeTime;nn    //
Either this is the first call, activity has stopped and we&#39;re at then  
// trailing edge, the system time has gone backwards and we&#39;re
treatingn    // it as the trailing edge, or we&#39;ve hit the `maxWait`
limit.n    return (!lastCallTime || (timeSinceLastCall &gt;= wait) ||n     
(timeSinceLastCall &lt; 0) || (maxing &amp;&amp; timeSinceLastInvoke &gt;=
maxWait));n  }nn  function timerExpired() {n    var time = now();n    if
(shouldInvoke(time)) {n      return trailingEdge(time);n    }n    //
Restart the timer.n    timerId = setTimeout(timerExpired,
remainingWait(time));n  }nn  function trailingEdge(time) {n   
clearTimeout(timerId);n    timerId = undefined;nn    // Only invoke if we
have `lastArgs` which means `func` has beenn    // debounced at least
once.n    if (trailing &amp;&amp; lastArgs) {n      return
invokeFunc(time);n    }n    lastArgs = lastThis = undefined;n    return
result;n  }nn  function cancel() {n    if (timerId !== undefined) {n     
clearTimeout(timerId);n    }n    lastCallTime = lastInvokeTime = 0;n   
lastArgs = lastThis = timerId = undefined;n  }nn  function flush() {n   
return timerId === undefined ? result : trailingEdge(now());n  }nn 
function debounced() {n    var time = now(),n        isInvoking =
shouldInvoke(time);nn    lastArgs = arguments;n    lastThis = this;n   
lastCallTime = time;nn    if (isInvoking) {n      if (timerId ===
undefined) {n        return leadingEdge(lastCallTime);n      }n      if
(maxing) {n        // Handle invocations in a tight loop.n       
clearTimeout(timerId);n        timerId = setTimeout(timerExpired, wait);n  
return invokeFunc(lastCallTime);n      }n    }n    if (timerId ===
undefined) {n      timerId = setTimeout(timerExpired, wait);n    }n   
return result;n  }n  debounced.cancel = cancel;n  debounced.flush = flush;n
return debounced;n}nnexport default debounce;nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-utils/src/lib/lodash/debounce.jsn// module
id = nulln// module chunks = ”,“/**n * @license Copyright © 2003-2018,
CKSource - Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module engine/view/observer/fakeselectionobservern
*/nnimport Observer from &#39;./observer&#39;;nimport ViewSelection from
&#39;../selection&#39;;nimport { keyCodes } from
&#39;@ckeditor/ckeditor5-utils/src/keyboard&#39;;nimport debounce from
&#39;@ckeditor/ckeditor5-utils/src/lib/lodash/debounce&#39;;nn/**n * Fake
selection observer class. If view selection is fake it is placed in dummy
DOM container. This observer listensn * on {@link
module:engine/view/document~Document#event:keydown keydown} events and
handles moving fake view selection to the correct placen * if arrow keys
are pressed.n * Fires {@link
module:engine/view/document~Document#event:selectionChange selectionChange
event} simulating natural behaviour ofn * {@link
module:engine/view/observer/selectionobserver~SelectionObserver
SelectionObserver}.n *n * @extends
module:engine/view/observer/observer~Observer.Observern */nexport default
class FakeSelectionObserver extends Observer {nt/**nt * Creates new
FakeSelectionObserver instance.nt *nt * @param
{module:engine/view/view~View} viewnt */ntconstructor( view ) {nttsuper(
view );nntt/**ntt * Fires debounced event `selectionChangeDone`. It uses
`lodash#debounce` method to delay function call.ntt *ntt * @privatentt *
@param {Object} data Selection change data.ntt * @method
#_fireSelectionChangeDoneDebouncedntt
*/nttthis._fireSelectionChangeDoneDebounced = debounce( data =&gt;
this.document.fire( &#39;selectionChangeDone&#39;, data ), 200
);nt}nnt/**nt * @inheritDocnt */ntobserve() {nttconst document =
this.document;nnttdocument.on( &#39;keydown&#39;, ( eventInfo, data ) =&gt;
{ntttconst selection = document.selection;nntttif ( selection.isFake
&amp;&amp; _isArrowKeyCode( data.keyCode ) &amp;&amp; this.isEnabled )
{ntttt// Prevents default key down handling - no selection change will
occur.nttttdata.preventDefault();nnttttthis._handleSelectionMove(
data.keyCode );nttt}ntt}, { priority: &#39;lowest&#39; } );nt}nnt/**nt *
@inheritDocnt */ntdestroy()
{nttsuper.destroy();nnttthis._fireSelectionChangeDoneDebounced.cancel();nt}nnt/**nt
* Handles collapsing view selection according to given key code. If left or
up key is provided - new selection will bent * collapsed to left. If right
or down key is pressed - new selection will be collapsed to right.nt *nt *
This method fires {@link
module:engine/view/document~Document#event:selectionChange} andnt * {@link
module:engine/view/document~Document#event:selectionChangeDone} events
imitating behaviour ofnt * {@link
module:engine/view/observer/selectionobserver~SelectionObserver}.nt *nt *
@privatent * @param {Number} keyCodent * @fires
module:engine/view/document~Document#event:selectionChangent * @fires
module:engine/view/document~Document#event:selectionChangeDonent
*/nt_handleSelectionMove( keyCode ) {nttconst selection =
this.document.selection;nttconst newSelection = new ViewSelection(
selection.getRanges(), { backward: selection.isBackward, fake: false }
);nntt// Left or up arrow pressed - move selection to start.nttif ( keyCode
== keyCodes.arrowleft || keyCode == keyCodes.arrowup )
{ntttnewSelection.setTo( newSelection.getFirstPosition() );ntt}nntt// Right
or down arrow pressed - move selection to end.nttif ( keyCode ==
keyCodes.arrowright || keyCode == keyCodes.arrowdown )
{ntttnewSelection.setTo( newSelection.getLastPosition() );ntt}nnttconst
data = {ntttoldSelection: selection,ntttnewSelection,ntttdomSelection:
nullntt};nntt// Fire dummy selection change event.nttthis.document.fire(
&#39;selectionChange&#39;, data );nntt// Call`
#_fireSelectionChangeDoneDebounced` every time when `selectionChange` event
is fired.ntt// This function is debounced what means that
`selectionChangeDone` event will be fired only whenntt// defined int the
function time will elapse since the last time the function was called.ntt//
So `selectionChangeDone` will be fired when selection will stop
changing.nttthis._fireSelectionChangeDoneDebounced( data );nt}n}nn// Checks
if one of the arrow keys is pressed.n//n// @privaten// @param {Number}
keyCoden// @returns {Boolean}nfunction _isArrowKeyCode( keyCode ) {ntreturn
keyCode == keyCodes.arrowright ||nttkeyCode == keyCodes.arrowleft
||nttkeyCode == keyCodes.arrowup ||nttkeyCode ==
keyCodes.arrowdown;n}nnnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/view/observer/fakeselectionobserver.jsn// module id
= nulln// module chunks = ”,“/**n * @license Copyright © 2003-2018,
CKSource - Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/* global console */nn/**n * @module utils/logn */nnimport
{ attachLinkToDocumentation } from &#39;./ckeditorerror&#39;;nn/**n * The
logging module.n *n * This object features two functions that should be
used across CKEditor code base to log errors and warnings.n * Despite being
an overridable interface for native `console.*` this module serves also the
goal to limit then * code size of a minified CKEditor package. During
minification process the messages will be shortened andn * links to their
documentation will be logged to the console.n *n * All errors and warning
should be documented in the following way:n *n *tt/**n *tt * Error thrown
when a plugin cannot be loaded due to JavaScript errors, lack of plugins
with a given name, etc.n *tt *n *tt * @error plugin-loadn *tt * @param
pluginName The name of the plugin that could not be loaded.n *tt * @param
moduleName The name of the module which tried to load this plugin.n *tt *
/n *ttlog.error( &#39;plugin-load: It was not possible to load the
"{$pluginName}&quot; plugin in module "{$moduleName}&#39;, {n
*tttpluginName: &#39;foo&#39;,n *tttmoduleName: &#39;bar&#39;n *tt} );n *n
* ### Warning vs Error vs Thrown *n * * Whenever a potentially incorrect
situation occurs, which does not directly lead to an incorrect behavior,n *
log a warning.n * * Whenever an incorrect situation occurs, but the app may
continue working (although perhaps incorrectly),n * log an error.n * *
Whenever it&#39;s really bad and it does not make sense to continue
working, throw a {@link module:utils/ckeditorerror~CKEditorError}.n *n *
@namespacen */nconst log = {nt/**nt * Logs an error to the console.nt *nt *
Read more about error logging in the {@link module:utils/log} module.nt *nt
* @param {String} message The error message in an `error-name: Error
message.` format.nt * During the minification process the "Error
message&quot; part will be removed to limit the code sizent * and a link to
this error documentation will be logged to the console.nt * @param {Object}
[data] Additional data describing the error.nt */nterror( message, data )
{nttconsole.error( attachLinkToDocumentation( message ), data
);nt},nnt/**nt * Logs a warning to the console.nt *nt * Read more about
error logging in the {@link module:utils/log} module.nt *nt * @param
{String} message The warning message in a `warning-name: Warning message.`
format.nt * During the minification process the "Warning message&quot; part
will be removed to limit the code sizent * and a link to this error
documentation will be logged to the console.nt * @param {Object} [data]
Additional data describing the warning.nt */ntwarn( message, data )
{nttconsole.warn( attachLinkToDocumentation( message ), data
);nt}n};nnexport default log;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/log.jsn// module id = nulln// module chunks =
”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben. All
rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
utils/dom/israngen */nn/**n * Checks if the object is a native DOM Range.n
*n * @param {*} objn * @returns {Boolean}n */nexport default function
isRange( obj ) {ntreturn Object.prototype.toString.apply( obj ) ==
&#39;[object Range]&#39;;n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/dom/isrange.jsn// module id = nulln// module chunks
= ”,“import isObjectLike from &#39;./isObjectLike&#39;;nimport
isPlainObject from &#39;./isPlainObject&#39;;nn/**n * Checks if `value` is
likely a DOM element.n *n * @staticn * @memberOf _n * @since 0.1.0n *
@category Langn * @param {*} value The value to check.n * @returns
{boolean} Returns `true` if `value` is a DOM element,n *  else `false`.n *
@examplen *n * _.isElement(document.body);n * // =&gt; truen *n *
_.isElement(&#39;&lt;body&gt;&#39;);n * // =&gt; falsen */nfunction
isElement(value) {n  return !!value &amp;&amp; value.nodeType === 1
&amp;&amp; isObjectLike(value) &amp;&amp; !isPlainObject(value);n}nnexport
default isElement;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/isElement.jsn// module id = nulln//
module chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module utils/dom/getborderwidthsn */nn/**n * Returns an object
containing CSS border widths of a specified HTML element.n *n * @param
{HTMLElement} element An element which has CSS borders.n * @param {Object}
An object containing `top`, `left`, `right` and `bottom` propertiesn * with
numerical values of the `<a href="top,left,right,bottom">border-</a>-width`
CSS styles.n */nexport default function getBorderWidths( element ) {nt//
Call getComputedStyle on the window the element document belongs to.ntconst
style = element.ownerDocument.defaultView.getComputedStyle( element
);nntreturn {ntttop: parseInt( style.borderTopWidth, 10 ),nttright:
parseInt( style.borderRightWidth, 10 ),nttbottom: parseInt(
style.borderBottomWidth, 10 ),nttleft: parseInt( style.borderLeftWidth, 10
)nt};n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/dom/getborderwidths.jsn// module id = nulln// module
chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module utils/dom/rectn */nnimport isRange from &#39;./isrange&#39;;nimport
isWindow from &#39;./iswindow&#39;;nimport isElement from
&#39;../lib/lodash/isElement&#39;;nimport getBorderWidths from
&#39;./getborderwidths&#39;;nimport log from &#39;../log&#39;;nimport
isText from &#39;./istext&#39;;nn/**n * A helper class representing a
`ClientRect` object, e.g. value returned byn * the native
`object.getBoundingClientRect()` method. Provides a set of methodsn * to
manipulate the rect and compare it against other rect instances.n */nexport
default class Rect {nt/**nt * Creates an instance of rect.nt *nt *tt// Rect
of an HTMLElement.nt *ttconst rectA = new Rect( document.body );nt *nt
*tt// Rect of a DOM Range.nt *ttconst rectB = new Rect(
document.getSelection().getRangeAt( 0 ) );nt *nt *tt// Rect of a window
(web browser viewport).nt *ttconst rectC = new Rect( window );nt *nt *tt//
Rect out of an object.nt *ttconst rectD = new Rect( { top: 0, right: 10,
bottom: 10, left: 0, width: 10, height: 10 } );nt *nt *tt// Rect out of
another Rect instance.nt *ttconst rectE = new Rect( rectD );nt *nt *tt//
Rect out of a ClientRect.nt *ttconst rectF = new Rect(
document.body.getClientRects().item( 0 ) );nt *nt *
*<strong>Note</strong>*: By default a rect of an HTML element includes its
CSS borders and scrollbars (if any)nt * ant the rect of a `window` includes
scrollbars too. Use {@link excludeScrollbarsAndBorders}nt * to get the
inner part of the rect.nt *nt * @param
{HTMLElement|Range|Window|ClientRect|module:utils/dom/rect~Rect|Object}
source A source object to create the rect.nt */ntconstructor( source )
{nttconst isSourceRange = isRange( source );nntt/**ntt * The object this
rect is for.ntt *ntt * @protectedntt * @readonlyntt * @member
{HTMLElement|Range|ClientRect|module:utils/dom/rect~Rect|Object}
#_sourcentt */nttObject.defineProperty( this, &#39;_source&#39;, {nttt// If
the source is a Rect instance, copy it&#39;s #_source.ntttvalue:
source._source || source,ntttwritable: true,ntttenumerable: falsentt}
);nnttif ( isElement( source ) || isSourceRange ) {ntttconst sourceNode =
isSourceRange ? source.startContainer : source;nntttif (
!sourceNode.ownerDocument || !sourceNode.ownerDocument.body.contains(
sourceNode ) ) {ntttt/**ntttt * The `Rect` class depends on
`getBoundingClientRect` and `getClientRects` DOM methods.ntttt * If the
{@link constructor source} of a rect in an HTML element or a DOM range but
it doesntttt * not belong to any rendered DOM tree, these methods will fail
to obtain the geometry andntttt * the rect instance makes little sense to
the features using it.ntttt *ntttt * To get rid of this warning make sure
the source passed to the constructorntttt * is a descendant of
`window.document.body`.ntttt *ntttt * @error rect-source-not-in-domntttt *
@param {String} source The source of the Rect instance.ntttt
*/nttttlog.warn(nttttt&#39;rect-source-not-in-dom: The source of this rect
does not belong to any rendered DOM tree.&#39;,nttttt{ source
}ntttt);nttt}nntttif ( isSourceRange ) {nttttcopyRectProperties( this,
Rect.getDomRangeRects( source )[ 0 ] );nttt} else {nttttcopyRectProperties(
this, source.getBoundingClientRect() );nttt}ntt} else if ( isWindow( source
) ) {ntttconst { innerWidth, innerHeight } =
source;nntttcopyRectProperties( this, {ntttttop: 0,nttttright:
innerWidth,nttttbottom: innerHeight,nttttleft: 0,nttttwidth:
innerWidth,nttttheight: innerHeightnttt} );ntt} else
{ntttcopyRectProperties( this, source );ntt}nntt/**ntt * The "top&quot;
value of the rect.ntt *ntt * @readonlyntt * @member {Number} topntt
*/nntt/**ntt * The "right&quot; value of the rect.ntt *ntt * @readonlyntt *
@member {Number} rightntt */nntt/**ntt * The "bottom&quot; value of the
rect.ntt *ntt * @readonlyntt * @member {Number} bottomntt */nntt/**ntt *
The "left&quot; value of the rect.ntt *ntt * @readonlyntt * @member
{Number} leftntt */nntt/**ntt * The "width&quot; value of the rect.ntt *ntt
* @readonlyntt * @member {Number} widthntt */nntt/**ntt * The "height&quot;
value of the rect.ntt *ntt * @readonlyntt * @member {Number} heightntt
*/nt}nnt/**nt * Returns a clone of the rect.nt *nt * @returns
{module:utils/dom/rect~Rect} A cloned rect.nt */ntclone() {nttreturn new
Rect( this );nt}nnt/**nt * Moves the rect so that its upper–left corner
lands in desired `[ x, y ]` location.nt *nt * @param {Number} x Desired
horizontal location.nt * @param {Number} y Desired vertical location.nt *
@returns {module:utils/dom/rect~Rect} A rect which has been moved.nt
*/ntmoveTo( x, y ) {nttthis.top = y;nttthis.right = x +
this.width;nttthis.bottom = y + this.height;nttthis.left = x;nnttreturn
this;nt}nnt/**nt * Moves the rect in–place by a dedicated offset.nt *nt *
@param {Number} x A horizontal offset.nt * @param {Number} y A vertical
offsetnt * @returns {module:utils/dom/rect~Rect} A rect which has been
moved.nt */ntmoveBy( x, y ) {nttthis.top += y;nttthis.right +=
x;nttthis.left += x;nttthis.bottom += y;nnttreturn this;nt}nnt/**nt *
Returns a new rect a a result of intersection with another rect.nt *nt *
@param {module:utils/dom/rect~Rect} anotherRectnt * @returns
{module:utils/dom/rect~Rect}nt */ntgetIntersection( anotherRect ) {nttconst
rect = {nttttop: Math.max( this.top, anotherRect.top ),ntttright: Math.min(
this.right, anotherRect.right ),ntttbottom: Math.min( this.bottom,
anotherRect.bottom ),ntttleft: Math.max( this.left, anotherRect.left
)ntt};nnttrect.width = rect.right - rect.left;nttrect.height = rect.bottom
- rect.top;nnttif ( rect.width &lt; 0 || rect.height &lt; 0 ) {ntttreturn
null;ntt} else {ntttreturn new Rect( rect );ntt}nt}nnt/**nt * Returns the
area of intersection with another rect.nt *nt * @param
{module:utils/dom/rect~Rect} anotherRect [description]nt * @returns
{Number} Area of intersection.nt */ntgetIntersectionArea( anotherRect )
{nttconst rect = this.getIntersection( anotherRect );nnttif ( rect )
{ntttreturn rect.getArea();ntt} else {ntttreturn 0;ntt}nt}nnt/**nt *
Returns the area of the rect.nt *nt * @returns {Number}nt */ntgetArea()
{nttreturn this.width * this.height;nt}nnt/**nt * Returns a new rect, a
part of the original rect, which is actually visible to the user,nt * e.g.
an original rect cropped by parent element rects which have `overflow` set
in CSSnt * other than `&quot;visible&quot;`.nt *nt * If there&#39;s no such
visible rect, which is when the rect is limited by one or many ofnt * the
ancestors, `null` is returned.nt *nt * @returns
{module:utils/dom/rect~Rect|null} A visible rect instance or `null`, if
there&#39;s none.nt */ntgetVisible() {nttconst source = this._source;nttlet
visibleRect = this.clone();nntt// There&#39;s no ancestor to crop
&lt;body&gt; with the overflow.nttif ( !isBody( source ) ) {ntttlet parent
= source.parentNode || source.commonAncestorContainer;nnttt// Check the
ancestors all the way up to the &lt;body&gt;.ntttwhile ( parent &amp;&amp;
!isBody( parent ) ) {nttttconst parentRect = new Rect( parent );nttttconst
intersectionRect = visibleRect.getIntersection( parentRect );nnttttif (
intersectionRect ) {ntttttif ( intersectionRect.getArea() &lt;
visibleRect.getArea() ) {ntttttt// Reduce the visible rect to the
intersection.nttttttvisibleRect = intersectionRect;nttttt}ntttt} else
{nttttt// There&#39;s no intersection, the rect is completely
invisible.ntttttreturn null;ntttt}nnttttparent =
parent.parentNode;nttt}ntt}nnttreturn visibleRect;nt}nnt/**nt * Checks if
all property values ({@link top}, {@link left}, {@link right},nt * {@link
bottom}, {@link width} and {@link height}) are the equal in both rectnt *
instances.nt *nt * @param {module:utils/dom/rect~Rect} rect A rect instance
to compare with.nt * @returns {Boolean} `true` when Rects are equal.
`false` otherwise.nt */ntisEqual( anotherRect ) {nttfor ( const prop of
rectProperties ) {ntttif ( this[ prop ] !== anotherRect[ prop ] )
{nttttreturn false;nttt}ntt}nnttreturn true;nt}nnt/**nt * Checks whether a
rect fully contains another rect instance.nt *nt * @param
{module:utils/dom/rect~Rect} anotherRectnt * @returns {Boolean} `true` if
contains, `false` otherwise.nt */ntcontains( anotherRect ) {nttconst
intersectRect = this.getIntersection( anotherRect );nnttreturn !!(
intersectRect &amp;&amp; intersectRect.isEqual( anotherRect ) );nt}nnt/**nt
* Excludes scrollbars and CSS borders from the rect.nt *nt * * Borders are
removed when {@link #_source} is an HTML element.nt * * Scrollbars are
excluded from HTML elements and the `window`.nt *nt * @returns
{module:utils/dom/rect~Rect} A rect which has been updated.nt
*/ntexcludeScrollbarsAndBorders() {nttconst source = this._source;nttlet
scrollBarWidth, scrollBarHeight;nnttif ( isWindow( source ) )
{ntttscrollBarWidth = source.innerWidth -
source.document.documentElement.clientWidth;ntttscrollBarHeight =
source.innerHeight - source.document.documentElement.clientHeight;ntt} else
{ntttconst borderWidths = getBorderWidths( this._source
);nntttscrollBarWidth = source.offsetWidth -
source.clientWidth;ntttscrollBarHeight = source.offsetHeight -
source.clientHeight;nntttthis.moveBy( borderWidths.left, borderWidths.top
);ntt}nntt// Assuming LTR scrollbars. TODO: RTL.nttthis.width -=
scrollBarWidth;nttthis.right -= scrollBarWidth;nnttthis.height -=
scrollBarHeight;nttthis.bottom -= scrollBarHeight;nnttreturn
this;nt}nnt/**nt * Returns an array of rects of the given native DOM
Range.nt *nt * @param {Range} range A native DOM range.nt * @returns
{Array.&lt;module:utils/dom/rect~Rect&gt;} DOM Range rects.nt */ntstatic
getDomRangeRects( range ) {nttconst rects = [];ntt// Safari does not
iterate over ClientRectList using for…of loop.nttconst clientRects =
Array.from( range.getClientRects() );nnttif ( clientRects.length ) {ntttfor
( const rect of clientRects ) {nttttrects.push( new Rect( rect )
);nttt}ntt}ntt// If there&#39;s no client rects for the Range, use parent
container&#39;s bounding rectntt// instead and adjust rect&#39;s width to
simulate the actual geometry of such range.ntt// <a
href="https://github.com/ckeditor/ckeditor5-utils/issues/153\n\t\t">github.com/ckeditor/ckeditor5-utils/issues/153ntt</a>//
<a
href="https://github.com/ckeditor/ckeditor5-ui/issues/317\n\t\telse">github.com/ckeditor/ckeditor5-ui/issues/317nttelse</a>
{ntttlet startContainer = range.startContainer;nntttif ( isText(
startContainer ) ) {nttttstartContainer =
startContainer.parentNode;nttt}nntttconst rect = new Rect(
startContainer.getBoundingClientRect() );ntttrect.right =
rect.left;ntttrect.width = 0;nntttrects.push( rect );ntt}nnttreturn
rects;nt}n}nnconst rectProperties = [ &#39;top&#39;, &#39;right&#39;,
&#39;bottom&#39;, &#39;left&#39;, &#39;width&#39;, &#39;height&#39; ];nn//
Acquires all the rect properties from the passed source.n//n// @privaten//
@param {module:utils/dom/rect~Rect} rectn// @param
{ClientRect|module:utils/dom/rect~Rect|Object} sourcenfunction
copyRectProperties( rect, source ) {ntfor ( const p of rectProperties )
{nttrect[ p ] = source[ p ];nt}n}nn// Checks if provided object is a
&lt;body&gt; HTML element.n//n// @privaten// @param {HTMLElement|Range}
elementOrRangen// @returns {Boolean}nfunction isBody( elementOrRange )
{ntif ( !isElement( elementOrRange ) ) {nttreturn false;nt}nntreturn
elementOrRange ===
elementOrRange.ownerDocument.body;n}nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/dom/rect.jsn// module id = nulln// module
chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module utils/dom/scrolln */nnimport isRange from
&#39;./isrange&#39;;nimport Rect from &#39;./rect&#39;;nimport isText from
&#39;./istext&#39;;nnconst utils = {};nn/**n * Makes any page `HTMLElement`
or `Range` (`target`) visible inside the browser viewport.n * This helper
will scroll all `target` ancestors and the web browser viewport to reveal
the target ton * the user. If the `target` is already visible, nothing will
happen.n *n * @param {HTMLElement|Range} options.target A target, which
supposed to become visible to the user.n * @param {Number}
[options.viewportOffset] An offset from the edge of the viewport (in
pixels)n * the `target` will be moved by when the viewport is scrolled. It
enhances the user experiencen * by keeping the `target` some distance from
the edge of the viewport and thus making it easier ton * read or edit by
the user.n */nexport function scrollViewportToShowTarget( { target,
viewportOffset = 0 } ) {ntconst targetWindow = getWindow( target );ntlet
currentWindow = targetWindow;ntlet currentFrame = null;nnt// Iterate over
all windows, starting from target&#39;s parent window up to
window#top.ntwhile ( currentWindow ) {nttlet firstAncestorToScroll;nntt//
Let&#39;s scroll target&#39;s ancestors first to reveal it. Then, once the
ancestor scrollsntt// settled down, the algorithm can eventually scroll the
viewport of the current window.ntt//ntt// Note: If the current window is
target&#39;s *<strong>original</strong>* window (e.g. the first one),ntt//
start scrolling the closest parent of the target. If not, scroll the
closest parentntt// of an iframe that resides in the current window.nttif (
currentWindow == targetWindow ) {ntttfirstAncestorToScroll =
getParentElement( target );ntt} else {ntttfirstAncestorToScroll =
getParentElement( currentFrame );ntt}nntt// Scroll the target&#39;s
ancestors first. Once done, scrolling the viewport is
easy.nttscrollAncestorsToShowRect( firstAncestorToScroll, () =&gt; {nttt//
Note: If the target does not belong to the current window
*<strong>directly</strong>*,nttt// i.e. it resides in an iframe belonging
to the window, obtain the target&#39;s rectnttt// in the coordinates of the
current window. By default, a Rect returns geometrynttt// relative to the
current window&#39;s viewport. To make it work in a parent window,nttt// it
must be shifted.ntttreturn getRectRelativeToWindow( target, currentWindow
);ntt} );nntt// Obtain the rect of the target after it has been scrolled
within its ancestors.ntt// It&#39;s time to scroll the viewport.nttconst
targetRect = getRectRelativeToWindow( target, currentWindow
);nnttscrollWindowToShowRect( currentWindow, targetRect, viewportOffset
);nnttif ( currentWindow.parent != currentWindow ) {nttt// Keep the
reference to the &lt;iframe&gt; element the "previous current window&quot;
wasnttt// rendered within. It will be useful to re–calculate the rect of
the targetnttt// in the parent window&#39;s relative geometry. The
target&#39;s rect must be shiftednttt// by it&#39;s iframe&#39;s
position.ntttcurrentFrame = currentWindow.frameElement;ntttcurrentWindow =
currentWindow.parent;ntt} else {ntttcurrentWindow = null;ntt}nt}n}nn/**n *
Makes any page `HTMLElement` or `Range` (target) visible within its
scrollable ancestors,n * e.g. if they have `overflow: scroll` CSS style.n
*n * @param {HTMLElement|Range} target A target, which supposed to become
visible to the user.n */nexport function scrollAncestorsToShowTarget(
target ) {ntconst targetParent = getParentElement( target
);nntscrollAncestorsToShowRect( targetParent, () =&gt; {nttreturn new Rect(
target );nt} );n}nn// TODO: Using a property value shorthand in the top of
the filen// causes JSDoc to throw errors. See <a
href="https://github.com/cksource/docs-builder/issues/75.\nObject.assign">github.com/cksource/docs-builder/issues/75.nObject.assign</a>(
utils, {ntscrollViewportToShowTarget,ntscrollAncestorsToShowTargetn} );nn//
Makes a given rect visible within its parent window.n//n// Note: Avoid the
situation where the caret is still in the viewport, but totallyn// at the
edge of it. In such situation, if it moved beyond the viewport in the
nextn// action e.g. after paste, the scrolling would move it to the
viewportOffset leveln// and it all would look like the caret visually moved
up/down:n//n// 1.n//tt| foo[]n//tt|                                   
&lt;— N px of space below the caretn//tt+———————————…n//n// 2.
<strong>paste</strong>n// 3.n//tt|n//tt|n//tt+-foo—————————–…n//tt  bar[]  
&lt;— caret below viewport, scrolling…n//n// 4.
<strong>scrolling</strong>n// 5.n//tt|n//tt| foon//tt| bar[]               
&lt;— caret precisely at the edgen//tt+———————————…n//n// To prevent this,
this method checks the rects moved by the viewportOffset to covern// the
upper/lower edge of the viewport. It makes sure if the action repeats,
there&#39;sn// no twitching – it&#39;s a purely visual improvement:n//n//
5. (after fix)n//tt|n//tt| foon//tt| bar[]n//tt|                           
&lt;— N px of space below the caretn//tt+———————————…n//n// @privaten//
@param {Window} window A window which is scrolled to reveal the rect.n//
@param {module:utils/dom/rect~Rect} rect A rect which is to be revealed.n//
@param {Number} viewportOffset See scrollViewportToShowTarget.nfunction
scrollWindowToShowRect( window, rect, viewportOffset ) {ntconst
targetShiftedDownRect = rect.clone().moveBy( 0, viewportOffset );ntconst
targetShiftedUpRect = rect.clone().moveBy( 0, -viewportOffset );ntconst
viewportRect = new Rect( window ).excludeScrollbarsAndBorders();nntconst
rects = [ targetShiftedUpRect, targetShiftedDownRect ];nntif (
!rects.every( rect =&gt; viewportRect.contains( rect ) ) ) {nttlet {
scrollX, scrollY } = window;nnttif ( isAbove( targetShiftedUpRect,
viewportRect ) ) {ntttscrollY -= viewportRect.top - rect.top +
viewportOffset;ntt} else if ( isBelow( targetShiftedDownRect, viewportRect
) ) {ntttscrollY += rect.bottom - viewportRect.bottom +
viewportOffset;ntt}nntt// TODO: Web browsers scroll natively to place the
target in the middlentt// of the viewport. It&#39;s not a very popular
case, though.nttif ( isLeftOf( rect, viewportRect ) ) {ntttscrollX -=
viewportRect.left - rect.left + viewportOffset;ntt} else if ( isRightOf(
rect, viewportRect ) ) {ntttscrollX += rect.right - viewportRect.right +
viewportOffset;ntt}nnttwindow.scrollTo( scrollX, scrollY );nt}n}nn//
Recursively scrolls element ancestors to visually reveal a rect.n//n//
@privaten// @param {HTMLElement} A parent The first ancestors to start
scrolling.n// @param {Function} getRect A function which returns the Rect,
which is to be revealed.nfunction scrollAncestorsToShowRect( parent,
getRect ) {ntconst parentWindow = getWindow( parent );ntlet parentRect,
targetRect;nntwhile ( parent != parentWindow.document.body ) {ntttargetRect
= getRect();nttparentRect = new Rect( parent
).excludeScrollbarsAndBorders();nnttif ( !parentRect.contains( targetRect )
) {ntttif ( isAbove( targetRect, parentRect ) ) {nttttparent.scrollTop -=
parentRect.top - targetRect.top;nttt} else if ( isBelow( targetRect,
parentRect ) ) {nttttparent.scrollTop += targetRect.bottom -
parentRect.bottom;nttt}nntttif ( isLeftOf( targetRect, parentRect ) )
{nttttparent.scrollLeft -= parentRect.left - targetRect.left;nttt} else if
( isRightOf( targetRect, parentRect ) ) {nttttparent.scrollLeft +=
targetRect.right - parentRect.right;nttt}ntt}nnttparent =
parent.parentNode;nt}n}nn// Determines if a given `Rect` extends beyond the
bottom edge of the second `Rect`.n//n// @privaten// @param
{module:utils/dom/rect~Rect} firstRectn// @param
{module:utils/dom/rect~Rect} secondRectnfunction isBelow( firstRect,
secondRect ) {ntreturn firstRect.bottom &gt; secondRect.bottom;n}nn//
Determines if a given `Rect` extends beyond the top edge of the second
`Rect`.n//n// @privaten// @param {module:utils/dom/rect~Rect} firstRectn//
@param {module:utils/dom/rect~Rect} secondRectnfunction isAbove( firstRect,
secondRect ) {ntreturn firstRect.top &lt; secondRect.top;n}nn// Determines
if a given `Rect` extends beyond the left edge of the second `Rect`.n//n//
@privaten// @param {module:utils/dom/rect~Rect} firstRectn// @param
{module:utils/dom/rect~Rect} secondRectnfunction isLeftOf( firstRect,
secondRect ) {ntreturn firstRect.left &lt; secondRect.left;n}nn//
Determines if a given `Rect` extends beyond the right edge of the second
`Rect`.n//n// @privaten// @param {module:utils/dom/rect~Rect} firstRectn//
@param {module:utils/dom/rect~Rect} secondRectnfunction isRightOf(
firstRect, secondRect ) {ntreturn firstRect.right &gt;
secondRect.right;n}nn// Returns the closest window of an element or
range.n//n// @privaten// @param {HTMLElement|Range} firstRectn// @returns
{Window}nfunction getWindow( elementOrRange ) {ntif ( isRange(
elementOrRange ) ) {nttreturn
elementOrRange.startContainer.ownerDocument.defaultView;nt} else {nttreturn
elementOrRange.ownerDocument.defaultView;nt}n}nn// Returns the closest
parent of an element or DOM range.n//n// @privaten// @param
{HTMLElement|Range} firstRectn// @returns {HTMLelement}nfunction
getParentElement( elementOrRange ) {ntif ( isRange( elementOrRange ) )
{nttlet parent = elementOrRange.commonAncestorContainer;nntt// If a Range
is attached to the Text, use the closest element ancestor.nttif ( isText(
parent ) ) {ntttparent = parent.parentNode;ntt}nnttreturn parent;nt} else
{nttreturn elementOrRange.parentNode;nt}n}nn// Returns the rect of an
element or range residing in an iframe.n// The result rect is relative to
the geometry of the passed window instance.n//n// @privaten// @param
{HTMLElement|Range} target Element or range which rect should be
returned.n// @param {Window} relativeWindow A window the rect should be
relative to.n// @returns {module:utils/dom/rect~Rect}nfunction
getRectRelativeToWindow( target, relativeWindow ) {ntconst targetWindow =
getWindow( target );ntconst rect = new Rect( target );nntif ( targetWindow
=== relativeWindow ) {nttreturn rect;nt} else {nttlet currentWindow =
targetWindow;nnttwhile ( currentWindow != relativeWindow ) {ntttconst frame
= currentWindow.frameElement;ntttconst frameRect = new Rect( frame
).excludeScrollbarsAndBorders();nntttrect.moveBy( frameRect.left,
frameRect.top );nntttcurrentWindow = currentWindow.parent;ntt}nt}nntreturn
rect;n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/dom/scroll.jsn// module id = nulln// module chunks =
”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben. All
rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
engine/view/viewn */nnimport Document from &#39;./document&#39;;nimport
Writer from &#39;./writer&#39;;nimport Renderer from
&#39;./renderer&#39;;nimport DomConverter from
&#39;./domconverter&#39;;nnimport MutationObserver from
&#39;./observer/mutationobserver&#39;;nimport KeyObserver from
&#39;./observer/keyobserver&#39;;nimport FakeSelectionObserver from
&#39;./observer/fakeselectionobserver&#39;;nimport SelectionObserver from
&#39;./observer/selectionobserver&#39;;nimport FocusObserver from
&#39;./observer/focusobserver&#39;;nimport CompositionObserver from
&#39;./observer/compositionobserver&#39;;nnimport ObservableMixin from
&#39;@ckeditor/ckeditor5-utils/src/observablemixin&#39;;nimport log from
&#39;@ckeditor/ckeditor5-utils/src/log&#39;;nimport mix from
&#39;@ckeditor/ckeditor5-utils/src/mix&#39;;nimport {
scrollViewportToShowTarget } from
&#39;@ckeditor/ckeditor5-utils/src/dom/scroll&#39;;nimport {
injectUiElementHandling } from &#39;./uielement&#39;;nimport {
injectQuirksHandling } from &#39;./filler&#39;;nimport CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nn/**n * Editor&#39;s
view controller class. Its main responsibility is DOM - View management for
editing purposes, to providen * abstraction over the DOM structure and
events and hide all browsers quirks.n *n * View controller renders view
document to DOM whenever view structure changes. To determine when view can
be rendered,n * all changes need to be done using the {@link
module:engine/view/view~View#change} method, usingn * {@link
module:engine/view/writer~Writer}:n *n *ttview.change( writer =&gt; {n
*tttwriter.insert( position, writer.createText( &#39;foo&#39; ) );n *tt}
);n *n * View controller also register {@link
module:engine/view/observer/observer~Observer observers} which observes
changesn * on DOM and fire events on the {@link
module:engine/view/document~Document Document}.n * Note that the following
observers are added by the class constructor and are always available:n *n
* * {@link module:engine/view/observer/mutationobserver~MutationObserver},n
* * {@link
module:engine/view/observer/selectionobserver~SelectionObserver},n * *
{@link module:engine/view/observer/focusobserver~FocusObserver},n * *
{@link module:engine/view/observer/keyobserver~KeyObserver},n * * {@link
module:engine/view/observer/fakeselectionobserver~FakeSelectionObserver}.n
* * {@link
module:engine/view/observer/compositionobserver~CompositionObserver}.n *n *
This class also {@link module:engine/view/view~View#attachDomRoot bind DOM
and View elements}.n *n * If you do not need full DOM - View management,
and want to only transform the tree of view elements to the DOMn * elements
you do not need this controller, you can use the {@link
module:engine/view/domconverter~DomConverter DomConverter}.n *n * @mixes
module:utils/observablemixin~ObservableMixinn */nexport default class View
{ntconstructor() {ntt/**ntt * Instance of the {@link
module:engine/view/document~Document} associated with this view
controller.ntt *ntt * @readonlyntt * @member
{module:engine/view/document~Document}
module:engine/view/view~View#documentntt */nttthis.document = new
Document();nntt/**ntt * Instance of the {@link
module:engine/view/domconverter~DomConverter domConverter} use byntt *
{@link module:engine/view/view~View#renderer renderer}ntt * and {@link
module:engine/view/observer/observer~Observer observers}.ntt *ntt *
@readonlyntt * @member {module:engine/view/domconverter~DomConverter}
module:engine/view/view~View#domConverterntt */nttthis.domConverter = new
DomConverter();nntt/**ntt * Instance of the {@link
module:engine/view/renderer~Renderer renderer}.ntt *ntt * @protectedntt *
@member {module:engine/view/renderer~Renderer}
module:engine/view/view~View#rendererntt */nttthis._renderer = new
Renderer( this.domConverter, this.document.selection
);nttthis._renderer.bind( &#39;isFocused&#39; ).to( this.document
);nntt/**ntt * Roots of the DOM tree. Map on the `HTMLElement`s with roots
names as keys.ntt *ntt * @readonlyntt * @member {Map}
module:engine/view/view~View#domRootsntt */nttthis.domRoots = new
Map();nntt/**ntt * Map of registered {@link
module:engine/view/observer/observer~Observer observers}.ntt *ntt *
@privatentt * @member {Map.&lt;Function,
module:engine/view/observer/observer~Observer&gt;}
module:engine/view/view~View#_observersntt */nttthis._observers = new
Map();nntt/**ntt * Is set to `true` when {@link change view changes} are
currently in progress.ntt *ntt * @privatentt * @member {Boolean}
module:engine/view/view~View#_ongoingChangentt */nttthis._ongoingChange =
false;nntt/**ntt * Used to prevent calling {@link render} and {@link
change} during rendering view to the DOM.ntt *ntt * @privatentt * @member
{Boolean} module:engine/view/view~View#_renderingInProgressntt
*/nttthis._renderingInProgress = false;nntt/**ntt * Used to prevent calling
{@link render} and {@link change} during rendering view to the DOM.ntt *ntt
* @privatentt * @member {Boolean}
module:engine/view/view~View#_renderingInProgressntt
*/nttthis._postFixersInProgress = false;nntt/**ntt * Writer instance used
in {@link change change method) callbacks.ntt *ntt * @privatentt * @member
{module:engine/view/writer~Writer} module:engine/view/view~View#_writerntt
*/nttthis._writer = new Writer( this.document );nntt// Add default
observers.nttthis.addObserver( MutationObserver );nttthis.addObserver(
SelectionObserver );nttthis.addObserver( FocusObserver
);nttthis.addObserver( KeyObserver );nttthis.addObserver(
FakeSelectionObserver );nttthis.addObserver( CompositionObserver );nntt//
Inject quirks handlers.nttinjectQuirksHandling( this
);nttinjectUiElementHandling( this );nntt// Use &#39;normal&#39; priority
so that rendering is performed as first when using that
priority.nttthis.on( &#39;render&#39;, () =&gt; {ntttthis._render();ntt}
);nt}nnt/**nt * Attaches DOM root element to the view element and enable
all observers on that element.nt * Also {@link
module:engine/view/renderer~Renderer#markToSync mark element} to be
synchronized with the viewnt * what means that all child nodes will be
removed and replaced with content of the view root.nt *nt * This method
also will change view element name as the same as tag name of given dom
root.nt * Name is always transformed to lower case.nt *nt * @param
{Element} domRoot DOM root element.nt * @param {String}
[name=&#39;main&#39;] Name of the root.nt */ntattachDomRoot( domRoot, name
= &#39;main&#39; ) {nttconst viewRoot = this.document.getRoot( name
);nntt// Set view root name the same as DOM root tag name.nttviewRoot._name
= domRoot.tagName.toLowerCase();nnttthis.domRoots.set( name, domRoot
);nttthis.domConverter.bindElements( domRoot, viewRoot
);nttthis._renderer.markToSync( &#39;children&#39;, viewRoot
);nttthis._renderer.domDocuments.add( domRoot.ownerDocument
);nnttviewRoot.on( &#39;change:children&#39;, ( evt, node ) =&gt;
this._renderer.markToSync( &#39;children&#39;, node ) );nttviewRoot.on(
&#39;change:attributes&#39;, ( evt, node ) =&gt; this._renderer.markToSync(
&#39;attributes&#39;, node ) );nttviewRoot.on( &#39;change:text&#39;, (
evt, node ) =&gt; this._renderer.markToSync( &#39;text&#39;, node )
);nnttfor ( const observer of this._observers.values() )
{ntttobserver.observe( domRoot, name );ntt}nt}nnt/**nt * Gets DOM root
element.nt *nt * @param {String} [name=&#39;main&#39;]  Name of the root.nt
* @returns {Element} DOM root element instance.nt */ntgetDomRoot( name =
&#39;main&#39; ) {nttreturn this.domRoots.get( name );nt}nnt/**nt * Creates
observer of the given type if not yet created, {@link
module:engine/view/observer/observer~Observer#enable enables} itnt * and
{@link module:engine/view/observer/observer~Observer#observe attaches} to
all existing and futurent * {@link domRoots DOM roots}.nt *nt * Note:
Observers are recognized by their constructor (classes). A single observer
will be instantiated and used onlynt * when registered for the first time.
This means that features and other components can register a single
observernt * multiple times without caring whether it has been already
added or not.nt *nt * @param {Function} Observer The constructor of an
observer to add.nt * Should create an instance inheriting from {@link
module:engine/view/observer/observer~Observer}.nt * @returns
{module:engine/view/observer/observer~Observer} Added observer instance.nt
*/ntaddObserver( Observer ) {nttlet observer = this._observers.get(
Observer );nnttif ( observer ) {ntttreturn observer;ntt}nnttobserver = new
Observer( this );nnttthis._observers.set( Observer, observer );nnttfor (
const [ name, domElement ] of this.domRoots ) {ntttobserver.observe(
domElement, name );ntt}nnttobserver.enable();nnttreturn
observer;nt}nnt/**nt * Returns observer of the given type or `undefined` if
such observer has not been added yet.nt *nt * @param {Function} Observer
The constructor of an observer to get.nt * @returns
{module:engine/view/observer/observer~Observer|undefined} Observer instance
or undefined.nt */ntgetObserver( Observer ) {nttreturn this._observers.get(
Observer );nt}nnt/**nt * Disables all added observers.nt
*/ntdisableObservers() {nttfor ( const observer of this._observers.values()
) {ntttobserver.disable();ntt}nt}nnt/**nt * Enables all added observers.nt
*/ntenableObservers() {nttfor ( const observer of this._observers.values()
) {ntttobserver.enable();ntt}nt}nnt/**nt * Scrolls the page viewport and
{@link domRoots} with their ancestors to reveal thent * caret, if not
already visible to the user.nt */ntscrollToTheSelection() {nttconst range =
this.document.selection.getFirstRange();nnttif ( range )
{ntttscrollViewportToShowTarget( {ntttttarget:
this.domConverter.viewRangeToDom( range ),nttttviewportOffset: 20nttt}
);ntt}nt}nnt/**nt * It will focus DOM element representing {@link
module:engine/view/editableelement~EditableElement EditableElement}nt *
that is currently having selection inside.nt */ntfocus() {nttif (
!this.document.isFocused ) {ntttconst editable =
this.document.selection.editableElement;nntttif ( editable )
{nttttthis.domConverter.focus( editable );nttttthis.render();nttt} else
{ntttt/**ntttt * Before focusing view document, selection should be placed
inside one of the view&#39;s editables.ntttt * Normally its selection will
be converted from model document (which have default selection), butntttt *
when using view document on its own, we need to manually place selection
before focusing it.ntttt *ntttt * @error view-focus-no-selectionntttt
*/nttttlog.warn( &#39;view-focus-no-selection: There is no selection in any
editable to focus.&#39; );nttt}ntt}nt}nnt/**nt * Change method is the
primary way of changing the view. You should use it to modify any node in
the view tree.nt * It makes sure that after all changes are made view is
rendered to DOM. It prevents situations when DOM is updatednt * when view
state is not yet correct. It allows to nest calls one inside another and
still perform single renderingnt * after all changes are applied.nt *nt
*ttview.change( writer =&gt; {nt *tttwriter.insert( position1,
writer.createText( &#39;foo&#39; ) );nt *nt *tttview.change( writer =&gt;
{nt *ttttwriter.insert( position2, writer.createText( &#39;bar&#39; ) );nt
*ttt} );nt *nt * tttwriter.remove( range );nt *tt} );nt *nt * Change block
is executed immediately.nt *nt * When the outermost change block is done
and rendering to DOM is over it firesnt * {@link
module:engine/view/view~View#event:render} event.nt *nt * Throws {@link
module:utils/ckeditorerror~CKEditorError CKEditorError}
`applying-view-changes-on-rendering` whennt * change block is used after
rendering to DOM has started.nt *nt * @param {Function} callback Callback
function which may modify the view.nt */ntchange( callback ) {nttif (
this._renderingInProgress || this._postFixersInProgress ) {nttt/**nttt *
Thrown when there is an attempt to make changes to the view tree when it is
in incorrect state. This maynttt * cause some unexpected behaviour and
inconsistency between the DOM and the view.nttt * This may be caused
by:nttt *   * calling {@link change} or {@link render} during rendering
process,nttt *   * calling {@link change} or {@link render} inside ofnttt *
{@link module:engine/view/document~Document#registerPostFixer post fixer
function}.nttt */ntttthrow new
CKEditorError(ntttt&#39;cannot-change-view-tree: &#39;
+ntttt&#39;Attempting to make changes to the view when it is in incorrect
state: rendering or post fixers are in progress. &#39; +ntttt&#39;This may
cause some unexpected behaviour and inconsistency between the DOM and the
view.&#39;nttt);ntt}nntt// Recursive call to view.change() method - execute
listener immediately.nttif ( this._ongoingChange ) {ntttcallback(
this._writer );nntttreturn;ntt}nntt// This lock will assure that all
recursive calls to view.change() will end up in same block - one
"render&quot;ntt// event for all nested calls.nttthis._ongoingChange =
true;nttcallback( this._writer );nttthis._ongoingChange = false;nntt//
Execute all document post fixers after the
change.nttthis._postFixersInProgress =
true;nttthis.document._callPostFixers( this._writer
);nttthis._postFixersInProgress = false;nnttthis.fire( &#39;render&#39;
);nt}nnt/**nt * Renders {@link module:engine/view/document~Document view
document} to DOM. If any view changes arent * currently in progress,
rendering will start after all {@link change change blocks} are
processed.nt *nt * Throws {@link module:utils/ckeditorerror~CKEditorError
CKEditorError} `applying-view-changes-on-rendering` whennt * trying to
re-render when rendering to DOM has already started.nt */ntrender()
{nttthis.change( () =&gt; {} );nt}nnt/**nt * Destroys this instance. Makes
sure that all observers are destroyed and listeners removed.nt
*/ntdestroy() {nttfor ( const observer of this._observers.values() )
{ntttobserver.destroy();ntt}nnttthis.stopListening();nt}nnt/**nt * Renders
all changes. In order to avoid triggering the observers (e.g. mutations)
all observers are disablednt * before rendering and re-enabled after
that.nt *nt * @privatent */nt_render() {nttthis._renderingInProgress =
true;nttthis.disableObservers();nttthis._renderer.render();nttthis.enableObservers();nttthis._renderingInProgress
= false;nt}nnt/**nt * Fired after a topmost {@link
module:engine/view/view~View#change change block} and allnt * {@link
module:engine/view/document~Document#registerPostFixer post fixers} are
executed.nt *nt * Actual rendering is performed as a first listener on
&#39;normal&#39; priority.nt *nt *ttview.on( &#39;render&#39;, () =&gt; {nt
*ttt// Rendering to the DOM is complete.nt *tt} );nt *nt * This event is
useful when you want to update interface elements after the rendering, e.g.
position of thent * balloon panel. If you wants to change view structure
usent * {@link module:engine/view/document~Document#registerPostFixer post
fixers}.nt *nt * @event module:engine/view/view~View#event:rendernt
*/n}nnmix( View, ObservableMixin );nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-engine/src/view/view.jsn// module id = nulln//
module chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module utils/tomapn */nnimport isPlainObject from
&#39;./lib/lodash/isPlainObject&#39;;nimport objectToMap from
&#39;./objecttomap&#39;;nn/**n * Transforms object or iterable to map.
Iterable needs to be in the format acceptable by the `Map` constructor.n *n
*ttmap = toMap( { &#39;foo&#39;: 1, &#39;bar&#39;: 2 } );n *ttmap = toMap(
[ [ &#39;foo&#39;, 1 ], [ &#39;bar&#39;, 2 ] ] );n *ttmap = toMap(
anotherMap );n *n * @param {Object|Iterable} data <a
href="../../../../Object.html">Object</a> or iterable to transform.n *
@returns {Map} Map created from data.n */nexport default function toMap(
data ) {ntif ( isPlainObject( data ) ) {nttreturn objectToMap( data );nt}
else {nttreturn new Map( data );nt}n}nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/tomap.jsn// module id = nulln// module
chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module engine/model/noden */nnimport toMap from
&#39;@ckeditor/ckeditor5-utils/src/tomap&#39;;nimport CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nimport compareArrays
from &#39;@ckeditor/ckeditor5-utils/src/comparearrays&#39;;nn/**n * Model
node. Most basic structure of model tree.n *n * This is an abstract class
that is a base for other classes representing different nodes in model.n *n
* *<strong>Note:</strong>* If a node is detached from the model tree, you
can manipulate it using it&#39;s API.n * However, it is **very important**
that nodes already attached to model tree should be only changed throughn *
{@link module:engine/model/writer~Writer Writer API}.n *n * Changes done by
`Node` methods, like {@link
module:engine/model/element~Element#_insertChild _insertChild} orn * {@link
module:engine/model/node~Node#_setAttribute _setAttribute}n * do not
generate {@link module:engine/model/operation/operation~Operation
operations}n * which are essential for correct editor work if you modify
nodes in {@link module:engine/model/document~Document document} root.n *n *
The flow of working on `Node` (and classes that inherits from it) is as
such:n * 1. You can create a `Node` instance, modify it using it&#39;s
API.n * 2. Add `Node` to the model using `Batch` API.n * 3. Change `Node`
that was already added to the model using `Batch` API.n *n * Similarly, you
cannot use `Batch` API on a node that has not been added to the model tree,
with the exceptionn * of {@link module:engine/model/writer~Writer#insert
inserting} that node to the model tree.n *n * Be aware that using {@link
module:engine/model/writer~Writer#remove remove from Batch API} does not
allow to use `Node` API becausen * the information about `Node` is still
kept in model document.n *n * In case of {@link
module:engine/model/element~Element element node}, adding and removing
children also counts as changing a node andn * follows same rules.n
*/nexport default class Node {nt/**nt * Creates a model node.nt *nt * This
is an abstract class, so this constructor should not be used directly.nt
*nt * @abstractnt * @param {Object} [attrs] Node&#39;s attributes. See
{@link module:utils/tomap~toMap} for a list of accepted values.nt
*/ntconstructor( attrs ) {ntt/**ntt * Parent of this node. It could be
{@link module:engine/model/element~Element}ntt * or {@link
module:engine/model/documentfragment~DocumentFragment}.ntt * Equals to
`null` if the node has no parent.ntt *ntt * @readonlyntt * @member
{module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment|null}ntt
*/nttthis.parent = null;nntt/**ntt * Attributes set on this node.ntt *ntt *
@privatentt * @member {Map} module:engine/model/node~Node#_attrsntt
*/nttthis._attrs = toMap( attrs );nt}nnt/**nt * Index of this node in
it&#39;s parent or `null` if the node has no parent.nt *nt * Accessing this
property throws an error if this node&#39;s parent element does not contain
it.nt * This means that model tree got broken.nt *nt * @readonlynt * @type
{Number|null}nt */ntget index() {nttlet pos;nnttif ( !this.parent )
{ntttreturn null;ntt}nnttif ( ( pos = this.parent.getChildIndex( this ) )
=== null ) {ntttthrow new CKEditorError(
&#39;model-node-not-found-in-parent: The node\&#39;s parent does not
contain this node.&#39; );ntt}nnttreturn pos;nt}nnt/**nt * Offset at which
this node starts in it&#39;s parent. It is equal to the sum of {@link
offsetSize offsetSize}nt * of all it&#39;s previous siblings. Equals to
`null` if node has no parent.nt *nt * Accessing this property throws an
error if this node&#39;s parent element does not contain it.nt * This means
that model tree got broken.nt *nt * @readonlynt * @type {Number|Null}nt
*/ntget startOffset() {nttlet pos;nnttif ( !this.parent ) {ntttreturn
null;ntt}nnttif ( ( pos = this.parent.getChildStartOffset( this ) ) ===
null ) {ntttthrow new CKEditorError( &#39;model-node-not-found-in-parent:
The node\&#39;s parent does not contain this node.&#39; );ntt}nnttreturn
pos;nt}nnt/**nt * Offset size of this node. Represents how much "offset
space&quot; is occupied by the node in it&#39;s parent.nt * It is important
for {@link module:engine/model/position~Position position}. When node has
`offsetSize` greater than `1`, positionnt * can be placed between that node
start and end. `offsetSize` greater than `1` is for nodes that represents
morent * than one entity, i.e. {@link module:engine/model/text~Text text
node}.nt *nt * @readonlynt * @type {Number}nt */ntget offsetSize()
{nttreturn 1;nt}nnt/**nt * Offset at which this node ends in it&#39;s
parent. It is equal to the sum of this node&#39;snt * {@link
module:engine/model/node~Node#startOffset start offset} and {@link
offsetSize offset size}.nt * Equals to `null` if the node has no parent.nt
*nt * @readonlynt * @type {Number|null}nt */ntget endOffset() {nttif (
!this.parent ) {ntttreturn null;ntt}nnttreturn this.startOffset +
this.offsetSize;nt}nnt/**nt * Node&#39;s next sibling or `null` if the node
is a last child of it&#39;s parent or if the node has no parent.nt *nt *
@readonlynt * @type {module:engine/model/node~Node|null}nt */ntget
nextSibling() {nttconst index = this.index;nnttreturn ( index !== null
&amp;&amp; this.parent.getChild( index + 1 ) ) || null;nt}nnt/**nt *
Node&#39;s previous sibling or `null` if the node is a first child of
it&#39;s parent or if the node has no parent.nt *nt * @readonlynt * @type
{module:engine/model/node~Node|null}nt */ntget previousSibling() {nttconst
index = this.index;nnttreturn ( index !== null &amp;&amp;
this.parent.getChild( index - 1 ) ) || null;nt}nnt/**nt * The top-most
ancestor of the node. If node has no parent it is the root itself. If the
node is a partnt * of {@link
module:engine/model/documentfragment~DocumentFragment}, it&#39;s `root` is
equal to that `DocumentFragment`.nt *nt * @readonlynt * @type
{module:engine/model/node~Node|module:engine/model/documentfragment~DocumentFragment}nt
*/ntget root() {nttlet root = this; // eslint-disable-line
consistent-thisnnttwhile ( root.parent ) {ntttroot =
root.parent;ntt}nnttreturn root;nt}nnt/**nt * {@link
module:engine/model/document~Document Document} that owns this node or
`null` if the node has no parent or is insident * a {@link
module:engine/model/documentfragment~DocumentFragment DocumentFragment}.nt
*nt * @readonlynt * @type {module:engine/model/document~Document|null}nt
*/ntget document() {ntt// This is a top element of a sub-tree.nttif (
this.root == this ) {ntttreturn null;ntt}nntt// Root may be
`DocumentFragment` which does not have document property.nttreturn
this.root.document || null;nt}nnt/**nt * Gets path to the node. The path is
an array containing starting offsets of consecutive ancestors of this
node,nt * beginning from {@link module:engine/model/node~Node#root root},
down to this node&#39;s starting offset. The path can be used tont * create
{@link module:engine/model/position~Position Position} instance.nt *nt
*ttconst abc = new Text( &#39;abc&#39; );nt *ttconst foo = new Text(
&#39;foo&#39; );nt *ttconst h1 = new Element( &#39;h1&#39;, null, new Text(
&#39;header&#39; ) );nt *ttconst p = new Element( &#39;p&#39;, null, [ abc,
foo ] );nt *ttconst div = new Element( &#39;div&#39;, null, [ h1, p ] );nt
*ttfoo.getPath(); // Returns [ 1, 3 ]. `foo` is in `p` which is in `div`.
`p` starts at offset 1, while `foo` at 3.nt *tth1.getPath(); // Returns [ 0
].nt *ttdiv.getPath(); // Returns [].nt *nt * @returns
{Array.&lt;Number&gt;} The path.nt */ntgetPath() {nttconst path = [];nttlet
node = this; // eslint-disable-line consistent-thisnnttwhile ( node.parent
) {ntttpath.unshift( node.startOffset );ntttnode =
node.parent;ntt}nnttreturn path;nt}nnt/**nt * Returns ancestors array of
this node.nt *nt * @param {Object} options Options object.nt * @param
{Boolean} [options.includeSelf=false] When set to `true` this node will be
also included in parent&#39;s array.nt * @param {Boolean}
[options.parentFirst=false] When set to `true`, array will be sorted from
node&#39;s parent to root element,nt * otherwise root element will be the
first item in the array.nt * @returns {Array} Array with ancestors.nt
*/ntgetAncestors( options = { includeSelf: false, parentFirst: false } )
{nttconst ancestors = [];nttlet parent = options.includeSelf ? this :
this.parent;nnttwhile ( parent ) {ntttancestors[ options.parentFirst ?
&#39;push&#39; : &#39;unshift&#39; ]( parent );ntttparent =
parent.parent;ntt}nnttreturn ancestors;nt}nnt/**nt * Returns a {@link
module:engine/model/element~Element} or {@link
module:engine/model/documentfragment~DocumentFragment}nt * which is a
common ancestor of both nodes.nt *nt * @param
{module:engine/model/node~Node} node The second node.nt * @param {Object}
options Options object.nt * @param {Boolean} [options.includeSelf=false]
When set to `true` both nodes will be considered "ancestors&quot; too.nt *
Which means that if e.g. node A is inside B, then their common ancestor
will be B.nt * @returns
{module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment|null}nt
*/ntgetCommonAncestor( node, options = {} ) {nttconst ancestorsA =
this.getAncestors( options );nttconst ancestorsB = node.getAncestors(
options );nnttlet i = 0;nnttwhile ( ancestorsA[ i ] == ancestorsB[ i ]
&amp;&amp; ancestorsA[ i ] ) {nttti++;ntt}nnttreturn i === 0 ? null :
ancestorsA[ i - 1 ];nt}nnt/**nt * Returns whether this node is before given
node. `false` is returned if nodes are in different trees (for example,nt *
in different {@link
module:engine/model/documentfragment~DocumentFragment}s).nt *nt * @param
{module:engine/model/node~Node} node Node to compare with.nt * @returns
{Boolean}nt */ntisBefore( node ) {ntt// Given node is not before this node
if they are same.nttif ( this == node ) {ntttreturn false;ntt}nntt// Return
`false` if it is impossible to compare nodes.nttif ( this.root !==
node.root ) {ntttreturn false;ntt}nnttconst thisPath =
this.getPath();nttconst nodePath = node.getPath();nnttconst result =
compareArrays( thisPath, nodePath );nnttswitch ( result ) {ntttcase
&#39;prefix&#39;:nttttreturn true;nntttcase &#39;extension&#39;:nttttreturn
false;nntttdefault:nttttreturn thisPath[ result ] &lt; nodePath[ result
];ntt}nt}nnt/**nt * Returns whether this node is after given node. `false`
is returned if nodes are in different trees (for example,nt * in different
{@link module:engine/model/documentfragment~DocumentFragment}s).nt *nt *
@param {module:engine/model/node~Node} node Node to compare with.nt *
@returns {Boolean}nt */ntisAfter( node ) {ntt// Given node is not before
this node if they are same.nttif ( this == node ) {ntttreturn
false;ntt}nntt// Return `false` if it is impossible to compare nodes.nttif
( this.root !== node.root ) {ntttreturn false;ntt}nntt// In other cases,
just check if the `node` is before, and return the opposite.nttreturn
!this.isBefore( node );nt}nnt/**nt * Checks if the node has an attribute
with given key.nt *nt * @param {String} key Key of attribute to check.nt *
@returns {Boolean} `true` if attribute with given key is set on node,
`false` otherwise.nt */nthasAttribute( key ) {nttreturn this._attrs.has(
key );nt}nnt/**nt * Gets an attribute value for given key or `undefined` if
that attribute is not set on node.nt *nt * @param {String} key Key of
attribute to look for.nt * @returns {*} Attribute value or `undefined`.nt
*/ntgetAttribute( key ) {nttreturn this._attrs.get( key );nt}nnt/**nt *
Returns iterator that iterates over this node&#39;s attributes.nt *nt *
Attributes are returned as arrays containing two items. First one is
attribute key and second is attribute value.nt * This format is accepted by
native `Map` object and also can be passed in `Node` constructor.nt *nt *
@returns {Iterable.&lt;*&gt;}nt */ntgetAttributes() {nttreturn
this._attrs.entries();nt}nnt/**nt * Returns iterator that iterates over
this node&#39;s attribute keys.nt *nt * @returns
{Iterable.&lt;String&gt;}nt */ntgetAttributeKeys() {nttreturn
this._attrs.keys();nt}nnt/**nt * Converts `Node` to plain object and
returns it.nt *nt * @returns {Object} `Node` converted to plain object.nt
*/nttoJSON() {nttconst json = {};nnttif ( this._attrs.size )
{ntttjson.attributes = [ …this._attrs ];ntt}nnttreturn json;nt}nnt/**nt *
Creates a copy of this node, that is a node with exactly same attributes,
and returns it.nt *nt * @protectednt * @returns
{module:engine/model/node~Node} Node with same attributes as this node.nt
*/nt_clone() {nttreturn new Node( this._attrs );nt}nnt/**nt * Removes this
node from it&#39;s parent.nt *nt * @see
module:engine/model/writer~Writer#removent * @protectednt */nt_remove()
{nttthis.parent._removeChildren( this.index );nt}nnt/**nt * Sets attribute
on the node. If attribute with the same key already is set, it&#39;s value
is overwritten.nt *nt * @see
module:engine/model/writer~Writer#setAttributent * @protectednt * @param
{String} key Key of attribute to set.nt * @param {*} value Attribute
value.nt */nt_setAttribute( key, value ) {nttthis._attrs.set( key, value
);nt}nnt/**nt * Removes all attributes from the node and sets given
attributes.nt *nt * @see module:engine/model/writer~Writer#setAttributesnt
* @protectednt * @param {Object} [attrs] Attributes to set. See {@link
module:utils/tomap~toMap} for a list of accepted values.nt
*/nt_setAttributesTo( attrs ) {nttthis._attrs = toMap( attrs );nt}nnt/**nt
* Removes an attribute with given key from the node.nt *nt * @see
module:engine/model/writer~Writer#removeAttributent * @protectednt * @param
{String} key Key of attribute to remove.nt * @returns {Boolean} `true` if
the attribute was set on the element, `false` otherwise.nt
*/nt_removeAttribute( key ) {nttreturn this._attrs.delete( key
);nt}nnt/**nt * Removes all attributes from the node.nt *nt * @see
module:engine/model/writer~Writer#clearAttributesnt * @protectednt
*/nt_clearAttributes() {nttthis._attrs.clear();nt}nnt/**nt * Checks whether
given model tree object is of given type.nt *nt * This method is useful
when processing model tree objects that are of unknown type. For example, a
functionnt * may return {@link
module:engine/model/documentfragment~DocumentFragment} or {@link
module:engine/model/node~Node}nt * that can be either text node or element.
This method can be used to check what kind of object is returned.nt *nt
*ttobj.is( &#39;node&#39; ); // true for any node, false for document
fragment and text fragmentnt *ttobj.is( &#39;documentFragment&#39; ); //
true for document fragment, false for any nodent *ttobj.is(
&#39;element&#39; ); // true for any element, false for text node or
document fragmentnt *ttobj.is( &#39;element&#39;, &#39;paragraph&#39; ); //
true only for element which name is &#39;paragraph&#39;nt *ttobj.is(
&#39;paragraph&#39; ); // shortcut for obj.is( &#39;element&#39;,
&#39;paragraph&#39; )nt *ttobj.is( &#39;text&#39; ); // true for text node,
false for element and document fragmentnt *ttobj.is( &#39;textProxy&#39; );
// true for text proxy objectnt *nt * @method isnt * @param
{&#39;element&#39;|&#39;rootElement&#39;|&#39;text&#39;|&#39;textProxy&#39;|&#39;documentFragment&#39;}
typent * @returns {Boolean}nt */ntis( type ) {nttreturn type ==
&#39;node&#39;;nt}n}nn/**n * The node&#39;s parent does not contain this
node.n *n * This error may be thrown from corrupted trees.n *n * @error
model-node-not-found-in-parentn */nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-engine/src/model/node.jsn// module id = nulln//
module chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module engine/model/elementn */nnimport Node from
&#39;./node&#39;;nimport NodeList from &#39;./nodelist&#39;;nimport Text
from &#39;./text&#39;;nimport TextProxy from &#39;./textproxy&#39;;nimport
isIterable from &#39;@ckeditor/ckeditor5-utils/src/isiterable&#39;;nn/**n *
Model element. Type of {@link module:engine/model/node~Node node} that has
a {@link module:engine/model/element~Element#name name} andn * {@link
module:engine/model/element~Element#getChildren child nodes}.n *n *
*<strong>Important</strong>*: see {@link module:engine/model/node~Node} to
read about restrictions using `Element` and `Node` API.n *n * @extends
{module:engine/model/node~Node}n */nexport default class Element extends
Node {nt/**nt * Creates a model element.nt *nt * *<strong>Note:</strong>*
Constructor of this class shouldn&#39;t be used directly in the code.nt *
Use the {@link module:engine/model/writer~Writer#createElement} method
instead.nt *nt * @protectednt * @param {String} name Element&#39;s name.nt
* @param {Object} [attrs] Element&#39;s attributes. See {@link
module:utils/tomap~toMap} for a list of accepted values.nt * @param
{module:engine/model/node~Node|Iterable.&lt;module:engine/model/node~Node&gt;}
[children]nt * One or more nodes to be inserted as children of created
element.nt */ntconstructor( name, attrs, children ) {nttsuper( attrs
);nntt/**ntt * Element name.ntt *ntt * @readonlyntt * @member {String}
module:engine/model/element~Element#namentt */nttthis.name =
name;nntt/**ntt * List of children nodes.ntt *ntt * @privatentt * @member
{module:engine/model/nodelist~NodeList}
module:engine/model/element~Element#_childrenntt */nttthis._children = new
NodeList();nnttif ( children ) {ntttthis._insertChild( 0, children
);ntt}nt}nnt/**nt * Number of this element&#39;s children.nt *nt *
@readonlynt * @type {Number}nt */ntget childCount() {nttreturn
this._children.length;nt}nnt/**nt * Sum of
{module:engine/model/node~Node#offsetSize offset sizes} of all of this
element&#39;s children.nt *nt * @readonlynt * @type {Number}nt */ntget
maxOffset() {nttreturn this._children.maxOffset;nt}nnt/**nt * Is `true` if
there are no nodes inside this element, `false` otherwise.nt *nt *
@readonlynt * @type {Boolean}nt */ntget isEmpty() {nttreturn
this.childCount === 0;nt}nnt/**nt * Checks whether given model tree object
is of given type.nt *nt *ttobj.name; // &#39;listItem&#39;nt *ttobj
instanceof Element; // truent *nt *ttobj.is( &#39;element&#39; ); // truent
*ttobj.is( &#39;listItem&#39; ); // truent *ttobj.is( &#39;element&#39;,
&#39;listItem&#39; ); // truent *ttobj.is( &#39;text&#39; ); // falsent
*ttobj.is( &#39;element&#39;, &#39;image&#39; ); // falsent *nt * Read more
in {@link module:engine/model/node~Node#is}.nt *nt * @param {String} type
Type to check when `name` parameter is present.nt * Otherwise, it acts like
the `name` parameter.nt * @param {String} [name] Element name.nt * @returns
{Boolean}nt */ntis( type, name = null ) {nttif ( !name ) {ntttreturn type
== &#39;element&#39; || type == this.name || super.is( type );ntt} else
{ntttreturn type == &#39;element&#39; &amp;&amp; name ==
this.name;ntt}nt}nnt/**nt * Gets the child at the given index.nt *nt *
@param {Number} index Index of child.nt * @returns
{module:engine/model/node~Node} Child node.nt */ntgetChild( index )
{nttreturn this._children.getNode( index );nt}nnt/**nt * Returns an
iterator that iterates over all of this element&#39;s children.nt *nt *
@returns {Iterable.&lt;module:engine/model/node~Node&gt;}nt
*/ntgetChildren() {nttreturn this._children[ Symbol.iterator
]();nt}nnt/**nt * Returns an index of the given child node. Returns `null`
if given node is not a child of this element.nt *nt * @param
{module:engine/model/node~Node} node Child node to look for.nt * @returns
{Number} Child node&#39;s index in this element.nt */ntgetChildIndex( node
) {nttreturn this._children.getNodeIndex( node );nt}nnt/**nt * Returns the
starting offset of given child. Starting offset is equal to the sum ofnt *
{module:engine/model/node~Node#offsetSize offset sizes} of all node&#39;s
siblings that are before it. Returns `null` ifnt * given node is not a
child of this element.nt *nt * @param {module:engine/model/node~Node} node
Child node to look for.nt * @returns {Number} Child node&#39;s starting
offset.nt */ntgetChildStartOffset( node ) {nttreturn
this._children.getNodeStartOffset( node );nt}nnt/**nt * Returns index of a
node that occupies given offset. If given offset is too low, returns `0`.
If given offset isnt * too high, returns {@link
module:engine/model/element~Element#getChildIndex index after last
child}.nt *nt *ttconst textNode = new Text( &#39;foo&#39; );nt *ttconst
pElement = new Element( &#39;p&#39; );nt *ttconst divElement = new Element(
[ textNode, pElement ] );nt *ttdivElement.offsetToIndex( -1 ); // Returns
0, because offset is too low.nt *ttdivElement.offsetToIndex( 0 ); //
Returns 0, because offset 0 is taken by `textNode` which is at index 0.nt
*ttdivElement.offsetToIndex( 1 ); // Returns 0, because `textNode` has
`offsetSize` equal to 3, so it occupies offset 1 too.nt
*ttdivElement.offsetToIndex( 2 ); // Returns 0.nt
*ttdivElement.offsetToIndex( 3 ); // Returns 1.nt
*ttdivElement.offsetToIndex( 4 ); // Returns 2. There are no nodes at
offset 4, so last available index is returned.nt *nt * @param {Number}
offset Offset to look for.nt * @returns {Number}nt */ntoffsetToIndex(
offset ) {nttreturn this._children.offsetToIndex( offset );nt}nnt/**nt *
Returns a descendant node by its path relative to this element.nt *nt *tt//
&lt;this&gt;a<strong>c</strong>&lt;/this&gt;nt *ttthis.getNodeByPath( [ 0 ]
);     // -&gt; "a&quot;nt *ttthis.getNodeByPath( [ 1 ] );     // -&gt;
<strong>nt *ttthis.getNodeByPath( [ 1, 0 ] );  // -&gt; "c&quot;nt *nt *
@param {Array.&lt;Number&gt;} relativePath Path of the node to find,
relative to this element.nt * @returns {module:engine/model/node~Node}nt
*/ntgetNodeByPath( relativePath ) {nttlet node = this; //
eslint-disable-line consistent-thisnnttfor ( const index of relativePath )
{ntttnode = node.getChild( node.offsetToIndex( index ) );ntt}nnttreturn
node;nt}nnt/**nt * Converts `Element` instance to plain object and returns
it. Takes care of converting all of this element&#39;s children.nt *nt *
@returns {Object} `Element` instance converted to plain object.nt
*/nttoJSON() {nttconst json = super.toJSON();nnttjson.name =
this.name;nnttif ( this._children.length &gt; 0 ) {ntttjson.children =
[];nntttfor ( const node of this._children ) {nttttjson.children.push(
node.toJSON() );nttt}ntt}nnttreturn json;nt}nnt/**nt * Creates a copy of
this element and returns it. Created element has the same name and
attributes as the original element.nt * If clone is deep, the original
element&#39;s children are also cloned. If not, then empty element is
removed.nt *nt * @protectednt * @param {Boolean} [deep=false] If set to
`true` clones element and all its children recursively. When set to
`false`,nt * element will be cloned without any child.nt */nt_clone( deep =
false ) {nttconst children = deep ? Array.from( this._children ).map( node
=&gt; node._clone( true ) ) : null;nnttreturn new Element( this.name,
this.getAttributes(), children );nt}nnt/**nt * {@link
module:engine/model/element~Element#_insertChild Inserts} one or more nodes
at the end of this element.nt *nt * @see
module:engine/model/writer~Writer#appendnt * @protectednt * @param
{module:engine/model/item~Item|Iterable.&lt;module:engine/model/item~Item&gt;}
nodes Nodes to be inserted.nt */nt_appendChild( nodes )
{nttthis._insertChild( this.childCount, nodes );nt}nnt/**nt * Inserts one
or more nodes at the given index and sets {@link
module:engine/model/node~Node#parent parent} of these nodesnt * to this
element.nt *nt * @see module:engine/model/writer~Writer#insertnt *
@protectednt * @param {Number} index Index at which nodes should be
inserted.nt * @param
{module:engine/model/item~Item|Iterable.&lt;module:engine/model/item~Item&gt;}
items Items to be inserted.nt */nt_insertChild( index, items ) {nttconst
nodes = normalize( items );nnttfor ( const node of nodes ) {nttt// If node
that is being added to this element is already inside another element,
first remove it from the old parent.ntttif ( node.parent !== null )
{nttttnode._remove();nttt}nntttnode.parent =
this;ntt}nnttthis._children._insertNodes( index, nodes );nt}nnt/**nt *
Removes one or more nodes starting at the given index and setsnt * {@link
module:engine/model/node~Node#parent parent} of these nodes to `null`.nt
*nt * @see module:engine/model/writer~Writer#removent * @protectednt *
@param {Number} index Index of the first node to remove.nt * @param
{Number} [howMany=1] Number of nodes to remove.nt * @returns
{Array.&lt;module:engine/model/node~Node&gt;} Array containing removed
nodes.nt */nt_removeChildren( index, howMany = 1 ) {nttconst nodes =
this._children._removeNodes( index, howMany );nnttfor ( const node of nodes
) {ntttnode.parent = null;ntt}nnttreturn nodes;nt}nnt/**nt * Creates an
`Element` instance from given plain object (i.e. parsed JSON string).nt *
Converts `Element` children to proper nodes.nt *nt * @param {Object} json
Plain object to be converted to `Element`.nt * @returns
{module:engine/model/element~Element} `Element` instance created using
given plain object.nt */ntstatic fromJSON( json ) {nttlet children =
null;nnttif ( json.children ) {ntttchildren = [];nntttfor ( const child of
json.children ) {nttttif ( child.name ) {nttttt// If child has name
property, it is an Element.ntttttchildren.push( Element.fromJSON( child )
);ntttt} else {nttttt// Otherwise, it is a Text node.ntttttchildren.push(
Text.fromJSON( child ) );ntttt}nttt}ntt}nnttreturn new Element( json.name,
json.attributes, children );nt}n}nn// Converts strings to Text and
non-iterables to arrays.n//n// @param
{String|module:engine/model/item~Item|Iterable.&lt;String|module:engine/model/item~Item&gt;}n//
@return {Iterable.&lt;module:engine/model/node~Node&gt;}nfunction
normalize( nodes ) {nt// Separate condition because string is iterable.ntif
( typeof nodes == &#39;string&#39; ) {nttreturn [ new Text( nodes )
];nt}nntif ( !isIterable( nodes ) ) {nttnodes = [ nodes ];nt}nnt//
Array.from to enable .map() on non-arrays.ntreturn Array.from( nodes
)ntt.map( node =&gt; {ntttif ( typeof node == &#39;string&#39; )
{nttttreturn new Text( node );nttt}nntttif ( node instanceof TextProxy )
{nttttreturn new Text( node.data, node.getAttributes() );nttt}nntttreturn
node;ntt} );n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/element.jsn// module id = nulln// module
chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module engine/model/treewalkern */nnimport Text from
&#39;./text&#39;;nimport TextProxy from &#39;./textproxy&#39;;nimport
Element from &#39;./element&#39;;nimport Position from
&#39;./position&#39;;nimport CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nn/**n * Position
iterator class. It allows to iterate forward and backward over the
document.n */nexport default class TreeWalker {nt/**nt * Creates a range
iterator. All parameters are optional, but you have to specify either
`boundaries` or `startPosition`.nt *nt * @constructornt * @param {Object}
[options={}] <a href="../../../../Object.html">Object</a> with
configuration.nt * @param {&#39;forward&#39;|&#39;backward&#39;}
[options.direction=&#39;forward&#39;] Walking direction.nt * @param
{module:engine/model/range~Range} [options.boundaries=null] Range to define
boundaries of the iterator.nt * @param
{module:engine/model/position~Position} [options.startPosition] Starting
position.nt * @param {Boolean} [options.singleCharacters=false] Flag
indicating whether all consecutive characters with the same attributesnt *
should be returned one by one as multiple {@link
module:engine/model/textproxy~TextProxy} (`true`) objects or as onent *
{@link module:engine/model/textproxy~TextProxy} (`false`).nt * @param
{Boolean} [options.shallow=false] Flag indicating whether iterator should
enter elements or not. If thent * iterator is shallow child nodes of any
iterated node will not be returned along with `elementEnd` tag.nt * @param
{Boolean} [options.ignoreElementEnd=false] Flag indicating whether iterator
should ignore `elementEnd`nt * tags. If the option is true walker will not
return a parent node of start position. If this option is `true`nt * each
{@link module:engine/model/element~Element} will be returned once, while if
the option is `false` they might be returnednt * twice: for
`&#39;elementStart&#39;` and `&#39;elementEnd&#39;`.nt */ntconstructor(
options = {} ) {nttif ( !options.boundaries &amp;&amp;
!options.startPosition ) {nttt/**nttt * Neither boundaries nor starting
position of a `TreeWalker` have been defined.nttt *nttt * @error
model-tree-walker-no-start-positionnttt */ntttthrow new CKEditorError(
&#39;model-tree-walker-no-start-position: Neither boundaries nor starting
position have been defined.&#39; );ntt}nnttconst direction =
options.direction || &#39;forward&#39;;nnttif ( direction !=
&#39;forward&#39; &amp;&amp; direction != &#39;backward&#39; ) {ntttthrow
new CKEditorError(ntttt&#39;model-tree-walker-unknown-direction: Only
`backward` and `forward` direction allowed.&#39;,ntttt{ direction
}nttt);ntt}nntt/**ntt * Walking direction. Defaults `&#39;forward&#39;`.ntt
*ntt * @readonlyntt * @member {&#39;backward&#39;|&#39;forward&#39;}
module:engine/model/treewalker~TreeWalker#directionntt */nttthis.direction
= direction;nntt/**ntt * Iterator boundaries.ntt *ntt * When the iterator
is walking `&#39;forward&#39;` on the end of boundary or is walking
`&#39;backward&#39;`ntt * on the start of boundary, then `{ done: true }`
is returned.ntt *ntt * If boundaries are not defined they are set before
first and after last child of the root node.ntt *ntt * @readonlyntt *
@member {module:engine/model/range~Range}
module:engine/model/treewalker~TreeWalker#boundariesntt
*/nttthis.boundaries = options.boundaries || null;nntt/**ntt * Iterator
position. This is always static position, even if the initial position was
antt * {@link module:engine/model/liveposition~LivePosition live position}.
If start position is not defined then position dependsntt * on {@link
direction}. If direction is `&#39;forward&#39;` position starts form the
beginning, when directionntt * is `&#39;backward&#39;` position starts from
the end.ntt *ntt * @readonlyntt * @member
{module:engine/model/position~Position}
module:engine/model/treewalker~TreeWalker#positionntt */nttif (
options.startPosition ) {ntttthis.position = Position.createFromPosition(
options.startPosition );ntt} else {ntttthis.position =
Position.createFromPosition( this.boundaries[ this.direction ==
&#39;backward&#39; ? &#39;end&#39; : &#39;start&#39; ] );ntt}nntt/**ntt *
Flag indicating whether all consecutive characters with the same attributes
should bentt * returned as one {@link
module:engine/model/textproxy~TextProxy} (`true`) or one by one
(`false`).ntt *ntt * @readonlyntt * @member {Boolean}
module:engine/model/treewalker~TreeWalker#singleCharactersntt
*/nttthis.singleCharacters = !!options.singleCharacters;nntt/**ntt * Flag
indicating whether iterator should enter elements or not. If the iterator
is shallow child nodes of anyntt * iterated node will not be returned along
with `elementEnd` tag.ntt *ntt * @readonlyntt * @member {Boolean}
module:engine/model/treewalker~TreeWalker#shallowntt */nttthis.shallow =
!!options.shallow;nntt/**ntt * Flag indicating whether iterator should
ignore `elementEnd` tags. If the option is true walker will notntt * return
a parent node of the start position. If this option is `true` each {@link
module:engine/model/element~Element} willntt * be returned once, while if
the option is `false` they might be returned twice:ntt * for
`&#39;elementStart&#39;` and `&#39;elementEnd&#39;`.ntt *ntt * @readonlyntt
* @member {Boolean}
module:engine/model/treewalker~TreeWalker#ignoreElementEndntt
*/nttthis.ignoreElementEnd = !!options.ignoreElementEnd;nntt/**ntt * Start
boundary cached for optimization purposes.ntt *ntt * @privatentt * @member
{module:engine/model/element~Element}
module:engine/model/treewalker~TreeWalker#_boundaryStartParentntt
*/nttthis._boundaryStartParent = this.boundaries ?
this.boundaries.start.parent : null;nntt/**ntt * End boundary cached for
optimization purposes.ntt *ntt * @privatentt * @member
{module:engine/model/element~Element}
module:engine/model/treewalker~TreeWalker#_boundaryEndParentntt
*/nttthis._boundaryEndParent = this.boundaries ? this.boundaries.end.parent
: null;nntt/**ntt * Parent of the most recently visited node. Cached for
optimization purposes.ntt *ntt * @privatentt * @member
{module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment}ntt
* module:engine/model/treewalker~TreeWalker#_visitedParentntt
*/nttthis._visitedParent = this.position.parent;nt}nnt/**nt * Iterable
interface.nt *nt * @returns
{Iterable.&lt;module:engine/model/treewalker~TreeWalkerValue&gt;}nt */nt[
Symbol.iterator ]() {nttreturn this;nt}nnt/**nt * Moves {@link position} in
the {@link direction} skipping values as long as the callback function
returns `true`.nt *nt * For example:nt *nt * ttwalker.skip( value =&gt;
value.type == &#39;text&#39; ); // &lt;paragraph&gt;[]foo&lt;/paragraph&gt;
-&gt; &lt;paragraph&gt;foo[]&lt;/paragraph&gt;nt * ttwalker.skip( () =&gt;
true ); // Move the position to the end:
&lt;paragraph&gt;[]foo&lt;/paragraph&gt; -&gt;
&lt;paragraph&gt;foo&lt;/paragraph&gt;[]nt * ttwalker.skip( () =&gt; false
); // Do not move the position.nt *nt * @param {Function} skip Callback
function. Gets {@link module:engine/model/treewalker~TreeWalkerValue} and
shouldnt * return `true` if the value should be skipped or `false` if
not.nt */ntskip( skip ) {nttlet done, value, prevPosition,
prevVisitedParent;nnttdo {ntttprevPosition =
this.position;ntttprevVisitedParent = this._visitedParent;nnttt( { done,
value } = this.next() );ntt} while ( !done &amp;&amp; skip( value )
);nnttif ( !done ) {ntttthis.position =
prevPosition;ntttthis._visitedParent = prevVisitedParent;ntt}nt}nnt/**nt *
Gets the next tree walker&#39;s value.nt *nt * @returns
{module:engine/model/treewalker~TreeWalkerValue} Next tree walker&#39;s
value.nt */ntnext() {nttif ( this.direction == &#39;forward&#39; )
{ntttreturn this._next();ntt} else {ntttreturn
this._previous();ntt}nt}nnt/**nt * Makes a step forward in model. Moves the
{@link position} to the next position and returns the encountered value.nt
*nt * @privatent * @returns {Object}nt * @returns {Boolean} return.done
True if iterator is done.nt * @returns
{module:engine/model/treewalker~TreeWalkerValue} return.value Information
about taken step.nt */nt_next() {nttconst previousPosition =
this.position;nttconst position = Position.createFromPosition(
this.position );nttconst parent = this._visitedParent;nntt// We are at the
end of the root.nttif ( parent.parent === null &amp;&amp; position.offset
=== parent.maxOffset ) {ntttreturn { done: true };ntt}nntt// We reached the
walker boundary.nttif ( parent === this._boundaryEndParent &amp;&amp;
position.offset == this.boundaries.end.offset ) {ntttreturn { done: true
};ntt}nnttconst node = position.textNode ? position.textNode :
position.nodeAfter;nnttif ( node instanceof Element ) {ntttif (
!this.shallow ) {ntttt// Manual operations on path internals for
optimization purposes. Here and in the rest of the
method.nttttposition.path.push( 0 );nttttthis._visitedParent = node;nttt}
else {nttttposition.offset++;nttt}nntttthis.position = position;nntttreturn
formatReturnValue( &#39;elementStart&#39;, node, previousPosition,
position, 1 );ntt} else if ( node instanceof Text ) {ntttlet
charactersCount;nntttif ( this.singleCharacters ) {nttttcharactersCount =
1;nttt} else {nttttlet offset = node.endOffset;nnttttif (
this._boundaryEndParent == parent &amp;&amp; this.boundaries.end.offset
&lt; offset ) {ntttttoffset =
this.boundaries.end.offset;ntttt}nnttttcharactersCount = offset -
position.offset;nttt}nntttconst offsetInTextNode = position.offset -
node.startOffset;ntttconst item = new TextProxy( node, offsetInTextNode,
charactersCount );nntttposition.offset += charactersCount;ntttthis.position
= position;nntttreturn formatReturnValue( &#39;text&#39;, item,
previousPosition, position, charactersCount );ntt} else {nttt// `node` is
not set, we reached the end of current
`parent`.ntttposition.path.pop();ntttposition.offset++;ntttthis.position =
position;ntttthis._visitedParent = parent.parent;nntttif (
this.ignoreElementEnd ) {nttttreturn this._next();nttt} else {nttttreturn
formatReturnValue( &#39;elementEnd&#39;, parent, previousPosition, position
);nttt}ntt}nt}nnt/**nt * Makes a step backward in model. Moves the {@link
position} to the previous position and returns the encountered value.nt *nt
* @privatent * @returns {Object}nt * @returns {Boolean} return.done True if
iterator is done.nt * @returns
{module:engine/model/treewalker~TreeWalkerValue} return.value Information
about taken step.nt */nt_previous() {nttconst previousPosition =
this.position;nttconst position = Position.createFromPosition(
this.position );nttconst parent = this._visitedParent;nntt// We are at the
beginning of the root.nttif ( parent.parent === null &amp;&amp;
position.offset === 0 ) {ntttreturn { done: true };ntt}nntt// We reached
the walker boundary.nttif ( parent == this._boundaryStartParent &amp;&amp;
position.offset == this.boundaries.start.offset ) {ntttreturn { done: true
};ntt}nntt// Get node just before current positionnttconst node =
position.textNode ? position.textNode : position.nodeBefore;nnttif ( node
instanceof Element ) {ntttposition.offset–;nntttif ( !this.shallow )
{nttttposition.path.push( node.maxOffset );nttttthis.position =
position;nttttthis._visitedParent = node;nnttttif ( this.ignoreElementEnd )
{ntttttreturn this._previous();ntttt} else {ntttttreturn formatReturnValue(
&#39;elementEnd&#39;, node, previousPosition, position );ntttt}nttt} else
{nttttthis.position = position;nnttttreturn formatReturnValue(
&#39;elementStart&#39;, node, previousPosition, position, 1 );nttt}ntt}
else if ( node instanceof Text ) {ntttlet charactersCount;nntttif (
this.singleCharacters ) {nttttcharactersCount = 1;nttt} else {nttttlet
offset = node.startOffset;nnttttif ( this._boundaryStartParent == parent
&amp;&amp; this.boundaries.start.offset &gt; offset ) {ntttttoffset =
this.boundaries.start.offset;ntttt}nnttttcharactersCount = position.offset
- offset;nttt}nntttconst offsetInTextNode = position.offset -
node.startOffset;ntttconst item = new TextProxy( node, offsetInTextNode -
charactersCount, charactersCount );nntttposition.offset -=
charactersCount;ntttthis.position = position;nntttreturn formatReturnValue(
&#39;text&#39;, item, previousPosition, position, charactersCount );ntt}
else {nttt// `node` is not set, we reached the beginning of current
`parent`.ntttposition.path.pop();ntttthis.position =
position;ntttthis._visitedParent = parent.parent;nntttreturn
formatReturnValue( &#39;elementStart&#39;, parent, previousPosition,
position, 1 );ntt}nt}n}nnfunction formatReturnValue( type, item,
previousPosition, nextPosition, length ) {ntreturn {nttdone:
false,nttvalue:
{nttttype,ntttitem,ntttpreviousPosition,ntttnextPosition,ntttlengthntt}nt};n}nn/**n
* Type of the step made by {@link
module:engine/model/treewalker~TreeWalker}.n * Possible values:
`&#39;elementStart&#39;` if walker is at the beginning of a node,
`&#39;elementEnd&#39;` if walker is at the end of node,n *
`&#39;character&#39;` if walker traversed over a character, or
`&#39;text&#39;` if walker traversed over multiple characters (available
inn * character merging mode, see {@link
module:engine/model/treewalker~TreeWalker#constructor}).n *n * @typedef
{&#39;elementStart&#39;|&#39;elementEnd&#39;|&#39;character&#39;|&#39;text&#39;}
module:engine/model/treewalker~TreeWalkerValueTypen */nn/**n * <a
href="../../../../Object.html">Object</a> returned by {@link
module:engine/model/treewalker~TreeWalker} when traversing tree model.n *n
* @typedef {Object} module:engine/model/treewalker~TreeWalkerValuen *
@property {module:engine/model/treewalker~TreeWalkerValueType} typen *
@property {module:engine/model/item~Item} item Item between old and new
positions of {@link module:engine/model/treewalker~TreeWalker}.n *
@property {module:engine/model/position~Position} previousPosition Previous
position of the iterator.n * * Forward iteration: For
`&#39;elementEnd&#39;` it is the last position inside the element. For all
other types it is then * position before the item. Note that it is more
efficient to use this position then calculate the position beforen * the
node using {@link module:engine/model/position~Position.createBefore}. It
is also more efficient to get then * position after node by shifting
`previousPosition` by `length`, using {@link
module:engine/model/position~Position#getShiftedBy},n * then calculate the
position using {@link module:engine/model/position~Position.createAfter}.n
* * Backward iteration: For `&#39;elementStart&#39;` it is the first
position inside the element. For all other types it isn * the position
after item.n * @property {module:engine/model/position~Position}
nextPosition Next position of the iterator.n * * Forward iteration: For
`&#39;elementStart&#39;` it is the first position inside the element. For
all other types it isn * the position after the item.n * * Backward
iteration: For `&#39;elementEnd&#39;` it is last position inside element.
For all other types it is the positionn * before the item.n * @property
{Number} [length] Length of the item. For `&#39;elementStart&#39;` and
`&#39;character&#39;` it is 1. For `&#39;text&#39;` it isn * the length of
the text. For `&#39;elementEnd&#39;` it is undefined.n */nn/**n * Tree
walking directions.n *n * @typedef {&#39;forward&#39;|&#39;backward&#39;}
module:engine/view/treewalker~TreeWalkerDirectionn
*/nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/treewalker.jsn// module id = nulln// module
chunks = ”,“/**n * Gets the last element of `array`.n *n * @staticn *
@memberOf _n * @since 0.1.0n * @category Arrayn * @param {Array} array The
array to query.n * @returns {*} Returns the last element of `array`.n *
@examplen *n * _.last([1, 2, 3]);n * // =&gt; 3n */nfunction last(array) {n
var length = array ? array.length : 0;n  return length ? array[length - 1]
: undefined;n}nnexport default last;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/last.jsn// module id = nulln//
module chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module engine/conversion/modelconsumablen */nnimport TextProxy
from &#39;../model/textproxy&#39;;nn/**n * Manages a list of consumable
values for {@link module:engine/model/item~Item model items}.n *n *
Consumables are various aspects of the model. A model item can be broken
down into singular properties that might ben * taken into consideration
when converting that item.n *n * `ModelConsumable` is used by {@link
module:engine/conversion/downcastdispatcher~DowncastDispatcher} while
analyzing changedn * parts of {@link module:engine/model/document~Document
the document}. The added / changed / removed model items are broken downn *
into singular properties (the item itself and it&#39;s attributes). All
those parts are saved in `ModelConsumable`. Then,n * during conversion,
when given part of model item is converted (i.e. the view element has been
inserted into the view,n * but without attributes), consumable value is
removed from `ModelConsumable`.n *n * For model items, `ModelConsumable`
stores consumable values of one of following types: `insert`,
`addattribute:&lt;attributeKey&gt;`,n *
`changeattributes:&lt;attributeKey&gt;`,
`removeattributes:&lt;attributeKey&gt;`.n *n * In most cases, it is enough
to let {@link
module:engine/conversion/downcastdispatcher~DowncastDispatcher}n * gather
consumable values, so there is no need to usen * {@link
module:engine/conversion/modelconsumable~ModelConsumable#add add method}
directly.n * However, it is important to understand how consumable values
can ben * {@link
module:engine/conversion/modelconsumable~ModelConsumable#consume
consumed}.n * See {@link
module:engine/conversion/downcast-selection-converters default downcast
converters} for more information.n *n * Keep in mind, that one conversion
event may have multiple callbacks (converters) attached to it. Each of
those isn * able to convert one or more parts of the model. However, when
one of those callbacks actually convertsn * something, other should not,
because they would duplicate the results. Using `ModelConsumable` helps
avoidingn * this situation, because callbacks should only convert those
values, which were not yet consumed from `ModelConsumable`.n *n * Consuming
multiple values in a single callback:n *n *tt// Converter for custom
`image` element that might have a `caption` element inside which changesn
*tt// how the image is displayed in the view:n *tt//n *tt// Model:n *tt//n
*tt// [image]n *tt//   └─ [caption]n *tt//       └─ foon *tt//n *tt//
View:n *tt//n *tt// &lt;figure&gt;n *tt//   ├─ &lt;img /&gt;n *tt//   └─
&lt;caption&gt;n *tt//       └─ foon *ttmodelConversionDispatcher.on(
&#39;insert:image&#39;, ( evt, data, conversionApi ) =&gt; {n *ttt// First,
consume the `image` element.n *tttconversionApi.consumable.consume(
data.item, &#39;insert&#39; );n *n *ttt// Just create normal image element
for the view.n *ttt// Maybe it will be "decorated&quot; later.n *tttconst
viewImage = new ViewElement( &#39;img&#39; );n *tttconst insertPosition =
conversionApi.mapper.toViewPosition( data.range.start );n *n *ttt// Check
if the `image` element has children.n *tttif ( data.item.childCount &gt; 0
) {n *ttttconst modelCaption = data.item.getChild( 0 );n *n *tttt//
`modelCaption` insertion change is consumed from consumable values.n
*tttt// It will not be converted by other converters, but it&#39;s children
(probably some text) will be.n *tttt// Through mapping, converters for text
will know where to insert contents of `modelCaption`.n *ttttif (
conversionApi.consumable.consume( modelCaption, &#39;insert&#39; ) ) {n
*tttttconst viewCaption = new ViewElement( &#39;figcaption&#39; );n *n
*tttttconst viewImageHolder = new ViewElement( &#39;figure&#39;, null, [
viewImage, viewCaption ] );n *n *tttttconversionApi.mapper.bindElements(
modelCaption, viewCaption );n *tttttconversionApi.mapper.bindElements(
data.item, viewImageHolder );n *tttttviewWriter.insert( insertPosition,
viewImageHolder );n *tttt}n *ttt} else {n
*ttttconversionApi.mapper.bindElements( data.item, viewImage );n
*ttttviewWriter.insert( insertPosition, viewImage );n *ttt}n *n
*tttevt.stop();n *tt} );n */nexport default class ModelConsumable {nt/**nt
* Creates an empty consumables list.nt */ntconstructor() {ntt/**ntt *
Contains list of consumable values.ntt *ntt * @privatentt * @member {Map}
module:engine/conversion/modelconsumable~ModelConsumable#_consumablentt
*/nttthis._consumable = new Map();nntt/**ntt * For each {@link
module:engine/model/textproxy~TextProxy} added to `ModelConsumable`, this
registry holds parentntt * of that `TextProxy` and start and end indices of
that `TextProxy`. This allows identification of `TextProxy`ntt * instances
that points to the same part of the model but are different instances. Each
distinct `TextProxy`ntt * is given unique `Symbol` which is then registered
as consumable. This process is transparent for `ModelConsumable`ntt * API
user because whenever `TextProxy` is added, tested, consumed or reverted,
internal mechanisms ofntt * `ModelConsumable` translates `TextProxy` to
that unique `Symbol`.ntt *ntt * @privatentt * @member {Map}
module:engine/conversion/modelconsumable~ModelConsumable#_textProxyRegistryntt
*/nttthis._textProxyRegistry = new Map();nt}nnt/**nt * Adds a consumable
value to the consumables list and links it with given model item.nt *nt
*ttmodelConsumable.add( modelElement, &#39;insert&#39; ); // Add
`modelElement` insertion change to consumable values.nt
*ttmodelConsumable.add( modelElement, &#39;addAttribute:bold&#39; ); // Add
`bold` attribute insertion on `modelElement` change.nt
*ttmodelConsumable.add( modelElement, &#39;removeAttribute:bold&#39; ); //
Add `bold` attribute removal on `modelElement` change.nt
*ttmodelConsumable.add( modelSelection, &#39;selection&#39; ); // Add
`modelSelection` to consumable values.nt *ttmodelConsumable.add(
modelRange, &#39;range&#39; ); // Add `modelRange` to consumable values.nt
*nt * @param
{module:engine/model/item~Item|module:engine/model/selection~Selection|module:engine/model/range~Range}
itemnt * Model item, range or selection that has the consumable.nt * @param
{String} type Consumable type. Will be normalized to a proper form, that is
either `&lt;word&gt;` or `&lt;part&gt;:&lt;part&gt;`.nt * Second colon and
everything after will be cut. Passing event name is a safe and good
practice.nt */ntadd( item, type ) {ntttype = _normalizeConsumableType( type
);nnttif ( item instanceof TextProxy ) {ntttitem =
this._getSymbolForTextProxy( item );ntt}nnttif ( !this._consumable.has(
item ) ) {ntttthis._consumable.set( item, new Map()
);ntt}nnttthis._consumable.get( item ).set( type, true );nt}nnt/**nt *
Removes given consumable value from given model item.nt *nt
*ttmodelConsumable.consume( modelElement, &#39;insert&#39; ); // Remove
`modelElement` insertion change from consumable values.nt
*ttmodelConsumable.consume( modelElement, &#39;addAttribute:bold&#39; ); //
Remove `bold` attribute insertion on `modelElement` change.nt
*ttmodelConsumable.consume( modelElement, &#39;removeAttribute:bold&#39; );
// Remove `bold` attribute removal on `modelElement` change.nt
*ttmodelConsumable.consume( modelSelection, &#39;selection&#39; ); //
Remove `modelSelection` from consumable values.nt
*ttmodelConsumable.consume( modelRange, &#39;range&#39; ); // Remove
&#39;modelRange&#39; from consumable values.nt *nt * @param
{module:engine/model/item~Item|module:engine/model/selection~Selection|module:engine/model/range~Range}
itemnt * Model item, range or selection from which consumable will be
consumed.nt * @param {String} type Consumable type. Will be normalized to a
proper form, that is either `&lt;word&gt;` or
`&lt;part&gt;:&lt;part&gt;`.nt * Second colon and everything after will be
cut. Passing event name is a safe and good practice.nt * @returns {Boolean}
`true` if consumable value was available and was consumed, `false`
otherwise.nt */ntconsume( item, type ) {ntttype = _normalizeConsumableType(
type );nnttif ( item instanceof TextProxy ) {ntttitem =
this._getSymbolForTextProxy( item );ntt}nnttif ( this.test( item, type ) )
{ntttthis._consumable.get( item ).set( type, false );nntttreturn true;ntt}
else {ntttreturn false;ntt}nt}nnt/**nt * Tests whether there is a
consumable value of given type connected with given model item.nt *nt
*ttmodelConsumable.test( modelElement, &#39;insert&#39; ); // Check for
`modelElement` insertion change.nt *ttmodelConsumable.test( modelElement,
&#39;addAttribute:bold&#39; ); // Check for `bold` attribute insertion on
`modelElement` change.nt *ttmodelConsumable.test( modelElement,
&#39;removeAttribute:bold&#39; ); // Check for `bold` attribute removal on
`modelElement` change.nt *ttmodelConsumable.test( modelSelection,
&#39;selection&#39; ); // Check if `modelSelection` is consumable.nt
*ttmodelConsumable.test( modelRange, &#39;range&#39; ); // Check if
`modelRange` is consumable.nt *nt * @param
{module:engine/model/item~Item|module:engine/model/selection~Selection|module:engine/model/range~Range}
itemnt * Model item, range or selection to be tested.nt * @param {String}
type Consumable type. Will be normalized to a proper form, that is either
`&lt;word&gt;` or `&lt;part&gt;:&lt;part&gt;`.nt * Second colon and
everything after will be cut. Passing event name is a safe and good
practice.nt * @returns {null|Boolean} `null` if such consumable was never
added, `false` if the consumable values wasnt * already consumed or `true`
if it was added and not consumed yet.nt */nttest( item, type ) {ntttype =
_normalizeConsumableType( type );nnttif ( item instanceof TextProxy )
{ntttitem = this._getSymbolForTextProxy( item );ntt}nnttconst
itemConsumables = this._consumable.get( item );nnttif ( itemConsumables ===
undefined ) {ntttreturn null;ntt}nnttconst value = itemConsumables.get(
type );nnttif ( value === undefined ) {ntttreturn null;ntt}nnttreturn
value;nt}nnt/**nt * Reverts consuming of consumable value.nt *nt
*ttmodelConsumable.revert( modelElement, &#39;insert&#39; ); // Revert
consuming `modelElement` insertion change.nt *ttmodelConsumable.revert(
modelElement, &#39;addAttribute:bold&#39; ); // Revert consuming `bold`
attribute insert from `modelElement`.nt *ttmodelConsumable.revert(
modelElement, &#39;removeAttribute:bold&#39; ); // Revert consuming `bold`
attribute remove from `modelElement`.nt *ttmodelConsumable.revert(
modelSelection, &#39;selection&#39; ); // Revert consuming
`modelSelection`.nt *ttmodelConsumable.revert( modelRange, &#39;range&#39;
); // Revert consuming `modelRange`.nt *nt * @param
{module:engine/model/item~Item|module:engine/model/selection~Selection|module:engine/model/range~Range}
itemnt * Model item, range or selection to be reverted.nt * @param {String}
type Consumable type.nt * @returns {null|Boolean} `true` if consumable has
been reversed, `false` otherwise. `null` if the consumable hasnt * never
been added.nt */ntrevert( item, type ) {ntttype = _normalizeConsumableType(
type );nnttif ( item instanceof TextProxy ) {ntttitem =
this._getSymbolForTextProxy( item );ntt}nnttconst test = this.test( item,
type );nnttif ( test === false ) {ntttthis._consumable.get( item ).set(
type, true );nntttreturn true;ntt} else if ( test === true ) {ntttreturn
false;ntt}nnttreturn null;nt}nnt/**nt * Gets a unique symbol for passed
{@link module:engine/model/textproxy~TextProxy} instance. All `TextProxy`
instances thatnt * have same parent, same start index and same end index
will get the same symbol.nt *nt * Used internally to correctly consume
`TextProxy` instances.nt *nt * @privatent * @param
{module:engine/model/textproxy~TextProxy} textProxy `TextProxy` instance to
get a symbol for.nt * @returns {Symbol} Symbol representing all equal
instances of `TextProxy`.nt */nt_getSymbolForTextProxy( textProxy ) {nttlet
symbol = null;nnttconst startMap = this._textProxyRegistry.get(
textProxy.startOffset );nnttif ( startMap ) {ntttconst endMap =
startMap.get( textProxy.endOffset );nntttif ( endMap ) {nttttsymbol =
endMap.get( textProxy.parent );nttt}ntt}nnttif ( !symbol ) {ntttsymbol =
this._addSymbolForTextProxy( textProxy.startOffset, textProxy.endOffset,
textProxy.parent );ntt}nnttreturn symbol;nt}nnt/**nt * Adds a symbol for
given properties that characterizes a {@link
module:engine/model/textproxy~TextProxy} instance.nt *nt * Used internally
to correctly consume `TextProxy` instances.nt *nt * @privatent * @param
{Number} startIndex Text proxy start index in it&#39;s parent.nt * @param
{Number} endIndex Text proxy end index in it&#39;s parent.nt * @param
{module:engine/model/element~Element} parent Text proxy parent.nt *
@returns {Symbol} Symbol generated for given properties.nt
*/nt_addSymbolForTextProxy( start, end, parent ) {nttconst symbol = Symbol(
&#39;textProxySymbol&#39; );nttlet startMap, endMap;nnttstartMap =
this._textProxyRegistry.get( start );nnttif ( !startMap ) {ntttstartMap =
new Map();ntttthis._textProxyRegistry.set( start, startMap );ntt}nnttendMap
= startMap.get( end );nnttif ( !endMap ) {ntttendMap = new
Map();ntttstartMap.set( end, endMap );ntt}nnttendMap.set( parent, symbol
);nnttreturn symbol;nt}n}nn// Returns a normalized consumable type name
from given string. A normalized consumable type name is a string that
hasn// at most one colon, for example: `insert` or `addMarker:highlight`.
If string to normalize has more "parts&quot; (more colons),n// the other
parts are dropped, for example: `addattribute:bold:$text` -&gt;
`addattributes:bold`.n//n// @param {String} type Consumable type.n//
@returns {String} Normalized consumable type.nfunction
_normalizeConsumableType( type ) {ntconst parts = type.split( &#39;:&#39;
);nntreturn parts.length &gt; 1 ? parts[ 0 ] + &#39;:&#39; + parts[ 1 ] :
parts[ 0 ];n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/conversion/modelconsumable.jsn// module id =
nulln// module chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module engine/conversion/downcastdispatchern
*/nnimport Consumable from &#39;./modelconsumable&#39;;nimport Range from
&#39;../model/range&#39;;nimport EmitterMixin from
&#39;@ckeditor/ckeditor5-utils/src/emittermixin&#39;;nimport mix from
&#39;@ckeditor/ckeditor5-utils/src/mix&#39;;nimport extend from
&#39;@ckeditor/ckeditor5-utils/src/lib/lodash/extend&#39;;nn/**n *
`DowncastDispatcher` is a central point of downcasting (conversion from
model to view), which is a process of reacting to changesn * in the model
and firing a set of events. Callbacks listening to those events are called
converters. Thosen * converters role is to convert the model changes to
changes in view (for example, adding view nodes orn * changing attributes
on view elements).n *n * During conversion process, `DowncastDispatcher`
fires events, basing on state of the model and preparesn * data for those
events. It is important to understand that those events are connected with
changes done on model,n * for example: "node has been inserted&quot; or
"attribute has changed&quot;. This is in a contrary to upcasting (view to
model conversion),n * where we convert view state (view nodes) to a model
tree.n *n * The events are prepared basing on a diff created by {@link
module:engine/model/differ~Differ Differ}, which buffers themn * and then
passes to `DowncastDispatcher` as a diff between old model state and new
model state.n *n * Note, that because changes are converted there is a need
to have a mapping between model structure and view structure.n * To map
positions and elements during downcast (model to view conversion) use
{@link module:engine/conversion/mapper~Mapper}.n *n * `DowncastDispatcher`
fires following events for model tree changes:n *n * * {@link
module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:insert
insert}n * if a range of nodes has been inserted to the model tree,n * *
{@link
module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:remove
remove}n * if a range of nodes has been removed from the model tree,n * *
{@link
module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:attribute
attribute}n * if attribute has been added, changed or removed from a model
node.n *n * For {@link
module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:insert
insert}n * and {@link
module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:attribute
attribute},n * `DowncastDispatcher` generates {@link
module:engine/conversion/modelconsumable~ModelConsumable consumables}.n *
These are used to have a control over which changes has been already
consumed. It is useful when some convertersn * overwrite other or converts
multiple changes (for example converts insertion of an element and also
converts thatn * element&#39;s attributes during insertion).n *n *
Additionally, `DowncastDispatcher` fires events for {@link
module:engine/model/markercollection~Marker marker} changes:n *n * * {@link
module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:addMarker}
if a marker has been added,n * * {@link
module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:removeMarker}
if a marker has been removed.n *n * Note, that changing a marker is done
through removing the marker from the old range, and adding on the new
range,n * so both those events are fired.n *n * Finally,
`DowncastDispatcher` also handles firing events for {@link
module:engine/model/selection model selection}n * conversion:n *n * *
{@link
module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:selection}n
* which converts selection from model to view,n * * {@link
module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:attribute}n
* which is fired for every selection attribute,n * * {@link
module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:addMarker}n
* which is fired for every marker which contains selection.n *n * Unlike
model tree and markers, events for selection are not fired for changes but
for selection state.n *n * When providing custom listeners for
`DowncastDispatcher` remember to check whether given change has not beenn *
{@link module:engine/conversion/modelconsumable~ModelConsumable#consume
consumed} yet.n *n * When providing custom listeners for
`DowncastDispatcher` keep in mind that any callback that hadn * {@link
module:engine/conversion/modelconsumable~ModelConsumable#consume consumed}
a value from a consumable andn * converted the change should also stop the
event (for efficiency purposes).n *n * When providing custom listeners for
`DowncastDispatcher` remember to use providedn * {@link
module:engine/view/writer~Writer view writer} to apply changes to the view
document.n *n * Example of a custom converter for `DowncastDispatcher`:n *n
*tt// We will convert inserting "paragraph&quot; model element into the
model.n *ttdowncastDispatcher.on( &#39;insert:paragraph&#39;, ( evt, data,
conversionApi ) =&gt; {n *ttt// Remember to check whether the change has
not been consumed yet and consume it.n *tttif (
conversionApi.consumable.consume( data.item, &#39;insert&#39; ) ) {n
*ttttreturn;n *ttt}n *n *ttt// Translate position in model to position in
view.n *tttconst viewPosition = conversionApi.mapper.toViewPosition(
data.range.start );n *n *ttt// Create &lt;p&gt; element that will be
inserted in view at `viewPosition`.n *tttconst viewElement =
conversionApi.writer.createContainerElement( &#39;p&#39; );n *n *ttt// Bind
the newly created view element to model element so positions will map
accordingly in future.n *tttconversionApi.mapper.bindElements( data.item,
viewElement );n *n *ttt// Add the newly created view element to the view.n
*tttconversionApi.writer.insert( viewPosition, viewElement );n *n *ttt//
Remember to stop the event propagation.n *tttevt.stop();n *tt} );n
*/nexport default class DowncastDispatcher {nt/**nt * Creates a
`DowncastDispatcher` instance.nt *nt * @param {Object} [conversionApi]
Interface passed by dispatcher to the events calls.nt */ntconstructor(
conversionApi = {} ) {ntt/**ntt * Interface passed by dispatcher to the
events callbacks.ntt *ntt * @member {Object}ntt */nttthis.conversionApi =
extend( { dispatcher: this }, conversionApi );nt}nnt/**nt * Takes {@link
module:engine/model/differ~Differ model differ} object with buffered
changes and fires conversion basing on it.nt *nt * @param
{module:engine/model/differ~Differ} differ Differ object with buffered
changes.nt * @param {module:engine/view/writer~Writer} writer View writer
that should be used to modify view document.nt */ntconvertChanges( differ,
writer ) {ntt// Before the view is updated, remove markers which have
changed.nttfor ( const change of differ.getMarkersToRemove() )
{ntttthis.convertMarkerRemove( change.name, change.range, writer
);ntt}nntt// Convert changes that happened on model tree.nttfor ( const
entry of differ.getChanges() ) {ntttif ( entry.type == &#39;insert&#39; )
{nttttthis.convertInsert( Range.createFromPositionAndShift( entry.position,
entry.length ), writer );nttt} else if ( entry.type == &#39;remove&#39; )
{nttttthis.convertRemove( entry.position, entry.length, entry.name, writer
);nttt} else {ntttt// entry.type ==
&#39;attribute&#39;.nttttthis.convertAttribute( entry.range,
entry.attributeKey, entry.attributeOldValue, entry.attributeNewValue,
writer );nttt}ntt}nntt// After the view is updated, convert markers which
have changed.nttfor ( const change of differ.getMarkersToAdd() )
{ntttthis.convertMarkerAdd( change.name, change.range, writer
);ntt}nt}nnt/**nt * Starts conversion of a range insertion.nt *nt * For
each node in the range, {@link event:insert insert event is fired}. For
each attribute on each node,nt * {@link event:attribute attribute event is
fired}.nt *nt * @fires insertnt * @fires attributent * @param
{module:engine/model/range~Range} range Inserted range.nt * @param
{module:engine/view/writer~Writer} writer View writer that should be used
to modify view document.nt */ntconvertInsert( range, writer )
{nttthis.conversionApi.writer = writer;nntt// Create a list of things that
can be consumed, consisting of nodes and their
attributes.nttthis.conversionApi.consumable = this._createInsertConsumable(
range );nntt// Fire a separate insert event for each node and text fragment
contained in the range.nttfor ( const value of range ) {ntttconst item =
value.item;ntttconst itemRange = Range.createFromPositionAndShift(
value.previousPosition, value.length );ntttconst data =
{nttttitem,nttttrange: itemRangenttt};nntttthis._testAndFire(
&#39;insert&#39;, data );nnttt// Fire a separate addAttribute event for
each attribute that was set on inserted items.nttt// This is important
because most attributes converters will listen only to
add/change/removeAttribute events.nttt// If we would not add this part,
attributes on inserted nodes would not be converted.ntttfor ( const key of
item.getAttributeKeys() ) {nttttdata.attributeKey =
key;nttttdata.attributeOldValue = null;nttttdata.attributeNewValue =
item.getAttribute( key );nnttttthis._testAndFire( `attribute:${ key }`,
data );nttt}ntt}nnttthis._clearConversionApi();nt}nnt/**nt * Fires
conversion of a single node removal. Fires {@link event:remove remove
event} with provided data.nt *nt * @param
{module:engine/model/position~Position} position Position from which node
was removed.nt * @param {Number} length Offset size of removed node.nt *
@param {String} name Name of removed node.nt * @param
{module:engine/view/writer~Writer} writer View writer that should be used
to modify view document.nt */ntconvertRemove( position, length, name,
writer ) {nttthis.conversionApi.writer = writer;nnttthis.fire(
&#39;remove:&#39; + name, { position, length }, this.conversionApi
);nnttthis._clearConversionApi();nt}nnt/**nt * Starts conversion of
attribute change on given `range`.nt *nt * For each node in the given
`range`, {@link event:attribute attribute event} is fired with the passed
data.nt *nt * @fires attributent * @param {module:engine/model/range~Range}
range Changed range.nt * @param {String} key Key of the attribute that has
changed.nt * @param {*} oldValue Attribute value before the change or
`null` if the attribute has not been set before.nt * @param {*} newValue
New attribute value or `null` if the attribute has been removed.nt * @param
{module:engine/view/writer~Writer} writer View writer that should be used
to modify view document.nt */ntconvertAttribute( range, key, oldValue,
newValue, writer ) {nttthis.conversionApi.writer = writer;nntt// Create a
list with attributes to consume.nttthis.conversionApi.consumable =
this._createConsumableForRange( range, `attribute:${ key }` );nntt// Create
a separate attribute event for each node in the range.nttfor ( const value
of range ) {ntttconst item = value.item;ntttconst itemRange =
Range.createFromPositionAndShift( value.previousPosition, value.length
);ntttconst data = {nttttitem,nttttrange: itemRange,nttttattributeKey:
key,nttttattributeOldValue: oldValue,nttttattributeNewValue:
newValuenttt};nntttthis._testAndFire( `attribute:${ key }`, data
);ntt}nnttthis._clearConversionApi();nt}nnt/**nt * Starts model selection
conversion.nt *nt * Fires events for given {@link
module:engine/model/selection~Selection selection} to start selection
conversion.nt *nt * @fires selectionnt * @fires addMarkernt * @fires
attributent * @param {module:engine/model/selection~Selection} selection
Selection to convert.nt * @param
{Array.&lt;module:engine/model/markercollection~Marker&gt;} markers Array
of markers containing model markers.nt * @param
{module:engine/view/writer~Writer} writer View writer that should be used
to modify view document.nt */ntconvertSelection( selection, markers, writer
) {nttconst markersAtSelection = Array.from( markers.getMarkersAtPosition(
selection.getFirstPosition() ) );nnttthis.conversionApi.writer =
writer;nttthis.conversionApi.consumable = this._createSelectionConsumable(
selection, markersAtSelection );nnttthis.fire( &#39;selection&#39;, {
selection }, this.conversionApi );nnttif ( !selection.isCollapsed )
{ntttreturn;ntt}nnttfor ( const marker of markersAtSelection ) {ntttconst
markerRange = marker.getRange();nntttif ( !shouldMarkerChangeBeConverted(
selection.getFirstPosition(), marker, this.conversionApi.mapper ) )
{nttttcontinue;nttt}nntttconst data = {nttttitem:
selection,nttttmarkerName: marker.name,nttttmarkerRangenttt};nntttif (
this.conversionApi.consumable.test( selection, &#39;addMarker:&#39; +
marker.name ) ) {nttttthis.fire( &#39;addMarker:&#39; + marker.name, data,
this.conversionApi );nttt}ntt}nnttfor ( const key of
selection.getAttributeKeys() ) {ntttconst data = {nttttitem:
selection,nttttrange: selection.getFirstRange(),nttttattributeKey:
key,nttttattributeOldValue: null,nttttattributeNewValue:
selection.getAttribute( key )nttt};nnttt// Do not fire event if the
attribute has been consumed.ntttif ( this.conversionApi.consumable.test(
selection, &#39;attribute:&#39; + data.attributeKey ) ) {nttttthis.fire(
&#39;attribute:&#39; + data.attributeKey, data, this.conversionApi
);nttt}ntt}nnttthis._clearConversionApi();nt}nnt/**nt * Converts added
marker. Fires {@link event:addMarker addMarker} event for each itemnt * in
marker&#39;s range. If range is collapsed single event is dispatched. See
event description for more details.nt *nt * @fires addMarkernt * @param
{String} markerName Marker name.nt * @param
{module:engine/model/range~Range} markerRange Marker range.nt * @param
{module:engine/view/writer~Writer} writer View writer that should be used
to modify view document.nt */ntconvertMarkerAdd( markerName, markerRange,
writer ) {ntt// Do not convert if range is in graveyard or not in the
document (e.g. in DocumentFragment).nttif ( !markerRange.root.document ||
markerRange.root.rootName == &#39;$graveyard&#39; )
{ntttreturn;ntt}nnttthis.conversionApi.writer = writer;nntt// In
markers&#39; case, event name == consumable name.nttconst eventName =
&#39;addMarker:&#39; + markerName;nntt// When range is collapsed - fire
single event with collapsed range in consumable.nttif (
markerRange.isCollapsed ) {ntttconst consumable = new
Consumable();ntttconsumable.add( markerRange, eventName
);nntttthis.conversionApi.consumable = consumable;nntttthis.fire(
eventName, { markerName, markerRange }, this.conversionApi
);nntttreturn;ntt}nntt// Create consumable for each item in
range.nttthis.conversionApi.consumable = this._createConsumableForRange(
markerRange, eventName );nntt// Create separate event for each node in the
range.nttfor ( const item of markerRange.getItems() ) {nttt// Do not fire
event for already consumed items.ntttif (
!this.conversionApi.consumable.test( item, eventName ) )
{nttttcontinue;nttt}nntttconst data = { item, range: Range.createOn( item
), markerName, markerRange };nntttthis.fire( eventName, data,
this.conversionApi );ntt}nnttthis._clearConversionApi();nt}nnt/**nt * Fires
conversion of marker removal. Fires {@link event:removeMarker removeMarker}
event with provided data.nt *nt * @fires removeMarkernt * @param {String}
markerName Marker name.nt * @param {module:engine/model/range~Range}
markerRange Marker range.nt * @param {module:engine/view/writer~Writer}
writer View writer that should be used to modify view document.nt
*/ntconvertMarkerRemove( markerName, markerRange, writer ) {ntt// Do not
convert if range is in graveyard or not in the document (e.g. in
DocumentFragment).nttif ( !markerRange.root.document ||
markerRange.root.rootName == &#39;$graveyard&#39; )
{ntttreturn;ntt}nnttthis.conversionApi.writer = writer;nnttthis.fire(
&#39;removeMarker:&#39; + markerName, { markerName, markerRange },
this.conversionApi );nnttthis._clearConversionApi();nt}nnt/**nt * Creates
{@link module:engine/conversion/modelconsumable~ModelConsumable} with
values to consume from given range,nt * assuming that the range has just
been inserted to the model.nt *nt * @privatent * @param
{module:engine/model/range~Range} range Inserted range.nt * @returns
{module:engine/conversion/modelconsumable~ModelConsumable} Values to
consume.nt */nt_createInsertConsumable( range ) {nttconst consumable = new
Consumable();nnttfor ( const value of range ) {ntttconst item =
value.item;nntttconsumable.add( item, &#39;insert&#39; );nntttfor ( const
key of item.getAttributeKeys() ) {nttttconsumable.add( item,
&#39;attribute:&#39; + key );nttt}ntt}nnttreturn consumable;nt}nnt/**nt *
Creates {@link module:engine/conversion/modelconsumable~ModelConsumable}
with values to consume for given range.nt *nt * @privatent * @param
{module:engine/model/range~Range} range Affected range.nt * @param {String}
type Consumable type.nt * @returns
{module:engine/conversion/modelconsumable~ModelConsumable} Values to
consume.nt */nt_createConsumableForRange( range, type ) {nttconst
consumable = new Consumable();nnttfor ( const item of range.getItems() )
{ntttconsumable.add( item, type );ntt}nnttreturn consumable;nt}nnt/**nt *
Creates {@link module:engine/conversion/modelconsumable~ModelConsumable}
with selection consumable values.nt *nt * @privatent * @param
{module:engine/model/selection~Selection} selection Selection to create
consumable from.nt * @param
{Iterable.&lt;module:engine/model/markercollection~Marker&gt;} markers
Markers which contains selection.nt * @returns
{module:engine/conversion/modelconsumable~ModelConsumable} Values to
consume.nt */nt_createSelectionConsumable( selection, markers ) {nttconst
consumable = new Consumable();nnttconsumable.add( selection,
&#39;selection&#39; );nnttfor ( const marker of markers )
{ntttconsumable.add( selection, &#39;addMarker:&#39; + marker.name
);ntt}nnttfor ( const key of selection.getAttributeKeys() )
{ntttconsumable.add( selection, &#39;attribute:&#39; + key );ntt}nnttreturn
consumable;nt}nnt/**nt * Tests passed `consumable` to check whether given
event can be fired and if so, fires it.nt *nt * @privatent * @fires
insertnt * @fires attributent * @param {String} type Event type.nt * @param
{Object} data Event data.nt */nt_testAndFire( type, data ) {nttif (
!this.conversionApi.consumable.test( data.item, type ) ) {nttt// Do not
fire event if the item was consumed.ntttreturn;ntt}nnttconst name =
data.item.name || &#39;$text&#39;;nnttthis.fire( type + &#39;:&#39; + name,
data, this.conversionApi );nt}nnt/**nt * Clears conversion API object.nt
*nt * @privatent */nt_clearConversionApi() {nttdelete
this.conversionApi.writer;nttdelete
this.conversionApi.consumable;nt}nnt/**nt * Fired for inserted nodes.nt *nt
* `insert` is a namespace for a class of events. Names of actually called
events follow this pattern:nt * `insert:name`. `name` is either
`&#39;$text&#39;`, when {@link module:engine/model/text~Text a text node}
has been inserted,nt * or {@link module:engine/model/element~Element#name
name} of inserted element.nt *nt * This way listeners can either listen to
a general `insert` event or specific event (for example
`insert:paragraph`).nt *nt * @event insertnt * @param {Object} data
Additional information about the change.nt * @param
{module:engine/model/item~Item} data.item Inserted item.nt * @param
{module:engine/model/range~Range} data.range Range spanning over inserted
item.nt * @param {Object} conversionApi Conversion interface to be used by
callback, passed in `DowncastDispatcher` constructor.nt */nnt/**nt * Fired
for removed nodes.nt *nt * `remove` is a namespace for a class of events.
Names of actually called events follow this pattern:nt * `remove:name`.
`name` is either `&#39;$text&#39;`, when {@link
module:engine/model/text~Text a text node} has been removed,nt * or the
{@link module:engine/model/element~Element#name name} of removed element.nt
*nt * This way listeners can either listen to a general `remove` event or
specific event (for example `remove:paragraph`).nt *nt * @event removent *
@param {Object} data Additional information about the change.nt * @param
{module:engine/model/position~Position} data.sourcePosition Position from
where the range has been removed.nt * @param
{module:engine/model/range~Range} data.range Removed range (in {@link
module:engine/model/document~Document#graveyardnt * graveyard root}).nt *
@param {Object} conversionApi Conversion interface to be used by callback,
passed in `DowncastDispatcher` constructor.nt */nnt/**nt * Fired when
attribute has been added/changed/removed from a node. Also fired when
collapsed model selection attribute is converted.nt *nt * `attribute` is a
namespace for a class of events. Names of actually called events follow
this pattern:nt * `attribute:attributeKey:name`. `attributeKey` is the key
of added/changed/removed attribute.nt * `name` is either `&#39;$text&#39;`
if change was on {@link module:engine/model/text~Text a text node},nt * or
the {@link module:engine/model/element~Element#name name} of element which
attribute has changed.nt *nt * This way listeners can either listen to a
general `attribute:bold` event or specific event (for example
`attribute:src:image`).nt *nt * @event attributent * @param {Object} data
Additional information about the change.nt * @param
{module:engine/model/item~Item|module:engine/model/documentselection~DocumentSelection}
data.item Changed itemnt * or converted selection.nt * @param
{module:engine/model/range~Range} data.range Range spanning over changed
item or selection range.nt * @param {String} data.attributeKey Attribute
key.nt * @param {*} data.attributeOldValue Attribute value before the
change. This is `null` when selection attribute is converted.nt * @param
{*} data.attributeNewValue New attribute value.nt * @param
{module:engine/conversion/modelconsumable~ModelConsumable} consumable
Values to consume.nt * @param {Object} conversionApi Conversion interface
to be used by callback, passed in `DowncastDispatcher` constructor.nt
*/nnt/**nt * Fired for {@link module:engine/model/selection~Selection
selection} changes.nt *nt * @event selectionnt * @param
{module:engine/model/selection~Selection} selection Selection that is
converted.nt * @param
{module:engine/conversion/modelconsumable~ModelConsumable} consumable
Values to consume.nt * @param {Object} conversionApi Conversion interface
to be used by callback, passed in `DowncastDispatcher` constructor.nt
*/nnt/**nt * Fired when a new marker is added to the model. Also fired when
collapsed model selection that is inside marker is converted.nt *nt *
`addMarker` is a namespace for a class of events. Names of actually called
events follow this pattern:nt * `addMarker:markerName`. By specifying
certain marker names, you can make the events even more gradual. For
example,nt * if markers are named `foo:abc`, `foo:bar`, then it is possible
to listen to `addMarker:foo` or `addMarker:foo:abc` andnt *
`addMarker:foo:bar` events.nt *nt * If the marker range is not collapsed:nt
*nt * * the event is fired for each item in the marker range one by one,nt
* * consumables object includes each item of the marker range and the
consumable value is same as event name.nt *nt * If the marker range is
collapsed:nt *nt * * there is only one event,nt * * consumables object
includes marker range with event name.nt *nt * If selection inside a marker
is converted:nt *nt * * there is only one event,nt * * consumables object
includes selection instance with event name.nt *nt * @event addMarkernt *
@param {Object} data Additional information about the change.nt * @param
{module:engine/model/item~Item|module:engine/model/selection~Selection}
data.item Item inside the new marker ornt * the selection that is being
converted.nt * @param {module:engine/model/range~Range} [data.range] Range
spanning over converted item. Available only in marker conversion, ifnt *
the marker range was not collapsed.nt * @param
{module:engine/model/range~Range} data.markerRange Marker range.nt * @param
{String} data.markerName Marker name.nt * @param
{module:engine/conversion/modelconsumable~ModelConsumable} consumable
Values to consume.nt * @param {Object} conversionApi Conversion interface
to be used by callback, passed in `DowncastDispatcher` constructor.nt
*/nnt/**nt * Fired when marker is removed from the model.nt *nt *
`removeMarker` is a namespace for a class of events. Names of actually
called events follow this pattern:nt * `removeMarker:markerName`. By
specifying certain marker names, you can make the events even more gradual.
For example,nt * if markers are named `foo:abc`, `foo:bar`, then it is
possible to listen to `removeMarker:foo` or `removeMarker:foo:abc` andnt *
`removeMarker:foo:bar` events.nt *nt * @event removeMarkernt * @param
{Object} data Additional information about the change.nt * @param
{module:engine/model/range~Range} data.markerRange Marker range.nt * @param
{String} data.markerName Marker name.nt * @param {Object} conversionApi
Conversion interface to be used by callback, passed in `DowncastDispatcher`
constructor.nt */n}nnmix( DowncastDispatcher, EmitterMixin );nn// Helper
function, checks whether change of `marker` at `modelPosition` should be
converted. Marker changes are notn// converted if they happen inside an
element with custom conversion method.n//n// @param
{module:engine/model/position~Position} modelPositionn// @param
{module:engine/model/markercollection~Marker} markern// @param
{module:engine/conversion/mapper~Mapper} mappern// @returns
{Boolean}nfunction shouldMarkerChangeBeConverted( modelPosition, marker,
mapper ) {ntconst range = marker.getRange();ntconst ancestors = Array.from(
modelPosition.getAncestors() );ntancestors.shift(); // Remove root element.
It cannot be passed to
`model.Range#containsItem`.ntancestors.reverse();nntconst hasCustomHandling
= ancestors.some( element =&gt; {nttif ( range.containsItem( element ) )
{ntttconst viewElement = mapper.toViewElement( element );nntttreturn
!!viewElement.getCustomProperty( &#39;addHighlight&#39; );ntt}nt}
);nntreturn !hasCustomHandling;n}nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-engine/src/conversion/downcastdispatcher.jsn//
module id = nulln// module chunks = ”,“/**n * @license Copyright ©
2003-2018, CKSource - Frederico Knabben. All rights reserved.n * For
licensing, see LICENSE.md.n */nn/**n * @module engine/model/selectionn
*/nnimport Position from &#39;./position&#39;;nimport Element from
&#39;./element&#39;;nimport Node from &#39;./node&#39;;nimport Range from
&#39;./range&#39;;nimport EmitterMixin from
&#39;@ckeditor/ckeditor5-utils/src/emittermixin&#39;;nimport CKEditorError
from &#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nimport mix from
&#39;@ckeditor/ckeditor5-utils/src/mix&#39;;nimport isIterable from
&#39;@ckeditor/ckeditor5-utils/src/isiterable&#39;;nn/**n * `Selection` is
a group of {@link module:engine/model/range~Range ranges} which has a
direction specified byn * {@link
module:engine/model/selection~Selection#anchor anchor} and {@link
module:engine/model/selection~Selection#focus focus}.n * Additionally,
`Selection` may have it&#39;s own attributes.n *n * @mixes
{module:utils/emittermixin~EmitterMixin}n */nexport default class Selection
{nt/**nt * Creates new selection instance on the givennt * {@link
module:engine/model/selection~Selection selection}, {@link
module:engine/model/position~Position position},nt * {@link
module:engine/model/element~Element element}, {@link
module:engine/model/position~Position position},nt * {@link
module:engine/model/range~Range range}, an iterable of {@link
module:engine/model/range~Range ranges}nt * or creates an empty selection
if no arguments passed.nt *nt * tt// Creates empty selection without
ranges.nt *ttconst selection = new Selection();nt *nt *tt// Creates
selection at the given range.nt *ttconst range = new Range( start, end );nt
*ttconst selection = new Selection( range );nt *nt *tt// Creates selection
at the given rangesnt * ttconst ranges = [ new Range( start1, end2 ), new
Range( star2, end2 ) ];nt *ttconst selection = new Selection( ranges );nt
*nt *tt// Creates selection from the other selection.nt *tt// Note: It
doesn&#39;t copies selection attributes.nt *ttconst otherSelection = new
Selection();nt *ttconst selection = new Selection( otherSelection );nt *nt
* tt// Creates selection from the given document selection.nt *tt// Note:
It doesn&#39;t copies selection attributes.nt *ttconst documentSelection =
new DocumentSelection( doc );nt *ttconst selection = new Selection(
documentSelection );nt *nt * tt// Creates selection at the given
position.nt *ttconst position = new Position( root, path );nt *ttconst
selection = new Selection( position );nt *nt * tt// Creates selection at
the start position of the given element.nt *ttconst paragraph =
writer.createElement( &#39;paragraph&#39; );nt *ttconst selection = new
Selection( paragraph, offset );nt *nt * tt// Creates a range inside an
{@link module:engine/model/element~Element element} which starts before
thent * tt// first child of that element and ends after the last child of
that element.nt *ttconst selection = new Selection( paragraph, &#39;in&#39;
);nt *nt * tt// Creates a range on an {@link module:engine/model/item~Item
item} which starts before the item and endsnt * tt// just after the item.nt
*ttconst selection = new Selection( paragraph, &#39;on&#39; );nt *nt *
`Selection`&#39;s constructor allow passing additional options (`backward`)
as the last argument.nt *nt * tt// Creates backward selection.nt *ttconst
selection = new Selection( range, { backward: true } );nt *nt * @param
{module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection|nt
*
module:engine/model/position~Position|module:engine/model/element~Element|nt
*
Iterable.&lt;module:engine/model/range~Range&gt;|module:engine/model/range~Range|null}
selectablent * @param
{Number|&#39;before&#39;|&#39;end&#39;|&#39;after&#39;|&#39;on&#39;|&#39;in&#39;}
[placeOrOffset] Sets place or offset of the selection.nt * @param {Object}
[options]nt * @param {Boolean} [options.backward] Sets this selection
instance to be backward.nt */ntconstructor( selectable, placeOrOffset,
options ) {ntt/**ntt * Specifies whether the last added range was added as
a backward or forward range.ntt *ntt * @privatentt * @type {Boolean}ntt
*/nttthis._lastRangeBackward = false;nntt/**ntt * Stores selection
ranges.ntt *ntt * @protectedntt * @type
{Array.&lt;module:engine/model/range~Range&gt;}ntt */nttthis._ranges =
[];nntt/**ntt * List of attributes set on current selection.ntt *ntt *
@protectedntt * @type {Map.&lt;String,*&gt;}ntt */nttthis._attrs = new
Map();nnttif ( selectable ) {ntttthis.setTo( selectable, placeOrOffset,
options );ntt}nt}nnt/**nt * Selection anchor. Anchor may be described as a
position where the most recent part of the selection starts.nt * Together
with {@link focus} they define the direction of selection, which is
importantnt * when expanding/shrinking selection. Anchor is always {@link
module:engine/model/range~Range#start start} ornt * {@link
module:engine/model/range~Range#end end} position of the most recently
added range.nt *nt * Is set to `null` if there are no ranges in
selection.nt *nt * @see focusnt * @readonlynt * @type
{module:engine/model/position~Position|null}nt */ntget anchor() {nttif (
this._ranges.length &gt; 0 ) {ntttconst range = this._ranges[
this._ranges.length - 1 ];nntttreturn this._lastRangeBackward ? range.end :
range.start;ntt}nnttreturn null;nt}nnt/**nt * Selection focus. Focus is a
position where the selection ends.nt *nt * Is set to `null` if there are no
ranges in selection.nt *nt * @see anchornt * @readonlynt * @type
{module:engine/model/position~Position|null}nt */ntget focus() {nttif (
this._ranges.length &gt; 0 ) {ntttconst range = this._ranges[
this._ranges.length - 1 ];nntttreturn this._lastRangeBackward ? range.start
: range.end;ntt}nnttreturn null;nt}nnt/**nt * Returns whether the selection
is collapsed. Selection is collapsed when there is exactly one range which
isnt * collapsed.nt *nt * @readonlynt * @type {Boolean}nt */ntget
isCollapsed() {nttconst length = this._ranges.length;nnttif ( length === 1
) {ntttreturn this._ranges[ 0 ].isCollapsed;ntt} else {ntttreturn
false;ntt}nt}nnt/**nt * Returns number of ranges in selection.nt *nt *
@readonlynt * @type {Number}nt */ntget rangeCount() {nttreturn
this._ranges.length;nt}nnt/**nt * Specifies whether the {@link focus}nt *
precedes {@link anchor}.nt *nt * @readonlynt * @type {Boolean}nt */ntget
isBackward() {nttreturn !this.isCollapsed &amp;&amp;
this._lastRangeBackward;nt}nnt/**nt * Checks whether this selection is
equal to given selection. Selections are equal if they have same
directions,nt * same number of ranges and all ranges from one selection
equal to a range from other selection.nt *nt * @param
{module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection}
otherSelectionnt * Selection to compare with.nt * @returns {Boolean} `true`
if selections are equal, `false` otherwise.nt */ntisEqual( otherSelection )
{nttif ( this.rangeCount != otherSelection.rangeCount ) {ntttreturn
false;ntt} else if ( this.rangeCount === 0 ) {ntttreturn true;ntt}nnttif (
!this.anchor.isEqual( otherSelection.anchor ) || !this.focus.isEqual(
otherSelection.focus ) ) {ntttreturn false;ntt}nnttfor ( const thisRange of
this._ranges ) {ntttlet found = false;nntttfor ( const otherRange of
otherSelection._ranges ) {nttttif ( thisRange.isEqual( otherRange ) )
{ntttttfound = true;ntttttbreak;ntttt}nttt}nntttif ( !found ) {nttttreturn
false;nttt}ntt}nnttreturn true;nt}nnt/**nt * Returns an iterable that
iterates over copies of selection ranges.nt *nt * @returns
{Iterable.&lt;module:engine/model/range~Range&gt;}nt */nt* getRanges()
{nttfor ( const range of this._ranges ) {ntttyield Range.createFromRange(
range );ntt}nt}nnt/**nt * Returns a copy of the first range in the
selection.nt * First range is the one which {@link
module:engine/model/range~Range#start start} positionnt * {@link
module:engine/model/position~Position#isBefore is before} start position of
all other rangesnt * (not to confuse with the first range added to the
selection).nt *nt * Returns `null` if there are no ranges in selection.nt
*nt * @returns {module:engine/model/range~Range|null}nt */ntgetFirstRange()
{nttlet first = null;nnttfor ( const range of this._ranges ) {ntttif (
!first || range.start.isBefore( first.start ) ) {nttttfirst =
range;nttt}ntt}nnttreturn first ? Range.createFromRange( first ) :
null;nt}nnt/**nt * Returns a copy of the last range in the selection.nt *
Last range is the one which {@link module:engine/model/range~Range#end end}
positionnt * {@link module:engine/model/position~Position#isAfter is after}
end position of all other ranges (not to confuse with the range mostnt *
recently added to the selection).nt *nt * Returns `null` if there are no
ranges in selection.nt *nt * @returns
{module:engine/model/range~Range|null}nt */ntgetLastRange() {nttlet last =
null;nnttfor ( const range of this._ranges ) {ntttif ( !last ||
range.end.isAfter( last.end ) ) {nttttlast = range;nttt}ntt}nnttreturn last
? Range.createFromRange( last ) : null;nt}nnt/**nt * Returns the first
position in the selection.nt * First position is the position that {@link
module:engine/model/position~Position#isBefore is before}nt * any other
position in the selection.nt *nt * Returns `null` if there are no ranges in
selection.nt *nt * @returns {module:engine/model/position~Position|null}nt
*/ntgetFirstPosition() {nttconst first = this.getFirstRange();nnttreturn
first ? Position.createFromPosition( first.start ) : null;nt}nnt/**nt *
Returns the last position in the selection.nt * Last position is the
position that {@link module:engine/model/position~Position#isAfter is
after}nt * any other position in the selection.nt *nt * Returns `null` if
there are no ranges in selection.nt *nt * @returns
{module:engine/model/position~Position|null}nt */ntgetLastPosition()
{nttconst lastRange = this.getLastRange();nnttreturn lastRange ?
Position.createFromPosition( lastRange.end ) : null;nt}nnt/**nt * Sets this
selection&#39;s ranges and direction to the specified location based on the
givennt * {@link module:engine/model/selection~Selection selection}, {@link
module:engine/model/position~Position position},nt * {@link
module:engine/model/element~Element element}, {@link
module:engine/model/position~Position position},nt * {@link
module:engine/model/range~Range range}, an iterable of {@link
module:engine/model/range~Range ranges} or null.nt *nt * tt// Removes all
selection&#39;s ranges.nt *ttselection.setTo( null );nt *nt *tt// Sets
selection to the given range.nt *ttconst range = new Range( start, end );nt
*ttselection.setTo( range );nt *nt *tt// Sets selection to given ranges.nt
* ttconst ranges = [ new Range( start1, end2 ), new Range( star2, end2 )
];nt *ttselection.setTo( ranges );nt *nt *tt// Sets selection to other
selection.nt *tt// Note: It doesn&#39;t copies selection attributes.nt
*ttconst otherSelection = new Selection();nt *ttselection.setTo(
otherSelection );nt *nt * tt// Sets selection to the given document
selection.nt *tt// Note: It doesn&#39;t copies selection attributes.nt
*ttconst documentSelection = new DocumentSelection( doc );nt
*ttselection.setTo( documentSelection );nt *nt * tt// Sets collapsed
selection at the given position.nt *ttconst position = new Position( root,
path );nt *ttselection.setTo( position );nt *nt * tt// Sets collapsed
selection at the position of the given node and an offset.nt
*ttselection.setTo( paragraph, offset );nt *nt * Creates a range inside an
{@link module:engine/model/element~Element element} which starts before the
first child ofn t * that element and ends after the last child of that
element.nt *nt *ttselection.setTo( paragraph, &#39;in&#39; );nt *nt *
Creates a range on an {@link module:engine/model/item~Item item} which
starts before the item and ends just after the item.nt *nt
*ttselection.setTo( paragraph, &#39;on&#39; );nt *nt *
`Selection#setTo()`&#39; method allow passing additional options
(`backward`) as the last argument.nt *nt * tt// Sets backward selection.nt
*ttconst selection = new Selection( range, { backward: true } );nt *nt *
@param
{module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection|nt
* module:engine/model/position~Position|module:engine/model/node~Node|nt *
Iterable.&lt;module:engine/model/range~Range&gt;|module:engine/model/range~Range|null}
selectablent * @param
{Number|&#39;before&#39;|&#39;end&#39;|&#39;after&#39;|&#39;on&#39;|&#39;in&#39;}
[placeOrOffset] Sets place or offset of the selection.nt * @param {Object}
[options]nt * @param {Boolean} [options.backward] Sets this selection
instance to be backward.nt */ntsetTo( selectable, placeOrOffset, options )
{nttif ( selectable === null ) {ntttthis._setRanges( [] );ntt} else if (
selectable instanceof Selection ) {ntttthis._setRanges(
selectable.getRanges(), selectable.isBackward );ntt} else if ( selectable
&amp;&amp; typeof selectable.getRanges == &#39;function&#39; ) {nttt// We
assume that the selectable is a DocumentSelection.nttt// It can&#39;t be
imported here, because it would lead to circular
imports.ntttthis._setRanges( selectable.getRanges(), selectable.isBackward
);ntt} else if ( selectable instanceof Range ) {ntttthis._setRanges( [
selectable ], !!placeOrOffset &amp;&amp; !!placeOrOffset.backward );ntt}
else if ( selectable instanceof Position ) {ntttthis._setRanges( [ new
Range( selectable ) ] );ntt} else if ( selectable instanceof Node )
{ntttconst backward = !!options &amp;&amp; !!options.backward;ntttlet
range;nntttif ( placeOrOffset == &#39;in&#39; ) {nttttrange =
Range.createIn( selectable );nttt} else if ( placeOrOffset == &#39;on&#39;
) {nttttrange = Range.createOn( selectable );nttt} else if ( placeOrOffset
!== undefined ) {nttttrange = Range.createCollapsedAt( selectable,
placeOrOffset );nttt} else {ntttt/**ntttt * selection.setTo requires the
second parameter when the first parameter is a node.ntttt *ntttt * @error
model-selection-setTo-required-second-parameterntttt */nttttthrow new
CKEditorError(nttttt&#39;model-selection-setTo-required-second-parameter:
&#39; +nttttt&#39;selection.setTo requires the second parameter when the
first parameter is a node.&#39; );nttt}nntttthis._setRanges( [ range ],
backward );ntt} else if ( isIterable( selectable ) ) {nttt// We assume that
the selectable is an iterable of ranges.ntttthis._setRanges( selectable,
placeOrOffset &amp;&amp; !!placeOrOffset.backward );ntt} else {nttt/**nttt
* Cannot set selection to given place.nttt *nttt * @error
model-selection-setTo-not-selectablenttt */ntttthrow new CKEditorError(
&#39;model-selection-setTo-not-selectable: Cannot set selection to given
place.&#39; );ntt}nt}nnt/**nt * Replaces all ranges that were added to the
selection with given array of ranges. Last range of the arraynt * is
treated like the last added range and is used to set {@link
module:engine/model/selection~Selection#anchor} andnt * {@link
module:engine/model/selection~Selection#focus}. Accepts a flag describing
in which direction the selection is made.nt *nt * @protectednt * @fires
change:rangent * @param {Iterable.&lt;module:engine/model/range~Range&gt;}
newRanges Ranges to set.nt * @param {Boolean} [isLastBackward=false] Flag
describing if last added range was selected forward - from start to end
(`false`)nt * or backward - from end to start (`true`).nt */nt_setRanges(
newRanges, isLastBackward = false ) {nttnewRanges = Array.from( newRanges
);nntt// Check whether there is any range in new ranges set that is
different than all already added ranges.nttconst anyNewRange =
newRanges.some( newRange =&gt; {ntttif ( !( newRange instanceof Range ) )
{nttttthrow new CKEditorError( &#39;model-selection-added-not-range: Trying
to add an object that is not an instance of Range.&#39; );nttt}nntttreturn
this._ranges.every( oldRange =&gt; {nttttreturn !oldRange.isEqual( newRange
);nttt} );ntt} );nntt// Don&#39;t do anything if nothing changed.nttif (
newRanges.length === this._ranges.length &amp;&amp; !anyNewRange )
{ntttreturn;ntt}nnttthis._removeAllRanges();nnttfor ( const range of
newRanges ) {ntttthis._pushRange( range );ntt}nnttthis._lastRangeBackward =
!!isLastBackward;nnttthis.fire( &#39;change:range&#39;, { directChange:
true } );nt}nnt/**nt * Moves {@link
module:engine/model/selection~Selection#focus} to the specified location.nt
*nt * The location can be specified in the same form as {@link
module:engine/model/position~Position.createAt} parameters.nt *nt * @fires
change:rangent * @param
{module:engine/model/item~Item|module:engine/model/position~Position}
itemOrPositionnt * @param
{Number|&#39;end&#39;|&#39;before&#39;|&#39;after&#39;} [offset=0] Offset
or one of the flags. Used only whennt * first parameter is a {@link
module:engine/model/item~Item model item}.nt */ntsetFocus( itemOrPosition,
offset ) {nttif ( this.anchor === null ) {nttt/**nttt * Cannot set
selection focus if there are no ranges in selection.nttt *nttt * @error
model-selection-setFocus-no-rangesnttt */ntttthrow new
CKEditorError(ntttt&#39;model-selection-setFocus-no-ranges: Cannot set
selection focus if there are no ranges in
selection.&#39;nttt);ntt}nnttconst newFocus = Position.createAt(
itemOrPosition, offset );nnttif ( newFocus.compareWith( this.focus ) ==
&#39;same&#39; ) {ntttreturn;ntt}nnttconst anchor = this.anchor;nnttif (
this._ranges.length ) {ntttthis._popRange();ntt}nnttif (
newFocus.compareWith( anchor ) == &#39;before&#39; ) {ntttthis._pushRange(
new Range( newFocus, anchor ) );ntttthis._lastRangeBackward = true;ntt}
else {ntttthis._pushRange( new Range( anchor, newFocus )
);ntttthis._lastRangeBackward = false;ntt}nnttthis.fire(
&#39;change:range&#39;, { directChange: true } );nt}nnt/**nt * Gets an
attribute value for given key or `undefined` if that attribute is not set
on the selection.nt *nt * @param {String} key Key of attribute to look
for.nt * @returns {*} Attribute value or `undefined`.nt */ntgetAttribute(
key ) {nttreturn this._attrs.get( key );nt}nnt/**nt * Returns iterable that
iterates over this selection&#39;s attributes.nt *nt * Attributes are
returned as arrays containing two items. First one is attribute key and
second is attribute value.nt * This format is accepted by native `Map`
object and also can be passed in `Node` constructor.nt *nt * @returns
{Iterable.&lt;*&gt;}nt */ntgetAttributes() {nttreturn
this._attrs.entries();nt}nnt/**nt * Returns iterable that iterates over
this selection&#39;s attribute keys.nt *nt * @returns
{Iterable.&lt;String&gt;}nt */ntgetAttributeKeys() {nttreturn
this._attrs.keys();nt}nnt/**nt * Checks if the selection has an attribute
for given key.nt *nt * @param {String} key Key of attribute to check.nt *
@returns {Boolean} `true` if attribute with given key is set on selection,
`false` otherwise.nt */nthasAttribute( key ) {nttreturn this._attrs.has(
key );nt}nnt/**nt * Removes an attribute with given key from the
selection.nt *nt * If given attribute was set on the selection, fires the
{@link event:change:range} event withnt * removed attribute key.nt *nt *
@fires change:attributent * @param {String} key Key of attribute to
remove.nt */ntremoveAttribute( key ) {nttif ( this.hasAttribute( key ) )
{ntttthis._attrs.delete( key );nntttthis.fire( &#39;change:attribute&#39;,
{ attributeKeys: [ key ], directChange: true } );ntt}nt}nnt/**nt * Sets
attribute on the selection. If attribute with the same key already is set,
it&#39;s value is overwritten.nt *nt * If the attribute value has changed,
fires the {@link event:change:range} event withnt * the attribute key.nt
*nt * @fires change:attributent * @param {String} key Key of attribute to
set.nt * @param {*} value Attribute value.nt */ntsetAttribute( key, value )
{nttif ( this.getAttribute( key ) !== value ) {ntttthis._attrs.set( key,
value );nntttthis.fire( &#39;change:attribute&#39;, { attributeKeys: [ key
], directChange: true } );ntt}nt}nnt/**nt * Returns the selected element.
{@link module:engine/model/element~Element Element} is considered as
selected if there is onlynt * one range in the selection, and that range
contains exactly one element.nt * Returns `null` if there is no selected
element.nt *nt * @returns {module:engine/model/element~Element|null}nt
*/ntgetSelectedElement() {nttif ( this.rangeCount !== 1 ) {ntttreturn
null;ntt}nnttconst range = this.getFirstRange();nttconst nodeAfterStart =
range.start.nodeAfter;nttconst nodeBeforeEnd =
range.end.nodeBefore;nnttreturn ( nodeAfterStart instanceof Element
&amp;&amp; nodeAfterStart == nodeBeforeEnd ) ? nodeAfterStart :
null;nt}nnt/**nt * Gets elements of type "block&quot; touched by the
selection.nt *nt * This method&#39;s result can be used for example to
apply block styling to all blocks covered by this selection.nt *nt *
*Note:* `getSelectedBlocks()` always returns the deepest block.nt *nt * In
this case the function will return exactly all 3 paragraphs:nt *nt
*tt&lt;paragraph&gt;[a&lt;/paragraph&gt;nt *tt&lt;quote&gt;nt
*ttt&lt;paragraph&gt;b&lt;/paragraph&gt;nt *tt&lt;/quote&gt;nt
*tt&lt;paragraph&gt;c]d&lt;/paragraph&gt;nt *nt * In this case the
paragraph will also be returned, despite the collapsed selection:nt *nt
*tt&lt;paragraph&gt;[]a&lt;/paragraph&gt;nt *nt * **Special case**: If a
selection ends at the beginning of a block, that block is not returned as
from user perspectivent * this block wasn&#39;t selected. See [#984](<a
href="https://github.com/ckeditor/ckeditor5-engine/issues/984">github.com/ckeditor/ckeditor5-engine/issues/984</a>)
for more details.nt *nt *tt&lt;paragraph&gt;[a&lt;/paragraph&gt;nt
*tt&lt;paragraph&gt;b&lt;/paragraph&gt;nt
*tt&lt;paragraph&gt;]c&lt;/paragraph&gt; // this block will not be
returnednt *nt * @returns
{Iterable.&lt;module:engine/model/element~Element&gt;}nt */nt*
getSelectedBlocks() {nttconst visited = new WeakSet();nnttfor ( const range
of this.getRanges() ) {ntttconst startBlock = getParentBlock( range.start,
visited );nntttif ( startBlock ) {nttttyield startBlock;nttt}nntttfor (
const value of range.getWalker() ) {nttttif ( value.type ==
&#39;elementEnd&#39; &amp;&amp; isUnvisitedBlockContainer( value.item,
visited ) ) {ntttttyield value.item;ntttt}nttt}nntttconst endBlock =
getParentBlock( range.end, visited );nnttt// #984. Don&#39;t return the end
block if the range ends right at its beginning.ntttif ( endBlock &amp;&amp;
!range.end.isTouching( Position.createAt( endBlock ) ) ) {nttttyield
endBlock;nttt}ntt}nt}nnt/**nt * Checks whether the selection contains the
entire content of the given element. This means that selection must startnt
* at a position {@link module:engine/model/position~Position#isTouching
touching} the element&#39;s start and ends at positionnt * touching the
element&#39;s end.nt *nt * By default, this method will check whether the
entire content of the selection&#39;s current root is selected.nt * Useful
to check if e.g. the user has just pressed &lt;kbd&gt;Ctrl&lt;/kbd&gt; +
&lt;kbd&gt;A&lt;/kbd&gt;.nt *nt * @param
{module:engine/model/element~Element} [element=this.anchor.root]nt *
@returns {Boolean}nt */ntcontainsEntireContent( element = this.anchor.root
) {nttconst limitStartPosition = Position.createAt( element );nttconst
limitEndPosition = Position.createAt( element, &#39;end&#39; );nnttreturn
limitStartPosition.isTouching( this.getFirstPosition() )
&amp;&amp;ntttlimitEndPosition.isTouching( this.getLastPosition()
);nt}nnt/**nt * Adds given range to internal {@link #_ranges ranges array}.
Throws an errornt * if given range is intersecting with any range that is
already stored in this selection.nt *nt * @protectednt * @param
{module:engine/model/range~Range} range Range to add.nt */nt_pushRange(
range ) {nttthis._checkRange( range );nttthis._ranges.push(
Range.createFromRange( range ) );nt}nnt/**nt * Checks if given range
intersects with ranges that are already in the selection. Throws an error
if it does.nt *nt * @protectednt * @param {module:engine/model/range~Range}
range Range to check.nt */nt_checkRange( range ) {nttfor ( let i = 0; i
&lt; this._ranges.length; i++ ) {ntttif ( range.isIntersecting(
this._ranges[ i ] ) ) {ntttt/**ntttt * Trying to add a range that
intersects with another range from selection.ntttt *ntttt * @error
model-selection-range-intersectsntttt * @param
{module:engine/model/range~Range} addedRange Range that was added to the
selection.ntttt * @param {module:engine/model/range~Range}
intersectingRange Range from selection that intersects with
`addedRange`.ntttt */nttttthrow new
CKEditorError(nttttt&#39;model-selection-range-intersects: Trying to add a
range that intersects with another range from selection.&#39;,nttttt{
addedRange: range, intersectingRange: this._ranges[ i ]
}ntttt);nttt}ntt}nt}nnt/**nt * Deletes ranges from internal range array.
Uses {@link #_popRange _popRange} tont * ensure proper ranges removal.nt
*nt * @protectednt */nt_removeAllRanges() {nttwhile ( this._ranges.length
&gt; 0 ) {ntttthis._popRange();ntt}nt}nnt/**nt * Removes most recently
added range from the selection.nt *nt * @protectednt */nt_popRange()
{nttthis._ranges.pop();nt}nnt/**nt * Fired when selection range(s)
changed.nt *nt * @event change:rangent * @param {Boolean} directChange In
case of {@link module:engine/model/selection~Selection} class it is always
setnt * to `true` which indicates that the selection change was caused by a
direct use of selection&#39;s API.nt * The {@link
module:engine/model/documentselection~DocumentSelection}, however, may
change because its positionnt * was directly changed through the {@link
module:engine/model/writer~Writer writer} or because its position wasnt *
changed because the structure of the model has been changed (which means an
indirect change).nt * The indirect change does not occur in case of normal
(detached) selections because they are "static&quot; (as "not live&quot;)nt
* which mean that they are not updated once the document changes.nt
*/nnt/**nt * Fired when selection attribute changed.nt *nt * @event
change:attributent * @param {Boolean} directChange In case of {@link
module:engine/model/selection~Selection} class it is always setnt * to
`true` which indicates that the selection change was caused by a direct use
of selection&#39;s API.nt * The {@link
module:engine/model/documentselection~DocumentSelection}, however, may
change because its attributesnt * were directly changed through the {@link
module:engine/model/writer~Writer writer} or because its position wasnt *
changed in the model and its attributes were refreshed (which means an
indirect change).nt * The indirect change does not occur in case of normal
(detached) selections because they are "static&quot; (as "not live&quot;)nt
* which mean that they are not updated once the document changes.nt *
@param {Array.&lt;String&gt;} attributeKeys Array containing keys of
attributes that changed.nt */n}nnmix( Selection, EmitterMixin );nn// Checks
whether the given element extends $block in the schema and has a parent (is
not a root).n// Marks it as already visited.nfunction
isUnvisitedBlockContainer( element, visited ) {ntif ( visited.has( element
) ) {nttreturn false;nt}nntvisited.add( element );nntreturn
element.document.model.schema.isBlock( element ) &amp;&amp;
element.parent;n}nn// Finds the lowest element in position&#39;s ancestors
which is a block.n// Marks all ancestors as already visited to not include
any of them later on.nfunction getParentBlock( position, visited ) {ntconst
ancestors = position.parent.getAncestors( { parentFirst: true, includeSelf:
true } );ntconst block = ancestors.find( element =&gt;
isUnvisitedBlockContainer( element, visited ) );nnt// Mark all ancestors of
this position&#39;s parent, because find() might&#39;ve stopped early
andnt// the found block may be a child of another
block.ntancestors.forEach( element =&gt; visited.add( element ) );nntreturn
block;n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/selection.jsn// module id = nulln// module
chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module engine/model/liverangen */nnimport Range from
&#39;./range&#39;;nimport EmitterMixin from
&#39;@ckeditor/ckeditor5-utils/src/emittermixin&#39;;nimport mix from
&#39;@ckeditor/ckeditor5-utils/src/mix&#39;;nn/**n * `LiveRange` is a type
of {@link module:engine/model/range~Range Range}n * that updates itself as
{@link module:engine/model/document~Document document}n * is changed
through operations. It may be used as a bookmark.n *n * *Note:* Be very
careful when dealing with `LiveRange`. Each `LiveRange` instance bind
events that mightn * have to be unbound. Use {@link
module:engine/model/liverange~LiveRange#detach detach} whenever you
don&#39;t need `LiveRange` anymore.n */nexport default class LiveRange
extends Range {nt/**nt * Creates a live range.nt *nt * @see
module:engine/model/range~Rangent */ntconstructor( start, end ) {nttsuper(
start, end );nnttbindWithDocument.call( this );nt}nnt/**nt * Unbinds all
events previously bound by `LiveRange`. Use it whenever you don&#39;t need
`LiveRange` instancent * anymore (i.e. when leaving scope in which it was
declared or before re-assigning variable that wasnt * referring to it).nt
*/ntdetach() {nttthis.stopListening();nt}nnt/**nt * @see
module:engine/model/range~Range.createInnt * @staticnt * @method
module:engine/model/liverange~LiveRange.createInnt * @param
{module:engine/model/element~Element} elementnt * @returns
{module:engine/model/liverange~LiveRange}nt */nnt/**nt * @see
module:engine/model/range~Range.createFromPositionAndShiftnt * @staticnt *
@method
module:engine/model/liverange~LiveRange.createFromPositionAndShiftnt *
@param {module:engine/model/position~Position} positionnt * @param {Number}
shiftnt * @returns {module:engine/model/liverange~LiveRange}nt */nnt/**nt *
@see module:engine/model/range~Range.createFromParentsAndOffsetsnt *
@staticnt * @method
module:engine/model/liverange~LiveRange.createFromParentsAndOffsetsnt *
@param {module:engine/model/element~Element} startElementnt * @param
{Number} startOffsetnt * @param {module:engine/model/element~Element}
endElementnt * @param {Number} endOffsetnt * @returns
{module:engine/model/liverange~LiveRange}nt */nnt/**nt * @see
module:engine/model/range~Range.createFromRangent * @staticnt * @method
module:engine/model/liverange~LiveRange.createFromRangent * @param
{module:engine/model/range~Range} rangent * @returns
{module:engine/model/liverange~LiveRange}nt */nnt/**nt * Fired when
`LiveRange` instance boundaries have changed due to changes in thent *
{@link module:engine/model/document~Document document}.nt *nt * @event
change:rangent * @param {module:engine/model/range~Range} oldRange Range
with start and end position equal to start and end position of this livent
* range before it got changed.nt * @param {Object} data <a
href="../../../../Object.html">Object</a> with additional information about
the change. Those parameters are passed fromnt * {@link
module:engine/model/document~Document#event:change document change
event}.nt * @param {String} data.type Change type.nt * @param
{module:engine/model/batch~Batch} data.batch Batch which changed the live
range.nt * @param {module:engine/model/range~Range} data.range Range
containing the result of applied change.nt * @param
{module:engine/model/position~Position} data.sourcePosition Source position
for move, remove and reinsert change types.nt */nnt/**nt * Fired when
`LiveRange` instance boundaries have not changed after a change in {@link
module:engine/model/document~Document document}nt * but the change took
place inside the range, effectively changing its content.nt *nt * @event
change:contentnt * @param {module:engine/model/range~Range} range Range
with start and end position equal to start and end position ofnt * change
range.nt * @param {Object} data <a
href="../../../../Object.html">Object</a> with additional information about
the change. Those parameters are passed fromnt * {@link
module:engine/model/document~Document#event:change document change
event}.nt * @param {String} data.type Change type.nt * @param
{module:engine/model/batch~Batch} data.batch Batch which changed the live
range.nt * @param {module:engine/model/range~Range} data.range Range
containing the result of applied change.nt * @param
{module:engine/model/position~Position} data.sourcePosition Source position
for move, remove and reinsert change types.nt */n}nn/**n * Binds this
`LiveRange` to the {@link module:engine/model/document~Document document}n
* that owns this range&#39;s {@link module:engine/model/range~Range#root
root}.n *n * @ignoren * @privaten * @method
module:engine/model/liverange~LiveRange#bindWithDocumentn */nfunction
bindWithDocument() {nt// Operation types that a range can be transformed
by.ntconst supportedTypes = new Set( [ &#39;insert&#39;, &#39;move&#39;,
&#39;remove&#39;, &#39;reinsert&#39; ]
);nntthis.listenTo(nttthis.root.document.model,ntt&#39;applyOperation&#39;,ntt(
event, args ) =&gt; {ntttconst operation = args[ 0 ];nntttif (
!operation.isDocumentOperation ) {nttttreturn;nttt}nntttif (
supportedTypes.has( operation.type ) ) {ntttttransform.call( this,
operation );nttt}ntt},ntt{ priority: &#39;low&#39; }nt);n}nn/**n * Updates
this range accordingly to the updates applied to the model. Bases on change
events.n *n * @ignoren * @privaten * @method transformn * @param
{module:engine/model/operation/operation~Operation} operation Executed
operation.n */nfunction transform( operation ) {ntconst changeType =
operation.type;ntconst batch = operation.delta.batch;nntlet
targetRange;ntlet sourcePosition;nntif ( changeType == &#39;insert&#39; )
{ntttargetRange = Range.createFromPositionAndShift( operation.position,
operation.nodes.maxOffset );nt} else {ntttargetRange =
Range.createFromPositionAndShift( operation.getMovedRangeStart(),
operation.howMany );nttsourcePosition =
operation.sourcePosition;nt}nntconst howMany = targetRange.end.offset -
targetRange.start.offset;ntlet targetPosition = targetRange.start;nntif (
changeType == &#39;move&#39; || changeType == &#39;remove&#39; ||
changeType == &#39;reinsert&#39; ) {ntt//
Range._getTransformedByDocumentChange is expecting `targetPosition` to be
"before&quot; moventt// (before transformation). `targetRange.start` is
already after the move happened.ntt// We have to revert `targetPosition` to
the state before the move.ntttargetPosition =
targetPosition._getTransformedByInsertion( sourcePosition, howMany
);nt}nntconst result = this._getTransformedByDocumentChange( changeType,
operation.delta.type, targetPosition, howMany, sourcePosition );nnt//
Decide whether moved part should be included in the range.nt//nt// First,
this concerns only `move` change, because insert change includes inserted
part always (changeType == &#39;move&#39;).nt// Second, this is a case only
if moved range was intersecting with this range and was inserted into this
range (result.length == 3).ntif ( ( changeType == &#39;move&#39; ||
changeType == &#39;remove&#39; || changeType == &#39;reinsert&#39; )
&amp;&amp; result.length == 3 ) {ntt// `result[ 2 ]` is a "common
part&quot; of this range and moved range. We substitute that common part
with the wholentt// `targetRange` because we want to include whole
`targetRange` in this range.nttresult[ 2 ] = targetRange;nt}nntconst
updated = Range.createFromRanges( result );nntconst boundariesChanged =
!updated.isEqual( this );nntconst rangeExpanded = this.containsPosition(
targetPosition );ntconst rangeShrunk = sourcePosition &amp;&amp; (
this.containsPosition( sourcePosition ) || this.start.isEqual(
sourcePosition ) );ntconst contentChanged = rangeExpanded ||
rangeShrunk;nntif ( boundariesChanged ) {ntt// If range boundaries have
changed, fire `change:range` event.nttconst oldRange =
Range.createFromRange( this );nnttthis.start = updated.start;nttthis.end =
updated.end;nnttthis.fire( &#39;change:range&#39;, oldRange, {nttttype:
changeType,ntttbatch,ntttrange: targetRange,ntttsourcePositionntt} );nt}
else if ( contentChanged ) {ntt// If range boundaries have not changed, but
there was change inside the range, fire `change:content`
event.nttthis.fire( &#39;change:content&#39;, Range.createFromRange( this
), {nttttype: changeType,ntttbatch,ntttrange:
targetRange,ntttsourcePositionntt} );nt}n}nnmix( LiveRange, EmitterMixin
);nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/liverange.jsn// module id = nulln// module
chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module engine/model/documentselectionn */nnimport mix from
&#39;@ckeditor/ckeditor5-utils/src/mix&#39;;nimport EmitterMixin from
&#39;@ckeditor/ckeditor5-utils/src/emittermixin&#39;;nnimport Selection
from &#39;./selection&#39;;nimport Position from
&#39;./position&#39;;nimport LiveRange from &#39;./liverange&#39;;nimport
Text from &#39;./text&#39;;nimport TextProxy from
&#39;./textproxy&#39;;nimport toMap from
&#39;@ckeditor/ckeditor5-utils/src/tomap&#39;;nimport CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nimport log from
&#39;@ckeditor/ckeditor5-utils/src/log&#39;;nimport uid from
&#39;@ckeditor/ckeditor5-utils/src/uid&#39;;nnconst storePrefix =
&#39;selection:&#39;;nn/**n * `DocumentSelection` is a special selection
which is used as then * {@link
module:engine/model/document~Document#selection document&#39;s selection}.n
* There can be only one instance of `DocumentSelection` per document.n *n *
Document selection can only be changed by using the {@link
module:engine/model/writer~Writer} instancen * inside the {@link
module:engine/model/model~Model#change `change()`} block, as it provides a
secure way to modify model.n *n * `DocumentSelection` is automatically
updated upon changes in the {@link module:engine/model/document~Document
document}n * to always contain valid ranges. Its attributes are inherited
from the text unless set explicitly.n *n * Differences between {@link
module:engine/model/selection~Selection} and `DocumentSelection` are:n * *
there is always a range in `DocumentSelection` - even if no ranges were
added there is a "default range&quot;n * present in the selection,n * *
ranges added to this selection updates automatically when the document
changes,n * * attributes of `DocumentSelection` are updated automatically
according to selection ranges.n *n * Since `DocumentSelection` uses {@link
module:engine/model/liverange~LiveRange live ranges}n * and is updated when
{@link module:engine/model/document~Document document}n * changes, it
cannot be set on {@link module:engine/model/node~Node nodes}n * that are
inside {@link module:engine/model/documentfragment~DocumentFragment
document fragment}.n * If you need to represent a selection in document
fragment,n * use {@link module:engine/model/selection~Selection Selection
class} instead.n */nexport default class DocumentSelection {nt/**nt *
Creates an empty live selection for given {@link
module:engine/model/document~Document}.nt *nt * @param
{module:engine/model/document~Document} doc Document which owns this
selection.nt */ntconstructor( doc ) {ntt/**ntt * Selection used internally
by that class (`DocumentSelection` is a proxy to that selection).ntt *ntt *
@protectedntt */nttthis._selection = new LiveSelection( doc
);nnttthis._selection.delegate( &#39;change:range&#39; ).to( this
);nttthis._selection.delegate( &#39;change:attribute&#39; ).to( this
);nt}nnt/**nt * Returns whether the selection is collapsed. Selection is
collapsed when there is exactly one range which isnt * collapsed.nt *nt *
@readonlynt * @type {Boolean}nt */ntget isCollapsed() {nttreturn
this._selection.isCollapsed;nt}nnt/**nt * Selection anchor. Anchor may be
described as a position where the most recent part of the selection
starts.nt * Together with {@link focus} they define the direction of
selection, which is importantnt * when expanding/shrinking selection.
Anchor is always {@link module:engine/model/range~Range#start start} ornt *
{@link module:engine/model/range~Range#end end} position of the most
recently added range.nt *nt * Is set to `null` if there are no ranges in
selection.nt *nt * @see focusnt * @readonlynt * @type
{module:engine/model/position~Position|null}nt */ntget anchor() {nttreturn
this._selection.anchor;nt}nnt/**nt * Selection focus. Focus is a position
where the selection ends.nt *nt * Is set to `null` if there are no ranges
in selection.nt *nt * @see anchornt * @readonlynt * @type
{module:engine/model/position~Position|null}nt */ntget focus() {nttreturn
this._selection.focus;nt}nnt/**nt * Returns number of ranges in
selection.nt *nt * @readonlynt * @type {Number}nt */ntget rangeCount()
{nttreturn this._selection.rangeCount;nt}nnt/**nt * Describes whether
`Documentselection` has own range(s) set, or if it is defaulted tont *
{@link module:engine/model/document~Document#_getDefaultRange
document&#39;s default range}.nt *nt * @readonlynt * @type {Boolean}nt
*/ntget hasOwnRange() {nttreturn this._selection.hasOwnRange;nt}nnt/**nt *
Specifies whether the {@link focus}nt * precedes {@link anchor}.nt *nt *
@readonlynt * @type {Boolean}nt */ntget isBackward() {nttreturn
this._selection.isBackward;nt}nnt/**nt * Describes whether the gravity is
overridden (using {@link
module:engine/model/writer~Writer#overrideSelectionGravity}) or not.nt *nt
* Note that the gravity remains overridden as long as will not be restored
the same number of times as it was overridden.nt *nt * @readonlynt *
@return {Boolean}nt */ntget isGravityOverridden() {nttreturn
this._selection.isGravityOverridden;nt}nnt/**nt * Used for the
compatibility with the {@link
module:engine/model/selection~Selection#isEqual} method.nt *nt *
@protectednt */ntget _ranges() {nttreturn
this._selection._ranges;nt}nnt/**nt * Returns an iterable that iterates
over copies of selection ranges.nt *nt * @returns
{Iterable.&lt;module:engine/model/range~Range&gt;}nt */ntgetRanges()
{nttreturn this._selection.getRanges();nt}nnt/**nt * Returns the first
position in the selection.nt * First position is the position that {@link
module:engine/model/position~Position#isBefore is before}nt * any other
position in the selection.nt *nt * Returns `null` if there are no ranges in
selection.nt *nt * @returns {module:engine/model/position~Position|null}nt
*/ntgetFirstPosition() {nttreturn
this._selection.getFirstPosition();nt}nnt/**nt * Returns the last position
in the selection.nt * Last position is the position that {@link
module:engine/model/position~Position#isAfter is after}nt * any other
position in the selection.nt *nt * Returns `null` if there are no ranges in
selection.nt *nt * @returns {module:engine/model/position~Position|null}nt
*/ntgetLastPosition() {nttreturn
this._selection.getLastPosition();nt}nnt/**nt * Returns a copy of the first
range in the selection.nt * First range is the one which {@link
module:engine/model/range~Range#start start} positionnt * {@link
module:engine/model/position~Position#isBefore is before} start position of
all other rangesnt * (not to confuse with the first range added to the
selection).nt *nt * Returns `null` if there are no ranges in selection.nt
*nt * @returns {module:engine/model/range~Range|null}nt */ntgetFirstRange()
{nttreturn this._selection.getFirstRange();nt}nnt/**nt * Returns a copy of
the last range in the selection.nt * Last range is the one which {@link
module:engine/model/range~Range#end end} positionnt * {@link
module:engine/model/position~Position#isAfter is after} end position of all
other ranges (not to confuse with the range mostnt * recently added to the
selection).nt *nt * Returns `null` if there are no ranges in selection.nt
*nt * @returns {module:engine/model/range~Range|null}nt */ntgetLastRange()
{nttreturn this._selection.getLastRange();nt}nnt/**nt * Gets elements of
type "block&quot; touched by the selection.nt *nt * This method&#39;s
result can be used for example to apply block styling to all blocks covered
by this selection.nt *nt * *Note:* `getSelectedBlocks()` always returns the
deepest block.nt *nt * In this case the function will return exactly all 3
paragraphs:nt *nt *tt&lt;paragraph&gt;[a&lt;/paragraph&gt;nt
*tt&lt;quote&gt;nt *ttt&lt;paragraph&gt;b&lt;/paragraph&gt;nt
*tt&lt;/quote&gt;nt *tt&lt;paragraph&gt;c]d&lt;/paragraph&gt;nt *nt * In
this case the paragraph will also be returned, despite the collapsed
selection:nt *nt *tt&lt;paragraph&gt;[]a&lt;/paragraph&gt;nt *nt *
**Special case**: If a selection ends at the beginning of a block, that
block is not returned as from user perspectivent * this block wasn&#39;t
selected. See [#984](<a
href="https://github.com/ckeditor/ckeditor5-engine/issues/984">github.com/ckeditor/ckeditor5-engine/issues/984</a>)
for more details.nt *nt *tt&lt;paragraph&gt;[a&lt;/paragraph&gt;nt
*tt&lt;paragraph&gt;b&lt;/paragraph&gt;nt
*tt&lt;paragraph&gt;]c&lt;/paragraph&gt; // this block will not be
returnednt *nt * @returns
{Iterator.&lt;module:engine/model/element~Element&gt;}nt
*/ntgetSelectedBlocks() {nttreturn
this._selection.getSelectedBlocks();nt}nnt/**nt * Returns the selected
element. {@link module:engine/model/element~Element Element} is considered
as selected if there is onlynt * one range in the selection, and that range
contains exactly one element.nt * Returns `null` if there is no selected
element.nt *nt * @returns {module:engine/model/element~Element|null}nt
*/ntgetSelectedElement() {nttreturn
this._selection.getSelectedElement();nt}nnt/**nt * Checks whether the
selection contains the entire content of the given element. This means that
selection must startnt * at a position {@link
module:engine/model/position~Position#isTouching touching} the
element&#39;s start and ends at positionnt * touching the element&#39;s
end.nt *nt * By default, this method will check whether the entire content
of the selection&#39;s current root is selected.nt * Useful to check if
e.g. the user has just pressed &lt;kbd&gt;Ctrl&lt;/kbd&gt; +
&lt;kbd&gt;A&lt;/kbd&gt;.nt *nt * @param
{module:engine/model/element~Element} [element=this.anchor.root]nt *
@returns {Boolean}nt */ntcontainsEntireContent( element ) {nttreturn
this._selection.containsEntireContent( element );nt}nnt/**nt * Unbinds all
events previously bound by document selection.nt */ntdestroy()
{nttthis._selection.destroy();nt}nnt/**nt * Returns iterable that iterates
over this selection&#39;s attribute keys.nt *nt * @returns
{Iterable.&lt;String&gt;}nt */ntgetAttributeKeys() {nttreturn
this._selection.getAttributeKeys();nt}nnt/**nt * Returns iterable that
iterates over this selection&#39;s attributes.nt *nt * Attributes are
returned as arrays containing two items. First one is attribute key and
second is attribute value.nt * This format is accepted by native `Map`
object and also can be passed in `Node` constructor.nt *nt * @returns
{Iterable.&lt;*&gt;}nt */ntgetAttributes() {nttreturn
this._selection.getAttributes();nt}nnt/**nt * Gets an attribute value for
given key or `undefined` if that attribute is not set on the selection.nt
*nt * @param {String} key Key of attribute to look for.nt * @returns {*}
Attribute value or `undefined`.nt */ntgetAttribute( key ) {nttreturn
this._selection.getAttribute( key );nt}nnt/**nt * Checks if the selection
has an attribute for given key.nt *nt * @param {String} key Key of
attribute to check.nt * @returns {Boolean} `true` if attribute with given
key is set on selection, `false` otherwise.nt */nthasAttribute( key )
{nttreturn this._selection.hasAttribute( key );nt}nnt/**nt * Moves {@link
module:engine/model/documentselection~DocumentSelection#focus} to the
specified location.nt * Should be used only within the {@link
module:engine/model/writer~Writer#setSelectionFocus} method.nt *nt * The
location can be specified in the same form as {@link
module:engine/model/position~Position.createAt} parameters.nt *nt * @see
module:engine/model/writer~Writer#setSelectionFocusnt * @protectednt *
@param
{module:engine/model/item~Item|module:engine/model/position~Position}
itemOrPositionnt * @param
{Number|&#39;end&#39;|&#39;before&#39;|&#39;after&#39;} [offset] Offset or
one of the flags. Used only whennt * first parameter is a {@link
module:engine/model/item~Item model item}.nt */nt_setFocus( itemOrPosition,
offset ) {nttthis._selection.setFocus( itemOrPosition, offset );nt}nnt/**nt
* Sets this selection&#39;s ranges and direction to the specified location
based on the givennt * {@link module:engine/model/selection~Selection
selection}, {@link module:engine/model/position~Position position},nt *
{@link module:engine/model/node~Node node}, {@link
module:engine/model/position~Position position},nt * {@link
module:engine/model/range~Range range}, an iterable of {@link
module:engine/model/range~Range ranges} or null.nt * Should be used only
within the {@link module:engine/model/writer~Writer#setSelection} method.nt
*nt * @see module:engine/model/writer~Writer#setSelectionnt * @protectednt
* @param
{module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection|nt
* module:engine/model/position~Position|module:engine/model/node~Node|nt *
Iterable.&lt;module:engine/model/range~Range&gt;|module:engine/model/range~Range|null}
selectablent * @param
{Number|&#39;before&#39;|&#39;end&#39;|&#39;after&#39;|&#39;on&#39;|&#39;in&#39;}
[placeOrOffset] Sets place or offset of the selection.nt * @param {Object}
[options]nt * @param {Boolean} [options.backward] Sets this selection
instance to be backward.nt */nt_setTo( selectable, placeOrOffset, options )
{nttthis._selection.setTo( selectable, placeOrOffset, options );nt}nnt/**nt
* Sets attribute on the selection. If attribute with the same key already
is set, it&#39;s value is overwritten.nt * Should be used only within the
{@link module:engine/model/writer~Writer#setSelectionAttribute} method.nt
*nt * @see module:engine/model/writer~Writer#setSelectionAttributent *
@protectednt * @param {String} key Key of the attribute to set.nt * @param
{*} value Attribute value.nt */nt_setAttribute( key, value )
{nttthis._selection.setAttribute( key, value );nt}nnt/**nt * Removes an
attribute with given key from the selection.nt * If the given attribute was
set on the selection, fires the {@link
module:engine/model/selection~Selection#event:change:range}nt * event with
removed attribute key.nt * Should be used only within the {@link
module:engine/model/writer~Writer#removeSelectionAttribute} method.nt *nt *
@see module:engine/model/writer~Writer#removeSelectionAttributent *
@protectednt * @param {String} key Key of the attribute to remove.nt
*/nt_removeAttribute( key ) {nttthis._selection.removeAttribute( key
);nt}nnt/**nt * Returns an iterable that iterates through all selection
attributes stored in current selection&#39;s parent.nt *nt * @protectednt *
@returns {Iterable.&lt;*&gt;}nt */nt_getStoredAttributes() {nttreturn
this._selection._getStoredAttributes();nt}nnt/**nt * Temporarily changes
the gravity of the selection from the left to the right.nt *nt * The
gravity defines from which direction the selection inherits its attributes.
If it&#39;s the default leftnt * gravity, the selection (after being moved
by the the user) inherits attributes from its left hand side.nt * This
method allows to temporarily override this behavior by forcing the gravity
to the right.nt *nt * It returns an unique identifier which is required to
restore the gravity. It guarantees the symmetrynt * of the process.nt *nt *
@see module:engine/model/writer~Writer#overrideSelectionGravitynt *
@protectednt * @returns {String} The unique id which allows restoring the
gravity.nt */nt_overrideGravity() {nttreturn
this._selection.overrideGravity();nt}nnt/**nt * Restores the {@link
~DocumentSelection#_overrideGravity overridden gravity}.nt *nt * Restoring
the gravity is only possible using the unique identifier returned bynt *
{@link ~DocumentSelection#_overrideGravity}. Note that the gravity remains
overridden as long as won&#39;t be restorednt * the same number of times it
was overridden.nt *nt * @see
module:engine/model/writer~Writer#restoreSelectionGravitynt * @protectednt
* @param {String} uid The unique id returned by {@link
#_overrideGravity}.nt */nt_restoreGravity( uid )
{nttthis._selection.restoreGravity( uid );nt}nnt/**nt * Generates and
returns an attribute key for selection attributes store, basing on original
attribute key.nt *nt * @protectednt * @param {String} key Attribute key to
convert.nt * @returns {String} Converted attribute key, applicable for
selection store.nt */ntstatic _getStoreAttributeKey( key ) {nttreturn
storePrefix + key;nt}nnt/**nt * Checks whether the given attribute key is
an attribute stored on an element.nt *nt * @protectednt * @param {String}
keynt * @returns {Boolean}nt */ntstatic _isStoreAttributeKey( key )
{nttreturn key.startsWith( storePrefix );nt}n}nnmix( DocumentSelection,
EmitterMixin );nn/**n * Fired when selection range(s) changed.n *n * @event
change:rangen * @param {Boolean} directChange In case of {@link
module:engine/model/selection~Selection} class it is always setn * to
`true` which indicates that the selection change was caused by a direct use
of selection&#39;s API.n * The {@link
module:engine/model/documentselection~DocumentSelection}, however, may
change because its positionn * was directly changed through the {@link
module:engine/model/writer~Writer writer} or because its position wasn *
changed because the structure of the model has been changed (which means an
indirect change).n * The indirect change does not occur in case of normal
(detached) selections because they are "static&quot; (as "not live&quot;)n
* which mean that they are not updated once the document changes.n */nn/**n
* Fired when selection attribute changed.n *n * @event change:attributen *
@param {Boolean} directChange In case of {@link
module:engine/model/selection~Selection} class it is always setn * to
`true` which indicates that the selection change was caused by a direct use
of selection&#39;s API.n * The {@link
module:engine/model/documentselection~DocumentSelection}, however, may
change because its attributesn * were directly changed through the {@link
module:engine/model/writer~Writer writer} or because its position wasn *
changed in the model and its attributes were refreshed (which means an
indirect change).n * The indirect change does not occur in case of normal
(detached) selections because they are "static&quot; (as "not live&quot;)n
* which mean that they are not updated once the document changes.n * @param
{Array.&lt;String&gt;} attributeKeys Array containing keys of attributes
that changed.n */nn// `LiveSelection` is used internally by {@link
module:engine/model/documentselection~DocumentSelection} and shouldn&#39;t
be used directly.n//n// LiveSelection` is automatically updated upon
changes in the {@link module:engine/model/document~Document document}n// to
always contain valid ranges. Its attributes are inherited from the text
unless set explicitly.n//n// Differences between {@link
module:engine/model/selection~Selection} and `LiveSelection` are:n// *
there is always a range in `LiveSelection` - even if no ranges were added
there is a "default range&quot;n// present in the selection,n// * ranges
added to this selection updates automatically when the document changes,n//
* attributes of `LiveSelection` are updated automatically according to
selection ranges.n//n// @extends
module:engine/model/selection~Selectionn//nnclass LiveSelection extends
Selection {nt// Creates an empty live selection for given {@link
module:engine/model/document~Document}.nt// @param
{module:engine/model/document~Document} doc Document which owns this
selection.ntconstructor( doc ) {nttsuper();nntt// Document which owns this
selection.ntt//ntt// @protectedntt// @member
{module:engine/model/model~Model}nttthis._model = doc.model;nntt// Document
which owns this selection.ntt//ntt// @protectedntt// @member
{module:engine/model/document~Document}nttthis._document = doc;nntt// Keeps
mapping of attribute name to priority with which the attribute got modified
(added/changed/removed)ntt// last time. Possible values of priority are:
`&#39;low&#39;` and `&#39;normal&#39;`.ntt//ntt// Priorities are used by
internal `LiveSelection` mechanisms. All attributes set using
`LiveSelection`ntt// attributes API are set with `&#39;normal&#39;`
priority.ntt//ntt// @privatentt// @member {Map}
module:engine/model/liveselection~LiveSelection#_attributePrioritynttthis._attributePriority
= new Map();nntt// Contains data required to fix ranges which have been
moved to the graveyard.ntt// @privatentt// @member {Array}
module:engine/model/liveselection~LiveSelection#_fixGraveyardRangesDatanttthis._fixGraveyardRangesData
= [];nntt// Flag that informs whether the selection ranges have changed. It
is changed on true when `LiveRange#change:range` event is fired.ntt//
@privatentt// @member {Array}
module:engine/model/liveselection~LiveSelection#_hasChangedRangenttthis._hasChangedRange
= false;nntt// Each overriding gravity adds an UID to the set and each
removal removes it.ntt// Gravity is overridden when there&#39;s at least
one UID in the set.ntt// Gravity is restored when the set is empty.ntt//
This is to prevent conflicts when gravity is overridden by more than one
feature at the same time.ntt// @privatentt// @type
{Set}nttthis._overriddenGravityRegister = new Set();nntt// Add events that
will ensure selection correctness.nttthis.on( &#39;change:range&#39;, ()
=&gt; {ntttfor ( const range of this.getRanges() ) {nttttif (
!this._document._validateSelectionRange( range ) ) {nttttt/**nttttt * Range
from {@link module:engine/model/documentselection~DocumentSelection
document selection}nttttt * starts or ends at incorrect position.nttttt
*nttttt * @error document-selection-wrong-positionnttttt * @param
{module:engine/model/range~Range} rangenttttt */ntttttthrow new
CKEditorError(ntttttt&#39;document-selection-wrong-position: Range from
document selection starts or ends at incorrect position.&#39;,ntttttt{
range }nttttt);ntttt}nttt}ntt} );nnttthis.listenTo( this._document,
&#39;change&#39;, ( evt, batch ) =&gt; {nttt// Update selection&#39;s
attributes.ntttthis._updateAttributes( false );nnttt// Clear selection
attributes from element if no longer
empty.ntttclearAttributesStoredInElement( this._model, batch );ntt}
);nnttthis.listenTo( this._model, &#39;applyOperation&#39;, () =&gt;
{ntttwhile ( this._fixGraveyardRangesData.length ) {nttttconst { liveRange,
sourcePosition } =
this._fixGraveyardRangesData.shift();nnttttthis._fixGraveyardSelection(
liveRange, sourcePosition );nttt}nntttif ( this._hasChangedRange )
{nttttthis._hasChangedRange = false;nnttttthis.fire(
&#39;change:range&#39;, { directChange: false } );nttt}ntt}, { priority:
&#39;lowest&#39; } );nt}nntget isCollapsed() {nttconst length =
this._ranges.length;nnttreturn length === 0 ?
this._document._getDefaultRange().isCollapsed : super.isCollapsed;nt}nntget
anchor() {nttreturn super.anchor ||
this._document._getDefaultRange().start;nt}nntget focus() {nttreturn
super.focus || this._document._getDefaultRange().end;nt}nntget rangeCount()
{nttreturn this._ranges.length ? this._ranges.length : 1;nt}nnt// Describes
whether `LiveSelection` has own range(s) set, or if it is defaulted tont//
{@link module:engine/model/document~Document#_getDefaultRange
document&#39;s default range}.nt//nt// @readonlynt// @type {Boolean}ntget
hasOwnRange() {nttreturn this._ranges.length &gt; 0;nt}nnt// When set to
`true` then selection attributes on node before the caret won&#39;t be
takennt// into consideration while updating selection attributes.nt//nt//
@protectednt// @type {Boolean}ntget isGravityOverridden() {nttreturn
!!this._overriddenGravityRegister.size;nt}nnt// Unbinds all events
previously bound by live selection.ntdestroy() {nttfor ( let i = 0; i &lt;
this._ranges.length; i++ ) {ntttthis._ranges[ i
].detach();ntt}nnttthis.stopListening();nt}nnt* getRanges() {nttif (
this._ranges.length ) {ntttyield* super.getRanges();ntt} else {ntttyield
this._document._getDefaultRange();ntt}nt}nntgetFirstRange() {nttreturn
super.getFirstRange() ||
this._document._getDefaultRange();nt}nntgetLastRange() {nttreturn
super.getLastRange() || this._document._getDefaultRange();nt}nntsetTo(
selectable, optionsOrPlaceOrOffset, options ) {nttsuper.setTo( selectable,
optionsOrPlaceOrOffset, options
);nttthis._refreshAttributes();nt}nntsetFocus( itemOrPosition, offset )
{nttsuper.setFocus( itemOrPosition, offset
);nttthis._refreshAttributes();nt}nntsetAttribute( key, value ) {nttif (
this._setAttribute( key, value ) ) {nttt// Fire event with exact
data.ntttconst attributeKeys = [ key ];ntttthis.fire(
&#39;change:attribute&#39;, { attributeKeys, directChange: true }
);ntt}nt}nntremoveAttribute( key ) {nttif ( this._removeAttribute( key ) )
{nttt// Fire event with exact data.ntttconst attributeKeys = [ key
];ntttthis.fire( &#39;change:attribute&#39;, { attributeKeys, directChange:
true } );ntt}nt}nntoverrideGravity() {nttconst overrideUid = uid();nntt//
Remember that another overriding has been requested. It will need to be
removedntt// before the gravity is to be
restored.nttthis._overriddenGravityRegister.add( overrideUid );nnttif (
this._overriddenGravityRegister.size === 1 )
{ntttthis._refreshAttributes();ntt}nnttreturn
overrideUid;nt}nntrestoreGravity( uid ) {nttif (
!this._overriddenGravityRegister.has( uid ) ) {nttt/**nttt * Restoring
gravity for an unknown UID is not possible. Make sure you are using a
correctnttt * UID obtained from the {@link
module:engine/model/writer~Writer#overrideSelectionGravity} to restore.nttt
*nttt * @error document-selection-gravity-wrong-restorenttt * @param
{String} uid The unique identifier returned by {@link overrideGravity}.nttt
*/ntttthrow new
CKEditorError(ntttt&#39;document-selection-gravity-wrong-restore:
Attempting to restore the selection gravity for an unknown UID.&#39;,ntttt{
uid }nttt);ntt}nnttthis._overriddenGravityRegister.delete( uid );nntt//
Restore gravity only when all overriding have been restored.nttif (
!this.isGravityOverridden ) {ntttthis._refreshAttributes();ntt}nt}nnt//
Removes all attributes from the selection and sets attributes according to
the surrounding nodes.nt_refreshAttributes() {nttthis._updateAttributes(
true );nt}nnt_popRange() {nttthis._ranges.pop().detach();nt}nnt_pushRange(
range ) {nttconst liveRange = this._prepareRange( range );nntt//
`undefined` is returned when given `range` is in graveyard root.nttif (
liveRange ) {ntttthis._ranges.push( liveRange );ntt}nt}nnt// Prepares given
range to be added to selection. Checks if it is correct,nt// converts it to
{@link module:engine/model/liverange~LiveRange LiveRange}nt// and sets
listeners listening to the range&#39;s change event.nt//nt// @privatent//
@param {module:engine/model/range~Range} rangent_prepareRange( range )
{nttthis._checkRange( range );nnttif ( range.root ==
this._document.graveyard ) {nttt/**nttt * Trying to add a Range that is in
the graveyard root. Range rejected.nttt *nttt * @warning
model-selection-range-in-graveyardnttt */ntttlog.warn(
&#39;model-selection-range-in-graveyard: Trying to add a Range that is in
the graveyard root. Range rejected.&#39; );nntttreturn;ntt}nnttconst
liveRange = LiveRange.createFromRange( range );nnttliveRange.on(
&#39;change:range&#39;, ( evt, oldRange, data ) =&gt;
{ntttthis._hasChangedRange = true;nnttt// If `LiveRange` is in whole moved
to the graveyard, save necessary data. It will be fixed on
`Model#applyOperation` event.ntttif ( liveRange.root ==
this._document.graveyard ) {nttttthis._fixGraveyardRangesData.push(
{ntttttliveRange,ntttttsourcePosition: data.sourcePositionntttt}
);nttt}ntt} );nnttreturn liveRange;nt}nnt// Updates this selection
attributes according to its ranges and the {@link
module:engine/model/document~Document model document}.nt//nt//
@protectednt// @param {Boolean} clearAllnt// @fires
change:attributent_updateAttributes( clearAll ) {nttconst newAttributes =
toMap( this._getSurroundingAttributes() );nttconst oldAttributes = toMap(
this.getAttributes() );nnttif ( clearAll ) {nttt// If `clearAll` remove all
attributes and reset priorities.ntttthis._attributePriority = new
Map();ntttthis._attrs = new Map();ntt} else {nttt// If not, remove only
attributes added with `low` priority.ntttfor ( const [ key, priority ] of
this._attributePriority ) {nttttif ( priority == &#39;low&#39; )
{ntttttthis._attrs.delete( key );ntttttthis._attributePriority.delete( key
);ntttt}nttt}ntt}nnttthis._setAttributesTo( newAttributes );nntt//
Let&#39;s evaluate which attributes really changed.nttconst changed =
[];nntt// First, loop through all attributes that are set on selection
right now.ntt// Check which of them are different than old
attributes.nttfor ( const [ newKey, newValue ] of this.getAttributes() )
{ntttif ( !oldAttributes.has( newKey ) || oldAttributes.get( newKey ) !==
newValue ) {nttttchanged.push( newKey );nttt}ntt}nntt// Then, check which
of old attributes got removed.nttfor ( const [ oldKey ] of oldAttributes )
{ntttif ( !this.hasAttribute( oldKey ) ) {nttttchanged.push( oldKey
);nttt}ntt}nntt// Fire event with exact data (fire only if anything
changed).nttif ( changed.length &gt; 0 ) {ntttthis.fire(
&#39;change:attribute&#39;, { attributeKeys: changed, directChange: false }
);ntt}nt}nnt// Internal method for setting `LiveSelection` attribute.
Supports attribute priorities (through `directChange`nt//
parameter).nt//nt// @privatent// @param {String} key Attribute key.nt//
@param {*} value Attribute value.nt// @param {Boolean} [directChange=true]
`true` if the change is caused by `Selection` API, `false` if changent// is
caused by `Batch` API.nt// @returns {Boolean} Whether value has
changed.nt_setAttribute( key, value, directChange = true ) {nttconst
priority = directChange ? &#39;normal&#39; : &#39;low&#39;;nnttif (
priority == &#39;low&#39; &amp;&amp; this._attributePriority.get( key ) ==
&#39;normal&#39; ) {nttt// Priority too low.ntttreturn false;ntt}nnttconst
oldValue = super.getAttribute( key );nntt// Don&#39;t do anything if value
has not changed.nttif ( oldValue === value ) {ntttreturn
false;ntt}nnttthis._attrs.set( key, value );nntt// Update priorities
map.nttthis._attributePriority.set( key, priority );nnttreturn
true;nt}nnt// Internal method for removing `LiveSelection` attribute.
Supports attribute priorities (through `directChange`nt//
parameter).nt//nt// NOTE: Even if attribute is not present in the selection
but is provided to this method, it&#39;s priority willnt// be changed
according to `directChange` parameter.nt//nt// @privatent// @param {String}
key Attribute key.nt// @param {Boolean} [directChange=true] `true` if the
change is caused by `Selection` API, `false` if changent// is caused by
`Batch` API.nt// @returns {Boolean} Whether attribute was removed. May not
be true if such attributes didn&#39;t exist or thent// existing attribute
had higher priority.nt_removeAttribute( key, directChange = true )
{nttconst priority = directChange ? &#39;normal&#39; : &#39;low&#39;;nnttif
( priority == &#39;low&#39; &amp;&amp; this._attributePriority.get( key )
== &#39;normal&#39; ) {nttt// Priority too low.ntttreturn false;ntt}nntt//
Update priorities map.nttthis._attributePriority.set( key, priority
);nntt// Don&#39;t do anything if value has not changed.nttif (
!super.hasAttribute( key ) ) {ntttreturn false;ntt}nnttthis._attrs.delete(
key );nnttreturn true;nt}nnt// Internal method for setting multiple
`LiveSelection` attributes. Supports attribute priorities (throughnt//
`directChange` parameter).nt//nt// @privatent// @param
{Map.&lt;String,*&gt;} attrs Iterable object containing attributes to be
set.nt// @returns {Set.&lt;String&gt;} Changed attribute
keys.nt_setAttributesTo( attrs ) {nttconst changed = new Set();nnttfor (
const [ oldKey, oldValue ] of this.getAttributes() ) {nttt// Do not remove
attribute if attribute with same key and value is about to be set.ntttif (
attrs.get( oldKey ) === oldValue ) {nttttcontinue;nttt}nnttt// All rest
attributes will be removed so changed attributes won&#39;t change
.ntttthis._removeAttribute( oldKey, false );ntt}nnttfor ( const [ key,
value ] of attrs ) {nttt// Attribute may not be set because of attributes
or because same key/value is already added.ntttconst gotAdded =
this._setAttribute( key, value, false );nntttif ( gotAdded )
{nttttchanged.add( key );nttt}ntt}nnttreturn changed;nt}nnt// Returns an
iterable that iterates through all selection attributes stored in current
selection&#39;s parent.nt//nt// @protectednt// @returns
{Iterable.&lt;*&gt;}nt* _getStoredAttributes() {nttconst selectionParent =
this.getFirstPosition().parent;nnttif ( this.isCollapsed &amp;&amp;
selectionParent.isEmpty ) {ntttfor ( const key of
selectionParent.getAttributeKeys() ) {nttttif ( key.startsWith( storePrefix
) ) {ntttttconst realKey = key.substr( storePrefix.length );nntttttyield [
realKey, selectionParent.getAttribute( key ) ];ntttt}nttt}ntt}nt}nnt//
Checks model text nodes that are closest to the selection&#39;s first
position and returns attributes of firstnt// found element. If there are no
text nodes in selection&#39;s first position parent, it returns
selectionnt// attributes stored in that parent.nt//nt// @privatent//
@returns {Iterable.&lt;*&gt;} Collection of
attributes.nt_getSurroundingAttributes() {nttconst position =
this.getFirstPosition();nttconst schema = this._model.schema;nnttlet attrs
= null;nnttif ( !this.isCollapsed ) {nttt// 1. If selection is a
range…ntttconst range = this.getFirstRange();nnttt// …look for a first
character node in that range and take attributes from it.ntttfor ( const
value of range ) {ntttt// If the item is an object, we don&#39;t want to
get attributes from its children.nttttif ( value.item.is( &#39;element&#39;
) &amp;&amp; schema.isObject( value.item ) ) {ntttttbreak;ntttt}nntttt//
This is not an optimal solution because of <a
href="https://github.com/ckeditor/ckeditor5-engine/issues/454.\n\t\t\t\t">github.com/ckeditor/ckeditor5-engine/issues/454.ntttt</a>//
It can be done better by using `break;` instead of checking `attrs ===
null`.nttttif ( value.type == &#39;text&#39; &amp;&amp; attrs === null )
{ntttttattrs = value.item.getAttributes();ntttt}nttt}ntt} else {nttt// 2.
If the selection is a caret or the range does not contain a character
node…nntttconst nodeBefore = position.textNode ? position.textNode :
position.nodeBefore;ntttconst nodeAfter = position.textNode ?
position.textNode : position.nodeAfter;nnttt// When gravity is overridden
then don&#39;t take node before into consideration.ntttif (
!this.isGravityOverridden ) {ntttt// …look at the node before caret and
take attributes from it if it is a character node.nttttattrs =
getAttrsIfCharacter( nodeBefore );nttt}nnttt// 3. If not, look at the node
after caret…ntttif ( !attrs ) {nttttattrs = getAttrsIfCharacter( nodeAfter
);nttt}nnttt// 4. If not, try to find the first character on the left, that
is in the same node.nttt// When gravity is overridden then don&#39;t take
node before into consideration.ntttif ( !this.isGravityOverridden
&amp;&amp; !attrs ) {nttttlet node = nodeBefore;nnttttwhile ( node
&amp;&amp; !attrs ) {ntttttnode = node.previousSibling;ntttttattrs =
getAttrsIfCharacter( node );ntttt}nttt}nnttt// 5. If not found, try to find
the first character on the right, that is in the same node.ntttif ( !attrs
) {nttttlet node = nodeAfter;nnttttwhile ( node &amp;&amp; !attrs )
{ntttttnode = node.nextSibling;ntttttattrs = getAttrsIfCharacter( node
);ntttt}nttt}nnttt// 6. If not found, selection should retrieve attributes
from parent.ntttif ( !attrs ) {nttttattrs =
this._getStoredAttributes();nttt}ntt}nnttreturn attrs;nt}nnt// Fixes a
selection range after it ends up in graveyard root.nt//nt// @privatent//
@param {module:engine/model/liverange~LiveRange} liveRange The range from
selection, that ended up in the graveyard root.nt// @param
{module:engine/model/position~Position} removedRangeStart Start position of
a range which was removed.nt_fixGraveyardSelection( liveRange,
removedRangeStart ) {ntt// The start of the removed range is the closest
position to the `liveRange` - the original selection range.ntt// This is a
good candidate for a fixed selection range.nttconst positionCandidate =
Position.createFromPosition( removedRangeStart );nntt// Find a range that
is a correct selection range and is closest to the start of removed
range.nttconst selectionRange =
this._model.schema.getNearestSelectionRange( positionCandidate );nntt//
Remove the old selection range before preparing and adding new selection
range. This order is important,ntt// because new range, in some cases, may
intersect with old range (it depends on `getNearestSelectionRange()`
result).nttconst index = this._ranges.indexOf( liveRange
);nttthis._ranges.splice( index, 1 );nttliveRange.detach();nntt// If
nearest valid selection range has been found - add it in the place of old
range.nttif ( selectionRange ) {nttt// Check the range, convert it to live
range, bind events, etc.ntttconst newRange = this._prepareRange(
selectionRange );nnttt// Add new range in the place of old
range.ntttthis._ranges.splice( index, 0, newRange );ntt}ntt// If nearest
valid selection range cannot be found - just removing the old range is
fine.nt}n}nn// Helper function for {@link
module:engine/model/liveselection~LiveSelection#_updateAttributes}.n//n//
It takes model item, checks whether it is a text node (or text proxy) and,
if so, returns it&#39;s attributes. If not, returns `null`.n//n// @param
{module:engine/model/item~Item|null}  noden// @returns {Boolean}nfunction
getAttrsIfCharacter( node ) {ntif ( node instanceof TextProxy || node
instanceof Text ) {nttreturn node.getAttributes();nt}nntreturn null;n}nn//
Removes selection attributes from element which is not empty anymore.n//n//
@privaten// @param {module:engine/model/model~Model} modeln// @param
{module:engine/model/batch~Batch} batchnfunction
clearAttributesStoredInElement( model, batch ) {ntconst differ =
model.document.differ;nntfor ( const entry of differ.getChanges() ) {nttif
( entry.type != &#39;insert&#39; ) {ntttcontinue;ntt}nnttconst changeParent
= entry.position.parent;nttconst isNoLongerEmpty = entry.length ===
changeParent.maxOffset;nnttif ( isNoLongerEmpty ) {ntttmodel.enqueueChange(
batch, writer =&gt; {nttttconst storedAttributes = Array.from(
changeParent.getAttributeKeys() )nttttt.filter( key =&gt; key.startsWith(
storePrefix ) );nnttttfor ( const key of storedAttributes )
{ntttttwriter.removeAttribute( key, changeParent );ntttt}nttt}
);ntt}nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/documentselection.jsn// module id = nulln//
module chunks = ”,“import baseClone from &#39;./_baseClone&#39;;nn/**n *
This method is like `_.clone` except that it recursively clones `value`.n
*n * @staticn * @memberOf _n * @since 1.0.0n * @category Langn * @param {*}
value The value to recursively clone.n * @returns {*} Returns the deep
cloned value.n * @see _.clonen * @examplen *n * var objects = [{
&#39;a&#39;: 1 }, { &#39;b&#39;: 2 }];n *n * var deep =
_.cloneDeep(objects);n * <a href="0">console.log(deep</a> === <a
href="0">objects</a>);n * // =&gt; falsen */nfunction cloneDeep(value) {n 
return baseClone(value, true, true);n}nnexport default
cloneDeep;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/cloneDeep.jsn// module id = nulln//
module chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nnimport ModelRange from &#39;../model/range&#39;;nimport ModelSelection
from &#39;../model/selection&#39;;nimport ModelElement from
&#39;../model/element&#39;;nnimport ViewAttributeElement from
&#39;../view/attributeelement&#39;;nimport ViewRange from
&#39;../view/range&#39;;nimport DocumentSelection from
&#39;../model/documentselection&#39;;nnimport cloneDeep from
&#39;@ckeditor/ckeditor5-utils/src/lib/lodash/cloneDeep&#39;;nn/**n *
Contains downcast (model to view) converters for {@link
module:engine/conversion/downcastdispatcher~DowncastDispatcher}.n *n *
@module engine/conversion/downcast-convertersn */nn/**n * Model element to
view element conversion helper.n *n * This conversion results in creating a
view element. For example, model `&lt;paragraph&gt;Foo&lt;/paragraph&gt;`
becomes `&lt;p&gt;Foo&lt;/p&gt;` in the view.n *n
*ttdowncastElementToElement( { model: &#39;paragraph&#39;, view:
&#39;p&#39; } );n *n *ttdowncastElementToElement( { model:
&#39;paragraph&#39;, view: &#39;div&#39;, priority: &#39;high&#39; } );n *n
*ttdowncastElementToElement( {n *tttmodel: &#39;fancyParagraph&#39;,n
*tttview: {n *ttttname: &#39;p&#39;,n *ttttclasses: &#39;fancy&#39;n *ttt}n
*tt} );n *n * ttdowncastElementToElement( {n * tttmodel:
&#39;heading&#39;,n * tttview: ( modelElement, viewWriter ) =&gt;
viewWriter.createContainerElement( &#39;h&#39; + modelElement.getAttribute(
&#39;level&#39; ) )n * tt} );n *n * See {@link
module:engine/conversion/conversion~Conversion#for} to learn how to add
converter to conversion process.n *n * @param {Object} config Conversion
configuration.n * @param {String} config.model Name of the model element to
convert.n * @param
{module:engine/view/elementdefinition~ElementDefinition|Function}
config.view View element definition or a functionn * that takes model
element and view writer as a parameters and returns a view container
element.n * @returns {Function} Conversion helper.n */nexport function
downcastElementToElement( config ) {ntconfig = cloneDeep( config
);nntconfig.view = _normalizeToElementConfig( config.view,
&#39;container&#39; );nntreturn dispatcher =&gt; {nttdispatcher.on(
&#39;insert:&#39; + config.model, insertElement( config.view ), { priority:
config.priority || &#39;normal&#39; } );nt};n}nn/**n * Model attribute to
view element conversion helper.n *n * This conversion results in wrapping
view nodes in a view attribute element. For example, model text node with
datan * `&quot;Foo&quot;` and `bold` attribute becomes
`&lt;strong&gt;Foo&lt;/strong&gt;` in the view.n *n
*ttdowncastAttributeToElement( { model: &#39;bold&#39;, view:
&#39;strong&#39; } );n *n *ttdowncastAttributeToElement( { model:
&#39;bold&#39;, view: &#39;b&#39;, priority: &#39;high&#39; } );n *n
*ttdowncastAttributeToElement( {n *tttmodel: &#39;invert&#39;,n *tttview:
{n *ttttname: &#39;span&#39;,n *ttttclasses: [ &#39;font-light&#39;,
&#39;bg-dark&#39; ]n *ttt}n *tt} );n *n *ttdowncastAttributeToElement( {n
*tttmodel: {n *ttttkey: &#39;fontSize&#39;,n *ttttvalues: [ &#39;big&#39;,
&#39;small&#39; ]n *ttt},n *tttview: {n *ttttbig: {n *tttttname:
&#39;span&#39;,n *tttttstyles: {n *tttttt&#39;font-size&#39;:
&#39;1.2em&#39;n *ttttt}n *tttt},n *ttttsmall: {n *tttttname:
&#39;span&#39;,n *tttttstyles: {n *tttttt&#39;font-size&#39;:
&#39;0.8em&#39;n *ttttt}n *tttt}n *ttt}n *tt} );n *n *
ttdowncastAttributeToElement( {n * tttmodel: &#39;bold&#39;,n * tttview: (
modelAttributeValue, viewWriter ) =&gt; {n * ttttreturn
viewWriter.createAttributeElement( &#39;span&#39;, { style:
&#39;font-weight:&#39; + modelAttributeValue } );n * ttt}n * tt} );n *n
*ttdowncastAttributeToElement( {n *tttmodel: {n *ttttkey: &#39;color&#39;,n
*ttttname: &#39;$text&#39;n *ttt},n *tttview: ( modelAttributeValue,
viewWriter ) =&gt; {n *ttttreturn viewWriter.createAttributeElement(
&#39;span&#39;, { style: &#39;color:&#39; + modelAttributeValue } );n
*ttt}n *tt} );n *n * See {@link
module:engine/conversion/conversion~Conversion#for} to learn how to add
converter to conversion process.n *n * @param {Object} config Conversion
configuration.n * @param {String|Object} config.model Key of the attribute
to convert from or a `{ key, values }` object. `values` is an arrayn * of
`String`s with possible values if the model attribute is enumerable.n *
@param
{module:engine/view/elementdefinition~ElementDefinition|Function|Object}
config.view View element definition or a functionn * that takes model
attribute value and view writer as parameters and returns a view attribute
element. If `config.model.values` isn * given, `config.view` should be an
object assigning values from `config.model.values` to view element
definitions or functions.n * @param
{module:utils/priorities~PriorityString} [config.priority=&#39;normal&#39;]
Converter priority.n * @returns {Function} Conversion helper.n */nexport
function downcastAttributeToElement( config ) {ntconfig = cloneDeep( config
);nntconst modelKey = config.model.key ? config.model.key :
config.model;ntlet eventName = &#39;attribute:&#39; + modelKey;nntif (
config.model.name ) {ntteventName += &#39;:&#39; +
config.model.name;nt}nntif ( config.model.values ) {nttfor ( const
modelValue of config.model.values ) {ntttconfig.view[ modelValue ] =
_normalizeToElementConfig( config.view[ modelValue ], &#39;attribute&#39;
);ntt}nt} else {nttconfig.view = _normalizeToElementConfig( config.view,
&#39;attribute&#39; );nt}nntconst elementCreator =
_getFromAttributeCreator( config );nntreturn dispatcher =&gt;
{nttdispatcher.on( eventName, wrap( elementCreator ), { priority:
config.priority || &#39;normal&#39; } );nt};n}nn/**n * Model attribute to
view attribute conversion helper.n *n * This conversion results in adding
an attribute on a view node, basing on an attribute from a model node. For
example,n * `&lt;image src=&#39;foo.jpg&#39;&gt;&lt;/image&gt;` is
converted to `&lt;img src=&#39;foo.jpg&#39;&gt;&lt;/img&gt;`.n *n
*ttdowncastAttributeToAttribute( { model: &#39;source&#39;, view:
&#39;src&#39; } );n *n *ttdowncastAttributeToAttribute( { model:
&#39;source&#39;, view: &#39;href&#39;, priority: &#39;high&#39; } );n *n
*ttdowncastAttributeToAttribute( {n *tttmodel: {n *ttttname:
&#39;image&#39;,n *ttttkey: &#39;source&#39;n *ttt},n *tttview:
&#39;src&#39;n *tt} );n *n *ttdowncastAttributeToAttribute( {n *tttmodel:
{n *ttttname: &#39;styled&#39;,n *ttttvalues: [ &#39;dark&#39;,
&#39;light&#39; ]n *ttt},n *tttview: {n *ttttdark: {n *tttttkey:
&#39;class&#39;,n *tttttvalue: [ &#39;styled&#39;, &#39;styled-dark&#39; ]n
*tttt},n *ttttlight: {n *tttttkey: &#39;class&#39;,n *tttttvalue: [
&#39;styled&#39;, &#39;styled-light&#39; ]n *tttt}n *ttt}n *tt} );n *n
*ttdowncastAttributeToAttribute( {n *tttmodel: &#39;styled&#39;,n *tttview:
modelAttributeValue =&gt; ( { key: &#39;class&#39;, value:
&#39;styled-&#39; + modelAttributeValue } )n *tt} );n *n * See {@link
module:engine/conversion/conversion~Conversion#for} to learn how to add
converter to conversion process.n *n * @param {Object} config Conversion
configuration.n * @param {String|Object} config.model Key of the attribute
to convert from or a `{ key, values, [ name ] }` object describingn * the
attribute key, possible values and, optionally, an element name to convert
from.n * @param {String|Object|Function} config.view View attribute key, or
a `{ key, value }` object or a function that takesn * model attribute value
and returns a `{ key, value }` object. If `key` is `&#39;class&#39;`,
`value` can be a `String` or ann * array of `String`s. If `key` is
`&#39;style&#39;`, `value` is an object with key-value pairs. In other
cases, `value` is a `String`.n * If `config.model.values` is set,
`config.view` should be an object assigning values from
`config.model.values` ton * `{ key, value }` objects or a functions.n *
@param {module:utils/priorities~PriorityString}
[config.priority=&#39;normal&#39;] Converter priority.n * @returns
{Function} Conversion helper.n */nexport function
downcastAttributeToAttribute( config ) {ntconfig = cloneDeep( config
);nntconst modelKey = config.model.key ? config.model.key :
config.model;ntlet eventName = &#39;attribute:&#39; + modelKey;nntif (
config.model.name ) {ntteventName += &#39;:&#39; +
config.model.name;nt}nntif ( config.model.values ) {nttfor ( const
modelValue of config.model.values ) {ntttconfig.view[ modelValue ] =
_normalizeToAttributeConfig( config.view[ modelValue ] );ntt}nt} else
{nttconfig.view = _normalizeToAttributeConfig( config.view );nt}nntconst
elementCreator = _getFromAttributeCreator( config );nntreturn dispatcher
=&gt; {nttdispatcher.on( eventName, changeAttribute( elementCreator ), {
priority: config.priority || &#39;normal&#39; } );nt};n}nn/**n * Model
marker to view element conversion helper.n *n * This conversion results in
creating a view element on the boundaries of the converted marker. If
converted markern * is collapsed, only one element is created. For example,
model marker set like this `&lt;paragraph&gt;F[oo b]ar&lt;/paragraph&gt;`n
* becomes `&lt;p&gt;F&lt;span
data-marker=&quot;search&quot;&gt;&lt;/span&gt;oo b&lt;span
data-marker=&quot;search&quot;&gt;&lt;/span&gt;ar&lt;/p&gt;` in the view.n
*n *ttdowncastMarkerToElement( { model: &#39;search&#39;, view:
&#39;marker-search&#39; } );n *n *ttdowncastMarkerToElement( { model:
&#39;search&#39;, view: &#39;search-result&#39;, priority: &#39;high&#39; }
);n *n *ttdowncastMarkerToElement( {n *tttmodel: &#39;search&#39;,n
*tttview: {n *ttttname: &#39;span&#39;,n *ttttattributes: {n
*ttttt&#39;data-marker&#39;: &#39;search&#39;n *tttt}n *ttt}n *tt} );n *n *
ttdowncastMarkerToElement( {n * tttmodel: &#39;search&#39;,n * tttview: (
markerData, viewWriter ) =&gt; {n *t tttreturn viewWriter.createUIElement(
&#39;span&#39;, { &#39;data-marker&#39;: &#39;search&#39;,
&#39;data-start&#39;: markerData.isOpening } );n * ttt}n * tt} );n *n * If
function is passed as `config.view` parameter, it will be used to generate
both boundary elements. The functionn * receives `data` object as parameter
and should return an instance of {@link
module:engine/view/uielement~UIElement view.UIElement}.n * The `data` and
`conversionApi` objects are passed fromn * {@link
module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:addMarker}.
Additionally,n * `data.isOpening` parameter is passed, which is set to
`true` for marker start boundary element, and `false` ton * marker end
boundary element.n *n * This kind of conversion is useful for saving data
into data base, so it should be used in data conversion pipeline.n *n * See
{@link module:engine/conversion/conversion~Conversion#for} to learn how to
add converter to conversion process.n *n * @param {Object} config
Conversion configuration.n * @param {String} config.model Name of the model
marker (or model marker group) to convert.n * @param
{module:engine/view/elementdefinition~ElementDefinition|Function}
config.view View element definition or a functionn * that takes model
marker data as a parameter and returns view ui element.n * @param
{module:utils/priorities~PriorityString} [config.priority=&#39;normal&#39;]
Converter priority.n * @returns {Function} Conversion helper.n */nexport
function downcastMarkerToElement( config ) {ntconfig = cloneDeep( config
);nntconfig.view = _normalizeToElementConfig( config.view, &#39;ui&#39;
);nntreturn dispatcher =&gt; {nttdispatcher.on( &#39;addMarker:&#39; +
config.model, insertUIElement( config.view ), { priority: config.priority
|| &#39;normal&#39; } );nttdispatcher.on( &#39;removeMarker:&#39; +
config.model, removeUIElement( config.view ), { priority: config.priority
|| &#39;normal&#39; } );nt};n}nn/**n * Model marker to highlight conversion
helper.n *n * This conversion results in creating a highlight on view
nodes. For this kind of conversion,n * {@link
module:engine/conversion/downcast-converters~HighlightDescriptor} should be
provided.n *n * For text nodes, a `span` {@link
module:engine/view/attributeelement~AttributeElement} is created and it
wraps all text nodesn * in the converted marker range. For example, model
marker set like this `&lt;paragraph&gt;F[oo b]ar&lt;/paragraph&gt;`
becomesn * `&lt;p&gt;F&lt;span class=&quot;comment&quot;&gt;oo
b&lt;/span&gt;ar&lt;/p&gt;` in the view.n *n * {@link
module:engine/view/containerelement~ContainerElement} may provide custom
way of handling highlight. Most often,n * the element itself is given
classes and attributes described in the highlight descriptor (instead of
being wrapped in `span`).n * For example, model marker set like this
`[&lt;image src=&quot;foo.jpg&quot;&gt;&lt;/image&gt;]` becomes `&lt;img
src=&quot;foo.jpg&quot; class=&quot;comment&quot;&gt;&lt;/img&gt;`n * in
the view.n *n * For container elements, the conversion is two-step. While
the converter processes highlight descriptor and passes itn * to a
container element, it is the container element instance itself which
applies values from highlight descriptor.n * So, in a sense, converter
takes care of stating what should be applied on what, while element decides
how to apply that.n *n *ttdowncastMarkerToHighlight( { model:
&#39;comment&#39;, view: { classes: &#39;comment&#39; } } );n *n
*ttdowncastMarkerToHighlight( { model: &#39;comment&#39;, view: { classes:
&#39;new-comment&#39; }, priority: &#39;high&#39; } );n *n *
ttdowncastMarkerToHighlight( {n * tttmodel: &#39;comment&#39;,n * tttview:
data =&gt; {n * tttt// Assuming that marker name is in a form of
comment:commentType.n *t tttconst commentType = data.markerName.split(
&#39;:&#39; )[ 1 ];n *n *t tttreturn {n *t ttttclasses: [
&#39;comment&#39;, &#39;comment-&#39; + commentType ]n *t ttt};n * ttt}n *
tt} );n *n * If function is passed as `config.view` parameter, it will be
used to generate highlight descriptor. The functionn * receives `data`
object as parameter and should return a {@link
module:engine/conversion/downcast-converters~HighlightDescriptor}.n * The
`data` object properties are passed from {@link
module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:addMarker}.n
*n * See {@link module:engine/conversion/conversion~Conversion#for} to
learn how to add converter to conversion process.n *n * @param {Object}
config Conversion configuration.n * @param {String} config.model Name of
the model marker (or model marker group) to convert.n * @param
{module:engine/conversion/downcast-converters~HighlightDescriptor|Function}
config.view Highlight descriptorn * which will be used for highlighting or
a function that takes model marker data as a parameter and returns a
highlight descriptor.n * @param {module:utils/priorities~PriorityString}
[config.priority=&#39;normal&#39;] Converter priority.n * @returns
{Function} Conversion helper.n */nexport function
downcastMarkerToHighlight( config ) {ntreturn dispatcher =&gt;
{nttdispatcher.on( &#39;addMarker:&#39; + config.model, highlightText(
config.view ), { priority: config.priority || &#39;normal&#39; }
);nttdispatcher.on( &#39;addMarker:&#39; + config.model, highlightElement(
config.view ), { priority: config.priority || &#39;normal&#39; }
);nttdispatcher.on( &#39;removeMarker:&#39; + config.model,
removeHighlight( config.view ), { priority: config.priority ||
&#39;normal&#39; } );nt};n}nn// Takes `config.view`, and if it is a {@link
module:engine/view/elementdefinition~ElementDefinition}, converts itn// to
a function (because lower level converters accepts only element creator
functions).n//n// @param
{module:engine/view/elementdefinition~ElementDefinition|Function} view View
configuration.n// @param
{&#39;container&#39;|&#39;attribute&#39;|&#39;ui&#39;} viewElementType View
element type to create.n// @returns {Function} Element creator function to
use in lower level converters.nfunction _normalizeToElementConfig( view,
viewElementType ) {ntif ( typeof view == &#39;function&#39; ) {ntt// If
`view` is already a function, don&#39;t do anything.nttreturn
view;nt}nntreturn ( modelData, viewWriter ) =&gt;
_createViewElementFromDefinition( view, viewWriter, viewElementType
);n}nn// Creates view element instance from provided viewElementDefinition
and class.n//n// @param
{module:engine/view/elementdefinition~ElementDefinition}
viewElementDefinitionn// @param {module:engine/view/writer~Writer}
viewWritern// @param {&#39;container&#39;|&#39;attribute&#39;|&#39;ui&#39;}
viewElementTypen// @returns {module:engine/view/element~Element}nfunction
_createViewElementFromDefinition( viewElementDefinition, viewWriter,
viewElementType ) {ntif ( typeof viewElementDefinition == &#39;string&#39;
) {ntt// If `viewElementDefinition` is given as a `String`, normalize it to
an object with `name` property.nttviewElementDefinition = { name:
viewElementDefinition };nt}nntlet element;nntif ( viewElementType ==
&#39;container&#39; ) {nttelement = viewWriter.createContainerElement(
viewElementDefinition.name, Object.assign( {},
viewElementDefinition.attributes ) );nt} else if ( viewElementType ==
&#39;attribute&#39; ) {nttelement = viewWriter.createAttributeElement(
viewElementDefinition.name, Object.assign( {},
viewElementDefinition.attributes ) );nt} else {ntt//
&#39;ui&#39;.nttelement = viewWriter.createUIElement(
viewElementDefinition.name, Object.assign( {},
viewElementDefinition.attributes ) );nt}nntif (
viewElementDefinition.styles ) {nttconst keys = Object.keys(
viewElementDefinition.styles );nnttfor ( const key of keys )
{ntttviewWriter.setStyle( key, viewElementDefinition.styles[ key ], element
);ntt}nt}nntif ( viewElementDefinition.classes ) {nttconst classes =
viewElementDefinition.classes;nnttif ( typeof classes == &#39;string&#39; )
{ntttviewWriter.addClass( classes, element );ntt} else {ntttfor ( const
className of classes ) {nttttviewWriter.addClass( className, element
);nttt}ntt}nt}nntreturn element;n}nnfunction _getFromAttributeCreator(
config ) {ntif ( config.model.values ) {nttreturn ( modelAttributeValue,
viewWriter ) =&gt; {ntttconst view = config.view[ modelAttributeValue
];nntttif ( view ) {nttttreturn view( modelAttributeValue, viewWriter
);nttt}nntttreturn null;ntt};nt} else {nttreturn config.view;nt}n}nn//
Takes config and adds default parameters if they don&#39;t exist and
normalizes other parameters to be used in downcast convertersn// for
generating view attribute.n//n// @param {Object} view View
configuration.nfunction _normalizeToAttributeConfig( view ) {ntif ( typeof
view == &#39;string&#39; ) {nttreturn modelAttributeValue =&gt; ( { key:
view, value: modelAttributeValue } );nt} else if ( typeof view ==
&#39;object&#39; ) {ntt// { key, value, … }nttif ( view.value ) {ntttreturn
() =&gt; view;ntt}ntt// { key, … }nttelse {ntttreturn modelAttributeValue
=&gt; ( { key: view.key, value: modelAttributeValue } );ntt}nt} else {ntt//
function.nttreturn view;nt}n}nn/**n * Function factory, creates a converter
that converts node insertion changes from the model to the view.n * Passed
function will be provided with all the parameters of the dispatcher&#39;sn
* {@link
module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:insert
insert event}.n * It&#39;s expected that the function returns a {@link
module:engine/view/element~Element}.n * The result of the function will be
inserted to the view.n *n * The converter automatically consumes
corresponding value from consumables list, stops the event (seen * {@link
module:engine/conversion/downcastdispatcher~DowncastDispatcher}) and bind
model and view elements.n *n *ttdowncastDispatcher.on(n
*ttt&#39;insert:myElem&#39;,n *tttinsertElement( ( modelItem, viewWriter )
=&gt; {n *ttttconst text = viewWriter.createText( &#39;myText&#39; );n
*ttttconst myElem = viewWriter.createElement( &#39;myElem&#39;, { myAttr:
&#39;my-&#39; + modelItem.getAttribute( &#39;myAttr&#39; ) }, text );n *n
*tttt// Do something fancy with myElem using `modelItem` or other
parameters.n *n *ttttreturn myElem;n *ttt}n *tt) );n *n * @param {Function}
elementCreator Function returning a view element, which will be inserted.n
* @returns {Function} Insert element event converter.n */nexport function
insertElement( elementCreator ) {ntreturn ( evt, data, conversionApi )
=&gt; {nttconst viewElement = elementCreator( data.item,
conversionApi.writer );nnttif ( !viewElement ) {ntttreturn;ntt}nnttif (
!conversionApi.consumable.consume( data.item, &#39;insert&#39; ) )
{ntttreturn;ntt}nnttconst viewPosition =
conversionApi.mapper.toViewPosition( data.range.start
);nnttconversionApi.mapper.bindElements( data.item, viewElement
);nttconversionApi.writer.insert( viewPosition, viewElement );nt};n}nn/**n
* Function factory, creates a default downcast converter for text insertion
changes.n *n * The converter automatically consumes corresponding value
from consumables list and stops the event (seen * {@link
module:engine/conversion/downcastdispatcher~DowncastDispatcher}).n *n
*ttmodelDispatcher.on( &#39;insert:$text&#39;, insertText() );n *n *
@returns {Function} Insert text event converter.n */nexport function
insertText() {ntreturn ( evt, data, conversionApi ) =&gt; {nttif (
!conversionApi.consumable.consume( data.item, &#39;insert&#39; ) )
{ntttreturn;ntt}nnttconst viewWriter = conversionApi.writer;nttconst
viewPosition = conversionApi.mapper.toViewPosition( data.range.start
);nttconst viewText = viewWriter.createText( data.item.data
);nnttviewWriter.insert( viewPosition, viewText );nt};n}nn/**n * Function
factory, creates a default downcast converter for node remove changes.n *n
*ttmodelDispatcher.on( &#39;remove&#39;, remove() );n *n * @returns
{Function} Remove event converter.n */nexport function remove() {ntreturn (
evt, data, conversionApi ) =&gt; {ntt// Find view range start position by
mapping model position at which the remove happened.nttconst viewStart =
conversionApi.mapper.toViewPosition( data.position );nnttconst modelEnd =
data.position.getShiftedBy( data.length );nttconst viewEnd =
conversionApi.mapper.toViewPosition( modelEnd, { isPhantom: true }
);nnttconst viewRange = new ViewRange( viewStart, viewEnd );nntt// Trim the
range to remove in case some UI elements are on the view range
boundaries.nttconst removed = conversionApi.writer.remove(
viewRange.getTrimmed() );nntt// After the range is removed, unbind all view
elements from the model.ntt// Range inside view document fragment is used
to unbind deeply.nttfor ( const child of ViewRange.createIn( removed
).getItems() ) {ntttconversionApi.mapper.unbindViewElement( child
);ntt}nt};n}nn/**n * Function factory, creates a converter that converts
marker adding change to the view ui element.n *n * The view ui element,
that will be added to the view, depends on passed parameter. See {@link
~insertElement}.n * In a case of a non-collapsed range, the ui element will
not wrap nodes but separate elements will be placed at the beginningn * and
at the end of the range.n *n * This converter binds created {@link
module:engine/view/uielement~UIElement}s with marker name usingn * the
{@link module:engine/conversion/mapper~Mapper#bindElementToMarker}.n *n *
@param {module:engine/view/uielement~UIElement|Function} elementCreator
View ui element or a function returning a view elementn * which will be
inserted.n * @returns {Function} Insert element event converter.n */nexport
function insertUIElement( elementCreator ) {ntreturn ( evt, data,
conversionApi ) =&gt; {ntt// Create two view elements. One will be inserted
at the beginning of marker, one at the end.ntt// If marker is collapsed,
only "opening&quot; element will be inserted.nttdata.isOpening =
true;nttconst viewStartElement = elementCreator( data, conversionApi.writer
);nnttdata.isOpening = false;nttconst viewEndElement = elementCreator(
data, conversionApi.writer );nnttif ( !viewStartElement || !viewEndElement
) {ntttreturn;ntt}nnttconst markerRange = data.markerRange;nntt// Marker
that is collapsed has consumable build differently that non-collapsed
one.ntt// For more information see `addMarker` event description.ntt// If
marker&#39;s range is collapsed - check if it can be consumed.nttif (
markerRange.isCollapsed &amp;&amp; !conversionApi.consumable.consume(
markerRange, evt.name ) ) {ntttreturn;ntt}nntt// If marker&#39;s range is
not collapsed - consume all items inside.nttfor ( const value of
markerRange ) {ntttif ( !conversionApi.consumable.consume( value.item,
evt.name ) ) {nttttreturn;nttt}ntt}nnttconst mapper =
conversionApi.mapper;nttconst viewWriter = conversionApi.writer;nntt// Add
"opening&quot; element.nttviewWriter.insert( mapper.toViewPosition(
markerRange.start ), viewStartElement
);nttconversionApi.mapper.bindElementToMarker( viewStartElement,
data.markerName );nntt// Add "closing&quot; element only if range is not
collapsed.nttif ( !markerRange.isCollapsed ) {ntttviewWriter.insert(
mapper.toViewPosition( markerRange.end ), viewEndElement
);ntttconversionApi.mapper.bindElementToMarker( viewEndElement,
data.markerName );ntt}nnttevt.stop();nt};n}nn/**n * Function factory,
returns a default downcast converter for removing {@link
module:engine/view/uielement~UIElement ui element}n * basing on marker
remove change.n *n * This converter unbinds elements from marker name.n *n
* @returns {Function} Remove ui element converter.n */nexport function
removeUIElement() {ntreturn ( evt, data, conversionApi ) =&gt; {nttconst
elements = conversionApi.mapper.markerNameToElements( data.markerName
);nnttif ( !elements )
{ntttreturn;ntt}nnttconversionApi.mapper.unbindElementsFromMarkerName(
data.markerName );nnttconst viewWriter = conversionApi.writer;nnttfor (
const element of elements ) {ntttviewWriter.clear( ViewRange.createOn(
element ), element );ntt}nnttevt.stop();nt};n}nn/**n * Function factory,
creates a converter that converts set/change/remove attribute changes from
the model to the view.n *n * Attributes from model are converted to the
view element attributes in the view. You may provide a custom function to
generaten * a key-value attribute pair to add/change/remove. If not
provided, model attributes will be converted to view elementsn * attributes
on 1-to-1 basis.n *n * *Note:* Provided attribute creator should always
return the same `key` for given attribute from the model.n *n * The
converter automatically consumes corresponding value from consumables list
and stops the event (seen * {@link
module:engine/conversion/downcastdispatcher~DowncastDispatcher}).n *n
*ttmodelDispatcher.on( &#39;attribute:customAttr:myElem&#39;,
changeAttribute( ( value, data ) =&gt; {n *ttt// Change attribute key from
`customAttr` to `class` in view.n *tttconst key = &#39;class&#39;;n *tttlet
value = data.attributeNewValue;n *n *ttt// Force attribute value to
&#39;empty&#39; if the model element is empty.n *tttif (
data.item.childCount === 0 ) {n *ttttvalue = &#39;empty&#39;;n *ttt}n *n
*ttt// Return key-value pair.n *tttreturn { key, value };n *tt} ) );n *n *
@param {Function} [attributeCreator] Function returning an object with two
properties: `key` and `value`, whichn * represents attribute key and
attribute value to be set on a {@link module:engine/view/element~Element
view element}.n * The function is passed model attribute value as first
parameter and additional data about the change as a second parameter.n *
@returns {Function} Set/change attribute converter.n */nexport function
changeAttribute( attributeCreator ) {ntattributeCreator = attributeCreator
|| ( ( value, data ) =&gt; ( { value, key: data.attributeKey } )
);nntreturn ( evt, data, conversionApi ) =&gt; {nttconst oldAttribute =
attributeCreator( data.attributeOldValue, data );nttconst newAttribute =
attributeCreator( data.attributeNewValue, data );nnttif ( !oldAttribute
&amp;&amp; !newAttribute ) {ntttreturn;ntt}nnttif (
!conversionApi.consumable.consume( data.item, evt.name ) )
{ntttreturn;ntt}nnttconst viewElement = conversionApi.mapper.toViewElement(
data.item );nttconst viewWriter = conversionApi.writer;nntt// First remove
the old attribute if there was one.nttif ( data.attributeOldValue !== null
&amp;&amp; oldAttribute ) {ntttif ( oldAttribute.key == &#39;class&#39; )
{nttttconst classes = Array.isArray( oldAttribute.value ) ?
oldAttribute.value : [ oldAttribute.value ];nnttttfor ( const className of
classes ) {ntttttviewWriter.removeClass( className, viewElement
);ntttt}nttt} else if ( oldAttribute.key == &#39;style&#39; ) {nttttconst
keys = Object.keys( oldAttribute.value );nnttttfor ( const key of keys )
{ntttttviewWriter.removeStyle( key, viewElement );ntttt}nttt} else
{nttttviewWriter.removeAttribute( oldAttribute.key, viewElement
);nttt}ntt}nntt// Then set the new attribute.nttif ( data.attributeNewValue
!== null &amp;&amp; newAttribute ) {ntttif ( newAttribute.key ==
&#39;class&#39; ) {nttttconst classes = Array.isArray( newAttribute.value )
? newAttribute.value : [ newAttribute.value ];nnttttfor ( const className
of classes ) {ntttttviewWriter.addClass( className, viewElement
);ntttt}nttt} else if ( newAttribute.key == &#39;style&#39; ) {nttttconst
keys = Object.keys( newAttribute.value );nnttttfor ( const key of keys )
{ntttttviewWriter.setStyle( key, newAttribute.value[ key ], viewElement
);ntttt}nttt} else {nttttviewWriter.setAttribute( newAttribute.key,
newAttribute.value, viewElement );nttt}ntt}nt};n}nn/**n * Function factory,
creates a converter that converts set/change/remove attribute changes from
the model to the view.n * Also can be used to convert selection attributes.
In that case, an empty attribute element will be created and then *
selection will be put inside it.n *n * Attributes from model are converted
to a view element that will be wrapping those view nodes that are bound ton
* model elements having given attribute. This is useful for attributes like
`bold`, which may be set on text nodes in modeln * but are represented as
an element in the view:n *n *<a href=”paragraph“>tt</a>              MODEL
====&gt; VIEW        &lt;p&gt;n *ttt|- a {bold: true}                      
|- &lt;b&gt;n *ttt|- b {bold: true}                             |   |- abn
*ttt|- c                                          |- cn *n * Passed
`Function` will be provided with attribute value and then all the
parameters of then * {@link
module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:attribute
attribute event}.n * It&#39;s expected that the function returns a {@link
module:engine/view/element~Element}.n * The result of the function will be
the wrapping element.n * When provided `Function` does not return element,
then will be no conversion.n *n * The converter automatically consumes
corresponding value from consumables list, stops the event (seen * {@link
module:engine/conversion/downcastdispatcher~DowncastDispatcher}).n *n
*ttmodelDispatcher.on( &#39;attribute:bold&#39;, wrapItem( (
modelAttributeValue, viewWriter ) =&gt; {n *tttreturn
viewWriter.createAttributeElement( &#39;strong&#39; );n *tt} );n *n *
@param {Function} elementCreator Function returning a view element, which
will be used for wrapping.n * @returns {Function} Set/change attribute
converter.n */nexport function wrap( elementCreator ) {ntreturn ( evt,
data, conversionApi ) =&gt; {ntt// Recreate current wrapping node. It will
be used to unwrap view range if the attribute value has changedntt// or the
attribute was removed.nttconst oldViewElement = elementCreator(
data.attributeOldValue, conversionApi.writer );nntt// Create node to wrap
with.nttconst newViewElement = elementCreator( data.attributeNewValue,
conversionApi.writer );nnttif ( !oldViewElement &amp;&amp; !newViewElement
) {ntttreturn;ntt}nnttif ( !conversionApi.consumable.consume( data.item,
evt.name ) ) {ntttreturn;ntt}nnttconst viewWriter =
conversionApi.writer;nttconst viewSelection =
viewWriter.document.selection;nnttif ( data.item instanceof ModelSelection
|| data.item instanceof DocumentSelection ) {nttt// Selection attribute
conversion.ntttviewWriter.wrap( viewSelection.getFirstRange(),
newViewElement );ntt} else {nttt// Node attribute conversion.ntttlet
viewRange = conversionApi.mapper.toViewRange( data.range );nnttt// First,
unwrap the range from current wrapper.ntttif ( data.attributeOldValue !==
null &amp;&amp; oldViewElement ) {nttttviewRange = viewWriter.unwrap(
viewRange, oldViewElement );nttt}nntttif ( data.attributeNewValue !== null
&amp;&amp; newViewElement ) {nttttviewWriter.wrap( viewRange,
newViewElement );nttt}ntt}nt};n}nn/**n * Function factory, creates
converter that converts text inside marker&#39;s range. Converter wraps the
text withn * {@link module:engine/view/attributeelement~AttributeElement}
created from provided descriptor.n * See {link
module:engine/conversion/downcast-converters~createViewElementFromHighlightDescriptor}.n
*n * Also can be used to convert selection that is inside a marker. In that
case, an empty attribute element will ben * created and the selection will
be put inside it.n *n * If the highlight descriptor will not provide
`priority` property, `10` will be used.n *n * If the highlight descriptor
will not provide `id` property, name of the marker will be used.n *n * This
converter binds created {@link
module:engine/view/attributeelement~AttributeElement}s with marker name
usingn * the {@link
module:engine/conversion/mapper~Mapper#bindElementToMarker}.n *n * @param
{module:engine/conversion/downcast-converters~HighlightDescriptor|Function}
highlightDescriptorn * @return {Function}n */nexport function
highlightText( highlightDescriptor ) {ntreturn ( evt, data, conversionApi )
=&gt; {nttif ( data.markerRange.isCollapsed ) {ntttreturn;ntt}nnttif ( !(
data.item instanceof ModelSelection || data.item instanceof
DocumentSelection ) &amp;&amp; !data.item.is( &#39;textProxy&#39; ) )
{ntttreturn;ntt}nnttconst descriptor = _prepareDescriptor(
highlightDescriptor, data, conversionApi );nnttif ( !descriptor )
{ntttreturn;ntt}nnttif ( !conversionApi.consumable.consume( data.item,
evt.name ) ) {ntttreturn;ntt}nnttconst viewElement =
createViewElementFromHighlightDescriptor( descriptor );nttconst viewWriter
= conversionApi.writer;nttconst viewSelection =
viewWriter.document.selection;nnttif ( data.item instanceof ModelSelection
|| data.item instanceof DocumentSelection ) {ntttviewWriter.wrap(
viewSelection.getFirstRange(), viewElement, viewSelection );ntt} else
{ntttconst viewRange = conversionApi.mapper.toViewRange( data.range
);ntttconst rangeAfterWrap = viewWriter.wrap( viewRange, viewElement
);nntttfor ( const element of rangeAfterWrap.getItems() ) {nttttif (
element.is( &#39;attributeElement&#39; ) &amp;&amp; element.isSimilar(
viewElement ) ) {ntttttconversionApi.mapper.bindElementToMarker( element,
data.markerName );nnttttt// One attribute element is enough, because all of
them are bound together by the view writer.nttttt// Mapper uses this
binding to get all the elements no matter how many of them are registered
in the mapper.ntttttbreak;ntttt}nttt}ntt}nt};n}nn/**n * Converter function
factory. Creates a function which applies the marker&#39;s highlight to an
element inside the marker&#39;s range.n *n * The converter checks if an
element has `addHighlight` function stored asn * {@link
module:engine/view/element~Element#_setCustomProperty custom property} and,
if so, uses it to apply the highlight.n * In such case converter will
consume all element&#39;s children, assuming that they were handled by
element itself.n *n * When `addHighlight` custom property is not present,
element is not converted in any special way.n * This means that converters
will proceed to convert element&#39;s child nodes.n *n * If the highlight
descriptor will not provide `priority` property, `10` will be used.n *n *
If the highlight descriptor will not provide `id` property, name of the
marker will be used.n *n * This converter binds altered {@link
module:engine/view/containerelement~ContainerElement}s with marker name
usingn * the {@link
module:engine/conversion/mapper~Mapper#bindElementToMarker}.n *n * @param
{module:engine/conversion/downcast-converters~HighlightDescriptor|Function}
highlightDescriptorn * @return {Function}n */nexport function
highlightElement( highlightDescriptor ) {ntreturn ( evt, data,
conversionApi ) =&gt; {nttif ( data.markerRange.isCollapsed )
{ntttreturn;ntt}nnttif ( !( data.item instanceof ModelElement ) )
{ntttreturn;ntt}nnttconst descriptor = _prepareDescriptor(
highlightDescriptor, data, conversionApi );nnttif ( !descriptor )
{ntttreturn;ntt}nnttif ( !conversionApi.consumable.test( data.item,
evt.name ) ) {ntttreturn;ntt}nnttconst viewElement =
conversionApi.mapper.toViewElement( data.item );nnttif ( viewElement
&amp;&amp; viewElement.getCustomProperty( &#39;addHighlight&#39; ) )
{nttt// Consume element itself.ntttconversionApi.consumable.consume(
data.item, evt.name );nnttt// Consume all children nodes.ntttfor ( const
value of ModelRange.createIn( data.item ) )
{nttttconversionApi.consumable.consume( value.item, evt.name
);nttt}nntttviewElement.getCustomProperty( &#39;addHighlight&#39; )(
viewElement, descriptor, conversionApi.writer
);nntttconversionApi.mapper.bindElementToMarker( viewElement,
data.markerName );ntt}nt};n}nn/**n * Function factory, creates a converter
that converts removing model marker to the view.n *n * Both text nodes and
elements are handled by this converter but they are handled a bit
differently.n *n * Text nodes are unwrapped using {@link
module:engine/view/attributeelement~AttributeElement} created from
providedn * highlight descriptor. See {link
module:engine/conversion/downcast-converters~highlightDescriptorToAttributeElement}.n
*n * For elements, the converter checks if an element has `removeHighlight`
function stored asn * {@link
module:engine/view/element~Element#_setCustomProperty custom property}. If
so, it uses it to remove the highlight.n * In such case, children of that
element will not be converted.n *n * When `removeHighlight` is not present,
element is not converted in any special way.n * Instead converter will
proceed to convert element&#39;s child nodes.n *n * If the highlight
descriptor will not provide `priority` property, `10` will be used.n *n *
If the highlight descriptor will not provide `id` property, name of the
marker will be used.n *n * This converter unbinds elements from marker
name.n *n * @param
{module:engine/conversion/downcast-converters~HighlightDescriptor|Function}
highlightDescriptorn * @return {Function}n */nexport function
removeHighlight( highlightDescriptor ) {ntreturn ( evt, data, conversionApi
) =&gt; {ntt// This conversion makes sense only for non-collapsed
range.nttif ( data.markerRange.isCollapsed ) {ntttreturn;ntt}nnttconst
descriptor = _prepareDescriptor( highlightDescriptor, data, conversionApi
);nnttif ( !descriptor ) {ntttreturn;ntt}nntt// View element that will be
used to unwrap `AttributeElement`s.nttconst viewHighlightElement =
createViewElementFromHighlightDescriptor( descriptor );nntt// Get all
elements bound with given marker name.nttconst elements =
conversionApi.mapper.markerNameToElements( data.markerName );nnttif (
!elements )
{ntttreturn;ntt}nnttconversionApi.mapper.unbindElementsFromMarkerName(
data.markerName );nnttfor ( const element of elements ) {ntttif (
element.is( &#39;attributeElement&#39; ) )
{nttttconversionApi.writer.unwrap( ViewRange.createOn( element ),
viewHighlightElement );nttt} else {ntttt// if element.is(
&#39;containerElement&#39; ).nttttelement.getCustomProperty(
&#39;removeHighlight&#39; )( element, descriptor.id, conversionApi.writer
);nttt}ntt}nnttevt.stop();nt};n}nn// Helper function for `highlight`.
Prepares the actual descriptor object using value passed to the
converter.nfunction _prepareDescriptor( highlightDescriptor, data,
conversionApi ) {nt// If passed descriptor is a creator function, call it.
If not, just use passed value.ntconst descriptor = typeof
highlightDescriptor == &#39;function&#39; ?ntthighlightDescriptor( data,
conversionApi ) :ntthighlightDescriptor;nntif ( !descriptor ) {nttreturn
null;nt}nnt// Apply default descriptor priority.ntif ( !descriptor.priority
) {nttdescriptor.priority = 10;nt}nnt// Default descriptor id is marker
name.ntif ( !descriptor.id ) {nttdescriptor.id =
data.markerName;nt}nntreturn descriptor;n}nn/**n * Creates `span` {@link
module:engine/view/attributeelement~AttributeElement view attribute
element} from informationn * provided by {@link
module:engine/conversion/downcast-converters~HighlightDescriptor} object.
If priorityn * is not provided in descriptor - default priority will be
used.n *n * @param
{module:engine/conversion/downcast-converters~HighlightDescriptor}
descriptorn * @returns
{module:engine/view/attributeelement~AttributeElement}n */nexport function
createViewElementFromHighlightDescriptor( descriptor ) {ntconst viewElement
= new ViewAttributeElement( &#39;span&#39;, descriptor.attributes );nntif (
descriptor.classes ) {nttviewElement._addClass( descriptor.classes
);nt}nntif ( descriptor.priority ) {nttviewElement._priority =
descriptor.priority;nt}nntviewElement._id = descriptor.id;nntreturn
viewElement;n}nn/**n * <a href="../../../../Object.html">Object</a>
describing how the marker highlight should be represented in the view.n *n
* Each text node contained in a highlighted range will be wrapped in a
`span` {@link module:engine/view/attributeelement~AttributeElement}n * with
CSS class(es), attributes and priority described by this object.n *n *
Additionally, each {@link
module:engine/view/containerelement~ContainerElement} can handle displaying
the highlight separatelyn * by providing `addHighlight` and
`removeHighlight` custom properties. In this case:n *n *  *
`HighlightDescriptor` object is passed to the `addHighlight` function upon
conversion and should be used to apply the highlight ton *  the element,n *
* descriptor `id` is passed to the `removeHighlight` function upon
conversion and should be used to remove the highlight of givenn *  id from
the element.n *n * @typedef {Object}
module:engine/conversion/downcast-converters~HighlightDescriptorn *n *
@property {String|Array.&lt;String&gt;} classes CSS class or array of
classes to set. If descriptor is used ton * create {@link
module:engine/view/attributeelement~AttributeElement} over text nodes,
those classes will be setn * on that {@link
module:engine/view/attributeelement~AttributeElement}. If descriptor is
applied to an element,n * usually those class will be set on that element,
however this depends on how the element converts the descriptor.n *n *
@property {String} [id] Descriptor identifier. If not provided, defaults to
converted marker&#39;s name.n *n * @property {Number} [priority] Descriptor
priority. If not provided, defaults to `10`. If descriptor is used to
createn * {@link module:engine/view/attributeelement~AttributeElement}, it
will be that element&#39;sn * {@link
module:engine/view/attributeelement~AttributeElement#priority}. If
descriptor is applied to an element,n * the priority will be used to
determine which descriptor is more important.n *n * @property {Object}
[attributes] Attributes to set. If descriptor is used to createn * {@link
module:engine/view/attributeelement~AttributeElement} over text nodes,
those attributes will be set on thatn * {@link
module:engine/view/attributeelement~AttributeElement}. If descriptor is
applied to an element, usually thosen * attributes will be set on that
element, however this depends on how the element converts the descriptor.n
*/nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/conversion/downcast-converters.jsn// module id =
nulln// module chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * Contains {@link
module:engine/view/documentselection~DocumentSelection view selection}n *
to {@link module:engine/model/selection~Selection model selection}
conversion helpers.n *n * @module
engine/conversion/upcast-selection-convertersn */nnimport ModelSelection
from &#39;../model/selection&#39;;nn/**n * Function factory, creates a
callback function which converts a {@link
module:engine/view/selection~Selectionn * view selection} taken from the
{@link module:engine/view/document~Document#event:selectionChange} eventn *
and sets in on the {@link module:engine/model/document~Document#selection
model}.n *n * *Note*: because there is no view selection change dispatcher
nor any other advanced view selection to modeln * conversion mechanism, the
callback should be set directly on view document.n *n *ttview.document.on(
&#39;selectionChange&#39;, convertSelectionChange( modelDocument, mapper )
);n *n * @param {module:engine/model/model~Model} model Data model.n *
@param {module:engine/conversion/mapper~Mapper} mapper Conversion mapper.n
* @returns {Function} {@link
module:engine/view/document~Document#event:selectionChange} callback
function.n */nexport function convertSelectionChange( model, mapper )
{ntreturn ( evt, data ) =&gt; {nttconst viewSelection =
data.newSelection;nttconst modelSelection = new ModelSelection();nnttconst
ranges = [];nnttfor ( const viewRange of viewSelection.getRanges() )
{ntttranges.push( mapper.toModelRange( viewRange )
);ntt}nnttmodelSelection.setTo( ranges, { backward:
viewSelection.isBackward } );nnttif ( !modelSelection.isEqual(
model.document.selection ) ) {ntttmodel.change( writer =&gt;
{nttttwriter.setSelection( modelSelection );nttt}
);ntt}nt};n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/conversion/upcast-selection-converters.jsn// module
id = nulln// module chunks = ”,“/**n * @license Copyright © 2003-2018,
CKSource - Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * Contains {@link
module:engine/model/selection~Selection model selection} ton * {@link
module:engine/view/documentselection~DocumentSelection view selection}
converters forn * {@link
module:engine/conversion/downcastdispatcher~DowncastDispatcher}.n *n *
@module engine/conversion/downcast-selection-convertersn */nn/**n *
Function factory, creates a converter that converts non-collapsed {@link
module:engine/model/selection~Selection model selection} ton * {@link
module:engine/view/documentselection~DocumentSelection view selection}. The
converter consumes appropriaten * value from `consumable` object and maps
model positions from selection to view positions.n *n
*ttmodelDispatcher.on( &#39;selection&#39;, convertRangeSelection() );n *n
* @returns {Function} Selection converter.n */nexport function
convertRangeSelection() {ntreturn ( evt, data, conversionApi ) =&gt;
{nttconst selection = data.selection;nnttif ( selection.isCollapsed )
{ntttreturn;ntt}nnttif ( !conversionApi.consumable.consume( selection,
&#39;selection&#39; ) ) {ntttreturn;ntt}nnttconst viewRanges = [];nnttfor (
const range of selection.getRanges() ) {ntttconst viewRange =
conversionApi.mapper.toViewRange( range );ntttviewRanges.push( viewRange
);ntt}nnttconversionApi.writer.setSelection( viewRanges, { backward:
selection.isBackward } );nt};n}nn/**n * Function factory, creates a
converter that converts collapsed {@link
module:engine/model/selection~Selection model selection} ton * {@link
module:engine/view/documentselection~DocumentSelection view selection}. The
converter consumes appropriaten * value from `consumable` object, maps
model selection position to view position and breaksn * {@link
module:engine/view/attributeelement~AttributeElement attribute elements} at
the selection position.n *n *ttmodelDispatcher.on( &#39;selection&#39;,
convertCollapsedSelection() );n *n * Example of view state before and after
converting collapsed selection:n *n *tt  
&lt;p&gt;&lt;strong&gt;f^oo&lt;strong&gt;bar&lt;/p&gt;n *tt-&gt;
&lt;p&gt;&lt;strong&gt;f&lt;/strong&gt;^&lt;strong&gt;oo&lt;/strong&gt;bar&lt;/p&gt;n
*n * By breaking attribute elements like `&lt;strong&gt;`, selection is in
correct element. Then, when selection attribute isn * converted, the broken
attributes might be merged again, or the position where the selection is
may be wrappedn * in different, appropriate attribute elements.n *n * See
also {@link
module:engine/conversion/downcast-selection-converters~clearAttributes}
which does a clean-upn * by merging attributes.n *n * @returns {Function}
Selection converter.n */nexport function convertCollapsedSelection()
{ntreturn ( evt, data, conversionApi ) =&gt; {nttconst selection =
data.selection;nnttif ( !selection.isCollapsed ) {ntttreturn;ntt}nnttif (
!conversionApi.consumable.consume( selection, &#39;selection&#39; ) )
{ntttreturn;ntt}nnttconst viewWriter = conversionApi.writer;nttconst
modelPosition = selection.getFirstPosition();nttconst viewPosition =
conversionApi.mapper.toViewPosition( modelPosition );nttconst
brokenPosition = viewWriter.breakAttributes( viewPosition
);nnttviewWriter.setSelection( brokenPosition );nt};n}nn/**n * Function
factory, creates a converter that clears artifacts after the previousn *
{@link module:engine/model/selection~Selection model selection} conversion.
It removes all emptyn * {@link
module:engine/view/attributeelement~AttributeElement view attribute
elements} and merge sibling attributes at all start and endn * positions of
all ranges.n *n *tt   &lt;p&gt;&lt;strong&gt;^&lt;/strong&gt;&lt;/p&gt;n
*tt-&gt; &lt;p&gt;^&lt;/p&gt;n *n *tt  
&lt;p&gt;&lt;strong&gt;foo&lt;/strong&gt;^&lt;strong&gt;bar&lt;/strong&gt;bar&lt;/p&gt;n
*tt-&gt; &lt;p&gt;&lt;strong&gt;foo^bar&lt;strong&gt;bar&lt;/p&gt;n *n *tt 
&lt;p&gt;&lt;strong&gt;foo&lt;/strong&gt;<em>^</em>&lt;strong&gt;bar&lt;/strong&gt;bar&lt;/p&gt;n
*tt-&gt; &lt;p&gt;&lt;strong&gt;foo^bar&lt;strong&gt;bar&lt;/p&gt;n *n *
This listener should be assigned before any converter for the new
selection:n *n *ttmodelDispatcher.on( &#39;selection&#39;,
clearAttributes() );n *n * See {@link
module:engine/conversion/downcast-selection-converters~convertCollapsedSelection}n
* which do the opposite by breaking attributes in the selection position.n
*n * @returns {Function} Selection converter.n */nexport function
clearAttributes() {ntreturn ( evt, data, conversionApi ) =&gt; {nttconst
viewWriter = conversionApi.writer;nttconst viewSelection =
viewWriter.document.selection;nnttfor ( const range of
viewSelection.getRanges() ) {nttt// Not collapsed selection should not have
artifacts.ntttif ( range.isCollapsed ) {ntttt// Position might be in the
node removed by the view writer.nttttif ( range.end.parent.document )
{ntttttconversionApi.writer.mergeAttributes( range.start
);ntttt}nttt}ntt}nttviewWriter.setSelection( null
);nt};n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/conversion/downcast-selection-converters.jsn//
module id = nulln// module chunks = ”,“/**n * @license Copyright ©
2003-2018, CKSource - Frederico Knabben. All rights reserved.n * For
licensing, see LICENSE.md.n */nn/**n * @module
engine/controller/editingcontrollern */nnimport RootEditableElement from
&#39;../view/rooteditableelement&#39;;nimport View from
&#39;../view/view&#39;;nimport Mapper from
&#39;../conversion/mapper&#39;;nimport DowncastDispatcher from
&#39;../conversion/downcastdispatcher&#39;;nimport { insertText, remove }
from &#39;../conversion/downcast-converters&#39;;nimport {
convertSelectionChange } from
&#39;../conversion/upcast-selection-converters&#39;;nimport
{ntconvertRangeSelection,ntconvertCollapsedSelection,ntclearAttributesn}
from &#39;../conversion/downcast-selection-converters&#39;;nnimport
ObservableMixin from
&#39;@ckeditor/ckeditor5-utils/src/observablemixin&#39;;nimport mix from
&#39;@ckeditor/ckeditor5-utils/src/mix&#39;;nn/**n * Controller for the
editing pipeline. The editing pipeline controls {@link
~EditingController#model model} rendering,n * including selection handling.
It also creates the {@link ~EditingController#view view} which builds an *
browser-independent virtualization over the DOM elements. The editing
controller also attaches default converters.n *n * @mixes
module:utils/observablemixin~ObservableMixinn */nexport default class
EditingController {nt/**nt * Creates an editing controller instance.nt *nt
* @param {module:engine/model/model~Model} model Editing model.nt
*/ntconstructor( model ) {ntt/**ntt * Editor model.ntt *ntt * @readonlyntt
* @member {module:engine/model/model~Model}ntt */nttthis.model =
model;nntt/**ntt * Editing view controller.ntt *ntt * @readonlyntt *
@member {module:engine/view/view~View}ntt */nttthis.view = new
View();nntt/**ntt * Mapper which describes the model-view binding.ntt *ntt
* @readonlyntt * @member {module:engine/conversion/mapper~Mapper}ntt
*/nttthis.mapper = new Mapper();nntt/**ntt * Downcast dispatcher that
converts changes from the model to {@link view the editing view}.ntt *ntt *
@readonlyntt * @member
{module:engine/conversion/downcastdispatcher~DowncastDispatcher}
downcastDispatcherntt */nttthis.downcastDispatcher = new
DowncastDispatcher( {ntttmapper: this.mapperntt} );nnttconst doc =
this.model.document;nttconst selection = doc.selection;nttconst markers =
this.model.markers;nntt// Whenever model document is changed, convert those
changes to the view (using model.Document#differ).ntt// Do it on
&#39;low&#39; priority, so changes are converted after other listeners did
their job.ntt// Also convert model selection.nttthis.listenTo( doc,
&#39;change&#39;, () =&gt; {ntttthis.view.change( writer =&gt;
{nttttthis.downcastDispatcher.convertChanges( doc.differ, writer
);nttttthis.downcastDispatcher.convertSelection( selection, markers, writer
);nttt} );ntt}, { priority: &#39;low&#39; } );nntt// Convert selection from
the view to the model when it changes in the view.nttthis.listenTo(
this.view.document, &#39;selectionChange&#39;, convertSelectionChange(
this.model, this.mapper ) );nntt// Attach default model
converters.nttthis.downcastDispatcher.on( &#39;insert:$text&#39;,
insertText(), { priority: &#39;lowest&#39; }
);nttthis.downcastDispatcher.on( &#39;remove&#39;, remove(), { priority:
&#39;low&#39; } );nntt// Attach default model selection
converters.nttthis.downcastDispatcher.on( &#39;selection&#39;,
clearAttributes(), { priority: &#39;low&#39; }
);nttthis.downcastDispatcher.on( &#39;selection&#39;,
convertRangeSelection(), { priority: &#39;low&#39; }
);nttthis.downcastDispatcher.on( &#39;selection&#39;,
convertCollapsedSelection(), { priority: &#39;low&#39; } );nntt// Binds
{@link module:engine/view/document~Document#roots view roots collection}
tontt// {@link module:engine/model/document~Document#roots model roots
collection} so creatingntt// model root automatically creates corresponding
view root.nttthis.view.document.roots.bindTo( this.model.document.roots
).using( root =&gt; {nttt// $graveyard is a special root that has no
reflection in the view.ntttif ( root.rootName == &#39;$graveyard&#39; )
{nttttreturn null;nttt}nntttconst viewRoot = new RootEditableElement(
root.name );nntttviewRoot.rootName = root.rootName;ntttviewRoot._document =
this.view.document;ntttthis.mapper.bindElements( root, viewRoot
);nntttreturn viewRoot;ntt} );nt}nnt/**nt * Removes all event listeners
attached to the `EditingController`. Destroys all objects creatednt * by
`EditingController` that need to be destroyed.nt */ntdestroy()
{nttthis.view.destroy();nttthis.stopListening();nt}n}nnmix(
EditingController, ObservableMixin );nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-engine/src/controller/editingcontroller.jsn// module
id = nulln// module chunks = ”,“/**n * @license Copyright © 2003-2018,
CKSource - Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/* globals window */nn/**n * @module
utils/translation-servicen */nn/* istanbul ignore else */nif (
!window.CKEDITOR_TRANSLATIONS ) {ntwindow.CKEDITOR_TRANSLATIONS =
{};n}nn/**n * Adds translations to existing ones.n * These translations
will later be available for the {@link
module:utils/translation-service~translate `translate()`} function.n *n
*ttadd( &#39;pl&#39;, {n *ttt&#39;OK&#39;: &#39;OK&#39;,n *ttt&#39;Cancel
[context: reject]&#39;: &#39;Anuluj&#39;n *tt} );n *n * If you cannot
import this function from this module (e.g. because you use a CKEditor 5
build), then you cann * still add translations by extending the global
`window.CKEDITOR_TRANSLATIONS` object by using a function liken * the one
below:n *n *ttfunction addTranslations( language, translations ) {n *tttif
( !window.CKEDITOR_TRANSLATIONS ) {n *ttttwindow.CKEDITOR_TRANSLATIONS =
{};n *ttt}n *n *tttconst dictionary = window.CKEDITOR_TRANSLATIONS[
language ] || ( window.CKEDITOR_TRANSLATIONS[ language ] = {} );n *n *ttt//
Extend the dictionary for the given language.n *tttObject.assign(
dictionary, translations );n *tt}n *n * @param {String} language Target
language.n * @param {Object.&lt;String, String&gt;} translations
Translations which will be added to the dictionary.n */nexport function
add( language, translations ) {ntconst dictionary =
window.CKEDITOR_TRANSLATIONS[ language ] || ( window.CKEDITOR_TRANSLATIONS[
language ] = {} );nntObject.assign( dictionary, translations );n}nn/**n *
Translates string if the translation of the string was previously added to
the dictionary.n * See {@link module:utils/translation-service Translation
Service}.n * This happens in a multi-language mode were translation modules
are created by the bundler.n *n * When no translation is defined in the
dictionary or the dictionary doesn&#39;t exist this function returnsn * the
original string without the `&#39;[context: ]&#39;` (happens in development
and single-language modes).n *n * In a single-language mode (when values
passed to `t()` were replaced with target language strings) the dictionaryn
* is left empty, so this function will return the original strings always.n
*n *tttranslate( &#39;pl&#39;, &#39;Cancel [context: reject]&#39; );n *n *
@param {String} language Target language.n * @param {String} translationKey
String that will be translated.n * @returns {String} Translated sentence.n
*/nexport function translate( language, translationKey ) {ntconst
numberOfLanguages = getNumberOfLanguages();nntif ( numberOfLanguages === 1
) {ntt// Override the language to the only supported one.ntt// This
can&#39;t be done in the `Locale` class, because the translations comes
after the `Locale` class initialization.nttlanguage = Object.keys(
window.CKEDITOR_TRANSLATIONS )[ 0 ];nt}nntif ( numberOfLanguages === 0 ||
!hasTranslation( language, translationKey ) ) {nttreturn
translationKey.replace( / \[context: [^\]]+\]$/, &#39;&#39; );nt}nntconst
dictionary = window.CKEDITOR_TRANSLATIONS[ language ];nnt// In case of
missing translations we still need to cut off the `[context: ]`
parts.ntreturn dictionary[ translationKey ].replace( / \[context:
[^\]]+\]$/, &#39;&#39; );n}nn/**n * Clears dictionaries for test purposes.n
*n * @protectedn */nexport function _clear()
{ntwindow.CKEDITOR_TRANSLATIONS = {};n}nn// Checks whether the dictionary
exists and translation in that dictionary exists.nfunction hasTranslation(
language, translationKey ) {ntreturn (ntt( language in
window.CKEDITOR_TRANSLATIONS ) &amp;&amp;ntt( translationKey in
window.CKEDITOR_TRANSLATIONS[ language ] )nt);n}nnfunction
getNumberOfLanguages() {ntreturn Object.keys( window.CKEDITOR_TRANSLATIONS
).length;n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/translation-service.jsn// module id = nulln// module
chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module utils/localen */nnimport { translate } from
&#39;./translation-service&#39;;nn/**n * Represents the localization
services.n */nexport default class Locale {nt/**nt * Creates a new instance
of the Locale class.nt *nt * @param {String} [language=&#39;en&#39;] The
language code in [ISO 639-1](<a
href="https://en.wikipedia.org/wiki/ISO_639-1">en.wikipedia.org/wiki/ISO_639-1</a>)
format.nt */ntconstructor( language ) {ntt/**ntt * The language code in
[ISO 639-1](<a
href="https://en.wikipedia.org/wiki/ISO_639-1">en.wikipedia.org/wiki/ISO_639-1</a>)
format.ntt *ntt * @readonlyntt * @member {String}ntt */nttthis.language =
language || &#39;en&#39;;nntt/**ntt * Translates the given string to the
{@link language}. This method is also available in {@link
module:core/editor/editor~Editor#t}ntt * and {@link
module:ui/view~View#t}.ntt *ntt * The strings may contain placeholders
(`%&lt;index&gt;`) for values which are passed as the second argument.ntt *
`&lt;index&gt;` is the index in the `values` array.ntt *ntt *tteditor.t(
&#39;Created file "%0&quot; in %1ms.&#39;, [ fileName, timeTaken ] );ntt
*ntt * This method&#39;s context is statically bound to Locale instance,ntt
* so it can be called as a function:ntt *ntt *ttconst t = this.t;ntt *ttt(
&#39;Label&#39; );ntt *ntt * @method tntt * @param {String} str The string
to translate.ntt * @param {String[]} values Values that should be used to
interpolate the string.ntt */nttthis.t = ( …args ) =&gt; this._t( …args
);nt}nnt/**nt * Base for the {@link t} method.nt *nt * @privatent */nt_t(
str, values ) {nttlet translatedString = translate( this.language, str
);nnttif ( values ) {nttttranslatedString = translatedString.replace(
/%(\d+)/g, ( match, index ) =&gt; {nttttreturn ( index &lt; values.length )
? values[ index ] : match;nttt} );ntt}nnttreturn
translatedString;nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/locale.jsn// module id = nulln// module chunks =
”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben. All
rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
engine/model/scheman */nnimport CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nimport
ObservableMixin from
&#39;@ckeditor/ckeditor5-utils/src/observablemixin&#39;;nimport mix from
&#39;@ckeditor/ckeditor5-utils/src/mix&#39;;nnimport Range from
&#39;./range&#39;;nimport Position from &#39;./position&#39;;nimport
Element from &#39;./element&#39;;nimport TreeWalker from
&#39;./treewalker&#39;;nn/**n * The model&#39;s schema. It defines allowed
and disallowed structures of nodes as well as nodes&#39; attributes.n * The
schema is usually defined by features and based on them the editing
framework and featuresn * make decisions how to change and process the
model.n *n * The instance of schema is available in {@link
module:engine/model/model~Model#schema `editor.model.schema`}.n *n * #
Schema definitionsn *n * Schema defines allowed model structures and
allowed attributes separately. They are also checked separatelyn * by using
the {@link ~Schema#checkChild} and {@link ~Schema#checkAttribute} methods.n
*n * ## Defining allowed structuresn *n * When a feature introduces a model
element it should register it in the schema. Besidesn * defining that such
an element may exist in the model, the feature also needs to define wheren
* this element may be placed:n *n *ttschema.register( &#39;myElement&#39;,
{n *tttallowIn: &#39;$root&#39;n *tt} );n *n * This lets the schema know
that `&lt;myElement&gt;` may be a child of the `&lt;$root&gt;` element.
`$root` is one of genericn * nodes defined by the editing framework. By
default, the editor names the main root element a `&lt;$root&gt;`,n * so
the above definition allows `&lt;myElement&gt;` in the main editor
element.n *n * In other words, this would be correct:n *n
*tt&lt;$root&gt;&lt;myElement&gt;&lt;/myElement&gt;&lt;/$root&gt;n *n *
While this would not be correct:n *n
*tt&lt;$root&gt;&lt;foo&gt;&lt;myElement&gt;&lt;/myElement&gt;&lt;/foo&gt;&lt;/$root&gt;n
*n * ## Generic itemsn *n * There are three basic generic items: `$root`,
`$block` and `$text`.n * They are defined as follows:n *n
*ttthis.schema.register( &#39;$root&#39;, {n *tttisLimit: truen *tt} );n
*ttthis.schema.register( &#39;$block&#39;, {n *tttallowIn:
&#39;$root&#39;,n *tttisBlock: truen *tt} );n *ttthis.schema.register(
&#39;$text&#39;, {n *tttallowIn: &#39;$block&#39;n *tt} );n *n * These
definitions can then be reused by features to create their own definitions
in a more extensible way.n * For example, the {@link
module:paragraph/paragraph~Paragraph} feature will define its item as:n *n
*ttschema.register( &#39;paragraph&#39;, {n *tttinheritAllFrom:
&#39;$block&#39;n *tt} );n *n * Which translates to:n *n
*ttschema.register( &#39;paragraph&#39;, {n *tttallowWhere:
&#39;$block&#39;,n *tttallowContentOf: &#39;$block&#39;,n
*tttallowAttributesOf: &#39;$block&#39;,n *tttinheritTypesFrom:
&#39;$block&#39;n *tt} );n *n * Which can be read as:n *n * * The
`&lt;paragraph&gt;` element will be allowed in elements in which
`&lt;$block&gt;` is allowed (e.g. in `&lt;$root&gt;`).n * * The
`&lt;paragraph&gt;` element will allow all nodes which are allowed in
`&lt;$block&gt;` (e.g. `$text`).n * * The `&lt;paragraph&gt;` element will
allow all attributes allowed on `&lt;$block&gt;`.n * * The
`&lt;paragraph&gt;` element will inherit all `is*` properties of
`&lt;$block&gt;` (e.g. `isBlock`).n *n * Thanks to the fact that
`&lt;paragraph&gt;`&#39;s definition is inherited from `&lt;$block&gt;`
other features can use the `&lt;$block&gt;`n * type to indirectly extend
`&lt;paragraph&gt;`&#39;s definition. For example, the {@link
module:block-quote/blockquote~BlockQuote}n * feature does this:n *n
*ttschema.register( &#39;blockQuote&#39;, {n *tttallowWhere:
&#39;$block&#39;,n *tttallowContentOf: &#39;$root&#39;n *tt} );n *n *
Thanks to that, despite the fact that block quote and paragraph features
know nothing about themselves, paragraphsn * will be allowed in block
quotes and block quotes will be allowed in all places where blocks are. So
if anyone willn * register a `&lt;section&gt;` element (with
`allowContentOf: &#39;$root&#39;` rule), that `&lt;section&gt;` elements
will allown * block quotes too.n *n * The side effect of such a definition
inheritance is that now `&lt;blockQuote&gt;` is allowed in
`&lt;blockQuote&gt;` which needs to ben * resolved by a callback which will
disallow this specific structure.n *n * You can read more about the format
of an item definition in {@link
module:engine/model/schema~SchemaItemDefinition}.n *n * ## Defining
advanced rules in `checkChild()`&#39;s callbacksn *n * The {@link
~Schema#checkChild} method which is the base method used to check whether
some element is allowed in a given structuren * is {@link
module:utils/observablemixin~ObservableMixin#decorate a decorated method}.n
* It means that you can add listeners to implement your specific rules
which are not limited by the declarativen * {@link
module:engine/model/schema~SchemaItemDefinition API}.n *n * Those listeners
can be added either by listening directly to the {@link
~Schema#event:checkChild} event orn * by using the handy {@link
~Schema#addChildCheck} method.n *n * For instance, the block quote feature
defines such a listener to disallow nested `&lt;blockQuote&gt;`
structures:n *n *ttschema.addChildCheck( context, childDefinition ) =&gt;
{n *ttt// Note that context is automatically normalized to SchemaContext
instance andn *ttt// child to its definition
(SchemaCompiledItemDefinition).n *n *ttt// If checkChild() is called with a
context that ends with blockQuote and blockQuote as a childn *ttt// to
check, make the checkChild() method return false.n *tttif (
context.endsWith( &#39;blockQuote&#39; ) &amp;&amp; childDefinition.name ==
&#39;blockQuote&#39; ) {n *ttttreturn false;n *ttt}n *tt} );n *n * ##
Defining attributesn *n * TODOn *n * ## Implementing additional
constraintsn *n * Schema&#39;s capabilities were limited to simple (and
atomic) {@link ~Schema#checkChild} andn * {@link ~Schema#checkAttribute}
checks on purpose.n * One may imagine that schema should support defining
more complex rules such asn * "element `&lt;x&gt;` must be always followed
by `&lt;y&gt;`&quot;.n * While it is feasible to create an API which would
enable feeding the schema with such definitions,n * it is unfortunately
unrealistic to then expect that every editing feature will consider those
rules when processing the model.n * It is also unrealistic to expect that
it will be done automatically by the schema and the editing engine
themselves.n *n * For instance, let&#39;s get back to the "element
`&lt;x&gt;` must be always followed by `&lt;y&gt;`&quot; rule and this
initial content:n *n *tt&lt;$root&gt;n *ttt&lt;x&gt;foo&lt;/x&gt;n
*ttt&lt;y&gt;bar[bom&lt;/y&gt;n *ttt&lt;z&gt;bom]bar&lt;/z&gt;n
*tt&lt;/$root&gt;n *n * Now, imagine that the user presses the "block
quote&quot; button. Usually it would wrap the two selected blocksn *
(`&lt;y&gt;` and `&lt;z&gt;`) with a `&lt;blockQuote&gt;` element:n *n
*tt&lt;$root&gt;n *ttt&lt;x&gt;foo&lt;/x&gt;n *ttt&lt;blockQuote&gt;n
*tttt&lt;y&gt;bar[bom&lt;/y&gt;n *tttt&lt;z&gt;bom]bar&lt;/z&gt;n
*ttt&lt;/blockQuote&gt;n *tt&lt;/$root&gt;n *n * But it turns out that this
creates an incorrect structure – `&lt;x&gt;` is not followed by `&lt;y&gt;`
anymore.n *n * What should happen instead? There are at least 4 possible
solutions: the block quote feature should not ben * applicable in such a
context, someone should create a new `&lt;y&gt;` right after `&lt;x&gt;`,
`&lt;x&gt;` should be movedn * inside `&lt;blockQuote&gt;` together with
`&lt;y&gt;` or vice versa.n *n * While this is a relatively simple scenario
(unlike most real-time collaboration scenarios),n * it turns out that
it&#39;s already hard to say what should happen and who should react to fix
this content.n *n * Therefore, if your editor needs to implement such
rules, you should do that through model&#39;s post-fixersn * fixing
incorrect content or actively prevent such situations (e.g. by disabling
certain features).n * It means that those constraints will be defined
specifically for your scenario by your code whichn * makes their
implementation much easier.n *n * So the answer for who and how should
implement additional constraints is your features or your editorn * through
CKEditor 5&#39;s rich and open API.n *n * @mixes
module:utils/observablemixin~ObservableMixinn */nexport default class
Schema {nt/**nt * Creates schema instance.nt */ntconstructor()
{nttthis._sourceDefinitions = {};nnttthis.decorate( &#39;checkChild&#39;
);nttthis.decorate( &#39;checkAttribute&#39; );nnttthis.on(
&#39;checkAttribute&#39;, ( evt, args ) =&gt; {ntttargs[ 0 ] = new
SchemaContext( args[ 0 ] );ntt}, { priority: &#39;highest&#39; }
);nnttthis.on( &#39;checkChild&#39;, ( evt, args ) =&gt; {ntttargs[ 0 ] =
new SchemaContext( args[ 0 ] );ntttargs[ 1 ] = this.getDefinition( args[ 1
] );ntt}, { priority: &#39;highest&#39; } );nt}nnt/**nt * Registers schema
item. Can only be called once for every item name.nt *nt
*ttschema.register( &#39;paragraph&#39;, {nt *tttinheritAllFrom:
&#39;$block&#39;nt *tt} );nt *nt * @param {String} itemNament * @param
{module:engine/model/schema~SchemaItemDefinition} definitionnt
*/ntregister( itemName, definition ) {nttif ( this._sourceDefinitions[
itemName ] ) {nttt// TODO docsntttthrow new CKEditorError(
&#39;schema-cannot-register-item-twice: A single item cannot be registered
twice in the schema.&#39;, {nttttitemNamenttt}
);ntt}nnttthis._sourceDefinitions[ itemName ] = [ntttObject.assign( {},
definition )ntt];nnttthis._clearCache();nt}nnt/**nt * Extends a {@link
register registered} item&#39;s definition.nt *nt * Extending properties
such as `allowIn` will add more items to the existing properties,nt * while
redefining properties such as `isBlock` will override the previously
defined ones.nt *nt *ttschema.register( &#39;foo&#39;, {nt *tttallowIn:
&#39;$root&#39;,nt *tttisBlock: true;nt *tt} );nt *ttschema.extend(
&#39;foo&#39;, {nt *tttallowIn: &#39;blockQuote&#39;,nt *tttisBlock:
falsent *tt} );nt *nt *ttschema.getDefinition( &#39;foo&#39; );nt *tt//t{nt
*tt//ttallowIn: [ &#39;$root&#39;, &#39;blockQuote&#39; ],nt *tt//
ttisBlock: falsent *tt//t}nt *nt * @param {String} itemNament * @param
{module:engine/model/schema~SchemaItemDefinition} definitionnt */ntextend(
itemName, definition ) {nttif ( !this._sourceDefinitions[ itemName ] )
{nttt// TODO docsntttthrow new CKEditorError(
&#39;schema-cannot-extend-missing-item: Cannot extend an item which was not
registered yet.&#39;, {nttttitemNamenttt}
);ntt}nnttthis._sourceDefinitions[ itemName ].push( Object.assign( {},
definition ) );nnttthis._clearCache();nt}nnt/**nt * Returns all registered
items.nt *nt * @returns
{Object.&lt;String,module:engine/model/schema~SchemaCompiledItemDefinition&gt;}nt
*/ntgetDefinitions() {nttif ( !this._compiledDefinitions )
{ntttthis._compile();ntt}nnttreturn this._compiledDefinitions;nt}nnt/**nt *
Returns a definition of the given item or `undefined` if item is not
registered.nt *nt * @param
{module:engine/model/item~Item|module:engine/model/schema~SchemaContextItem|String}
itemnt * @returns
{module:engine/model/schema~SchemaCompiledItemDefinition}nt
*/ntgetDefinition( item ) {nttlet itemName;nnttif ( typeof item ==
&#39;string&#39; ) {ntttitemName = item;ntt} else if ( item.is &amp;&amp; (
item.is( &#39;text&#39; ) || item.is( &#39;textProxy&#39; ) ) )
{ntttitemName = &#39;$text&#39;;ntt}ntt// Element or
module:engine/model/schema~SchemaContextItem.nttelse {ntttitemName =
item.name;ntt}nnttreturn this.getDefinitions()[ itemName ];nt}nnt/**nt *
Returns `true` if the given item is registered in the schema.nt *nt
*ttschema.isRegistered( &#39;paragraph&#39; ); // -&gt; truent
*ttschema.isRegistered( editor.model.document.getRoot() ); // -&gt; truent
*ttschema.isRegistered( &#39;foo&#39; ); // -&gt; falsent *nt * @param
{module:engine/model/item~Item|module:engine/model/schema~SchemaContextItem|String}
itemnt */ntisRegistered( item ) {nttreturn !!this.getDefinition( item
);nt}nnt/**nt * Returns `true` if the given item is defined to bent * a
block by {@link module:engine/model/schema~SchemaItemDefinition}&#39;s
`isBlock` property.nt *nt *ttschema.isBlock( &#39;paragraph&#39; ); //
-&gt; truent *ttschema.isBlock( &#39;$root&#39; ); // -&gt; falsent *nt
*ttconst paragraphElement = writer.createElement( &#39;paragraph&#39; );nt
*ttschema.isBlock( paragraphElement ); // -&gt; truent *nt * @param
{module:engine/model/item~Item|module:engine/model/schema~SchemaContextItem|String}
itemnt */ntisBlock( item ) {nttconst def = this.getDefinition( item
);nnttreturn !!( def &amp;&amp; def.isBlock );nt}nnt/**nt * Returns `true`
if the given item is defined to bent * a limit element by {@link
module:engine/model/schema~SchemaItemDefinition}&#39;s `isLimit`
property.nt *nt *ttschema.isLimit( &#39;paragraph&#39; ); // -&gt; falsent
*ttschema.isLimit( &#39;$root&#39; ); // -&gt; truent *ttschema.isLimit(
editor.model.document.getRoot() ); // -&gt; truent *nt * @param
{module:engine/model/item~Item|module:engine/model/schema~SchemaContextItem|String}
itemnt */ntisLimit( item ) {nttconst def = this.getDefinition( item
);nnttreturn !!( def &amp;&amp; def.isLimit );nt}nnt/**nt * Returns `true`
if the given item is defined to bent * a object element by {@link
module:engine/model/schema~SchemaItemDefinition}&#39;s `isObject`
property.nt *nt *ttschema.isObject( &#39;paragraph&#39; ); // -&gt; falsent
*ttschema.isObject( &#39;image&#39; ); // -&gt; truent *nt *ttconst
imageElement = writer.createElement( &#39;image&#39; );nt
*ttschema.isObject( imageElement ); // -&gt; truent *nt * @param
{module:engine/model/item~Item|module:engine/model/schema~SchemaContextItem|String}
itemnt */ntisObject( item ) {nttconst def = this.getDefinition( item
);nnttreturn !!( def &amp;&amp; def.isObject );nt}nnt/**nt * Checks whether
the given node (`child`) can be a child of the given context.nt *nt
*ttschema.checkChild( model.document.getRoot(), paragraph ); // -&gt;
falsent *nt *ttschema.register( &#39;paragraph&#39;, {nt *tttallowIn:
&#39;$root&#39;nt *tt} );nt *ttschema.checkChild( model.document.getRoot(),
paragraph ); // -&gt; truent *nt * @fires checkChildnt * @param
{module:engine/model/schema~SchemaContextDefinition} context Context in
which the child will be checked.nt * @param
{module:engine/model/node~Node|String} def The child to check.nt
*/ntcheckChild( context, def ) {ntt// Note: context and child are already
normalized here to a SchemaContext and SchemaCompiledItemDefinition.nttif (
!def ) {ntttreturn false;ntt}nnttreturn this._checkContextMatch( def,
context );nt}nnt/**nt * Checks whether the given attribute can be applied
in the given context (on the lastnt * item of the context).nt *nt
*ttschema.checkAttribute( textNode, &#39;bold&#39; ); // -&gt; falsent *nt
*ttschema.extend( &#39;$text&#39;, {nt *tttallowAttributes:
&#39;bold&#39;nt *tt} );nt *ttschema.checkAttribute( textNode,
&#39;bold&#39; ); // -&gt; truent *nt * @fires checkAttributent * @param
{module:engine/model/schema~SchemaContextDefinition} context Context in
which the attribute will be checked.nt * @param {String} attributeNament
*/ntcheckAttribute( context, attributeName ) {nttconst def =
this.getDefinition( context.last );nnttif ( !def ) {ntttreturn
false;ntt}nnttreturn def.allowAttributes.includes( attributeName
);nt}nnt/**nt * Checks whether the given element (`elementToMerge`) can be
merged with the specified base element (`positionOrBaseElement`).nt *nt *
In other words – whether `elementToMerge`&#39;s children {@link checkChild
are allowed} in the `positionOrBaseElement`.nt *nt * This check ensures
that elements merged with {@link module:engine/model/writer~Writer#merge
`Writer#merge()`}nt * will be valid.nt *nt * Instead of elements, you can
pass the instance of {@link module:engine/model/position~Position} class as
the `positionOrBaseElement`.nt * It means that the elements before and
after the position will be checked whether they can be merged.nt *nt *
@param
{module:engine/model/position~Position|module:engine/model/element~Element}
positionOrBaseElement The position or basent * element to which the
`elementToMerge` will be merged.nt * @param
{module:engine/model/element~Element} elementToMerge The element to merge.
Required if `positionOrBaseElement` is a element.nt * @returns {Boolean}nt
*/ntcheckMerge( positionOrBaseElement, elementToMerge = null ) {nttif (
positionOrBaseElement instanceof Position ) {ntttconst nodeBefore =
positionOrBaseElement.nodeBefore;ntttconst nodeAfter =
positionOrBaseElement.nodeAfter;nntttif ( !( nodeBefore instanceof Element
) ) {ntttt/**ntttt * The node before the merge position must be an
element.ntttt *ntttt * @error schema-check-merge-no-element-beforentttt
*/nttttthrow new CKEditorError( &#39;schema-check-merge-no-element-before:
The node before the merge position must be an element.&#39; );nttt}nntttif
( !( nodeAfter instanceof Element ) ) {ntttt/**ntttt * The node after the
merge position must be an element.ntttt *ntttt * @error
schema-check-merge-no-element-afterntttt */nttttthrow new CKEditorError(
&#39;schema-check-merge-no-element-after: The node after the merge position
must be an element.&#39; );nttt}nntttreturn this.checkMerge( nodeBefore,
nodeAfter );ntt}nnttfor ( const child of elementToMerge.getChildren() )
{ntttif ( !this.checkChild( positionOrBaseElement, child ) ) {nttttreturn
false;nttt}ntt}nnttreturn true;nt}nnt/**nt * Allows registering a callback
to the {@link checkChild} method calls.nt *nt * Callbacks allow you to
implement rules which are not otherwise possible to achievent * by using
the declarative API of {@link
module:engine/model/schema~SchemaItemDefinition}.nt * For example, by using
this method you can disallow elements in specific contexts.nt *nt * This
method is a shorthand for using the {@link event:checkChild} event. For
even better control,nt * you can use that event instead.nt *nt * Example:nt
*nt *tt// Disallow heading1 directly inside a blockQuote.nt
*ttschema.addChildCheck( ( context, childDefinition ) =&gt; {nt *tttif (
context.endsWith( &#39;blockQuote&#39; ) &amp;&amp; childDefinition.name ==
&#39;heading1&#39; ) {nt *ttttreturn false;nt *ttt}nt *tt} );nt *nt * Which
translates to:nt *nt *ttschema.on( &#39;checkChild&#39;, ( evt, args )
=&gt; {nt *tttconst context = args[ 0 ];nt *tttconst childDefinition =
args[ 1 ];nt *nt *tttif ( context.endsWith( &#39;blockQuote&#39; )
&amp;&amp; childDefinition &amp;&amp; childDefinition.name ==
&#39;heading1&#39; ) {nt *tttt// Prevent next listeners from being
called.nt *ttttevt.stop();nt *tttt// Set the checkChild()&#39;s return
value.nt *ttttevt.return = false;nt *ttt}nt *tt}, { priority:
&#39;high&#39; } );nt *nt * @param {Function} callback The callback to be
called. It is called with two parameters:nt * {@link
module:engine/model/schema~SchemaContext} (context) instance andnt * {@link
module:engine/model/schema~SchemaCompiledItemDefinition} (child-to-check
definition).nt * The callback may return `true/false` to override
`checkChild()`&#39;s return value. If it does not returnnt * a boolean
value, the default algorithm (or other callbacks) will define
`checkChild()`&#39;s return value.nt */ntaddChildCheck( callback )
{nttthis.on( &#39;checkChild&#39;, ( evt, [ ctx, childDef ] ) =&gt; {nttt//
checkChild() was called with a non-registered child.nttt// In 99% cases
such check should return false, so not to overcomplicate all
callbacksnttt// don&#39;t even execute them.ntttif ( !childDef )
{nttttreturn;nttt}nntttconst retValue = callback( ctx, childDef );nntttif (
typeof retValue == &#39;boolean&#39; ) {nttttevt.stop();nttttevt.return =
retValue;nttt}ntt}, { priority: &#39;high&#39; } );nt}nnt/**nt * Allows
registering a callback to the {@link checkAttribute} method calls.nt *nt *
Callbacks allow you to implement rules which are not otherwise possible to
achievent * by using the declarative API of {@link
module:engine/model/schema~SchemaItemDefinition}.nt * For example, by using
this method you can disallow attribute if node to which it is appliednt *
is contained within some other element (e.g. you want to disallow `bold` on
`$text` within `heading1`).nt *nt * This method is a shorthand for using
the {@link event:checkAttribute} event. For even better control,nt * you
can use that event instead.nt *nt * Example:nt *nt *tt// Disallow bold on
$text inside heading1.nt *ttschema.addChildCheck( ( context, attributeName
) =&gt; {nt *tttif ( context.endsWith( &#39;heading1 $text&#39; )
&amp;&amp; attributeName == &#39;bold&#39; ) {nt *ttttreturn false;nt
*ttt}nt *tt} );nt *nt * Which translates to:nt *nt *ttschema.on(
&#39;checkAttribute&#39;, ( evt, args ) =&gt; {nt *tttconst context = args[
0 ];nt *tttconst attributeName = args[ 1 ];nt *nt *tttif (
context.endsWith( &#39;heading1 $text&#39; ) &amp;&amp; attributeName ==
&#39;bold&#39; ) {nt *tttt// Prevent next listeners from being called.nt
*ttttevt.stop();nt *tttt// Set the checkAttribute()&#39;s return value.nt
*ttttevt.return = false;nt *ttt}nt *tt}, { priority: &#39;high&#39; } );nt
*nt * @param {Function} callback The callback to be called. It is called
with two parameters:nt * {@link module:engine/model/schema~SchemaContext}
(context) instance and attribute name.nt * The callback may return
`true/false` to override `checkAttribute()`&#39;s return value. If it does
not returnnt * a boolean value, the default algorithm (or other callbacks)
will define `checkAttribute()`&#39;s return value.nt */ntaddAttributeCheck(
callback ) {nttthis.on( &#39;checkAttribute&#39;, ( evt, [ ctx,
attributeName ] ) =&gt; {ntttconst retValue = callback( ctx, attributeName
);nntttif ( typeof retValue == &#39;boolean&#39; )
{nttttevt.stop();nttttevt.return = retValue;nttt}ntt}, { priority:
&#39;high&#39; } );nt}nnt/**nt * Returns the lowest {@link
module:engine/model/schema~Schema#isLimit limit element} containing the
entirent * selection or the root otherwise.nt *nt * @param
{module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection}
selectionnt * Selection which returns the common ancestor.nt * @returns
{module:engine/model/element~Element}nt */ntgetLimitElement( selection )
{ntt// Find the common ancestor for all selection&#39;s ranges.nttlet
element = Array.from( selection.getRanges() )nttt.reduce( ( element, range
) =&gt; {nttttconst rangeCommonAncestor =
range.getCommonAncestor();nnttttif ( !element ) {ntttttreturn
rangeCommonAncestor;ntttt}nnttttreturn element.getCommonAncestor(
rangeCommonAncestor, { includeSelf: true } );nttt}, null );nnttwhile (
!this.isLimit( element ) ) {ntttif ( element.parent ) {nttttelement =
element.parent;nttt} else {nttttbreak;nttt}ntt}nnttreturn
element;nt}nnt/**nt * Checks whether the attribute is allowed in
selection:nt *nt * * if the selection is not collapsed, then checks if the
attribute is allowed on any of nodes in that range,nt * * if the selection
is collapsed, then checks if on the selection position there&#39;s a text
with thent * specified attribute allowed.nt *nt * @param
{module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection}
selectionnt * Selection which will be checked.nt * @param {String}
attribute The name of the attribute to check.nt * @returns {Boolean}nt
*/ntcheckAttributeInSelection( selection, attribute ) {nttif (
selection.isCollapsed ) {nttt// Check whether schema allows for a text with
the attribute in the selection.ntttreturn this.checkAttribute( [
…selection.getFirstPosition().getAncestors(), &#39;$text&#39; ], attribute
);ntt} else {ntttconst ranges = selection.getRanges();nnttt// For all
ranges, check nodes in them until you find a node that is allowed to have
the attribute.ntttfor ( const range of ranges ) {nttttfor ( const value of
range ) {ntttttif ( this.checkAttribute( value.item, attribute ) )
{ntttttt// If we found a node that is allowed to have the attribute, return
true.nttttttreturn true;nttttt}ntttt}nttt}ntt}nntt// If we haven&#39;t
found such node, return false.nttreturn false;nt}nnt/**nt * Transforms the
given set of ranges into a set of ranges where the given attribute is
allowed (and can be applied).nt *nt * @param
{Array.&lt;module:engine/model/range~Range&gt;} ranges Ranges to be
validated.nt * @param {String} attribute The name of the attribute to
check.nt * @returns {Array.&lt;module:engine/model/range~Range&gt;} Ranges
in which the attribute is allowed.nt */ntgetValidRanges( ranges, attribute
) {nttconst validRanges = [];nnttfor ( const range of ranges ) {ntttlet
last = range.start;ntttlet from = range.start;ntttconst to =
range.end;nntttfor ( const value of range.getWalker() ) {nttttif (
!this.checkAttribute( value.item, attribute ) ) {ntttttif ( !from.isEqual(
last ) ) {nttttttvalidRanges.push( new Range( from, last )
);nttttt}nntttttfrom = value.nextPosition;ntttt}nnttttlast =
value.nextPosition;nttt}nntttif ( from &amp;&amp; !from.isEqual( to ) )
{nttttvalidRanges.push( new Range( from, to ) );nttt}ntt}nnttreturn
validRanges;nt}nnt/**nt * Basing on given the `position`, finds and returns
a {@link module:engine/model/range~Range range} which isnt * nearest to
that `position` and is a correct range for selection.nt *nt * The correct
selection range might be collapsed when it is located in a position where
the text node can be placed.nt * Non-collapsed range is returned when
selection can be placed around element marked as an "object&quot; innt *
the {@link module:engine/model/schema~Schema schema}.nt *nt * Direction of
searching for the nearest correct selection range can be specified as:nt
*nt * * `both` - searching will be performed in both ways,nt * * `forward`
- searching will be performed only forward,nt * * `backward` - searching
will be performed only backward.nt *nt * When valid selection range cannot
be found, `null` is returned.nt *nt * @param
{module:engine/model/position~Position} position Reference position where
new selection range should be looked for.nt * @param
{&#39;both&#39;|&#39;forward&#39;|&#39;backward&#39;}
[direction=&#39;both&#39;] Search direction.nt * @returns
{module:engine/model/range~Range|null} Nearest selection range or `null` if
one cannot be found.nt */ntgetNearestSelectionRange( position, direction =
&#39;both&#39; ) {ntt// Return collapsed range if provided position is
valid.nttif ( this.checkChild( position, &#39;$text&#39; ) ) {ntttreturn
new Range( position );ntt}nnttlet backwardWalker, forwardWalker;nnttif (
direction == &#39;both&#39; || direction == &#39;backward&#39; )
{ntttbackwardWalker = new TreeWalker( { startPosition: position, direction:
&#39;backward&#39; } );ntt}nnttif ( direction == &#39;both&#39; ||
direction == &#39;forward&#39; ) {ntttforwardWalker = new TreeWalker( {
startPosition: position } );ntt}nnttfor ( const data of combineWalkers(
backwardWalker, forwardWalker ) ) {ntttconst type = ( data.walker ==
backwardWalker ? &#39;elementEnd&#39; : &#39;elementStart&#39; );ntttconst
value = data.value;nntttif ( value.type == type &amp;&amp; this.isObject(
value.item ) ) {nttttreturn Range.createOn( value.item );nttt}nntttif (
this.checkChild( value.nextPosition, &#39;$text&#39; ) ) {nttttreturn new
Range( value.nextPosition );nttt}ntt}nnttreturn null;nt}nnt/**nt * Tries to
find position ancestors that allows to insert given node.nt * It starts
searching from the given position and goes node by node to the top of the
model treent * as long as {@link module:engine/model/schema~Schema#isLimit
limit element},nt * {@link module:engine/model/schema~Schema#isObject
object element} or top-most ancestor won&#39;t be reached.nt *nt * @params
{module:engine/model/node~Node} node Node for which allowed parent should
be found.nt * @params {module:engine/model/position~Position} position
Position from searching will start.nt * @returns
{module:engine/model/element~Element|null} element Allowed parent or null
if nothing was found.nt */ntfindAllowedParent( node, position ) {nttlet
parent = position.parent;nnttwhile ( parent ) {ntttif ( this.checkChild(
parent, node ) ) {nttttreturn parent;nttt}nnttt// Do not split limit
elements and objects.ntttif ( this.isLimit( parent ) || this.isObject(
parent ) ) {nttttreturn null;nttt}nntttparent =
parent.parent;ntt}nnttreturn null;nt}nnt/**nt * Removes attributes
disallowed by the schema.nt *nt * @param
{Iterable.&lt;module:engine/model/node~Node&gt;} nodes Nodes that will be
filtered.nt * @param {module:engine/model/writer~Writer} writernt
*/ntremoveDisallowedAttributes( nodes, writer ) {nttfor ( const node of
nodes ) {ntttfor ( const attribute of node.getAttributeKeys() ) {nttttif (
!this.checkAttribute( node, attribute ) ) {ntttttwriter.removeAttribute(
attribute, node );ntttt}nttt}nntttif ( node.is( &#39;element&#39; ) )
{nttttthis.removeDisallowedAttributes( node.getChildren(), writer
);nttt}ntt}nt}nnt/**nt * @privatent */nt_clearCache()
{nttthis._compiledDefinitions = null;nt}nnt/**nt * @privatent
*/nt_compile() {nttconst compiledDefinitions = {};nttconst sourceRules =
this._sourceDefinitions;nttconst itemNames = Object.keys( sourceRules
);nnttfor ( const itemName of itemNames ) {ntttcompiledDefinitions[
itemName ] = compileBaseItemRule( sourceRules[ itemName ], itemName
);ntt}nnttfor ( const itemName of itemNames ) {ntttcompileAllowContentOf(
compiledDefinitions, itemName );ntt}nnttfor ( const itemName of itemNames )
{ntttcompileAllowWhere( compiledDefinitions, itemName );ntt}nnttfor ( const
itemName of itemNames ) {ntttcompileAllowAttributesOf( compiledDefinitions,
itemName );ntttcompileInheritPropertiesFrom( compiledDefinitions, itemName
);ntt}nnttfor ( const itemName of itemNames ) {ntttcleanUpAllowIn(
compiledDefinitions, itemName );ntttcleanUpAllowAttributes(
compiledDefinitions, itemName );ntt}nnttthis._compiledDefinitions =
compiledDefinitions;nt}nnt/**nt * @privatent * @param
{module:engine/model/schema~SchemaCompiledItemDefinition} defnt * @param
{module:engine/model/schema~SchemaContext} contextnt * @param {Number}
contextItemIndexnt */nt_checkContextMatch( def, context, contextItemIndex =
context.length - 1 ) {nttconst contextItem = context.getItem(
contextItemIndex );nnttif ( def.allowIn.includes( contextItem.name ) )
{ntttif ( contextItemIndex == 0 ) {nttttreturn true;nttt} else {nttttconst
parentRule = this.getDefinition( contextItem );nnttttreturn
this._checkContextMatch( parentRule, context, contextItemIndex - 1
);nttt}ntt} else {ntttreturn false;ntt}nt}n}nnmix( Schema, ObservableMixin
);nn/**n * Event fired when the {@link checkChild} method is called. It
allows plugging inn * additional behavior – e.g. implementing rules which
cannot be defined using the declarativen * {@link
module:engine/model/schema~SchemaItemDefinition} interface.n *n * *Note:*
The {@link addChildCheck} method is a more handy way to register callbacks.
Internally,n * it registers a listener to this event but comes with a
simpler API and it is the recommended choicen * in most of the cases.n *n *
The {@link checkChild} method fires an event because it isn * {@link
module:utils/observablemixin~ObservableMixin#decorate decorated} with it.
Thanks to that you cann * use this event in a various way, but the most
important use case is overriding standard behaviour of then *
`checkChild()` method. Let&#39;s see a typical listener template:n *n
*ttschema.on( &#39;checkChild&#39;, ( evt, args ) =&gt; {n *tttconst
context = args[ 0 ];n *tttconst childDefinition = args[ 1 ];n *tt}, {
priority: &#39;high&#39; } );n *n * The listener is added with a `high`
priority to be executed before the default method is really called. The
`args` callbackn * parameter contains arguments passed to `checkChild(
context, child )`. However, the `context` parameter is alreadyn *
normalized to a {@link module:engine/model/schema~SchemaContext} instance
and `child` to an * {@link
module:engine/model/schema~SchemaCompiledItemDefinition} instance, so you
don&#39;t have to worry aboutn * the various ways how `context` and `child`
may be passed to `checkChild()`.n *n * *Note:* `childDefinition` may be
`undefined` if `checkChild()` was called with a non-registered element.n *n
* So, in order to implement a rule "disallow `heading1` in
`blockQuote`&quot; you can add such a listener:n *n *ttschema.on(
&#39;checkChild&#39;, ( evt, args ) =&gt; {n *tttconst context = args[ 0
];n *tttconst childDefinition = args[ 1 ];n *n *tttif ( context.endsWith(
&#39;blockQuote&#39; ) &amp;&amp; childDefinition &amp;&amp;
childDefinition.name == &#39;heading1&#39; ) {n *tttt// Prevent next
listeners from being called.n *ttttevt.stop();n *tttt// Set the
checkChild()&#39;s return value.n *ttttevt.return = false;n *ttt}n *tt}, {
priority: &#39;high&#39; } );n *n * Allowing elements in specific contexts
will be a far less common use case, because it&#39;s normally handled byn *
`allowIn` rule from {@link module:engine/model/schema~SchemaItemDefinition}
but if you have a complex scenarion * where `listItem` should be allowed
only in element `foo` which must be in element `bar`, then this would be
the way:n *n *ttschema.on( &#39;checkChild&#39;, ( evt, args ) =&gt; {n
*tttconst context = args[ 0 ];n *tttconst childDefinition = args[ 1 ];n *n
*tttif ( context.endsWith( &#39;bar foo&#39; ) &amp;&amp;
childDefinition.name == &#39;listItem&#39; ) {n *tttt// Prevent next
listeners from being called.n *ttttevt.stop();n *tttt// Set the
checkChild()&#39;s return value.n *ttttevt.return = true;n *ttt}n *tt}, {
priority: &#39;high&#39; } );n *n * @event checkChildn * @param {Array}
args The `checkChild()`&#39;s arguments.n */nn/**n * Event fired when the
{@link checkAttribute} method is called. It allows plugging inn *
additional behavior – e.g. implementing rules which cannot be defined using
the declarativen * {@link module:engine/model/schema~SchemaItemDefinition}
interface.n *n * *Note:* The {@link addAttributeCheck} method is a more
handy way to register callbacks. Internally,n * it registers a listener to
this event but comes with a simpler API and it is the recommended choicen *
in most of the cases.n *n * The {@link checkAttribute} method fires an
event because it&#39;sn * {@link
module:utils/observablemixin~ObservableMixin#decorate decorated} with it.
Thanks to that you cann * use this event in a various way, but the most
important use case is overriding standard behaviour of then *
`checkAttribute()` method. Let&#39;s see a typical listener template:n *n
*ttschema.on( &#39;checkAttribute&#39;, ( evt, args ) =&gt; {n *tttconst
context = args[ 0 ];n *tttconst attributeName = args[ 1 ];n *tt}, {
priority: &#39;high&#39; } );n *n * The listener is added with a `high`
priority to be executed before the default method is really called. The
`args` callbackn * parameter contains arguments passed to `checkAttribute(
context, attributeName )`. However, the `context` parameter is alreadyn *
normalized to a {@link module:engine/model/schema~SchemaContext} instance,
so you don&#39;t have to worry aboutn * the various ways how `context` may
be passed to `checkAttribute()`.n *n * So, in order to implement a rule
"disallow `bold` in a text which is in a `heading1` you can add such a
listener:n *n *ttschema.on( &#39;checkAttribute&#39;, ( evt, args ) =&gt;
{n *tttconst context = args[ 0 ];n *tttconst atributeName = args[ 1 ];n *n
*tttif ( context.endsWith( &#39;heading1 $text&#39; ) &amp;&amp;
attributeName == &#39;bold&#39; ) {n *tttt// Prevent next listeners from
being called.n *ttttevt.stop();n *tttt// Set the checkAttribute()&#39;s
return value.n *ttttevt.return = false;n *ttt}n *tt}, { priority:
&#39;high&#39; } );n *n * Allowing attributes in specific contexts will be
a far less common use case, because it&#39;s normally handled byn *
`allowAttributes` rule from {@link
module:engine/model/schema~SchemaItemDefinition} but if you have a complex
scenarion * where `bold` should be allowed only in element `foo` which must
be in element `bar`, then this would be the way:n *n *ttschema.on(
&#39;checkAttribute&#39;, ( evt, args ) =&gt; {n *tttconst context = args[
0 ];n *tttconst atributeName = args[ 1 ];n *n *tttif ( context.endsWith(
&#39;bar foo $text&#39; ) &amp;&amp; attributeName == &#39;bold&#39; ) {n
*tttt// Prevent next listeners from being called.n *ttttevt.stop();n
*tttt// Set the checkAttribute()&#39;s return value.n *ttttevt.return =
true;n *ttt}n *tt}, { priority: &#39;high&#39; } );n *n * @event
checkAttributen * @param {Array} args The `checkAttribute()`&#39;s
arguments.n */nn/**n * A definition of a {@link
module:engine/model/schema~Schema schema} item.n *n * You can define the
following rules:n *n * * `allowIn` – a string or an array of strings.
Defines in which other items this item will be allowed.n * *
`allowAttributes` – a string or an array of strings. Defines allowed
attributes of the given item.n * * `allowContentOf` – a string or an array
of strings. Inherit "allowed children&quot; from other items.n * *
`allowWhere` – a string or an array of strings. Inherit "allowed in&quot;
from other items.n * * `allowAttributesOf` – a string or an array of
strings. Inherit attributes from other items.n * * `inheritTypesFrom` – a
string or an array of strings. Inherit `is*` properties of other items.n *
* `inheritAllFrom` – a string. A shorthand for `allowContentOf`,
`allowWhere`, `allowAttributesOf`, `inheritTypesFrom`.n * * additionall,
you can define the following `is*` properties: `isBlock`, `isLimit`,
`isObject`. Read about them below.n *n * # The is* propertiesn *n * There
are 3 commonly used `is*` properties. Their role is to assign additional
semantics to schema items.n * You can define more properties but you will
also need to implement support for them in the existing editor features.n
*n * * `isBlock` – whether this item is paragraph-like. Generally speaking,
a content is usually made out of blocksn * like paragraphs, list items,
images, headings, etc. All these elements are marked as blocks. A blockn *
should not allow another block inside. Note: there&#39;s also the `$block`
generic item which has `isBlock` set to `true`.n * Most block type items
will inherit from `$block` (through `inheritAllFrom`).n * * `isLimit` – can
be understood as whether this element should not be split by
&lt;kbd&gt;Enter&lt;/kbd&gt;.n * Examples of limit elements – `$root`,
table cell, image caption, etc. In other words, all actions which happen
insiden * a limit element are limitted to its content.n * * `isObject` –
whether item is "self-contained&quot; and should be treated as a whole.
Examples of object elements –n * `image`, `table`, `video`, etc.n *n * #
Generic itemsn *n * There are three basic generic items: `$root`, `$block`
and `$text`.n * They are defined as follows:n *n *ttthis.schema.register(
&#39;$root&#39;, {n *tttisLimit: truen *tt} );n *ttthis.schema.register(
&#39;$block&#39;, {n *tttallowIn: &#39;$root&#39;,n *tttisBlock: truen *tt}
);n *ttthis.schema.register( &#39;$text&#39;, {n *tttallowIn:
&#39;$block&#39;n *tt} );n *n * They reflect a typical editor content which
is contained within one root, consists of several blocksn * (paragraphs,
lists items, headings, images) which, in turn, may contain text inside.n *n
* By inheriting from the generic items you can define new items which will
get extended by other editor features.n * Read more about generic types in
the {@linkTODO Defining schema} guide.n *n * # Example definitionsn *n *
Allow `paragraph` in roots and block quotes:n *n *ttschema.register(
&#39;paragraph&#39;, {n *tttallowIn: [ &#39;$root&#39;,
&#39;blockQuote&#39; ],n *tttisBlock: truen *tt} );n *n * Allow `paragraph`
everywhere where `$block` is allowed (i.e. in `$root`):n *n
*ttschema.register( &#39;paragraph&#39;, {n *tttallowWhere:
&#39;$block&#39;,n *tttisBlock: truen *tt} );n *n * Make `image` a block
object, which is allowed everywhere where `$block` is.n * Also, allow `src`
and `alt` attributes on it:n *n *ttschema.register( &#39;image&#39;, {n
*tttallowWhere: &#39;$block&#39;,n *tttallowAttributes: [ &#39;src&#39;,
&#39;alt&#39; ],n *tttisBlock: true,n *tttisObject: truen *tt} );n *n *
Make `caption` allowed in `image` and make it allow all the content of
`$block`s (usually, `$text`).n * Also, mark it as a limit element so it
can&#39;t be split:n *n *ttschema.register( &#39;caption&#39;, {n
*tttallowIn: &#39;image&#39;,n *tttallowContentOf: &#39;$block&#39;,n
*tttisLimit: truen *tt} );n *n * Make `listItem` inherit all from `$block`
but also allow additional attributes:n *n *ttschema.register(
&#39;listItem&#39;, {n *tttinheritAllFrom: &#39;$block&#39;,n
*tttallowAttributes: [ &#39;type&#39;, &#39;indent&#39; ]n *tt} );n *n *
Which translates to:n *n *ttschema.register( &#39;listItem&#39;, {n
*tttallowWhere: &#39;$block&#39;,n *tttallowContentOf: &#39;$block&#39;,n
*tttallowAttributesOf: &#39;$block&#39;,n *tttinheritTypesFrom:
&#39;$block&#39;,n *tttallowAttributes: [ &#39;type&#39;, &#39;indent&#39;
]n *tt} );n *n * # Tipsn *n * * Check schema definitions of existing
features to see how they are defined.n * * If you want to publish your
feature so other developers can use it, try to usen * generic items as much
as possible.n * * Keep your model clean – limit it to the actual data and
store information in an normalized way.n * * Remember about definining the
`is*` properties. They don&#39;t affect the allowed structures, but they
cann * affect how editor features treat your elements.n *n * @typedef
{Object} module:engine/model/schema~SchemaItemDefinitionn */nn/**n * A
simplified version of {@link
module:engine/model/schema~SchemaItemDefinition} aftern * compilation by
the {@link module:engine/model/schema~Schema schema}.n * Rules feed to the
schema by {@link module:engine/model/schema~Schema#register}n * and {@link
module:engine/model/schema~Schema#extend} are defined in then * {@link
module:engine/model/schema~SchemaItemDefinition} format.n * Later on, they
are compiled to `SchemaCompiledItemDefition` so when you use e.g.n * the
{@link module:engine/model/schema~Schema#getDefinition} method you get the
compiled version.n *n * The compiled version contains only the following
properties:n *n * * `name` property,n * * `is*` properties,n * * `allowIn`
array,n * * `allowAttributes` array.n *n * @typedef {Object}
module:engine/model/schema~SchemaCompiledItemDefinitionn */nn/**n * A
schema context – a list of ancestors of a given position in the document.n
*n * Considering such a position:n *n *tt&lt;$root&gt;n
*ttt&lt;blockQuote&gt;n *tttt&lt;paragraph&gt;n *ttttt^n
*tttt&lt;/paragraph&gt;n *ttt&lt;/blockQuote&gt;n *tt&lt;/$root&gt;n *n *
The context of this position is its {@link
module:engine/model/position~Position#getAncestors lists of ancestors}:n *n
*tt[ rootElement, blockQuoteElement, paragraphElement ]n *n * Contexts are
used in the {@link module:engine/model/schema~Schema#event:checkChild
`Schema#checkChild`} andn * {@link
module:engine/model/schema~Schema#event:checkAttribute
`Schema#checkAttribute`} events as a definitionn * of a place in the
document where the check occurs. The context instances are created based on
the first argumentsn * of the {@link
module:engine/model/schema~Schema#checkChild `Schema#checkChild()`} andn *
{@link module:engine/model/schema~Schema#checkAttribute
`Schema#checkAttribute()`} methods so whenn * using these methods you need
to use {@link module:engine/model/schema~SchemaContextDefinition}s.n
*/nexport class SchemaContext {nt/**nt * Creates an instance of the
context.nt *nt * @param
{module:engine/model/schema~SchemaContextDefinition} contextnt
*/ntconstructor( context ) {nttif ( context instanceof SchemaContext )
{ntttreturn context;ntt}nnttif ( typeof context == &#39;string&#39; )
{ntttcontext = [ context ];ntt} else if ( !Array.isArray( context ) )
{nttt// `context` is item or position.nttt// Position#getAncestors()
doesn&#39;t accept any parameters but it works just fine here.ntttcontext =
context.getAncestors( { includeSelf: true } );ntt}nnttif ( context[ 0 ]
&amp;&amp; typeof context[ 0 ] != &#39;string&#39; &amp;&amp; context[ 0
].is( &#39;documentFragment&#39; ) )
{ntttcontext.shift();ntt}nnttthis._items = context.map( mapContextItem
);nt}nnt/**nt * Number of items.nt *nt * @type {Number}nt */ntget length()
{nttreturn this._items.length;nt}nnt/**nt * The last item (the lowest
node).nt *nt * @type {module:engine/model/schema~SchemaContextItem}nt
*/ntget last() {nttreturn this._items[ this._items.length - 1 ];nt}nnt/**nt
* Iterable interface.nt *nt * Iterates over all context items.nt *nt *
@returns {Iterable.&lt;module:engine/model/schema~SchemaContextItem&gt;}nt
*/nt[ Symbol.iterator ]() {nttreturn this._items[ Symbol.iterator
]();nt}nnt/**nt * Returns new SchemaContext instance with additional itemnt
*nt * Item can be added as:nt *nt * ttconst context = new SchemaContext( [
&#39;$root&#39; ] );nt *nt * tt// An element.nt * ttconst fooElement =
writer.createElement( &#39;fooElement&#39; );nt * ttconst newContext =
context.push( fooElement ); // [ &#39;$root&#39;, &#39;fooElement&#39; ]nt
*nt * tt// A text node.nt * ttconst text = writer.createText(
&#39;foobar&#39; );nt * ttconst newContext = context.push( text ); // [
&#39;$root&#39;, &#39;$text&#39; ]nt *nt * tt// A string (element name).nt
* ttconst newContext = context.push( &#39;barElement&#39; ); // [
&#39;$root&#39;, &#39;barElement&#39; ]nt *nt * *Note*
{module:engine/model/node~Node} that is already in the model tree will be
added as the only item (without ancestors).nt *nt * @param
{String|module:engine/model/node~Node|Array&lt;String|module:engine/model/node~Node&gt;}
item Item that will be addednt * to current context.nt * @returns
{module:engine/model/schema~SchemaContext} New SchemaContext instance with
additional item.nt */ntpush( item ) {nttconst ctx = new SchemaContext( [
item ] );nnttctx._items = [ …this._items, …ctx._items ];nnttreturn
ctx;nt}nnt/**nt * Gets an item on the given index.nt *nt * @returns
{module:engine/model/schema~SchemaContextItem}nt */ntgetItem( index )
{nttreturn this._items[ index ];nt}nnt/**nt * Returns the names of items.nt
*nt * @returns {Iterable.&lt;String&gt;}nt */nt* getNames() {nttyield*
this._items.map( item =&gt; item.name );nt}nnt/**nt * Checks whether the
context ends with the given nodes.nt *nt *ttconst ctx = new SchemaContext(
[ rootElement, paragraphElement, textNode ] );nt *nt *ttctx.endsWith(
&#39;$text&#39; ); // -&gt; truent *ttctx.endsWith( &#39;paragraph
$text&#39; ); // -&gt; truent *ttctx.endsWith( &#39;$root&#39; ); // -&gt;
falsent *ttctx.endsWith( &#39;paragraph&#39; ); // -&gt; falsent *nt *
@param {String} querynt * @returns {Boolean}nt */ntendsWith( query )
{nttreturn Array.from( this.getNames() ).join( &#39; &#39; ).endsWith(
query );nt}n}nn/**n * The definition of a {@link
module:engine/model/schema~SchemaContext schema context}.n *n * Contexts
can be created in multiple ways:n *n * * By defining a *node* – in this
cases this node and all its ancestors will be used.n * * By defining a
*position* in the document – in this case all its ancestors will be used.n
* * By defining an **array of nodes** – in this case this array defines the
entire context.n * * By defining a **name of node** - in this case node
will be "mocked&quot;. It is not recommended because contextn * will be
unrealistic (e.g. attributes of these nodes are not specified). However, at
times this may be the onlyn * way to define the context (e.g. when checking
some hypothetical situation).n * * By defining an **array of node names**
(potentially, mixed with real nodes) – The same as **name of node**n * but
it is possible to create a path.n * * By defining a {@link
module:engine/model/schema~SchemaContext} instance - in this case the same
instance as providedn * will be return.n *n * Examples of context
definitions passed to the {@link
module:engine/model/schema~Schema#checkChild `Schema#checkChild()`}n *
method:n *n *tt// Assuming that we have a $root &gt; blockQuote &gt;
paragraph structure, the following coden *tt// will check node
&#39;foo&#39; in the following context:n *tt// [ rootElement,
blockQuoteElement, paragraphElement ]n *ttconst contextDefinition =
paragraphElement;n * ttconst childToCheck = &#39;foo&#39;;n
*ttschema.checkChild( contextDefinition, childToCheck );n *n *tt// Also
check in [ rootElement, blockQuoteElement, paragraphElement ].n
*ttschema.checkChild( Position.createAt( paragraphElement ), &#39;foo&#39;
);n *n *tt// Check in [ rootElement, paragraphElement ].n
*ttschema.checkChild( [ rootElement, paragraphElement ], &#39;foo&#39; );n
*n *tt// Check only fakeParagraphElement.n *ttschema.checkChild(
&#39;paragraph&#39;, &#39;foo&#39; );n *n *tt// Check in [ fakeRootElement,
fakeBarElement, paragraphElement ].n *ttschema.checkChild( [
&#39;$root&#39;, &#39;bar&#39;, paragraphElement ], &#39;foo&#39; );n *n *
All these `checkChild()` calls will fire {@link
module:engine/model/schema~Schema#event:checkChild `Schema#checkChild`}n *
events in which `args[ 0 ]` is an instance of the context. Therefore, you
can write a listener like this:n *n *ttschema.on( &#39;checkChild&#39;, (
evt, args ) =&gt; {n *tttconst ctx = args[ 0 ];n *n *tttconsole.log(
Array.from( ctx.getNames() ) );n *tt} );n *n * Which will log the
following:n *n *tt[ &#39;$root&#39;, &#39;blockQuote&#39;,
&#39;paragraph&#39; ]n *tt[ &#39;$root&#39;, &#39;paragraph&#39; ]n *tt[
&#39;$root&#39;, &#39;bar&#39;, &#39;paragraph&#39; ]n *n * Note: When
using the {@link module:engine/model/schema~Schema#checkAttribute
`Schema#checkAttribute()`} methodn * you may want to check whether a text
node may have an attribute. A {@link module:engine/model/text~Text} is an *
correct way to define a context so you can do this:n *n
*ttschema.checkAttribute( textNode, &#39;bold&#39; );n *n * But sometimes
you want to check whether a text at a given position might&#39;ve had some
attribute,n * in which case you can create a context by mising an array of
elements with a `&#39;$text&#39;` string:n *n *tt// Check in [ rootElement,
paragraphElement, textNode ].n *ttschema.checkChild( [
…positionInParagraph.getAncestors(), &#39;$text&#39; ], &#39;bold&#39; );n
*n * @typedef
{module:engine/model/node~Node|module:engine/model/position~Position|module:engine/model/schema~SchemaContext|n
* String|Array.&lt;String|module:engine/model/node~Node&gt;}
module:engine/model/schema~SchemaContextDefinitionn */nn/**n * An item of
the {@link module:engine/model/schema~SchemaContext schema context}.n *n *
It contains 3 properties:n *n * * `name` – the name of this item,n * * `*
getAttributeKeys()` – a generator of keys of item attributes,n * *
`getAttribute( keyName )` – a method to get attribute values.n *n * The
context item interface is a highly simplified version of {@link
module:engine/model/node~Node} and its rolen * is to expose only the
information which schema checks are able to provide (which is the name of
the node andn * node&#39;s attributes).n *n *ttschema.on(
&#39;checkChild&#39;, ( evt, args ) =&gt; {n *tttconst ctx = args[ 0 ];n
*tttconst firstItem = ctx.getItem( 0 );n *n *tttconsole.log( firstItem.name
); // -&gt; &#39;$root&#39;n *tttconsole.log( firstItem.getAttribute(
&#39;foo&#39; ) ); // -&gt; &#39;bar&#39;n *tttconsole.log( Array.from(
firstItem.getAttributeKeys() ) ); // -&gt; [ &#39;foo&#39;, &#39;faa&#39;
]n *tt} );n *n * @typedef {Object}
module:engine/model/schema~SchemaContextItemn */nnfunction
compileBaseItemRule( sourceItemRules, itemName ) {ntconst itemRule =
{nttname: itemName,nnttallowIn: [],nttallowContentOf: [],nttallowWhere:
[],nnttallowAttributes: [],nttallowAttributesOf: [],nnttinheritTypesFrom:
[]nt};nntcopyTypes( sourceItemRules, itemRule );nntcopyProperty(
sourceItemRules, itemRule, &#39;allowIn&#39; );ntcopyProperty(
sourceItemRules, itemRule, &#39;allowContentOf&#39; );ntcopyProperty(
sourceItemRules, itemRule, &#39;allowWhere&#39; );nntcopyProperty(
sourceItemRules, itemRule, &#39;allowAttributes&#39; );ntcopyProperty(
sourceItemRules, itemRule, &#39;allowAttributesOf&#39; );nntcopyProperty(
sourceItemRules, itemRule, &#39;inheritTypesFrom&#39;
);nntmakeInheritAllWork( sourceItemRules, itemRule );nntreturn
itemRule;n}nnfunction compileAllowContentOf( compiledDefinitions, itemName
) {ntfor ( const allowContentOfItemName of compiledDefinitions[ itemName
].allowContentOf ) {ntt// The allowContentOf property may point to an
unregistered element.nttif ( compiledDefinitions[ allowContentOfItemName ]
) {ntttconst allowedChildren = getAllowedChildren( compiledDefinitions,
allowContentOfItemName );nntttallowedChildren.forEach( allowedItem =&gt;
{nttttallowedItem.allowIn.push( itemName );nttt} );ntt}nt}nntdelete
compiledDefinitions[ itemName ].allowContentOf;n}nnfunction
compileAllowWhere( compiledDefinitions, itemName ) {ntfor ( const
allowWhereItemName of compiledDefinitions[ itemName ].allowWhere )
{nttconst inheritFrom = compiledDefinitions[ allowWhereItemName ];nntt//
The allowWhere property may point to an unregistered element.nttif (
inheritFrom ) {ntttconst allowedIn =
inheritFrom.allowIn;nntttcompiledDefinitions[ itemName ].allowIn.push(
…allowedIn );ntt}nt}nntdelete compiledDefinitions[ itemName
].allowWhere;n}nnfunction compileAllowAttributesOf( compiledDefinitions,
itemName ) {ntfor ( const allowAttributeOfItem of compiledDefinitions[
itemName ].allowAttributesOf ) {nttconst inheritFrom = compiledDefinitions[
allowAttributeOfItem ];nnttif ( inheritFrom ) {ntttconst inheritAttributes
= inheritFrom.allowAttributes;nntttcompiledDefinitions[ itemName
].allowAttributes.push( …inheritAttributes );ntt}nt}nntdelete
compiledDefinitions[ itemName ].allowAttributesOf;n}nnfunction
compileInheritPropertiesFrom( compiledDefinitions, itemName ) {ntconst item
= compiledDefinitions[ itemName ];nntfor ( const inheritPropertiesOfItem of
item.inheritTypesFrom ) {nttconst inheritFrom = compiledDefinitions[
inheritPropertiesOfItem ];nnttif ( inheritFrom ) {ntttconst typeNames =
Object.keys( inheritFrom ).filter( name =&gt; name.startsWith( &#39;is&#39;
) );nntttfor ( const name of typeNames ) {nttttif ( !( name in item ) )
{ntttttitem[ name ] = inheritFrom[ name ];ntttt}nttt}ntt}nt}nntdelete
item.inheritTypesFrom;n}nn// Remove items which weren&#39;t registered
(because it may break some checks or we&#39;d need to complicate them).n//
Make sure allowIn doesn&#39;t contain repeated values.nfunction
cleanUpAllowIn( compiledDefinitions, itemName ) {ntconst itemRule =
compiledDefinitions[ itemName ];ntconst existingItems =
itemRule.allowIn.filter( itemToCheck =&gt; compiledDefinitions[ itemToCheck
] );nntitemRule.allowIn = Array.from( new Set( existingItems )
);n}nnfunction cleanUpAllowAttributes( compiledDefinitions, itemName )
{ntconst itemRule = compiledDefinitions[ itemName
];nntitemRule.allowAttributes = Array.from( new Set(
itemRule.allowAttributes ) );n}nnfunction copyTypes( sourceItemRules,
itemRule ) {ntfor ( const sourceItemRule of sourceItemRules ) {nttconst
typeNames = Object.keys( sourceItemRule ).filter( name =&gt;
name.startsWith( &#39;is&#39; ) );nnttfor ( const name of typeNames )
{ntttitemRule[ name ] = sourceItemRule[ name ];ntt}nt}n}nnfunction
copyProperty( sourceItemRules, itemRule, propertyName ) {ntfor ( const
sourceItemRule of sourceItemRules ) {nttif ( typeof sourceItemRule[
propertyName ] == &#39;string&#39; ) {ntttitemRule[ propertyName ].push(
sourceItemRule[ propertyName ] );ntt} else if ( Array.isArray(
sourceItemRule[ propertyName ] ) ) {ntttitemRule[ propertyName ].push(
…sourceItemRule[ propertyName ] );ntt}nt}n}nnfunction makeInheritAllWork(
sourceItemRules, itemRule ) {ntfor ( const sourceItemRule of
sourceItemRules ) {nttconst inheritFrom =
sourceItemRule.inheritAllFrom;nnttif ( inheritFrom )
{ntttitemRule.allowContentOf.push( inheritFrom
);ntttitemRule.allowWhere.push( inheritFrom
);ntttitemRule.allowAttributesOf.push( inheritFrom
);ntttitemRule.inheritTypesFrom.push( inheritFrom );ntt}nt}n}nnfunction
getAllowedChildren( compiledDefinitions, itemName ) {ntconst itemRule =
compiledDefinitions[ itemName ];nntreturn getValues( compiledDefinitions
).filter( def =&gt; def.allowIn.includes( itemRule.name ) );n}nnfunction
getValues( obj ) {ntreturn Object.keys( obj ).map( key =&gt; obj[ key ]
);n}nnfunction mapContextItem( ctxItem ) {ntif ( typeof ctxItem ==
&#39;string&#39; ) {nttreturn {ntttname: ctxItem,nnttt* getAttributeKeys()
{},nntttgetAttribute() {}ntt};nt} else {nttreturn {nttt// &#39;$text&#39;
means text nodes and text proxies.ntttname: ctxItem.is( &#39;element&#39; )
? ctxItem.name : &#39;$text&#39;,nnttt* getAttributeKeys() {nttttyield*
ctxItem.getAttributeKeys();nttt},nntttgetAttribute( key ) {nttttreturn
ctxItem.getAttribute( key );nttt}ntt};nt}n}nn// Generator function
returning values from provided walkers, switching between them at each
iteration. If only one walkern// is provided it will return data only from
that walker.n//n// @param {module:engine/module/treewalker~TreeWalker}
[backward] Walker iterating in backward direction.n// @param
{module:engine/module/treewalker~TreeWalker} [forward] Walker iterating in
forward direction.n// @returns {Iterable.&lt;Object&gt;} <a
href="../../../../Object.html">Object</a> returned at each iteration
contains `value` and `walker` (informing which walker returnedn// given
value) fields.nfunction* combineWalkers( backward, forward ) {ntlet done =
false;nntwhile ( !done ) {nttdone = true;nnttif ( backward ) {ntttconst
step = backward.next();nntttif ( !step.done ) {nttttdone = false;nttttyield
{ntttttwalker: backward,ntttttvalue: step.valuentttt};nttt}ntt}nnttif (
forward ) {ntttconst step = forward.next();nntttif ( !step.done )
{nttttdone = false;nttttyield {ntttttwalker: forward,ntttttvalue:
step.valuentttt};nttt}ntt}nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/schema.jsn// module id = nulln// module
chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module engine/conversion/upcastdispatchern */nnimport ViewConsumable from
&#39;./viewconsumable&#39;;nimport ModelRange from
&#39;../model/range&#39;;nimport ModelPosition from
&#39;../model/position&#39;;nimport { SchemaContext } from
&#39;../model/schema&#39;;nnimport CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nimport EmitterMixin
from &#39;@ckeditor/ckeditor5-utils/src/emittermixin&#39;;nimport mix from
&#39;@ckeditor/ckeditor5-utils/src/mix&#39;;nn/**n * `UpcastDispatcher` is
a central point of {@link module:engine/view/view view} conversion, which
is a process ofn * converting given {@link
module:engine/view/documentfragment~DocumentFragment view document
fragment} orn * {@link module:engine/view/element~Element} into another
structure.n * In default application, {@link module:engine/view/view view}
is converted to {@link module:engine/model/model}.n *n * During conversion
process, for all {@link module:engine/view/node~Node view nodes} from the
converted view document fragment,n * `UpcastDispatcher` fires corresponding
events. Special callbacks called "converters&quot; should listen ton *
`UpcastDispatcher` for those events.n *n * Each callback, as the second
argument, is passed a special object `data` that has `viewItem`,
`modelCursor` andn * `modelRange` properties. `viewItem` property contains
{@link module:engine/view/node~Node view node} orn * {@link
module:engine/view/documentfragment~DocumentFragment view document
fragment}n * that is converted at the moment and might be handled by the
callback. `modelRange` property should be used to save the resultn * of
conversion and is always a {@link module:engine/model/range~Range} when
conversion result is correct.n * `modelCursor` property is a {@link
module:engine/model/position~Position position} on which conversion result
will be insertedn * and is a context according to {@link
module:engine/model/schema~Schema schema} will be checked before the
conversion.n * See also {@link ~UpcastDispatcher#convert}. It is also
shared by reference by all callbacks listening to given event.n *n * The
third parameter passed to a callback is an instance of {@link
~UpcastDispatcher}n * which provides additional tools for converters.n *n *
Examples of providing callbacks for `UpcastDispatcher`:n *n *tt// Converter
for links (&lt;a&gt;).n *ttupcastDispatcher.on( &#39;element:a&#39;, ( evt,
data, conversionApi ) =&gt; {n *tttif ( conversionApi.consumable.consume(
data.viewItem, { name: true, attributes: [ &#39;href&#39; ] } ) ) {n
*tttt// &lt;a&gt; element is inline and is represented by an attribute in
the model.n *tttt// This is why we need to convert only children.n
*ttttconst { modelRange } = conversionApi.convertChildren( data.viewItem,
data.modelCursor );n *n *ttttfor ( let item of modelRange.getItems() ) {n
*tttttif ( conversionApi.schema.checkAttribute( item, &#39;linkHref&#39; )
) {n *ttttttconversionApi.writer.setAttribute( &#39;linkHref&#39;,
data.viewItem.getAttribute( &#39;href&#39; ), item );n *ttttt}n *tttt}n
*ttt}n *tt} );n *n *tt// Convert all elements which have no custom
converter into paragraph (autoparagraphing).n *  tdata.viewToModel.on(
&#39;element&#39;, ( evt, data, conversionApi ) =&gt; {n *  t t// When
element is already consumed by higher priority converters then do nothing.n
*  t tif ( conversionApi.consumable.test( data.viewItem, { name:
data.viewItem.name } ) ) {n *  t tttconst paragraph =
conversionApi.writer.createElement( &#39;paragraph&#39; );n *n *  t ttt//
Find allowed parent for paragraph that we are going to insert. If current
parent does not allown *  t ttt// to insert paragraph but one of the
ancestors does then split nodes to allowed parent.n *  t tttconst
splitResult = conversionApi.splitToAllowedParent( paragraph,
data.modelCursor );n *n *  t ttt// When there is no split result it means
that we can&#39;t insert paragraph in this position.n *  t tttif (
splitResult ) {n *  t tttt// Insert paragraph in allowed position.n *  t
ttttconversionApi.writer.insert( paragraph, splitResult.position );n *n * 
t tttt// Convert children to paragraph.n *  t ttttconst { modelRange } =
conversionApi.convertChildren( data.viewItem, Position.createAt( paragraph
) );n *n * tttttt// Set as conversion result, attribute converters may use
this property.n *  t ttttdata.modelRange = new Range(
Position.createBefore( paragraph ), modelRange.end );n *n *  t tttt//
Continue conversion inside paragraph.n *  t ttttdata.modelCursor =
data.modelRange.end;n *  t ttt}n *  t tt}n *  t t}n *  t }, { priority:
&#39;low&#39; } );n *n * Before each conversion process, `UpcastDispatcher`
fires {@link ~UpcastDispatcher#event:viewCleanup}n * event which can be
used to prepare tree view for conversion.n *n * @mixes
module:utils/emittermixin~EmitterMixinn * @fires viewCleanupn * @fires
elementn * @fires textn * @fires documentFragmentn */nexport default class
UpcastDispatcher {nt/**nt * Creates a `UpcastDispatcher` that operates
using passed API.nt *nt * @see
module:engine/conversion/upcastdispatcher~ViewConversionApint * @param
{Object} [conversionApi] Additional properties for interface that will be
passed to events firednt * by `UpcastDispatcher`.nt */ntconstructor(
conversionApi = {} ) {ntt/**ntt * List of elements that will be checked
after conversion process and if element in the list will be empty itntt *
will be removed from conversion result.ntt *ntt * After conversion process
list is cleared.ntt *ntt * @protectedntt * @type
{Set&lt;module:engine/model/element~Element&gt;}ntt
*/nttthis._removeIfEmpty = new Set();nntt/**ntt * Position in the temporary
structure where the converted content is inserted. The structure reflect
the context ofntt * the target position where the content will be inserted.
This property is build based on the context parameter of thentt * convert
method.ntt *ntt * @privatentt * @type
{module:engine/model/position~Position|null}ntt */nttthis._modelCursor =
null;nntt/**ntt * Interface passed by dispatcher to the events
callbacks.ntt *ntt * @member
{module:engine/conversion/upcastdispatcher~ViewConversionApi}ntt
*/nttthis.conversionApi = Object.assign( {}, conversionApi );nntt//
`convertItem`, `convertChildren` and `splitToAllowedParent` are bound to
this `UpcastDispatcher`ntt// instance and set on `conversionApi`. This way
only a part of `UpcastDispatcher` API is
exposed.nttthis.conversionApi.convertItem = this._convertItem.bind( this
);nttthis.conversionApi.convertChildren = this._convertChildren.bind( this
);nttthis.conversionApi.splitToAllowedParent =
this._splitToAllowedParent.bind( this );nt}nnt/**nt * Starts the conversion
process. The entry point for the conversion.nt *nt * @fires elementnt *
@fires textnt * @fires documentFragmentnt * @param
{module:engine/view/documentfragment~DocumentFragment|module:engine/view/element~Element}
viewItemnt * Part of the view to be converted.nt * @param
{module:engine/model/writer~Writer} writer Instance of model writer.nt *
@param {module:engine/model/schema~SchemaContextDefinition} [<a
href="'$root'">context=</a>] Elements will be converted according to this
context.nt * @returns
{module:engine/model/documentfragment~DocumentFragment} Model data that is
a result of the conversion processnt * wrapped in `DocumentFragment`.
Converted marker elements will be set as that document fragment&#39;snt *
{@link module:engine/model/documentfragment~DocumentFragment#markers static
markers map}.nt */ntconvert( viewItem, writer, context = [ &#39;$root&#39;
] ) {nttthis.fire( &#39;viewCleanup&#39;, viewItem );nntt// Create context
tree and set position in the top element.ntt// Items will be converted
according to this position.nttthis._modelCursor = createContextTree(
context, writer );nntt// Store writer in conversion as a conversion
APIntt// to be sure that conversion process will use the same
batch.nttthis.conversionApi.writer = writer;nntt// Create consumable values
list for conversion process.nttthis.conversionApi.consumable =
ViewConsumable.createFrom( viewItem );nntt// Custom data stored by
converter for conversion process.nttthis.conversionApi.store = {};nntt// Do
the conversion.nttconst { modelRange } = this._convertItem( viewItem,
this._modelCursor );nntt// Conversion result is always a document fragment
so let&#39;s create this fragment.nttconst documentFragment =
writer.createDocumentFragment();nntt// When there is a conversion
result.nttif ( modelRange ) {nttt// Remove all empty elements that was
added to #_removeIfEmpty list.ntttthis._removeEmptyElements();nnttt// Move
all items that was converted to context tree to document fragment.ntttfor (
const item of Array.from( this._modelCursor.parent.getChildren() ) )
{nttttwriter.append( item, documentFragment );nttt}nnttt// Extract
temporary markers elements from model and set as static markers
collection.ntttdocumentFragment.markers = extractMarkersFromModelFragment(
documentFragment, writer );ntt}nntt// Clear context
position.nttthis._modelCursor = null;nntt// Clear split
elements.nttthis._removeIfEmpty.clear();nntt// Clear conversion
API.nttthis.conversionApi.writer = null;nttthis.conversionApi.store =
null;nntt// Return fragment as conversion result.nttreturn
documentFragment;nt}nnt/**nt * @privatent * @see
module:engine/conversion/upcastdispatcher~ViewConversionApi#convertItemnt
*/nt_convertItem( viewItem, modelCursor ) {nttconst data = Object.assign( {
viewItem, modelCursor, modelRange: null } );nnttif ( viewItem.is(
&#39;element&#39; ) ) {ntttthis.fire( &#39;element:&#39; + viewItem.name,
data, this.conversionApi );ntt} else if ( viewItem.is( &#39;text&#39; ) )
{ntttthis.fire( &#39;text&#39;, data, this.conversionApi );ntt} else
{ntttthis.fire( &#39;documentFragment&#39;, data, this.conversionApi
);ntt}nntt// Handle incorrect conversion result.nttif ( data.modelRange
&amp;&amp; !( data.modelRange instanceof ModelRange ) ) {nttt/**nttt *
Incorrect conversion result was dropped.nttt *nttt * {@link
module:engine/model/range~Range Model range} should be a conversion
result.nttt *nttt * @error view-conversion-dispatcher-incorrect-resultnttt
*/ntttthrow new CKEditorError(
&#39;view-conversion-dispatcher-incorrect-result: Incorrect conversion
result was dropped.&#39; );ntt}nnttreturn { modelRange: data.modelRange,
modelCursor: data.modelCursor };nt}nnt/**nt * @privatent * @see
module:engine/conversion/upcastdispatcher~ViewConversionApi#convertChildrennt
*/nt_convertChildren( viewItem, modelCursor ) {nttconst modelRange = new
ModelRange( modelCursor );nttlet nextModelCursor = modelCursor;nnttfor (
const viewChild of Array.from( viewItem.getChildren() ) ) {ntttconst result
= this._convertItem( viewChild, nextModelCursor );nntttif (
result.modelRange instanceof ModelRange ) {nttttmodelRange.end =
result.modelRange.end;nttttnextModelCursor =
result.modelCursor;nttt}ntt}nnttreturn { modelRange, modelCursor:
nextModelCursor };nt}nnt/**nt * @privatent * @see
module:engine/conversion/upcastdispatcher~ViewConversionApi#splitToAllowedParentnt
*/nt_splitToAllowedParent( node, modelCursor ) {ntt// Try to find allowed
parent.nttconst allowedParent =
this.conversionApi.schema.findAllowedParent( node, modelCursor );nntt//
When there is no parent that allows to insert node then return `null`.nttif
( !allowedParent ) {ntttreturn null;ntt}nntt// When current position parent
allows to insert node then return this position.nttif ( allowedParent ===
modelCursor.parent ) {ntttreturn { position: modelCursor };ntt}nntt// When
allowed parent is in context tree.nttif (
this._modelCursor.parent.getAncestors().includes( allowedParent ) )
{ntttreturn null;ntt}nntt// Split element to allowed parent.nttconst
splitResult = this.conversionApi.writer.split( modelCursor, allowedParent
);nntt// Remember all elements that are created as a result of split.ntt//
This is important because at the end of conversion we want to remove all
empty split elements.ntt//ntt// Loop through positions between elements in
range (except split result position) and collect parents.ntt// &lt;<a
href="pos">notSplit><split1><split2></a>&lt;/<a
href="pos">split2></a>&lt;/<a href="omit">split1></a>&lt;<a
href="pos">split1></a>&lt;<a
href="pos">split2></a>&lt;/split2&gt;&lt;/split1&gt;&lt;/notSplit&gt;nttfor
( const position of splitResult.range.getPositions() ) {ntttif (
!position.isEqual( splitResult.position ) ) {nttttthis._removeIfEmpty.add(
position.parent );nttt}ntt}nnttreturn {ntttposition:
splitResult.position,ntttcursorParent:
splitResult.range.end.parentntt};nt}nnt/**nt * Checks if {@link
#_removeIfEmpty} contains empty elements and remove them.nt * We need to do
it smart because there could be elements that are not empty because
containsnt * other empty elements and after removing its children they
become available to remove.nt * We need to continue iterating over split
elements as long as any element will be removed.nt *nt * @privatent
*/nt_removeEmptyElements() {nttlet removed = false;nnttfor ( const element
of this._removeIfEmpty ) {ntttif ( element.isEmpty )
{nttttthis.conversionApi.writer.remove( element
);nttttthis._removeIfEmpty.delete( element );nttttremoved =
true;nttt}ntt}nnttif ( removed )
{ntttthis._removeEmptyElements();ntt}nt}nnt/**nt * Fired before the first
conversion event, at the beginning of upcast (view to model conversion)
process.nt *nt * @event viewCleanupnt * @param
{module:engine/view/documentfragment~DocumentFragment|module:engine/view/element~Element}nt
* viewItem Part of the view to be converted.nt */nnt/**nt * Fired when
{@link module:engine/view/element~Element} is converted.nt *nt * `element`
is a namespace event for a class of events. Names of actually called events
follow this pattern:nt * `element:&lt;elementName&gt;` where `elementName`
is the name of converted element. This way listeners may listen tont * all
elements conversion or to conversion of specific elements.nt *nt * @event
elementnt * @param {Object} data Conversion data. Keep in mind that this
object is shared by reference between allnt * callbacks that will be
called. This means that callbacks can override values if needed, and those
values willnt * be available in other callbacks.nt * @param
{module:engine/view/item~Item} data.viewItem Converted item.nt * @param
{module:engine/model/position~Position} data.modelCursor Position where a
converter should start changes.nt * Change this value for the next
converter to tell where the conversion should continue.nt * @param
{module:engine/model/range~Range} data.modelRange The current state of
conversion result. Every change tont * converted element should be
reflected by setting or modifying this property.nt * @param
{ViewConversionApi} conversionApi Conversion utilities to be used by
callback.nt */nnt/**nt * Fired when {@link module:engine/view/text~Text} is
converted.nt *nt * @event textnt * @see event:elementnt */nnt/**nt * Fired
when {@link module:engine/view/documentfragment~DocumentFragment} is
converted.nt *nt * @event documentFragmentnt * @see event:elementnt
*/n}nnmix( UpcastDispatcher, EmitterMixin );nn// Traverses given model item
and searches elements which marks marker range. Found element is removed
fromn// DocumentFragment but path of this element is stored in a Map which
is then returned.n//n// @param
{module:engine/view/documentfragment~DocumentFragment|module:engine/view/node~Node}
modelItem Fragment of model.n// @returns {Map&lt;String,
module:engine/model/range~Range&gt;} List of static markers.nfunction
extractMarkersFromModelFragment( modelItem, writer ) {ntconst
markerElements = new Set();ntconst markers = new Map();nnt// Create
ModelTreeWalker.ntconst range = ModelRange.createIn( modelItem
).getItems();nnt// Walk through DocumentFragment and collect marker
elements.ntfor ( const item of range ) {ntt// Check if current element is a
marker.nttif ( item.name == &#39;$marker&#39; ) {ntttmarkerElements.add(
item );ntt}nt}nnt// Walk through collected marker elements store its path
and remove its from the DocumentFragment.ntfor ( const markerElement of
markerElements ) {nttconst markerName = markerElement.getAttribute(
&#39;data-name&#39; );nttconst currentPosition =
ModelPosition.createBefore( markerElement );nntt// When marker of given
name is not stored it means that we have found the beginning of the
range.nttif ( !markers.has( markerName ) ) {ntttmarkers.set( markerName,
new ModelRange( ModelPosition.createFromPosition( currentPosition ) )
);ntt// Otherwise is means that we have found end of the marker range.ntt}
else {ntttmarkers.get( markerName ).end = ModelPosition.createFromPosition(
currentPosition );ntt}nntt// Remove marker element from
DocumentFragment.nttwriter.remove( markerElement );nt}nntreturn
markers;n}nn// Creates model fragment according to given context and
returns position in top element.nfunction createContextTree(
contextDefinition, writer ) {ntlet position;nntfor ( const item of new
SchemaContext( contextDefinition ) ) {nttconst attributes = {};nnttfor (
const key of item.getAttributeKeys() ) {ntttattributes[ key ] =
item.getAttribute( key );ntt}nnttconst current = writer.createElement(
item.name, attributes );nnttif ( position ) {ntttwriter.append( current,
position );ntt}nnttposition = ModelPosition.createAt( current
);nt}nntreturn position;n}nn/**n * Conversion interface that is registered
for given {@link
module:engine/conversion/upcastdispatcher~UpcastDispatcher}n * and is
passed as one of parameters when {@link
module:engine/conversion/upcastdispatcher~UpcastDispatcher dispatcher}n *
fires it&#39;s events.n *n * @interface ViewConversionApin */nn/**n *
Starts conversion of given item by firing an appropriate event.n *n * Every
fired event is passed (as first parameter) an object with `modelRange`
property. Every event may set and/orn * modify that property. When all
callbacks are done, the final value of `modelRange` property is returned by
this method.n * The `modelRange` must be {@link
module:engine/model/range~Range model range} or `null` (as set by
default).n *n * @method convertItemn * @fires
module:engine/conversion/upcastdispatcher~UpcastDispatcher#event:elementn *
@fires
module:engine/conversion/upcastdispatcher~UpcastDispatcher#event:textn *
@fires
module:engine/conversion/upcastdispatcher~UpcastDispatcher#event:documentFragmentn
* @param {module:engine/view/item~Item} viewItem Item to convert.n * @param
{module:engine/model/position~Position} modelCursor Position of
conversion.n * @returns {Object} result Conversion result.n * @returns
{module:engine/model/range~Range|null} result.modelRange Model range
containing result of item conversion,n * created and modified by callbacks
attached to fired event, or `null` if the conversion result was incorrect.n
* @returns {module:engine/model/position~Position} result.modelCursor
Position where conversion should be continued.n */nn/**n * Starts
conversion of all children of given item by firing appropriate events for
all those children.n *n * @method convertChildrenn * @fires
module:engine/conversion/upcastdispatcher~UpcastDispatcher#event:elementn *
@fires
module:engine/conversion/upcastdispatcher~UpcastDispatcher#event:textn *
@fires
module:engine/conversion/upcastdispatcher~UpcastDispatcher#event:documentFragmentn
* @param {module:engine/view/item~Item} viewItem Item to convert.n * @param
{module:engine/model/position~Position} modelCursor Position of
conversion.n * @returns {Object} result Conversion result.n * @returns
{module:engine/model/range~Range} result.modelRange Model range containing
results of conversion of all children of given item.n * When no children
was converted then range is collapsed.n * @returns
{module:engine/model/position~Position} result.modelCursor Position where
conversion should be continued.n */nn/**n * Checks {@link
module:engine/model/schema~Schema schema} to find allowed parent for
element that we are going to insertn * starting from given position. If
current parent does not allow to insert element but one of the ancestors
does thenn * split nodes to allowed parent.n *n * If schema allows to
insert node in given position, nothing is split and object with that
position is returned.n *n * If it was not possible to find allowed parent,
`null` is returned, nothing is split.n *n * Otherwise, ancestors are split
and object with position and the copy of the split element is returned.n *n
* For instance, if `&lt;image&gt;` is not allowed in `&lt;paragraph&gt;`
but is allowed in `$root`:n *n
*tt&lt;paragraph&gt;foo[]bar&lt;/paragraph&gt;n *n *  t-&gt; split for
`&lt;image&gt;` -&gt;n *n * 
t&lt;paragraph&gt;foo&lt;/paragraph&gt;[]&lt;paragraph&gt;bar&lt;/paragraph&gt;n
*n * In the sample above position between `&lt;paragraph&gt;` elements will
be returned as `position` and the second `paragraph`n * as `cursorParent`.n
*n * @method splitToAllowedParentn * @param
{module:engine/model/position~Position} position Position on which element
is going to be inserted.n * @param {module:engine/model/node~Node} node
Node to insert.n * @returns {Object|null} Split result. If it was not
possible to find allowed position `null` is returned.n * @returns
{module:engine/model/position~Position} position between split elements.n *
@returns {module:engine/model/element~Element} [cursorParent] Element
inside which cursor should be placed ton * continue conversion. When
element is not defined it means that there was no split.n */nn/**n *
Instance of {@link module:engine/conversion/viewconsumable~ViewConsumable}.
It storesn * information about what parts of processed view item are still
waiting to be handled. After a piece of view itemn * was converted,
appropriate consumable value should be {@link
module:engine/conversion/viewconsumable~ViewConsumable#consume consumed}.n
*n * @param {Object} consumablen */nn/**n * Custom data stored by
converters for conversion process. Custom properties of this object can be
defined and use ton * pass parameters between converters.n *n * The
difference between this property and `data` parameter ofn * {@link
module:engine/conversion/upcastdispatcher~UpcastDispatcher#event:element}
is that `data` parameters allows youn * to pass parameters within a single
event and `store` within the whole conversion.n *n * @param {Object} storen
*/nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/conversion/upcastdispatcher.jsn// module id =
nulln// module chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nnimport Matcher from &#39;../view/matcher&#39;;nnimport
ModelRange from &#39;../model/range&#39;;nimport ModelPosition from
&#39;../model/position&#39;;nnimport cloneDeep from
&#39;@ckeditor/ckeditor5-utils/src/lib/lodash/cloneDeep&#39;;nn/**n *
Contains {@link module:engine/view/view view} to {@link
module:engine/model/model model} converters forn * {@link
module:engine/conversion/upcastdispatcher~UpcastDispatcher}.n *n * @module
engine/conversion/upcast-convertersn */nn/**n * View element to model
element conversion helper.n *n * This conversion results in creating a
model element. For example, view `&lt;p&gt;Foo&lt;/p&gt;` becomes
`&lt;paragraph&gt;Foo&lt;/paragraph&gt;` in the model.n *n * Keep in mind
that the element will be inserted only if it is allowed by {@link
module:engine/model/schema~Schema schema} configuration.n *n
*ttupcastElementToElement( { view: &#39;p&#39;, model: &#39;paragraph&#39;
} );n *n *ttupcastElementToElement( { view: &#39;p&#39;, model:
&#39;paragraph&#39;, priority: &#39;high&#39; } );n *n
*ttupcastElementToElement( {n *tttview: {n *ttttname: &#39;p&#39;,n
*ttttclasses: &#39;fancy&#39;n *ttt},n *tttmodel: &#39;fancyParagraph&#39;n
*tt} );n *n *ttupcastElementToElement( {n * tttview: {n *ttttname:
&#39;p&#39;,n *ttttclasses: &#39;heading&#39;n * ttt},n * tttmodel: (
viewElement, modelWriter ) =&gt; {n * ttttreturn modelWriter.createElement(
&#39;heading&#39;, { level: viewElement.getAttribute( &#39;data-level&#39;
) } );n * ttt}n * tt} );n *n * See {@link
module:engine/conversion/conversion~Conversion#for} to learn how to add
converter to conversion process.n *n * @param {Object} config Conversion
configuration.n * @param {module:engine/view/matcher~MatcherPattern}
config.view Pattern matching all view elements which should be converted.n
* @param {String|module:engine/model/element~Element|Function} config.model
Name of the model element, a model elementn * instance or a function that
takes a view element and returns a model element. The model element will be
inserted in the model.n * @param {module:utils/priorities~PriorityString}
[config.priority=&#39;normal&#39;] Converter priority.n * @returns
{Function} Conversion helper.n */nexport function upcastElementToElement(
config ) {ntconfig = cloneDeep( config );nntconst converter =
_prepareToElementConverter( config );nntconst elementName =
_getViewElementNameFromConfig( config );ntconst eventName = elementName ?
&#39;element:&#39; + elementName : &#39;element&#39;;nntreturn dispatcher
=&gt; {nttdispatcher.on( eventName, converter, { priority: config.priority
|| &#39;normal&#39; } );nt};n}nn/**n * View element to model attribute
conversion helper.n *n * This conversion results in setting an attribute on
a model node. For example, view `&lt;strong&gt;Foo&lt;/strong&gt;` becomesn
* `Foo` {@link module:engine/model/text~Text model text node} with `bold`
attribute set to `true`.n *n * Keep in mind that the attribute will be set
only if it is allowed by {@link module:engine/model/schema~Schema schema}
configuration.n *n *ttupcastElementToAttribute( { view: &#39;strong&#39;,
model: &#39;bold&#39; } );n *n *ttupcastElementToAttribute( { view:
&#39;strong&#39;, model: &#39;bold&#39;, priority: &#39;high&#39; } );n *n
*ttupcastElementToAttribute( {n *tttview: {n *ttttname: &#39;span&#39;,n
*ttttclasses: &#39;bold&#39;n *ttt},n *tttmodel: &#39;bold&#39;n *tt} );n
*n *ttupcastElementToAttribute( {n *tttview: {n *ttttname: &#39;span&#39;,n
*ttttclasses: [ &#39;styled&#39;, &#39;styled-dark&#39; ]n *ttt},n
*tttmodel: {n *ttttkey: &#39;styled&#39;,n *ttttvalue: &#39;dark&#39;n
*ttt}n *tt} );n *n * ttupcastElementToAttribute( {n *tttview: {n *ttttname:
&#39;span&#39;,n *ttttstyles: {n *ttttt&#39;font-size&#39;: /[\s\S]+/n
*tttt}n *ttt},n *tttmodel: {n *ttttkey: &#39;fontSize&#39;,n *ttttvalue:
viewElement =&gt; {n *tttttconst fontSize = viewElement.getStyle(
&#39;font-size&#39; );n *tttttconst value = fontSize.substr( 0,
fontSize.length - 2 );n *n *tttttif ( value &lt;= 10 ) {n *ttttttreturn
&#39;small&#39;;n *ttttt} else if ( value &gt; 12 ) {n *ttttttreturn
&#39;big&#39;;n *ttttt}n *n *tttttreturn null;n *tttt}n *ttt}n *tt} );n *n
* See {@link module:engine/conversion/conversion~Conversion#for} to learn
how to add converter to conversion process.n *n * @param {Object} config
Conversion configuration.n * @param
{module:engine/view/matcher~MatcherPattern} config.view Pattern matching
all view elements which should be converted.n * @param {String|Object}
config.model Model attribute key or an object with `key` and `value`
properties, describingn * the model attribute. `value` property may be set
as a function that takes a view element and returns the value.n * If
`String` is given, the model attribute value will be set to `true`.n *
@param {module:utils/priorities~PriorityString}
[config.priority=&#39;normal&#39;] Converter priority.n * @returns
{Function} Conversion helper.n */nexport function upcastElementToAttribute(
config ) {ntconfig = cloneDeep( config );nnt_normalizeModelAttributeConfig(
config );nntconst converter = _prepareToAttributeConverter( config
);nntconst elementName = _getViewElementNameFromConfig( config );ntconst
eventName = elementName ? &#39;element:&#39; + elementName :
&#39;element&#39;;nntreturn dispatcher =&gt; {nttdispatcher.on( eventName,
converter, { priority: config.priority || &#39;normal&#39; } );nt};n}nn/**n
* View attribute to model attribute conversion helper.n *n * This
conversion results in setting an attribute on a model node. For example,
view `&lt;img src=&quot;foo.jpg&quot;&gt;&lt;/img&gt;` becomesn *
`&lt;image source=&quot;foo.jpg&quot;&gt;&lt;/image&gt;` in the model.n *n
* Keep in mind that the attribute will be set only if it is allowed by
{@link module:engine/model/schema~Schema schema} configuration.n *n
*ttupcastAttributeToAttribute( { view: &#39;src&#39;, model:
&#39;source&#39; } );n *n *ttupcastAttributeToAttribute( { view: { key:
&#39;src&#39; }, model: &#39;source&#39; } );n *n
*ttupcastAttributeToAttribute( { view: { key: &#39;src&#39; }, model:
&#39;source&#39;, priority: &#39;normal&#39; } );n *n
*ttupcastAttributeToAttribute( {n *tttview: {n *ttttkey:
&#39;data-style&#39;,n *ttttvalue: /[\s\S]+/n *ttt},n *tttmodel:
&#39;styled&#39;n *tt} );n *n *ttupcastAttributeToAttribute( {n *tttview:
{n *ttttname: &#39;img&#39;,n *ttttkey: &#39;class&#39;,n *ttttvalue:
&#39;styled-dark&#39;n *ttt},n *tttmodel: {n *ttttkey: &#39;styled&#39;,n
*ttttvalue: &#39;dark&#39;n *ttt}n *tt} );n *n
*ttupcastAttributeToAttribute( {n *tttview: {n *ttttkey: &#39;class&#39;,n
*ttttvalue: /<a href="\\S">styled-</a>+/n *ttt},n *tttmodel: {n *ttttkey:
&#39;styled&#39;n *ttttvalue: viewElement =&gt; {n *tttttconst regexp = /<a
href="\\S">styled-(</a>+)/;n *tttttconst match = viewElement.getAttribute(
&#39;class&#39; ).match( regexp );n *n *tttttreturn match[ 1 ];n *tttt}n
*ttt}n *tt} );n *n * See {@link
module:engine/conversion/conversion~Conversion#for} to learn how to add
converter to conversion process.n *n * @param {Object} config Conversion
configuration.n * @param {String|Object} config.view Specifies which view
attribute will be converted. If a `String` is passed,n * attributes with
given key will be converted. If an `Object` is passed, it must have a
required `key` property,n * specifying view attribute key, and may have an
optional `value` property, specifying view attribute value and optional
`name`n * property specifying a view element name from/on which the
attribute should be converted. `value` can be given as a `String`,n * a
`RegExp` or a function callback, that takes view attribute value as the
only parameter and returns `Boolean`.n * @param {String|Object}
config.model Model attribute key or an object with `key` and `value`
properties, describingn * the model attribute. `value` property may be set
as a function that takes a view element and returns the value.n * If
`String` is given, the model attribute value will be same as view attribute
value.n * @param {module:utils/priorities~PriorityString}
[config.priority=&#39;low&#39;] Converter priority.n * @returns {Function}
Conversion helper.n */nexport function upcastAttributeToAttribute( config )
{ntconfig = cloneDeep( config );nntlet viewKey = null;nntif ( typeof
config.view == &#39;string&#39; || config.view.key ) {nttviewKey =
_normalizeViewAttributeKeyValueConfig( config
);nt}nnt_normalizeModelAttributeConfig( config, viewKey );nntconst
converter = _prepareToAttributeConverter( config );nntreturn dispatcher
=&gt; {nttdispatcher.on( &#39;element&#39;, converter, { priority:
config.priority || &#39;low&#39; } );nt};n}nn/**n * View element to model
marker conversion helper.n *n * This conversion results in creating a model
marker. For example, if the marker was stored in a view as an element:n *
`&lt;p&gt;Fo&lt;span data-marker=&quot;comment&quot;
data-comment-id=&quot;7&quot;&gt;&lt;/span&gt;o&lt;/p&gt;&lt;p&gt;B&lt;span
data-marker=&quot;comment&quot;
data-comment-id=&quot;7&quot;&gt;&lt;/span&gt;ar&lt;/p&gt;`,n * after the
conversion is done, the marker will be available inn * {@link
module:engine/model/model~Model#markers model document markers}.n *n
*ttupcastElementToMarker( { view: &#39;marker-search&#39;, model:
&#39;search&#39; } );n *n *ttupcastElementToMarker( { view:
&#39;marker-search&#39;, model: &#39;search&#39;, priority: &#39;high&#39;
} );n *n *ttupcastElementToMarker( {n *tttview: &#39;marker-search&#39;,n
*tttmodel: viewElement =&gt; &#39;comment:&#39; + viewElement.getAttribute(
&#39;data-comment-id&#39; )n *tt} );n *n *ttupcastElementToMarker( {n
*tttview: {n *ttttname: &#39;span&#39;,n *ttttattributes: {n
*ttttt&#39;data-marker&#39;: &#39;search&#39;n *tttt}n *ttt},n *tttmodel:
&#39;search&#39;n *tt} );n *n * See {@link
module:engine/conversion/conversion~Conversion#for} to learn how to add
converter to conversion process.n *n * @param {Object} config Conversion
configuration.n * @param {module:engine/view/matcher~MatcherPattern}
config.view Pattern matching all view elements which should be converted.n
* @param {String|Function} config.model Name of the model marker, or a
function that takes a view element and returnsn * a model marker name.n *
@param {module:utils/priorities~PriorityString}
[config.priority=&#39;normal&#39;] Converter priority.n * @returns
{Function} Conversion helper.n */nexport function upcastElementToMarker(
config ) {ntconfig = cloneDeep( config );nnt_normalizeToMarkerConfig(
config );nntreturn upcastElementToElement( config );n}nn// Helper function
for from-view-element conversion. Checks if `config.view` directly
specifies converted view element&#39;s namen// and if so, returns it.n//n//
@param {Object} config Conversion config.n// @returns {String|null} View
element name or `null` if name is not directly set.nfunction
_getViewElementNameFromConfig( config ) {ntif ( typeof config.view ==
&#39;string&#39; ) {nttreturn config.view;nt}nntif ( typeof config.view ==
&#39;object&#39; &amp;&amp; typeof config.view.name == &#39;string&#39; )
{nttreturn config.view.name;nt}nntreturn null;n}nn// Helper for
to-model-element conversion. Takes a config object and returns a proper
converter function.n//n// @param {Object} config Conversion
configuration.n// @returns {Function} View to model converter.nfunction
_prepareToElementConverter( config ) {ntconst matcher = new Matcher(
config.view );nntreturn ( evt, data, conversionApi ) =&gt; {ntt// This will
be usually just one pattern but we support matchers with many patterns
too.nttconst match = matcher.match( data.viewItem );nntt// If there is no
match, this callback should not do anything.nttif ( !match )
{ntttreturn;ntt}nntt// Force consuming element&#39;s
name.nttmatch.match.name = true;nntt// Create model element basing on
config.nttconst modelElement = _getModelElement( config.model,
data.viewItem, conversionApi.writer );nntt// Do not convert if element
building function returned falsy value.nttif ( !modelElement )
{ntttreturn;ntt}nntt// When element was already consumed then skip it.nttif
( !conversionApi.consumable.test( data.viewItem, match.match ) )
{ntttreturn;ntt}nntt// Find allowed parent for element that we are going to
insert.ntt// If current parent does not allow to insert element but one of
the ancestors doesntt// then split nodes to allowed parent.nttconst
splitResult = conversionApi.splitToAllowedParent( modelElement,
data.modelCursor );nntt// When there is no split result it means that we
can&#39;t insert element to model tree, so let&#39;s skip it.nttif (
!splitResult ) {ntttreturn;ntt}nntt// Insert element on allowed
position.nttconversionApi.writer.insert( modelElement, splitResult.position
);nntt// Convert children and insert to element.nttconst childrenResult =
conversionApi.convertChildren( data.viewItem, ModelPosition.createAt(
modelElement ) );nntt// Consume appropriate value from consumable values
list.nttconversionApi.consumable.consume( data.viewItem, match.match
);nntt// Set conversion result range.nttdata.modelRange = new
ModelRange(nttt// Range should start before inserted
elementntttModelPosition.createBefore( modelElement ),nttt// Should end
after but we need to take into consideration that children could split
ournttt// element, so we need to move range after parent of the last
converted child.nttt// before: &lt;allowed&gt;[]&lt;/allowed&gt;nttt//
after: &lt;<a
href="<converted><child></child></converted><child></child><converted>”>allowed></a>&lt;/converted&gt;&lt;/allowed&gt;ntttModelPosition.createAfter(
childrenResult.modelCursor.parent )ntt);nntt// Now we need to check where
the modelCursor should be.ntt// If we had to split parent to insert our
element then we want to continue conversion inside split parent.ntt//ntt//
before:
&lt;allowed&gt;&lt;notAllowed&gt;[]&lt;/notAllowed&gt;&lt;/allowed&gt;ntt//
after: 
&lt;allowed&gt;&lt;notAllowed&gt;&lt;/notAllowed&gt;&lt;converted&gt;&lt;/converted&gt;&lt;notAllowed&gt;[]&lt;/notAllowed&gt;&lt;/allowed&gt;nttif
( splitResult.cursorParent ) {ntttdata.modelCursor =
ModelPosition.createAt( splitResult.cursorParent );nnttt// Otherwise just
continue after inserted element.ntt} else {ntttdata.modelCursor =
data.modelRange.end;ntt}nt};n}nn// Helper function for upcasting-to-element
converter. Takes the model configuration, the converted view elementn// and
a writer instance and returns a model element instance to be inserted in
the model.n//n// @param
{String|Function|module:engine/model/element~Element} model Model
conversion configuration.n// @param {module:engine/view/node~Node} input
The converted view node.n// @param {module:engine/model/writer~Writer}
writer A writer instance to use to create the model element.nfunction
_getModelElement( model, input, writer ) {ntif ( model instanceof Function
) {nttreturn model( input, writer );nt} else {nttreturn
writer.createElement( model );nt}n}nn// Helper function
view-attribute-to-model-attribute helper. Normalizes `config.view` which
was set as `String` orn// as an `Object` with `key`, `value` and `name`
properties. Normalized `config.view` has is compatible withn// {@link
module:engine/view/matcher~MatcherPattern}.n//n// @param {Object} config
Conversion config.n// @returns {String} Key of the converted view
attribute.nfunction _normalizeViewAttributeKeyValueConfig( config ) {ntif (
typeof config.view == &#39;string&#39; ) {nttconfig.view = { key:
config.view };nt}nntconst key = config.view.key;ntlet normalized;nntif (
key == &#39;class&#39; || key == &#39;style&#39; ) {nttconst keyName = key
== &#39;class&#39; ? &#39;classes&#39; : &#39;styles&#39;;nnttnormalized =
{nttt[ keyName ]: config.view.valuentt};nt} else {nttconst value = typeof
config.view.value == &#39;undefined&#39; ? /[\s\S]*/ :
config.view.value;nnttnormalized = {ntttattributes: {ntttt[ key ]:
valuenttt}ntt};nt}nntif ( config.view.name ) {nttnormalized.name =
config.view.name;nt}nntconfig.view = normalized;nntreturn key;n}nn// Helper
function that normalizes `config.model` in from-model-attribute conversion.
`config.model` can be setn// as a `String`, an `Object` with only `key`
property or an `Object` with `key` and `value` properties. Normalizedn//
`config.model` is an `Object` with `key` and `value` properties.n//n//
@param {Object} config Conversion config.n// @param {String}
viewAttributeKeyToCopy Key of the converted view attribute. If it is set,
model attribute valuen// will be equal to view attribute value.nfunction
_normalizeModelAttributeConfig( config, viewAttributeKeyToCopy = null )
{ntconst defaultModelValue = viewAttributeKeyToCopy === null ? true :
viewElement =&gt; viewElement.getAttribute( viewAttributeKeyToCopy
);nntconst key = typeof config.model != &#39;object&#39; ? config.model :
config.model.key;ntconst value = typeof config.model != &#39;object&#39; ||
typeof config.model.value == &#39;undefined&#39; ? defaultModelValue :
config.model.value;nntconfig.model = { key, value };n}nn// Helper for
to-model-attribute conversion. Takes the model attribute name and
conversion configuration and returnsn// a proper converter function.n//n//
@param {String} modelAttributeKey The key of the model attribute to set on
a model node.n// @param {Object|Array.&lt;Object&gt;} config Conversion
configuration. It is possible to provide multiple configurations in an
array.n// @param {Boolean} consumeName If set to `true` converter will try
to consume name. If set to `false` converter will not try ton// consume
name. This flag overwrites parameter returned by `Matcher#match`.nfunction
_prepareToAttributeConverter( config ) {ntconst matcher = new Matcher(
config.view );nntreturn ( evt, data, conversionApi ) =&gt; {nttconst match
= matcher.match( data.viewItem );nntt// If there is no match, this callback
should not do anything.nttif ( !match ) {ntttreturn;ntt}nnttconst modelKey
= config.model.key;nttconst modelValue = typeof config.model.value ==
&#39;function&#39; ? config.model.value( data.viewItem ) :
config.model.value;nntt// Do not convert if attribute building function
returned falsy value.nttif ( modelValue === null ) {ntttreturn;ntt}nnttif (
_onlyViewNameIsDefined( config ) ) {ntttmatch.match.name = true;ntt} else
{nttt// Do not test or consume `name` consumable.ntttdelete
match.match.name;ntt}nntt// Try to consume appropriate values from
consumable values list.nttif ( !conversionApi.consumable.test(
data.viewItem, match.match ) ) {ntttreturn;ntt}nntt// Since we are
converting to attribute we need an range on which we will set the
attribute.ntt// If the range is not created yet, we will create it.nttif (
!data.modelRange ) {nttt// Convert children and set conversion result as a
current data.ntttdata = Object.assign( data, conversionApi.convertChildren(
data.viewItem, data.modelCursor ) );ntt}nntt// Set attribute on current
`output`. `Schema` is checked inside this helper function.nttconst
attributeWasSet = _setAttributeOn( data.modelRange, { key: modelKey, value:
modelValue }, conversionApi );nnttif ( attributeWasSet )
{ntttconversionApi.consumable.consume( data.viewItem, match.match
);ntt}nt};n}nn// Helper function that checks if element name should be
consumed in attribute converters.n//n// @param {Object} config Conversion
config.n// @returns {Boolean}nfunction _onlyViewNameIsDefined( config )
{ntif ( typeof config.view == &#39;object&#39; &amp;&amp;
!_getViewElementNameFromConfig( config ) ) {nttreturn false;nt}nntreturn
!config.view.classes &amp;&amp; !config.view.attributes &amp;&amp;
!config.view.styles;n}nn// Helper function for to-model-attribute
converter. Sets model attribute on given range. Checks {@link
module:engine/model/schema~Schema}n// to ensure proper model
structure.n//n// @param {module:engine/model/range~Range} modelRange Model
range on which attribute should be set.n// @param {Object} modelAttribute
Model attribute to set.n// @param {Object} conversionApi Conversion API.n//
@returns {Boolean} `true` if attribute was set on at least one node from
given `modelRange`.nfunction _setAttributeOn( modelRange, modelAttribute,
conversionApi ) {ntlet result = false;nnt// Set attribute on each item in
range according to Schema.ntfor ( const node of Array.from(
modelRange.getItems() ) ) {nttif ( conversionApi.schema.checkAttribute(
node, modelAttribute.key ) ) {ntttconversionApi.writer.setAttribute(
modelAttribute.key, modelAttribute.value, node );nntttresult =
true;ntt}nt}nntreturn result;n}nn// Helper function for upcasting-to-marker
conversion. Takes the config in a format requested by
`upcastElementToMarker()`n// function and converts it to a format that is
supported by `upcastElementToElement()` function.n//n// @param {Object}
config Conversion configuration.nfunction _normalizeToMarkerConfig( config
) {ntconst oldModel = config.model;nntconfig.model = ( viewElement,
modelWriter ) =&gt; {nttconst markerName = typeof oldModel ==
&#39;string&#39; ? oldModel : oldModel( viewElement );nnttreturn
modelWriter.createElement( &#39;$marker&#39;, { &#39;data-name&#39;:
markerName } );nt};n}nn/**n * Function factory, creates a converter that
converts {@link module:engine/view/documentfragment~DocumentFragment view
document fragment}n * or all children of {@link
module:engine/view/element~Element} inton * {@link
module:engine/model/documentfragment~DocumentFragment model document
fragment}.n * This is the "entry-point&quot; converter for upcast (view to
model conversion). This converter starts the conversion of all childrenn *
of passed view document fragment. Those children {@link
module:engine/view/node~Node view nodes} are then handled by other
converters.n *n * This also a "default&quot;, last resort converter for all
view elements that has not been converted by other converters.n * When a
view element is being converted to the model but it does not have converter
specified, that view elementn * will be converted to {@link
module:engine/model/documentfragment~DocumentFragment model document
fragment} and returned.n *n * @returns {Function} Universal converter for
view {@link module:engine/view/documentfragment~DocumentFragment fragments}
andn * {@link module:engine/view/element~Element elements} that returnsn *
{@link module:engine/model/documentfragment~DocumentFragment model
fragment} with children of converted view item.n */nexport function
convertToModelFragment() {ntreturn ( evt, data, conversionApi ) =&gt;
{ntt// Second argument in `consumable.consume` is discarded for
ViewDocumentFragment but is needed for ViewElement.nttif ( !data.modelRange
&amp;&amp; conversionApi.consumable.consume( data.viewItem, { name: true }
) ) {ntttconst { modelRange, modelCursor } = conversionApi.convertChildren(
data.viewItem, data.modelCursor );nntttdata.modelRange =
modelRange;ntttdata.modelCursor = modelCursor;ntt}nt};n}nn/**n * Function
factory, creates a converter that converts {@link
module:engine/view/text~Text} to {@link module:engine/model/text~Text}.n *n
* @returns {Function} {@link module:engine/view/text~Text View text}
converter.n */nexport function convertText() {ntreturn ( evt, data,
conversionApi ) =&gt; {nttif ( conversionApi.schema.checkChild(
data.modelCursor, &#39;$text&#39; ) ) {ntttif (
conversionApi.consumable.consume( data.viewItem ) ) {nttttconst text =
conversionApi.writer.createText( data.viewItem.data
);nnttttconversionApi.writer.insert( text, data.modelCursor
);nnttttdata.modelRange = ModelRange.createFromPositionAndShift(
data.modelCursor, text.offsetSize );nttttdata.modelCursor =
data.modelRange.end;nttt}ntt}nt};n}nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-engine/src/conversion/upcast-converters.jsn// module
id = nulln// module chunks = “,”/**n * @license Copyright © 2003-2018,
CKSource - Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module engine/controller/datacontrollern
*/nnimport mix from &#39;@ckeditor/ckeditor5-utils/src/mix&#39;;nimport
ObservableMixin from
&#39;@ckeditor/ckeditor5-utils/src/observablemixin&#39;;nimport
CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nnimport Mapper from
&#39;../conversion/mapper&#39;;nnimport DowncastDispatcher from
&#39;../conversion/downcastdispatcher&#39;;nimport { insertText } from
&#39;../conversion/downcast-converters&#39;;nnimport UpcastDispatcher from
&#39;../conversion/upcastdispatcher&#39;;nimport { convertText,
convertToModelFragment } from
&#39;../conversion/upcast-converters&#39;;nnimport ViewDocumentFragment
from &#39;../view/documentfragment&#39;;nimport ViewDocument from
&#39;../view/document&#39;;nimport ViewWriter from
&#39;../view/writer&#39;;nnimport ModelRange from
&#39;../model/range&#39;;nn/**n * Controller for the data pipeline. The
data pipeline controls how data is retrieved from the documentn * and set
inside it. Hence, the controller features two methods which allow to {@link
~DataController#get get}n * and {@link ~DataController#set set} data of the
{@link ~DataController#model model}n * using given:n *n * * {@link
module:engine/dataprocessor/dataprocessor~DataProcessor data processor},n *
* downcast converters,n * * upcast converters.n *n * @mixes
module:utils/observablemixin~ObservableMixinn */nexport default class
DataController {nt/**nt * Creates a data controller instance.nt *nt *
@param {module:engine/model/model~Model} model Data model.nt * @param
{module:engine/dataprocessor/dataprocessor~DataProcessor} [dataProcessor]
Data processor that should be usednt * by the controller.nt
*/ntconstructor( model, dataProcessor ) {ntt/**ntt * Data model.ntt *ntt *
@readonlyntt * @member {module:engine/model/model~Model}ntt */nttthis.model
= model;nntt/**ntt * Data processor used during the conversion.ntt *ntt *
@readonlyntt * @member {module:engine/dataProcessor~DataProcessor}ntt
*/nttthis.processor = dataProcessor;nntt/**ntt * Mapper used for the
conversion. It has no permanent bindings, because they are created when
getting data andntt * cleared directly after the data are converted.
However, the mapper is defined as a class property, becausentt * it needs
to be passed to the `DowncastDispatcher` as a conversion API.ntt *ntt *
@readonlyntt * @member {module:engine/conversion/mapper~Mapper}ntt
*/nttthis.mapper = new Mapper();nntt/**ntt * Downcast dispatcher used by
the {@link get get method}. Downcast converters should be attached to
it.ntt *ntt * @readonlyntt * @member
{module:engine/conversion/downcastdispatcher~DowncastDispatcher}ntt
*/nttthis.downcastDispatcher = new DowncastDispatcher( {ntttmapper:
this.mapperntt} );nttthis.downcastDispatcher.on( &#39;insert:$text&#39;,
insertText(), { priority: &#39;lowest&#39; } );nntt/**ntt * Upcast
dispatcher used by the {@link set set method}. Upcast converters should be
attached to it.ntt *ntt * @readonlyntt * @member
{module:engine/conversion/upcastdispatcher~UpcastDispatcher}ntt
*/nttthis.upcastDispatcher = new UpcastDispatcher( {ntttschema:
model.schemantt} );nntt// Define default converters for text and
elements.ntt//ntt// Note that if there is no default converter for the
element it will be skipped, for instance `&lt;b&gt;foo</strong>` will
bentt// converted to nothing. We add `convertToModelFragment` as a last
converter so it converts children of thatntt// element to the document
fragment so `<strong>foo</strong>` will be converted to `foo` if there is
no converter for `<strong>`.nttthis.upcastDispatcher.on( &#39;text&#39;,
convertText(), { priority: &#39;lowest&#39; }
);nttthis.upcastDispatcher.on( &#39;element&#39;, convertToModelFragment(),
{ priority: &#39;lowest&#39; } );nttthis.upcastDispatcher.on(
&#39;documentFragment&#39;, convertToModelFragment(), { priority:
&#39;lowest&#39; } );nnttthis.decorate( &#39;init&#39; );nt}nnt/**nt *
Returns the model&#39;s data converted by downcast dispatchers attached to
{@link downcastDispatcher} andnt * formatted by the {@link processor data
processor}.nt *nt * @param {String} [rootName=&#39;main&#39;] Root name.nt
* @returns {String} Output data.nt */ntget( rootName = &#39;main&#39; )
{ntt// Get model range.nttreturn this.stringify(
this.model.document.getRoot( rootName ) );nt}nnt/**nt * Returns the content
of the given {@link module:engine/model/element~Element model&#39;s
element} ornt * {@link
module:engine/model/documentfragment~DocumentFragment model document
fragment} converted by the downcast convertersnt * attached to {@link
downcastDispatcher} and formatted by the {@link processor data
processor}.nt *nt * @param
{module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment}
modelElementOrFragmentnt * Element whose content will be stringified.nt *
@returns {String} Output data.nt */ntstringify( modelElementOrFragment )
{ntt// Model -&gt; view.nttconst viewDocumentFragment = this.toView(
modelElementOrFragment );nntt// View -&gt; data.nttreturn
this.processor.toData( viewDocumentFragment );nt}nnt/**nt * Returns the
content of the given {@link module:engine/model/element~Element model
element} ornt * {@link
module:engine/model/documentfragment~DocumentFragment model document
fragment} converted by the downcastnt * converters attached to {@link
downcastDispatcher} to ant * {@link
module:engine/view/documentfragment~DocumentFragment view document
fragment}.nt *nt * @param
{module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment}
modelElementOrFragmentnt * Element or document fragment whose content will
be converted.nt * @returns
{module:engine/view/documentfragment~DocumentFragment} Output view
DocumentFragment.nt */nttoView( modelElementOrFragment ) {ntt// First,
convert elements.nttconst modelRange = ModelRange.createIn(
modelElementOrFragment );nnttconst viewDocumentFragment = new
ViewDocumentFragment();nntt// Create separate ViewWriter just for data
conversion purposes.ntt// We have no view controller and rendering do DOM
in DataController so view.change() block is not used here.nttconst
viewWriter = new ViewWriter( new ViewDocument()
);nttthis.mapper.bindElements( modelElementOrFragment, viewDocumentFragment
);nnttthis.downcastDispatcher.convertInsert( modelRange, viewWriter
);nnttif ( !modelElementOrFragment.is( &#39;documentFragment&#39; ) )
{nttt// Then, if a document element is converted, convert markers.nttt//
From all document markers, get those, which "intersect&quot; with the
converter element.ntttconst markers = _getMarkersRelativeToElement(
modelElementOrFragment );nntttfor ( const [ name, range ] of markers )
{nttttthis.downcastDispatcher.convertMarkerAdd( name, range, viewWriter
);nttt}ntt}nntt// Clear bindings so the next call to this method gives
correct results.nttthis.mapper.clearBindings();nnttreturn
viewDocumentFragment;nt}nnt/**nt * Sets initial input data parsed by the
{@link processor data processor} andnt * converted by the {@link
upcastDispatcher view-to-model converters}.nt * Initial data can be set
only to document that {@link module:engine/model/document~Document#version}
is equal 0.nt *nt * *Note* This method is {@link
module:utils/observablemixin~ObservableMixin#decorate decorated} which isnt
* used by e.g. collaborative editing plugin that syncs remote data on
init.nt *nt * @fires initnt * @param {String} data Input data.nt * @param
{String} [rootName=&#39;main&#39;] Root name.nt * @returns {Promise}
Promise that is resolved after the data is set on the editor.nt */ntinit(
data, rootName = &#39;main&#39; ) {nttif ( this.model.document.version )
{nttt/**nttt * Cannot set initial data to not empty {@link
module:engine/model/document~Document}.nttt * Initial data should be set
once, during {@link module:core/editor/editor~Editor} initialization,nttt *
when the {@link module:engine/model/document~Document#version} is equal
0.nttt *nttt * @error datacontroller-init-document-not-emptynttt
*/ntttthrow new CKEditorError( &#39;datacontroller-init-document-not-empty:
Trying to set initial data to not empty document.&#39; );ntt}nnttconst
modelRoot = this.model.document.getRoot( rootName
);nnttthis.model.enqueueChange( &#39;transparent&#39;, writer =&gt;
{ntttwriter.insert( this.parse( data, modelRoot ), modelRoot );ntt}
);nnttreturn Promise.resolve();nt}nnt/**nt * Sets input data parsed by the
{@link processor data processor} andnt * converted by the {@link
upcastDispatcher view-to-model converters}.nt * This method can be used any
time to replace existing editor data by the new one without clearing thent
* {@link module:engine/model/document~Document#history document history}.nt
*nt * This method also creates a batch with all the changes applied. If all
you need is to parse data, usent * the {@link parse} method.nt *nt * @param
{String} data Input data.nt * @param {String} [rootName=&#39;main&#39;]
Root name.nt */ntset( data, rootName = &#39;main&#39; ) {ntt// Save to
model.nttconst modelRoot = this.model.document.getRoot( rootName
);nnttthis.model.enqueueChange( &#39;transparent&#39;, writer =&gt;
{ntttwriter.setSelection( null );ntttwriter.removeSelectionAttribute(
this.model.document.selection.getAttributeKeys() );nntttwriter.remove(
ModelRange.createIn( modelRoot ) );ntttwriter.insert( this.parse( data,
modelRoot ), modelRoot );ntt} );nt}nnt/**nt * Returns the data parsed by
the {@link processor data processor} and then converted by upcast
convertersnt * attached to the {@link upcastDispatcher}.nt *nt * @see setnt
* @param {String} data Data to parse.nt * @param
{module:engine/model/schema~SchemaContextDefinition}
[context=&#39;$root&#39;] Base context in which the view willnt * be
converted to the model. See: {@link
module:engine/conversion/upcastdispatcher~UpcastDispatcher#convert}.nt *
@returns {module:engine/model/documentfragment~DocumentFragment} Parsed
data.nt */ntparse( data, context = &#39;$root&#39; ) {ntt// data -&gt;
viewnttconst viewDocumentFragment = this.processor.toView( data );nntt//
view -&gt; modelnttreturn this.toModel( viewDocumentFragment, context
);nt}nnt/**nt * Returns the result of the given {@link
module:engine/view/element~Element view element} ornt * {@link
module:engine/view/documentfragment~DocumentFragment view document
fragment} converted by thent * {@link upcastDispatcher view-to-model
converters}, wrapped by
{module:engine/model/documentfragment~DocumentFragment}.nt *nt * When
marker elements were converted during the conversion process, it will be
set as a document fragment&#39;snt * {@link
module:engine/model/documentfragment~DocumentFragment#markers static
markers map}.nt *nt * @param
{module:engine/view/element~Element|module:engine/view/documentfragment~DocumentFragment}
viewElementOrFragmentnt * Element or document fragment whose content will
be converted.nt * @param
{module:engine/model/schema~SchemaContextDefinition}
[context=&#39;$root&#39;] Base context in which the view willnt * be
converted to the model. See: {@link
module:engine/conversion/upcastdispatcher~UpcastDispatcher#convert}.nt *
@returns {module:engine/model/documentfragment~DocumentFragment} Output
document fragment.nt */nttoModel( viewElementOrFragment, context =
&#39;$root&#39; ) {nttreturn this.model.change( writer =&gt; {ntttreturn
this.upcastDispatcher.convert( viewElementOrFragment, writer, context
);ntt} );nt}nnt/**nt * Removes all event listeners set by the
DataController.nt */ntdestroy() {}nnt/**nt * Event fired by decorated
{@link init} method.nt * See {@link
module:utils/observablemixin~ObservableMixin.decorate} for more information
and samples.nt *nt * @event initnt */n}nnmix( DataController,
ObservableMixin );nn// Helper function for downcast conversion.n//n// Takes
a document element (element that is added to a model document) and checks
which markers are inside itn// and which markers are containing it. If the
marker is intersecting with element, the intersection is returned.nfunction
_getMarkersRelativeToElement( element ) {ntconst result = [];ntconst doc =
element.root.document;nntif ( !doc ) {nttreturn [];nt}nntconst elementRange
= ModelRange.createIn( element );nntfor ( const marker of doc.model.markers
) {nttconst intersection = elementRange.getIntersection( marker.getRange()
);nnttif ( intersection ) {ntttresult.push( [ marker.name, intersection ]
);ntt}nt}nntreturn result;n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/controller/datacontroller.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module engine/conversion/conversionn */nnimport CKEditorError
from &#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nnimport
{ntdowncastElementToElement,ntdowncastAttributeToElement,ntdowncastAttributeToAttributen}
from &#39;./downcast-converters&#39;;nnimport
{ntupcastElementToElement,ntupcastElementToAttribute,ntupcastAttributeToAttributen}
from &#39;./upcast-converters&#39;;nn/**n * An utility class that helps
adding converters to upcast and downcast dispatchers.n *n * We recommend
reading first the {@glink framework/guides/architecture/editing-engine}
guide to understand then * core concepts of the conversion mechanisms.n *n
* The instance of the conversion manager is available in then * {@link
module:core/editor/editor~Editor#conversion `editor.conversion`} propertyn
* and by default has the following groups of dispatchers (i.e. directions
of conversion):n *n * * `downcast` (editing and data downcasts)n * *
`editingDowncast`n * * `dataDowncast`n * * `upcast`n *n * To add a
converter to a specific group use the {@link
module:engine/conversion/conversion~Conversion#for `for()`}n * method:n *n
*tt// Add a converter to editing downcast and data downcast.n
*tteditor.conversion.for( &#39;downcast&#39; ).add(
downcastElementToElement( config ) );n *n *tt// Add a converter to the data
pipepline only:n *tteditor.conversion.for( &#39;dataDowncast&#39; ).add(
downcastElementToElement( config ) );n *tt// And a slightly different one
for the editing pipeline:n *tteditor.conversion.for(
&#39;editingDowncast&#39; ).add( downcastElementToWidget( config ) );n *n *
The functions used in `add()` calls are one-way converters (i.e. you need
to remember yourself to addn * a converter in the other direction, if you
feature requires that). They are also called "conversion helpers&quot;.n *
You can find a set of them in the {@link
module:engine/conversion/downcast-converters} andn * {@link
module:engine/conversion/upcast-converters} modulesn *n * Besides allowing
to register converters to specific dispatchers, you can also use methods
available in thisn * class to add two-way converters (upcast and
downcast):n *n * * {@link
module:engine/conversion/conversion~Conversion#elementToElement
`elementToElement()`} –n * model element to view element and vice versan *
* {@link module:engine/conversion/conversion~Conversion#attributeToElement
`attributeToElement()`} –n * model attribute to view element and vice
versan * * {@link
module:engine/conversion/conversion~Conversion#attributeToElement
`attributeToElement()`} –n * model attribute to view element and vice
versan */nexport default class Conversion {nt/**nt * Creates new Conversion
instance.nt */ntconstructor() {ntt/**ntt * @privatentt * @member {Map}ntt
*/nttthis._dispatchersGroups = new Map();nt}nnt/**nt * Registers one or
more converters under given group name. Then, group name can be used to
assign a converternt * to multiple dispatchers at once.nt *nt * If given
group name is used for a second time,nt * {@link
module:utils/ckeditorerror~CKEditorError conversion-register-group-exists}
error is thrown.nt *nt * @param {String} groupName A name for dispatchers
group.nt * @param
{Array.&lt;module:engine/conversion/downcastdispatcher~DowncastDispatcher|nt
* module:engine/conversion/upcastdispatcher~UpcastDispatcher&gt;}
dispatchers Dispatchers to registernt * under given name.nt */ntregister(
groupName, dispatchers ) {nttif ( this._dispatchersGroups.has( groupName )
) {nttt/**nttt * Trying to register a group name that was already
registered.nttt *nttt * @error conversion-register-group-existsnttt
*/ntttthrow new CKEditorError( &#39;conversion-register-group-exists:
Trying to register a group name that was already registered.&#39;
);ntt}nnttthis._dispatchersGroups.set( groupName, dispatchers );nt}nnt/**nt
* Provides chainable API to assign converters to dispatchers registered
under given group name. Converters are addednt * by calling `.add()` method
of an object returned by this function.nt *nt *ttconversion.for(
&#39;downcast&#39; )nt *ttt.add( conversionHelperA )nt *ttt.add(
conversionHelperB );nt *nt * In above example, `conversionHelperA` and
`conversionHelperB` will be called for all dispatchers from
`&#39;model&#39;` group.nt *nt * `.add()` takes exactly one parameter,
which is a function. That function should accept one parameter, whichnt *
is a dispatcher instance. The function should add an actual converter to
passed dispatcher instance.nt *nt * Conversion helpers for most common
cases are already provided. They are flexible enough to cover most use
cases.nt * See documentation to learn how they can be configured.nt *nt *
For downcast (model to view conversion), these are:nt *nt * * {@link
module:engine/conversion/downcast-converters~downcastElementToElement
downcast element to element converter},nt * * {@link
module:engine/conversion/downcast-converters~downcastAttributeToElement
downcast attribute to element converter},nt * * {@link
module:engine/conversion/downcast-converters~downcastAttributeToAttribute
downcast attribute to attribute converter}.nt *nt * For upcast (view to
model conversion), these are:nt *nt * * {@link
module:engine/conversion/upcast-converters~upcastElementToElement upcast
element to element converter},nt * * {@link
module:engine/conversion/upcast-converters~upcastElementToAttribute upcast
attribute to element converter},nt * * {@link
module:engine/conversion/upcast-converters~upcastAttributeToAttribute
upcast attribute to attribute converter}.nt *nt * An example of using
conversion helpers to convert `paragraph` model element to `p` view element
(and back):nt *nt *tt// Define conversion configuration - model element
&#39;paragraph&#39; should be converted to view element &#39;p&#39;.nt
*ttconst config = { model: &#39;paragraph&#39;, view: &#39;p&#39; };nt *nt
*tt// Add converters to proper dispatchers using conversion helpers.nt
*ttconversion.for( &#39;downcast&#39; ).add( downcastElementToElement(
config ) );nt *ttconversion.for( &#39;upcast&#39; ).add(
upcastElementToElement( config ) );nt *nt * An example of providing custom
conversion helper that uses custom converter function:nt *nt *tt// Adding
custom `myConverter` converter for &#39;paragraph&#39; element insertion,
with default priority (&#39;normal&#39;).nt *ttconversion.for(
&#39;downcast&#39; ).add( conversion.customConverter(
&#39;insert:paragraph&#39;, myConverter ) );nt *nt * @param {String}
groupName Name of dispatchers group to add converters to.nt * @returns
{Object} <a href="../../../../Object.html">Object</a> with `.add()` method,
providing a way to add converters.nt */ntfor( groupName ) {nttconst
dispatchers = this._getDispatchers( groupName );nnttreturn {ntttadd(
conversionHelper ) {ntttt_addToDispatchers( dispatchers, conversionHelper
);nnttttreturn this;nttt}ntt};nt}nnt/**nt * Sets up converters between the
model and the view which convert a model element to a view element (and
vice versa).nt * For example, model
`&lt;paragraph&gt;Foo&lt;/paragraph&gt;` is `&lt;p&gt;Foo&lt;/p&gt;` in the
view.nt *nt *tt// Simple conversion from `paragraph` model element to
`&lt;p&gt;` view element (and vice versa).nt
*ttconversion.elementToElement( { model: &#39;paragraph&#39;, view:
&#39;p&#39; } );nt *nt *tt// Override other converters by specifying
converter definition with higher priority.nt
*ttconversion.elementToElement( { model: &#39;paragraph&#39;, view:
&#39;div&#39;, priority: &#39;high&#39; } );nt *nt *tt// View specified as
an object instead of a string.nt *ttconversion.elementToElement( {nt
*tttmodel: &#39;fancyParagraph&#39;,nt *tttview: {nt *ttttname:
&#39;p&#39;,nt *ttttclasses: &#39;fancy&#39;nt *ttt}nt *tt} );nt *nt *tt//
Use `upcastAlso` to define other view elements that should be also
converted to `paragraph` element.nt *ttconversion.elementToElement( {nt
*tttmodel: &#39;paragraph&#39;,nt *tttview: &#39;p&#39;,nt *tttupcastAlso:
[nt *tttt&#39;div&#39;,nt *tttt{nt *ttttt// Any element with `display:
block` style.nt *tttttstyles: {nt *ttttttdisplay: &#39;block&#39;nt
*ttttt}nt *tttt}nt *ttt]nt *tt} );nt *nt *tt// `upcastAlso` set as callback
enables a conversion of a wide range of different view elements.nt
*ttconversion.elementToElement( {nt *tttmodel: &#39;heading&#39;,nt
*tttview: &#39;h2&#39;,nt *ttt// Convert "headling-like&quot; paragraphs to
headings.nt *tttupcastAlso: viewElement =&gt; {nt *ttttconst fontSize =
viewElement.getStyle( &#39;font-size&#39; );nt *nt *ttttif ( !fontSize )
{nt *tttttreturn null;nt *tttt}nt *nt *ttttconst match = fontSize.match(
/(\d+)\s*px/ );nt *nt *ttttif ( !match ) {nt *tttttreturn null;nt *tttt}nt
*nt *ttttconst size = Number( match[ 1 ] );nt *nt *ttttif ( size &gt; 26 )
{nt *ttttt// Returned value be an object with the matched properties.nt
*ttttt// Those properties will be "consumed&quot; during conversion.nt
*ttttt// See `engine.view.Matcher~MatcherPattern` and
`engine.view.Matcher#match` for more.nt *nt *tttttreturn { name: true,
styles: [ &#39;font-size&#39; ] };nt *tttt}nt *nt *ttttreturn null;nt
*ttt}nt *tt} );nt *nt * `definition.model` is a `String` with a model
element name to converter from/to.nt * See {@link
module:engine/conversion/conversion~ConverterDefinition} to learn about
other parameters.nt *nt * @param
{module:engine/conversion/conversion~ConverterDefinition} definition
Converter definition.nt */ntelementToElement( definition ) {ntt// Set up
downcast converter.nttthis.for( &#39;downcast&#39; ).add(
downcastElementToElement( definition ) );nntt// Set up upcast
converter.nttfor ( const { model, view } of _getAllUpcastDefinitions(
definition ) ) {ntttthis.for( &#39;upcast&#39;
).add(nttttupcastElementToElement( {ntttttmodel,ntttttview,ntttttpriority:
definition.priorityntttt} )nttt);ntt}nt}nnt/**nt * Sets up converters
between the model and the view which convert a model attribute to a view
element (and vice versa).nt * For example, model text node with data
`&quot;Foo&quot;` and `bold` attribute is
`&lt;strong&gt;Foo&lt;/strong&gt;` in the view.nt *nt *tt// Simple
conversion from `bold=true` attribute to `&lt;strong&gt;` view element (and
vice versa).nt *ttconversion.attributeToElement( { model: &#39;bold&#39;,
view: &#39;strong&#39; } );nt *nt *tt// Override other converters by
specifying converter definition with higher priority.nt
*ttconversion.attributeToElement( { model: &#39;bold&#39;, view:
&#39;b&#39;, priority: &#39;high&#39; } );nt *nt *tt// View specified as an
object instead of a string.nt *ttconversion.attributeToElement( {nt
*tttmodel: &#39;bold&#39;,nt *tttview: {nt *ttttname: &#39;span&#39;,nt
*ttttclasses: &#39;bold&#39;nt *ttt}nt *tt} );nt *nt *tt// Use
`config.model.name` to define conversion only from given node type, `$text`
in this case.nt *tt// The same attribute on different elements may be then
handled by a different converter.nt *ttconversion.attributeToElement( {nt
*tttmodel: {nt *ttttkey: &#39;textDecoration&#39;,nt *ttttvalues: [
&#39;underline&#39;, &#39;lineThrough&#39; ],nt *ttttname:
&#39;$text&#39;nt *ttt},nt *tttview: {nt *ttttunderline: {nt *tttttname:
&#39;span&#39;,nt *tttttstyles: {nt *tttttt&#39;text-decoration&#39;:
&#39;underline&#39;nt *ttttt}nt *tttt},nt *ttttlineThrough: {nt *tttttname:
&#39;span&#39;,nt *tttttstyles: {nt *tttttt&#39;text-decoration&#39;:
&#39;line-through&#39;nt *ttttt}nt *tttt}nt *ttt}nt *tt} );nt *nt *tt// Use
`upcastAlso` to define other view elements that should be also converted to
`bold` attribute.nt *ttconversion.attributeToElement( {nt *tttmodel:
&#39;bold&#39;,nt *tttview: &#39;strong&#39;,nt *tttupcastAlso: [nt
*tttt&#39;b&#39;,nt *tttt{nt *tttttname: &#39;span&#39;,nt *tttttclasses:
&#39;bold&#39;nt *tttt},nt *tttt{nt *tttttname: &#39;span&#39;,nt
*tttttstyles: {nt *tttttt&#39;font-weight&#39;: &#39;bold&#39;nt *ttttt}nt
*tttt},nt *ttttviewElement =&gt; {nt *tttttconst fontWeight =
viewElement.getStyle( &#39;font-weight&#39; );nt *nt *tttttif (
viewElement.is( &#39;span&#39; ) &amp;&amp; fontWeight &amp;&amp;
/\d+/.test() &amp;&amp; Number( fontWeight ) &gt; 500 ) {nt *tttttt//
Returned value be an object with the matched properties.nt *tttttt// Those
properties will be "consumed&quot; during conversion.nt *tttttt// See
`engine.view.Matcher~MatcherPattern` and `engine.view.Matcher#match` for
more.nt *nt *ttttttreturn {nt *tttttttname: true,nt *tttttttstyles: [
&#39;font-weight&#39; ]nt *tttttt};nt *ttttt}nt *tttt}nt *ttt]nt *tt} );nt
*nt *tt// Conversion from/to a model attribute key which value is an enum
(`fontSize=big|small`).nt *tt// `upcastAlso` set as callback enables a
conversion of a wide range of different view elements.nt
*ttconversion.attributeToElement( {nt *tttmodel: {nt *ttttkey:
&#39;fontSize&#39;,nt *ttttvalues: [ &#39;big&#39;, &#39;small&#39; ]nt
*ttt},nt *tttview: {nt *ttttbig: {nt *tttttname: &#39;span&#39;,nt
*tttttstyles: {nt *tttttt&#39;font-size&#39;: &#39;1.2em&#39;nt *ttttt}nt
*tttt},nt *ttttsmall: {nt *tttttname: &#39;span&#39;,nt *tttttstyles: {nt
*tttttt&#39;font-size&#39;: &#39;0.8em&#39;nt *ttttt}nt *tttt}nt *ttt},nt
*tttupcastAlso: {nt *ttttbig: viewElement =&gt; {nt *tttttconst fontSize =
viewElement.getStyle( &#39;font-size&#39; );nt *nt *tttttif ( !fontSize )
{nt *ttttttreturn null;nt *ttttt}nt *nt *tttttconst match = fontSize.match(
/(\d+)\s*px/ );nt *nt *tttttif ( !match ) {nt *ttttttreturn null;nt
*ttttt}nt *nt *tttttconst size = Number( match[ 1 ] );nt *nt *tttttif (
viewElement.is( &#39;span&#39; ) &amp;&amp; size &gt; 10 ) {nt *tttttt//
Returned value be an object with the matched properties.nt *tttttt// Those
properties will be "consumed&quot; during conversion.nt *tttttt// See
`engine.view.Matcher~MatcherPattern` and `engine.view.Matcher#match` for
more.nt *nt *ttttttreturn { name: true, styles: [ &#39;font-size&#39; ]
};nt *ttttt}nt *nt *tttttreturn null;nt *tttt},nt *ttttsmall: viewElement
=&gt; {nt *tttttconst fontSize = viewElement.getStyle( &#39;font-size&#39;
);nt *nt *tttttif ( !fontSize ) {nt *ttttttreturn null;nt *ttttt}nt *nt
*tttttconst match = fontSize.match( /(\d+)\s*px/ );nt *nt *tttttif ( !match
) {nt *ttttttreturn null;nt *ttttt}nt *nt *tttttconst size = Number( match[
1 ] );nt *nt *tttttif ( viewElement.is( &#39;span&#39; ) &amp;&amp; size
&lt; 10 ) {nt *tttttt// Returned value be an object with the matched
properties.nt *tttttt// Those properties will be "consumed&quot; during
conversion.nt *tttttt// See `engine.view.Matcher~MatcherPattern` and
`engine.view.Matcher#match` for more.nt *nt *ttttttreturn { name: true,
styles: [ &#39;font-size&#39; ] };nt *ttttt}nt *nt *tttttreturn null;nt
*tttt}nt *ttt}nt *tt} );nt *nt * `definition.model` parameter specifies
what model attribute should be converted from/to. It can be a `{ key, value
}` objectnt * describing attribute key and value to convert or a `String`
specifying just attribute key (then `value` is set to `true`).nt * See
{@link module:engine/conversion/conversion~ConverterDefinition} to learn
about other parameters.nt *nt * @param
{module:engine/conversion/conversion~ConverterDefinition} definition
Converter definition.nt */ntattributeToElement( definition ) {ntt// Set up
downcast converter.nttthis.for( &#39;downcast&#39; ).add(
downcastAttributeToElement( definition ) );nntt// Set up upcast
converter.nttfor ( const { model, view } of _getAllUpcastDefinitions(
definition ) ) {ntttthis.for( &#39;upcast&#39;
).add(nttttupcastElementToAttribute(
{ntttttview,ntttttmodel,ntttttpriority: definition.priorityntttt}
)nttt);ntt}nt}nnt/**nt * Sets up converters between the model and the view
which convert a model attribute to a view attribute (and vice versa).nt *
For example, `&lt;image src=&#39;foo.jpg&#39;&gt;&lt;/image&gt;` is
converted to `&lt;img src=&#39;foo.jpg&#39;&gt;&lt;/img&gt;` (same
attribute key and value).nt *nt *tt// Simple conversion from `source` model
attribute to `src` view attribute (and vice versa).nt
*ttconversion.attributeToAttribute( { model: &#39;source&#39;, view:
&#39;src&#39; } );nt *nt *tt// Attributes values are strictly specified.nt
*ttconversion.attributeToAttribute( {nt *tttmodel: {nt *ttttname:
&#39;image&#39;,nt *ttttkey: &#39;aside&#39;,nt *ttttvalues: [
&#39;aside&#39; ]nt *ttt},nt *tttview: {nt *ttttaside: {nt *tttttname:
&#39;img&#39;,nt *tttttkey: &#39;class&#39;,nt *tttttvalue: [
&#39;aside&#39;, &#39;half-size&#39; ]nt *tttt}nt *ttt}nt *tt} );nt *nt
*tt// Set style attribute.nt *ttconversion.attributeToAttribute( {nt
*tttmodel: {nt *ttttname: &#39;image&#39;,nt *ttttkey: &#39;aside&#39;,nt
*ttttvalues: [ &#39;aside&#39; ]nt *ttt},nt *tttview: {nt *ttttaside: {nt
*tttttname: &#39;img&#39;,nt *tttttkey: &#39;style&#39;,nt *tttttvalue: {nt
*ttttttfloat: &#39;right&#39;,nt *ttttttwidth: &#39;50%&#39;,nt
*ttttttmargin: &#39;5px&#39;nt *ttttt}nt *tttt}nt *ttt}nt *tt} );nt *nt
*tt// Conversion from/to a model attribute key which value is an enum
(`align=right|center`).nt *tt// Use `upcastAlso` to define other view
elements that should be also converted to `align=right` attribute.nt
*ttconversion.attributeToAttribute( {nt *tttmodel: {nt *ttttkey:
&#39;align&#39;,nt *ttttvalues: [ &#39;right&#39;, &#39;center&#39; ]nt
*ttt},nt *tttview: {nt *ttttright: {nt *tttttkey: &#39;class&#39;,nt
*tttttvalue: &#39;align-right&#39;nt *tttt},nt *ttttcenter: {nt *tttttkey:
&#39;class&#39;,nt *tttttvalue: &#39;align-center&#39;nt *tttt}nt *ttt},nt
*tttupcastAlso: {nt *ttttright: {nt *tttttstyles: {nt
*tttttt&#39;text-align&#39;: &#39;right&#39;nt *ttttt}nt *tttt},nt
*ttttcenter: {nt *tttttstyles: {nt *tttttt&#39;text-align&#39;:
&#39;center&#39;nt *ttttt}nt *tttt}nt *ttt}nt *tt} );nt *nt *
`definition.model` parameter specifies what model attribute should be
converted from/to.nt * It can be a `{ key, [ values ], [ name ] }` object
or a `String`, which will be treated like `{ key: definition.model }`.nt *
`key` property is the model attribute key to convert from/to.nt * `values`
are the possible model attribute values. If `values` is not set, model
attribute value will be the same as thent * view attribute value.nt * If
`name` is set, conversion will be set up only for model elements with the
given name.nt *nt * `definition.view` parameter specifies what view
attribute should be converted from/to.nt * It can be a `{ key, value, [
name ] }` object or a `String`, which will be treated like `{ key:
definition.view }`.nt * `key` property is the view attribute key to convert
from/to.nt * `value` is the view attribute value to convert from/to. If
`definition.value` is not set, view attribute value will bent * the same as
the model attribute value.nt * If `key` is `&#39;class&#39;`, `value` can
be a `String` or an array of `String`s.nt * If `key` is `&#39;style&#39;`,
`value` is an object with key-value pairs.nt * In other cases, `value` is a
`String`.nt * If `name` is set, conversion will be set up only for model
elements with the given name.nt * If `definition.model.values` is set,
`definition.view` is an object which assigns values from
`definition.model.values`nt * to `{ key, value, [ name ] }` objects.nt *nt
* `definition.upcastAlso` specifies which other matching view elements
should be also upcast to given model configuration.nt * If
`definition.model.values` is set, `definition.upcastAlso` should be an
object assigning values from `definition.model.values`nt * to {@link
module:engine/view/matcher~MatcherPattern}s or arrays of {@link
module:engine/view/matcher~MatcherPattern}s.nt *nt * *Note:*
`definition.model` and `definition.view` form should be mirrored, that is
the same type of parameters shouldnt * be given in both parameters.nt *nt *
@param {Object} definition Converter definition.nt * @param {String|Object}
definition.model Model attribute to convert from/to.nt * @param
{String|Object} definition.view View attribute to convert from/to.nt *
@param
{module:engine/view/matcher~MatcherPattern|Array.&lt;module:engine/view/matcher~MatcherPattern&gt;}
[definition.upcastAlso]nt * Any view element matching
`definition.upcastAlso` will also be converted to the given model
attribute. `definition.upcastAlso`nt * is used only if
`config.model.values` is specified.nt */ntattributeToAttribute( definition
) {ntt// Set up downcast converter.nttthis.for( &#39;downcast&#39; ).add(
downcastAttributeToAttribute( definition ) );nntt// Set up upcast
converter.nttfor ( const { model, view } of _getAllUpcastDefinitions(
definition ) ) {ntttthis.for( &#39;upcast&#39;
).add(nttttupcastAttributeToAttribute( {ntttttview,ntttttmodelntttt}
)nttt);ntt}nt}nnt/**nt * Returns dispatchers registered under given group
name.nt *nt * If given group name has not been registered,nt * {@link
module:utils/ckeditorerror~CKEditorError conversion-for-unknown-group}
error is thrown.nt *nt * @privatent * @param {String} groupNament *
@returns
{Array.&lt;module:engine/conversion/downcastdispatcher~DowncastDispatcher|nt
* module:engine/conversion/upcastdispatcher~UpcastDispatcher&gt;}nt
*/nt_getDispatchers( groupName ) {nttconst dispatchers =
this._dispatchersGroups.get( groupName );nnttif ( !dispatchers )
{nttt/**nttt * Trying to add a converter to an unknown dispatchers
group.nttt *nttt * @error conversion-for-unknown-groupnttt */ntttthrow new
CKEditorError( &#39;conversion-for-unknown-group: Trying to add a converter
to an unknown dispatchers group.&#39; );ntt}nnttreturn
dispatchers;nt}n}nn/**n * Defines how the model should be converted from/to
the view.n *n * @typedef {Object}
module:engine/conversion/conversion~ConverterDefinitionn *n * @property {*}
[model] Model conversion definition. Describes model element or model
attribute to convert. This parameter differsn * for different functions
that accepts `ConverterDefinition`. See the description of a function to
learn how to set it.n * @property
{module:engine/view/elementdefinition~ElementDefinition|Object} view
Definition of a view element to convert from/to.n * If `model` describes
multiple values, `view` is an object that assigns those values (`view`
object keys) to view element definitionsn * (`view` object values).n *
@property
{module:engine/view/matcher~MatcherPattern|Array.&lt;module:engine/view/matcher~MatcherPattern&gt;}
[upcastAlso]n * Any view element matching `upcastAlso` will also be
converted to model. If `model` describes multiple values, `upcastAlso`n *
is an object that assigns those values (`upcastAlso` object keys) to {@link
module:engine/view/matcher~MatcherPattern}sn * (`upcastAlso` object
values).n * @property {module:utils/priorities~PriorityString} [priority]
Conversion priority.n */nn// Helper function for `Conversion` `.add()`
method.n//n// Calls `conversionHelper` on each dispatcher from the group
specified earlier in `.for()` call, effectivelyn// adding converters to all
specified dispatchers.n//n// @privaten// @param
{Array.&lt;module:engine/conversion/downcastdispatcher~DowncastDispatcher|n//
module:engine/conversion/upcastdispatcher~UpcastDispatcher&gt;}
dispatchersn// @param {Function} conversionHelpernfunction
_addToDispatchers( dispatchers, conversionHelper ) {ntfor ( const
dispatcher of dispatchers ) {nttconversionHelper( dispatcher );nt}n}nn//
Helper function that creates a joint array out of an item passed in
`definition.view` and items passed inn// `definition.upcastAlso`.n//n//
@param {module:engine/conversion/conversion~ConverterDefinition}
definitionn// @returns {Array} Array containing view definitions.nfunction*
_getAllUpcastDefinitions( definition ) {ntif ( definition.model.values )
{nttfor ( const value of definition.model.values ) {ntttconst model = {
key: definition.model.key, value };ntttconst view = definition.view[ value
];ntttconst upcastAlso = definition.upcastAlso ? definition.upcastAlso[
value ] : undefined;nntttyield* _getUpcastDefinition( model, view,
upcastAlso );ntt}nt} else {nttyield* _getUpcastDefinition(
definition.model, definition.view, definition.upcastAlso );nt}n}nnfunction*
_getUpcastDefinition( model, view, upcastAlso ) {ntyield { model, view
};nntif ( upcastAlso ) {nttupcastAlso = Array.isArray( upcastAlso ) ?
upcastAlso : [ upcastAlso ];nnttfor ( const upcastAlsoItem of upcastAlso )
{ntttyield { model, view: upcastAlsoItem
};ntt}nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/conversion/conversion.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module engine/model/operation/operationn */nnimport clone from
&#39;@ckeditor/ckeditor5-utils/src/lib/lodash/clone&#39;;nn/**n * Abstract
base operation class.n *n * @abstractn */nexport default class Operation
{nt/**nt * Base operation constructor.nt *nt * @param {Number|null}
baseVersion Document {@link module:engine/model/document~Document#version}
on which operationnt * can be applied or `null` if the operation operates
on detached (non-document) tree.nt */ntconstructor( baseVersion )
{ntt/**ntt * {@link module:engine/model/document~Document#version} on which
operation can be applied. If you try tontt * {@link
module:engine/model/model~Model#applyOperation apply} operation with
different base version than thentt * {@link
module:engine/model/document~Document#version document version} thentt *
{@link module:utils/ckeditorerror~CKEditorError
model-document-applyOperation-wrong-version} error is thrown.ntt *ntt *
@member {Number}ntt */nttthis.baseVersion = baseVersion;nntt/**ntt *
Defines whether operation is executed on attached or detached {@link
module:engine/model/item~Item items}.ntt *ntt * @readonlyntt * @member
{Boolean} isDocumentOperationntt */nttthis.isDocumentOperation =
this.baseVersion !== null;nntt/**ntt * Operation type.ntt *ntt *
@readonlyntt * @member {String} typentt */nntt/**ntt * {@link
module:engine/model/delta/delta~Delta Delta} which the operation is a part
of. This property is set by thentt * {@link
module:engine/model/delta/delta~Delta delta} when the operations is added
to it by thentt * {@link
module:engine/model/delta/delta~Delta#addOperation} method.ntt *ntt *
@member {module:engine/model/delta/delta~Delta} deltantt */nntt/**ntt *
Creates and returns an operation that has the same parameters as this
operation.ntt *ntt * @method clonentt * @returns
{module:engine/model/operation/operation~Operation} Clone of this
operation.ntt */nntt/**ntt * Creates and returns a reverse operation.
Reverse operation when executed right afterntt * the original operation
will bring back tree model state to the point before the originalntt *
operation execution. In other words, it reverses changes done by the
original operation.ntt *ntt * Keep in mind that tree model state may change
since executing the original operation,ntt * so reverse operation will be
"outdated&quot;. In that case you will need tontt * {@link
module:engine/model/operation/transform~transform} it by all operations
that were executed after the original operation.ntt *ntt * @method
getReversedntt * @returns
{module:engine/model/operation/operation~Operation} Reversed operation.ntt
*/nntt/**ntt * Executes the operation - modifications described by the
operation properties will be applied to the model tree.ntt *ntt *
@protectedntt * @method #_executentt */nt}nnt/**nt * Checks whether the
operation&#39;s parameters are correct and the operation can be correctly
executed. Throwsnt * an error if operation is not valid.nt *nt *
@protectednt * @method #_validatent */nt_validate() {nt}nnt/**nt * Custom
toJSON method to solve child-parent circular dependencies.nt *nt * @method
toJSONnt * @returns {Object} Clone of this object with the delta property
replaced with string.nt */nttoJSON() {nttconst json = clone( this, true
);nnttjson.__className = this.constructor.className;nntt// Remove parent
delta to avoid circular dependencies.nttdelete json.delta;nntt// Only
document operations are shared with other clients so it is not necessary to
keep this information.nttdelete json.isDocumentOperation;nnttreturn
json;nt}nnt/**nt * Name of the operation class used for serialization.nt
*nt * @type {String}nt */ntstatic get className() {nttreturn
&#39;engine.model.operation.Operation&#39;;nt}nnt/**nt * Creates Operation
object from deserilized object, i.e. from parsed JSON string.nt *nt *
@param {Object} json Deserialized JSON object.nt * @param
{module:engine/model/document~Document} doc Document on which this
operation will be applied.nt * @returns
{module:engine/model/operation/operation~Operation}nt */ntstatic fromJSON(
json ) {nttreturn new this( json.baseVersion
);nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/operation/operation.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module module:engine/model/documentfragmentn */nnimport
NodeList from &#39;./nodelist&#39;;nimport Element from
&#39;./element&#39;;nimport Text from &#39;./text&#39;;nimport TextProxy
from &#39;./textproxy&#39;;nimport isIterable from
&#39;@ckeditor/ckeditor5-utils/src/isiterable&#39;;nn/**n *
DocumentFragment represents a part of model which does not have a common
root but it&#39;s top-level nodesn * can be seen as siblings. In other
words, it is a detached part of model tree, without a root.n *n *
DocumentFragment has own {@link
module:engine/model/markercollection~MarkerCollection}. Markers from this
collectionn * will be set to the {@link
module:engine/model/model~Model#markers model markers} by an * {@link
module:engine/model/writer~Writer#insert} function.n */nexport default
class DocumentFragment {nt/**nt * Creates an empty `DocumentFragment`.nt
*nt * *Note:* Constructor of this class shouldn&#39;t be used directly in
the code.nt * Use the {@link
module:engine/model/writer~Writer#createDocumentFragment} method instead.nt
*nt * @protectednt * @param
{module:engine/model/node~Node|Iterable.&lt;module:engine/model/node~Node&gt;}
[children]nt * Nodes to be contained inside the `DocumentFragment`.nt
*/ntconstructor( children ) {ntt/**ntt * DocumentFragment static markers
map. This is a list of names and {@link module:engine/model/range~Range
ranges}ntt * which will be set as Markers to {@link
module:engine/model/model~Model#markers model markers collection}ntt * when
DocumentFragment will be inserted to the document.ntt *ntt * @readonlyntt *
@member {Map&lt;String,module:engine/model/range~Range&gt;}
module:engine/model/documentfragment~DocumentFragment#markersntt
*/nttthis.markers = new Map();nntt/**ntt * List of nodes contained inside
the document fragment.ntt *ntt * @privatentt * @member
{module:engine/model/nodelist~NodeList}
module:engine/model/documentfragment~DocumentFragment#_childrenntt
*/nttthis._children = new NodeList();nnttif ( children )
{ntttthis._insertChild( 0, children );ntt}nt}nnt/**nt * Returns an iterator
that iterates over all nodes contained inside this document fragment.nt *nt
* @returns {Iterable.&lt;module:engine/model/node~Node&gt;}nt */nt[
Symbol.iterator ]() {nttreturn this.getChildren();nt}nnt/**nt * Number of
this document fragment&#39;s children.nt *nt * @readonlynt * @type
{Number}nt */ntget childCount() {nttreturn
this._children.length;nt}nnt/**nt * Sum of
{module:engine/model/node~Node#offsetSize offset sizes} of all of this
document fragment&#39;s children.nt *nt * @readonlynt * @type {Number}nt
*/ntget maxOffset() {nttreturn this._children.maxOffset;nt}nnt/**nt * Is
`true` if there are no nodes inside this document fragment, `false`
otherwise.nt *nt * @readonlynt * @type {Boolean}nt */ntget isEmpty()
{nttreturn this.childCount === 0;nt}nnt/**nt * Artificial root of
`DocumentFragment`. Returns itself. Added for compatibility reasons.nt *nt
* @readonlynt * @type
{module:engine/model/documentfragment~DocumentFragment}nt */ntget root()
{nttreturn this;nt}nnt/**nt * Artificial parent of `DocumentFragment`.
Returns `null`. Added for compatibility reasons.nt *nt * @readonlynt *
@type {null}nt */ntget parent() {nttreturn null;nt}nnt/**nt * Checks
whether given model tree object is of given type.nt *nt * Read more in
{@link module:engine/model/node~Node#is}.nt *nt * @param {String} typent *
@returns {Boolean}nt */ntis( type ) {nttreturn type ==
&#39;documentFragment&#39;;nt}nnt/**nt * Gets the child at the given index.
Returns `null` if incorrect index was passed.nt *nt * @param {Number} index
Index of child.nt * @returns {module:engine/model/node~Node|null} Child
node.nt */ntgetChild( index ) {nttreturn this._children.getNode( index
);nt}nnt/**nt * Returns an iterator that iterates over all of this document
fragment&#39;s children.nt *nt * @returns
{Iterable.&lt;module:engine/model/node~Node&gt;}nt */ntgetChildren()
{nttreturn this._children[ Symbol.iterator ]();nt}nnt/**nt * Returns an
index of the given child node. Returns `null` if given node is not a child
of this document fragment.nt *nt * @param {module:engine/model/node~Node}
node Child node to look for.nt * @returns {Number|null} Child node&#39;s
index.nt */ntgetChildIndex( node ) {nttreturn this._children.getNodeIndex(
node );nt}nnt/**nt * Returns the starting offset of given child. Starting
offset is equal to the sum ofnt * {module:engine/model/node~Node#offsetSize
offset sizes} of all node&#39;s siblings that are before it. Returns `null`
ifnt * given node is not a child of this document fragment.nt *nt * @param
{module:engine/model/node~Node} node Child node to look for.nt * @returns
{Number|null} Child node&#39;s starting offset.nt */ntgetChildStartOffset(
node ) {nttreturn this._children.getNodeStartOffset( node );nt}nnt/**nt *
Returns path to a `DocumentFragment`, which is an empty array. Added for
compatibility reasons.nt *nt * @returns {Array}nt */ntgetPath() {nttreturn
[];nt}nnt/**nt * Returns a descendant node by its path relative to this
element.nt *nt *tt// &lt;this&gt;a&lt;b&gt;c</strong>&lt;/this&gt;nt
*ttthis.getNodeByPath( [ 0 ] );     // -&gt; "a&quot;nt
*ttthis.getNodeByPath( [ 1 ] );     // -&gt; <strong>nt
*ttthis.getNodeByPath( [ 1, 0 ] );  // -&gt; "c&quot;nt *nt * @param
{Array.&lt;Number&gt;} relativePath Path of the node to find, relative to
this element.nt * @returns
{module:engine/model/node~Node|module:engine/model/documentfragment~DocumentFragment}nt
*/ntgetNodeByPath( relativePath ) {nttlet node = this; //
eslint-disable-line consistent-thisnnttfor ( const index of relativePath )
{ntttnode = node.getChild( node.offsetToIndex( index ) );ntt}nnttreturn
node;nt}nnt/**nt * Converts offset "position&quot; to index
"position&quot;.nt *nt * Returns index of a node that occupies given
offset. If given offset is too low, returns `0`. If given offset isnt * too
high, returns index after last child}.nt *nt *ttconst textNode = new Text(
&#39;foo&#39; );nt *ttconst pElement = new Element( &#39;p&#39; );nt
*ttconst docFrag = new DocumentFragment( [ textNode, pElement ] );nt
*ttdocFrag.offsetToIndex( -1 ); // Returns 0, because offset is too low.nt
*ttdocFrag.offsetToIndex( 0 ); // Returns 0, because offset 0 is taken by
`textNode` which is at index 0.nt *ttdocFrag.offsetToIndex( 1 ); // Returns
0, because `textNode` has `offsetSize` equal to 3, so it occupies offset 1
too.nt *ttdocFrag.offsetToIndex( 2 ); // Returns 0.nt
*ttdocFrag.offsetToIndex( 3 ); // Returns 1.nt *ttdocFrag.offsetToIndex( 4
); // Returns 2. There are no nodes at offset 4, so last available index is
returned.nt *nt * @param {Number} offset Offset to look for.nt * @returns
{Number} Index of a node that occupies given offset.nt */ntoffsetToIndex(
offset ) {nttreturn this._children.offsetToIndex( offset );nt}nnt/**nt *
Converts `DocumentFragment` instance to plain object and returns it.nt *
Takes care of converting all of this document fragment&#39;s children.nt
*nt * @returns {Object} `DocumentFragment` instance converted to plain
object.nt */nttoJSON() {nttconst json = [];nnttfor ( const node of
this._children ) {ntttjson.push( node.toJSON() );ntt}nnttreturn
json;nt}nnt/**nt * Creates a `DocumentFragment` instance from given plain
object (i.e. parsed JSON string).nt * Converts `DocumentFragment` children
to proper nodes.nt *nt * @param {Object} json Plain object to be converted
to `DocumentFragment`.nt * @returns
{module:engine/model/documentfragment~DocumentFragment} `DocumentFragment`
instance created using given plain object.nt */ntstatic fromJSON( json )
{nttconst children = [];nnttfor ( const child of json ) {ntttif (
child.name ) {ntttt// If child has name property, it is an
Element.nttttchildren.push( Element.fromJSON( child ) );nttt} else {ntttt//
Otherwise, it is a Text node.nttttchildren.push( Text.fromJSON( child )
);nttt}ntt}nnttreturn new DocumentFragment( children );nt}nnt/**nt * {@link
#_insertChild Inserts} one or more nodes at the end of this document
fragment.nt *nt * @protectednt * @param
{module:engine/model/item~Item|Iterable.&lt;module:engine/model/item~Item&gt;}
items Items to be inserted.nt */nt_appendChild( items )
{nttthis._insertChild( this.childCount, items );nt}nnt/**nt * Inserts one
or more nodes at the given index and sets {@link
module:engine/model/node~Node#parent parent} of these nodesnt * to this
document fragment.nt *nt * @protectednt * @param {Number} index Index at
which nodes should be inserted.nt * @param
{module:engine/model/item~Item|Iterable.&lt;module:engine/model/item~Item&gt;}
items Items to be inserted.nt */nt_insertChild( index, items ) {nttconst
nodes = normalize( items );nnttfor ( const node of nodes ) {nttt// If node
that is being added to this element is already inside another element,
first remove it from the old parent.ntttif ( node.parent !== null )
{nttttnode._remove();nttt}nntttnode.parent =
this;ntt}nnttthis._children._insertNodes( index, nodes );nt}nnt/**nt *
Removes one or more nodes starting at the given indexnt * and sets {@link
module:engine/model/node~Node#parent parent} of these nodes to `null`.nt
*nt * @protectednt * @param {Number} index Index of the first node to
remove.nt * @param {Number} [howMany=1] Number of nodes to remove.nt *
@returns {Array.&lt;module:engine/model/node~Node&gt;} Array containing
removed nodes.nt */nt_removeChildren( index, howMany = 1 ) {nttconst nodes
= this._children._removeNodes( index, howMany );nnttfor ( const node of
nodes ) {ntttnode.parent = null;ntt}nnttreturn nodes;nt}n}nn// Converts
strings to Text and non-iterables to arrays.n//n// @param
{String|module:engine/model/item~Item|Iterable.&lt;module:engine/model/item~Item&gt;}n//
@return {Iterable.&lt;module:engine/model/node~Node&gt;}nfunction
normalize( nodes ) {nt// Separate condition because string is iterable.ntif
( typeof nodes == &#39;string&#39; ) {nttreturn [ new Text( nodes )
];nt}nntif ( !isIterable( nodes ) ) {nttnodes = [ nodes ];nt}nnt//
Array.from to enable .map() on non-arrays.ntreturn Array.from( nodes
)ntt.map( node =&gt; {ntttif ( typeof node == &#39;string&#39; )
{nttttreturn new Text( node );nttt}nntttif ( node instanceof TextProxy )
{nttttreturn new Text( node.data, node.getAttributes() );nttt}nntttreturn
node;ntt} );n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/documentfragment.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module engine/model/operation/utilsn */nnimport Node from
&#39;../node&#39;;nimport Text from &#39;../text&#39;;nimport TextProxy
from &#39;../textproxy&#39;;nimport Range from &#39;../range&#39;;nimport
DocumentFragment from &#39;../documentfragment&#39;;nimport NodeList from
&#39;../nodelist&#39;;nimport CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nn/**n * Contains
functions used for composing model tree by {@link
module:engine/model/operation/operation~Operation operations}.n * Those
functions are built on top of {@link module:engine/model/node~Node node},
and it&#39;s child classes&#39;, APIs.n *n * @protectedn * @namespace
utilsn */nn/**n * Inserts given nodes at given position.n *n * @protectedn
* @function module:engine/model/operation/utils~utils.insertn * @param
{module:engine/model/position~Position} position Position at which nodes
should be inserted.n * @param {module:engine/model/node~NodeSet} nodes
Nodes to insert.n * @returns {module:engine/model/range~Range} Range
spanning over inserted elements.n */nexport function _insert( position,
nodes ) {ntnodes = _normalizeNodes( nodes );nnt// We have to count offset
before inserting nodes because they can get merged and we would get wrong
offsets.ntconst offset = nodes.reduce( ( sum, node ) =&gt; sum +
node.offsetSize, 0 );ntconst parent = position.parent;nnt// Insertion might
be in a text node, we should split it if that&#39;s the
case.nt_splitNodeAtPosition( position );ntconst index =
position.index;nnt// Insert nodes at given index. After splitting we have a
proper index and insertion is between nodes,nt// using basic `Element`
API.ntparent._insertChild( index, nodes );nnt// Merge text nodes, if
possible. Merging is needed only at points where inserted nodes
"touch&quot; "old&quot; nodes.nt_mergeNodesAtIndex( parent, index +
nodes.length );nt_mergeNodesAtIndex( parent, index );nntreturn new Range(
position, position.getShiftedBy( offset ) );n}nn/**n * Removed nodes in
given range. Only {@link module:engine/model/range~Range#isFlat flat}
ranges are accepted.n *n * @protectedn * @function
module:engine/model/operation/utils~utils._removen * @param
{module:engine/model/range~Range} range Range containing nodes to remove.n
* @returns {Array.&lt;module:engine/model/node~Node&gt;}n */nexport
function _remove( range ) {ntif ( !range.isFlat ) {ntt/**ntt * Trying to
remove a range which starts and ends in different element.ntt *ntt * @error
operation-utils-remove-range-not-flatntt */nttthrow new CKEditorError(
&#39;operation-utils-remove-range-not-flat: &#39; +nttt&#39;Trying to
remove a range which starts and ends in different element.&#39;
);nt}nntconst parent = range.start.parent;nnt// Range may be inside text
nodes, we have to split them if that&#39;s the case.nt_splitNodeAtPosition(
range.start );nt_splitNodeAtPosition( range.end );nnt// Remove the text
nodes using basic `Element` API.ntconst removed = parent._removeChildren(
range.start.index, range.end.index - range.start.index );nnt// Merge text
nodes, if possible. After some nodes were removed, node before and after
removed range will bent// touching at the position equal to the removed
range beginning. We check merging possibility there.nt_mergeNodesAtIndex(
parent, range.start.index );nntreturn removed;n}nn/**n * Moves nodes in
given range to given target position. Only {@link
module:engine/model/range~Range#isFlat flat} ranges are accepted.n *n *
@protectedn * @function module:engine/model/operation/utils~utils.moven *
@param {module:engine/model/range~Range} sourceRange Range containing nodes
to move.n * @param {module:engine/model/position~Position} targetPosition
Position to which nodes should be moved.n * @returns
{module:engine/model/range~Range} Range containing moved nodes.n */nexport
function _move( sourceRange, targetPosition ) {ntif ( !sourceRange.isFlat )
{ntt/**ntt * Trying to move a range which starts and ends in different
element.ntt *ntt * @error operation-utils-move-range-not-flatntt */nttthrow
new CKEditorError( &#39;operation-utils-move-range-not-flat: &#39;
+nttt&#39;Trying to move a range which starts and ends in different
element.&#39; );nt}nntconst nodes = _remove( sourceRange );nnt// We have to
fix `targetPosition` because model changed after nodes from `sourceRange`
got removed andnt// that change might have an impact on
`targetPosition`.nttargetPosition =
targetPosition._getTransformedByDeletion( sourceRange.start,
sourceRange.end.offset - sourceRange.start.offset );nntreturn _insert(
targetPosition, nodes );n}nn/**n * Sets given attribute on nodes in given
range.n *n * @protectedn * @function
module:engine/model/operation/utils~utils._setAttributen * @param
{module:engine/model/range~Range} range Range containing nodes that should
have the attribute set.n * @param {String} key Key of attribute to set.n *
@param {*} value Attribute value.n */nexport function _setAttribute( range,
key, value ) {nt// Range might start or end in text nodes, so we have to
split them.nt_splitNodeAtPosition( range.start );nt_splitNodeAtPosition(
range.end );nnt// Iterate over all items in the range.ntfor ( const item of
range.getItems() ) {ntt// Iterator will return `TextProxy` instances but we
know that those text proxies willntt// always represent full text nodes
(this is guaranteed thanks to splitting we did before).ntt// So, we can
operate on those text proxies&#39; text nodes.nttconst node = item.is(
&#39;textProxy&#39; ) ? item.textNode : item;nnttif ( value !== null )
{ntttnode._setAttribute( key, value );ntt} else {ntttnode._removeAttribute(
key );ntt}nntt// After attributes changing it may happen that some text
nodes can be merged. Try to merge with previous node.ntt_mergeNodesAtIndex(
node.parent, node.index );nt}nnt// Try to merge last changed node with
it&#39;s previous sibling (not covered by the loop
above).nt_mergeNodesAtIndex( range.end.parent, range.end.index );n}nn/**n *
Normalizes given object or an array of objects to an array of {@link
module:engine/model/node~Node nodes}. Seen * {@link
module:engine/model/node~NodeSet NodeSet} for details on how normalization
is performed.n *n * @protectedn * @function
module:engine/model/operation/utils~utils.normalizeNodesn * @param
{module:engine/model/node~NodeSet} nodes Objects to normalize.n * @returns
{Array.&lt;module:engine/model/node~Node&gt;} Normalized nodes.n */nexport
function _normalizeNodes( nodes ) {ntconst normalized = [];nntif ( !( nodes
instanceof Array ) ) {nttnodes = [ nodes ];nt}nnt// Convert instances of
classes other than Node.ntfor ( let i = 0; i &lt; nodes.length; i++ )
{nttif ( typeof nodes[ i ] == &#39;string&#39; ) {ntttnormalized.push( new
Text( nodes[ i ] ) );ntt} else if ( nodes[ i ] instanceof TextProxy )
{ntttnormalized.push( new Text( nodes[ i ].data, nodes[ i ].getAttributes()
) );ntt} else if ( nodes[ i ] instanceof DocumentFragment || nodes[ i ]
instanceof NodeList ) {ntttfor ( const child of nodes[ i ] )
{nttttnormalized.push( child );nttt}ntt} else if ( nodes[ i ] instanceof
Node ) {ntttnormalized.push( nodes[ i ] );ntt}ntt// Skip unrecognized
type.nt}nnt// Merge text nodes.ntfor ( let i = 1; i &lt; normalized.length;
i++ ) {nttconst node = normalized[ i ];nttconst prev = normalized[ i - 1
];nnttif ( node instanceof Text &amp;&amp; prev instanceof Text &amp;&amp;
_haveSameAttributes( node, prev ) ) {nttt// Doing this instead changing
prev.data because .data is readonly.ntttnormalized.splice( i - 1, 2, new
Text( prev.data + node.data, prev.getAttributes() )
);nttti–;ntt}nt}nntreturn normalized;n}nn/**n * Checks if nodes before and
after given index in given element are {@link module:engine/model/text~Text
text nodes} andn * merges them into one node if they have same attributes.n
*n * Merging is done by removing two text nodes and inserting a new text
node containing data from both merged text nodes.n *n * @ignoren *
@privaten * @param {module:engine/model/element~Element} element Parent
element of nodes to merge.n * @param {Number} index Index between nodes to
merge.n */nfunction _mergeNodesAtIndex( element, index ) {ntconst
nodeBefore = element.getChild( index - 1 );ntconst nodeAfter =
element.getChild( index );nnt// Check if both of those nodes are text
objects with same attributes.ntif ( nodeBefore &amp;&amp; nodeAfter
&amp;&amp; nodeBefore.is( &#39;text&#39; ) &amp;&amp; nodeAfter.is(
&#39;text&#39; ) &amp;&amp; _haveSameAttributes( nodeBefore, nodeAfter ) )
{ntt// Append text of text node after index to the before one.nttconst
mergedNode = new Text( nodeBefore.data + nodeAfter.data,
nodeBefore.getAttributes() );nntt// Remove separate text
nodes.nttelement._removeChildren( index - 1, 2 );nntt// Insert merged text
node.nttelement._insertChild( index - 1, mergedNode );nt}n}nn/**n * Checks
if given position is in a text node, and if so, splits the text node in two
text nodes, each of themn * containing a part of original text node.n *n *
@ignoren * @privaten * @param {module:engine/model/position~Position}
position Position at which node should be split.n */nfunction
_splitNodeAtPosition( position ) {ntconst textNode =
position.textNode;ntconst element = position.parent;nntif ( textNode )
{nttconst offsetDiff = position.offset - textNode.startOffset;nttconst
index = textNode.index;nnttelement._removeChildren( index, 1 );nnttconst
firstPart = new Text( textNode.data.substr( 0, offsetDiff ),
textNode.getAttributes() );nttconst secondPart = new Text(
textNode.data.substr( offsetDiff ), textNode.getAttributes()
);nnttelement._insertChild( index, [ firstPart, secondPart ] );nt}n}nn/**n
* Checks whether two given nodes have same attributes.n *n * @ignoren *
@privaten * @param {module:engine/model/node~Node} nodeA Node to check.n *
@param {module:engine/model/node~Node} nodeB Node to check.n * @returns
{Boolean} `true` if nodes have same attributes, `false` otherwise.n
*/nfunction _haveSameAttributes( nodeA, nodeB ) {ntconst iteratorA =
nodeA.getAttributes();ntconst iteratorB = nodeB.getAttributes();nntfor (
const attr of iteratorA ) {nttif ( attr[ 1 ] !== nodeB.getAttribute( attr[
0 ] ) ) {ntttreturn false;ntt}nnttiteratorB.next();nt}nntreturn
iteratorB.next().done;n}nn/**n * Value that can be normalized to an array
of {@link module:engine/model/node~Node nodes}.n *n * Non-arrays are
normalized as follows:n * * {@link module:engine/model/node~Node Node} is
left as is,n * * {@link module:engine/model/textproxy~TextProxy TextProxy}
and `String` are normalized to {@link module:engine/model/text~Text Text},n
* * {@link module:engine/model/nodelist~NodeList NodeList} is normalized to
an array containing all nodes that are in that node list,n * * {@link
module:engine/model/documentfragment~DocumentFragment DocumentFragment} is
normalized to an array containing all of it&#39;sn * * children.n *n *
Arrays are processed item by item like non-array values and flattened to
one array. Normalization always results inn * a flat array of {@link
module:engine/model/node~Node nodes}. Consecutive text nodes (or items
normalized to text nodes) will ben * merged if they have same attributes.n
*n * @typedef
{module:engine/model/node~Node|module:engine/model/textproxy~TextProxy|String|n
*
module:engine/model/nodelist~NodeList|module:engine/model/documentfragment~DocumentFragment|Iterable}n
* module:engine/model/node~NodeSetn */nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-engine/src/model/operation/utils.jsn// module id =
nulln// module chunks = “,”import baseIsEqual from
&#39;./_baseIsEqual&#39;;nn/**n * Performs a deep comparison between two
values to determine if they aren * equivalent.n *n * *Note:* This method
supports comparing arrays, array buffers, booleans,n * date objects, error
objects, maps, numbers, `Object` objects, regexes,n * sets, strings,
symbols, and typed arrays. `Object` objects are comparedn * by their own,
not inherited, enumerable properties. Functions and DOMn * nodes are *not*
supported.n *n * @staticn * @memberOf _n * @since 0.1.0n * @category Langn
* @param {*} value The value to compare.n * @param {*} other The other
value to compare.n * @returns {boolean} Returns `true` if the values are
equivalent,n *  else `false`.n * @examplen *n * var object = {
&#39;user&#39;: &#39;fred&#39; };n * var other = { &#39;user&#39;:
&#39;fred&#39; };n *n * _.isEqual(object, other);n * // =&gt; truen *n *
object === other;n * // =&gt; falsen */nfunction isEqual(value, other) {n 
return baseIsEqual(value, other);n}nnexport default
isEqual;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/isEqual.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module engine/model/operation/transformn */nnimport InsertOperation from
&#39;./insertoperation&#39;;nimport AttributeOperation from
&#39;./attributeoperation&#39;;nimport RootAttributeOperation from
&#39;./rootattributeoperation&#39;;nimport RenameOperation from
&#39;./renameoperation&#39;;nimport MarkerOperation from
&#39;./markeroperation&#39;;nimport MoveOperation from
&#39;./moveoperation&#39;;nimport RemoveOperation from
&#39;./removeoperation&#39;;nimport ReinsertOperation from
&#39;./reinsertoperation&#39;;nimport NoOperation from
&#39;./nooperation&#39;;nimport Range from &#39;../range&#39;;nimport
compareArrays from
&#39;@ckeditor/ckeditor5-utils/src/comparearrays&#39;;nn/**n * Transforms
given {@link module:engine/model/operation/operation~Operation operation}n
* by another {@link module:engine/model/operation/operation~Operation
operation}n * and returns the result of that transformation as an array
containingn * one or more {@link
module:engine/model/operation/operation~Operation operations}.n *n *
Operations work on specified positions, passed to them when they are
created.n * Whenever {@link module:engine/model/document~Document
document}n * changes, we have to reflect those modifications by updating or
"transforming&quot; operations which are not yet applied.n * When an
operation is transformed, its parameters may change based on the operation
by which it is transformed.n * If the transform-by operation applied any
modifications to the Tree Data Model which affect positions or nodesn *
connected with transformed operation, those changes will be reflected in
the parameters of the returned operation(s).n *n * Whenever the {@link
module:engine/model/document~Document document}n * has different {@link
module:engine/model/document~Document#version}n * than the operation you
want to {@link module:engine/model/model~Model#applyOperation apply}, you
need to transform thatn * operation by all operations which were already
applied to the {@link module:engine/model/document~Document document} and
have greatern * {@link module:engine/model/document~Document#version} than
the operation being applied. Transform them in the same order as thosen *
operations which were applied. This way all modifications done to the Tree
Data Model will be reflectedn * in the operation parameters and the
operation will "operate&quot; on "up-to-date&quot; version of the Tree Data
Model.n * This is mostly the case with Operational Transformations but it
might be needed in particular features as well.n *n * In some cases, when
given operation apply changes to the same nodes as this operation, two or
more operations needn * to be created as one would not be able to reflect
the combination of these operations.n * This is why an array is returned
instead of a single object. All returned operations have to be appliedn *
(or further transformed) to get an effect which was intended in
pre-transformed operation.n *n * Sometimes two operations are in conflict.
This happens when they modify the same node in a different way, i.e.n * set
different value for the same attribute or move the node into different
positions. When this happens,n * we need to decide which operation is more
important. We can&#39;t assume that operation `a` or operation `b` is
alwaysn * more important. In Operational Transformations algorithms we
often need to get a result of transformingn * `a` by `b` and also `b` by
`a`. In both transformations the same operation has to be the important
one. If we assumen * that first or the second passed operation is always
more important we won&#39;t be able to solve this case.n *n * @function
module:engine/model/operation/transform~transformn * @param
{module:engine/model/operation/operation~Operation} a Operation that will
be transformed.n * @param
{module:engine/model/operation/operation~Operation} b Operation to
transform by.n * @param
{module:engine/model/delta/transform~transformationContext} [context]
Transformation context.n * @returns
{Array.&lt;module:engine/model/operation/operation~Operation&gt;} Result of
the transformation.n */nnexport default transform;nnconst ot =
{ntInsertOperation: {ntt// Transforms InsertOperation `a` by
InsertOperation `b`. Accepts a flag stating whether `a` is more
importantntt// than `b` when it comes to resolving conflicts. Returns
results as an array of operations.nttInsertOperation( a, b, context )
{nttt// Transformed operations are always new instances, not references to
the original operations.ntttconst transformed = a.clone();nnttt// Check
whether there is a forced order of nodes or use `context.isStrong` flag for
conflict resolving.ntttconst insertBefore = context.insertBefore ===
undefined ? !context.isStrong : context.insertBefore;nnttt// Transform
insert position by the other operation position.nttttransformed.position =
transformed.position._getTransformedByInsertion( b.position,
b.nodes.maxOffset, insertBefore );nntttreturn [ transformed
];ntt},nnttAttributeOperation: doNotUpdate,nnttRootAttributeOperation:
doNotUpdate,nnttRenameOperation: doNotUpdate,nnttMarkerOperation:
doNotUpdate,nntt// Transforms InsertOperation `a` by MoveOperation `b`.
Accepts a flag stating whether `a` is more importantntt// than `b` when it
comes to resolving conflicts. Returns results as an array of
operations.nttMoveOperation( a, b, context ) {ntttconst transformed =
a.clone();nnttt// Check whether there is a forced order of nodes or use
`context.isStrong` flag for conflict resolving.ntttconst insertBefore =
context.insertBefore === undefined ? !context.isStrong :
context.insertBefore;nnttt// Transform insert position by the other
operation parameters.nttttransformed.position =
a.position._getTransformedByMove(nttttb.sourcePosition,nttttb.targetPosition,nttttb.howMany,nttttinsertBefore,nttttb.isSticky
&amp;&amp; !context.forceNotStickynttt);nntttreturn [ transformed
];ntt}nt},nntAttributeOperation: {ntt// Transforms AttributeOperation `a`
by InsertOperation `b`. Returns results as an array of
operations.nttInsertOperation( a, b ) {nttt// Transform this
operation&#39;s range.ntttconst ranges =
a.range._getTransformedByInsertion( b.position, b.nodes.maxOffset, true,
false );nnttt// Map transformed range(s) to operations and return
them.ntttreturn ranges.reverse().map( range =&gt; {nttttreturn new
AttributeOperation( range, a.key, a.oldValue, a.newValue, a.baseVersion
);nttt} );ntt},nntt// Transforms AttributeOperation `a` by
AttributeOperation `b`. Accepts a flag stating whether `a` is more
importantntt// than `b` when it comes to resolving conflicts. Returns
results as an array of operations.nttAttributeOperation( a, b, context )
{ntttif ( a.key === b.key ) {ntttt// If operations attributes are in
conflict, check if their ranges intersect and manage them properly.nntttt//
First, we want to apply change to the part of a range that has not been
changed by the other operation.nttttconst operations =
a.range.getDifference( b.range ).map( range =&gt; {ntttttreturn new
AttributeOperation( range, a.key, a.oldValue, a.newValue, a.baseVersion
);ntttt} );nntttt// Then we take care of the common part of
ranges.nttttconst common = a.range.getIntersection( b.range );nnttttif (
common ) {nttttt// If this operation is more important, we also want to
apply change to the part of thenttttt// original range that has already
been changed by the other operation. Since that rangenttttt// got changed
we also have to update `oldValue`.ntttttif ( context.isStrong )
{nttttttoperations.push( new AttributeOperation( common, b.key, b.newValue,
a.newValue, a.baseVersion ) );nttttt} else if ( operations.length === 0 )
{nttttttoperations.push( new NoOperation( 0 ) );nttttt}ntttt}nnttttreturn
operations;nttt} else {ntttt// If operations don&#39;t conflict, simply
return an array containing just a clone of this operation.nttttreturn [
a.clone() ];nttt}ntt},nnttRootAttributeOperation:
doNotUpdate,nnttRenameOperation: doNotUpdate,nnttMarkerOperation:
doNotUpdate,nntt// Transforms AttributeOperation `a` by MoveOperation `b`.
Returns results as an array of operations.nttMoveOperation( a, b ) {nttt//
Convert MoveOperation properties into a range.ntttconst rangeB =
Range.createFromPositionAndShift( b.sourcePosition, b.howMany );nnttt//
This will aggregate transformed ranges.ntttlet ranges = [];nnttt//
Difference is a part of changed range that is modified by
AttributeOperation but is not affectednttt// by MoveOperation. This can be
zero, one or two ranges (if moved range is inside changed range).nttt//
Right now we will make a simplification and join difference ranges and
transform them as one. We will cover rangeB later.ntttconst difference =
joinRanges( a.range.getDifference( rangeB ) );nnttt// Common is a range of
nodes that is affected by MoveOperation. So it got moved to other
place.ntttconst common = a.range.getIntersection( rangeB );nntttif (
difference !== null ) {ntttt// MoveOperation removes nodes from their
original position. We acknowledge this by proper transformation.ntttt//
Take the start and the end of the range and transform them by deletion of
moved nodes.ntttt// Note that if rangeB was inside AttributeOperation
range, only difference.end will be transformed.ntttt// This nicely covers
the joining simplification we did in the previous
step.nttttdifference.start = difference.start._getTransformedByDeletion(
b.sourcePosition, b.howMany );nttttdifference.end =
difference.end._getTransformedByDeletion( b.sourcePosition, b.howMany
);nntttt// MoveOperation pastes nodes into target position. We acknowledge
this by proper transformation.ntttt// Note that since we operate on
transformed difference range, we should transform byntttt// previously
transformed target position.ntttt// Note that we do not use
Position._getTransformedByMove on range boundaries because we need
tontttt// transform by insertion a range as a whole, since
newTargetPosition might be inside that range.nttttranges =
difference._getTransformedByInsertion( b.getMovedRangeStart(), b.howMany,
true, false ).reverse();nttt}nntttif ( common !== null ) {ntttt// Here we
do not need to worry that newTargetPosition is inside moved range, because
thatntttt// would mean that the MoveOperation targets into itself, and that
is incorrect operation.ntttt// Instead, we calculate the new position of
that part of original range.nttttcommon.start = common.start._getCombined(
b.sourcePosition, b.getMovedRangeStart() );nttttcommon.end =
common.end._getCombined( b.sourcePosition, b.getMovedRangeStart()
);nnttttranges.push( common );nttt}nnttt// Map transformed range(s) to
operations and return them.ntttreturn ranges.map( range =&gt; {nttttreturn
new AttributeOperation( range, a.key, a.oldValue, a.newValue, a.baseVersion
);nttt} );ntt}nt},nntRootAttributeOperation: {nttInsertOperation:
doNotUpdate,nnttAttributeOperation: doNotUpdate,nntt// Transforms
RootAttributeOperation `a` by RootAttributeOperation `b`. Accepts a flag
stating whether `a` is more importantntt// than `b` when it comes to
resolving conflicts. Returns results as an array of
operations.nttRootAttributeOperation( a, b, context ) {ntttif ( a.root ===
b.root &amp;&amp; a.key === b.key ) {nttttif ( ( a.newValue !== b.newValue
&amp;&amp; !context.isStrong ) || a.newValue === b.newValue ) {ntttttreturn
[ new NoOperation( a.baseVersion ) ];ntttt}nttt}nntttreturn [ a.clone()
];ntt},nnttRenameOperation: doNotUpdate,nnttMarkerOperation:
doNotUpdate,nnttMoveOperation: doNotUpdatent},nntRenameOperation: {ntt//
Transforms RenameOperation `a` by InsertOperation `b`. Returns results as
an array of operations.nttInsertOperation( a, b ) {nttt// Clone the
operation, we don&#39;t want to alter the original operation.ntttconst
clone = a.clone();nnttt// Transform this operation&#39;s
position.ntttclone.position = clone.position._getTransformedByInsertion(
b.position, b.nodes.maxOffset, true );nntttreturn [ clone
];ntt},nnttAttributeOperation: doNotUpdate,nnttRootAttributeOperation:
doNotUpdate,nntt// Transforms RenameOperation `a` by RenameOperation `b`.
Accepts a flag stating whether `a` is more importantntt// than `b` when it
comes to resolving conflicts. Returns results as an array of
operations.nttRenameOperation( a, b, context ) {nttt// Clone the operation,
we don&#39;t want to alter the original operation.ntttconst clone =
a.clone();nntttif ( a.position.isEqual( b.position ) ) {nttttif (
context.isStrong ) {ntttttclone.oldName = b.newName;ntttt} else
{ntttttreturn [ new NoOperation( a.baseVersion ) ];ntttt}nttt}nntttreturn [
clone ];ntt},nnttMarkerOperation: doNotUpdate,nntt// Transforms
RenameOperation `a` by MoveOperation `b`. Returns results as an array of
operations.nttMoveOperation( a, b ) {ntttconst clone = a.clone();ntttconst
isSticky = clone.position.isEqual( b.sourcePosition );nntttclone.position =
clone.position._getTransformedByMove( b.sourcePosition, b.targetPosition,
b.howMany, true, isSticky );nntttreturn [ clone
];ntt}nt},nntMarkerOperation: {ntt// Transforms MarkerOperation `a` by
InsertOperation `b`. Returns results as an array of
operations.nttInsertOperation( a, b ) {nttt// Clone the operation, we
don&#39;t want to alter the original operation.ntttconst clone =
a.clone();nntttif ( clone.oldRange ) {nttttclone.oldRange =
clone.oldRange._getTransformedByInsertion( b.position, b.nodes.maxOffset,
false, false )[ 0 ];nttt}nntttif ( clone.newRange ) {nttttclone.newRange =
clone.newRange._getTransformedByInsertion( b.position, b.nodes.maxOffset,
false, false )[ 0 ];nttt}nntttreturn [ clone ];ntt},nnttAttributeOperation:
doNotUpdate,nnttRootAttributeOperation: doNotUpdate,nnttRenameOperation:
doNotUpdate,nntt// Transforms MarkerOperation `a` by MarkerOperation `b`.
Accepts a flag stating whether `a` is more importantntt// than `b` when it
comes to resolving conflicts. Returns results as an array of
operations.nttMarkerOperation( a, b, context ) {nttt// Clone the operation,
we don&#39;t want to alter the original operation.ntttconst clone =
a.clone();nntttif ( a.name == b.name ) {nttttif ( context.isStrong )
{ntttttclone.oldRange = b.newRange;ntttt} else {ntttttreturn [ new
NoOperation( a.baseVersion ) ];ntttt}nttt}nntttreturn [ clone ];ntt},nntt//
Transforms MarkerOperation `a` by MoveOperation `b`. Returns results as an
array of operations.nttMoveOperation( a, b ) {nttt// Clone the operation,
we don&#39;t want to alter the original operation.ntttconst clone =
a.clone();nntttif ( clone.oldRange ) {nttttconst oldRanges =
clone.oldRange._getTransformedByMove( b.sourcePosition, b.targetPosition,
b.howMany );nttttclone.oldRange = Range.createFromRanges( oldRanges
);nttt}nntttif ( clone.newRange ) {nttttconst newRanges =
clone.newRange._getTransformedByMove( b.sourcePosition, b.targetPosition,
b.howMany );nttttclone.newRange = Range.createFromRanges( newRanges
);nttt}nntttreturn [ clone ];ntt}nt},nntMoveOperation: {ntt// Transforms
MoveOperation `a` by InsertOperation `b`. Accepts a flag stating whether
`a` is more importantntt// than `b` when it comes to resolving conflicts.
Returns results as an array of operations.nttInsertOperation( a, b, context
) {nttt// Create range from MoveOperation properties and transform it by
insertion.ntttlet range = Range.createFromPositionAndShift(
a.sourcePosition, a.howMany );ntttconst includeB = a.isSticky &amp;&amp;
!context.forceNotSticky;nntttrange = range._getTransformedByInsertion(
b.position, b.nodes.maxOffset, false, includeB )[ 0 ];nnttt// Check whether
there is a forced order of nodes or use `context.isStrong` flag for
conflict resolving.ntttconst insertBefore = context.insertBefore ===
undefined ? !context.isStrong : context.insertBefore;nntttconst result =
new a.constructor(nttttrange.start,nttttrange.end.offset -
range.start.offset,ntttta.targetPosition._getTransformedByInsertion(
b.position, b.nodes.maxOffset, insertBefore
),ntttta.baseVersionnttt);nntttresult.isSticky = a.isSticky;nntttreturn [
result ];ntt},nnttAttributeOperation:
doNotUpdate,nnttRootAttributeOperation: doNotUpdate,nnttRenameOperation:
doNotUpdate,nnttMarkerOperation: doNotUpdate,nntt// Transforms
MoveOperation `a` by MoveOperation `b`. Accepts a flag stating whether `a`
is more importantntt// than `b` when it comes to resolving conflicts.
Returns results as an array of operations.nttMoveOperation( a, b, context )
{nttt//nttt// Setting and evaluating some variables that will be used in
special cases and default algorithm.nttt//nttt// Create ranges from
`MoveOperations` properties.ntttconst rangeA =
Range.createFromPositionAndShift( a.sourcePosition, a.howMany );ntttconst
rangeB = Range.createFromPositionAndShift( b.sourcePosition, b.howMany
);nnttt// Assign `context.isStrong` to a different variable, because the
value may change during execution ofnttt// this algorithm and we do not
want to override original `context.isStrong` that will be used in later
transformations.ntttlet isStrong = context.isStrong;nnttt// Whether range
moved by operation `b` is includable in operation `a` move range.nttt// For
this, `a` operation has to be sticky (so `b` sticks to the range) and
context has to allow stickiness.ntttconst includeB = a.isSticky &amp;&amp;
!context.forceNotSticky;nnttt// Evaluate new target position for
transformed operation.nttt// Check whether there is a forced order of nodes
or use `isStrong` flag for conflict resolving.ntttconst insertBefore =
context.insertBefore === undefined ? !isStrong :
context.insertBefore;nnttt// `a.targetPosition` could be affected by the
`b` operation. We will transform it.ntttconst newTargetPosition =
a.targetPosition._getTransformedByMove(nttttb.sourcePosition,nttttb.targetPosition,nttttb.howMany,nttttinsertBefore,nttttb.isSticky
&amp;&amp; !context.forceNotStickynttt);nnttt//nttt// Special case #1 +
mirror.nttt//nttt// Special case when both move operations&#39; target
positions are inside nodes that arenttt// being moved by the other move
operation. So in other words, we move ranges into inside of each
other.nttt// This case can&#39;t be solved reasonably (on the other hand,
it should not happen often).ntttif ( moveTargetIntoMovedRange( a, b )
&amp;&amp; moveTargetIntoMovedRange( b, a ) ) {ntttt// Instead of
transforming operation, we return a reverse of the operation that we
transform by.ntttt// So when the results of this "transformation&quot; will
be applied, `b` MoveOperation will get reversed.nttttreturn [
b.getReversed() ];nttt}nttt//nttt// End of special case
#1.nttt//nnttt//nttt// Special case #2.nttt//nttt// Check if `b` operation
targets inside `rangeA`. Use stickiness if possible.ntttconst bTargetsToA =
rangeA.containsPosition( b.targetPosition ) ||ntttt( rangeA.start.isEqual(
b.targetPosition ) &amp;&amp; includeB ) ||ntttt( rangeA.end.isEqual(
b.targetPosition ) &amp;&amp; includeB );nnttt// If `b` targets to `rangeA`
and `rangeA` contains `rangeB`, `b` operation has no influence on `a`
operation.nttt// You might say that operation `b` is captured inside
operation `a`.ntttif ( bTargetsToA &amp;&amp; rangeA.containsRange( rangeB,
true ) ) {ntttt// There is a mini-special case here, where `rangeB` is on
other level than `rangeA`. That&#39;s whyntttt// we need to transform `a`
operation anyway.nttttrangeA.start = rangeA.start._getTransformedByMove(
b.sourcePosition, b.targetPosition, b.howMany, !includeB );nttttrangeA.end
= rangeA.end._getTransformedByMove( b.sourcePosition, b.targetPosition,
b.howMany, includeB );nnttttreturn makeMoveOperationsFromRanges( [ rangeA
], newTargetPosition, a );nttt}nnttt//nttt// Special case #2
mirror.nttt//ntttconst aTargetsToB = rangeB.containsPosition(
a.targetPosition ) ||ntttt( rangeB.start.isEqual( a.targetPosition )
&amp;&amp; b.isSticky &amp;&amp; !context.forceNotSticky ) ||ntttt(
rangeB.end.isEqual( a.targetPosition ) &amp;&amp; b.isSticky &amp;&amp;
!context.forceNotSticky );nntttif ( aTargetsToB &amp;&amp;
rangeB.containsRange( rangeA, true ) ) {ntttt// `a` operation is "moved
together&quot; with `b` operation.ntttt// Here, just move `rangeA`
"inside&quot; `rangeB`.nttttrangeA.start = rangeA.start._getCombined(
b.sourcePosition, b.getMovedRangeStart() );nttttrangeA.end =
rangeA.end._getCombined( b.sourcePosition, b.getMovedRangeStart()
);nnttttreturn makeMoveOperationsFromRanges( [ rangeA ], newTargetPosition,
a );nttt}nttt//nttt// End of special case #2.nttt//nnttt//nttt// Special
case #3 + mirror.nttt//nttt// `rangeA` has a node which is an ancestor of
`rangeB`. In other words, `rangeB` is inside `rangeA`nttt// but not on the
same tree level. In such case ranges have common part but we have to treat
itnttt// differently, because in such case those ranges are not really
conflicting and should be treated likenttt// two separate ranges. Also we
have to discard two difference parts.ntttconst aCompB = compareArrays(
a.sourcePosition.getParentPath(), b.sourcePosition.getParentPath()
);nntttif ( aCompB == &#39;prefix&#39; || aCompB == &#39;extension&#39; )
{ntttt// Transform `rangeA` by `b` operation and make operation out of it,
and that&#39;s all.ntttt// Note that this is a simplified version of
default case, but here we treat the common part (whole `rangeA`)ntttt//
like a one difference part.nttttrangeA.start =
rangeA.start._getTransformedByMove( b.sourcePosition, b.targetPosition,
b.howMany, !includeB );nttttrangeA.end = rangeA.end._getTransformedByMove(
b.sourcePosition, b.targetPosition, b.howMany, includeB );nnttttreturn
makeMoveOperationsFromRanges( [ rangeA ], newTargetPosition, a
);nttt}nttt//nttt// End of special case #3.nttt//nnttt//nttt// Default case
- ranges are on the same level or are not connected with each
other.nttt//nttt// Modifier for default case.nttt// Modifies `isStrong`
flag in certain conditions.nttt//nttt// If only one of operations is a
remove operation, we force remove operation to be the "stronger&quot;
onenttt// to provide more expected results. This is done only if
`context.forceWeakRemove` is set to `false`.nttt//
`context.forceWeakRemove` is set to `true` in certain conditions when
transformation takes place during undo.ntttif ( !context.forceWeakRemove )
{nttttif ( a instanceof RemoveOperation &amp;&amp; !( b instanceof
RemoveOperation ) ) {ntttttisStrong = true;ntttt} else if ( !( a instanceof
RemoveOperation ) &amp;&amp; b instanceof RemoveOperation ) {ntttttisStrong
= false;ntttt}nttt}nnttt// Handle operation&#39;s source ranges - check how
`rangeA` is affected by `b` operation.nttt// This will aggregate
transformed ranges.ntttconst ranges = [];nnttt// Get the "difference
part&quot; of `a` operation source range.nttt// This is an array with one
or two ranges. Two ranges if `rangeB` is inside `rangeA`.ntttconst
difference = rangeA.getDifference( rangeB );nntttfor ( const range of
difference ) {ntttt// Transform those ranges by `b` operation. For example
if `b` moved range from before those ranges, fix those
ranges.nttttrange.start = range.start._getTransformedByDeletion(
b.sourcePosition, b.howMany );nttttrange.end =
range.end._getTransformedByDeletion( b.sourcePosition, b.howMany );nntttt//
If `b` operation targets into `rangeA` on the same level, spread `rangeA`
into two ranges.nttttconst shouldSpread = compareArrays(
range.start.getParentPath(), b.getMovedRangeStart().getParentPath() ) ==
&#39;same&#39;;nttttconst newRanges = range._getTransformedByInsertion(
b.getMovedRangeStart(), b.howMany, shouldSpread, includeB
);nnttttranges.push( …newRanges );nttt}nnttt// Then, we have to manage the
"common part&quot; of both move ranges.ntttconst common =
rangeA.getIntersection( rangeB );nntttif ( common !== null &amp;&amp;
isStrong &amp;&amp; !bTargetsToA ) {ntttt// Calculate the new position of
that part of original range.nttttcommon.start = common.start._getCombined(
b.sourcePosition, b.getMovedRangeStart() );nttttcommon.end =
common.end._getCombined( b.sourcePosition, b.getMovedRangeStart()
);nntttt// Take care of proper range order.ntttt//ntttt// Put `common` at
appropriate place. Keep in mind that we are interested in original
order.ntttt// Basically there are only three cases: there is zero, one or
two difference ranges.ntttt//ntttt// If there is zero difference ranges,
just push `common` in the array.nttttif ( ranges.length === 0 )
{ntttttranges.push( common );ntttt}ntttt// If there is one difference
range, we need to check whether common part was before it or after
it.nttttelse if ( ranges.length == 1 ) {ntttttif ( rangeB.start.isBefore(
rangeA.start ) || rangeB.start.isEqual( rangeA.start ) )
{nttttttranges.unshift( common );nttttt} else {nttttttranges.push( common
);nttttt}ntttt}ntttt// If there are more ranges (which means two), put
common part between them. This is the only scenariontttt// where there
could be two difference ranges so we don&#39;t have to make any
comparisons.nttttelse {ntttttranges.splice( 1, 0, common
);ntttt}nttt}nntttif ( ranges.length === 0 ) {ntttt// If there are no
"source ranges&quot;, nothing should be changed.ntttt// Note that this can
happen only if `isStrong == false` and `rangeA.isEqual( rangeB
)`.nttttreturn [ new NoOperation( a.baseVersion ) ];nttt}nntttreturn
makeMoveOperationsFromRanges( ranges, newTargetPosition, a
);ntt}nt}n};nnfunction transform( a, b, context = { isStrong: false } )
{ntlet group, algorithm;nntif ( a instanceof InsertOperation ) {nttgroup =
ot.InsertOperation;nt} else if ( a instanceof AttributeOperation )
{nttgroup = ot.AttributeOperation;nt} else if ( a instanceof
RootAttributeOperation ) {nttgroup = ot.RootAttributeOperation;nt} else if
( a instanceof RenameOperation ) {nttgroup = ot.RenameOperation;nt} else if
( a instanceof MarkerOperation ) {nttgroup = ot.MarkerOperation;nt} else if
( a instanceof MoveOperation ) {nttgroup = ot.MoveOperation;nt} else
{nttalgorithm = doNotUpdate;nt}nntif ( group ) {nttif ( b instanceof
InsertOperation ) {ntttalgorithm = group.InsertOperation;ntt} else if ( b
instanceof AttributeOperation ) {ntttalgorithm =
group.AttributeOperation;ntt} else if ( b instanceof RootAttributeOperation
) {ntttalgorithm = group.RootAttributeOperation;ntt} else if ( b instanceof
RenameOperation ) {ntttalgorithm = group.RenameOperation;ntt} else if ( b
instanceof MarkerOperation ) {ntttalgorithm = group.MarkerOperation;ntt}
else if ( b instanceof MoveOperation ) {ntttalgorithm =
group.MoveOperation;ntt} else {ntttalgorithm = doNotUpdate;ntt}nt}nntconst
transformed = algorithm( a, b, context );nntreturn updateBaseVersions(
a.baseVersion, transformed );n}nn// When we don&#39;t want to update an
operation, we create and return a clone of it.n// Returns the operation in
"unified format&quot; - wrapped in an Array.nfunction doNotUpdate(
operation ) {ntreturn [ operation.clone() ];n}nn// Takes an Array of
operations and sets consecutive base versions for them, starting from given
base version.n// Returns the passed array.nfunction updateBaseVersions(
baseVersion, operations ) {ntfor ( let i = 0; i &lt; operations.length; i++
) {nttoperations[ i ].baseVersion = baseVersion + i + 1;nt}nntreturn
operations;n}nn// Checks whether MoveOperation targetPosition is inside a
node from the moved range of the other MoveOperation.nfunction
moveTargetIntoMovedRange( a, b ) {ntreturn
a.targetPosition._getTransformedByDeletion( b.sourcePosition, b.howMany )
=== null;n}nn// Gets an array of Ranges and produces one Range out of it.
The root of a new range will be same asn// the root of the first range in
the array. If any of given ranges has different root than the first
range,n// it will be discarded.nfunction joinRanges( ranges ) {ntif (
ranges.length === 0 ) {nttreturn null;nt} else if ( ranges.length == 1 )
{nttreturn ranges[ 0 ];nt} else {nttranges[ 0 ].end = ranges[ ranges.length
- 1 ].end;nnttreturn ranges[ 0 ];nt}n}nn// Helper function for
`MoveOperation` x `MoveOperation` transformation.n// Convert given ranges
and target position to move operations and return them.n// Ranges and
target position will be transformed on-the-fly when generating
operations.n// Given `ranges` should be in the order of how they were in
the original transformed operation.n// Given `targetPosition` is the target
position of the first range from `ranges`.nfunction
makeMoveOperationsFromRanges( ranges, targetPosition, a ) {nt// At this
moment we have some ranges and a target position, to which those ranges
should be moved.nt// Order in `ranges` array is the go-to order of after
transformation.nt//nt// We are almost done. We have `ranges` and
`targetPosition` to make operations from.nt// Unfortunately, those
operations may affect each other. Precisely, first operation after movent//
may affect source range and target position of second and third operation.
Same with secondnt// operation affecting third.nt//nt// We need to fix
those source ranges and target positions once again, before converting
`ranges` to operations.ntconst operations = [];nnt// Keep in mind that
nothing will be transformed if there is just one range in `ranges`.ntfor (
let i = 0; i &lt; ranges.length; i++ ) {ntt// Create new operation out of a
range and target position.nttconst op = makeMoveOperation( ranges[ i ],
targetPosition, a.isSticky );nnttoperations.push( op );nntt// Transform
other ranges by the generated operation.nttfor ( let j = i + 1; j &lt;
ranges.length; j++ ) {nttt// All ranges in `ranges` array should be:nttt//
* non-intersecting (these are part of original operation source range),
andnttt// * `targetPosition` does not target into them (opposite would mean
that transformed operation targets "inside itself&quot;).nttt//nttt// This
means that the transformation will be "clean&quot; and always return one
result.ntttranges[ j ] = ranges[ j ]._getTransformedByMove(
op.sourcePosition, op.targetPosition, op.howMany )[ 0
];ntt}nntttargetPosition = targetPosition._getTransformedByMove(
op.sourcePosition, op.targetPosition, op.howMany, true, false
);nt}nntreturn operations;n}nnfunction makeMoveOperation( range,
targetPosition, isSticky ) {nt// We want to keep correct operation
class.ntlet OperationClass;nntif ( targetPosition.root.rootName ==
&#39;$graveyard&#39; ) {nttOperationClass = RemoveOperation;nt} else if (
range.start.root.rootName == &#39;$graveyard&#39; ) {nttOperationClass =
ReinsertOperation;nt} else {nttOperationClass = MoveOperation;nt}nntconst
result = new OperationClass(nttrange.start,nttrange.end.offset -
range.start.offset,ntttargetPosition,ntt0 // Is corrected anyway
later.nt);nntresult.isSticky = isSticky;nntreturn
result;n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/operation/transform.jsn// module id = nulln//
module chunks = “,”/**n * The base implementation of `_.slice` without an
iteratee call guard.n *n * @privaten * @param {Array} array The array to
slice.n * @param {number} [start=0] The start position.n * @param {number}
[end=array.length] The end position.n * @returns {Array} Returns the slice
of `array`.n */nfunction baseSlice(array, start, end) {n  var index = -1,n 
length = array.length;nn  if (start &lt; 0) {n    start = -start &gt;
length ? 0 : (length + start);n  }n  end = end &gt; length ? length : end;n
if (end &lt; 0) {n    end += length;n  }n  length = start &gt; end ? 0 :
((end - start) &gt;&gt;&gt; 0);n  start &gt;&gt;&gt;= 0;nn  var result =
Array(length);n  while (++index &lt; length) {n    <a
href="index">result</a> = array[index + start];n  }n  return
result;n}nnexport default baseSlice;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/_baseSlice.jsn// module id =
nulln// module chunks = “,”import arrayPush from
&#39;./_arrayPush&#39;;nimport isFlattenable from
&#39;./_isFlattenable&#39;;nn/**n * The base implementation of `_.flatten`
with support for restricting flattening.n *n * @privaten * @param {Array}
array The array to flatten.n * @param {number} depth The maximum recursion
depth.n * @param {boolean} [predicate=isFlattenable] The function invoked
per iteration.n * @param {boolean} [isStrict] Restrict to values that pass
`predicate` checks.n * @param {Array} [<a href="]">result=</a> The initial
result value.n * @returns {Array} Returns the new flattened array.n
*/nfunction baseFlatten(array, depth, predicate, isStrict, result) {n  var
index = -1,n      length = array.length;nn  predicate || (predicate =
isFlattenable);n  result || (result = []);nn  while (++index &lt; length)
{n    var value = <a href="index">array</a>;n    if (depth &gt; 0
&amp;&amp; predicate(value)) {n      if (depth &gt; 1) {n        //
Recursively flatten arrays (susceptible to call stack limits).n       
baseFlatten(value, depth - 1, predicate, isStrict, result);n      } else {n
arrayPush(result, value);n      }n    } else if (!isStrict) {n      <a
href="result.length">result</a> = value;n    }n  }n  return
result;n}nnexport default baseFlatten;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/_baseFlatten.jsn// module id =
nulln// module chunks = “,”import Stack from &#39;./_Stack&#39;;nimport
baseIsEqual from &#39;./_baseIsEqual&#39;;nn/** Used to compose bitmasks
for comparison styles. */nvar UNORDERED_COMPARE_FLAG = 1,n   
PARTIAL_COMPARE_FLAG = 2;nn/**n * The base implementation of `_.isMatch`
without support for iteratee shorthands.n *n * @privaten * @param {Object}
object The object to inspect.n * @param {Object} source The object of
property values to match.n * @param {Array} matchData The property names,
values, and compare flags to match.n * @param {Function} [customizer] The
function to customize comparisons.n * @returns {boolean} Returns `true` if
`object` is a match, else `false`.n */nfunction baseIsMatch(object, source,
matchData, customizer) {n  var index = matchData.length,n      length =
index,n      noCustomizer = !customizer;nn  if (object == null) {n   
return !length;n  }n  object = Object(object);n  while (index–) {n    var
data = <a href="index">matchData</a>;n    if ((noCustomizer &amp;&amp; <a
href="2">data</a>)n          ? <a href="1">data</a> !== <a
href="0">object[data</a>]n          : !(<a href="0">data</a> in object)n   
) {n      return false;n    }n  }n  while (++index &lt; length) {n    data
= <a href="index">matchData</a>;n    var key = <a href="0">data</a>,n      
objValue = <a href="key">object</a>,n        srcValue = <a
href="1">data</a>;nn    if (noCustomizer &amp;&amp; <a href="2">data</a>)
{n      if (objValue === undefined &amp;&amp; !(key in object)) {n       
return false;n      }n    } else {n      var stack = new Stack;n      if
(customizer) {n        var result = customizer(objValue, srcValue, key,
object, source, stack);n      }n      if (!(result === undefinedn          
? baseIsEqual(srcValue, objValue, customizer, UNORDERED_COMPARE_FLAG |
PARTIAL_COMPARE_FLAG, stack)n            : resultn          )) {n       
return false;n      }n    }n  }n  return true;n}nnexport default
baseIsMatch;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_baseIsMatch.jsn// module id = nulln//
module chunks = “,”import isObject from &#39;./isObject&#39;;nn/**n *
Checks if `value` is suitable for strict equality comparisons, i.e. `===`.n
*n * @privaten * @param {*} value The value to check.n * @returns {boolean}
Returns `true` if `value` if suitable for strictn *  equality comparisons,
else `false`.n */nfunction isStrictComparable(value) {n  return value ===
value &amp;&amp; !isObject(value);n}nnexport default
isStrictComparable;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_isStrictComparable.jsn// module id =
nulln// module chunks = “,”import MapCache from &#39;./_MapCache&#39;;nn/**
Used as the `TypeError` message for "Functions&quot; methods. */nvar
FUNC_ERROR_TEXT = &#39;Expected a function&#39;;nn/**n * Creates a function
that memoizes the result of `func`. If `resolver` isn * provided, it
determines the cache key for storing the result based on then * arguments
provided to the memoized function. By default, the first argumentn *
provided to the memoized function is used as the map cache key. The `func`n
* is invoked with the `this` binding of the memoized function.n *n *
*Note:* The cache is exposed as the `cache` property on the memoizedn *
function. Its creation may be customized by replacing the
`_.memoize.Cache`n * constructor with one whose instances implement then *
[`Map`](<a
href="http://ecma-international.org/ecma-262/6.0/#sec-properties-of-the-map-prototype-object)\n">ecma-international.org/ecma-262/6.0/#sec-properties-of-the-map-prototype-object)n</a>
* method interface of `delete`, `get`, `has`, and `set`.n *n * @staticn *
@memberOf _n * @since 0.1.0n * @category Functionn * @param {Function} func
The function to have its output memoized.n * @param {Function} [resolver]
The function to resolve the cache key.n * @returns {Function} Returns the
new memoized function.n * @examplen *n * var object = { &#39;a&#39;: 1,
&#39;b&#39;: 2 };n * var other = { &#39;c&#39;: 3, &#39;d&#39;: 4 };n *n *
var values = <em>.memoize(</em>.values);n * values(object);n * // =&gt; [1,
2]n *n * values(other);n * // =&gt; [3, 4]n *n * object.a = 2;n *
values(object);n * // =&gt; [1, 2]n *n * // Modify the result cache.n *
values.cache.set(object, [&#39;a&#39;, &#39;b&#39;]);n * values(object);n *
// =&gt; [&#39;a&#39;, &#39;b&#39;]n *n * // Replace `_.memoize.Cache`.n *
_.memoize.Cache = WeakMap;n */nfunction memoize(func, resolver) {n  if
(typeof func != &#39;function&#39; || (resolver &amp;&amp; typeof resolver
!= &#39;function&#39;)) {n    throw new TypeError(FUNC_ERROR_TEXT);n  }n 
var memoized = function() {n    var args = arguments,n        key =
resolver ? resolver.apply(this, args) : <a href="0">args</a>,n        cache
= memoized.cache;nn    if (cache.has(key)) {n      return cache.get(key);n 
}n    var result = func.apply(this, args);n    memoized.cache =
cache.set(key, result);n    return result;n  };n  memoized.cache = new
(memoize.Cache || MapCache);n  return memoized;n}nn// Assign cache to
`_.memoize`.nmemoize.Cache = MapCache;nnexport default
memoize;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/memoize.jsn// module id = nulln// module
chunks = “,”import isArray from &#39;./isArray&#39;;nimport isSymbol from
&#39;./isSymbol&#39;;nn/** Used to match property names within property
paths. */nvar reIsDeepProp = /\.|\[(?:[^[\]]*|([&quot;&#39;])(?:(?!\<a
href="^\\\\">1)</a>|\\.)*?\1)\]/,n    reIsPlainProp = /^\w*$/;nn/**n *
Checks if `value` is a property name and not a property path.n *n *
@privaten * @param {*} value The value to check.n * @param {Object}
[object] The object to query keys on.n * @returns {boolean} Returns `true`
if `value` is a property name, else `false`.n */nfunction isKey(value,
object) {n  if (isArray(value)) {n    return false;n  }n  var type = typeof
value;n  if (type == &#39;number&#39; || type == &#39;symbol&#39; || type
== &#39;boolean&#39; ||n      value == null || isSymbol(value)) {n   
return true;n  }n  return reIsPlainProp.test(value) ||
!reIsDeepProp.test(value) ||n    (object != null &amp;&amp; value in
Object(object));n}nnexport default isKey;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/_isKey.jsn// module id =
nulln// module chunks = “,”/**n * The base implementation of `_.hasIn`
without support for deep paths.n *n * @privaten * @param {Object} object
The object to query.n * @param {Array|string} key The key to check.n *
@returns {boolean} Returns `true` if `key` exists, else `false`.n
*/nfunction baseHasIn(object, key) {n  return key in
Object(object);n}nnexport default baseHasIn;nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-utils/src/lib/lodash/_baseHasIn.jsn// module
id = nulln// module chunks = “,”import castPath from
&#39;./_castPath&#39;;nimport isArguments from
&#39;./isArguments&#39;;nimport isArray from &#39;./isArray&#39;;nimport
isIndex from &#39;./_isIndex&#39;;nimport isKey from
&#39;./_isKey&#39;;nimport isLength from &#39;./isLength&#39;;nimport
isString from &#39;./isString&#39;;nimport toKey from
&#39;./_toKey&#39;;nn/**n * Checks if `path` exists on `object`.n *n *
@privaten * @param {Object} object The object to query.n * @param
{Array|string} path The path to check.n * @param {Function} hasFunc The
function to check properties.n * @returns {boolean} Returns `true` if
`path` exists, else `false`.n */nfunction hasPath(object, path, hasFunc) {n
path = isKey(path, object) ? [path] : castPath(path);nn  var result,n     
index = -1,n      length = path.length;nn  while (++index &lt; length) {n  
var key = <a href="index">toKey(path</a>);n    if (!(result = object !=
null &amp;&amp; hasFunc(object, key))) {n      break;n    }n    object = <a
href="key">object</a>;n  }n  if (result) {n    return result;n  }n  var
length = object ? object.length : 0;n  return !!length &amp;&amp;
isLength(length) &amp;&amp; isIndex(key, length) &amp;&amp;n   
(isArray(object) || isString(object) || isArguments(object));n}nnexport
default hasPath;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_hasPath.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@protectedn * @module engine/model/delta/transformn */nnimport Delta from
&#39;./delta&#39;;nimport MoveDelta from &#39;./movedelta&#39;;nimport
RemoveDelta from &#39;./removedelta&#39;;nimport MergeDelta from
&#39;./mergedelta&#39;;nimport SplitDelta from
&#39;./splitdelta&#39;;nimport WrapDelta from &#39;./wrapdelta&#39;;nimport
UnwrapDelta from &#39;./unwrapdelta&#39;;nimport RenameDelta from
&#39;./renamedelta&#39;;nimport AttributeDelta from
&#39;./attributedelta&#39;;nimport operationTransform from
&#39;../operation/transform&#39;;nimport NoOperation from
&#39;../operation/nooperation&#39;;nimport MoveOperation from
&#39;../operation/moveoperation&#39;;nimport RemoveOperation from
&#39;../operation/removeoperation&#39;;nimport arrayUtils from
&#39;@ckeditor/ckeditor5-utils/src/lib/lodash/array&#39;;nimport
compareArrays from
&#39;@ckeditor/ckeditor5-utils/src/comparearrays&#39;;nnconst specialCases
= new Map();nn/**n * @namespacen */nconst transform = {nt/**nt * Transforms
given {@link module:engine/model/delta/delta~Delta delta} by another {@link
module:engine/model/delta/delta~Delta delta}nt * and returns the result of
that transformation as an array containing one or more {@link
module:engine/model/delta/delta~Delta delta}nt * instances.nt *nt * Delta
transformations heavily base on {@link
module:engine/model/operation/transform~transform operational
transformations}. Sincent * delta is a list of operations most situations
can be handled thanks to operational transformation. Unfortunately,nt *
deltas are more complicated than operations and have they semantic meaning,
as they represent user&#39;s editing intentions.nt *nt * Sometimes, simple
operational transformation on deltas&#39; operations might result in some
unexpected results. Thosent * results would be fine from OT point of view,
but would not reflect user&#39;s intentions. Because of such conflictsnt *
we need to handle transformations in special cases in a custom way.nt *nt *
The function itself looks whether two given delta types have a special case
function registered. If so, the deltas arent * transformed using that
function. If not,nt * {@link
module:engine/model/delta/transform~transform.defaultTransform default
transformation algorithm} is used.nt *nt * @param
{module:engine/model/delta/delta~Delta} a Delta that will be transformed.nt
* @param {module:engine/model/delta/delta~Delta} b Delta to transform by.nt
* @param {module:engine/model/delta/transform~transformationContext}
context Transformation context object.nt * @returns
{Array.&lt;module:engine/model/delta/delta~Delta&gt;} Result of the
transformation.nt */nttransform( a, b, context ) {nttconst
transformAlgorithm = transform.getTransformationCase( a, b ) ||
transform.defaultTransform;nntt// Make new instance of context object, so
all changes done during transformation are not saved in original
object.nttconst transformed = transformAlgorithm( a, b, Object.assign( {},
context ) );nttconst baseVersion = arrayUtils.last( b.operations
).baseVersion;nnttreturn updateBaseVersion( baseVersion, transformed
);nt},nnt/**nt * The default delta transformation function. It is used for
those deltas that are not in special case conflict.nt *nt * This algorithm
is similar to a popular `dOPT` algorithm used in operational
transformation, as we are in factnt * transforming two sets of operations
by each other.nt *nt * @param {module:engine/model/delta/delta~Delta} a
Delta that will be transformed.nt * @param
{module:engine/model/delta/delta~Delta} b Delta to transform by.nt * @param
{module:engine/model/delta/transform~transformationContext} context
Transformation context object.nt * @returns
{Array.&lt;module:engine/model/delta/delta~Delta&gt;} Result of the
transformation.nt */ntdefaultTransform( a, b, context ) {ntt// This will
hold operations from delta `a` that will be transformed by operations from
delta `b`.ntt// Eventually, those operations will be used to create result
delta(s).nttconst transformed = [];nntt// Array containing operations that
we will transform by. At the beginning these are just operations fromnttlet
byOps = b.operations;nntt// This array is storing operations from `byOps`
which got transformed by operation from delta `a`.nttlet newByOps =
[];nntt// We take each operation from original set of operations to
transform.nttfor ( const opA of a.operations ) {nttt// We wrap the
operation in the array. This is important, because operation transformation
algorithm returnsnttt// an array of operations so we need to make sure that
our algorithm is ready to handle arrays.ntttconst ops = [ opA ];nnttt// Now
the real algorithm takes place.ntttfor ( const opB of byOps ) {ntttt// For
each operation that we need transform by…nttttfor ( let i = 0; i &lt;
ops.length; i++ ) {nttttt// We take each operation to transform…ntttttconst
op = ops[ i ];nnttttt// And transform both of them by themselves.nnttttt//
The result of transforming operation from delta B by operation from delta A
is saved innttttt// `newByOps` array. We will use that array for
transformations in next loops. We need delta Bnttttt// operations after
transformed by delta A operations to get correct results of
transformationsnttttt// of next operations from delta A.nttttt//nttttt//
It&#39;s like this because 2nd operation from delta A assumes that 1st
operation from delta Anttttt// is "already applied&quot;. When we transform
2nd operation from delta A by operations from delta Bnttttt// we have to be
sure that operations from delta B are in a state that acknowledges 1st
operationnttttt// from delta A.nttttt//nttttt// This can be easier
understood when operations sets to transform are represented by diamond
diagrams:nttttt// <a
href="http://www.codecommit.com/blog/java/understanding-and-applying-operational-transformation\n\n\t\t\t\t\t">www.codecommit.com/blog/java/understanding-and-applying-operational-transformationnnttttt</a>//
Transform operation from delta A by operation from delta B.ntttttconst
results = operationTransform( op, opB, context );nnttttt// We replace
currently processed operation from `ops` array by the results of
transformation.nttttt// Note, that we process single operation but
`operationTransform` result is an array, so wenttttt// might have to
splice-in more than one operation. Save them in `ops` array and move `i`
pointer by a proper offset.ntttttArray.prototype.splice.apply( ops, [ i, 1
].concat( results ) );nnttttti += results.length - 1;nnttttt// Then,
transform operation from delta B by operation from delta A.nttttt// Since
this is a "mirror&quot; transformation, first, we "mirror&quot; some of
context values.ntttttconst reverseContext = Object.assign( {}, context
);ntttttreverseContext.isStrong =
!context.isStrong;ntttttreverseContext.insertBefore = context.insertBefore
!== undefined ? !context.insertBefore : undefined;nnttttt// Transform
operations.ntttttconst updatedOpB = operationTransform( opB, op,
reverseContext );nnttttt// Update `newByOps` by transformed, updated
`opB`.nttttt// Using push.apply because `operationTransform` returns an
array with one or multiple results.ntttttArray.prototype.push.apply(
newByOps, updatedOpB );ntttt}nntttt// At this point a single operation from
delta A got transformed by a single operation from delta B.ntttt// The
transformation result is in `ops` array and it may be one or more
operations. This was just the first step.ntttt// Operation from delta A has
to be further transformed by the other operations from delta B.ntttt// So
in next iterator loop we will take another operation from delta B and use
transformed delta A (`ops`)ntttt// to transform it further.nttt}nnttt// We
got through all delta B operations and have a final transformed state of an
operation from delta A.nnttt// As previously mentioned, we substitute
operations from delta B by their transformed equivalents.ntttbyOps =
newByOps;ntttnewByOps = [];nnttt// We add transformed operation from delta
A to newly created delta.nttt// Remember that transformed operation from
delta A may consist of multiple operations.ntttfor ( const op of ops )
{ntttttransformed.push( op );nttt}nnttt// In next loop, we will take
another operation from delta A and transform it through (transformed)
operationsnttt// from delta B…ntt}nnttreturn getNormalizedDeltas(
a.constructor, transformed );nt},nnt/**nt * Adds a special case callback
for given delta classes.nt *nt * @param {Function} A Delta constructor
which instance will get transformed.nt * @param {Function} B Delta
constructor which instance will be transformed by.nt * @param {Function}
resolver A callback that will handle custom special case transformation for
instances of given delta classes.nt */ntaddTransformationCase( A, B,
resolver ) {nttlet casesA = specialCases.get( A );nnttif ( !casesA )
{ntttcasesA = new Map();ntttspecialCases.set( A, casesA
);ntt}nnttcasesA.set( B, resolver );nt},nnt/**nt * Gets a special case
callback which was previously {@link
module:engine/model/delta/transform~transform.addTransformationCase
added}.nt *nt * @param {module:engine/model/delta/delta~Delta} a Delta to
transform.nt * @param {module:engine/model/delta/delta~Delta} b Delta to be
transformed by.nt */ntgetTransformationCase( a, b ) {nttlet casesA =
specialCases.get( a.constructor );nntt// If there are no special cases
registered for class which `a` is instance of, we willntt// check if there
are special cases registered for any parent class.nttif ( !casesA ||
!casesA.get( b.constructor ) ) {ntttconst cases =
specialCases.keys();nntttfor ( const caseClass of cases ) {nttttif ( a
instanceof caseClass &amp;&amp; specialCases.get( caseClass ).get(
b.constructor ) ) {ntttttcasesA = specialCases.get( caseClass
);nntttttbreak;ntttt}nttt}ntt}nnttif ( casesA ) {ntttreturn casesA.get(
b.constructor );ntt}nnttreturn undefined;nt},nnt/**nt * Transforms two sets
of deltas by themselves. Returns both transformed sets.nt *nt * @param
{Array.&lt;module:engine/model/delta/delta~Delta&gt;} deltasA Array with
the first set of deltas to transform. Thesent * deltas are considered more
important (than `deltasB`) when resolving conflicts.nt * @param
{Array.&lt;module:engine/model/delta/delta~Delta&gt;} deltasB Array with
the second set of deltas to transform. Thesent * deltas are considered less
important (than `deltasA`) when resolving conflicts.nt * @param
{module:engine/model/document~Document} [document=null] If set, deltas will
be transformed in "undo mode&quot;nt * and given `document` will be used to
determine relations between deltas. If not set (default), deltas will bent
* transforming without additional context information.nt * @returns
{Object}nt * @returns {Array.&lt;module:engine/model/delta/delta~Delta&gt;}
return.deltasA The first set of deltas transformednt * by the second set of
deltas.nt * @returns {Array.&lt;module:engine/model/delta/delta~Delta&gt;}
return.deltasB The second set of deltas transformednt * by the first set of
deltas.nt */nttransformDeltaSets( deltasA, deltasB, document = null )
{nttconst transformedDeltasA = Array.from( deltasA );nttconst
transformedDeltasB = Array.from( deltasB );nnttconst useAdditionalContext =
document !== null;nnttconst contextAB = {ntttisStrong: truentt};nnttif (
useAdditionalContext ) {ntttcontextAB.wasAffected = new
Map();ntttcontextAB.originalDelta = new Map();ntttcontextAB.document =
document;ntttcontextAB.undoMode = true;nntttfor ( const delta of
transformedDeltasB ) {nttttcontextAB.originalDelta.set( delta, delta
);nttt}ntt}nnttfor ( let i = 0; i &lt; transformedDeltasA.length; i++ )
{ntttconst deltaA = [ transformedDeltasA[ i ] ];nntttfor ( let j = 0; j
&lt; transformedDeltasB.length; j++ ) {nttttconst deltaB = [
transformedDeltasB[ j ] ];nnttttfor ( let k = 0; k &lt; deltaA.length; k++
) {ntttttfor ( let l = 0; l &lt; deltaB.length; l++ ) {nttttttif (
useAdditionalContext ) {nttttttt_setContext( deltaA[ k ], deltaB[ l ],
contextAB );ntttttt}nnttttttconst resultAB = transform.transform( deltaA[ k
], deltaB[ l ], {ntttttttinsertBefore:
contextAB.insertBefore,ntttttttforceNotSticky:
contextAB.forceNotSticky,ntttttttisStrong:
contextAB.isStrong,ntttttttforceWeakRemove:
contextAB.forceWeakRemove,ntttttttundoMode: contextAB.undoModentttttt}
);nnttttttconst resultBA = transform.transform( deltaB[ l ], deltaA[ k ],
{ntttttttinsertBefore: !contextAB.insertBefore,ntttttttforceNotSticky:
contextAB.forceNotSticky,ntttttttisStrong:
!contextAB.isStrong,ntttttttforceWeakRemove:
contextAB.forceWeakRemove,ntttttttundoMode: contextAB.undoModentttttt}
);nnttttttif ( useAdditionalContext ) {nttttttt_updateContext( deltaA[ k ],
resultAB, contextAB );nntttttttconst originalDelta =
contextAB.originalDelta.get( deltaB[ l ] );nntttttttfor ( const deltaBA of
resultBA ) {nttttttttcontextAB.originalDelta.set( deltaBA, originalDelta
);nttttttt}ntttttt}nnttttttdeltaA.splice( k, 1, …resultAB );nttttttk +=
resultAB.length - 1;nnttttttdeltaB.splice( l, 1, …resultBA );nttttttl +=
resultBA.length - 1;nttttt}ntttt}nntttttransformedDeltasB.splice( j, 1,
…deltaB );nttttj += deltaB.length - 1;nttt}nnttttransformedDeltasA.splice(
i, 1, …deltaA );nttti += deltaA.length - 1;ntt}nnttconst opsDiffA =
getOpsCount( transformedDeltasA ) - getOpsCount( deltasA );nttconst
opsDiffB = getOpsCount( transformedDeltasB ) - getOpsCount( deltasB
);nnttif ( opsDiffB &lt; opsDiffA ) {ntttpadWithNoOps( transformedDeltasB,
opsDiffA - opsDiffB );ntt} else if ( opsDiffA &lt; opsDiffB )
{ntttpadWithNoOps( transformedDeltasA, opsDiffB - opsDiffA );ntt}nnttreturn
{ deltasA: transformedDeltasA, deltasB: transformedDeltasB };nt}n};nnexport
default transform;nn// Updates base versions of operations inside deltas
(which are the results of delta transformation).nfunction
updateBaseVersion( baseVersion, deltas ) {ntfor ( const delta of deltas )
{nttfor ( const op of delta.operations ) {ntttop.baseVersion =
++baseVersion;ntt}nt}nntreturn deltas;n}nn// Returns number of operations
in given array of deltas.nfunction getOpsCount( deltas ) {ntreturn
deltas.reduce( ( current, delta ) =&gt; {nttreturn current +
delta.operations.length;nt}, 0 );n}nn// Adds a delta containing `howMany`
`NoOperation` instances to given array with deltas.n// Used to
"synchronize&quot; the number of operations in two delta sets.nfunction
padWithNoOps( deltas, howMany ) {ntconst lastDelta = deltas[ deltas.length
- 1 ];ntlet baseVersion = lastDelta.operations.length +
lastDelta.baseVersion;nntconst noDelta = new Delta();nntfor ( let i = 0; i
&lt; howMany; i++ ) {nttnoDelta.addOperation( new NoOperation(
baseVersion++ ) );nt}nntdeltas.push( noDelta );n}nn// Sets context data
before delta `a` by delta `b` transformation.n// Using data given in
`context` object, sets `context.insertBefore` and `context.forceNotSticky`
flags.n// Also updates `context.wasAffected`.nfunction _setContext( a, b,
context ) {nt_setWasAffected( a, b, context );nt_setInsertBeforeContext( a,
b, context );nt_setForceWeakRemove( b, context );nt_setForceNotSticky( b,
context );n}nn// Sets `context.insertBefore` basing on `context.document`
history for `a` by `b` transformation.n//n// Simply saying, if `b` is
"undoing delta&quot; it means that `a` might already be transformed by the
deltan// which was undone by `b` (let&#39;s call it `oldB`). If this is
true, `a` by `b` transformation has to considern// how `a` was transformed
by `oldB` to get an expected result.n//n// This is used to resolve conflict
when two operations want to insert nodes at the same position. If the
operationsn// are not related, it doesn&#39;t matter in what order
operations insert those nodes. However if the operations aren// related
(for example, in undo) we need to keep the same order.n//n// For example,
assume that editor has two letters: &#39;ab&#39;. Then, both letters are
removed, creating two operations:n// (op. 1) REM [ 1 ] - [ 2 ] =&gt;
(graveyard) [ 0 ]n// (op. 2) REM [ 0 ] - [ 1 ] =&gt; (graveyard) [ 1 ]n//
Then, we undo operation 2:n// REM [ 0 ] - [ 1 ] =&gt; (graveyard) [ 1 ] is
reversed to REI (graveyard) [ 1 ] =&gt; [ 0 ] - [ 1 ] and is applied.n// <a
href="../../../../History.html">History</a> stack is:n// (op. 1) REM [ 1 ]
- [ 2 ] =&gt; (graveyard) [ 0 ]n// (op. 2) REM [ 0 ] - [ 1 ] =&gt;
(graveyard) [ 1 ]n// (op. 3) REI (graveyard) [ 1 ] =&gt; [ 0 ] - [ 1 ]n//
Then, we undo operation 1:n// REM [ 1 ] - [ 2 ] =&gt; (graveyard) [ 0 ] is
reversed to REI (graveyard) [ 0 ] =&gt; [ 1 ] - [ 2 ] then,n// is
transformed by (op. 2) REM [ 0 ] - [ 1 ] =&gt; (graveyard) [ 1 ] and
becomes REI (graveyard) [ 0 ] =&gt; [ 0 ] - [ 1 ] then,n// is transformed
by (op. 3) REI (graveyard) [ 1 ] =&gt; [ 0 ] - [ 1 ] and we have a conflict
because both operationsn// insert at the same position, but thanks to
keeping the context, we know that in this case, the transformed operation
shouldn// insert the node after operation 3.n//n// Keep in mind, that
`context.insertBefore` may be either `Boolean` or `undefined`. If it is
`Boolean` then the order isn// known (deltas are related and `a` should
insert nodes before or after `b`). However, if deltas were not related,n//
`context.isBefore` is `undefined` and other factors will be taken into
consideration when resolving the ordern// (this, however, happens in
operational transformation algorithms).n//n// This affects both
`MoveOperation` (and its derivatives) and `InsertOperation`.nfunction
_setInsertBeforeContext( a, b, context ) {nt// If `b` is a delta that
undoes other delta…ntconst originalDelta = context.originalDelta.get( b
);nntif ( context.document.history.isUndoingDelta( originalDelta ) ) {ntt//
Get the undone delta…nttconst undoneDelta =
context.document.history.getUndoneDelta( originalDelta );ntt// Get a map
with deltas related to `a` delta…nttconst aWasAffectedBy =
context.wasAffected.get( a );ntt// And check if the undone delta is related
with delta `a`.nttconst affected = aWasAffectedBy.get( undoneDelta );nnttif
( affected !== undefined ) {nttt// If deltas are related, set
`context.insertBefore` basing on whether `a` was affected by the undone
delta.ntttcontext.insertBefore = affected;ntt}nt}n}nn// Sets
`context.forceNotSticky` basing on `context.document` history for
transformation by `b` delta.n//n// `MoveOperation` may be "sticky&quot;
which means, that anything that was inserted at the boundary of moved
range, shouldn// also be moved. This is particularly helpful for actions
like splitting or merging a node. However, this behaviorn// sometimes leads
to an error, for example in undo.n//n// Simply saying, if delta is going to
be transformed by delta `b`, stickiness should not be taken into
considerationn// if delta `b` was already undone or if delta `b` is an
undoing delta.n//n// This affects `MoveOperation` (and its
derivatives).nfunction _setForceNotSticky( b, context ) {ntconst
originalDelta = context.originalDelta.get( b );ntconst history =
context.document.history;nntcontext.forceNotSticky = history.isUndoneDelta(
originalDelta ) || history.isUndoingDelta( originalDelta );n}nn// Sets
`context.forceWeakRemove` basing on `context.document` history for
transformation by `b` delta.n//n// When additional context is not used,
default `MoveOperation` x `RemoveOperation` transformationn// always treats
`RemoveOperation` as a stronger one, no matter how `context.isStrong` is
set. It is like thisn// to provide better results when transformations
happen.n//n// This, however, works fine only when additional context is not
used.n//n// When additional context is used, we need a better way to decide
whether `RemoveOperation` is "dominating&quot; (or in othern// words,
whether nodes removed by given operation should stay in graveyard if other
operation wants to move them).n//n// The answer to this is easy: if
`RemoveOperation` has been already undone, we are not forcing given nodes
to stayn// in graveyard. In such scenario, we set `context.forceWeakRemove`
to `true`. However, if the `RemoveOperation` hasn// not been undone, we set
`context.forceWeakRemove` to `false` because we want the operation to be
"dominating&quot;.nfunction _setForceWeakRemove( b, context ) {ntconst
history = context.document.history;ntconst originalB =
context.originalDelta.get( b );nnt// If `b` delta has not been undone yet,
forceWeakRemove should be `false`.nt// It should be `true`, in any other
case, if additional context is used.ntcontext.forceWeakRemove =
history.isUndoneDelta( originalB );n}nn// Sets `context.wasAffected` which
holds context information about how transformed deltas are related.
`context.wasAffected`n// is used by `_setInsertBeforeContext` helper
function.nfunction _setWasAffected( a, b, context ) {ntif (
!context.wasAffected.get( a ) ) {ntt// Create a new map with relations for
`a` delta.nttcontext.wasAffected.set( a, new Map() );nt}nntconst
originalDelta = context.originalDelta.get( b );ntlet wasAffected =
!!context.wasAffected.get( a ).get( originalDelta );nnt// Cross-check all
operations from both deltas…ntfor ( const opA of a.operations ) {nttfor (
const opB of b.operations ) {ntttif ( opA instanceof MoveOperation
&amp;&amp; opB instanceof MoveOperation ) {nttttif ( _isOperationAffected(
opA, opB ) ) {nttttt// If any of them are move operations that affect each
other, set the relation accordingly.ntttttwasAffected =
true;nntttttbreak;ntttt}nttt}ntt}nntt// Break both loops if affecting pair
has been found.nttif ( wasAffected )
{ntttbreak;ntt}nt}nntcontext.wasAffected.get( a ).set( originalDelta,
wasAffected );n}nn// Checks whether `opA` is affected by `opB`. It is
assumed that both operations are `MoveOperation`.n// Operation is affected
only if the other operation&#39;s source range is before that
operation&#39;s source range.nfunction _isOperationAffected( opA, opB )
{ntconst target = opA.targetPosition;ntconst source =
opB.sourcePosition;nntconst cmpResult = compareArrays(
source.getParentPath(), target.getParentPath() );nntif ( target.root !=
source.root ) {nttreturn false;nt}nntreturn cmpResult == &#39;same&#39;
&amp;&amp; source.offset &lt; target.offset;n}nn// Updates `context` object
after delta by delta transformation is done.n//n// This means two
things:n// 1. Some information are removed from context (those that apply
only to the transformation that just happened).n// 2. `context.wasAffected`
is updated because `oldDelta` has been transformed to one or many
`newDeltas` and wen// need to update entries in `context.wasAffected`.
Basically, anything that was in `context.wasAffected` undern// `oldDelta`
key should be rewritten to `newDeltas`. This way in next transformation
steps, `newDeltas` "remember&quot;n// the context of `oldDelta`.nfunction
_updateContext( oldDelta, newDeltas, context ) {ntdelete
context.insertBefore;ntdelete context.forceNotSticky;ntdelete
context.forceWeakRemove;nntconst wasAffected = context.wasAffected.get(
oldDelta );nntcontext.wasAffected.delete( oldDelta );nntfor ( const delta
of newDeltas ) {nttcontext.wasAffected.set( delta, new Map( wasAffected )
);nt}n}nn// Takes base delta class (`DeltaClass`) and a set of `operations`
that are transformation results and createsn// one or more deltas,
acknowledging that the result is a transformation of a delta that is of
`DeltaClass`.n//n// The normalization ensures that each delta has it&#39;s
"normal&quot; state, that is, for example, `MoveDelta` hasn// just one
`MoveOperation`, `SplitDelta` has just two operations of which first is
`InsertOperation` and secondn// is `MoveOperation` or `NoOperation`,
etc.nfunction getNormalizedDeltas( DeltaClass, operations ) {ntlet deltas =
[];ntlet delta = null;ntlet attributeOperationIndex;nntswitch ( DeltaClass
) {nttcase MoveDelta:nttcase RemoveDelta:nttt// Normal MoveDelta has just
one MoveOperation.nttt// Take all operations and create MoveDelta for each
of them.ntttfor ( const o of operations ) {nttttif ( o instanceof
NoOperation ) {nttttt// An operation may be instance of NoOperation and
this may be correct.nttttt// If that&#39;s the case, do not create a
MoveDelta with singular NoOperation.nttttt// Create "no delta&quot;
instead, that is Delta instance with NoOperation.ntttttdelta = new
Delta();ntttt} else {ntttttif ( o instanceof RemoveOperation )
{nttttttdelta = new RemoveDelta();nttttt} else {nttttttdelta = new
MoveDelta();nttttt}ntttt}nnttttdelta.addOperation( o );nttttdeltas.push(
delta );nttt}nnttt// Return all created MoveDeltas.ntttreturn
deltas;nttcase SplitDelta:nttcase WrapDelta:nttt// Normal SplitDelta and
WrapDelta have two operations: first is InsertOperation and second is
MoveOperation.nttt// The MoveOperation may be split into multiple
MoveOperations.nttt// If that&#39;s the case, convert additional
MoveOperations into MoveDeltas.nttt// First, create normal SplitDelta or
WrapDelta, using first two operations.ntttdelta = new
DeltaClass();ntttdelta.addOperation( operations[ 0 ]
);ntttdelta.addOperation( operations[ 1 ] );nttt// Then, take all but last
two operations and use them to create normalized MoveDeltas.ntttdeltas =
getNormalizedDeltas( MoveDelta, operations.slice( 2 ) );nnttt// Return all
deltas as one array, in proper order.ntttreturn [ delta ].concat( deltas
);nttcase MergeDelta:nttcase UnwrapDelta:nttt// Normal MergeDelta and
UnwrapDelta have two operations: first is MoveOperation and second is
RemoveOperation.nttt// The MoveOperation may be split into multiple
MoveOperations.nttt// If that&#39;s the case, convert additional
MoveOperations into MoveDeltas.nttt// Take all but last two operations and
use them to create normalized MoveDeltas.ntttdeltas = getNormalizedDeltas(
MoveDelta, operations.slice( 0, -2 ) );nttt// Then, create normal
MergeDelta or UnwrapDelta, using last two operations.ntttdelta = new
DeltaClass();ntttdelta.addOperation( operations[ operations.length - 2 ]
);ntttdelta.addOperation( operations[ operations.length - 1 ] );nnttt//
Return all deltas as one array, in proper order.ntttreturn deltas.concat(
delta );nttcase RenameDelta:nttt// RenameDelta may become a "no delta&quot;
if it&#39;s only operation is transformed to NoOperation.nttt// This may
happen when RenameOperation is transformed by RenameOperation.nttt// Keep
in mind that RenameDelta always have just one operation.ntttif (
operations[ 0 ] instanceof NoOperation ) {nttttdelta = new Delta();nttt}
else {nttttdelta = new RenameDelta();nttt}nntttdelta.addOperation(
operations[ 0 ] );nntttreturn [ delta ];nttcase AttributeDelta:nttt//
AttributeDelta is allowed to have multiple AttributeOperations and also
NoOperations butnttt// the first operation has to be an AttributeOperation
as it is used as a reference for deltas properties.nttt// Keep in mind that
we cannot simply remove NoOperations cause that would mess up base
versions.nttt// Find an index of first operation that is not a
NoOperation.ntttfor ( attributeOperationIndex = 0; attributeOperationIndex
&lt; operations.length; attributeOperationIndex++ ) {nttttif ( !(
operations[ attributeOperationIndex ] instanceof NoOperation ) )
{ntttttbreak;ntttt}nttt}nnttt// No AttributeOperations has been found.
Convert AttributeDelta to "no delta&quot;.ntttif ( attributeOperationIndex
== operations.length ) {nttttdelta = new Delta();nttt}nttt//
AttributeOperation found.ntttelse {nttttdelta = new
AttributeDelta();nntttt// AttributeOperation wasn&#39;t the first
operation.nttttif ( attributeOperationIndex != 0 ) {nttttt// Move
AttributeOperation to the beginning.ntttttoperations.unshift(
operations.splice( attributeOperationIndex, 1 )[ 0 ] );nttttt// No need to
update base versions - they are updated at the end of transformation
algorithm anyway.ntttt}nttt}nnttt// Add all operations to the delta (even
if it is just a couple of NoOperations we have to keep them all).ntttfor (
const o of operations ) {nttttdelta.addOperation( o );nttt}nntttreturn [
delta ];nttdefault:nttt// For all other deltas no normalization is
needed.ntttdelta = new DeltaClass();nntttfor ( const o of operations )
{nttttdelta.addOperation( o );nttt}nntttreturn [ delta ];nt}n}nn/**n * <a
href="../../../../Object.html">Object</a> containing values and flags
describing context of a transformation.n *n * @typedef {Object}
module:engine/model/delta/transform~transformationContextn * @property
{Boolean} useAdditionalContext Whether additional context should be
evaluated and used during transformations.n * @property {Boolean} isStrong
Whether transformed deltas are more (`true`) or less (`false`) important
than deltas to transform by.n * @property
{module:engine/model/document~Document} [document] Model document which is
a context for transformations.n * Available only if `useAdditionalContext`
is `true`.n * @property {Boolean|undefined} forceWeakRemove Whether {@link
module:engine/model/operation/removeoperation~RemoveOperation}n * should be
always more important than other operations. Available only if
`useAdditionalContext` is `true`.n * @property {Boolean|undefined}
insertBefore Used when transforming {@link
module:engine/model/operation/moveoperation~MoveOperation}sn * If two
`MoveOperation`s target to the same position, `insertBefore` is used to
resolve such conflict. This flagn * is set and used internally by
transformation algorithms. Available only if `useAdditionalContext` is
`true`.n * @property {Boolean|undefined} forceNotSticky Used when
transformingn * {@link
module:engine/model/operation/moveoperation~MoveOperation#isSticky sticky
MoveOperation}. If set to `true`,n * `isSticky` flag is discarded during
transformations. This flag is set and used internally by transformation
algorithms.n * Available only if `useAdditionalContext` is `true`.n *
@property {Map|undefined} wasAffected Used to evaluate `insertBefore` flag.
This map is set and used internally byn * transformation algorithms.
Available only if `useAdditionalContext` is `true`.n
*/nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/delta/transform.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module engine/model/delta/markerdeltan */nnimport Delta from
&#39;./delta&#39;;nimport DeltaFactory from &#39;./deltafactory&#39;;nn/**n
* To provide specific OT behavior and better collisions solving, the {@link
module:engine/model/writer~Writer#addMarker Writer#addMarker}n * and {@link
module:engine/model/writer~Writer#removeMarker Writer#removeMarker} methods
use the `MarkerDelta` class which inheritsn * from the `Delta` class and
may overwrite some methods.n *n * @extends
module:engine/model/delta/delta~Deltan */nexport default class MarkerDelta
extends Delta {nt/**nt * @inheritDocnt */ntget type() {nttreturn
&#39;marker&#39;;nt}nnt/**nt * A class that will be used when creating
reversed delta.nt *nt * @privatent * @type {Function}nt */ntget
_reverseDeltaClass() {nttreturn MarkerDelta;nt}nnt/**nt * @inheritDocnt
*/ntstatic get className() {nttreturn
&#39;engine.model.delta.MarkerDelta&#39;;nt}n}nnDeltaFactory.register(
MarkerDelta );nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/delta/markerdelta.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module engine/model/delta/basic-transformationsn */nnimport
deltaTransform from &#39;./transform&#39;;nconst addTransformationCase =
deltaTransform.addTransformationCase;nconst defaultTransform =
deltaTransform.defaultTransform;nnimport Range from
&#39;../range&#39;;nimport Position from &#39;../position&#39;;nnimport
NoOperation from &#39;../operation/nooperation&#39;;nimport
AttributeOperation from &#39;../operation/attributeoperation&#39;;nimport
InsertOperation from &#39;../operation/insertoperation&#39;;nimport
ReinsertOperation from &#39;../operation/reinsertoperation&#39;;nnimport
Delta from &#39;./delta&#39;;nimport AttributeDelta from
&#39;./attributedelta&#39;;nimport InsertDelta from
&#39;./insertdelta&#39;;nimport MarkerDelta from
&#39;./markerdelta&#39;;nimport MergeDelta from
&#39;./mergedelta&#39;;nimport MoveDelta from &#39;./movedelta&#39;;nimport
SplitDelta from &#39;./splitdelta&#39;;nimport WeakInsertDelta from
&#39;./weakinsertdelta&#39;;nimport WrapDelta from
&#39;./wrapdelta&#39;;nimport UnwrapDelta from
&#39;./unwrapdelta&#39;;nimport RenameDelta from
&#39;./renamedelta&#39;;nimport RemoveDelta from
&#39;./removedelta&#39;;nnimport compareArrays from
&#39;@ckeditor/ckeditor5-utils/src/comparearrays&#39;;nn// Provide
transformations for default deltas.nn// Add special case for AttributeDelta
x WeakInsertDelta transformation.naddTransformationCase( AttributeDelta,
WeakInsertDelta, ( a, b, context ) =&gt; {nt// If nodes are weak-inserted
into attribute delta range, we need to apply changes from attribute delta
on them.nt// So first we do the normal transformation and if this special
cases happens, we will add an extra delta.ntconst deltas =
defaultTransform( a, b, context );nntif ( a.range.containsPosition(
b.position ) ) {nttdeltas.push( _getComplementaryAttrDelta( b, a )
);nt}nntreturn deltas;n} );nn// Add special case for AttributeDelta x
SplitDelta transformation.naddTransformationCase( AttributeDelta,
SplitDelta, ( a, b, context ) =&gt; {nt// Do not apply special
transformation case if `SplitDelta` has `NoOperation` as the second
operation.ntif ( !b.position ) {nttreturn defaultTransform( a, b, context
);nt}nntconst undoMode = context.undoMode;ntconst splitPosition = new
Position( b.position.root, b.position.path.slice( 0, -1 ) );nntconst deltas
= defaultTransform( a, b, context );nnt// Special case applies only if undo
is not a context and only if `SplitDelta` has `InsertOperation` (not
`ReinsertOperation`).ntif ( undoMode || !( b._cloneOperation instanceof
InsertOperation ) ) {nttreturn deltas;nt}nntfor ( const operation of
a.operations ) {ntt// If a node that has been split has it&#39;s attribute
updated, we should also update attribute ofntt// the node created during
splitting.nttif ( operation.range.containsPosition( splitPosition ) ||
operation.range.start.isEqual( splitPosition ) ) {ntttconst
additionalAttributeDelta = new AttributeDelta();nntttconst rangeStart =
splitPosition.getShiftedBy( 1 );ntttconst rangeEnd =
Position.createFromPosition( rangeStart );ntttrangeEnd.path.push( 0
);nntttconst oldValue = b._cloneOperation.nodes.getNode( 0 ).getAttribute(
operation.key );nntttadditionalAttributeDelta.addOperation( new
AttributeOperation(nttttnew Range( rangeStart, rangeEnd
),nttttoperation.key,nttttoldValue === undefined ? null :
oldValue,nttttoperation.newValue,ntttt0nttt) );nntttdeltas.push(
additionalAttributeDelta );nntttbreak;ntt}nt}nntreturn deltas;n} );nn// Add
special case for InsertDelta x MergeDelta
transformation.naddTransformationCase( InsertDelta, MergeDelta, ( a, b,
context ) =&gt; {nt// Do not apply special transformation case if
`MergeDelta` has `NoOperation` as the second operation.ntif ( !b.position )
{nttreturn defaultTransform( a, b, context );nt}nntconst undoMode =
context.undoMode;nnt// If insert is applied at the same position where
merge happened, we reverse the merge (we treat it like itnt// didn&#39;t
happen) and then apply the original insert operation. This is
"mirrored&quot; in MergeDelta x InsertDeltant// transformation below, where
we simply do not apply MergeDelta.ntif ( !undoMode &amp;&amp;
a.position.isEqual( b.position ) ) {nttreturn
[ntttb.getReversed(),nttta.clone()ntt];nt}nntreturn defaultTransform( a, b,
context );n} );nnfunction transformMarkerDelta( a, b ) {ntconst
transformedDelta = a.clone();ntconst transformedOp =
transformedDelta.operations[ 0 ];nntif ( transformedOp.oldRange )
{ntttransformedOp.oldRange = transformedOp.oldRange.getTransformedByDelta(
b )[ 0 ];nt}nntif ( transformedOp.newRange ) {ntttransformedOp.newRange =
transformedOp.newRange.getTransformedByDelta( b )[ 0 ];nt}nntreturn [
transformedDelta ];n}nnaddTransformationCase( MarkerDelta, SplitDelta,
transformMarkerDelta );naddTransformationCase( MarkerDelta, MergeDelta,
transformMarkerDelta );naddTransformationCase( MarkerDelta, WrapDelta,
transformMarkerDelta );naddTransformationCase( MarkerDelta, UnwrapDelta,
transformMarkerDelta );naddTransformationCase( MarkerDelta, MoveDelta,
transformMarkerDelta );naddTransformationCase( MarkerDelta, RenameDelta,
transformMarkerDelta );nn// Add special case for MoveDelta x MergeDelta
transformation.naddTransformationCase( MoveDelta, MergeDelta, ( a, b,
context ) =&gt; {ntconst undoMode = context.undoMode;nnt// Do not apply
special transformation case in undo mode or if `MergeDelta` has
`NoOperation` as the second operation.ntif ( undoMode || !b.position )
{nttreturn defaultTransform( a, b, context );nt}nnt// If move delta is
supposed to move a node that has been merged, we reverse the merge (we
treat it like itnt// didn&#39;t happen) and then apply the original move
operation. This is "mirrored&quot; in MergeDelta x MoveDeltant//
transformation below, where we simply do not apply MergeDelta.ntconst
operateInSameParent =ntta.sourcePosition.root == b.position.root
&amp;&amp;nttcompareArrays( a.sourcePosition.getParentPath(),
b.position.getParentPath() ) === &#39;same&#39;;nntconst
mergeInsideMoveRange = a.sourcePosition.offset &lt;= b.position.offset
&amp;&amp; a.sourcePosition.offset + a.howMany &gt; b.position.offset;nntif
( operateInSameParent &amp;&amp; mergeInsideMoveRange ) {nttreturn
[ntttb.getReversed(),nttta.clone()ntt];nt}nntreturn defaultTransform( a, b,
context );n} );nn// Add special case for MergeDelta x InsertDelta
transformation.naddTransformationCase( MergeDelta, InsertDelta, ( a, b,
context ) =&gt; {nt// Do not apply special transformation case if
`MergeDelta` has `NoOperation` as the second operation.ntif ( !a.position )
{nttreturn defaultTransform( a, b, context );nt}nntconst undoMode =
context.undoMode;nnt// If merge is applied at the same position where we
inserted a range of nodes we cancel the merge as it&#39;s resultsnt// may
be unexpected and very weird. Even if we do some "magic&quot; we don&#39;t
know what really are users&#39; expectations.ntif ( !undoMode &amp;&amp;
a.position.isEqual( b.position ) ) {nttreturn [ noDelta() ];nt}nntreturn
defaultTransform( a, b, context );n} );nn// Add special case for MergeDelta
x MoveDelta transformation.naddTransformationCase( MergeDelta, MoveDelta, (
a, b, context ) =&gt; {ntconst undoMode = context.undoMode;nnt// Do not
apply special transformation case in undo mode or if `MergeDelta` has
`NoOperation` as the second operation.ntif ( undoMode || !a.position )
{nttreturn defaultTransform( a, b, context );nt}nnt// If merge is applied
at the position between moved nodes we cancel the merge as it&#39;s results
may be unexpected andnt// very weird. Even if we do some "magic&quot; we
don&#39;t know what really are users&#39; expectations.ntconst
operateInSameParent =ntta.position.root == b.sourcePosition.root
&amp;&amp;nttcompareArrays( a.position.getParentPath(),
b.sourcePosition.getParentPath() ) === &#39;same&#39;;nntconst
mergeInsideMoveRange = b.sourcePosition.offset &lt;= a.position.offset
&amp;&amp; b.sourcePosition.offset + b.howMany &gt; a.position.offset;nntif
( operateInSameParent &amp;&amp; mergeInsideMoveRange ) {nttreturn [
noDelta() ];nt}nntreturn defaultTransform( a, b, context );n}
);nnaddTransformationCase( SplitDelta, SplitDelta, ( a, b, context ) =&gt;
{ntconst undoMode = context.undoMode;nnt// Do not apply special
transformation case if transformation is in undo mode.ntif ( undoMode )
{nttreturn defaultTransform( a, b, context );nt}nnt// Do not apply special
transformation case if `SplitDelta` has `NoOperation` as the second
operation.ntif ( !a.position || !b.position ) {nttreturn defaultTransform(
a, b, context );nt}nntconst pathA = a.position.getParentPath();ntconst
pathB = b.position.getParentPath();nnt// The special case is for splits
inside the same parent.ntif ( a.position.root == b.position.root &amp;&amp;
compareArrays( pathA, pathB ) == &#39;same&#39; ) {ntta = a.clone();nnttif
( a.position.offset &lt; b.position.offset || ( a.position.offset ==
b.position.offset &amp;&amp; context.isStrong ) ) {nttt// If both first
operations are `ReinsertOperation`s, we might need to transform
`a._cloneOperation`,nttt// so it will take correct node from
graveyard.ntttif (ntttta._cloneOperation instanceof ReinsertOperation
&amp;&amp; b._cloneOperation instanceof ReinsertOperation
&amp;&amp;ntttta._cloneOperation.sourcePosition.offset &gt;
b._cloneOperation.sourcePosition.offsetnttt)
{ntttta._cloneOperation.sourcePosition.offset–;nttt}nnttt// `a` splits
closer or at same offset.nttt// Change how many nodes are moved. Do not
move nodes that were moved by delta `b`.ntttconst aRange =
Range.createFromPositionAndShift( a.position, a._moveOperation.howMany
);ntttconst bRange = Range.createFromPositionAndShift( b.position,
b._moveOperation.howMany );nntttconst diff = aRange.getDifference( bRange
);nntttlet newHowMany = 0;nntttfor ( const range of diff ) {nttttnewHowMany
+= range.end.offset - range.start.offset;nttt}nntttif ( newHowMany === 0 )
{ntttta.operations.pop(); // Remove last operation
(`MoveOperation`).ntttta.addOperation( new NoOperation( a.operations[ 0
].baseVersion + 1 ) ); // Add `NoOperation` instead.nttt} else
{ntttta.operations[ 1 ].howMany = newHowMany;nttt}nntttreturn [ a ];ntt}
else {nttt// `a` splits further.nttt// This is more complicated case,
thankfully we can solve it using default transformation and setting proper
context.ntttconst newContext = Object.assign( {}, context
);ntttnewContext.isStrong = true;ntttnewContext.insertBefore =
true;nntttreturn defaultTransform( a, b, newContext );ntt}nt}nntreturn
defaultTransform( a, b, context );n} );nn// Add special case for SplitDelta
x UnwrapDelta transformation.naddTransformationCase( SplitDelta,
UnwrapDelta, ( a, b, context ) =&gt; {nt// Do not apply special
transformation case if `SplitDelta` has `NoOperation` as the second
operation.ntif ( !a.position ) {nttreturn defaultTransform( a, b, context
);nt}nnt// If incoming split delta tries to split a node that just got
unwrapped, there is actually nothing to split,nt// so we discard that
delta.ntif ( a.position.root == b.position.root &amp;&amp; compareArrays(
b.position.path, a.position.getParentPath() ) === &#39;same&#39; )
{nttreturn [ noDelta() ];nt}nntreturn defaultTransform( a, b, context );n}
);nn// Add special case for SplitDelta x WrapDelta
transformation.naddTransformationCase( SplitDelta, WrapDelta, ( a, b,
context ) =&gt; {nt// Do not apply special transformation case if
`SplitDelta` has `NoOperation` as the second operation.ntif ( !a.position )
{nttreturn defaultTransform( a, b, context );nt}nnt// If split is applied
at the position between wrapped nodes, we cancel the split as it&#39;s
results may be unexpected andnt// very weird. Even if we do some
"magic&quot; we don&#39;t know what really are users&#39;
expectations.nntconst sameRoot = a.position.root ==
b.range.start.root;ntconst operateInSameParent = sameRoot &amp;&amp;
compareArrays( a.position.getParentPath(), b.range.start.getParentPath() )
=== &#39;same&#39;;ntconst splitInsideWrapRange = b.range.start.offset &lt;
a.position.offset &amp;&amp; b.range.end.offset &gt;=
a.position.offset;nntif ( operateInSameParent &amp;&amp;
splitInsideWrapRange ) {nttreturn [ noDelta() ];nt} else if ( sameRoot
&amp;&amp; compareArrays( a.position.getParentPath(),
b.range.end.getShiftedBy( -1 ).path ) === &#39;same&#39; ) {ntt// Split
position is directly inside the last node from wrap range.ntt// If
that&#39;s the case, we manually change split delta so it will
"target&quot; inside the wrapping element.ntt// By doing so we will be
inserting split node right to the original node which feels natural and is
a good UX.nttconst delta = a.clone();nntt// 1. Fix insert operation
position.ntt// Node to split is the last children of the wrapping
element.ntt// Wrapping element is the element inserted by WrapDelta
(re)insert operation.ntt// It is inserted after the wrapped range, but the
wrapped range will be moved inside it.ntt// Having this in mind, it is
correct to use wrapped range start position as the position before wrapping
element.nttconst splitNodePos = Position.createFromPosition( b.range.start
);ntt// Now, `splitNodePos` points before wrapping element.ntt// To get a
position before last children of that element, we expand position&#39;s
`path` member by proper offset.nttsplitNodePos.path.push( b.howMany - 1
);nntt// SplitDelta insert operation position should be right after the
node we split.nttconst insertPos = splitNodePos.getShiftedBy( 1
);nttdelta._cloneOperation.position = insertPos;nntt// 2. Fix move
operation source position.ntt// Nodes moved by SplitDelta will be moved
from new position, modified by WrapDelta.ntt// To obtain that new position,
`splitNodePos` will be used, as this is the node we are extracting children
from.nttconst sourcePos = Position.createFromPosition( splitNodePos );ntt//
Nothing changed inside split node so it is correct to use the original
split position offset.nttsourcePos.path.push( a.position.offset
);nttdelta._moveOperation.sourcePosition = sourcePos;nntt// 3. Fix move
operation target position.ntt// SplitDelta move operation target position
should be inside the node inserted by operation above.ntt// Since the node
is empty, we will insert at offset 0.nttconst targetPos =
Position.createFromPosition( insertPos );ntttargetPos.path.push( 0
);nttdelta._moveOperation.targetPosition = targetPos;nnttreturn [ delta
];nt}nntreturn defaultTransform( a, b, context );n} );nn// Add special case
for SplitDelta x WrapDelta transformation.naddTransformationCase(
SplitDelta, AttributeDelta, ( a, b, context ) =&gt; {nt// Do not apply
special transformation case if `SplitDelta` has `NoOperation` as the second
operation.ntif ( !a.position ) {nttreturn defaultTransform( a, b, context
);nt}nnta = a.clone();nntconst undoMode = context.undoMode;ntconst
splitPosition = new Position( a.position.root, a.position.path.slice( 0, -1
) );nnt// Special case applies only if undo is not a context and only if
`SplitDelta` has `InsertOperation` (not `ReinsertOperation`).ntif (
undoMode || !( a._cloneOperation instanceof InsertOperation ) ) {nttreturn
[ a ];nt}nnt// If element to split had it&#39;s attribute changed, we have
to reflect this change in an elementnt// that is in SplitDelta&#39;s
InsertOperation.ntfor ( const operation of b.operations ) {nttif (
operation.range.containsPosition( splitPosition ) ||
operation.range.start.isEqual( splitPosition ) ) {ntttif (
operation.newValue !== null ) {ntttta._cloneOperation.nodes.getNode( 0
)._setAttribute( operation.key, operation.newValue );nttt} else
{ntttta._cloneOperation.nodes.getNode( 0 )._removeAttribute( operation.key
);nttt}nntttbreak;ntt}nt}nntreturn [ a ];n} );nn// Add special case for
UnwrapDelta x SplitDelta transformation.naddTransformationCase(
UnwrapDelta, SplitDelta, ( a, b, context ) =&gt; {nt// Do not apply special
transformation case if `SplitDelta` has `NoOperation` as the second
operation.ntif ( !b.position ) {nttreturn defaultTransform( a, b, context
);nt}nnt// If incoming unwrap delta tries to unwrap node that got split we
should unwrap the original node and the split copy.nt// This can be
achieved either by reverting split and applying unwrap to singular node, or
creating additional unwrap delta.ntif ( a.position.root == b.position.root
&amp;&amp; compareArrays( a.position.path, b.position.getParentPath() ) ===
&#39;same&#39; ) {nttreturn
[ntttb.getReversed(),nttta.clone()ntt];nt}nntreturn defaultTransform( a, b,
context );n} );nn// Add special case for WeakInsertDelta x AttributeDelta
transformation.naddTransformationCase( WeakInsertDelta, AttributeDelta, (
a, b ) =&gt; {nt// If nodes are weak-inserted into attribute delta range,
we need to apply changes from attribute delta on them.ntconst deltas = [
a.clone() ];nntif ( b.range.containsPosition( a.position ) )
{nttdeltas.push( _getComplementaryAttrDelta( a, b ) );nt}nntreturn
deltas;n} );nn// Add special case for WrapDelta x SplitDelta
transformation.naddTransformationCase( WrapDelta, SplitDelta, ( a, b,
context ) =&gt; {nt// Do not apply special transformation case if
`SplitDelta` has `NoOperation` as the second operation.ntif ( !b.position )
{nttreturn defaultTransform( a, b, context );nt}nnt// If incoming wrap
delta tries to wrap range that contains split position, we have to cancel
the split and applynt// the wrap. Since split was already applied, we have
to revert it.ntconst sameRoot = a.range.start.root ==
b.position.root;ntconst operateInSameParent = sameRoot &amp;&amp;
compareArrays( a.range.start.getParentPath(), b.position.getParentPath() )
=== &#39;same&#39;;ntconst splitInsideWrapRange = a.range.start.offset &lt;
b.position.offset &amp;&amp; a.range.end.offset &gt;=
b.position.offset;nntif ( operateInSameParent &amp;&amp;
splitInsideWrapRange ) {nttreturn
[ntttb.getReversed(),nttta.clone()ntt];nt} else if ( sameRoot &amp;&amp;
compareArrays( b.position.getParentPath(), a.range.end.getShiftedBy( -1
).path ) === &#39;same&#39; ) {nttconst delta = a.clone();nntt// Move
wrapping element insert position one node further so it is after the split
node insertion.nttdelta._insertOperation.position.offset++;nntt// Include
the split node copy.nttdelta._moveOperation.howMany++;nntt// Change the
path to wrapping element in move
operation.nttdelta._moveOperation.targetPosition.path[
delta._moveOperation.targetPosition.path.length - 2 ]++;nnttreturn [ delta
];nt}nntreturn defaultTransform( a, b, context );n} );nn// Add special case
for RenameDelta x SplitDelta transformation.naddTransformationCase(
RenameDelta, SplitDelta, ( a, b, context ) =&gt; {ntconst undoMode =
context.undoMode;ntconst deltas = defaultTransform( a, b, context );nnt//
Special case applies only if undo is not a context and only if `SplitDelta`
has `InsertOperation` (not `ReinsertOperation`).ntif ( undoMode || !(
b._cloneOperation instanceof InsertOperation ) ) {nttreturn
deltas;nt}nntconst insertPosition =
b._cloneOperation.position.getShiftedBy( -1 );nntif ( insertPosition
&amp;&amp; a.operations[ 0 ].position.isEqual( insertPosition ) ) {ntt// If
a node that has been split has it&#39;s name changed, we should also change
name ofntt// the node created during splitting.nttconst
additionalRenameDelta = a.clone();nttadditionalRenameDelta.operations[ 0
].position = insertPosition.getShiftedBy( 1 );nnttdeltas.push(
additionalRenameDelta );nt}nntreturn deltas;n} );nn// Add special case for
SplitDelta x RenameDelta transformation.naddTransformationCase( SplitDelta,
RenameDelta, ( a, b, context ) =&gt; {nta = a.clone();nntconst undoMode =
context.undoMode;nnt// Special case applies only if undo is not a context
and only if `SplitDelta` has `InsertOperation` (not
`ReinsertOperation`).ntif ( undoMode || !( a._cloneOperation instanceof
InsertOperation ) ) {nttreturn [ a ];nt}nntconst insertPosition =
a._cloneOperation.position.getShiftedBy( -1 );nnt// If element to split had
it&#39;s name changed, we have to reflect this by creating additional
rename operation.ntif ( insertPosition &amp;&amp; !undoMode &amp;&amp;
b.operations[ 0 ].position.isEqual( insertPosition ) ) {nttconst
additionalRenameDelta = b.clone();nttadditionalRenameDelta.operations[ 0
].position = insertPosition.getShiftedBy( 1
);nttadditionalRenameDelta.operations[ 0 ].oldName =
a._cloneOperation.nodes.getNode( 0 ).name;nnttreturn [ a,
additionalRenameDelta ];nt}nntreturn [ a ];n} );nn// Add special case for
RemoveDelta x SplitDelta transformation.naddTransformationCase(
RemoveDelta, SplitDelta, ( a, b, context ) =&gt; {ntconst deltas =
defaultTransform( a, b, context );nt// The "clone operation&quot; may be
InsertOperation, ReinsertOperation, MoveOperation or NoOperation.ntconst
insertPosition = b._cloneOperation.position ||
b._cloneOperation.targetPosition;nnt// NoOperation.ntif ( !insertPosition )
{nttreturn defaultTransform( a, b, context );nt}nntconst undoMode =
context.undoMode;nnt// Special case applies only if undo is not a
context.ntif ( undoMode ) {nttreturn deltas;nt}nnt// In case if
`defaultTransform` returned more than one delta.ntfor ( const delta of
deltas ) {ntt// "No delta&quot; may be returned in some cases.nttif ( delta
instanceof RemoveDelta ) {ntttconst operation =
delta._moveOperation;ntttconst rangeEnd =
operation.sourcePosition.getShiftedBy( operation.howMany );nntttif (
rangeEnd.isEqual( insertPosition ) ) {nttttoperation.howMany +=
1;nttt}ntt}nt}nntreturn deltas;n} );nn// Add special case for SplitDelta x
RemoveDelta transformation.naddTransformationCase( SplitDelta, RemoveDelta,
( a, b, context ) =&gt; {ntconst undoMode = context.undoMode;nnt// Special
case applies only if undo is not a context.ntif ( undoMode ) {nttreturn
defaultTransform( a, b, context );nt}nnt// This case is very trickily
solved.nt// Instead of fixing `a` delta, we change `b` delta for a while
and fire default transformation with fixed `b` delta.nt// Thanks to that
fixing `a` delta will be differently (correctly) transformed.nt//nt// The
"clone operation&quot; may be InsertOperation, ReinsertOperation,
MoveOperation or NoOperation.ntconst insertPosition =
a._cloneOperation.position || a._cloneOperation.targetPosition;nnt//
NoOperation.ntif ( !insertPosition ) {nttreturn defaultTransform( a, b,
context );nt}nntb = b.clone();ntconst operation = b._moveOperation;ntconst
rangeEnd = operation.sourcePosition.getShiftedBy( operation.howMany );nntif
( rangeEnd.isEqual( insertPosition ) ) {nttoperation.howMany +=
1;nt}nntreturn defaultTransform( a, b, context );n} );nn// Helper function
for `AttributeDelta` class transformations.n// Creates an attribute delta
that sets attribute from given `attributeDelta` on nodes from given
`weakInsertDelta`.nfunction _getComplementaryAttrDelta( weakInsertDelta,
attributeDelta ) {ntconst complementaryAttrDelta = new
AttributeDelta();ntconst nodes = weakInsertDelta.nodes;nnt// At the
beginning we store the attribute value from the first node on
`weakInsertDelta` node list.ntlet val = nodes.getNode( 0 ).getAttribute(
attributeDelta.key );nnt// This stores the last index of `weakInsertDelta`
node list where the attribute value was differentnt// than in the previous
node. We need it to create separate `AttributeOperation`s for nodes with
different attributes.ntlet lastOffset = 0;nt// Sum of offsets of already
processed nodes.ntlet offsetSum = nodes.getNode( 0 ).offsetSize;nntfor (
let i = 1; i &lt; nodes.length; i++ ) {nttconst node = nodes.getNode( i
);nttconst nodeAttrVal = node.getAttribute( attributeDelta.key );nntt// If
previous node has different attribute value, we will create an operation to
the point before current node.ntt// So all nodes with the same attributes
up to this point will be included in one `AttributeOperation`.nttif (
nodeAttrVal != val ) {nttt// New operation is created only when it is
needed. If given node already has proper value for thisnttt// attribute we
simply skip it without adding a new operation.ntttif ( val !=
attributeDelta.value ) {nttttaddOperation();nttt}nntttval =
nodeAttrVal;ntttlastOffset = offsetSum;ntt}nnttoffsetSum = offsetSum +
node.offsetSize;nt}nnt// At the end we have to add additional
`AttributeOperation` for the last part of node list. If all nodes on
thent// node list had same attributes, this will be the only operation
added to the delta.ntaddOperation();nntreturn
complementaryAttrDelta;nntfunction addOperation() {nttconst range = new
Range(ntttweakInsertDelta.position.getShiftedBy( lastOffset
),ntttweakInsertDelta.position.getShiftedBy( offsetSum )ntt);nnttconst
attrOperation = new AttributeOperation( range, attributeDelta.key, val,
attributeDelta.value, 0 );nttcomplementaryAttrDelta.addOperation(
attrOperation );nt}n}nn// This is "no-op&quot; delta, it has no type and
only no-operation, it basically does nothing.n// It is used when we
don&#39;t want to apply changes but still we need to return a
delta.nfunction noDelta() {ntconst noDelta = new Delta();nnt// BaseVersion
will be fixed later anyway.ntnoDelta.addOperation( new NoOperation( 0 )
);nntreturn noDelta;n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/delta/basic-transformations.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module engine/model/batchn */nn/**n * A batch
instance groups model changes ({@link module:engine/model/delta/delta~Delta
deltas}). All deltas grouped in a single batchn * can be reverted together,
so you can think about a batch as of a single undo step. If you want to
extend a given undo step, youn * can add more changes to the batch using
{@link module:engine/model/model~Model#enqueueChange}:n *n
*ttmodel.enqueueChange( batch, writer =&gt; {n *tttwriter.insertText(
&#39;foo&#39;, paragraph, &#39;end&#39; );n *tt} );n *n * @see
module:engine/model/model~Model#enqueueChangen * @see
module:engine/model/model~Model#changen */nexport default class Batch
{nt/**nt * Creates a batch instance.nt *nt * @see
module:engine/model/model~Model#enqueueChangent * @see
module:engine/model/model~Model#changent * @param
{&#39;transparent&#39;|&#39;default&#39;} [type=&#39;default&#39;] The type
of the batch.nt */ntconstructor( type = &#39;default&#39; ) {ntt/**ntt * An
array of deltas that compose this batch.ntt *ntt * @readonlyntt * @type
{Array.&lt;module:engine/model/delta/delta~Delta&gt;}ntt */nttthis.deltas =
[];nntt/**ntt * The type of the batch.ntt *ntt * It can be one of the
following values:ntt * * `&#39;default&#39;` &amp;ndash; All "normal&quot;
batches. This is the most commonly used type.ntt * *
`&#39;transparent&#39;` &amp;ndash; A batch that should be ignored by other
features, i.e. an initial batch or collaborative editingntt * changes.ntt
*ntt * @readonlyntt * @type {&#39;transparent&#39;|&#39;default&#39;}ntt
*/nttthis.type = type;nt}nnt/**nt * Returns the base version of this batch,
which is equal to the base version of the first delta (which has the base
version set)nt * in the batch. If there are no deltas in the batch or
neither delta has the base version set, it returns `null`.nt *nt *
@readonlynt * @type {Number|null}nt */ntget baseVersion() {nttfor ( const
delta of this.deltas ) {ntttif ( delta.baseVersion !== null ) {nttttreturn
delta.baseVersion;nttt}ntt}nnttreturn null;nt}nnt/**nt * Adds a delta to
the batch instance. All modification methods (insert, remove, split, etc.)
use this methodnt * to add created deltas.nt *nt * @param
{module:engine/model/delta/delta~Delta} delta A delta to add.nt * @return
{module:engine/model/delta/delta~Delta} An added delta.nt */ntaddDelta(
delta ) {nttdelta.batch = this;nttthis.deltas.push( delta );nnttreturn
delta;nt}nnt/**nt * Gets an iterable collection of operations.nt *nt *
@returns
{Iterable.&lt;module:engine/model/operation/operation~Operation&gt;}nt
*/nt* getOperations() {nttfor ( const delta of this.deltas ) {ntttyield*
delta.operations;ntt}nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/batch.jsn// module id = nulln// module chunks
= “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben.
All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
engine/model/writern */nnimport AttributeDelta from
&#39;./delta/attributedelta&#39;;nimport InsertDelta from
&#39;./delta/insertdelta&#39;;nimport MarkerDelta from
&#39;./delta/markerdelta&#39;;nimport MergeDelta from
&#39;./delta/mergedelta&#39;;nimport MoveDelta from
&#39;./delta/movedelta&#39;;nimport RemoveDelta from
&#39;./delta/removedelta&#39;;nimport RenameDelta from
&#39;./delta/renamedelta&#39;;nimport RootAttributeDelta from
&#39;./delta/rootattributedelta&#39;;nimport SplitDelta from
&#39;./delta/splitdelta&#39;;nimport UnwrapDelta from
&#39;./delta/unwrapdelta&#39;;nimport WeakInsertDelta from
&#39;./delta/weakinsertdelta&#39;;nimport WrapDelta from
&#39;./delta/wrapdelta&#39;;nnimport AttributeOperation from
&#39;./operation/attributeoperation&#39;;nimport DetachOperation from
&#39;./operation/detachoperation&#39;;nimport InsertOperation from
&#39;./operation/insertoperation&#39;;nimport MarkerOperation from
&#39;./operation/markeroperation&#39;;nimport MoveOperation from
&#39;./operation/moveoperation&#39;;nimport RemoveOperation from
&#39;./operation/removeoperation&#39;;nimport RenameOperation from
&#39;./operation/renameoperation&#39;;nimport RootAttributeOperation from
&#39;./operation/rootattributeoperation&#39;;nnimport DocumentFragment from
&#39;./documentfragment&#39;;nimport Text from &#39;./text&#39;;nimport
Element from &#39;./element&#39;;nimport RootElement from
&#39;./rootelement&#39;;nimport Position from &#39;./position&#39;;nimport
Range from &#39;./range.js&#39;;nimport DocumentSelection from
&#39;./documentselection&#39;;nnimport toMap from
&#39;@ckeditor/ckeditor5-utils/src/tomap&#39;;nnimport CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nn/**n * The model
can only be modified by using the writer. It should be used whenever you
want to create a node, modifyn * child nodes, attributes or text, set the
selection&#39;s position and its attributes.n *n * The instance of the
writer is only available in the {@link
module:engine/model/model~Model#change `change()`} orn * {@link
module:engine/model/model~Model#enqueueChange `enqueueChange()`}.n *n
*ttmodel.change( writer =&gt; {n *tttwriter.insertText( &#39;foo&#39;,
paragraph, &#39;end&#39; );n *tt} );n *n * Note that the should never be
stored and used outside of the `change()` orn * `enqueueChange()` blocks.n
*n * @see module:engine/model/model~Model#changen * @see
module:engine/model/model~Model#enqueueChangen */nexport default class
Writer {nt/**nt * Creates a writer instance.nt *nt * *Note:* It is not
recommended to use it directly. Use {@link
module:engine/model/model~Model#change} ornt * {@link
module:engine/model/model~Model#enqueueChange} instead.nt *nt *
@protectednt * @param {module:engine/model/model~Model} modelnt * @param
{module:engine/model/batch~Batch} batchnt */ntconstructor( model, batch )
{ntt/**ntt * @readonlyntt * @type {module:engine/model/model~Model}ntt
*/nttthis.model = model;nntt/**ntt * @readonlyntt * @type
{module:engine/model/batch~Batch}ntt */nttthis.batch = batch;nt}nnt/**nt *
Creates a new {@link module:engine/model/text~Text text node}.nt *nt
*ttwriter.createText( &#39;foo&#39; );nt *ttwriter.createText(
&#39;foo&#39;, { &#39;bold&#39;: true } );nt *nt * @param {String} data
Text data.nt * @param {Object} [attributes] Text attributes.nt * @returns
{module:engine/model/text~Text} Created text node.nt */ntcreateText( data,
attributes ) {nttreturn new Text( data, attributes );nt}nnt/**nt * Creates
a new {@link module:engine/model/element~Element element}.nt *nt
*ttwriter.createElement( &#39;paragraph&#39; );nt *ttwriter.createElement(
&#39;paragraph&#39;, { &#39;alignment&#39;: &#39;center&#39; } );nt *nt *
@param {String} name Name of the element.nt * @param {Object} [attributes]
Elements attributes.nt * @returns {module:engine/model/element~Element}
Created element.nt */ntcreateElement( name, attributes ) {nttreturn new
Element( name, attributes );nt}nnt/**nt * Creates a new {@link
module:engine/model/documentfragment~DocumentFragment document fragment}.nt
*nt * @returns {module:engine/model/documentfragment~DocumentFragment}
Created document fragment.nt */ntcreateDocumentFragment() {nttreturn new
DocumentFragment();nt}nnt/**nt * Inserts item on given position.nt *nt
*ttconst paragraph = writer.createElement( &#39;paragraph&#39; );nt
*ttwriter.insert( paragraph, position );nt *nt * Instead of using position
you can use parent and offset:nt *nt * ttconst text = writer.createText(
&#39;foo&#39; );nt *ttwriter.insert( text, paragraph, 5 );nt *nt * You can
also use `end` instead of the offset to insert at the end:nt *nt * ttconst
text = writer.createText( &#39;foo&#39; );nt *ttwriter.insert( text,
paragraph, &#39;end&#39; );nt *nt * Or insert before or after another
element:nt *nt * ttconst paragraph = writer.createElement(
&#39;paragraph&#39; );nt *ttwriter.insert( paragraph, anotherParagraph,
&#39;after&#39; );nt *nt * These parameters works the same way as {@link
module:engine/model/position~Position.createAt}.nt *nt * Note that if the
item already has parent it will be removed from the previous parent.nt *nt
* Note that you cannot re-insert a node from a document to a different
document or document fragment. In this case,nt *
`model-writer-insert-forbidden-move` is thrown.nt *nt * If you want to move
{@link module:engine/model/range~Range range} instead of annt * {@link
module:engine/model/item~Item item} use {@link
module:engine/model/writer~Writer#move move}.nt *nt * @param
{module:engine/model/item~Item|module:engine/model/documentfragment~DocumentFragment}
item Item or documentnt * fragment to insert.nt * @param
{module:engine/model/item~Item|module:engine/model/position~Position}
itemOrPositionnt * @param
{Number|&#39;end&#39;|&#39;before&#39;|&#39;after&#39;} [offset=0] Offset
or one of the flags. Used only whennt * second parameter is a {@link
module:engine/model/item~Item model item}.nt */ntinsert( item,
itemOrPosition, offset ) {nttthis._assertWriterUsedCorrectly();nnttconst
position = Position.createAt( itemOrPosition, offset );nntt// For text that
has no parent we need to make a WeakInsert.nttconst delta = item instanceof
Text &amp;&amp; !item.parent ? new WeakInsertDelta() : new
InsertDelta();nntt// If item has a parent already.nttif ( item.parent )
{nttt// We need to check if item is going to be inserted within the same
document.ntttif ( isSameTree( item.root, position.root ) ) {ntttt// If
it&#39;s we just need to move it.nttttthis.move( Range.createOn( item ),
position );nnttttreturn;nttt}nttt// If it isn&#39;t the same root.ntttelse
{nttttif ( item.root.document ) {nttttt// It is forbidden to move a node
that was already in a document outside of it.ntttttthrow new Error(
&#39;model-writer-insert-forbidden-move: Cannot move a node from a document
to a different tree.&#39; );ntttt} else {nttttt// Move between two
different document fragments or from document fragment to a document is
possible.nttttt// In that case, remove the item from it&#39;s original
parent.ntttttthis.remove( item );ntttt}nttt}ntt}nnttconst version =
position.root.document ? position.root.document.version : null;nnttconst
insert = new InsertOperation( position, item, version
);nnttthis.batch.addDelta( delta );nttdelta.addOperation( insert
);nttthis.model.applyOperation( insert );nntt// When element is a
DocumentFragment we need to move its markers to Document#markers.nttif (
item instanceof DocumentFragment ) {ntttfor ( const [ markerName,
markerRange ] of item.markers ) {ntttt// We need to migrate marker range
from DocumentFragment to Document.nttttconst rangeRootPosition =
Position.createAt( markerRange.root );nttttconst range = new
Range(ntttttmarkerRange.start._getCombined( rangeRootPosition, position
),ntttttmarkerRange.end._getCombined( rangeRootPosition, position
)ntttt);nnttttthis.addMarker( markerName, { range, usingOperation: true }
);nttt}ntt}nt}nnt/**nt * Creates and inserts text on given position. You
can optionally set text attributes:nt *nt *ttwriter.insertText(
&#39;foo&#39;, position );nt *ttwriter.insertText( &#39;foo&#39;, {
&#39;bold&#39;: true }, position );nt *nt * Instead of using position you
can use parent and offset or define that text should be inserted at the
endnt * or before or after other node:nt *nt * ttwriter.insertText(
&#39;foo&#39;, paragraph, 5 ); // inserts in paragraph, at offset 5nt
*ttwriter.insertText( &#39;foo&#39;, paragraph, &#39;end&#39; ); // inserts
at the end of the paragraphnt *ttwriter.insertText( &#39;foo&#39;, image,
&#39;after&#39; ); // inserts after imagent *nt * These parameters works
the same way as {@link module:engine/model/position~Position.createAt}.nt
*nt * @param {String} data Text data.nt * @param {Object} [attributes] Text
attributes.nt * @param
{module:engine/model/item~Item|module:engine/model/position~Position}
itemOrPositionnt * @param
{Number|&#39;end&#39;|&#39;before&#39;|&#39;after&#39;} [offset=0] Offset
or one of the flags. Used only whennt * third parameter is a {@link
module:engine/model/item~Item model item}.nt */ntinsertText( text,
attributes, itemOrPosition, offset ) {nttif ( attributes instanceof
DocumentFragment || attributes instanceof Element || attributes instanceof
Position ) {ntttthis.insert( this.createText( text ), attributes,
itemOrPosition );ntt} else {ntttthis.insert( this.createText( text,
attributes ), itemOrPosition, offset );ntt}nt}nnt/**nt * Creates and
inserts element on given position. You can optionally set attributes:nt *nt
*ttwriter.insertElement( &#39;paragraph&#39;, position );nt
*ttwriter.insertElement( &#39;paragraph&#39;, { &#39;alignment&#39;:
&#39;center&#39; }, position );nt *nt * Instead of using position you can
use parent and offset or define that text should be inserted at the endnt *
or before or after other node:nt *nt * ttwriter.insertElement(
&#39;paragraph&#39;, paragraph, 5 ); // inserts in paragraph, at offset 5nt
*ttwriter.insertElement( &#39;paragraph&#39;, blockquote, &#39;end&#39; );
// insets at the end of the blockquotent *ttwriter.insertElement(
&#39;paragraph&#39;, image, &#39;after&#39; ); // inserts after imagent *nt
* These parameters works the same way as {@link
module:engine/model/position~Position.createAt}.nt *nt * @param {String}
name Name of the element.nt * @param {Object} [attributes] Elements
attributes.nt * @param
{module:engine/model/item~Item|module:engine/model/position~Position}
itemOrPositionnt * @param
{Number|&#39;end&#39;|&#39;before&#39;|&#39;after&#39;} [offset=0] Offset
or one of the flags. Used only whennt * third parameter is a {@link
module:engine/model/item~Item model item}.nt */ntinsertElement( name,
attributes, itemOrPosition, offset ) {nttif ( attributes instanceof
DocumentFragment || attributes instanceof Element || attributes instanceof
Position ) {ntttthis.insert( this.createElement( name ), attributes,
itemOrPosition );ntt} else {ntttthis.insert( this.createElement( name,
attributes ), itemOrPosition, offset );ntt}nt}nnt/**nt * Inserts item at
the end of the given parent.nt *nt *ttconst paragraph =
writer.createElement( &#39;paragraph&#39; );nt *ttwriter.append( paragraph,
root );nt *nt * Note that if the item already has parent it will be removed
from the previous parent.nt *nt * If you want to move {@link
module:engine/model/range~Range range} instead of annt * {@link
module:engine/model/item~Item item} use {@link
module:engine/model/writer~Writer#move move}.nt *nt * @param
{module:engine/model/item~Item|module:engine/model/documentfragment~DocumentFragment}nt
* item Item or document fragment to insert.nt * @param
{module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment}
parentnt */ntappend( item, parent ) {nttthis.insert( item, parent,
&#39;end&#39; );nt}nnt/**nt * Creates text node and inserts it at the end
of the parent. You can optionally set text attributes:nt *nt
*ttwriter.appendText( &#39;foo&#39;, paragraph );nt *ttwriter.appendText(
&#39;foo&#39;, { &#39;bold&#39;: true }, paragraph );nt *nt * @param
{String} text Text data.nt * @param {Object} [attributes] Text
attributes.nt * @param
{module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment}
parentnt */ntappendText( text, attributes, parent ) {nttif ( attributes
instanceof DocumentFragment || attributes instanceof Element )
{ntttthis.insert( this.createText( text ), attributes, &#39;end&#39; );ntt}
else {ntttthis.insert( this.createText( text, attributes ), parent,
&#39;end&#39; );ntt}nt}nnt/**nt * Creates element and inserts it at the end
of the parent. You can optionally set attributes:nt *nt
*ttwriter.appendElement( &#39;paragraph&#39;, root );nt
*ttwriter.appendElement( &#39;paragraph&#39;, { &#39;alignment&#39;:
&#39;center&#39; }, root );nt *nt * @param {String} name Name of the
element.nt * @param {Object} [attributes] Elements attributes.nt * @param
{module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment}
parentnt */ntappendElement( name, attributes, parent ) {nttif ( attributes
instanceof DocumentFragment || attributes instanceof Element )
{ntttthis.insert( this.createElement( name ), attributes, &#39;end&#39;
);ntt} else {ntttthis.insert( this.createElement( name, attributes ),
parent, &#39;end&#39; );ntt}nt}nnt/**nt * Sets value of the attribute with
given key on a {@link module:engine/model/item~Item model item}nt * or on a
{@link module:engine/model/range~Range range}.nt *nt * @param {String} key
Attribute key.nt * @param {*} value Attribute new value.nt * @param
{module:engine/model/item~Item|module:engine/model/range~Range}
itemOrRangent * Model item or range on which the attribute will be set.nt
*/ntsetAttribute( key, value, itemOrRange )
{nttthis._assertWriterUsedCorrectly();nnttif ( itemOrRange instanceof Range
) {ntttsetAttributeOnRange( this, key, value, itemOrRange );ntt} else
{ntttsetAttributeOnItem( this, key, value, itemOrRange );ntt}nt}nnt/**nt *
Sets values of attributes on a {@link module:engine/model/item~Item model
item}nt * or on a {@link module:engine/model/range~Range range}.nt *nt
*ttwriter.setAttributes( {nt *ttt&#39;bold&#39;: true,nt
*ttt&#39;italic&#39;: truent *tt}, range );nt *nt * @param {Object}
attributes Attributes keys and values.nt * @param
{module:engine/model/item~Item|module:engine/model/range~Range}
itemOrRangent * Model item or range on which the attributes will be set.nt
*/ntsetAttributes( attributes, itemOrRange ) {nttfor ( const [ key, val ]
of toMap( attributes ) ) {ntttthis.setAttribute( key, val, itemOrRange
);ntt}nt}nnt/**nt * Removes an attribute with given key from a {@link
module:engine/model/item~Item model item}nt * or from a {@link
module:engine/model/range~Range range}.nt *nt * @param {String} key
Attribute key.nt * @param
{module:engine/model/item~Item|module:engine/model/range~Range}
itemOrRangent * Model item or range from which the attribute will be
removed.nt */ntremoveAttribute( key, itemOrRange )
{nttthis._assertWriterUsedCorrectly();nnttif ( itemOrRange instanceof Range
) {ntttsetAttributeOnRange( this, key, null, itemOrRange );ntt} else
{ntttsetAttributeOnItem( this, key, null, itemOrRange );ntt}nt}nnt/**nt *
Removes all attributes from all elements in the range or from the given
item.nt *nt * @param
{module:engine/model/item~Item|module:engine/model/range~Range}
itemOrRangent * Model item or range from which all attributes will be
removed.nt */ntclearAttributes( itemOrRange )
{nttthis._assertWriterUsedCorrectly();nnttconst removeAttributesFromItem =
item =&gt; {ntttfor ( const attribute of item.getAttributeKeys() )
{nttttthis.removeAttribute( attribute, item );nttt}ntt};nnttif ( !(
itemOrRange instanceof Range ) ) {ntttremoveAttributesFromItem( itemOrRange
);ntt} else {ntttfor ( const item of itemOrRange.getItems() )
{nttttremoveAttributesFromItem( item );nttt}ntt}nt}nnt/**nt * Moves all
items in the source range to the target position.nt *nt *ttwriter.move(
sourceRange, targetPosition );nt *nt * Instead of the target position you
can use parent and offset or define that range should be moved to the endnt
* or before or after chosen item:nt *nt * ttwriter.move( sourceRange,
paragraph, 5 ); // moves all items in the range to the paragraph at offset
5nt *ttwriter.move( sourceRange, blockquote, &#39;end&#39; ); // moves all
items in the range at the end of the blockquotent *ttwriter.move(
sourceRange, image, &#39;after&#39; ); // moves all items in the range
after the imagent *nt * These parameters works the same way as {@link
module:engine/model/position~Position.createAt}.nt *nt * Note that items
can be moved only within the same tree. It means that you can move items
within the same rootnt * (element or document fragment) or between {@link
module:engine/model/document~Document#roots documents roots},nt * but you
can not move items from document fragment to the document or from one
detached element to another. Usent * {@link
module:engine/model/writer~Writer#insert} in such cases.nt *nt * @param
{module:engine/model/range~Range} range Source range.nt * @param
{module:engine/model/item~Item|module:engine/model/position~Position}
itemOrPositionnt * @param
{Number|&#39;end&#39;|&#39;before&#39;|&#39;after&#39;} [offset=0] Offset
or one of the flags. Used only whennt * second parameter is a {@link
module:engine/model/item~Item model item}.nt */ntmove( range,
itemOrPosition, offset ) {nttthis._assertWriterUsedCorrectly();nnttif ( !(
range instanceof Range ) ) {nttt/**nttt * Invalid range to move.nttt *nttt
* @error writer-move-invalid-rangenttt */ntttthrow new CKEditorError(
&#39;writer-move-invalid-range: Invalid range to move.&#39; );ntt}nnttif (
!range.isFlat ) {nttt/**nttt * Range to move is not flat.nttt *nttt *
@error writer-move-range-not-flatnttt */ntttthrow new CKEditorError(
&#39;writer-move-range-not-flat: Range to move is not flat.&#39;
);ntt}nnttconst position = Position.createAt( itemOrPosition, offset
);nnttif ( !isSameTree( range.root, position.root ) ) {nttt/**nttt * Range
is going to be moved within not the same document. Please usenttt * {@link
module:engine/model/writer~Writer#insert insert} instead.nttt *nttt *
@error writer-move-different-documentnttt */ntttthrow new CKEditorError(
&#39;writer-move-different-document: Range is going to be moved between
different documents.&#39; );ntt}nnttconst delta = new
MoveDelta();nttthis.batch.addDelta( delta );nnttconst version =
range.root.document ? range.root.document.version : null;nnttconst
operation = new MoveOperation( range.start, range.end.offset -
range.start.offset, position, version );nttdelta.addOperation( operation
);nttthis.model.applyOperation( operation );nt}nnt/**nt * Removes given
model {@link module:engine/model/item~Item item} or {@link
module:engine/model/range~Range range}.nt *nt * @param
{module:engine/model/item~Item|module:engine/model/range~Range} itemOrRange
Model item or range to remove.nt */ntremove( itemOrRange )
{nttthis._assertWriterUsedCorrectly();nnttconst addRemoveDelta = (
position, howMany ) =&gt; {ntttconst delta = new
RemoveDelta();ntttthis.batch.addDelta( delta );nntttapplyRemoveOperation(
position, howMany, delta, this.model );ntt};nnttif ( itemOrRange instanceof
Range ) {nttt// The array is reversed, so the ranges to remove are in
correct order and do not have to be updated.ntttconst ranges =
itemOrRange.getMinimalFlatRanges().reverse();nntttfor ( const flat of
ranges ) {nttttaddRemoveDelta( flat.start, flat.end.offset -
flat.start.offset );nttt}ntt} else {ntttconst howMany = itemOrRange.is(
&#39;text&#39; ) ? itemOrRange.offsetSize : 1;nntttaddRemoveDelta(
Position.createBefore( itemOrRange ), howMany );ntt}nt}nnt/**nt * Merges
two siblings at the given position.nt *nt * Node before and after the
position have to be an element. Otherwise `writer-merge-no-element-before`
ornt * `writer-merge-no-element-after` error will be thrown.nt *nt * @param
{module:engine/model/position~Position} position Position of merge.nt
*/ntmerge( position ) {nttthis._assertWriterUsedCorrectly();nnttconst delta
= new MergeDelta();nttthis.batch.addDelta( delta );nnttconst nodeBefore =
position.nodeBefore;nttconst nodeAfter = position.nodeAfter;nnttif ( !(
nodeBefore instanceof Element ) ) {nttt/**nttt * Node before merge position
must be an element.nttt *nttt * @error writer-merge-no-element-beforenttt
*/ntttthrow new CKEditorError( &#39;writer-merge-no-element-before: Node
before merge position must be an element.&#39; );ntt}nnttif ( !( nodeAfter
instanceof Element ) ) {nttt/**nttt * Node after merge position must be an
element.nttt *nttt * @error writer-merge-no-element-afternttt */ntttthrow
new CKEditorError( &#39;writer-merge-no-element-after: Node after merge
position must be an element.&#39; );ntt}nnttconst positionAfter =
Position.createFromParentAndOffset( nodeAfter, 0 );nttconst positionBefore
= Position.createFromParentAndOffset( nodeBefore, nodeBefore.maxOffset
);nnttconst moveVersion = position.root.document ?
position.root.document.version : null;nnttconst move = new
MoveOperation(ntttpositionAfter,ntttnodeAfter.maxOffset,ntttpositionBefore,ntttmoveVersionntt);nnttmove.isSticky
= true;nttdelta.addOperation( move );nttthis.model.applyOperation( move
);nnttapplyRemoveOperation( position, 1, delta, this.model );nt}nnt/**nt *
Renames given element.nt *nt * @param {module:engine/model/element~Element}
element The element to rename.nt * @param {String} newName New element
name.nt */ntrename( element, newName )
{nttthis._assertWriterUsedCorrectly();nnttif ( !( element instanceof
Element ) ) {nttt/**nttt * Trying to rename an object which is not an
instance of Element.nttt *nttt * @error
writer-rename-not-element-instancenttt */ntttthrow new
CKEditorError(ntttt&#39;writer-rename-not-element-instance: Trying to
rename an object which is not an instance of
Element.&#39;nttt);ntt}nnttconst delta = new
RenameDelta();nttthis.batch.addDelta( delta );nnttconst version =
element.root.document ? element.root.document.version : null;nnttconst
renameOperation = new RenameOperation( Position.createBefore( element ),
element.name, newName, version );nttdelta.addOperation( renameOperation
);nttthis.model.applyOperation( renameOperation );nt}nnt/**nt * Splits
elements start from the given position and goes to the top of the model
tree as long as givennt * `limitElement` won&#39;t be reached. When
limitElement is not defined then only a parent of given position will be
split.nt *nt * The element needs to have a parent. It cannot be a root
element nor document fragment.nt * The `writer-split-element-no-parent`
error will be thrown if you try to split an element with no parent.nt *nt *
@param {module:engine/model/position~Position} position Position of
split.nt * @param {module:engine/model/node~Node} [limitElement] Stop
splitting when this element will be reached.nt * @returns {Object} result
Split result.nt * @returns {module:engine/model/position~Position}
result.position between split elements.nt * @returns
{module:engine/model/range~Range} result.range Range that stars from the
end of the first split element and andsnt * at the beginning of the first
copy element.nt */ntsplit( position, limitElement )
{nttthis._assertWriterUsedCorrectly();nnttlet splitElement =
position.parent;nnttif ( !splitElement.parent ) {nttt/**nttt * Element with
no parent can not be split.nttt *nttt * @error
writer-split-element-no-parentnttt */ntttthrow new CKEditorError(
&#39;writer-split-element-no-parent: Element with no parent can not be
split.&#39; );ntt}nntt// When limit element is not defined lets set
splitElement parent as limit.nttif ( !limitElement ) {ntttlimitElement =
splitElement.parent;ntt}nnttif ( !position.parent.getAncestors( {
includeSelf: true } ).includes( limitElement ) ) {ntttthrow new
CKEditorError( &#39;writer-split-invalid-limit-element: Limit element is
not a position ancestor.&#39; );ntt}nntt// We need to cache elements that
will be created as a result of the first split becausentt// we need to
create a range from the end of the first split element to the beginning of
thentt// first copy element. This should be handled by LiveRange but it
doesn&#39;t work on detached nodes.nttlet firstSplitElement,
firstCopyElement;nnttdo {ntttconst delta = new
SplitDelta();ntttthis.batch.addDelta( delta );nntttconst copy = new
Element( splitElement.name, splitElement.getAttributes() );ntttconst
insertVersion = splitElement.root.document ?
splitElement.root.document.version : null;nntttconst insert = new
InsertOperation(nttttPosition.createAfter( splitElement
),nttttcopy,nttttinsertVersionnttt);nntttdelta.addOperation( insert
);ntttthis.model.applyOperation( insert );nntttconst moveVersion =
insertVersion !== null ? insertVersion + 1 : null;nntttconst move = new
MoveOperation(nttttposition,nttttsplitElement.maxOffset -
position.offset,nttttPosition.createFromParentAndOffset( copy, 0
),nttttmoveVersionnttt);ntttmove.isSticky = true;nntttdelta.addOperation(
move );ntttthis.model.applyOperation( move );nnttt// Cache result of the
first split.ntttif ( !firstSplitElement &amp;&amp; !firstCopyElement )
{nttttfirstSplitElement = splitElement;nttttfirstCopyElement =
copy;nttt}nntttposition = Position.createBefore( copy );ntttsplitElement =
position.parent;ntt} while ( splitElement !== limitElement );nnttreturn
{ntttposition,ntttrange: new Range( Position.createAt( firstSplitElement,
&#39;end&#39; ), Position.createAt( firstCopyElement ) )ntt};nt}nnt/**nt *
Wraps given range with given element or with a new element with specified
name, if string has been passed.nt *nt * *Note:* range to wrap should be a
"flat range&quot; (see {@link module:engine/model/range~Range#isFlat}). If
not, error will be thrown.nt *nt * @param {module:engine/model/range~Range}
range Range to wrap.nt * @param
{module:engine/model/element~Element|String} elementOrString Element or
name of element to wrap the range with.nt */ntwrap( range, elementOrString
) {nttthis._assertWriterUsedCorrectly();nnttif ( !range.isFlat )
{nttt/**nttt * Range to wrap is not flat.nttt *nttt * @error
writer-wrap-range-not-flatnttt */ntttthrow new CKEditorError(
&#39;writer-wrap-range-not-flat: Range to wrap is not flat.&#39;
);ntt}nnttconst element = elementOrString instanceof Element ?
elementOrString : new Element( elementOrString );nnttif (
element.childCount &gt; 0 ) {nttt/**nttt * Element to wrap with is not
empty.nttt *nttt * @error writer-wrap-element-not-emptynttt */ntttthrow new
CKEditorError( &#39;writer-wrap-element-not-empty: Element to wrap with is
not empty.&#39; );ntt}nnttif ( element.parent !== null ) {nttt/**nttt *
Element to wrap with is already attached to a tree model.nttt *nttt *
@error writer-wrap-element-attachednttt */ntttthrow new CKEditorError(
&#39;writer-wrap-element-attached: Element to wrap with is already attached
to tree model.&#39; );ntt}nnttconst delta = new
WrapDelta();nttthis.batch.addDelta( delta );nnttconst insertVersion =
range.root.document ? range.root.document.version : null;nnttconst insert =
new InsertOperation( range.end, element, insertVersion
);nttdelta.addOperation( insert );nttthis.model.applyOperation( insert
);nnttconst moveVersion = insertVersion !== null ? insertVersion + 1 :
null;nnttconst targetPosition = Position.createFromParentAndOffset(
element, 0 );nttconst move = new
MoveOperation(ntttrange.start,ntttrange.end.offset -
range.start.offset,nttttargetPosition,ntttmoveVersionntt);nttdelta.addOperation(
move );nttthis.model.applyOperation( move );nt}nnt/**nt * Unwraps children
of the given element – all its children are moved before it and then the
element is removed.nt * Throws error if you try to unwrap an element which
does not have a parent.nt *nt * @param
{module:engine/model/element~Element} element Element to unwrap.nt
*/ntunwrap( element ) {nttthis._assertWriterUsedCorrectly();nnttif (
element.parent === null ) {nttt/**nttt * Trying to unwrap an element which
has no parent.nttt *nttt * @error writer-unwrap-element-no-parentnttt
*/ntttthrow new CKEditorError( &#39;writer-unwrap-element-no-parent: Trying
to unwrap an element which has no parent.&#39; );ntt}nnttconst delta = new
UnwrapDelta();nttthis.batch.addDelta( delta );nnttconst sourcePosition =
Position.createFromParentAndOffset( element, 0 );nttconst moveVersion =
sourcePosition.root.document ? sourcePosition.root.document.version :
null;nnttconst move = new
MoveOperation(ntttsourcePosition,ntttelement.maxOffset,ntttPosition.createBefore(
element ),ntttmoveVersionntt);nnttmove.isSticky =
true;nttdelta.addOperation( move );nttthis.model.applyOperation( move
);nnttapplyRemoveOperation( Position.createBefore( element ), 1, delta,
this.model );nt}nnt/**nt * Adds a {@link
module:engine/model/markercollection~Marker marker}. Marker is a named
range, which tracksnt * changes in the document and updates its range
automatically, when model tree changes.nt *nt * As the first parameter you
can set marker name.nt *nt * The required `options.usingOperation`
parameter lets you decide if the marker should be managed by operations or
not. Seent * {@link module:engine/model/markercollection~Marker marker
class description} to learn about the difference betweennt * markers
managed by operations and not-managed by operations.nt *nt * Create marker
directly base on marker&#39;s name:nt *nt * ttaddMarker( markerName, {
range, usingOperation: false } );nt *nt * Create marker using operation:nt
*nt * ttaddMarker( markerName, { range, usingOperation: true } );nt *nt *
Note: For efficiency reasons, it&#39;s best to create and keep as little
markers as possible.nt *nt * @see
module:engine/model/markercollection~Markernt * @param {String} name Name
of a marker to create - must be unique.nt * @param {Object} optionsnt *
@param {Boolean} options.usingOperation Flag indicated whether the marker
should be added by MarkerOperation.nt * See {@link
module:engine/model/markercollection~Marker#managedUsingOperations}.nt *
@param {module:engine/model/range~Range} options.range Marker range.nt *
@returns {module:engine/model/markercollection~Marker} Marker that was
set.nt */ntaddMarker( name, options )
{nttthis._assertWriterUsedCorrectly();nnttif ( !options || typeof
options.usingOperation != &#39;boolean&#39; ) {nttt/**nttt * The
options.usingOperations parameter is required when adding a new marker.nttt
*nttt * @error writer-addMarker-no-usingOperationsnttt */ntttthrow new
CKEditorError(ntttt&#39;writer-addMarker-no-usingOperations: The
options.usingOperations parameter is required when adding a new
marker.&#39;nttt);ntt}nnttconst usingOperation =
options.usingOperation;nttconst range = options.range;nnttif (
this.model.markers.has( name ) ) {nttt/**nttt * Marker with provided name
already exists.nttt *nttt * @error writer-addMarker-marker-existsnttt
*/ntttthrow new CKEditorError( &#39;writer-addMarker-marker-exists: Marker
with provided name already exists.&#39; );ntt}nnttif ( !range )
{nttt/**nttt * Range parameter is required when adding a new marker.nttt
*nttt * @error writer-addMarker-no-rangenttt */ntttthrow new CKEditorError(
&#39;writer-addMarker-no-range: Range parameter is required when adding a
new marker.&#39; );ntt}nnttif ( !usingOperation ) {ntttreturn
this.model.markers._set( name, range, usingOperation
);ntt}nnttapplyMarkerOperation( this, name, null, range );nnttreturn
this.model.markers.get( name );nt}nnt/**nt * Adds or updates a {@link
module:engine/model/markercollection~Marker marker}. Marker is a named
range, which tracksnt * changes in the document and updates its range
automatically, when model tree changes. Still, it is possible to change
thent * marker&#39;s range directly using this method.nt *nt * As the first
parameter you can set marker name or instance. If none of them is provided,
new marker, with a uniquent * name is created and returned.nt *nt * The
`options.usingOperation` parameter lets you change if the marker should be
managed by operations or not. Seent * {@link
module:engine/model/markercollection~Marker marker class description} to
learn about the difference betweennt * markers managed by operations and
not-managed by operations. It is possible to change this option for an
existing marker.nt * This is useful when a marker have been created earlier
and then later, it needs to be added to the document history.nt *nt *
Update marker directly base on marker&#39;s name:nt *nt * ttupdateMarker(
markerName, { range } );nt *nt * Update marker using operation:nt *nt *
ttupdateMarker( marker, { range, usingOperation: true } );nt *
ttupdateMarker( markerName, { range, usingOperation: true } );nt *nt *
Change marker&#39;s option (start using operations to manage it):nt *nt *
ttupdateMarker( marker, { usingOperation: true } );nt *nt * @see
module:engine/model/markercollection~Markernt * @param {String}
markerOrName Name of a marker to update, or a marker instance.nt * @param
{Object} optionsnt * @param {module:engine/model/range~Range}
[options.range] Marker range to update.nt * @param {Boolean}
[options.usingOperation] Flag indicated whether the marker should be added
by MarkerOperation.nt * See {@link
module:engine/model/markercollection~Marker#managedUsingOperations}.nt
*/ntupdateMarker( markerOrName, options )
{nttthis._assertWriterUsedCorrectly();nnttconst markerName = typeof
markerOrName == &#39;string&#39; ? markerOrName :
markerOrName.name;nnttconst currentMarker = this.model.markers.get(
markerName );nnttif ( !currentMarker ) {nttt/**nttt * Marker with provided
name does not exists.nttt *nttt * @error
writer-updateMarker-marker-not-existsnttt */ntttthrow new CKEditorError(
&#39;writer-updateMarker-marker-not-exists: Marker with provided name does
not exists.&#39; );ntt}nnttconst newRange = options &amp;&amp;
options.range;nttconst hasUsingOperationDefined = !!options &amp;&amp;
typeof options.usingOperation == &#39;boolean&#39;;nnttif (
!hasUsingOperationDefined &amp;&amp; !newRange ) {nttt/**nttt * One of
options is required - provide range or usingOperations.nttt *nttt * @error
writer-updateMarker-wrong-optionsnttt */ntttthrow new CKEditorError(
&#39;writer-updateMarker-wrong-options: One of options is required -
provide range or usingOperations.&#39; );ntt}nnttif (
hasUsingOperationDefined &amp;&amp; options.usingOperation !==
currentMarker.managedUsingOperations ) {nttt// The marker type is changed
so it&#39;s necessary to create proper operations.ntttif (
options.usingOperation ) {ntttt// If marker changes to a managed one treat
this as synchronizing existing marker.ntttt// If marker changes to a
managed one treat this as synchronizing existing marker.ntttt// Create
`MarkerOperation` with `oldRange` set to `null`, so reverse operation will
remove the marker.nttttapplyMarkerOperation( this, markerName, null,
newRange ? newRange : currentMarker.getRange() );nttt} else {ntttt// If
marker changes to a marker that do not use operations then we need to
create additional operationntttt// that removes that marker
first.nttttconst currentRange =
currentMarker.getRange();nttttapplyMarkerOperation( this, markerName,
currentRange, null );nntttt// Although not managed the marker itself should
stay in model and its range should be preserver or changed to passed
range.nttttthis.model.markers._set( markerName, newRange ? newRange :
currentRange );nttt}nntttreturn;ntt}nntt// Marker&#39;s type doesn&#39;t
change so update it accordingly.nttif (
currentMarker.managedUsingOperations ) {ntttapplyMarkerOperation( this,
markerName, currentMarker.getRange(), newRange );ntt} else
{ntttthis.model.markers._set( markerName, newRange );ntt}nt}nnt/**nt *
Removes given {@link module:engine/model/markercollection~Marker marker} or
marker with given name.nt * The marker is removed accordingly to how it has
been created, so if the marker was created using operation,nt * it will be
destroyed using operation.nt *nt * @param
{module:engine/model/markercollection~Marker|String} markerOrName Marker or
marker name to remove.nt */ntremoveMarker( markerOrName )
{nttthis._assertWriterUsedCorrectly();nnttconst name = typeof markerOrName
== &#39;string&#39; ? markerOrName : markerOrName.name;nnttif (
!this.model.markers.has( name ) ) {nttt/**nttt * Trying to remove marker
which does not exist.nttt *nttt * @error writer-removeMarker-no-markernttt
*/ntttthrow new CKEditorError( &#39;writer-removeMarker-no-marker: Trying
to remove marker which does not exist.&#39; );ntt}nnttconst marker =
this.model.markers.get( name );nnttif ( !marker.managedUsingOperations )
{ntttthis.model.markers._remove( name );nntttreturn;ntt}nnttconst oldRange
= marker.getRange();nnttapplyMarkerOperation( this, name, oldRange, null
);nt}nnt/**nt * Sets this selection&#39;s ranges and direction to the
specified location based on the givennt * {@link
module:engine/model/selection~Selection selection}, {@link
module:engine/model/position~Position position},nt * {@link
module:engine/model/node~Node node}, {@link
module:engine/model/position~Position position},nt * {@link
module:engine/model/range~Range range}, an iterable of {@link
module:engine/model/range~Range ranges} or null.nt *nt *tt// Sets selection
to the given range.nt *ttconst range = new Range( start, end );nt
*ttwriter.setSelection( range );nt *nt *tt// Sets selection to given
ranges.nt * ttconst ranges = [ new Range( start1, end2 ), new Range( star2,
end2 ) ];nt *ttwriter.setSelection( range );nt *nt *tt// Sets selection to
other selection.nt *ttconst otherSelection = new Selection();nt
*ttwriter.setSelection( otherSelection );nt *nt * tt// Sets selection to
the given document selection.nt *ttconst documentSelection = new
DocumentSelection( doc );nt *ttwriter.setSelection( documentSelection );nt
*nt * tt// Sets collapsed selection at the given position.nt *ttconst
position = new Position( root, path );nt *ttwriter.setSelection( position
);nt *nt * tt// Sets collapsed selection at the position of the given node
and an offset.nt *ttwriter.setSelection( paragraph, offset );nt *nt *
Creates a range inside an {@link module:engine/model/element~Element
element} which starts before the first child ofn t * that element and ends
after the last child of that element.nt *nt *ttwriter.setSelection(
paragraph, &#39;in&#39; );nt *nt * Creates a range on an {@link
module:engine/model/item~Item item} which starts before the item and ends
just after the item.nt *nt *ttwriter.setSelection( paragraph, &#39;on&#39;
);nt *nt * tt// Removes all selection&#39;s ranges.nt
*ttwriter.setSelection( null );nt *nt * `Writer#setSelection()` allow
passing additional options (`backward`) as the last argument.nt *nt * tt//
Sets selection as backward.nt *ttwriter.setSelection( range, { backward:
true } );nt *nt * Throws `writer-incorrect-use` error when the writer is
used outside the `change()` block.nt *nt * @param
{module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection|nt
* module:engine/model/position~Position|module:engine/model/node~Node|nt *
Iterable.&lt;module:engine/model/range~Range&gt;|module:engine/model/range~Range|null}
selectablent * @param
{Number|&#39;before&#39;|&#39;end&#39;|&#39;after&#39;|&#39;on&#39;|&#39;in&#39;}
[placeOrOffset] Sets place or offset of the selection.nt * @param {Object}
[options]nt * @param {Boolean} [options.backward] Sets this selection
instance to be backward.nt */ntsetSelection( selectable, placeOrOffset,
options )
{nttthis._assertWriterUsedCorrectly();nnttthis.model.document.selection._setTo(
selectable, placeOrOffset, options );nt}nnt/**nt * Moves {@link
module:engine/model/documentselection~DocumentSelection#focus} to the
specified location.nt *nt * The location can be specified in the same form
as {@link module:engine/model/position~Position.createAt} parameters.nt *nt
* @param
{module:engine/model/item~Item|module:engine/model/position~Position}
itemOrPositionnt * @param
{Number|&#39;end&#39;|&#39;before&#39;|&#39;after&#39;} [offset=0] Offset
or one of the flags. Used only whennt * first parameter is a {@link
module:engine/model/item~Item model item}.nt */ntsetSelectionFocus(
itemOrPosition, offset )
{nttthis._assertWriterUsedCorrectly();nnttthis.model.document.selection._setFocus(
itemOrPosition, offset );nt}nnt/**nt * Sets attribute(s) on the selection.
If attribute with the same key already is set, it&#39;s value is
overwritten.nt *nt * Using key and value pair:nt *nt *
twriter.setSelectionAttribute( &#39;italic&#39;, true );nt *nt * Using
key-value object:nt *nt * twriter.setSelectionAttribute( { italic: true,
bold: false } );nt *nt * Using iterable object:nt *nt *
twriter.setSelectionAttribute( new Map( [ [ &#39;italic&#39;, true ] ] )
);nt *nt * @param {String|Object|Iterable.&lt;*&gt;} keyOrObjectOrIterable
Key of the attribute to setnt * or object / iterable of key - value
attribute pairs.nt * @param {*} [value] Attribute value.nt
*/ntsetSelectionAttribute( keyOrObjectOrIterable, value )
{nttthis._assertWriterUsedCorrectly();nnttif ( typeof keyOrObjectOrIterable
=== &#39;string&#39; ) {ntttthis._setSelectionAttribute(
keyOrObjectOrIterable, value );ntt} else {ntttfor ( const [ key, value ] of
toMap( keyOrObjectOrIterable ) ) {nttttthis._setSelectionAttribute( key,
value );nttt}ntt}nt}nnt/**nt * Removes attribute(s) with given key(s) from
the selection.nt *nt * Using keynt *nt * twriter.removeSelectionAttribute(
&#39;italic&#39; );nt *nt * Using iterable of keysnt *nt *
twriter.removeSelectionAttribute( [ &#39;italic&#39;, &#39;bold&#39; ] );nt
*nt * @param {String|Iterable.&lt;String&gt;} keyOrIterableOfKeys Key of
the attribute to remove or an iterable of attribute keys to remove.nt
*/ntremoveSelectionAttribute( keyOrIterableOfKeys )
{nttthis._assertWriterUsedCorrectly();nnttif ( typeof keyOrIterableOfKeys
=== &#39;string&#39; ) {ntttthis._removeSelectionAttribute(
keyOrIterableOfKeys );ntt} else {ntttfor ( const key of keyOrIterableOfKeys
) {nttttthis._removeSelectionAttribute( key );nttt}ntt}nt}nnt/**nt *
Temporarily changes the {@link
module:engine/model/documentselection~DocumentSelection#isGravityOverridden
gravity}nt * of the selection from left to right.nt *nt * The gravity
defines from which direction the selection inherits its attributes. If
it&#39;s the default left gravity,nt * then the selection (after being
moved by the user) inherits attributes from its left-hand side.nt * This
method allows to temporarily override this behavior by forcing the gravity
to the right.nt *nt * For the following model fragment:nt *nt *tt&lt;$text
bold=&quot;true&quot;
linkHref=&quot;url&quot;&gt;bar[]&lt;/$text&gt;&lt;$text
bold=&quot;true&quot;&gt;biz&lt;/$text&gt;nt *nt * * Default gravity:
selection will have the `bold` and `linkHref` attributes.nt * * Overridden
gravity: selection will have `bold` attribute.nt *nt * *Note*: It returns
an unique identifier which is required to restore the gravity. It
guarantees the symmetrynt * of the process.nt *nt * @returns {String} The
unique id which allows restoring the gravity.nt
*/ntoverrideSelectionGravity() {nttreturn
this.model.document.selection._overrideGravity();nt}nnt/**nt * Restores
{@link ~Writer#overrideSelectionGravity} gravity to default.nt *nt *
Restoring the gravity is only possible using the unique identifier returned
bynt * {@link ~Writer#overrideSelectionGravity}. Note that the gravity
remains overridden as long as won&#39;t be restorednt * the same number of
times it was overridden.nt *nt * @param {String} uid The unique id returned
by {@link ~Writer#overrideSelectionGravity}.nt */ntrestoreSelectionGravity(
uid ) {nttthis.model.document.selection._restoreGravity( uid );nt}nnt/**nt
* @privatent * @param {String} key Key of the attribute to remove.nt *
@param {*} value Attribute value.nt */nt_setSelectionAttribute( key, value
) {nttconst selection = this.model.document.selection;nntt// Store
attribute in parent element if the selection is collapsed in an empty
node.nttif ( selection.isCollapsed &amp;&amp;
selection.anchor.parent.isEmpty ) {ntttconst storeKey =
DocumentSelection._getStoreAttributeKey( key );nntttthis.setAttribute(
storeKey, value, selection.anchor.parent );ntt}nnttselection._setAttribute(
key, value );nt}nnt/**nt * @privatent * @param {String} key Key of the
attribute to remove.nt */nt_removeSelectionAttribute( key ) {nttconst
selection = this.model.document.selection;nntt// Remove stored attribute
from parent element if the selection is collapsed in an empty node.nttif (
selection.isCollapsed &amp;&amp; selection.anchor.parent.isEmpty )
{ntttconst storeKey = DocumentSelection._getStoreAttributeKey( key
);nntttthis.removeAttribute( storeKey, selection.anchor.parent
);ntt}nnttselection._removeAttribute( key );nt}nnt/**nt * Throws
`writer-detached-writer-tries-to-modify-model` error when the writer is
used outside of the `change()` block.nt *nt * @privatent
*/nt_assertWriterUsedCorrectly() {ntt/**ntt * Trying to use a writer
outside a {@link module:engine/model/model~Model#change `change()` orntt *
{@link module:engine/model/model~Model#enqueueChange `enqueueChange()`}
blocks.ntt *ntt * The writer can only be used inside these blocks which
ensures that the modelntt * can only be changed during such
"sessions&quot;.ntt *ntt * @error writer-incorrect-usentt */nttif (
this.model._currentWriter !== this ) {ntttthrow new CKEditorError(
&#39;writer-incorrect-use: Trying to use a writer outside the change()
block.&#39; );ntt}nt}n}nn// Sets given attribute to each node in given
range. When attribute value is null then attribute will be removed.n//n//
Because attribute operation needs to have the same attribute value on the
whole range, this function splitsn// the range into smaller parts.n//n//
@privaten// @param {module:engine/model/writer~Writer} writern// @param
{String} key Attribute key.n// @param {*} value Attribute new value.n//
@param {module:engine/model/range~Range} range Model range on which the
attribute will be set.nfunction setAttributeOnRange( writer, key, value,
range ) {ntconst delta = new AttributeDelta();ntconst model =
writer.model;ntconst doc = model.document;nnt// Position of the last split,
the beginning of the new range.ntlet lastSplitPosition = range.start;nnt//
Currently position in the scanning range. Because we need value after the
position, it is not a currentnt// position of the iterator but the previous
one (we need to iterate one more time to get the value after).ntlet
position;nnt// Value before the currently position.ntlet valueBefore;nnt//
Value after the currently position.ntlet valueAfter;nntfor ( const val of
range ) {nttvalueAfter = val.item.getAttribute( key );nntt// At the first
run of the iterator the position in undefined. We also do not have a
valueBefore, butntt// because valueAfter may be null, valueBefore may be
equal valueAfter ( undefined == null ).nttif ( position &amp;&amp;
valueBefore != valueAfter ) {nttt// if valueBefore == value there is
nothing to change, so we add operation only if these values are
different.ntttif ( valueBefore != value )
{nttttaddOperation();nttt}nntttlastSplitPosition =
position;ntt}nnttposition = val.nextPosition;nttvalueBefore =
valueAfter;nt}nnt// Because position in the loop is not the iterator
position (see let position comment), the last position innt// the while
loop will be last but one position in the range. We need to check the last
position manually.ntif ( position instanceof Position &amp;&amp; position
!= lastSplitPosition &amp;&amp; valueBefore != value )
{nttaddOperation();nt}nntfunction addOperation() {ntt// Add delta to the
batch only if there is at least operation in the delta. Add delta only
once.nttif ( delta.operations.length === 0 ) {ntttwriter.batch.addDelta(
delta );ntt}nnttconst range = new Range( lastSplitPosition, position
);nttconst version = range.root.document ? doc.version : null;nttconst
operation = new AttributeOperation( range, key, valueBefore, value, version
);nnttdelta.addOperation( operation );nttmodel.applyOperation( operation
);nt}n}nn// Sets given attribute to the given node. When attribute value is
null then attribute will be removed.n//n// @privaten// @param
{module:engine/model/writer~Writer} writern// @param {String} key Attribute
key.n// @param {*} value Attribute new value.n// @param
{module:engine/model/item~Item} item Model item on which the attribute will
be set.nfunction setAttributeOnItem( writer, key, value, item ) {ntconst
model = writer.model;ntconst doc = model.document;ntconst previousValue =
item.getAttribute( key );ntlet range, operation;nntif ( previousValue !=
value ) {nttconst isRootChanged = item.root === item;nnttconst delta =
isRootChanged ? new RootAttributeDelta() : new
AttributeDelta();nttwriter.batch.addDelta( delta );nnttif ( isRootChanged )
{nttt// If we change attributes of root element, we have to use
`RootAttributeOperation`.ntttconst version = item.document ? doc.version :
null;nntttoperation = new RootAttributeOperation( item, key, previousValue,
value, version );ntt} else {ntttif ( item.is( &#39;element&#39; ) )
{ntttt// If we change the attribute of the element, we do not want to
change attributes of its children, sontttt// the end of the range cannot be
after the closing tag, it should be inside that element, before any
ofntttt// it&#39;s children, so the range will contain only the opening
tag.nttttrange = new Range( Position.createBefore( item ),
Position.createFromParentAndOffset( item, 0 ) );nttt} else {ntttt// If
`item` is text proxy, we create a range from the beginning to the end of
that text proxy, to changentttt// all characters represented by
it.nttttrange = new Range( Position.createBefore( item ),
Position.createAfter( item ) );nttt}nntttconst version =
range.root.document ? doc.version : null;nntttoperation = new
AttributeOperation( range, key, previousValue, value, version
);ntt}nnttdelta.addOperation( operation );nttmodel.applyOperation(
operation );nt}n}nn// Creates and applies marker operation to {@link
module:engine/model/delta/delta~Delta delta}.n//n// @privaten// @param
{module:engine/model/writer~Writer} writern// @param {String} name Marker
name.n// @param {module:engine/model/range~Range} oldRange Marker range
before the change.n// @param {module:engine/model/range~Range} newRange
Marker range after the change.nfunction applyMarkerOperation( writer, name,
oldRange, newRange ) {ntconst model = writer.model;ntconst doc =
model.document;ntconst delta = new MarkerDelta();nntconst operation = new
MarkerOperation( name, oldRange, newRange, model.markers, doc.version
);nntwriter.batch.addDelta( delta );ntdelta.addOperation( operation
);ntmodel.applyOperation( operation );n}nn// Creates `RemoveOperation` or
`DetachOperation` that removes `howMany` nodes starting from `position`.n//
The operation will be applied on given model instance and added to given
delta instance.n//n// @privaten// @param
{module:engine/model/position~Position} position Position from which nodes
are removed.n// @param {Number} howMany Number of nodes to remove.n//
@param {module:engine/model/delta~Delta} delta Delta to add new operation
to.n// @param {module:engine/model/model~Model} model Model instance on
which operation will be applied.nfunction applyRemoveOperation( position,
howMany, delta, model ) {ntlet operation;nntif ( position.root.document )
{nttconst doc = model.document;nttconst graveyardPosition = new Position(
doc.graveyard, [ 0 ] );nnttoperation = new RemoveOperation( position,
howMany, graveyardPosition, doc.version );nt} else {nttoperation = new
DetachOperation( position, howMany );nt}nntdelta.addOperation( operation
);ntmodel.applyOperation( operation );n}nn// Returns `true` if both root
elements are the same element or both are documents root elements.n//n//
Elements in the same tree can be moved (for instance you can move element
form one documents root to another, orn// within the same document
fragment), but when element supposed to be moved from document fragment to
the document, orn// to another document it should be removed and inserted
to avoid problems with OT. This is because features like undo orn//
collaboration may track changes on the document but ignore changes on
detached fragments and should not getn// unexpected `move`
operation.nfunction isSameTree( rootA, rootB ) {nt// If it is the same root
this is the same tree.ntif ( rootA === rootB ) {nttreturn true;nt}nnt// If
both roots are documents root it is operation within the document what we
still treat as the same tree.ntif ( rootA instanceof RootElement &amp;&amp;
rootB instanceof RootElement ) {nttreturn true;nt}nntreturn
false;n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/writer.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module engine/model/differn */nnimport Position from
&#39;./position&#39;;nimport Range from &#39;./range&#39;;nn/**n *
Calculates the difference between two model states.n *n * Receives
operations that are to be applied on the model document. Marks parts of the
model document tree whichn * are changed and saves the state of these
elements before the change. Then, it compares saved elements with then *
changed elements, after all changes are applied on the model document.
Calculates the diff between savedn * elements and new ones and returns a
change set.n */nexport default class Differ {nt/**nt * Creates a `Differ`
instance.nt *nt * @param
{module:engine/model/markercollection~MarkerCollection} markerCollection
Model&#39;s marker collection.nt */ntconstructor( markerCollection )
{ntt/**ntt * Reference to the model&#39;s marker collection.ntt *ntt *
@privatentt * @type
{module:engine/model/markercollection~MarkerCollection}ntt
*/nttthis._markerCollection = markerCollection;nntt/**ntt * A map that
stores changes that happened in a given element.ntt *ntt * The keys of the
map are references to the model elements.ntt * The values of the map are
arrays with changes that were done on this element.ntt *ntt * @privatentt *
@type {Map}ntt */nttthis._changesInElement = new Map();nntt/**ntt * A map
that stores "element&#39;s children snapshots&quot;. A snapshot is
representing children of a given element beforentt * the first change was
applied on that element. Snapshot items are objects with two properties:
`name`,ntt * containing the element name (or `&#39;$text&#39;` for a text
node) and `attributes` which is a map of the node&#39;s attributes.ntt *ntt
* @privatentt * @type {Map}ntt */nttthis._elementSnapshots = new
Map();nntt/**ntt * A map that stores all changed markers.ntt *ntt * The
keys of the map are marker names.ntt * The values of the map are objects
with the `oldRange` and `newRange` properties. They store the marker
rangentt * state before and after the change.ntt *ntt * @privatentt * @type
{Map}ntt */nttthis._changedMarkers = new Map();nntt/**ntt * Stores the
number of changes that were processed. Used to order the changes
chronologically. It is importantntt * when changes are sorted.ntt *ntt *
@privatentt * @type {Number}ntt */nttthis._changeCount = 0;nntt/**ntt * For
efficiency purposes, `Differ` stores the change set returned by the differ
after {@link getChanges} call.ntt * Cache is reset each time a new
operation is buffered. If the cache has not been reset, {@link getChanges}
willntt * return the cached value instead of calculating it again.ntt *ntt
* This property stores those changes that did not take place in graveyard
root.ntt *ntt * @privatentt * @type {Array.&lt;Object&gt;|null}ntt
*/nttthis._cachedChanges = null;nntt/**ntt * For efficiency purposes,
`Differ` stores the change set returned by the differ after the {@link
getChanges} call.ntt * The cache is reset each time a new operation is
buffered. If the cache has not been reset, {@link getChanges} willntt *
return the cached value instead of calculating it again.ntt *ntt * This
property stores all changes evaluated by `Differ`, including those that
took place in the graveyard.ntt *ntt * @privatentt * @type
{Array.&lt;Object&gt;|null}ntt */nttthis._cachedChangesWithGraveyard =
null;nt}nnt/**nt * Informs whether there are any changes buffered in
`Differ`.nt *nt * @readonlynt * @type {Boolean}nt */ntget isEmpty()
{nttreturn this._changesInElement.size == 0 &amp;&amp;
this._changedMarkers.size == 0;nt}nnt/**nt * Buffers a given operation. An
operation has to be buffered before it is executed.nt *nt * Operation type
is checked and it is checked which nodes it will affect. These nodes are
then stored in `Differ`nt * in the state before the operation is
executed.nt *nt * @param
{module:engine/model/operation/operation~Operation} operation An operation
to buffer.nt */ntbufferOperation( operation ) {nttswitch ( operation.type )
{ntttcase &#39;insert&#39;: {nttttif ( this._isInInsertedElement(
operation.position.parent ) ) {ntttttreturn;ntttt}nnttttthis._markInsert(
operation.position.parent, operation.position.offset,
operation.nodes.maxOffset );nnttttbreak;nttt}ntttcase
&#39;addAttribute&#39;:ntttcase &#39;removeAttribute&#39;:ntttcase
&#39;changeAttribute&#39;: {nttttfor ( const item of
operation.range.getItems() ) {ntttttif ( this._isInInsertedElement(
item.parent ) ) {nttttttcontinue;nttttt}nntttttthis._markAttribute( item
);ntttt}nnttttbreak;nttt}ntttcase &#39;remove&#39;:ntttcase
&#39;move&#39;:ntttcase &#39;reinsert&#39;: {nttttconst
sourceParentInserted = this._isInInsertedElement(
operation.sourcePosition.parent );nttttconst targetParentInserted =
this._isInInsertedElement( operation.targetPosition.parent );nnttttif (
!sourceParentInserted ) {ntttttthis._markRemove(
operation.sourcePosition.parent, operation.sourcePosition.offset,
operation.howMany );ntttt}nnttttif ( !targetParentInserted )
{ntttttthis._markInsert( operation.targetPosition.parent,
operation.getMovedRangeStart().offset, operation.howMany
);ntttt}nnttttbreak;nttt}ntttcase &#39;rename&#39;: {nttttif (
this._isInInsertedElement( operation.position.parent ) )
{ntttttreturn;ntttt}nnttttthis._markRemove( operation.position.parent,
operation.position.offset, 1 );nttttthis._markInsert(
operation.position.parent, operation.position.offset, 1 );nnttttconst range
= Range.createFromPositionAndShift( operation.position, 1 );nnttttfor (
const marker of this._markerCollection.getMarkersIntersectingRange( range )
) {ntttttconst markerRange =
marker.getRange();nntttttthis.bufferMarkerChange( marker.name, markerRange,
markerRange );ntttt}nnttttbreak;nttt}ntt}nntt// Clear cache after each
buffered operation as it is no longer valid.nttthis._cachedChanges =
null;nt}nnt/**nt * Buffers marker change.nt *nt * @param {String}
markerName The name of the marker that changed.nt * @param
{module:engine/model/range~Range|null} oldRange Marker range before the
change or `null` if the marker has justnt * been created.nt * @param
{module:engine/model/range~Range|null} newRange Marker range after the
change or `null` if the marker was removed.nt */ntbufferMarkerChange(
markerName, oldRange, newRange ) {nttconst buffered =
this._changedMarkers.get( markerName );nnttif ( !buffered )
{ntttthis._changedMarkers.set( markerName,
{nttttoldRange,nttttnewRangenttt} );ntt} else {ntttbuffered.newRange =
newRange;nntttif ( buffered.oldRange == null &amp;&amp; buffered.newRange
== null ) {ntttt// The marker is going to be removed (`newRange == null`)
but it did not exist before the first buffered changentttt//
(`buffered.oldRange == null`). In this case, do not keep the marker in
buffer at all.nttttthis._changedMarkers.delete( markerName
);nttt}ntt}nt}nnt/**nt * Returns all markers that should be removed as a
result of buffered changes.nt *nt * @returns {Array.&lt;Object&gt;} Markers
to remove. Each array item is an object containing the `name` and `range`
properties.nt */ntgetMarkersToRemove() {nttconst result = [];nnttfor (
const [ name, change ] of this._changedMarkers ) {ntttif ( change.oldRange
!= null ) {nttttresult.push( { name, range: change.oldRange }
);nttt}ntt}nnttreturn result;nt}nnt/**nt * Returns all markers which should
be added as a result of buffered changes.nt *nt * @returns
{Array.&lt;Object&gt;} Markers to add. Each array item is an object
containing the `name` and `range` properties.nt */ntgetMarkersToAdd()
{nttconst result = [];nnttfor ( const [ name, change ] of
this._changedMarkers ) {ntttif ( change.newRange != null )
{nttttresult.push( { name, range: change.newRange } );nttt}ntt}nnttreturn
result;nt}nnt/**nt * Calculates the diff between the old model tree state
(the state before the first buffered operations since the last {@link
reset}nt * call) and the new model tree state (actual one). It should be
called after all buffered operations are executed.nt *nt * The diff set is
returned as an array of diff items, each describing a change done on the
model. The items are sorted bynt * the position on which the change
happened. If a position {@link
module:engine/model/position~Position#isBefore is before}nt * another one,
it will be on an earlier index in the diff set.nt *nt * Because calculating
the diff is a costly operation, the result is cached. If no new operation
was buffered since thent * previous {@link getChanges} call, the next call
will return the cached value.nt *nt * @param {Object} options Additional
options.nt * @param {Boolean} [options.includeChangesInGraveyard=false] If
set to `true`, also changes that happenednt * in the graveyard root will be
returned. By default, changes in the graveyard root are not returned.nt *
@returns {Array.&lt;Object&gt;} Diff between the old and the new model tree
state.nt */ntgetChanges( options = { includeChangesInGraveyard: false } )
{ntt// If there are cached changes, just return them instead of calculating
changes again.nttif ( this._cachedChanges ) {ntttif (
options.includeChangesInGraveyard ) {nttttreturn
this._cachedChangesWithGraveyard.slice();nttt} else {nttttreturn
this._cachedChanges.slice();nttt}ntt}nntt// Will contain returned
results.nttconst diffSet = [];nntt// Check all changed elements.nttfor (
const element of this._changesInElement.keys() ) {nttt// Get changes for
this element and sort them.ntttconst changes = this._changesInElement.get(
element ).sort( ( a, b ) =&gt; {nttttif ( a.offset === b.offset ) {ntttttif
( a.type != b.type ) {ntttttt// If there are multiple changes at the same
position, "remove&quot; change should be first.ntttttt// If the order is
different, for example, we would first add some nodes and then removed
themntttttt// (instead of the nodes that we should remove).nttttttreturn
a.type == &#39;remove&#39; ? -1 : 1;nttttt}nntttttreturn
0;ntttt}nnttttreturn a.offset &lt; b.offset ? -1 : 1;nttt} );nnttt// Get
children of this element before any change was applied on it.ntttconst
snapshotChildren = this._elementSnapshots.get( element );nttt// Get
snapshot of current element&#39;s children.ntttconst elementChildren =
_getChildrenSnapshot( element.getChildren() );nnttt// Generate actions
basing on changes done on element.ntttconst actions =
_generateActionsFromChanges( snapshotChildren.length, changes );nntttlet i
= 0; // Iterator in `elementChildren` array – iterates through current
children of element.ntttlet j = 0; // Iterator in `snapshotChildren` array
– iterates through old children of element.nnttt// Process every
action.ntttfor ( const action of actions ) {nttttif ( action ===
&#39;i&#39; ) {nttttt// Generate diff item for this element and insert it
into the diff set.ntttttdiffSet.push( this._getInsertDiff( element, i,
elementChildren[ i ].name ) );nnttttti++;ntttt} else if ( action ===
&#39;r&#39; ) {nttttt// Generate diff item for this element and insert it
into the diff set.ntttttdiffSet.push( this._getRemoveDiff( element, i,
snapshotChildren[ j ].name ) );nntttttj++;ntttt} else if ( action ===
&#39;a&#39; ) {nttttt// Take attributes from saved and current
children.ntttttconst elementAttributes = elementChildren[ i
].attributes;ntttttconst snapshotAttributes = snapshotChildren[ j
].attributes;ntttttlet range;nntttttif ( elementChildren[ i ].name ==
&#39;$text&#39; ) {nttttttrange = Range.createFromParentsAndOffsets(
element, i, element, i + 1 );nttttt} else {nttttttconst index =
element.offsetToIndex( i );nttttttrange =
Range.createFromParentsAndOffsets( element, i, element.getChild( index ), 0
);nttttt}nnttttt// Generate diff items for this change (there might be
multiple attributes changed andnttttt// there is a single diff for each of
them) and insert them into the diff set.ntttttdiffSet.push(
…this._getAttributesDiff( range, snapshotAttributes, elementAttributes )
);nnttttti++;ntttttj++;ntttt} else {nttttt// `action` is &#39;equal&#39;.
Child not changed.nttttti++;ntttttj++;ntttt}nttt}ntt}nntt// Then, sort the
changes by the position (change at position before other changes is
first).nttdiffSet.sort( ( a, b ) =&gt; {nttt// If the change is in
different root, we don&#39;t care much, but we&#39;d like to have all
changes in givennttt// root "together&quot; in the array. So let&#39;s just
sort them by the root name. It does not matter which rootnttt// will be
processed first.ntttif ( a.position.root != b.position.root ) {nttttreturn
a.position.root.rootName &lt; b.position.root.rootName ? -1 :
1;nttt}nnttt// If change happens at the same position…ntttif (
a.position.isEqual( b.position ) ) {ntttt// Keep chronological order of
operations.nttttreturn a.changeCount &lt; b.changeCount ? -1 :
1;nttt}nnttt// If positions differ, position "on the left&quot; should be
earlier in the result.ntttreturn a.position.isBefore( b.position ) ? -1 :
1;ntt} );nntt// Glue together multiple changes (mostly on text
nodes).nttfor ( let i = 1; i &lt; diffSet.length; i++ ) {ntttconst prevDiff
= diffSet[ i - 1 ];ntttconst thisDiff = diffSet[ i ];nnttt// Glue remove
changes if they happen on text on same position.ntttconst
isConsecutiveTextRemove =nttttprevDiff.type == &#39;remove&#39; &amp;&amp;
thisDiff.type == &#39;remove&#39; &amp;&amp;nttttprevDiff.name ==
&#39;$text&#39; &amp;&amp; thisDiff.name == &#39;$text&#39;
&amp;&amp;nttttprevDiff.position.isEqual( thisDiff.position );nnttt// Glue
insert changes if they happen on text on consecutive fragments.ntttconst
isConsecutiveTextAdd =nttttprevDiff.type == &#39;insert&#39; &amp;&amp;
thisDiff.type == &#39;insert&#39; &amp;&amp;nttttprevDiff.name ==
&#39;$text&#39; &amp;&amp; thisDiff.name == &#39;$text&#39;
&amp;&amp;nttttprevDiff.position.parent == thisDiff.position.parent
&amp;&amp;nttttprevDiff.position.offset + prevDiff.length ==
thisDiff.position.offset;nnttt// Glue attribute changes if they happen on
consecutive fragments and have same key, old value and new value.ntttconst
isConsecutiveAttributeChange =nttttprevDiff.type == &#39;attribute&#39;
&amp;&amp; thisDiff.type == &#39;attribute&#39;
&amp;&amp;nttttprevDiff.position.parent == thisDiff.position.parent
&amp;&amp;nttttprevDiff.range.isFlat &amp;&amp; thisDiff.range.isFlat
&amp;&amp;nttttprevDiff.position.offset + prevDiff.length ==
thisDiff.position.offset &amp;&amp;nttttprevDiff.attributeKey ==
thisDiff.attributeKey &amp;&amp;nttttprevDiff.attributeOldValue ==
thisDiff.attributeOldValue &amp;&amp;nttttprevDiff.attributeNewValue ==
thisDiff.attributeNewValue;nntttif ( isConsecutiveTextRemove ||
isConsecutiveTextAdd || isConsecutiveAttributeChange ) {nttttdiffSet[ i - 1
].length++;nnttttif ( isConsecutiveAttributeChange ) {ntttttdiffSet[ i - 1
].range.end = diffSet[ i - 1 ].range.end.getShiftedBy( 1
);ntttt}nnttttdiffSet.splice( i, 1 );ntttti–;nttt}ntt}nntt// Remove
`changeCount` property from diff items. It is used only for sorting and is
internal thing.nttfor ( const item of diffSet ) {ntttdelete
item.changeCount;nntttif ( item.type == &#39;attribute&#39; ) {nttttdelete
item.position;nttttdelete item.length;nttt}ntt}nnttthis._changeCount =
0;nntt// Cache changes.nttthis._cachedChangesWithGraveyard =
diffSet.slice();nttthis._cachedChanges = diffSet.slice().filter(
_changesInGraveyardFilter );nnttif ( options.includeChangesInGraveyard )
{ntttreturn this._cachedChangesWithGraveyard;ntt} else {ntttreturn
this._cachedChanges;ntt}nt}nnt/**nt * Resets `Differ`. Removes all buffered
changes.nt */ntreset()
{nttthis._changesInElement.clear();nttthis._elementSnapshots.clear();nttthis._changedMarkers.clear();nttthis._cachedChanges
= null;nt}nnt/**nt * Saves and handles an insert change.nt *nt * @privatent
* @param {module:engine/model/element~Element} parentnt * @param {Number}
offsetnt * @param {Number} howManynt */nt_markInsert( parent, offset,
howMany ) {nttconst changeItem = { type: &#39;insert&#39;, offset, howMany,
count: this._changeCount++ };nnttthis._markChange( parent, changeItem
);nt}nnt/**nt * Saves and handles a remove change.nt *nt * @privatent *
@param {module:engine/model/element~Element} parentnt * @param {Number}
offsetnt * @param {Number} howManynt */nt_markRemove( parent, offset,
howMany ) {nttconst changeItem = { type: &#39;remove&#39;, offset, howMany,
count: this._changeCount++ };nnttthis._markChange( parent, changeItem
);nnttthis._removeAllNestedChanges( parent, offset, howMany );nt}nnt/**nt *
Saves and handles an attribute change.nt *nt * @privatent * @param
{module:engine/model/item~Item} itemnt */nt_markAttribute( item ) {nttconst
changeItem = { type: &#39;attribute&#39;, offset: item.startOffset,
howMany: item.offsetSize, count: this._changeCount++
};nnttthis._markChange( item.parent, changeItem );nt}nnt/**nt * Saves and
handles a model change.nt *nt * @privatent * @param
{module:engine/model/element~Element} parentnt * @param {Object}
changeItemnt */nt_markChange( parent, changeItem ) {ntt// First, make a
snapshot of this parent&#39;s children (it will be made only if it was not
made before).nttthis._makeSnapshot( parent );nntt// Then, get all changes
that already were done on the element (empty array if this is the first
change).nttconst changes = this._getChangesForElement( parent );nntt//
Then, look through all the changes, and transform them or the new
change.nttthis._handleChange( changeItem, changes );nntt// Add the new
change.nttchanges.push( changeItem );nntt// Remove incorrect changes.
During transformation some change might be, for example, included in
another.ntt// In that case, the change will have `howMany` property set to
`0` or less. We need to remove those changes.nttfor ( let i = 0; i &lt;
changes.length; i++ ) {ntttif ( changes[ i ].howMany &lt; 1 )
{nttttchanges.splice( i, 1 );nntttti–;nttt}ntt}nt}nnt/**nt * Gets an array
of changes that have already been saved for a given element.nt *nt *
@privatent * @param {module:engine/model/element~Element} elementnt *
@returns {Array.&lt;Object&gt;}nt */nt_getChangesForElement( element )
{nttlet changes;nnttif ( this._changesInElement.has( element ) )
{ntttchanges = this._changesInElement.get( element );ntt} else {ntttchanges
= [];nntttthis._changesInElement.set( element, changes );ntt}nnttreturn
changes;nt}nnt/**nt * Saves a children snapshot for a given element.nt *nt
* @privatent * @param {module:engine/model/element~Element} elementnt
*/nt_makeSnapshot( element ) {nttif ( !this._elementSnapshots.has( element
) ) {ntttthis._elementSnapshots.set( element, _getChildrenSnapshot(
element.getChildren() ) );ntt}nt}nnt/**nt * For a given newly saved change,
compares it with a change already done on the element and modifies the
incomingnt * change and/or the old change.nt *nt * @privatent * @param
{Object} inc Incoming (new) change.nt * @param {Array.&lt;Object&gt;}
changes An array containing all the changes done on that element.nt
*/nt_handleChange( inc, changes ) {ntt// We need a helper variable that
will store how many nodes are to be still handled for this change
item.ntt// `nodesToHandle` (how many nodes still need to be handled) and
`howMany` (how many nodes were affected)ntt// needs to be
differentiated.ntt//ntt// This comes up when there are multiple changes
that are affected by `inc` change item.ntt//ntt// For example: assume two
insert changes: `{ offset: 2, howMany: 1 }` and `{ offset: 5, howMany: 1
}`.ntt// Assume that `inc` change is remove `{ offset: 2, howMany: 2,
nodesToHandle: 2 }`.ntt//ntt// Then, we:ntt// - "forget&quot; about first
insert change (it is "eaten&quot; by remove),ntt// - because of that, at
the end we will want to remove only one node (`nodesToHandle = 1`),ntt// -
but still we have to change offset of the second insert change from `5` to
`3`!ntt//ntt// So, `howMany` does not change throughout items
transformation and keeps information about how many nodes were
affected,ntt// while `nodesToHandle` means how many nodes need to be
handled after the change item is transformed by other
changes.nttinc.nodesToHandle = inc.howMany;nnttfor ( const old of changes )
{ntttconst incEnd = inc.offset + inc.howMany;ntttconst oldEnd = old.offset
+ old.howMany;nntttif ( inc.type == &#39;insert&#39; ) {nttttif ( old.type
== &#39;insert&#39; ) {ntttttif ( inc.offset &lt;= old.offset )
{nttttttold.offset += inc.howMany;nttttt} else if ( inc.offset &lt; oldEnd
) {nttttttold.howMany += inc.nodesToHandle;nttttttinc.nodesToHandle =
0;nttttt}ntttt}nnttttif ( old.type == &#39;remove&#39; ) {ntttttif (
inc.offset &lt; old.offset ) {nttttttold.offset +=
inc.howMany;nttttt}ntttt}nnttttif ( old.type == &#39;attribute&#39; )
{ntttttif ( inc.offset &lt;= old.offset ) {nttttttold.offset +=
inc.howMany;nttttt} else if ( inc.offset &lt; oldEnd ) {ntttttt// This case
is more complicated, because attribute change has to be split into
two.ntttttt// Example (assume that uppercase and lowercase letters mean
different attributes):ntttttt//ntttttt// initial state:ttabcxyzntttttt//
attribute change:taBCXYzntttttt// incoming
insert:ttaBCfooXYzntttttt//ntttttt// Change ranges cannot intersect because
each item has to be described exactly (it was eitherntttttt// not changed,
inserted, removed, or its attribute was changed). That&#39;s why old
attributentttttt// change has to be split and both parts has to be handled
separately from now on.nttttttconst howMany =
old.howMany;nnttttttold.howMany = inc.offset - old.offset;nntttttt// Add
the second part of attribute change to the beginning of processed array so
it won&#39;tntttttt// be processed again in this
loop.nttttttchanges.unshift( {nttttttttype:
&#39;attribute&#39;,ntttttttoffset: incEnd,nttttttthowMany: howMany -
old.howMany,ntttttttcount: this._changeCount++ntttttt}
);nttttt}ntttt}nttt}nntttif ( inc.type == &#39;remove&#39; ) {nttttif (
old.type == &#39;insert&#39; ) {ntttttif ( incEnd &lt;= old.offset )
{nttttttold.offset -= inc.howMany;nttttt} else if ( incEnd &lt;= oldEnd )
{nttttttif ( inc.offset &lt; old.offset ) {ntttttttconst intersectionLength
= incEnd - old.offset;nntttttttold.offset = inc.offset;nntttttttold.howMany
-= intersectionLength;ntttttttinc.nodesToHandle -=
intersectionLength;ntttttt} else {ntttttttold.howMany -=
inc.nodesToHandle;ntttttttinc.nodesToHandle = 0;ntttttt}nttttt} else
{nttttttif ( inc.offset &lt;= old.offset ) {ntttttttinc.nodesToHandle -=
old.howMany;ntttttttold.howMany = 0;ntttttt} else if ( inc.offset &lt;
oldEnd ) {ntttttttconst intersectionLength = oldEnd -
inc.offset;nntttttttold.howMany -=
intersectionLength;ntttttttinc.nodesToHandle -=
intersectionLength;ntttttt}nttttt}ntttt}nnttttif ( old.type ==
&#39;remove&#39; ) {ntttttif ( incEnd &lt;= old.offset ) {nttttttold.offset
-= inc.howMany;nttttt} else if ( inc.offset &lt; old.offset )
{nttttttinc.nodesToHandle += old.howMany;nttttttold.howMany =
0;nttttt}ntttt}nnttttif ( old.type == &#39;attribute&#39; ) {ntttttif (
incEnd &lt;= old.offset ) {nttttttold.offset -= inc.howMany;nttttt} else if
( inc.offset &lt; old.offset ) {nttttttconst intersectionLength = incEnd -
old.offset;nnttttttold.offset = inc.offset;nttttttold.howMany -=
intersectionLength;nttttt} else if ( inc.offset &lt; oldEnd ) {nttttttif (
incEnd &lt;= oldEnd ) {nttttttt// On first sight in this case we don&#39;t
need to split attribute operation into two.nttttttt// However the changes
set is later converted to actions (see
`_generateActionsFromChanges`).nttttttt// For that reason, no two changes
may intersect.nttttttt// So we cannot have an attribute change that
"contains&quot; remove change.nttttttt// Attribute change needs to be
split.ntttttttconst howMany = old.howMany;nntttttttold.howMany = inc.offset
- old.offset;nntttttttconst howManyAfter = howMany - old.howMany -
inc.nodesToHandle;nnttttttt// Add the second part of attribute change to
the beginning of processed array so it won&#39;tnttttttt// be processed
again in this loop.ntttttttchanges.unshift( {ntttttttttype:
&#39;attribute&#39;,nttttttttoffset: inc.offset,ntttttttthowMany:
howManyAfter,nttttttttcount: this._changeCount++nttttttt} );ntttttt} else
{ntttttttold.howMany -= oldEnd -
inc.offset;ntttttt}nttttt}ntttt}nttt}nntttif ( inc.type ==
&#39;attribute&#39; ) {ntttt// In case of attribute change, `howMany`
should be kept same as `nodesToHandle`. It&#39;s not an error.nttttif (
old.type == &#39;insert&#39; ) {ntttttif ( inc.offset &lt; old.offset
&amp;&amp; incEnd &gt; old.offset ) {nttttttif ( incEnd &gt; oldEnd )
{nttttttt// This case is similar to a case described when incoming change
was insert and old change was attribute.nttttttt// See comment
above.nttttttt//nttttttt// This time incoming change is attribute. We need
to split incoming change in this case too.nttttttt// However this time, the
second part of the attribute change needs to be processed furthernttttttt//
because there might be other changes that it collides with.ntttttttconst
attributePart = {ntttttttttype: &#39;attribute&#39;,nttttttttoffset:
oldEnd,ntttttttthowMany: incEnd - oldEnd,nttttttttcount:
this._changeCount++nttttttt};nntttttttthis._handleChange( attributePart,
changes );nntttttttchanges.push( attributePart
);ntttttt}nnttttttinc.nodesToHandle = old.offset -
inc.offset;nttttttinc.howMany = inc.nodesToHandle;nttttt} else if (
inc.offset &gt;= old.offset &amp;&amp; inc.offset &lt; oldEnd ) {nttttttif
( incEnd &gt; oldEnd ) {ntttttttinc.nodesToHandle = incEnd -
oldEnd;ntttttttinc.offset = oldEnd;ntttttt} else {ntttttttinc.nodesToHandle
= 0;ntttttt}nttttt}ntttt}nnttttif ( old.type == &#39;attribute&#39; )
{nttttt// There are only two conflicting scenarios possible here:ntttttif (
inc.offset &gt;= old.offset &amp;&amp; incEnd &lt;= oldEnd ) {ntttttt//
`old` change includes `inc` change, or they are the
same.nttttttinc.nodesToHandle = 0;nttttttinc.howMany = 0;nttttttinc.offset
= 0;nttttt} else if ( inc.offset &lt;= old.offset &amp;&amp; incEnd &gt;=
oldEnd ) {ntttttt// `inc` change includes `old` change.nttttttold.howMany =
0;nttttt}ntttt}nttt}ntt}nnttinc.howMany = inc.nodesToHandle;nttdelete
inc.nodesToHandle;nt}nnt/**nt * Returns an object with a single insert
change description.nt *nt * @privatent * @param
{module:engine/model/element~Element} parent The element in which the
change happened.nt * @param {Number} offset The offset at which change
happened.nt * @param {String} name The name of the removed element or
`&#39;$text&#39;` for a character.nt * @returns {Object} The diff item.nt
*/nt_getInsertDiff( parent, offset, name ) {nttreturn {nttttype:
&#39;insert&#39;,ntttposition: Position.createFromParentAndOffset( parent,
offset ),ntttname,ntttlength: 1,ntttchangeCount:
this._changeCount++ntt};nt}nnt/**nt * Returns an object with a single
remove change description.nt *nt * @privatent * @param
{module:engine/model/element~Element} parent The element in which change
happened.nt * @param {Number} offset The offset at which change happened.nt
* @param {String} name The name of the removed element or `&#39;$text&#39;`
for a character.nt * @returns {Object} The diff item.nt */nt_getRemoveDiff(
parent, offset, name ) {nttreturn {nttttype: &#39;remove&#39;,ntttposition:
Position.createFromParentAndOffset( parent, offset ),ntttname,ntttlength:
1,ntttchangeCount: this._changeCount++ntt};nt}nnt/**nt * Returns an array
of objects where each one is a single attribute change description.nt *nt *
@privatent * @param {module:engine/model/range~Range} range The range where
the change happened.nt * @param {Map} oldAttributes A map, map iterator or
compatible object that contains attributes before the change.nt * @param
{Map} newAttributes A map, map iterator or compatible object that contains
attributes after the change.nt * @returns {Array.&lt;Object&gt;} An array
containing one or more diff items.nt */nt_getAttributesDiff( range,
oldAttributes, newAttributes ) {ntt// Results holder.nttconst diffs =
[];nntt// Clone new attributes as we will be performing changes on this
object.nttnewAttributes = new Map( newAttributes );nntt// Look through old
attributes.nttfor ( const [ key, oldValue ] of oldAttributes ) {nttt//
Check what is the new value of the attribute (or if it was
removed).ntttconst newValue = newAttributes.has( key ) ? newAttributes.get(
key ) : null;nnttt// If values are different (or attribute was
removed)…ntttif ( newValue !== oldValue ) {ntttt// Add diff
item.nttttdiffs.push( {nttttttype: &#39;attribute&#39;,ntttttposition:
range.start,ntttttrange: Range.createFromRange( range ),ntttttlength:
1,ntttttattributeKey: key,ntttttattributeOldValue:
oldValue,ntttttattributeNewValue: newValue,ntttttchangeCount:
this._changeCount++ntttt} );nttt}nnttt// Prevent returning two diff items
for the same change.ntttnewAttributes.delete( key );ntt}nntt// Look through
new attributes that weren&#39;t handled above.nttfor ( const [ key,
newValue ] of newAttributes ) {nttt// Each of them is a new attribute. Add
diff item.ntttdiffs.push( {ntttttype: &#39;attribute&#39;,nttttposition:
range.start,nttttrange: Range.createFromRange( range ),nttttlength:
1,nttttattributeKey: key,nttttattributeOldValue:
null,nttttattributeNewValue: newValue,nttttchangeCount:
this._changeCount++nttt} );ntt}nnttreturn diffs;nt}nnt/**nt * Checks
whether given element or any of its parents is an element that is buffered
as an inserted element.nt *nt * @privatent * @param
{module:engine/model/element~Element} element Element to check.nt *
@returns {Boolean}nt */nt_isInInsertedElement( element ) {nttconst parent =
element.parent;nnttif ( !parent ) {ntttreturn false;ntt}nnttconst changes =
this._changesInElement.get( parent );nttconst offset =
element.startOffset;nnttif ( changes ) {ntttfor ( const change of changes )
{nttttif ( change.type == &#39;insert&#39; &amp;&amp; offset &gt;=
change.offset &amp;&amp; offset &lt; change.offset + change.howMany )
{ntttttreturn true;ntttt}nttt}ntt}nnttreturn this._isInInsertedElement(
parent );nt}nnt/**nt * Removes deeply all buffered changes that are
registered in elements from range specified by `parent`, `offset`nt * and
`howMany`.nt *nt * @privatent * @param
{module:engine/model/element~Element} parentnt * @param {Number} offsetnt *
@param {Number} howManynt */nt_removeAllNestedChanges( parent, offset,
howMany ) {nttconst range = Range.createFromParentsAndOffsets( parent,
offset, parent, offset + howMany );nnttfor ( const item of range.getItems(
{ shallow: true } ) ) {ntttif ( item.is( &#39;element&#39; ) )
{nttttthis._elementSnapshots.delete( item
);nttttthis._changesInElement.delete( item
);nnttttthis._removeAllNestedChanges( item, 0, item.maxOffset
);nttt}ntt}nt}n}nn// Returns an array that is a copy of passed child list
with the exception that text nodes are split to one or moren// objects,
each representing one character and attributes set on that
character.nfunction _getChildrenSnapshot( children ) {ntconst snapshot =
[];nntfor ( const child of children ) {nttif ( child.is( &#39;text&#39; ) )
{ntttfor ( let i = 0; i &lt; child.data.length; i++ ) {nttttsnapshot.push(
{ntttttname: &#39;$text&#39;,ntttttattributes: new Map(
child.getAttributes() )ntttt} );nttt}ntt} else {ntttsnapshot.push(
{nttttname: child.name,nttttattributes: new Map( child.getAttributes()
)nttt} );ntt}nt}nntreturn snapshot;n}nn// Generates array of actions for
given changes set.n// It simulates what `diff` function does.n// Generated
actions are:n// - &#39;e&#39; for &#39;equal&#39; - when item at that
position did not change,n// - &#39;i&#39; for &#39;insert&#39; - when item
at that position was inserted,n// - &#39;r&#39; for &#39;remove&#39; - when
item at that position was removed,n// - &#39;a&#39; for &#39;attribute&#39;
- when item at that position has it attributes changed.n//n// Example
(assume that uppercase letters have bold attribute, compare with function
code):n//n// children before:tfooBARn// children after:tfoxybARn//n//
changes: type: remove, offset: 1, howMany: 1n//ttttype: insert, offset: 2,
howMany: 2n//ttttype: attribute, offset: 4, howMany: 1n//n// expected
actions: equal (f), remove (o), equal (o), insert (x), insert (y),
attribute (b), equal (A), equal (R)n//n// steps taken by th script:n//n//
1. change = "type: remove, offset: 1, howMany: 1&quot;; offset = 0;
oldChildrenHandled = 0n//    1.1 between this change and the beginning is
one not-changed node, fill with one equal action, one old child has been
handledn//    1.2 this change removes one node, add one remove actionn//   
1.3 change last visited `offset` to 1n//    1.4 since an old child has been
removed, one more old child has been handledn//    1.5 actions at this
point are: equal, removen//n// 2. change = "type: insert, offset: 2,
howMany: 2&quot;; offset = 1; oldChildrenHandled = 2n//    2.1 between this
change and previous change is one not-changed node, add equal action,
another one old children has been handledn//    2.2 this change inserts two
nodes, add two insert actionsn//    2.3 change last visited offset to the
end of the inserted range, that is 4n//    2.4 actions at this point are:
equal, remove, equal, insert, insertn//n// 3. change = "type: attribute,
offset: 4, howMany: 1&quot;; offset = 4, oldChildrenHandled = 3n//    3.1
between this change and previous change are no not-changed nodesn//    3.2
this change changes one node, add one attribute actionn//    3.3 change
last visited `offset` to the end of change range, that is 5n//    3.4 since
an old child has been changed, one more old child has been handledn//   
3.5 actions at this point are: equal, remove, equal, insert, insert,
attributen//n// 4. after loop oldChildrenHandled = 4, oldChildrenLength = 6
(fooBAR is 6 characters)n//    4.1 fill up with two equal actionsn//n// The
result actions are: equal, remove, equal, insert, insert, attribute, equal,
equal.nfunction _generateActionsFromChanges( oldChildrenLength, changes )
{ntconst actions = [];nntlet offset = 0;ntlet oldChildrenHandled = 0;nnt//
Go through all buffered changes.ntfor ( const change of changes ) {ntt//
First, fill "holes&quot; between changes with "equal&quot; actions.nttif (
change.offset &gt; offset ) {ntttactions.push( …&#39;e&#39;.repeat(
change.offset - offset ).split( &#39;&#39; ) );nntttoldChildrenHandled +=
change.offset - offset;ntt}nntt// Then, fill up actions accordingly to
change type.nttif ( change.type == &#39;insert&#39; ) {ntttactions.push(
…&#39;i&#39;.repeat( change.howMany ).split( &#39;&#39; ) );nnttt// The
last handled offset is after inserted range.ntttoffset = change.offset +
change.howMany;ntt} else if ( change.type == &#39;remove&#39; )
{ntttactions.push( …&#39;r&#39;.repeat( change.howMany ).split( &#39;&#39;
) );nnttt// The last handled offset is at the position where the nodes were
removed.ntttoffset = change.offset;nttt// We removed `howMany` old nodes,
update `oldChildrenHandled`.ntttoldChildrenHandled += change.howMany;ntt}
else {ntttactions.push( …&#39;a&#39;.repeat( change.howMany ).split(
&#39;&#39; ) );nnttt// The last handled offset isa at the position after
the changed range.ntttoffset = change.offset + change.howMany;nttt// We
changed `howMany` old nodes, update
`oldChildrenHandled`.ntttoldChildrenHandled += change.howMany;ntt}nt}nnt//
Fill "equal&quot; actions at the end of actions set. Use
`oldChildrenHandled` to see how many childrennt// has not been changed /
removed at the end of their parent.ntif ( oldChildrenHandled &lt;
oldChildrenLength ) {nttactions.push( …&#39;e&#39;.repeat(
oldChildrenLength - oldChildrenHandled ).split( &#39;&#39; ) );nt}nntreturn
actions;n}nn// Filter callback for Array.filter that filters out change
entries that are in graveyard.nfunction _changesInGraveyardFilter( entry )
{ntconst posInGy = entry.position &amp;&amp; entry.position.root.rootName
== &#39;$graveyard&#39;;ntconst rangeInGy = entry.range &amp;&amp;
entry.range.root.rootName == &#39;$graveyard&#39;;nntreturn !posInGy
&amp;&amp; !rangeInGy;n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/differ.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module engine/model/historyn */nnimport CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nn/**n * `History`
keeps the track of all the deltas applied to the {@link
module:engine/model/document~Document document}.n */nexport default class
<a href="../../../../History.html">History</a> {nt/**nt * Creates an empty
<a href="../../../../History.html">History</a> instance.nt
*/ntconstructor() {ntt/**ntt * Deltas added to the history.ntt *ntt *
@protectedntt * @member
{Array.&lt;module:engine/model/delta/delta~Delta&gt;}
module:engine/model/history~History#_deltasntt */nttthis._deltas =
[];nntt/**ntt * Helper structure that maps added delta&#39;s base version
to the index in {@link module:engine/model/history~History#_deltas}ntt * at
which the delta was added.ntt *ntt * @protectedntt * @member {Map}
module:engine/model/history~History#_historyPointsntt
*/nttthis._historyPoints = new Map();nntt/**ntt * Holds an information
which {@link module:engine/model/delta/delta~Delta delta} undoes whichntt *
{@link module:engine/model/delta/delta~Delta delta}.ntt *ntt * Keys of the
map are "undoing deltas&quot;, that is deltas that undone some other
deltas. For each key, thentt * value is a delta that has been undone by the
"undoing delta&quot;.ntt *ntt * @privatentt * @member {Map}
module:engine/model/history~History#_undoPairsntt */nttthis._undoPairs =
new Map();nntt/**ntt * Holds all undone deltas.ntt *ntt * @privatentt *
@member {Set.&lt;module:engine/model/delta/delta~Delta&gt;}
module:engine/model/history~History#_undoneDeltasntt
*/nttthis._undoneDeltas = new Set();nt}nnt/**nt * Adds delta to the
history.nt *nt * @param {module:engine/model/delta/delta~Delta} delta Delta
to add.nt */ntaddDelta( delta ) {nttif ( delta.operations.length &gt; 0
&amp;&amp; !this._historyPoints.has( delta.baseVersion ) ) {ntttconst index
= this._deltas.length;nntttthis._deltas[ index ] =
delta;ntttthis._historyPoints.set( delta.baseVersion, index
);ntt}nt}nnt/**nt * Returns deltas added to the history.nt *nt * @param
{Number} [from=0] Base version from which deltas should be returned
(inclusive). Defaults to `0`, which meansnt * that deltas from the first
one will be returned.nt * @param {Number} [to=Number.POSITIVE_INFINITY]
Base version up to which deltas should be returned (exclusive).nt *
Defaults to `Number.POSITIVE_INFINITY` which means that deltas up to the
last one will be returned.nt * @returns
{Iterable.&lt;module:engine/model/delta/delta~Delta&gt;} Deltas added to
the history from given base versions range.nt */nt* getDeltas( from = 0, to
= Number.POSITIVE_INFINITY ) {ntt// No deltas added, nothing to yield.nttif
( this._deltas.length === 0 ) {ntttreturn;ntt}nntt// Will throw if base
version is incorrect.nttlet fromIndex = this._getIndex( from );nntt// Base
version is too low or too high and is not found in history.nttif (
fromIndex == -1 ) {ntttreturn;ntt}nntt// We have correct `fromIndex` so
let&#39;s iterate starting from it.nttwhile ( fromIndex &lt;
this._deltas.length ) {ntttconst delta = this._deltas[ fromIndex++
];nntttif ( delta.baseVersion &gt;= to ) {nttttbreak;nttt}nntttyield
delta;ntt}nt}nnt/**nt * Returns delta from history that bases on given
`baseVersion`.nt *nt * @param {Number} baseVersion Base version of the
delta to get.nt * @returns {module:engine/model/delta/delta~Delta|null}
Delta with given base version or `null` if there is no such delta in
history.nt */ntgetDelta( baseVersion ) {nttconst index =
this._historyPoints.get( baseVersion );nnttreturn index === undefined ?
null : this._deltas[ index ];nt}nnt/**nt * Marks in history that one delta
is a delta that is undoing the other delta. By marking deltas this way,nt *
history is keeping more context information about deltas which helps in
operational transformation.nt *nt * @param
{module:engine/model/delta/delta~Delta} undoneDelta Delta which is undone
by `undoingDelta`.nt * @param {module:engine/model/delta/delta~Delta}
undoingDelta Delta which undoes `undoneDelta`.nt */ntsetDeltaAsUndone(
undoneDelta, undoingDelta ) {nttthis._undoPairs.set( undoingDelta,
undoneDelta );nttthis._undoneDeltas.add( undoneDelta );nt}nnt/**nt * Checks
whether given `delta` is undoing by any other delta.nt *nt * @param
{module:engine/model/delta/delta~Delta} delta Delta to check.nt * @returns
{Boolean} `true` if given `delta` is undoing any other delta, `false`
otherwise.nt */ntisUndoingDelta( delta ) {nttreturn this._undoPairs.has(
delta );nt}nnt/**nt * Checks whether given `delta` has been undone by any
other delta.nt *nt * @param {module:engine/model/delta/delta~Delta} delta
Delta to check.nt * @returns {Boolean} `true` if given `delta` has been
undone any other delta, `false` otherwise.nt */ntisUndoneDelta( delta )
{nttreturn this._undoneDeltas.has( delta );nt}nnt/**nt * For given
`undoingDelta`, returns the delta which has been undone by it.nt *nt *
@param {module:engine/model/delta/delta~Delta} undoingDeltant * @returns
{module:engine/model/delta/delta~Delta|undefined} Delta that has been
undone by given `undoingDelta` or `undefined`nt * if given `undoingDelta`
is not undoing any other delta.nt */ntgetUndoneDelta( undoingDelta )
{nttreturn this._undoPairs.get( undoingDelta );nt}nnt/**nt * Gets an index
in {@link module:engine/model/history~History#_deltas} where delta with
given `baseVersion` is added.nt *nt * @privatent * @param {Number}
baseVersion Base version of delta.nt */nt_getIndex( baseVersion ) {nttconst
index = this._historyPoints.get( baseVersion );nntt// Base version not
found - it is either too high or too low, or is in the middle of
delta.nttif ( index === undefined ) {ntttconst lastDelta = this._deltas[
this._deltas.length - 1 ];ntttconst nextBaseVersion = lastDelta.baseVersion
+ lastDelta.operations.length;nntttif ( baseVersion &lt; 0 || baseVersion
&gt;= nextBaseVersion ) {ntttt// Base version is too high or too low -
it&#39;s acceptable situation.nttttreturn -1;nttt}nnttt/**nttt * Given base
version points to the middle of a delta.nttt *nttt * @error
history-wrong-versionnttt */ntttthrow new CKEditorError(
&#39;model-history-wrong-version: Given base version points to the middle
of a delta.&#39; );ntt}nnttreturn index;nt}n}nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-engine/src/model/history.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * Set of utils to handle unicode characters.n *n *
@module utils/unicoden */nn/**n * Checks whether given `character` is a
combining mark.n *n * @param {String} character Character to check.n *
@returns {Boolean}n */nexport function isCombiningMark( character )
{ntreturn !!character &amp;&amp; character.length == 1 &amp;&amp;
/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(
character );n}nn/**n * Checks whether given `character` is a high half of
surrogate pair.n *n * Using UTF-16 terminology, a surrogate pair denotes
UTF-16 character using two UTF-8 characters. The surrogate pairn * consist
of high surrogate pair character followed by low surrogate pair character.n
*n * @param {String} character Character to check.n * @returns {Boolean}n
*/nexport function isHighSurrogateHalf( character ) {ntreturn !!character
&amp;&amp; character.length == 1 &amp;&amp; /[\ud800-\udbff]/.test(
character );n}nn/**n * Checks whether given `character` is a low half of
surrogate pair.n *n * Using UTF-16 terminology, a surrogate pair denotes
UTF-16 character using two UTF-8 characters. The surrogate pairn * consist
of high surrogate pair character followed by low surrogate pair character.n
*n * @param {String} character Character to check.n * @returns {Boolean}n
*/nexport function isLowSurrogateHalf( character ) {ntreturn !!character
&amp;&amp; character.length == 1 &amp;&amp; /[\udc00-\udfff]/.test(
character );n}nn/**n * Checks whether given offset in a string is inside a
surrogate pair (between two surrogate halves).n *n * @param {String} string
String to check.n * @param {Number} offset Offset to check.n * @returns
{Boolean}n */nexport function isInsideSurrogatePair( string, offset )
{ntreturn isHighSurrogateHalf( string.charAt( offset - 1 ) ) &amp;&amp;
isLowSurrogateHalf( string.charAt( offset ) );n}nn/**n * Checks whether
given offset in a string is between base character and combining mark or
between two combining marks.n *n * @param {String} string String to check.n
* @param {Number} offset Offset to check.n * @returns {Boolean}n */nexport
function isInsideCombinedSymbol( string, offset ) {ntreturn
isCombiningMark( string.charAt( offset ) );n}nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-utils/src/unicode.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module engine/model/documentn */nnimport Differ from
&#39;./differ&#39;;nimport Range from &#39;./range&#39;;nimport Position
from &#39;./position&#39;;nimport RootElement from
&#39;./rootelement&#39;;nimport <a
href="../../../../History.html">History</a> from
&#39;./history&#39;;nimport DocumentSelection from
&#39;./documentselection&#39;;nimport Collection from
&#39;@ckeditor/ckeditor5-utils/src/collection&#39;;nimport clone from
&#39;@ckeditor/ckeditor5-utils/src/lib/lodash/clone&#39;;nimport
EmitterMixin from
&#39;@ckeditor/ckeditor5-utils/src/emittermixin&#39;;nimport CKEditorError
from &#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nimport mix from
&#39;@ckeditor/ckeditor5-utils/src/mix&#39;;nimport {
isInsideSurrogatePair, isInsideCombinedSymbol } from
&#39;@ckeditor/ckeditor5-utils/src/unicode&#39;;nnconst graveyardName =
&#39;$graveyard&#39;;nn/**n * Document tree model describes all editable
data in the editor. It may contain multiplen * {@link
module:engine/model/document~Document#roots root elements}. For example, if
the editor has multiple editable areas,n * each area will be represented by
a separate root.n *n * @mixes module:utils/emittermixin~EmitterMixinn
*/nexport default class Document {nt/**nt * Creates an empty document
instance with no {@link roots} (other thannt * the {@link graveyard
graveyard root}).nt */ntconstructor( model ) {ntt/**ntt * The {@link
module:engine/model/model~Model model} that the document is a part of.ntt
*ntt * @readonlyntt * @member {module:engine/model/model~Model}ntt
*/nttthis.model = model;nntt/**ntt * The document version. It starts from
`0` and every operation increases the version number. It is used to ensure
thatntt * operations are applied on a proper document version.ntt * If the
{@link module:engine/model/operation/operation~Operation#baseVersion base
version} does not match the document version,ntt * a {@link
module:utils/ckeditorerror~CKEditorError
model-document-applyOperation-wrong-version} error is thrown.ntt *ntt *
@readonlyntt * @member {Number}ntt */nttthis.version = 0;nntt/**ntt * The
document&#39;s history.ntt *ntt * *Note:* Be aware that deltas applied to
the document might get removed or changed.ntt *ntt * @readonlyntt * @member
{module:engine/model/history~History}ntt */nttthis.history = new History(
this );nntt/**ntt * The selection done on this document.ntt *ntt *
@readonlyntt * @member
{module:engine/model/documentselection~DocumentSelection}ntt
*/nttthis.selection = new DocumentSelection( this );nntt/**ntt * A list of
roots that are owned and managed by this document. Use {@link createRoot}
andntt * {@link getRoot} to manipulate it.ntt *ntt * @readonlyntt * @member
{module:utils/collection~Collection}ntt */nttthis.roots = new Collection( {
idProperty: &#39;rootName&#39; } );nntt/**ntt * The model differ object.
Its role is to buffer changes done on the model document and then calculate
a diff of those changes.ntt *ntt * @readonlyntt * @member
{module:engine/model/differ~Differ}ntt */nttthis.differ = new Differ(
model.markers );nntt/**ntt * Post-fixer callbacks registered to the model
document.ntt *ntt * @privatentt * @member {Set}ntt */nttthis._postFixers =
new Set();nntt// Graveyard tree root. Document always have a graveyard
root, which stores removed nodes.nttthis.createRoot( &#39;$root&#39;,
graveyardName );nntt// First, if the operation is a document operation
check if it&#39;s base version is correct.nttthis.listenTo( model,
&#39;applyOperation&#39;, ( evt, args ) =&gt; {ntttconst operation = args[
0 ];nntttif ( operation.isDocumentOperation &amp;&amp;
operation.baseVersion !== this.version ) {ntttt/**ntttt * Only operations
with matching versions can be applied.ntttt *ntttt * @error
document-applyOperation-wrong-versionntttt * @param
{module:engine/model/operation/operation~Operation} operationntttt
*/nttttthrow new
CKEditorError(nttttt&#39;model-document-applyOperation-wrong-version: Only
operations with matching versions can be applied.&#39;,nttttt{ operation
}ntttt);nttt}ntt}, { priority: &#39;highest&#39; } );nntt// Then, still
before an operation is applied on model, buffer the change in
differ.nttthis.listenTo( model, &#39;applyOperation&#39;, ( evt, args )
=&gt; {ntttconst operation = args[ 0 ];nntttif (
operation.isDocumentOperation ) {nttttthis.differ.bufferOperation(
operation );nttt}ntt}, { priority: &#39;high&#39; } );nntt// After the
operation is applied, bump document&#39;s version and add the operation to
the history.nttthis.listenTo( model, &#39;applyOperation&#39;, ( evt, args
) =&gt; {ntttconst operation = args[ 0 ];nntttif (
operation.isDocumentOperation )
{nttttthis.version++;nttttthis.history.addDelta( operation.delta
);nttt}ntt}, { priority: &#39;low&#39; } );nntt// Listen to selection
changes. If selection changed, mark it.nttlet hasSelectionChanged =
false;nnttthis.listenTo( this.selection, &#39;change&#39;, () =&gt;
{nttthasSelectionChanged = true;ntt} );nntt// Wait for `_change` event from
model, which signalizes that outermost change block has finished.ntt// When
this happens, check if there were any changes done on document, and if so,
call post fixers,ntt// fire `change` event for features and conversion and
then reset the differ.nttthis.listenTo( model, &#39;_change&#39;, ( evt,
writer ) =&gt; {ntttif ( !this.differ.isEmpty || hasSelectionChanged )
{nttttthis._callPostFixers( writer );nnttttthis.fire( &#39;change&#39;,
writer.batch );nnttttthis.differ.reset();ntttthasSelectionChanged =
false;nttt}ntt} );nntt// Buffer marker changes.ntt// This is not covered in
buffering operations because markers may change outside of them (when
theyntt// are modified using `model.markers` collection, not through
`MarkerOperation`).nttthis.listenTo( model.markers, &#39;update&#39;, (
evt, marker, oldRange, newRange ) =&gt; {nttt// Whenever marker is updated,
buffer that change.ntttthis.differ.bufferMarkerChange( marker.name,
oldRange, newRange );nntttif ( oldRange === null ) {ntttt// If this is a
new marker, add a listener that will buffer change whenever marker
changes.nttttmarker.on( &#39;change&#39;, ( evt, oldRange ) =&gt;
{ntttttthis.differ.bufferMarkerChange( marker.name, oldRange,
marker.getRange() );ntttt} );nttt}ntt} );nt}nnt/**nt * The graveyard tree
root. A document always has a graveyard root that stores removed nodes.nt
*nt * @readonlynt * @member {module:engine/model/rootelement~RootElement}nt
*/ntget graveyard() {nttreturn this.getRoot( graveyardName );nt}nnt/**nt *
Creates a new root.nt *nt * @param {String} [elementName=&#39;$root&#39;]
The element name. Defaults to `&#39;$root&#39;` which also has some basic
schema definednt * (`$block`s are allowed inside the `$root`). Make sure to
define a proper schema if you use a different name.nt * @param {String}
[rootName=&#39;main&#39;] A unique root name.nt * @returns
{module:engine/model/rootelement~RootElement} The created root.nt
*/ntcreateRoot( elementName = &#39;$root&#39;, rootName = &#39;main&#39; )
{nttif ( this.roots.get( rootName ) ) {nttt/**nttt * A root with the
specified name already exists.nttt *nttt * @error
model-document-createRoot-name-existsnttt * @param
{module:engine/model/document~Document} docnttt * @param {String} namenttt
*/ntttthrow new
CKEditorError(ntttt&#39;model-document-createRoot-name-exists: Root with
specified name already exists.&#39;,ntttt{ name: rootName
}nttt);ntt}nnttconst root = new RootElement( this, elementName, rootName
);nttthis.roots.add( root );nnttreturn root;nt}nnt/**nt * Removes all event
listeners set by the document instance.nt */ntdestroy()
{nttthis.selection.destroy();nttthis.stopListening();nt}nnt/**nt * Returns
a root by its name.nt *nt * @param {String} [name=&#39;main&#39;] A unique
root name.nt * @returns {module:engine/model/rootelement~RootElement|null}
The root registered under a given name or `null` whennt * there is no root
with the given name.nt */ntgetRoot( name = &#39;main&#39; ) {nttreturn
this.roots.get( name );nt}nnt/**nt * Returns an array with names of all
roots (without the {@link graveyard}) added to the document.nt *nt *
@returns {Array.&lt;String&gt;} Roots names.nt */ntgetRootNames()
{nttreturn Array.from( this.roots, root =&gt; root.rootName ).filter( name
=&gt; name != graveyardName );nt}nnt/**nt * Used to register a post-fixer
callback. A post-fixer mechanism guarantees that the features that listen
tont * the {@link module:engine/model/model~Model#event:_change model&#39;s
change event} will operate on a correct model state.nt *nt * An execution
of a feature may lead to an incorrect document tree state. The callbacks
are used to fix the document tree afternt * it has changed. Post-fixers are
fired just after all changes from the outermost change block were applied
butnt * before the {@link
module:engine/model/document~Document#event:change change event} is fired.
If a post-fixer callback madent * a change, it should return `true`. When
this happens, all post-fixers are fired again to check if something else
shouldnt * not be fixed in the new document tree state.nt *nt * As a
parameter, a post-fixer callback receives a {@link
module:engine/model/writer~Writer writer} instance connected with thent *
executed changes block. Thanks to that, all changes done by the callback
will be added to the sament * {@link module:engine/model/batch~Batch batch}
(and undo step) as the original changes. This makes post-fixer changes
transparentnt * for the user.nt *nt * An example of a post-fixer is a
callback that checks if all the data were removed from the editor. If so,
thent * callback should add an empty paragraph so that the editor is never
empty:nt *nt *ttdocument.registerPostFixer( writer =&gt; {nt *tttconst
changes = document.differ.getChanges();nt *nt *ttt// Check if the changes
lead to an empty root in the editor.nt *tttfor ( const entry of changes )
{nt *ttttif ( entry.type == &#39;remove&#39; &amp;&amp;
entry.position.root.isEmpty ) {nt *tttttwriter.insertElement(
&#39;paragraph&#39;, entry.position.root, 0 );nt *nt *ttttt// It is fine to
return early, even if multiple roots would need to be fixed.nt *ttttt// All
post-fixers will be fired again, so if there are more empty roots, those
will be fixed, too.nt *tttttreturn true;nt *tttt}nt *ttt}nt *tt} );nt *nt *
@param {Function} postFixernt */ntregisterPostFixer( postFixer )
{nttthis._postFixers.add( postFixer );nt}nnt/**nt * A custom `toJSON()`
method to solve child-parent circular dependencies.nt *nt * @returns
{Object} A clone of this object with the document property changed to a
string.nt */nttoJSON() {nttconst json = clone( this );nntt// Due to
circular references we need to remove parent reference.nttjson.selection =
&#39;[engine.model.DocumentSelection]&#39;;nttjson.model =
&#39;[engine.model.Model]&#39;;nnttreturn json;nt}nnt/**nt * Returns the
default root for this document which is either the first root that was
added to the document usingnt * {@link createRoot} or the {@link graveyard
graveyard root} if no other roots were created.nt *nt * @protectednt *
@returns {module:engine/model/rootelement~RootElement} The default root for
this document.nt */nt_getDefaultRoot() {nttfor ( const root of this.roots )
{ntttif ( root !== this.graveyard ) {nttttreturn root;nttt}ntt}nnttreturn
this.graveyard;nt}nnt/**nt * Returns the default range for this selection.
The default range is a collapsed range that starts and endsnt * at the
beginning of this selection&#39;s document {@link #_getDefaultRoot default
root}.nt *nt * @protectednt * @returns {module:engine/model/range~Range}nt
*/nt_getDefaultRange() {nttconst defaultRoot =
this._getDefaultRoot();nttconst schema = this.model.schema;nntt// Find the
first position where the selection can be put.nttconst position = new
Position( defaultRoot, [ 0 ] );nttconst nearestRange =
schema.getNearestSelectionRange( position );nntt// If valid selection range
is not found - return range collapsed at the beginning of the
root.nttreturn nearestRange || new Range( position );nt}nnt/**nt * Checks
whether a given {@link module:engine/model/range~Range range} is a valid
range fornt * the {@link selection document&#39;s selection}.nt *nt *
@privatent * @param {module:engine/model/range~Range} range A range to
check.nt * @returns {Boolean} `true` if `range` is valid, `false`
otherwise.nt */nt_validateSelectionRange( range ) {nttreturn
validateTextNodePosition( range.start ) &amp;&amp;
validateTextNodePosition( range.end );nt}nnt/**nt * Performs post-fixer
loops. Executes post-fixer callbacks as long as none of them has done any
changes to the model.nt *nt * @privatent */nt_callPostFixers( writer )
{nttlet wasFixed = false;nnttdo {ntttfor ( const callback of
this._postFixers ) {nttttwasFixed = callback( writer );nnttttif ( wasFixed
) {ntttttbreak;ntttt}nttt}ntt} while ( wasFixed );nt}nnt/**nt * Fired after
each {@link module:engine/model/model~Model#enqueueChange `enqueueChange()`
block} or the outermostnt * {@link module:engine/model/model~Model#change
`change()` block} was executed and the document was changednt * during that
block&#39;s execution.nt *nt * The changes which this event will cover
include:nt *nt * * document structure changes,nt * * selection changes,nt *
* marker changes.nt *nt * If you want to be notified about all these
changes, then simply listen to this event like this:nt *nt
*ttmodel.document.on( &#39;change&#39;, () =&gt; {nt *tttconsole.log(
&#39;The Document has changed!&#39; );nt *tt} );nt *nt * If, however, you
only want to be notified about structure changes, then check whether thent
* {@link module:engine/model/differ~Differ differ} contains any changes:nt
*nt *ttmodel.document.on( &#39;change&#39;, () =&gt; {nt *tttif (
model.document.differ.getChanges().length &gt; 0 ) {nt *ttttconsole.log(
&#39;The Document has changed!&#39; );nt *ttt}nt *tt} );nt *nt * @event
changent * @param {module:engine/model/batch~Batch} batch The batch that
was used in the executed changes block.nt */n}nnmix( Document, EmitterMixin
);nn// Checks whether given range boundary position is valid for document
selection, meaning that is not betweenn// unicode surrogate pairs or base
character and combining marks.nfunction validateTextNodePosition(
rangeBoundary ) {ntconst textNode = rangeBoundary.textNode;nntif ( textNode
) {nttconst data = textNode.data;nttconst offset = rangeBoundary.offset -
textNode.startOffset;nnttreturn !isInsideSurrogatePair( data, offset )
&amp;&amp; !isInsideCombinedSymbol( data, offset );nt}nntreturn
true;n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/document.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module engine/model/markercollectionn */nnimport LiveRange from
&#39;./liverange&#39;;nimport Position from &#39;./position&#39;;nimport
Range from &#39;./range&#39;;nimport EmitterMixin from
&#39;@ckeditor/ckeditor5-utils/src/emittermixin&#39;;nimport CKEditorError
from &#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nimport mix from
&#39;@ckeditor/ckeditor5-utils/src/mix&#39;;nn/**n * The collection of all
{@link module:engine/model/markercollection~Marker markers} attached to the
document.n * It lets you {@link
module:engine/model/markercollection~MarkerCollection#get get} markers or
track them usingn * {@link
module:engine/model/markercollection~MarkerCollection#event:update} event.n
*n * To create, change or remove makers use {@link
module:engine/model/writer~Writer model writers&#39;} methods:n * {@link
module:engine/model/writer~Writer#addMarker} or {@link
module:engine/model/writer~Writer#removeMarker}. Sincen * the writer is the
only proper way to change the data model it is not possible to change
markers directly using thisn * collection. All markers created by the
writer will be automatically added to this collection.n *n * By default
there is one marker collection available as {@link
module:engine/model/model~Model#markers model property}.n *n * @see
module:engine/model/markercollection~Markern */nexport default class
MarkerCollection {nt/**nt * Creates a markers collection.nt
*/ntconstructor() {ntt/**ntt * Stores {@link ~Marker markers} added to the
collection.ntt *ntt * @privatentt * @member {Map} #_markersntt
*/nttthis._markers = new Map();nt}nnt/**nt * Iterable interface.nt *nt *
Iterates over all {@link ~Marker markers} added to the collection.nt *nt *
@returns {Iterable}nt */nt[ Symbol.iterator ]() {nttreturn
this._markers.values();nt}nnt/**nt * Checks if marker with given
`markerName` is in the collection.nt *nt * @param {String} markerName
Marker name.nt * @returns {Boolean} `true` if marker with given
`markerName` is in the collection, `false` otherwise.nt */nthas( markerName
) {nttreturn this._markers.has( markerName );nt}nnt/**nt * Returns {@link
~Marker marker} with given `markerName`.nt *nt * @param {String} markerName
Name of marker to get.nt * @returns
{module:engine/model/markercollection~Marker|null} Marker with given name
or `null` if such marker wasnt * not added to the collection.nt */ntget(
markerName ) {nttreturn this._markers.get( markerName ) || null;nt}nnt/**nt
* Creates and adds a {@link ~Marker marker} to the `MarkerCollection` with
given name on givennt * {@link module:engine/model/range~Range range}.nt
*nt * If `MarkerCollection` already had a marker with given name (or {@link
~Marker marker} was passed), the marker innt * collection is updated and
{@link module:engine/model/markercollection~MarkerCollection#event:update}
event is firednt * but only if there was a change (marker range or {@link
module:engine/model/markercollection~Marker#managedUsingOperations}nt *
flag has changed.nt *nt * @protectednt * @fires
module:engine/model/markercollection~MarkerCollection#event:updatent *
@param {String|module:engine/model/markercollection~Marker} markerOrName
Name of marker to set or marker instance to update.nt * @param
{module:engine/model/range~Range} range Marker range.nt * @param {Boolean}
[managedUsingOperations=false] Specifies whether the marker is managed
using operations.nt * @returns
{module:engine/model/markercollection~Marker} `Marker` instance which was
added or updated.nt */nt_set( markerOrName, range, managedUsingOperations =
false ) {nttconst markerName = markerOrName instanceof Marker ?
markerOrName.name : markerOrName;nttconst oldMarker = this._markers.get(
markerName );nnttif ( oldMarker ) {ntttconst oldRange =
oldMarker.getRange();ntttlet hasChanged = false;nntttif (
!oldRange.isEqual( range ) ) {nttttoldMarker._attachLiveRange(
LiveRange.createFromRange( range ) );ntttthasChanged = true;nttt}nntttif (
managedUsingOperations != oldMarker.managedUsingOperations )
{nttttoldMarker._managedUsingOperations =
managedUsingOperations;ntttthasChanged = true;nttt}nntttif ( hasChanged )
{nttttthis.fire( &#39;update:&#39; + markerName, oldMarker, oldRange, range
);nttt}nntttreturn oldMarker;ntt}nnttconst liveRange =
LiveRange.createFromRange( range );nttconst marker = new Marker(
markerName, liveRange, managedUsingOperations );nnttthis._markers.set(
markerName, marker );nttthis.fire( &#39;update:&#39; + markerName, marker,
null, range );nnttreturn marker;nt}nnt/**nt * Removes given {@link ~Marker
marker} or a marker with given name from the `MarkerCollection`.nt *nt *
@protectednt * @fires
module:engine/model/markercollection~MarkerCollection#event:updatent *
@param {String} markerOrName Marker or name of a marker to remove.nt *
@returns {Boolean} `true` if marker was found and removed, `false`
otherwise.nt */nt_remove( markerOrName ) {nttconst markerName =
markerOrName instanceof Marker ? markerOrName.name : markerOrName;nttconst
oldMarker = this._markers.get( markerName );nnttif ( oldMarker )
{ntttthis._markers.delete( markerName );ntttthis.fire( &#39;update:&#39; +
markerName, oldMarker, oldMarker.getRange(), null
);nntttthis._destroyMarker( oldMarker );nntttreturn true;ntt}nnttreturn
false;nt}nnt/**nt * Returns iterator that iterates over all markers, which
ranges contain given {@link module:engine/model/position~Position
position}.nt *nt * @param {module:engine/model/position~Position}
positionnt * @returns
{Iterable.&lt;module:engine/model/markercollection~Marker&gt;}nt */nt*
getMarkersAtPosition( position ) {nttfor ( const marker of this ) {ntttif (
marker.getRange().containsPosition( position ) ) {nttttyield
marker;nttt}ntt}nt}nnt/**nt * Returns iterator that iterates over all
markers, which intersects with given {@link module:engine/model/range~Range
range}.nt *nt * @param {module:engine/model/range~Range} rangent * @returns
{Iterable.&lt;module:engine/model/markercollection~Marker&gt;}nt */nt*
getMarkersIntersectingRange( range ) {nttfor ( const marker of this )
{ntttif ( marker.getRange().getIntersection( range ) !== null ) {nttttyield
marker;nttt}ntt}nt}nnt/**nt * Destroys marker collection and all markers
inside it.nt */ntdestroy() {nttfor ( const marker of this._markers.values()
) {ntttthis._destroyMarker( marker );ntt}nnttthis._markers =
null;nnttthis.stopListening();nt}nnt/**nt * Iterates over all markers that
starts with given `prefix`.nt *nt *ttconst markerFooA =
markersCollection.set( &#39;foo:a&#39;, rangeFooA );nt *ttconst markerFooB
= markersCollection.set( &#39;foo:b&#39;, rangeFooB );nt *ttconst
markerBarA = markersCollection.set( &#39;bar:a&#39;, rangeBarA );nt
*ttconst markerFooBarA = markersCollection.set( &#39;foobar:a&#39;,
rangeFooBarA );nt *ttArray.from( markersCollection.getMarkersGroup(
&#39;foo&#39; ) ); // [ markerFooA, markerFooB ]nt *ttArray.from(
markersCollection.getMarkersGroup( &#39;a&#39; ) ); // []nt *nt * @param
prefixnt * @returns
{Iterable.&lt;module:engine/model/markercollection~Marker&gt;}nt */nt*
getMarkersGroup( prefix ) {nttfor ( const marker of this._markers.values()
) {ntttif ( marker.name.startsWith( prefix + &#39;:&#39; ) ) {nttttyield
marker;nttt}ntt}nt}nnt/**nt * Destroys the marker.nt *nt * @privatent *
@param {module:engine/model/markercollection~Marker} marker Marker to
destroy.nt */nt_destroyMarker( marker )
{nttmarker.stopListening();nttmarker._detachLiveRange();nt}nnt/**nt * Fired
whenever marker is added, updated or removed from `MarkerCollection`.nt *nt
* @event updatent * @param {module:engine/model/markercollection~Marker}
Updated Marker.nt * @param {module:engine/model/range~Range|null} oldRange
Marker range before the update. When is not defined itnt * means that
marker is just added.nt * @param {module:engine/model/range~Range|null}
newRange Marker range after update. When is not defined itnt * means that
marker is just removed.nt */n}nnmix( MarkerCollection, EmitterMixin
);nn/**n * `Marker` is a continuous parts of model (like a range), is named
and represent some kind of information about markedn * part of model
document. In contrary to {@link module:engine/model/node~Node nodes}, which
are building blocks ofn * model document tree, markers are not stored
directly in document tree but inn * {@link
module:engine/model/model~Model#markers model markers&#39; collection}.
Still, they are document data, by givingn * additional meaning to the part
of a model document between marker start and marker end.n *n * In this
sense, markers are similar to adding and converting attributes on nodes.
The difference is that attribute isn * connected with a given node (e.g. a
character is bold no matter if it gets moved or content around it
changes).n * Markers on the other hand are continuous ranges and are
characterized by their start and end position. This means thatn * any
character in the marker is marked by the marker. For example, if a
character is moved outside of marker it stops beingn * "special&quot; and
the marker is shrunk. Similarly, when a character is moved into the marker
from other place in documentn * model, it starts being "special&quot; and
the marker is enlarged.n *n * Another upside of markers is that finding
marked part of document is fast and easy. Using attributes to mark some
nodesn * and then trying to find that part of document would require
traversing whole document tree. Marker gives instant accessn * to the range
which it is marking at the moment.n *n * Markers are built from a name and
a range.n *n * Range of the marker is updated automatically when document
changes, usingn * {@link module:engine/model/liverange~LiveRange live
range} mechanism.n *n * Name is used to group and identify markers. Names
have to be unique, but markers can be grouped byn * using common prefixes,
separated with `:`, for example: `user:john` or `search:3`. That&#39;s
useful in term of creatingn * namespaces for custom elements (e.g.
comments, highlights). You can use this prefixes inn * {@link
module:engine/model/markercollection~MarkerCollection#event:update}
listeners to listen on changes in a group of markers.n * For instance:
`model.markers.on( &#39;set:user&#39;, callback );` will be called whenever
any `user:*` markers changes.n *n * There are two types of markers.n *n *
1. Markers managed directly, without using operations. They are added
directly by {@link module:engine/model/writer~Writer}n * to the {@link
module:engine/model/markercollection~MarkerCollection} without any
additional mechanism. They can be usedn * as bookmarks or visual markers.
They are great for showing results of the find, or select link when the
focus is in the input.n *n * 1. Markers managed using operations. These
markers are also stored in {@link
module:engine/model/markercollection~MarkerCollection}n * but changes in
these markers is managed the same way all other changes in the model
structure - using operations.n * Therefore, they are handled in the undo
stack and synchronized between clients if the collaboration plugin is
enabled.n * This type of markers is useful for solutions like spell
checking or comments.n *n * Both type of them should be added / updated by
{@link module:engine/model/writer~Writer#addMarker}n * and removed by
{@link module:engine/model/writer~Writer#removeMarker} methods.n *n
*ttmodel.change( ( writer ) =&gt; {n * tttconst marker = writer.addMarker(
name, { range, usingOperation: true } );n *n * ttt// …n *n *
tttwriter.removeMarker( marker );n *tt} );n *n * See {@link
module:engine/model/writer~Writer} to find more examples.n *n * Since
markers need to track change in the document, for efficiency reasons, it is
best to create and keep as littlen * markers as possible and remove them as
soon as they are not needed anymore.n *n * Markers can be downcasted and
upcasted.n *n * Markers downcast happens on {@link
module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:addMarker}
andn * {@link
module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:removeMarker}
events.n * Use {@link module:engine/conversion/downcast-converters downcast
converters} or attach a custom converter to mentioned events.n * For {@link
module:engine/controller/datacontroller~DataController data pipeline},
marker should be downcasted to an element.n * Then, it can be upcasted back
to a marker. Again, use {@link module:engine/conversion/upcast-converters
upcast converters} orn * attach a custom converter to {@link
module:engine/conversion/upcastdispatcher~UpcastDispatcher#event:element}.n
*n * Another upside of markers is that finding marked part of document is
fast and easy. Using attributes to mark some nodesn * and then trying to
find that part of document would require traversing whole document tree.
Marker gives instant accessn * to the range which it is marking at the
moment.n *n * `Marker` instances are created and destroyed only by {@link
~MarkerCollection MarkerCollection}.n */nclass Marker {nt/**nt * Creates a
marker instance.nt *nt * @param {String} name Marker name.nt * @param
{module:engine/model/liverange~LiveRange} liveRange Range marked by the
marker.nt * @param {Boolean} managedUsingOperations Specifies whether the
marker is managed using operations.nt */ntconstructor( name, liveRange,
managedUsingOperations ) {ntt/**ntt * Marker&#39;s name.ntt *ntt *
@readonlyntt * @type {String}ntt */nttthis.name = name;nntt/**ntt * Flag
indicates if the marker is managed using operations or not.ntt *ntt *
@protectedntt * @member {Boolean}ntt */nttthis._managedUsingOperations =
managedUsingOperations;nntt/**ntt * Range marked by the marker.ntt *ntt *
@privatentt * @member {module:engine/model/liverange~LiveRange}
#_liveRangentt */nttthis._liveRange = this._attachLiveRange( liveRange
);nt}nnt/**nt * Returns value of flag indicates if the marker is managed
using operations or not.nt * See {@link ~Marker marker class description}
to learn more about marker types.nt * See {@link
module:engine/model/writer~Writer#addMarker}.nt *nt * @returns {Boolean}nt
*/ntget managedUsingOperations() {nttif ( !this._liveRange ) {ntttthrow new
CKEditorError( &#39;marker-destroyed: Cannot use a destroyed marker
instance.&#39; );ntt}nnttreturn this._managedUsingOperations;nt}nnt/**nt *
Returns current marker start position.nt *nt * @returns
{module:engine/model/position~Position}nt */ntgetStart() {nttif (
!this._liveRange ) {ntttthrow new CKEditorError( &#39;marker-destroyed:
Cannot use a destroyed marker instance.&#39; );ntt}nnttreturn
Position.createFromPosition( this._liveRange.start );nt}nnt/**nt * Returns
current marker end position.nt *nt * @returns
{module:engine/model/position~Position}nt */ntgetEnd() {nttif (
!this._liveRange ) {ntttthrow new CKEditorError( &#39;marker-destroyed:
Cannot use a destroyed marker instance.&#39; );ntt}nnttreturn
Position.createFromPosition( this._liveRange.end );nt}nnt/**nt * Returns a
range that represents current state of marker.nt *nt * Keep in mind that
returned value is a {@link module:engine/model/range~Range Range}, not ant
* {@link module:engine/model/liverange~LiveRange LiveRange}. This means
that it is up-to-date and relevant onlynt * until next model document
change. Do not store values returned by this method. Instead, store {@link
~Marker#name}nt * and get `Marker` instance from {@link
module:engine/model/markercollection~MarkerCollection MarkerCollection}
everynt * time there is a need to read marker properties. This will
guarantee that the marker has not been removed andnt * that it&#39;s data
is up-to-date.nt *nt * @returns {module:engine/model/range~Range}nt
*/ntgetRange() {nttif ( !this._liveRange ) {ntttthrow new CKEditorError(
&#39;marker-destroyed: Cannot use a destroyed marker instance.&#39;
);ntt}nnttreturn Range.createFromRange( this._liveRange );nt}nnt/**nt *
Binds new live range to marker and detach the old one if is attached.nt *nt
* @protectednt * @param {module:engine/model/liverange~LiveRange} liveRange
Live range to attachnt * @return {module:engine/model/liverange~LiveRange}
Attached live range.nt */nt_attachLiveRange( liveRange ) {nttif (
this._liveRange ) {ntttthis._detachLiveRange();ntt}nntt// Delegating does
not work with namespaces. Alternatively, we could delegate all events
(using `*`).nttliveRange.delegate( &#39;change:range&#39; ).to( this
);nttliveRange.delegate( &#39;change:content&#39; ).to( this
);nnttthis._liveRange = liveRange;nnttreturn liveRange;nt}nnt/**nt *
Unbinds and destroys currently attached live range.nt *nt * @protectednt
*/nt_detachLiveRange() {nttthis._liveRange.stopDelegating(
&#39;change:range&#39;, this );nttthis._liveRange.stopDelegating(
&#39;change:content&#39;, this
);nttthis._liveRange.detach();nttthis._liveRange = null;nt}nnt/**nt * Fired
whenever {@link ~Marker#_liveRange marker range} is changed due to changes
on {@link module:engine/model/document~Document}.nt * This is a delegated
{@link module:engine/model/liverange~LiveRange#event:change:range LiveRange
change:range event}.nt *nt * When marker is removed from {@link
module:engine/model/markercollection~MarkerCollection MarkerCollection},nt
* all event listeners listening to it should be removed. It is best to do
it onnt * {@link
module:engine/model/markercollection~MarkerCollection#event:update
MarkerCollection update event}.nt *nt * @see
module:engine/model/liverange~LiveRange#event:change:rangent * @event
change:rangent * @param {module:engine/model/range~Range} oldRangent *
@param {Object} datant */nnt/**nt * Fired whenever change on {@link
module:engine/model/document~Document} is done inside {@link
~Marker#_liveRange marker range}.nt * This is a delegated {@link
module:engine/model/liverange~LiveRange#event:change:content LiveRange
change:content event}.nt *nt * When marker is removed from {@link
module:engine/model/markercollection~MarkerCollection MarkerCollection},nt
* all event listeners listening to it should be removed. It is best to do
it onnt * {@link
module:engine/model/markercollection~MarkerCollection#event:update
MarkerCollection update event}.nt *nt * @see
module:engine/model/liverange~LiveRange#event:change:contentnt * @event
change:contentnt * @param {module:engine/model/range~Range} oldRangent *
@param {Object} datant */n}nnmix( Marker, EmitterMixin );nn/**n * Cannot
use a {@link module:engine/model/markercollection~MarkerCollection#destroy
destroyed marker} instance.n *n * @error marker-destroyedn
*/nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/markercollection.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module engine/model/livepositionn */nnimport Position from
&#39;./position&#39;;nimport Range from &#39;./range&#39;;nimport
EmitterMixin from
&#39;@ckeditor/ckeditor5-utils/src/emittermixin&#39;;nimport mix from
&#39;@ckeditor/ckeditor5-utils/src/mix&#39;;nimport CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nn/**n *
`LivePosition` is a type of {@link module:engine/model/position~Position
Position}n * that updates itself as {@link
module:engine/model/document~Document document}n * is changed through
operations. It may be used as a bookmark.n *n * *Note:* Contrary to {@link
module:engine/model/position~Position}, `LivePosition` works only in roots
that aren * {@link module:engine/model/rootelement~RootElement}.n * If
{@link module:engine/model/documentfragment~DocumentFragment} is passed,
error will be thrown.n *n * *Note:* Be very careful when dealing with
`LivePosition`. Each `LivePosition` instance bind events that mightn * have
to be unbound.n * Use {@link
module:engine/model/liveposition~LivePosition#detach} whenever you
don&#39;t need `LivePosition` anymore.n *n * @extends
module:engine/model/position~Positionn */nexport default class LivePosition
extends Position {nt/**nt * Creates a live position.nt *nt * @see
module:engine/model/position~Positionnt * @param
{module:engine/model/rootelement~RootElement} rootnt * @param
{Array.&lt;Number&gt;} pathnt * @param
{module:engine/model/position~PositionStickiness} [stickiness] Defaults to
`&#39;sticksToNext&#39;`.nt * See {@link
module:engine/model/liveposition~LivePosition#stickiness}.nt
*/ntconstructor( root, path, stickiness ) {nttsuper( root, path );nnttif (
!this.root.is( &#39;rootElement&#39; ) ) {nttt/**nttt * LivePosition&#39;s
root has to be an instance of RootElement.nttt *nttt * @error
liveposition-root-not-rootelementnttt */ntttthrow new
CKEditorError(ntttt&#39;model-liveposition-root-not-rootelement:
LivePosition\&#39;s root has to be an instance of
RootElement.&#39;nttt);ntt}nntt/**ntt * Flag representing `LivePosition`
stickiness. `LivePosition` might be sticking to previous node or next
node.ntt * Whenever some nodes are inserted at the same position as
`LivePosition`, `stickiness` is checked to decide ifntt * LivePosition
should be moved. Similar applies when a range of nodes is moved and one of
it&#39;s boundaryntt * position is same as `LivePosition`.ntt *ntt *
Examples:ntt *ntt *ttInsert:ntt *ttPosition is at | and we insert at the
same position, marked as ^:ntt *tt- | sticks to previous node:
`&lt;p&gt;f|^oo&lt;/p&gt;` =&gt; `&lt;p&gt;f|baroo&lt;/p&gt;`ntt *tt- |
sticks to next node: `&lt;p&gt;f^|oo&lt;/p&gt;` =&gt;
`&lt;p&gt;fbar|oo&lt;/p&gt;`ntt *ntt *ttMove:ntt *ttPosition is at | and
range [ ] is moved to position ^:ntt *tt- | sticks to previous node:
`&lt;<a href="oo">p>f|</a>&lt;/p&gt;&lt;p&gt;b^ar&lt;/p&gt;` =&gt;
`&lt;p&gt;f|&lt;/p&gt;&lt;p&gt;booar&lt;/p&gt;`ntt *tt- | sticks to next
node: `&lt;<a href="oo">p>f|</a>&lt;/p&gt;&lt;p&gt;b^ar&lt;/p&gt;` =&gt;
`&lt;p&gt;f&lt;/p&gt;&lt;p&gt;b|ooar&lt;/p&gt;`ntt *ntt * @member
{module:engine/model/position~PositionStickiness}
module:engine/model/liveposition~LivePosition#stickinessntt
*/nttthis.stickiness = stickiness ||
&#39;sticksToNext&#39;;nnttbindWithDocument.call( this );nt}nnt/**nt *
Unbinds all events previously bound by `LivePosition`. Use it whenever you
don&#39;t need `LivePosition` instancent * anymore (i.e. when leaving scope
in which it was declared or before re-assigning variable that wasnt *
referring to it).nt */ntdetach() {nttthis.stopListening();nt}nnt/**nt *
@staticnt * @method
module:engine/model/liveposition~LivePosition.createAfternt * @see
module:engine/model/position~Position.createAfternt * @param
{module:engine/model/node~Node} nodent * @returns
{module:engine/model/liveposition~LivePosition}nt */nnt/**nt * @staticnt *
@method module:engine/model/liveposition~LivePosition.createBeforent * @see
module:engine/model/position~Position.createBeforent * @param
{module:engine/model/node~Node} nodent * @returns
{module:engine/model/liveposition~LivePosition}nt */nnt/**nt * @staticnt *
@method
module:engine/model/liveposition~LivePosition.createFromParentAndOffsetnt *
@see module:engine/model/position~Position.createFromParentAndOffsetnt *
@param {module:engine/model/element~Element} parentnt * @param {Number}
offsetnt * @returns {module:engine/model/liveposition~LivePosition}nt
*/nnt/**nt * @staticnt * @method
module:engine/model/liveposition~LivePosition.createFromPositionnt * @see
module:engine/model/position~Position.createFromPositionnt * @param
{module:engine/model/position~Position} positionnt * @returns
{module:engine/model/liveposition~LivePosition}nt */nnt/**nt * Fired when
`LivePosition` instance is changed due to changes on {@link
module:engine/model/document~Document}.nt *nt * @event
module:engine/model/liveposition~LivePosition#changent * @param
{module:engine/model/position~Position} oldPosition Position equal to this
live position before it got changed.nt */n}nn/**n * Binds this
`LivePosition` to the {@link module:engine/model/document~Document
document} that ownsn * this position&#39;s {@link
module:engine/model/position~Position#root root}.n *n * @ignoren *
@privaten * @method
module:engine/model/liveposition~LivePosition.bindWithDocumentn */nfunction
bindWithDocument() {nt// Operation types handled by LivePosition (these are
operations that change model tree structure).ntconst supportedTypes = new
Set( [ &#39;insert&#39;, &#39;move&#39;, &#39;remove&#39;,
&#39;reinsert&#39; ]
);nntthis.listenTo(nttthis.root.document.model,ntt&#39;applyOperation&#39;,ntt(
event, args ) =&gt; {ntttconst operation = args[ 0 ];nntttif (
!operation.isDocumentOperation ) {nttttreturn;nttt}nntttif (
supportedTypes.has( operation.type ) ) {ntttttransform.call( this,
operation );nttt}ntt},ntt{ priority: &#39;low&#39; }nt);n}nn/**n * Updates
this position accordingly to the updates applied to the model. Bases on
change events.n *n * @ignoren * @privaten * @method transformn * @param
{module:engine/model/operation/operation~Operation} operation Executed
operation.n */nfunction transform( operation ) {nt/* eslint-disable
no-case-declarations */ntlet range;ntlet position;nntif ( operation.type ==
&#39;insert&#39; ) {nttrange = Range.createFromPositionAndShift(
operation.position, operation.nodes.maxOffset );nt} else {nttrange =
Range.createFromPositionAndShift( operation.getMovedRangeStart(),
operation.howMany );nttposition = operation.sourcePosition;nt}nntconst
howMany = range.end.offset - range.start.offset;ntlet transformed;nntswitch
( operation.type ) {nttcase &#39;insert&#39;:ntttconst insertBefore =
this.stickiness == &#39;sticksToNext&#39;;nttttransformed =
this._getTransformedByInsertion( range.start, howMany, insertBefore
);ntttbreak;nnttcase &#39;move&#39;:nttcase &#39;remove&#39;:nttcase
&#39;reinsert&#39;:ntttconst originalRange =
Range.createFromPositionAndShift( position, howMany );nntttconst gotMoved =
originalRange.containsPosition( this ) ||ntttt(
originalRange.start.isEqual( this ) &amp;&amp; this.stickiness ==
&#39;sticksToNext&#39; ) ||ntttt( originalRange.end.isEqual( this )
&amp;&amp; this.stickiness == &#39;sticksToPrevious&#39; );nnttt// We
can&#39;t use ._getTransformedByMove() because we have a different
if-condition.ntttif ( gotMoved ) {ntttttransformed = this._getCombined(
position, range.start );nttt} else {nttttconst insertBefore =
this.stickiness == &#39;sticksToNext&#39;;nntttt//
`Position._getTransformedByMove` is expecting `targetPosition` to be
"before&quot; moventttt// (before transformation). `range.start` is already
after the move happened.ntttt// We have to revert `targetPosition` to the
state before the move.nttttconst targetPosition =
range.start._getTransformedByInsertion( position, howMany
);nntttttransformed = this._getTransformedByMove( position, targetPosition,
howMany, insertBefore );nttt}ntttbreak;nt}nntif ( !this.isEqual(
transformed ) ) {nttconst oldPosition = Position.createFromPosition( this
);nnttthis.path = transformed.path;nttthis.root =
transformed.root;nnttthis.fire( &#39;change&#39;, oldPosition );nt}nt/*
eslint-enable no-case-declarations */n}nnmix( LivePosition, EmitterMixin
);nn/**n * Enum representing how position is "sticking&quot; with their
neighbour nodes.n * Possible values: `&#39;sticksToNext&#39;`,
`&#39;sticksToPrevious&#39;`.n *n * @typedef {String}
module:engine/model/position~PositionStickinessn
*/nnnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/liveposition.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module engine/model/utils/insertcontentn */nnimport Position from
&#39;../position&#39;;nimport LivePosition from
&#39;../liveposition&#39;;nimport Element from &#39;../element&#39;;nimport
Range from &#39;../range&#39;;nimport log from
&#39;@ckeditor/ckeditor5-utils/src/log&#39;;nimport DocumentSelection from
&#39;../documentselection&#39;;nn/**n * Inserts content into the editor
(specified selection) as one would expect the pasten * functionality to
work.n *n * *Note:* Use {@link
module:engine/model/model~Model#insertContent} instead of this function.n *
This function is only exposed to be reusable in algorithmsn * which change
the {@link module:engine/model/model~Model#insertContent}n * method&#39;s
behavior.n *n * @param {module:engine/model/model~Model} model The model in
context of which the insertionn * should be performed.n * @param
{module:engine/model/documentfragment~DocumentFragment|module:engine/model/item~Item}
content The content to insert.n * @param
{module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection}
selectionn * Selection into which the content should be inserted.n
*/nexport default function insertContent( model, content, selection )
{ntmodel.change( writer =&gt; {nttif ( !selection.isCollapsed )
{ntttmodel.deleteContent( selection );ntt}nnttconst insertion = new
Insertion( model, writer, selection.anchor );nnttlet nodesToInsert;nnttif (
content.is( &#39;documentFragment&#39; ) ) {ntttnodesToInsert =
content.getChildren();ntt} else {ntttnodesToInsert = [ content
];ntt}nnttinsertion.handleNodes( nodesToInsert, {nttt// The set of children
being inserted is the only set in this contextnttt// so it&#39;s the first
and last (it&#39;s a hack ;)).ntttisFirst: true,ntttisLast: truentt}
);nnttconst newRange = insertion.getSelectionRange();nntt/* istanbul ignore
else */nttif ( newRange ) {ntttif ( selection instanceof DocumentSelection
) {nttttwriter.setSelection( newRange );nttt} else {nttttselection.setTo(
newRange );nttt}ntt} else {nttt// We are not testing else because it&#39;s
a safe check for unpredictable edge cases:nttt// an insertion without
proper range to select.nnttt/**nttt * Cannot determine a proper selection
range after insertion.nttt *nttt * @warning insertcontent-no-rangenttt
*/ntttlog.warn( &#39;insertcontent-no-range: Cannot determine a proper
selection range after insertion.&#39; );ntt}nt} );n}nn/**n * Utility class
for performing content insertion.n *n * @privaten */nclass Insertion
{ntconstructor( model, writer, position ) {ntt/**ntt * The model in context
of which the insertion should be performed.ntt *ntt * @member
{module:engine/model~Model} modelntt */nttthis.model = model;nntt/**ntt *
Batch to which deltas will be added.ntt *ntt * @member
{module:engine/controller/writer~Batch} writerntt */nttthis.writer =
writer;nntt/**ntt * The position at which (or near which) the next node
will be inserted.ntt *ntt * @member {module:engine/model/position~Position}
positionntt */nttthis.position = position;nntt/**ntt * Elements with which
the inserted elements can be merged.ntt *ntt
*tt&lt;p&gt;x^&lt;/p&gt;&lt;p&gt;y&lt;/p&gt; + &lt;p&gt;z&lt;/p&gt; (can
merge to &lt;p&gt;x&lt;/p&gt;)ntt
*tt&lt;p&gt;x&lt;/p&gt;&lt;p&gt;^y&lt;/p&gt; + &lt;p&gt;z&lt;/p&gt; (can
merge to &lt;p&gt;y&lt;/p&gt;)ntt *tt&lt;p&gt;x^y&lt;/p&gt; +
&lt;p&gt;z&lt;/p&gt; (can merge to &lt;p&gt;xy&lt;/p&gt; which will be
split during the action,ntt *ttttttttso both its pieces will be added to
this set)ntt *ntt *ntt * @member {Set} canMergeWithntt
*/nttthis.canMergeWith = new Set( [ this.position.parent ] );nntt/**ntt *
Schema of the model.ntt *ntt * @member {module:engine/model/schema~Schema}
schemantt */nttthis.schema = model.schema;nnttthis._filterAttributesOf =
[];nt}nnt/**nt * Handles insertion of a set of nodes.nt *nt * @param
{Iterable.&lt;module:engine/model/node~Node&gt;} nodes Nodes to insert.nt *
@param {Object} parentContext Context in which parent of these nodes was
supposed to be inserted.nt * If the parent context is passed it means that
the parent element was stripped (was not allowed).nt */nthandleNodes(
nodes, parentContext ) {nttnodes = Array.from( nodes );nnttfor ( let i = 0;
i &lt; nodes.length; i++ ) {ntttconst node = nodes[ i
];nntttthis._handleNode( node, {nttttisFirst: i === 0 &amp;&amp;
parentContext.isFirst,nttttisLast: ( i === ( nodes.length - 1 ) )
&amp;&amp; parentContext.isLastnttt} );ntt}nntt// TMP this will become a
postfixer.nttthis.schema.removeDisallowedAttributes(
this._filterAttributesOf, this.writer );nttthis._filterAttributesOf =
[];nt}nnt/**nt * Returns range to be selected after insertion.nt * Returns
null if there is no valid range to select after insertion.nt *nt * @returns
{module:engine/model/range~Range|null}nt */ntgetSelectionRange() {nttif (
this.nodeToSelect ) {ntttreturn Range.createOn( this.nodeToSelect
);ntt}nnttreturn this.model.schema.getNearestSelectionRange( this.position
);nt}nnt/**nt * Handles insertion of a single node.nt *nt * @privatent *
@param {module:engine/model/node~Node} nodent * @param {Object} contextnt *
@param {Boolean} context.isFirst Whether the given node is the first one in
the content to be inserted.nt * @param {Boolean} context.isLast Whether the
given node is the last one in the content to be inserted.nt
*/nt_handleNode( node, context ) {ntt// Let&#39;s handle object in a
special way.ntt// * They should never be merged with other elements.ntt// *
If they are not allowed in any of the selection ancestors, they could be
either autoparagraphed or totally removed.nttif ( this.schema.isObject(
node ) ) {ntttthis._handleObject( node, context );nntttreturn;ntt}nntt//
Try to find a place for the given node.ntt// Split the
position.parent&#39;s branch up to a point where the node can be
inserted.ntt// If it isn&#39;t allowed in the whole branch, then of course
don&#39;t split anything.nttconst isAllowed =
this._checkAndSplitToAllowedPosition( node, context );nnttif ( !isAllowed )
{ntttthis._handleDisallowedNode( node, context
);nntttreturn;ntt}nnttthis._insert( node );nntt// After the node was
inserted we may try to merge it with its siblings.ntt// This should happen
only if it was the first and/or last of the nodes (so only with boundary
nodes)ntt// and only if the selection was in those elements
initially.ntt//ntt// E.g.:ntt// &lt;p&gt;x^&lt;/p&gt; +
&lt;p&gt;y&lt;/p&gt; =&gt; &lt;p&gt;x&lt;/p&gt;&lt;p&gt;y&lt;/p&gt; =&gt;
&lt;p&gt;xy[]&lt;/p&gt;ntt// and:ntt// &lt;p&gt;x^y&lt;/p&gt; +
&lt;p&gt;z&lt;/p&gt; =&gt; &lt;p&gt;x&lt;/p&gt;^&lt;p&gt;y&lt;/p&gt; +
&lt;p&gt;z&lt;/p&gt; =&gt;
&lt;p&gt;x&lt;/p&gt;&lt;p&gt;y&lt;/p&gt;&lt;p&gt;z&lt;/p&gt; =&gt;
&lt;p&gt;xy[]z&lt;/p&gt;ntt// but:ntt//
&lt;p&gt;x&lt;/p&gt;&lt;p&gt;^&lt;/p&gt;&lt;p&gt;z&lt;/p&gt; +
&lt;p&gt;y&lt;/p&gt; =&gt;
&lt;p&gt;x&lt;/p&gt;&lt;p&gt;y&lt;/p&gt;&lt;p&gt;z&lt;/p&gt; (no
merging)ntt// &lt;<a href="<img>“>p>x</p></a>&lt;p&gt;z&lt;/p&gt; +
&lt;p&gt;y&lt;/p&gt; =&gt;
&lt;p&gt;x&lt;/p&gt;&lt;p&gt;y&lt;/p&gt;&lt;p&gt;z&lt;/p&gt; (no merging,
note: after running deletetContentsntt//ttttttttttttttttt it&#39;s exactly
the same case as above)nttthis._mergeSiblingsOf( node, context
);nt}nnt/**nt * @privatent * @param {module:engine/model/element~Element}
node The object element.nt * @param {Object} contextnt */nt_handleObject(
node, context ) {ntt// Try finding it a place in the tree.nttif (
this._checkAndSplitToAllowedPosition( node ) ) {ntttthis._insert( node
);ntt}ntt// Try autoparagraphing.nttelse {ntttthis._tryAutoparagraphing(
node, context );ntt}nt}nnt/**nt * @privatent * @param
{module:engine/model/node~Node} node The disallowed node which needs to be
handled.nt * @param {Object} contextnt */nt_handleDisallowedNode( node,
context ) {ntt// If the node is an element, try inserting its children
(strip the parent).nttif ( node.is( &#39;element&#39; ) )
{ntttthis.handleNodes( node.getChildren(), context );ntt}ntt// If text is
not allowed, try autoparagraphing it.nttelse
{ntttthis._tryAutoparagraphing( node, context );ntt}nt}nnt/**nt *
@privatent * @param {module:engine/model/node~Node} node The node to
insert.nt */nt_insert( node ) {ntt/* istanbul ignore if */nttif (
!this.schema.checkChild( this.position, node ) ) {nttt// Algorithm&#39;s
correctness check. We should never end up here but it&#39;s good to know
that we did.nttt// Note that it would often be a silent issue if we insert
node in a place where it&#39;s not
allowed.ntttlog.error(ntttt&#39;insertcontent-wrong-position: The node
cannot be inserted on the given position.&#39;,ntttt{ node, position:
this.position }nttt);nntttreturn;ntt}nnttconst livePos =
LivePosition.createFromPosition( this.position );nnttthis.writer.insert(
node, this.position );nnttthis.position = Position.createFromPosition(
livePos );nttlivePos.detach();nntt// The last inserted object should be
selected because we can&#39;t put a collapsed selection after it.nttif (
this.schema.isObject( node ) &amp;&amp; !this.schema.checkChild(
this.position, &#39;$text&#39; ) ) {ntttthis.nodeToSelect = node;ntt} else
{ntttthis.nodeToSelect = null;ntt}nnttthis._filterAttributesOf.push( node
);nt}nnt/**nt * @privatent * @param {module:engine/model/node~Node} node
The node which could potentially be merged.nt * @param {Object} contextnt
*/nt_mergeSiblingsOf( node, context ) {nttif ( !( node instanceof Element )
) {ntttreturn;ntt}nnttconst mergeLeft = this._canMergeLeft( node, context
);nttconst mergeRight = this._canMergeRight( node, context );nttconst
mergePosLeft = LivePosition.createBefore( node );nttconst mergePosRight =
LivePosition.createAfter( node );nnttif ( mergeLeft ) {ntttconst position =
LivePosition.createFromPosition( this.position );nntttthis.writer.merge(
mergePosLeft );nntttthis.position = Position.createFromPosition( position
);ntttposition.detach();ntt}nnttif ( mergeRight ) {nttt/* istanbul ignore
if */ntttif ( !this.position.isEqual( mergePosRight ) ) {ntttt//
Algorithm&#39;s correctness check. We should never end up here but it&#39;s
good to know that we did.ntttt// At this point the insertion position
should be after the node we&#39;ll merge. If it isn&#39;t,ntttt// it should
need to be secured as in the left merge case.nttttlog.error(
&#39;insertcontent-wrong-position-on-merge: The insertion position should
equal the merge position&#39; );nttt}nnttt// Move the position to the
previous node, so it isn&#39;t moved to the graveyard on merge.nttt//
&lt;p&gt;x&lt;/p&gt;[]&lt;p&gt;y&lt;/p&gt; =&gt;
&lt;p&gt;x[]&lt;/p&gt;&lt;p&gt;y&lt;/p&gt;ntttthis.position =
Position.createAt( mergePosRight.nodeBefore, &#39;end&#39; );nnttt// OK: 
&lt;p&gt;xx[]&lt;/p&gt; + &lt;p&gt;yy&lt;/p&gt; =&gt;
&lt;p&gt;xx[]yy&lt;/p&gt; (when sticks to previous)nttt// NOK:
&lt;p&gt;xx[]&lt;/p&gt; + &lt;p&gt;yy&lt;/p&gt; =&gt;
&lt;p&gt;xxyy[]&lt;/p&gt; (when sticks to next)ntttconst position = new
LivePosition( this.position.root, this.position.path,
&#39;sticksToPrevious&#39; );nntttthis.writer.merge( mergePosRight
);nntttthis.position = Position.createFromPosition( position
);ntttposition.detach();ntt}nnttif ( mergeLeft || mergeRight ) {nttt//
After merge elements that were marked by _insert() to be filtered might be
gone sonttt// we need to mark the new
container.ntttthis._filterAttributesOf.push( this.position.parent
);ntt}nnttmergePosLeft.detach();nttmergePosRight.detach();nt}nnt/**nt *
Checks whether specified node can be merged with previous sibling
element.nt *nt * @privatent * @param {module:engine/model/node~Node} node
The node which could potentially be merged.nt * @param {Object} contextnt *
@returns {Boolean}nt */nt_canMergeLeft( node, context ) {nttconst
previousSibling = node.previousSibling;nnttreturn context.isFirst
&amp;&amp;nttt( previousSibling instanceof Element )
&amp;&amp;ntttthis.canMergeWith.has( previousSibling )
&amp;&amp;ntttthis.model.schema.checkMerge( previousSibling, node
);nt}nnt/**nt * Checks whether specified node can be merged with next
sibling element.nt *nt * @privatent * @param
{module:engine/model/node~Node} node The node which could potentially be
merged.nt * @param {Object} contextnt * @returns {Boolean}nt
*/nt_canMergeRight( node, context ) {nttconst nextSibling =
node.nextSibling;nnttreturn context.isLast &amp;&amp;nttt( nextSibling
instanceof Element ) &amp;&amp;ntttthis.canMergeWith.has( nextSibling )
&amp;&amp;ntttthis.model.schema.checkMerge( node, nextSibling );nt}nnt/**nt
* Tries wrapping the node in a new paragraph and inserting it this way.nt
*nt * @privatent * @param {module:engine/model/node~Node} node The node
which needs to be autoparagraphed.nt * @param {Object} contextnt
*/nt_tryAutoparagraphing( node, context ) {nttconst paragraph =
this.writer.createElement( &#39;paragraph&#39; );nntt// Do not
autoparagraph if the paragraph won&#39;t be allowed there,ntt// cause that
would lead to an infinite loop. The paragraph would be rejected inntt// the
next _handleNode() call and we&#39;d be here again.nttif (
this._getAllowedIn( paragraph, this.position.parent ) &amp;&amp;
this.schema.checkChild( paragraph, node ) ) {ntttparagraph._appendChild(
node );ntttthis._handleNode( paragraph, context );ntt}nt}nnt/**nt *
@privatent * @param {module:engine/model/node~Node} nodent * @returns
{Boolean} Whether an allowed position was found.nt * `false` is returned if
the node isn&#39;t allowed at any position up in the tree, `true` if was.nt
*/nt_checkAndSplitToAllowedPosition( node ) {nttconst allowedIn =
this._getAllowedIn( node, this.position.parent );nnttif ( !allowedIn )
{ntttreturn false;ntt}nnttwhile ( allowedIn != this.position.parent )
{nttt// If a parent which we&#39;d need to leave is a limit element,
break.ntttif ( this.schema.isLimit( this.position.parent ) ) {nttttreturn
false;nttt}nntttif ( this.position.isAtStart ) {nttttconst parent =
this.position.parent;nttttthis.position = Position.createBefore( parent
);nntttt// Special case – parent is empty (&lt;p&gt;^&lt;/p&gt;) so
isAtStart == isAtEnd == true.ntttt// We can remove the element after moving
selection out of it.nttttif ( parent.isEmpty ) {ntttttthis.writer.remove(
parent );ntttt}nttt} else if ( this.position.isAtEnd ) {nttttthis.position
= Position.createAfter( this.position.parent );nttt} else {nttttconst
tempPos = Position.createAfter( this.position.parent
);nnttttthis.writer.split( this.position );nnttttthis.position =
tempPos;nnttttthis.canMergeWith.add( this.position.nodeAfter
);nttt}ntt}nnttreturn true;nt}nnt/**nt * Gets the element in which the
given node is allowed. It checks the passed element and all its
ancestors.nt *nt * @privatent * @param {module:engine/model/node~Node} node
The node to check.nt * @param {module:engine/model/element~Element} element
The element in which the node&#39;s correctness should be checked.nt *
@returns {module:engine/model/element~Element|null}nt */nt_getAllowedIn(
node, element ) {nttif ( this.schema.checkChild( element, node ) )
{ntttreturn element;ntt}nnttif ( element.parent ) {ntttreturn
this._getAllowedIn( node, element.parent );ntt}nnttreturn
null;nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/utils/insertcontent.jsn// module id = nulln//
module chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module engine/model/utils/deletecontentn */nnimport
LivePosition from &#39;../liveposition&#39;;nimport Position from
&#39;../position&#39;;nimport Range from &#39;../range&#39;;nimport
DocumentSelection from &#39;../documentselection&#39;;nn/**n * Deletes
content of the selection and merge siblings. The resulting selection is
always collapsed.n *n * *Note:* Use {@link
module:engine/model/model~Model#deleteContent} instead of this function.n *
This function is only exposed to be reusable in algorithmsn * which change
the {@link module:engine/model/model~Model#deleteContent}n * method&#39;s
behavior.n *n * @param {module:engine/model/model~Model} model The model in
context of which the insertionn * should be performed.n * @param
{module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection}
selectionn * Selection of which the content should be deleted.n * @param
{module:engine/model/batch~Batch} batch Batch to which the deltas will be
added.n * @param {Object} [options]n * @param {Boolean}
[options.leaveUnmerged=false] Whether to merge elements after removing the
content of the selection.n *n * For example `&lt;<a
href="x</heading><paragraph>y”>heading>x</a>y&lt;/paragraph&gt;` will
become:n *n * * `&lt;heading&gt;x^y&lt;/heading&gt;` with the option
disabled (`leaveUnmerged == false`)n * *
`&lt;heading&gt;x^&lt;/heading&gt;&lt;paragraph&gt;y&lt;/paragraph&gt;`
with enabled (`leaveUnmerged == true`).n *n * Note: {@link
module:engine/model/schema~Schema#isObject object} and {@link
module:engine/model/schema~Schema#isLimit limit}n * elements will not be
merged.n *n * @param {Boolean} [options.doNotResetEntireContent=false]
Whether to skip replacing the entire content with an * paragraph when the
entire content was selected.n *n * For example `&lt;<a
href="x</heading><paragraph>y“>heading></a>&lt;/paragraph&gt;` will
become:n *n * * `&lt;paragraph&gt;^&lt;/paragraph&gt;` with the option
disabled (`doNotResetEntireContent == false`)n * *
`&lt;heading&gt;^&lt;/heading&gt;` with enabled (`doNotResetEntireContent
== true`).n */nexport default function deleteContent( model, selection,
options = {} ) {ntif ( selection.isCollapsed ) {nttreturn;nt}nntconst
schema = model.schema;nntmodel.change( writer =&gt; {ntt// 1. Replace the
entire content with paragraph.ntt// See: <a
href="https://github.com/ckeditor/ckeditor5-engine/issues/1012#issuecomment-315017594.\n\t\tif">github.com/ckeditor/ckeditor5-engine/issues/1012#issuecomment-315017594.nttif</a>
( !options.doNotResetEntireContent &amp;&amp;
shouldEntireContentBeReplacedWithParagraph( schema, selection ) )
{ntttreplaceEntireContentWithParagraph( writer, selection, schema
);nntttreturn;ntt}nnttconst selRange = selection.getFirstRange();nttconst
startPos = selRange.start;nttconst endPos =
LivePosition.createFromPosition( selRange.end );nntt// 2. Remove the
content if there is any.nttif ( !selRange.start.isTouching( selRange.end )
) {ntttwriter.remove( selRange );ntt}nntt// 3. Merge elements in the right
branch to the elements in the left branch.ntt// The only reasonable (in
terms of data and selection correctness) case in which we need to do that
is:ntt//ntt// &lt;heading <a
href="</heading><paragraph>”>type=1>Fo</a>ar&lt;/paragraph&gt; =&gt;
&lt;heading type=1&gt;Fo^ar&lt;/heading&gt;ntt//ntt// However, the
algorithm supports also merging deeper structures (up to the depth of the
shallower branch),ntt// as it&#39;s hard to imagine what should actually be
the default behavior. Usually, specific features willntt// want to override
that behavior anyway.nttif ( !options.leaveUnmerged ) {ntttmergeBranches(
writer, startPos, endPos );nnttt// TMP this will be replaced with a
postifxer.nttt// We need to check and strip disallowed attributes in all
nested nodes because after mergenttt// some attributes could end up in a
path where are disallowed.nttt//nttt// e.g. bold is disallowed for
&lt;H1&gt;nttt//
&lt;h1&gt;Fo{o&lt;/h1&gt;&lt;p&gt;b}a&lt;b&gt;r</strong>&lt;p&gt; -&gt;
&lt;h1&gt;Fo{}a<strong>r</strong>&lt;h1&gt; -&gt;
&lt;h1&gt;Fo{}ar&lt;h1&gt;.ntttschema.removeDisallowedAttributes(
startPos.parent.getChildren(), writer );ntt}nnttif ( selection instanceof
DocumentSelection ) {ntttwriter.setSelection( startPos );ntt} else
{ntttselection.setTo( startPos );ntt}nntt// 4. Autoparagraphing.ntt// Check
if a text is allowed in the new container. If not, try to create a new
paragraph (if it&#39;s allowed here).nttif ( shouldAutoparagraph( schema,
startPos ) ) {ntttinsertParagraph( writer, startPos, selection
);ntt}nnttendPos.detach();nt} );n}nn// This function is a result of
reaching the Ballmer&#39;s peak for just the right amount of time.n// Even
I had troubles documenting it after a while and after reading it again I
couldn&#39;t believe that it really works.nfunction mergeBranches( writer,
startPos, endPos ) {ntconst startParent = startPos.parent;ntconst endParent
= endPos.parent;nnt// If both positions ended up in the same parent, then
there&#39;s nothing more to merge:nt//
&lt;$root&gt;&lt;p&gt;x[]&lt;/p&gt;&lt;p&gt;{}y&lt;/p&gt;&lt;/$root&gt;
=&gt; &lt;$root&gt;&lt;p&gt;xy&lt;/p&gt;[]{}&lt;/$root&gt;ntif (
startParent == endParent ) {nttreturn;nt}nnt// If one of the positions is a
root, then there&#39;s nothing more to merge (at least in the current state
of implementation).nt// Theoretically in this case we could unwrap the
&lt;p&gt;: &lt;$root&gt;x[]&lt;p&gt;{}y&lt;/p&gt;&lt;/$root&gt;, but we
don&#39;t need to support it yetnt// so let&#39;s just abort.ntif (
!startParent.parent || !endParent.parent ) {nttreturn;nt}nnt// Check if
operations we&#39;ll need to do won&#39;t need to cross object or limit
boundaries.nt// E.g., we can&#39;t merge endParent into startParent in this
case:nt//
&lt;limit&gt;&lt;startParent&gt;x[]&lt;/startParent&gt;&lt;/limit&gt;&lt;endParent&gt;{}&lt;/endParent&gt;ntif
( !checkCanBeMerged( startPos, endPos, writer.model.schema ) )
{nttreturn;nt}nnt// Remember next positions to merge. For example:nt//
&lt;a&gt;<strong>x[]</strong>&lt;/a&gt;&lt;c&gt;&lt;d&gt;{}y&lt;/d&gt;&lt;/c&gt;nt//
will become:nt//
&lt;a&gt;<strong>xy</strong>[]&lt;/a&gt;&lt;c&gt;{}&lt;/c&gt;ntstartPos =
Position.createAfter( startParent );ntendPos = Position.createBefore(
endParent );nntif ( !endPos.isEqual( startPos ) ) {ntt// In this case,
before we merge, we need to move `endParent` to the `startPos`:ntt//
&lt;a&gt;<strong>x[]</strong>&lt;/a&gt;&lt;c&gt;&lt;d&gt;{}y&lt;/d&gt;&lt;/c&gt;ntt//
becomes:ntt//
&lt;a&gt;<strong>x</strong>[]&lt;d&gt;y&lt;/d&gt;&lt;/a&gt;&lt;c&gt;{}&lt;/c&gt;nttwriter.insert(
endParent, startPos );nt}nnt// Merge two siblings:nt//
&lt;a&gt;x&lt;/a&gt;[]<strong>y</strong> -&gt; &lt;a&gt;xy&lt;/a&gt; (the
usual case)nt//
&lt;a&gt;<strong>x</strong>[]&lt;d&gt;y&lt;/d&gt;&lt;/a&gt;&lt;c&gt;&lt;/c&gt;
-&gt; &lt;a&gt;<strong>xy</strong>[]&lt;/a&gt;&lt;c&gt;&lt;/c&gt; (this is
the "move parent&quot; case shown above)ntwriter.merge( startPos );nnt//
Remove empty end ancestors:nt// &lt;<a
href="o</a><a><c>bar“>a>fo</a><strong>&lt;/c&gt;&lt;/a&gt;</strong>nt//
becomes:nt//
&lt;a&gt;fo[]&lt;/a&gt;<strong>&lt;a&gt;{}&lt;/a&gt;</strong>nt// So we can
remove &lt;a&gt; and <strong>.ntwhile ( endPos.parent.isEmpty ) {nttconst
parentToRemove = endPos.parent;nnttendPos = Position.createBefore(
parentToRemove );nnttwriter.remove( parentToRemove );nt}nnt// Continue
merging next level.ntmergeBranches( writer, startPos, endPos );n}nnfunction
shouldAutoparagraph( schema, position ) {ntconst isTextAllowed =
schema.checkChild( position, &#39;$text&#39; );ntconst isParagraphAllowed =
schema.checkChild( position, &#39;paragraph&#39; );nntreturn !isTextAllowed
&amp;&amp; isParagraphAllowed;n}nn// Check if parents of two positions can
be merged by checking if there are no limit/objectn// boundaries between
those two positions.n//n// E.g. in
&lt;bQ&gt;&lt;p&gt;x[]&lt;/p&gt;&lt;/bQ&gt;&lt;widget&gt;&lt;caption&gt;{}&lt;/caption&gt;&lt;/widget&gt;n//
we&#39;ll check &lt;p&gt;, &lt;bQ&gt;, &lt;widget&gt; and
&lt;caption&gt;.n// Usually, widget and caption are marked as
objects/limits in the schema, so in this case merging will be
blocked.nfunction checkCanBeMerged( leftPos, rightPos, schema ) {ntconst
rangeToCheck = new Range( leftPos, rightPos );nntfor ( const value of
rangeToCheck.getWalker() ) {nttif ( schema.isObject( value.item ) ||
schema.isLimit( value.item ) ) {ntttreturn false;ntt}nt}nntreturn
true;n}nnfunction insertParagraph( writer, position, selection ) {ntconst
paragraph = writer.createElement( &#39;paragraph&#39; );nntwriter.insert(
paragraph, position );nntif ( selection instanceof DocumentSelection )
{nttwriter.setSelection( paragraph, 0 );nt} else {nttselection.setTo(
paragraph, 0 );nt}n}nnfunction replaceEntireContentWithParagraph( writer,
selection ) {ntconst limitElement = writer.model.schema.getLimitElement(
selection );nntwriter.remove( Range.createIn( limitElement )
);ntinsertParagraph( writer, Position.createAt( limitElement ), selection
);n}nn// We want to replace the entire content with a paragraph when:n// *
the entire content is selected,n// * selection contains at least two
elements,n// * whether the paragraph is allowed in schema in the common
ancestor.nfunction shouldEntireContentBeReplacedWithParagraph( schema,
selection ) {ntconst limitElement = schema.getLimitElement( selection
);nntif ( !selection.containsEntireContent( limitElement ) ) {nttreturn
false;nt}nntconst range = selection.getFirstRange();nntif (
range.start.parent == range.end.parent ) {nttreturn false;nt}nntreturn
schema.checkChild( limitElement, &#39;paragraph&#39;
);n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/utils/deletecontent.jsn// module id = nulln//
module chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module engine/model/utils/modifyselectionn */nnimport Position
from &#39;../position&#39;;nimport TreeWalker from
&#39;../treewalker&#39;;nimport Range from &#39;../range&#39;;nimport {
isInsideSurrogatePair, isInsideCombinedSymbol } from
&#39;@ckeditor/ckeditor5-utils/src/unicode&#39;;nimport DocumentSelection
from &#39;../documentselection&#39;;nnconst wordBoundaryCharacters = &#39;
,.?!:;&quot;-()&#39;;nn/**n * Modifies the selection. Currently, the
supported modifications are:n *n * * Extending. The selection focus is
moved in the specified `options.direction` with a step specified in
`options.unit`.n * Possible values for `unit` are:n *  *
`&#39;character&#39;` (default) - moves selection by one user-perceived
character. In most cases this means moving by onen *  character in `String`
sense. However, unicode also defines "combing marks&quot;. These are
special symbols, that combinesn *  with a symbol before it (&quot;base
character&quot;) to create one user-perceived character. For example, `q̣̇`
is a normaln *  letter `q` with two "combining marks&quot;: upper dot
(`Ux0307`) and lower dot (`Ux0323`). For most actions, i.e. extendingn * 
selection by one position, it is correct to include both "base
character&quot; and all of it&#39;s "combining marks&quot;. That isn *  why
`&#39;character&#39;` value is most natural and common method of modifying
selection.n *  * `&#39;codePoint&#39;` - moves selection by one unicode
code point. In contrary to, `&#39;character&#39;` unit, this will insertn *
selection between "base character&quot; and "combining mark&quot;, because
"combining marks&quot; have their own unicode code points.n *  However, for
technical reasons, unicode code points with values above `UxFFFF` are
represented in native `String` byn *  two characters, called "surrogate
pairs&quot;. Halves of "surrogate pairs&quot; have a meaning only when
placed next to each other.n *  For example `𨭎` is represented in `String`
by `\uD862\uDF4E`. Both `\uD862` and `\uDF4E` do not have any meaningn * 
outside the pair (are rendered as ? when alone). Position between them
would be incorrect. In this case, selectionn *  extension will include
whole "surrogate pair&quot;.n *  * `&#39;word&#39;` - moves selection by a
whole word.n *n * *Note:* if you extend a forward selection in a backward
direction you will in fact shrink it.n *n * *Note:* Use {@link
module:engine/model/model~Model#modifySelection} instead of this function.n
* This function is only exposed to be reusable in algorithmsn * which
change the {@link module:engine/model/model~Model#modifySelection}n *
method&#39;s behavior.n *n * @param {module:engine/model/model~Model} model
The model in context of whichn * the selection modification should be
performed.n * @param
{module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection}
selectionn * The selection to modify.n * @param {Object} [options]n *
@param {&#39;forward&#39;|&#39;backward&#39;}
[options.direction=&#39;forward&#39;] The direction in which the selection
should be modified.n * @param
{&#39;character&#39;|&#39;codePoint&#39;|&#39;word&#39;}
[options.unit=&#39;character&#39;] The unit by which selection should be
modified.n */nexport default function modifySelection( model, selection,
options = {} ) {ntconst schema = model.schema;ntconst isForward =
options.direction != &#39;backward&#39;;ntconst unit = options.unit ?
options.unit : &#39;character&#39;;nntconst focus =
selection.focus;nntconst walker = new TreeWalker( {nttboundaries:
getSearchRange( focus, isForward ),nttsingleCharacters: true,nttdirection:
isForward ? &#39;forward&#39; : &#39;backward&#39;nt} );nntconst data = {
walker, schema, isForward, unit };nntlet next;nntwhile ( ( next =
walker.next() ) ) {nttif ( next.done ) {ntttreturn;ntt}nnttconst position =
tryExtendingTo( data, next.value );nnttif ( position ) {ntttif ( selection
instanceof DocumentSelection ) {nttttmodel.change( writer =&gt;
{ntttttwriter.setSelectionFocus( position );ntttt} );nttt} else
{nttttselection.setFocus( position );nttt}nntttreturn;ntt}nt}n}nn// Checks
whether the selection can be extended to the the walker&#39;s next value
(next position).n// @param {{ walker, unit, isForward, schema }} datan//
@param {module:engine/view/treewalker~TreeWalkerValue} valuenfunction
tryExtendingTo( data, value ) {nt// If found text, we can certainly put the
focus in it. Let&#39;s just find a correct positionnt// based on the
unit.ntif ( value.type == &#39;text&#39; ) {nttif ( data.unit ===
&#39;word&#39; ) {ntttreturn getCorrectWordBreakPosition( data.walker,
data.isForward );ntt}nnttreturn getCorrectPosition( data.walker, data.unit,
data.isForward );nt}nnt// Entering an element.ntif ( value.type == (
data.isForward ? &#39;elementStart&#39; : &#39;elementEnd&#39; ) ) {ntt//
If it&#39;s an object, we can select it now.nttif ( data.schema.isObject(
value.item ) ) {ntttreturn Position.createAt( value.item, data.isForward ?
&#39;after&#39; : &#39;before&#39; );ntt}nntt// If text allowed on this
position, extend to this place.nttif ( data.schema.checkChild(
value.nextPosition, &#39;$text&#39; ) ) {ntttreturn
value.nextPosition;ntt}nt}nt// Leaving an element.ntelse {ntt// If leaving
a limit element, stop.nttif ( data.schema.isLimit( value.item ) ) {nttt//
NOTE: Fast-forward the walker until the end.ntttdata.walker.skip( () =&gt;
true );nntttreturn;ntt}nntt// If text allowed on this position, extend to
this place.nttif ( data.schema.checkChild( value.nextPosition,
&#39;$text&#39; ) ) {ntttreturn value.nextPosition;ntt}nt}n}nn// Finds a
correct position by walking in a text node and checking whether selection
can be extended to given positionn// or should be extended further.n//n//
@param {module:engine/model/treewalker~TreeWalker} walkern// @param
{String} unit The unit by which selection should be modified.nfunction
getCorrectPosition( walker, unit ) {ntconst textNode =
walker.position.textNode;nntif ( textNode ) {nttconst data =
textNode.data;nttlet offset = walker.position.offset -
textNode.startOffset;nnttwhile ( isInsideSurrogatePair( data, offset ) || (
unit == &#39;character&#39; &amp;&amp; isInsideCombinedSymbol( data, offset
) ) ) {ntttwalker.next();nntttoffset = walker.position.offset -
textNode.startOffset;ntt}nt}nntreturn walker.position;n}nn// Finds a
correct position of a word break by walking in a text node and checking
whether selection can be extended to given positionn// or should be
extended further.n//n// @param {module:engine/model/treewalker~TreeWalker}
walkern// @param {Boolean} isForward Is the direction in which the
selection should be modified is forward.nfunction
getCorrectWordBreakPosition( walker, isForward ) {ntlet textNode =
walker.position.textNode;nntif ( textNode ) {nttlet offset =
walker.position.offset - textNode.startOffset;nnttwhile (
!isAtWordBoundary( textNode.data, offset, isForward ) &amp;&amp;
!isAtNodeBoundary( textNode, offset, isForward ) )
{ntttwalker.next();nnttt// Check of adjacent text nodes with different
attributes (like BOLD).nttt// Example          : &#39;foofoo []bar&lt;$text
bold=&quot;true&quot;&gt;bar&lt;/$text&gt; bazbaz&#39;nttt// should expand
to : &#39;foofoo [bar&lt;$text bold=&quot;true&quot;&gt;bar&lt;/$text&gt;]
bazbaz&#39;.ntttconst nextNode = isForward ? walker.position.nodeAfter :
walker.position.nodeBefore;nntttif ( nextNode ) {ntttt// Check boundary
char of an adjacent text node.nttttconst boundaryChar =
nextNode.data.charAt( isForward ? 0 : nextNode.data.length - 1 );nntttt//
Go to the next node if the character at the boundary of that node belongs
to the same word.nttttif ( !wordBoundaryCharacters.includes( boundaryChar )
) {nttttt// If adjacent text node belongs to the same word go to it &amp;
reset values.ntttttwalker.next();nnttttttextNode =
walker.position.textNode;ntttt}nttt}nntttoffset = walker.position.offset -
textNode.startOffset;ntt}nt}nntreturn walker.position;n}nnfunction
getSearchRange( start, isForward ) {ntconst root = start.root;ntconst
searchEnd = Position.createAt( root, isForward ? &#39;end&#39; : 0 );nntif
( isForward ) {nttreturn new Range( start, searchEnd );nt} else {nttreturn
new Range( searchEnd, start );nt}n}nn// Checks if selection is on word
boundary.n//n// @param {String} data The text node value to investigate.n//
@param {Number} offset Position offset.n// @param {Boolean} isForward Is
the direction in which the selection should be modified is
forward.nfunction isAtWordBoundary( data, offset, isForward ) {nt// The
offset to check depends on direction.ntconst offsetToCheck = offset + (
isForward ? 0 : -1 );nntreturn wordBoundaryCharacters.includes(
data.charAt( offsetToCheck ) );n}nn// Checks if selection is on node
boundary.n//n// @param {module:engine/model/text~Text} textNode The text
node to investigate.n// @param {Number} offset Position offset.n// @param
{Boolean} isForward Is the direction in which the selection should be
modified is forward.nfunction isAtNodeBoundary( textNode, offset, isForward
) {ntreturn offset === ( isForward ? textNode.endOffset : 0
);n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/utils/modifyselection.jsn// module id =
nulln// module chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module engine/model/utils/getselectedcontentn
*/nnimport Range from &#39;../range&#39;;nimport Position from
&#39;../position&#39;;nn/**n * Gets a clone of the selected content.n *n *
For example, for the following selection:n *n * “`htmln * &lt;<a
href="st</h></quote><p>se”>p>x</p><quote><p>y</p><h>fir</a>cond&lt;/p&gt;&lt;p&gt;z&lt;/p&gt;n
* “`n *n * It will return a document fragment with such a content:n *n *
“`htmln *
&lt;quote&gt;&lt;h&gt;st&lt;/h&gt;&lt;/quote&gt;&lt;p&gt;se&lt;/p&gt;n *
“`n *n * @param {module:engine/model/model~Model} model The model in
context of whichn * the selection modification should be performed.n *
@param
{module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection}
selectionn * The selection of which content will be returned.n * @returns
{module:engine/model/documentfragment~DocumentFragment}n */nexport default
function getSelectedContent( model, selection ) {ntreturn model.change(
writer =&gt; {nttconst frag = writer.createDocumentFragment();nttconst
range = selection.getFirstRange();nnttif ( !range || range.isCollapsed )
{ntttreturn frag;ntt}nnttconst root = range.start.root;nttconst commonPath
= range.start.getCommonPath( range.end );nttconst commonParent =
root.getNodeByPath( commonPath );nntt// ## 1st stepntt//ntt// First,
we&#39;ll clone a fragment represented by a minimal flat rangentt//
containing the original range to be cloned.ntt// E.g. let&#39;s consider
such a range:ntt//ntt// &lt;<a
href="st</h></quote><p>se“>p>x</p><quote><p>y</p><h>fir</a>cond&lt;/p&gt;&lt;p&gt;z&lt;/p&gt;ntt//ntt//
A minimal flat range containing this one is:ntt//ntt// &lt;<a
href="<quote><p>y</p><h>first</h></quote><p>second</p>”>p>x</p></a>&lt;p&gt;z&lt;/p&gt;ntt//ntt//
We can easily clone this structure, preserving e.g. the &lt;quote&gt;
element.nttlet flatSubtreeRange;nnttif ( range.start.parent ==
range.end.parent ) {nttt// The original range is flat, so take
it.ntttflatSubtreeRange = range;ntt} else {ntttflatSubtreeRange =
Range.createFromParentsAndOffsets(nttttcommonParent, range.start.path[
commonPath.length ],nttttcommonParent, range.end.path[ commonPath.length ]
+ 1nttt);ntt}nnttconst howMany = flatSubtreeRange.end.offset -
flatSubtreeRange.start.offset;nntt// Clone the whole contents.nttfor (
const item of flatSubtreeRange.getItems( { shallow: true } ) ) {ntttif (
item.is( &#39;textProxy&#39; ) ) {nttttwriter.appendText( item.data,
item.getAttributes(), frag );nttt} else {nttttwriter.append( item._clone(
true ), frag );nttt}ntt}nntt// ## 2nd stepntt//ntt// If the original range
wasn&#39;t flat, then we need to remove the excess nodes from the both ends
of the cloned fragment.ntt//ntt// For example, for the range shown in the
1st step comment, we need to remove these pieces:ntt//ntt// &lt;<a
href="<p>y</p>“>quote></a>&lt;<a
href="cond">h>[fir]st</h></quote><p>se</a>&lt;/p&gt;ntt//ntt// So this will
be the final copied content:ntt//ntt//
&lt;quote&gt;&lt;h&gt;st&lt;/h&gt;&lt;/quote&gt;&lt;p&gt;se&lt;/p&gt;ntt//ntt//
In order to do that, we remove content from these two ranges:ntt//ntt//
[&lt;<a href="cond</p>”>quote><p>y</p><h>fir]st</h></quote><p>se</a>nttif (
flatSubtreeRange != range ) {nttt// Find the position of the original range
in the cloned fragment.ntttconst newRange = range._getTransformedByMove(
flatSubtreeRange.start, Position.createAt( frag, 0 ), howMany )[ 0
];nntttconst leftExcessRange = new Range( Position.createAt( frag ),
newRange.start );ntttconst rightExcessRange = new Range( newRange.end,
Position.createAt( frag, &#39;end&#39; ) );nntttremoveRangeContent(
rightExcessRange, writer );ntttremoveRangeContent( leftExcessRange, writer
);ntt}nnttreturn frag;nt} );n}nn// After <a
href="https://github.com/ckeditor/ckeditor5-engine/issues/690">github.com/ckeditor/ckeditor5-engine/issues/690</a>
is fixed,n// this function will, most likely, be able to rewritten using
getMinimalFlatRanges().nfunction removeRangeContent( range, writer )
{ntconst parentsToCheck = [];nntArray.from( range.getItems( { direction:
&#39;backward&#39; } ) )ntt// We should better store ranges because text
proxies will lose integrityntt// with the text nodes when we&#39;ll start
removing content.ntt.map( item =&gt; Range.createOn( item ) )ntt// Filter
only these items which are fully contained in the passed range.ntt//ntt//
E.g. for the following range:
[&lt;quote&gt;&lt;p&gt;y&lt;/p&gt;&lt;h&gt;fir]st&lt;/h&gt;ntt// the walker
will return the entire &lt;h&gt; element, when only the "fir&quot; item
inside it is fully contained.ntt.filter( itemRange =&gt; {nttt// We should
be able to use Range.containsRange, but <a
href="https://github.com/ckeditor/ckeditor5-engine/issues/691.\n\t\t\tconst">github.com/ckeditor/ckeditor5-engine/issues/691.ntttconst</a>
contained =ntttt( itemRange.start.isAfter( range.start ) ||
itemRange.start.isEqual( range.start ) ) &amp;&amp;ntttt(
itemRange.end.isBefore( range.end ) || itemRange.end.isEqual( range.end )
);nntttreturn contained;ntt} )ntt.forEach( itemRange =&gt;
{ntttparentsToCheck.push( itemRange.start.parent );nntttwriter.remove(
itemRange );ntt} );nnt// Remove ancestors of the removed items if they
turned to be empty nownt// (their whole content was contained in the
range).ntparentsToCheck.forEach( parentToCheck =&gt; {nttlet parent =
parentToCheck;nnttwhile ( parent.parent &amp;&amp; parent.isEmpty )
{ntttconst removeRange = Range.createOn( parent );nntttparent =
parent.parent;nntttwriter.remove( removeRange );ntt}nt}
);n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/utils/getselectedcontent.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module engine/model/modeln */nn// Load all basic
deltas and transformations, they register themselves.nimport
&#39;./delta/basic-deltas&#39;;nimport
&#39;./delta/basic-transformations&#39;;nnimport Batch from
&#39;./batch&#39;;nimport Writer from &#39;./writer&#39;;nimport Schema
from &#39;./schema&#39;;nimport Document from &#39;./document&#39;;nimport
MarkerCollection from &#39;./markercollection&#39;;nimport ObservableMixin
from &#39;@ckeditor/ckeditor5-utils/src/observablemixin&#39;;nimport mix
from &#39;@ckeditor/ckeditor5-utils/src/mix&#39;;nimport deltaTransform
from &#39;./delta/transform&#39;;nimport ModelElement from
&#39;./element&#39;;nimport ModelRange from &#39;./range&#39;;nnimport
insertContent from &#39;./utils/insertcontent&#39;;nimport deleteContent
from &#39;./utils/deletecontent&#39;;nimport modifySelection from
&#39;./utils/modifyselection&#39;;nimport getSelectedContent from
&#39;./utils/getselectedcontent&#39;;nn/**n * Editor&#39;s data model. Read
about the model in then * {@glink
framework/guides/architecture/editing-engine engine architecture guide}.n
*n * @mixes module:utils/observablemixin~ObservableMixinn */nexport default
class Model {ntconstructor() {ntt/**ntt * Model&#39;s marker collection.ntt
*ntt * @readonlyntt * @member
{module:engine/model/markercollection~MarkerCollection}ntt
*/nttthis.markers = new MarkerCollection();nntt/**ntt * Model&#39;s
document.ntt *ntt * @readonlyntt * @member
{module:engine/model/document~Document}ntt */nttthis.document = new
Document( this );nntt/**ntt * Model&#39;s schema.ntt *ntt * @readonlyntt *
@member {module:engine/model/schema~Schema}ntt */nttthis.schema = new
Schema();nntt/**ntt * All callbacks added by {@link
module:engine/model/model~Model#change} orntt * {@link
module:engine/model/model~Model#enqueueChange} methods waiting to be
executed.ntt *ntt * @privatentt * @type {Array.&lt;Function&gt;}ntt
*/nttthis._pendingChanges = [];nntt/**ntt * The last created and currently
used writer instance.ntt *ntt * @privatentt * @member
{module:engine/model/writer~Writer}ntt */nttthis._currentWriter =
null;nntt[ &#39;insertContent&#39;, &#39;deleteContent&#39;,
&#39;modifySelection&#39;, &#39;getSelectedContent&#39;,
&#39;applyOperation&#39; ]nttt.forEach( methodName =&gt; this.decorate(
methodName ) );nntt// Adding operation validation with `highest` priority,
so it is called before any other feature would likentt// to do anything
with the operation. If the operation has incorrect parameters it should
throw on the earliest occasion.nttthis.on( &#39;applyOperation&#39;, ( evt,
args ) =&gt; {ntttconst operation = args[ 0
];nntttoperation._validate();ntt}, { priority: &#39;highest&#39; } );nntt//
Register some default abstract entities.nttthis.schema.register(
&#39;$root&#39;, {ntttisLimit: truentt} );nttthis.schema.register(
&#39;$block&#39;, {ntttallowIn: &#39;$root&#39;,ntttisBlock: truentt}
);nttthis.schema.register( &#39;$text&#39;, {ntttallowIn:
&#39;$block&#39;ntt} );nttthis.schema.register( &#39;$clipboardHolder&#39;,
{ntttallowContentOf: &#39;$root&#39;,ntttisLimit: truentt}
);nttthis.schema.extend( &#39;$text&#39;, { allowIn:
&#39;$clipboardHolder&#39; } );nntt// Element needed by
`upcastElementToMarker` converter.ntt// This element temporarily represents
marker bound during conversion process and is removedntt// at the end of
conversion. `UpcastDispatcher` or at least `Conversion` class looks like a
better for thisntt// registration but both know nothing about
Schema.nttthis.schema.register( &#39;$marker&#39;, {ntttallowIn: [
&#39;$root&#39;, &#39;$block&#39; ]ntt} );nt}nnt/**nt * The `change()`
method is the primary way of changing the model. You should use it to
modify all document nodesnt * (including detached nodes – i.e. nodes not
added to the {@link module:engine/model/model~Model#document model
document}),nt * the {@link module:engine/model/document~Document#selection
document&#39;s selection}, andnt * {@link
module:engine/model/model~Model#markers model markers}.nt *nt
*ttmodel.change( writer =&gt; {nt *tttwriter.insertText( &#39;foo&#39;,
paragraph, &#39;end&#39; );nt *tt} );nt *nt * All changes inside the change
block use the same {@link module:engine/model/batch~Batch} so they are
combinednt * into a single undo step.nt *nt *ttmodel.change( writer =&gt;
{nt *tttwriter.insertText( &#39;foo&#39;, paragraph, &#39;end&#39; ); //
foo.nt *nt *tttmodel.change( writer =&gt; {nt *ttttwriter.insertText(
&#39;bar&#39;, paragraph, &#39;end&#39; ); // foobar.nt *ttt} );nt *nt *
tttwriter.insertText( &#39;bom&#39;, paragraph, &#39;end&#39; ); //
foobarbom.nt *tt} );nt *nt * The callback of the `change()` block is
executed synchronously.nt *nt * You can also return a value from the change
block.nt *nt *ttconst img = model.change( writer =&gt; {nt *tttreturn
writer.createElement( &#39;img&#39; );nt *tt} );nt *nt * @see
enqueueChangent * @param {Function} callback Callback function which may
modify the model.nt * @returns {*} Value returned by the callback.nt
*/ntchange( callback ) {nttif ( this._pendingChanges.length === 0 ) {nttt//
If this is the outermost block, create a new batch and start
`_runPendingChanges` execution flow.ntttthis._pendingChanges.push( { batch:
new Batch(), callback } );nntttreturn this._runPendingChanges()[ 0 ];ntt}
else {nttt// If this is not the outermost block, just execute the
callback.ntttreturn callback( this._currentWriter );ntt}nt}nnt/**nt * The
`enqueueChange()` method performs similar task as the {@link change
`change()` method}, with two major differences.nt *nt * First, the callback
of `enqueueChange()` is executed when all other enqueued changes are done.
It might be executednt * immediately if it is not nested in any other
change block, but if it is nested in another (enqueue)change block,nt * it
will be delayed and executed after the outermost block.nt *nt
*ttmodel.change( writer =&gt; {nt *tttconsole.log( 1 );nt *nt
*tttmodel.enqueueChange( writer =&gt; {nt *ttttconsole.log( 2 );nt *ttt}
);nt *nt * tttconsole.log( 3 );nt *tt} ); // Will log: 1, 3, 2.nt *nt *
Second, it lets you define the {@link module:engine/model/batch~Batch} into
which you want to add your changes.nt * By default, a new batch is created.
In the sample above, `change` and `enqueueChange` blocks use a differentnt
* batch (and different {@link module:engine/model/writer~Writer} since each
of them operates on the separate batch).nt *nt * When using the
`enqueueChange()` block you can also add some changes to the batch you used
before.nt *nt *ttmodel.enqueueChange( batch, writer =&gt; {nt
*tttwriter.insertText( &#39;foo&#39;, paragraph, &#39;end&#39; );nt *tt}
);nt *nt * The batch instance can be obtained from {@link
module:engine/model/writer~Writer#batch the writer}.nt *nt * @param
{module:engine/model/batch~Batch|&#39;transparent&#39;|&#39;default&#39;}
batchOrType Batch or batch type should be used in the callback.nt * If not
defined, a new batch will be created.nt * @param {Function} callback
Callback function which may modify the model.nt */ntenqueueChange(
batchOrType, callback ) {nttif ( typeof batchOrType === &#39;string&#39; )
{ntttbatchOrType = new Batch( batchOrType );ntt} else if ( typeof
batchOrType == &#39;function&#39; ) {ntttcallback =
batchOrType;ntttbatchOrType = new
Batch();ntt}nnttthis._pendingChanges.push( { batch: batchOrType, callback }
);nnttif ( this._pendingChanges.length == 1 )
{ntttthis._runPendingChanges();ntt}nt}nnt/**nt * {@link
module:utils/observablemixin~ObservableMixin#decorate Decorated} function
to applynt * {@link module:engine/model/operation/operation~Operation
operations} on the model.nt *nt * @param
{module:engine/model/operation/operation~Operation} operation Operation to
applynt */ntapplyOperation( operation )
{nttoperation._execute();nt}nnt/**nt * Transforms two sets of deltas by
themselves. Returns both transformed sets.nt *nt * @param
{Array.&lt;module:engine/model/delta/delta~Delta&gt;} deltasA Array with
the first set of deltas to transform. Thesent * deltas are considered more
important (than `deltasB`) when resolving conflicts.nt * @param
{Array.&lt;module:engine/model/delta/delta~Delta&gt;} deltasB Array with
the second set of deltas to transform. Thesent * deltas are considered less
important (than `deltasA`) when resolving conflicts.nt * @param {Boolean}
[useContext=false] When set to `true`, transformation will store and use
additional contextnt * information to guarantee more expected results.
Should be used whenever deltas related to already appliednt * deltas are
transformed (for example when undoing changes).nt * @returns {Object}nt *
@returns {Array.&lt;module:engine/model/delta/delta~Delta&gt;}
return.deltasA The first set of deltas transformednt * by the second set of
deltas.nt * @returns {Array.&lt;module:engine/model/delta/delta~Delta&gt;}
return.deltasB The second set of deltas transformednt * by the first set of
deltas.nt */nttransformDeltas( deltasA, deltasB, useContext = false )
{nttreturn deltaTransform.transformDeltaSets( deltasA, deltasB, useContext
? this.document : null );nt}nnt/**nt * Inserts content into the editor
(specified selection) as one would expect the pastent * functionality to
work.nt *nt * @fires insertContentnt * @param
{module:engine/model/documentfragment~DocumentFragment|module:engine/model/item~Item}
content The content to insert.nt * @param
{module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection}
selectionnt * Selection into which the content should be inserted.nt
*/ntinsertContent( content, selection ) {nttinsertContent( this, content,
selection );nt}nnt/**nt * Deletes content of the selection and merge
siblings. The resulting selection is always collapsed.nt *nt * *Note:* For
the sake of predictability, the resulting selection should always be
collapsed.nt * In cases where a feature wants to modify deleting behavior
so selection isn&#39;t collapsednt * (e.g. a table feature may want to keep
row selection after pressing &lt;kbd&gt;Backspace&lt;/kbd&gt;),nt * then
that behavior should be implemented in the view&#39;s listener. At the same
time, the table featurent * will need to modify this method&#39;s behavior
too, e.g. to "delete contents and then collapsent * the selection inside
the last selected cell&quot; or "delete the row and collapse selection
somewhere near&quot;.nt * That needs to be done in order to ensure that
other features which use `deleteContent()` will work well with tables.nt
*nt * @fires deleteContentnt * @param
{module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection}
selectionnt * Selection of which the content should be deleted.nt * @param
{module:engine/model/batch~Batch} batch Batch to which the deltas will be
added.nt * @param {Object} [options]nt * @param {Boolean}
[options.leaveUnmerged=false] Whether to merge elements after removing the
content of the selection.nt *nt * For example `&lt;<a
href="x</heading><paragraph>y“>heading>x</a>y&lt;/paragraph&gt;` will
become:nt *nt * * `&lt;heading&gt;x^y&lt;/heading&gt;` with the option
disabled (`leaveUnmerged == false`)nt * *
`&lt;heading&gt;x^&lt;/heading&gt;&lt;paragraph&gt;y&lt;/paragraph&gt;`
with enabled (`leaveUnmerged == true`).nt *nt * Note: {@link
module:engine/model/schema~Schema#isObject object} and {@link
module:engine/model/schema~Schema#isLimit limit}nt * elements will not be
merged.nt *nt * @param {Boolean} [options.doNotResetEntireContent=false]
Whether to skip replacing the entire content with ant * paragraph when the
entire content was selected.nt *nt * For example `&lt;<a
href="x</heading><paragraph>y”>heading></a>&lt;/paragraph&gt;` will
become:nt *nt * * `&lt;paragraph&gt;^&lt;/paragraph&gt;` with the option
disabled (`doNotResetEntireContent == false`)nt * *
`&lt;heading&gt;^&lt;/heading&gt;` with enabled (`doNotResetEntireContent
== true`)nt */ntdeleteContent( selection, options ) {nttdeleteContent(
this, selection, options );nt}nnt/**nt * Modifies the selection. Currently,
the supported modifications are:nt *nt * * Extending. The selection focus
is moved in the specified `options.direction` with a step specified in
`options.unit`.nt * Possible values for `unit` are:nt *  *
`&#39;character&#39;` (default) - moves selection by one user-perceived
character. In most cases this means moving by onent *  character in
`String` sense. However, unicode also defines "combing marks&quot;. These
are special symbols, that combinesnt *  with a symbol before it (&quot;base
character&quot;) to create one user-perceived character. For example, `q̣̇`
is a normalnt *  letter `q` with two "combining marks&quot;: upper dot
(`Ux0307`) and lower dot (`Ux0323`). For most actions, i.e. extendingnt * 
selection by one position, it is correct to include both "base
character&quot; and all of it&#39;s "combining marks&quot;. That isnt * 
why `&#39;character&#39;` value is most natural and common method of
modifying selection.nt *  * `&#39;codePoint&#39;` - moves selection by one
unicode code point. In contrary to, `&#39;character&#39;` unit, this will
insertnt *  selection between "base character&quot; and "combining
mark&quot;, because "combining marks&quot; have their own unicode code
points.nt *  However, for technical reasons, unicode code points with
values above `UxFFFF` are represented in native `String` bynt *  two
characters, called "surrogate pairs&quot;. Halves of "surrogate pairs&quot;
have a meaning only when placed next to each other.nt *  For example `𨭎` is
represented in `String` by `\uD862\uDF4E`. Both `\uD862` and `\uDF4E` do
not have any meaningnt *  outside the pair (are rendered as ? when alone).
Position between them would be incorrect. In this case, selectionnt * 
extension will include whole "surrogate pair&quot;.nt *  * `&#39;word&#39;`
- moves selection by a whole word.nt *nt * *Note:* if you extend a forward
selection in a backward direction you will in fact shrink it.nt *nt *
@fires modifySelectionnt * @param
{module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection}
selectionnt * The selection to modify.nt * @param {Object} [options]nt *
@param {&#39;forward&#39;|&#39;backward&#39;}
[options.direction=&#39;forward&#39;] The direction in which the selection
should be modified.nt * @param
{&#39;character&#39;|&#39;codePoint&#39;|&#39;word&#39;}
[options.unit=&#39;character&#39;] The unit by which selection should be
modified.nt */ntmodifySelection( selection, options ) {nttmodifySelection(
this, selection, options );nt}nnt/**nt * Gets a clone of the selected
content.nt *nt * For example, for the following selection:nt *nt * “`htmlnt
* &lt;<a
href="st</h></quote><p>se“>p>x</p><quote><p>y</p><h>fir</a>cond&lt;/p&gt;&lt;p&gt;z&lt;/p&gt;nt
* “`nt *nt * It will return a document fragment with such a content:nt *nt
* “`htmlnt *
&lt;quote&gt;&lt;h&gt;st&lt;/h&gt;&lt;/quote&gt;&lt;p&gt;se&lt;/p&gt;nt *
“`nt *nt * @fires getSelectedContentnt * @param
{module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection}
selectionnt * The selection of which content will be returned.nt * @returns
{module:engine/model/documentfragment~DocumentFragment}nt
*/ntgetSelectedContent( selection ) {nttreturn getSelectedContent( this,
selection );nt}nnt/**nt * Checks whether given {@link
module:engine/model/range~Range range} or {@link
module:engine/model/element~Element element}nt * has any content.nt *nt *
Content is any text node or element which is registered in {@link
module:engine/model/schema~Schema schema}.nt *nt * @param
{module:engine/model/range~Range|module:engine/model/element~Element}
rangeOrElement Range or element to check.nt * @returns {Boolean}nt
*/nthasContent( rangeOrElement ) {nttif ( rangeOrElement instanceof
ModelElement ) {ntttrangeOrElement = ModelRange.createIn( rangeOrElement
);ntt}nnttif ( rangeOrElement.isCollapsed ) {ntttreturn false;ntt}nnttfor (
const item of rangeOrElement.getItems() ) {nttt// Remember, `TreeWalker`
returns always `textProxy` nodes.ntttif ( item.is( &#39;textProxy&#39; ) ||
this.schema.isObject( item ) ) {nttttreturn true;nttt}ntt}nnttreturn
false;nt}nnt/**nt * Removes all events listeners set by model instance and
destroys {@link module:engine/model/document~Document}.nt */ntdestroy()
{nttthis.document.destroy();nttthis.stopListening();nt}nnt/**nt * Common
part of {@link module:engine/model/model~Model#change} and {@link
module:engine/model/model~Model#enqueueChange}nt * which calls callbacks
and returns array of values returned by these callbacks.nt *nt * @privatent
* @returns {Array.&lt;*&gt;} Array of values returned by callbacks.nt
*/nt_runPendingChanges() {nttconst ret = [];nnttwhile (
this._pendingChanges.length ) {nttt// Create a new writer using batch
instance created for this chain of changes.ntttconst currentBatch =
this._pendingChanges[ 0 ].batch;ntttthis._currentWriter = new Writer( this,
currentBatch );nnttt// Execute changes callback and gather the returned
value.ntttconst callbackReturnValue = this._pendingChanges[ 0 ].callback(
this._currentWriter );ntttret.push( callbackReturnValue );nnttt// Fire
internal `_change` event.ntttthis.fire( &#39;_change&#39;,
this._currentWriter
);nntttthis._pendingChanges.shift();ntttthis._currentWriter =
null;ntt}nnttreturn ret;nt}nnt/**nt * Fired after leaving each {@link
module:engine/model/model~Model#enqueueChange} block or outermostnt *
{@link module:engine/model/model~Model#change} block.nt *nt * *Note:* This
is an internal event! Use {@link
module:engine/model/document~Document#event:change} instead.nt *nt *
@protectednt * @event _changent * @param
{module:engine/model/writer~Writer} writer `Writer` instance that has been
used in the change block.nt */nnt/**nt * Fired every time any {@link
module:engine/model/operation/operation~Operation operation} is applied on
the modelnt * using {@link applyOperation}.nt *nt * Note that this event is
suitable only for very specific use-cases. Use it if you need to listen to
every single operationnt * applied on the document. However, in most cases
{@link module:engine/model/document~Document#event:change} shouldnt * be
used.nt *nt * A few callbacks are already added to this event by engine
internal classes:nt *nt * * with `highest` priority operation is
validated,nt * * with `normal` priority operation is executed,nt * * with
`low` priority the {@link module:engine/model/document~Document} updates
its version,nt * * with `low` priority {@link
module:engine/model/liveposition~LivePosition} and {@link
module:engine/model/liverange~LiveRange}nt * update themselves.nt *nt *
@event applyOperationnt * @param {Array} args Arguments of the
`applyOperation` which is an array with a single element - appliednt *
{@link module:engine/model/operation/operation~Operation operation}.nt
*/nnt/**nt * Event fired when {@link insertContent} method is called.nt *nt
* The {@link insertContent default action of that method} is implemented as
ant * listener to this event so it can be fully customized by the
features.nt *nt * @event insertContentnt * @param {Array} args The
arguments passed to the original method.nt */nnt/**nt * Event fired when
{@link deleteContent} method is called.nt *nt * The {@link deleteContent
default action of that method} is implemented as ant * listener to this
event so it can be fully customized by the features.nt *nt * @event
deleteContentnt * @param {Array} args The arguments passed to the original
method.nt */nnt/**nt * Event fired when {@link modifySelection} method is
called.nt *nt * The {@link modifySelection default action of that method}
is implemented as ant * listener to this event so it can be fully
customized by the features.nt *nt * @event modifySelectionnt * @param
{Array} args The arguments passed to the original method.nt */nnt/**nt *
Event fired when {@link getSelectedContent} method is called.nt *nt * The
{@link getSelectedContent default action of that method} is implemented as
ant * listener to this event so it can be fully customized by the
features.nt *nt * @event getSelectedContentnt * @param {Array} args The
arguments passed to the original method.nt */n}nnmix( Model,
ObservableMixin );nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/model.jsn// module id = nulln// module chunks
= ”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben.
All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
utils/dom/setdatainelementn */nn/* globals HTMLTextAreaElement */nn/**n *
Sets data in a given element.n *n * @param {HTMLElement} el The element in
which the data will be set.n * @param {String} data The data string.n
*/nexport default function setDataInElement( el, data ) {ntif ( el
instanceof HTMLTextAreaElement ) {nttel.value = data;nt}nntel.innerHTML =
data;n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/dom/setdatainelement.jsn// module id = nulln//
module chunks = ”,“/**n * @license Copyright © 2003-2017, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nnimport setDataInElement from
&#39;@ckeditor/ckeditor5-utils/src/dom/setdatainelement&#39;;nn/**n *
@module core/editor/utils/elementapimixinn */nn/**n * Implementation of the
{@link module:core/editor/utils/elementapimixin~ElementApi}.n *n * @mixin
ElementApiMixinn * @implements
module:core/editor/utils/elementapimixin~ElementApin */nconst
ElementApiMixin = {nt/**nt * @inheritDocnt */ntupdateElement()
{nttsetDataInElement( this.element, this.data.get() );nt}n};nnexport
default ElementApiMixin;nn/**n * Interface describing an editor which
replaced a DOM element (was "initialized on an element&quot;).n *n * Such
an editor should provide a method ton * {@link
module:core/editor/utils/elementapimixin~ElementApi#updateElement update
the replaced element with the current data}.n *n * @interface ElementApin
*/nn/**n * The element on which the editor has been initialized.n *n *
@readonlyn * @member {HTMLElement} elementn */nn/**n * Updates the {@link
element editor element}&#39;s content with the data.n *n * @method
updateElementn */nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-core/src/editor/utils/elementapimixin.jsn// module id =
nulln// module chunks = ”,“/**n * @license Copyright © 2003-2017, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nnimport isFunction from
&#39;@ckeditor/ckeditor5-utils/src/lib/lodash/isFunction&#39;;nimport
CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nn/**n * @module
core/editor/utils/attachtoformn */nn/**n * Checks if editor is initialized
on textarea element that belongs to a form. If yes - updates editor&#39;s
elementn * contents before submitting the form.n *n * This helper requires
{@link module:core/editor/utils/elementapimixin~ElementApi ElementApi
interface}.n *n * @param {module:core/editor/editor~Editor} editor Editor
instance.n */nexport default function attachToForm( editor ) {ntif (
!isFunction( editor.updateElement ) ) {ntt/**ntt * {@link
module:core/editor/utils/elementapimixin~ElementApi ElementApi interface}
is required.ntt *ntt * @error attachtoform-missing-elementapi-interfacentt
*/nttthrow new CKEditorError(
&#39;attachtoform-missing-elementapi-interface: ElementApi interface is
required.&#39; );nt}nntconst element = editor.element;nnt// Only when
replacing a textarea which is inside of a form element.ntif ( element
&amp;&amp; element.tagName.toLowerCase() === &#39;textarea&#39; &amp;&amp;
element.form ) {nttlet originalSubmit;nttconst form = element.form;nttconst
onSubmit = () =&gt; editor.updateElement();nntt// Replace the original
form#submit() to call a custom submit function first.ntt// Check if submit
is a function because the form might have an input named
"submit&quot;.nttif ( isFunction( form.submit ) ) {ntttoriginalSubmit =
form.submit;nntttform.submit = () =&gt;
{nttttonSubmit();nttttoriginalSubmit.apply( form );nttt};ntt}nntt// Update
the replaced textarea with data before each form#submit
event.nttform.addEventListener( &#39;submit&#39;, onSubmit );nntt// Remove
the submit listener and revert the original submit method onntt//
editor#destroy.ntteditor.on( &#39;destroy&#39;, () =&gt;
{ntttform.removeEventListener( &#39;submit&#39;, onSubmit );nntttif (
originalSubmit ) {nttttform.submit = originalSubmit;nttt}ntt}
);nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-core/src/editor/utils/attachtoform.jsn// module id = nulln//
module chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module engine/dataprocessor/basichtmlwritern */nn/* globals
document */nn/**n * Basic HTML writer. It uses the native `innerHTML`
property for basic conversionn * from a document fragment to an HTML
string.n *n * @implements
module:engine/dataprocessor/htmlwriter~HtmlWritern */nexport default class
BasicHtmlWriter {nt/**nt * Returns an HTML string created from the document
fragment.nt *nt * @param {DocumentFragment} fragmentnt * @returns
{String}nt */ntgetHtml( fragment ) {nttconst doc =
document.implementation.createHTMLDocument( &#39;&#39; );nttconst container
= doc.createElement( &#39;div&#39; );nttcontainer.appendChild( fragment
);nnttreturn container.innerHTML;nt}n}nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-engine/src/dataprocessor/basichtmlwriter.jsn//
module id = nulln// module chunks = ”,“/**n * @license Copyright ©
2003-2018, CKSource - Frederico Knabben. All rights reserved.n * For
licensing, see LICENSE.md.n */nn/**n * @module ui/componentfactoryn
*/nnimport CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nn/**n * A helper
class implementing the UI component ({@link module:ui/view~View view})
factory.n *n * It allows functions producing specific UI components to be
registered under their unique namesn * in the factory. A registered
component can be then instantiated by providing its name.n * Note that
names are case insensitive.n *n *tt// The editor provides localization
tools for the factory.n *ttconst factory = new ComponentFactory( editor );n
*n *ttfactory.add( &#39;foo&#39;, locale =&gt; new FooView( locale ) );n
*ttfactory.add( &#39;bar&#39;, locale =&gt; new BarView( locale ) );n *n
*tt// An instance of FooView.n *ttconst fooInstance = factory.create(
&#39;foo&#39; );n *n *tt// Names are case insensitive so this is also
allowed:n *ttconst barInstance = factory.create( &#39;Bar&#39; );n *n * The
{@link module:core/editor/editor~Editor#locale editor locale} is passed to
the factoryn * function when {@link
module:ui/componentfactory~ComponentFactory#create} is called.n */nexport
default class ComponentFactory {nt/**nt * Creates an instance of the
factory.nt *nt * @constructornt * @param {module:core/editor/editor~Editor}
editor The editor instance.nt */ntconstructor( editor ) {ntt/**ntt * The
editor instance that the factory belongs to.ntt *ntt * @readonlyntt *
@member {module:core/editor/editor~Editor}ntt */nttthis.editor =
editor;nntt/**ntt * Registered component factories.ntt *ntt * @privatentt *
@member {Map}ntt */nttthis._components = new Map();nt}nnt/**nt * Returns an
iterator of registered component names. Names are returned in lower case.nt
*nt * @returns {Iterable.&lt;String&gt;}nt */nt* names() {nttfor ( const
value of this._components.values() ) {ntttyield
value.originalName;ntt}nt}nnt/**nt * Registers a component factory function
that will be used by thent * {@link create create} method and called with
thent * {@link module:core/editor/editor~Editor#locale editor locale} as an
argument,nt * allowing localization of the {@link module:ui/view~View
view}.nt *nt * @param {String} name The name of the component.nt * @param
{Function} callback The callback that returns the component.nt */ntadd(
name, callback ) {nttif ( this.has( name ) ) {nttt/**nttt * The item
already exists in the component factory.nttt *nttt * @error
componentfactory-item-existsnttt * @param {String} name The name of the
component.nttt */ntttthrow new
CKEditorError(ntttt&#39;componentfactory-item-exists: The item already
exists in the component factory.&#39;, { name
}nttt);ntt}nnttthis._components.set( getNormalized( name ), { callback,
originalName: name } );nt}nnt/**nt * Creates an instance of a component
registered in the factory under a specific name.nt *nt * When called, the
{@link module:core/editor/editor~Editor#locale editor locale} is passed
tont * the previously {@link add added} factory function, allowing
localization of thent * {@link module:ui/view~View view}.nt *nt * @param
{String} name The name of the component.nt * @returns {module:ui/view~View}
The instantiated component view.nt */ntcreate( name ) {nttif ( !this.has(
name ) ) {nttt/**nttt * The required component is not registered in the
component factory. Please make surenttt * the provided name is correct and
the component has been correctlynttt * {@link add added} to the
factory.nttt *nttt * @error componentfactory-item-missingnttt * @param
{String} name The name of the missing component.nttt */ntttthrow new
CKEditorError(ntttt&#39;componentfactory-item-missing: The required
component is not registered in the factory.&#39;, { name
}nttt);ntt}nnttreturn this._components.get( getNormalized( name )
).callback( this.editor.locale );nt}nnt/**nt * Checks if a component of a
given name is registered in the factory.nt *nt * @param {String} name The
name of the component.nt * @returns {Boolean}nt */nthas( name ) {nttreturn
this._components.has( getNormalized( name ) );nt}n}nn//n// Ensures that the
component name used as the key in the internal map is in lower case.n//n//
@privaten// @param {String} namen// @returns {String}nfunction
getNormalized( name ) {ntreturn String( name
).toLowerCase();n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-ui/src/componentfactory.jsn// module id = nulln// module
chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/*
global setTimeout, clearTimeout */nn/**n * @module utils/focustrackern
*/nnimport DomEmitterMixin from &#39;./dom/emittermixin&#39;;nimport
ObservableMixin from &#39;./observablemixin&#39;;nimport CKEditorError from
&#39;./ckeditorerror&#39;;nimport mix from &#39;./mix&#39;;nn/**n * Allows
observing a group of `HTMLElement`s whether at least one of them is
focused.n *n * Used by the {@link module:core/editor/editor~Editor} in
order to track whether the focus is still within the application,n * or
were used outside of its UI.n *n * *Note* `focus` and `blur` listeners use
event capturing, so it is only needed to register wrapper `HTMLElement`n *
which contain other `focusable` elements. But note that this wrapper
element has to be focusable toon * (have e.g. `tabindex=&quot;-1&quot;`).n
*n * @mixes module:utils/dom/emittermixin~EmitterMixinn * @mixes
module:utils/observablemixin~ObservableMixinn */nexport default class
FocusTracker {ntconstructor() {ntt/**ntt * True when one of the registered
elements is focused.ntt *ntt * @readonlyntt * @observablentt * @member
{Boolean} isFocusedntt */nttthis.set( &#39;isFocused&#39;, false
);nntt/**ntt * Currently focused element.ntt *ntt * @readonlyntt * @member
{HTMLElement}ntt */nttthis.focusedElement = null;nntt/**ntt * List of
registered elements.ntt *ntt * @privatentt * @member
{Set.&lt;HTMLElement&gt;}ntt */nttthis._elements = new Set();nntt/**ntt *
Event loop timeout.ntt *ntt * @privatentt * @member {Number}ntt
*/nttthis._nextEventLoopTimeout = null;nt}nnt/**nt * Starts tracking the
specified element.nt *nt * @param {HTMLElement} elementnt */ntadd( element
) {nttif ( this._elements.has( element ) ) {ntttthrow new CKEditorError(
&#39;focusTracker-add-element-already-exist&#39; );ntt}nnttthis.listenTo(
element, &#39;focus&#39;, () =&gt; this._focus( element ), { useCapture:
true } );nttthis.listenTo( element, &#39;blur&#39;, () =&gt; this._blur(),
{ useCapture: true } );nttthis._elements.add( element );nt}nnt/**nt * Stops
tracking the specified element and stops listening on this element.nt *nt *
@param {HTMLElement} elementnt */ntremove( element ) {nttif ( element ===
this.focusedElement ) {ntttthis._blur( element );ntt}nnttif (
this._elements.has( element ) ) {ntttthis.stopListening( element
);ntttthis._elements.delete( element );ntt}nt}nnt/**nt * Stores currently
focused element and set {#isFocused} as `true`.nt *nt * @privatent * @param
{HTMLElement} element Element which has been focused.nt */nt_focus( element
) {nttclearTimeout( this._nextEventLoopTimeout );nnttthis.focusedElement =
element;nttthis.isFocused = true;nt}nnt/**nt * Clears currently focused
element and set {@link isFocused} as `false`.nt * This method uses
`setTimeout` to change order of fires `blur` and `focus` events.nt *nt *
@privatent * @fires blurnt */nt_blur() {nttclearTimeout(
this._nextEventLoopTimeout );nnttthis._nextEventLoopTimeout = setTimeout(
() =&gt; {ntttthis.focusedElement = null;ntttthis.isFocused = false;ntt}, 0
);nt}nnt/**nt * @event focusnt */nnt/**nt * @event blurnt */n}nnmix(
FocusTracker, DomEmitterMixin );nmix( FocusTracker, ObservableMixin
);nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/focustracker.jsn// module id = nulln// module chunks
= ”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben.
All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
ui/toolbar/enabletoolbarkeyboardfocusn */nn/**n * Enables focus/blur
toolbar navigation using `Alt+F10` and `Esc` keystrokes.n *n * @param
{Object} options Options of the utility.n * @param {*} options.origin A
view to which the focus will return when `Esc` is pressed andn *
`options.toolbar` is focused.n * @param
{module:utils/keystrokehandler~KeystrokeHandler}
options.originKeystrokeHandler A keystroken * handler to register `Alt+F10`
keystroke.n * @param {module:utils/focustracker~FocusTracker}
options.originFocusTracker A focus trackern * for `options.origin`.n *
@param {module:ui/toolbar/toolbarview~ToolbarView} options.toolbar A
toolbar which is to gainn * focus when `Alt+F10` is pressed.n * @param
{Function} [options.beforeFocus] A callback executed before the
`options.toolbar` gains focusn * upon the `Alt+F10` keystroke.n * @param
{Function} [options.afterBlur] A callback executed after `options.toolbar`
loses focus uponn * `Esc` keystroke but before the focus goes back to
`options.origin`.n */nexport default function enableToolbarKeyboardFocus(
{ntorigin,ntoriginKeystrokeHandler,ntoriginFocusTracker,nttoolbar,ntbeforeFocus,ntafterBlurn}
) {nt// Because toolbar items can get focus, the overall state of the
toolbar mustnt// also be tracked.ntoriginFocusTracker.add( toolbar.element
);nnt// Focus the toolbar on the keystroke, if not already
focused.ntoriginKeystrokeHandler.set( &#39;Alt+F10&#39;, ( data, cancel )
=&gt; {nttif ( originFocusTracker.isFocused &amp;&amp;
!toolbar.focusTracker.isFocused ) {ntttif ( beforeFocus )
{nttttbeforeFocus();nttt}nnttttoolbar.focus();nntttcancel();ntt}nt} );nnt//
Blur the toolbar and bring the focus back to
origin.nttoolbar.keystrokes.set( &#39;Esc&#39;, ( data, cancel ) =&gt;
{nttif ( toolbar.focusTracker.isFocused ) {ntttorigin.focus();nntttif (
afterBlur ) {nttttafterBlur();nttt}nntttcancel();ntt}nt}
);n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-ui/src/toolbar/enabletoolbarkeyboardfocus.jsn// module id =
nulln// module chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module ui/toolbar/normalizetoolbarconfign */nn/**n
* Normalizes the toolbar configuration (`config.toolbar`), which:n *n * *
may be defined as an `Array`:n *n * tttoolbar: [ &#39;heading&#39;,
&#39;bold&#39;, &#39;italic&#39;, &#39;link&#39;, … ]n *n * * or an
`Object`:n *n *tttoolbar: {n *tttitems: [ &#39;heading&#39;,
&#39;bold&#39;, &#39;italic&#39;, &#39;link&#39;, … ],n *ttt…n *tt}n *n * *
or may not be defined at all (`undefined`)n *n * and returns it in the
object form.n *n * @param {Array|Object|undefined} config The value of
`config.toolbar`.n * @returns {Object} A normalized toolbar config object.n
*/nexport default function normalizeToolbarConfig( config ) {ntif (
Array.isArray( config ) ) {nttreturn {ntttitems: configntt};nt}nntif (
!config ) {nttreturn {ntttitems: []ntt};nt}nntreturn Object.assign(
{nttitems: []nt}, config );n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-ui/src/toolbar/normalizetoolbarconfig.jsn// module id =
nulln// module chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module editor-classic/classiceditoruin */nnimport
ComponentFactory from
&#39;@ckeditor/ckeditor5-ui/src/componentfactory&#39;;nimport FocusTracker
from &#39;@ckeditor/ckeditor5-utils/src/focustracker&#39;;nimport
enableToolbarKeyboardFocus from
&#39;@ckeditor/ckeditor5-ui/src/toolbar/enabletoolbarkeyboardfocus&#39;;nimport
normalizeToolbarConfig from
&#39;@ckeditor/ckeditor5-ui/src/toolbar/normalizetoolbarconfig&#39;;nn/**n
* The classic editor UI class.n *n * @implements
module:core/editor/editorui~EditorUIn */nexport default class
ClassicEditorUI {nt/**nt * Creates an instance of the editor UI class.nt
*nt * @param {module:core/editor/editor~Editor} editor The editor
instance.nt * @param {module:ui/editorui/editoruiview~EditorUIView} view
The view of the UI.nt */ntconstructor( editor, view ) {ntt/**ntt *
@inheritDocntt */nttthis.editor = editor;nntt/**ntt * @inheritDocntt
*/nttthis.view = view;nntt/**ntt * @inheritDocntt
*/nttthis.componentFactory = new ComponentFactory( editor );nntt/**ntt *
@inheritDocntt */nttthis.focusTracker = new FocusTracker();nntt/**ntt * A
normalized `config.toolbar` object.ntt *ntt * @type {Object}ntt *
@privatentt */nttthis._toolbarConfig = normalizeToolbarConfig(
editor.config.get( &#39;toolbar&#39; ) );nt}nnt/**nt * Initializes the
UI.nt */ntinit() {nttconst editor = this.editor;nttconst view =
this.view;nnttview.render();nntt// Set–up the sticky panel with
toolbar.nttview.stickyPanel.bind( &#39;isActive&#39; ).to(
this.focusTracker, &#39;isFocused&#39; );nttview.stickyPanel.limiterElement
= view.element;nnttif ( this._toolbarConfig.viewportTopOffset )
{ntttview.stickyPanel.viewportTopOffset =
this._toolbarConfig.viewportTopOffset;ntt}nntt// Setup the
editable.nttconst editingRoot =
editor.editing.view.document.getRoot();nttview.editable.bind(
&#39;isReadOnly&#39; ).to( editingRoot );nttview.editable.bind(
&#39;isFocused&#39; ).to( editor.editing.view.document
);nttview.editable.name = editingRoot.rootName;nnttthis.focusTracker.add(
this.view.editableElement );nnttthis.view.toolbar.fillFromConfig(
this._toolbarConfig.items, this.componentFactory
);nnttenableToolbarKeyboardFocus( {ntttorigin:
editor.editing.view,ntttoriginFocusTracker:
this.focusTracker,ntttoriginKeystrokeHandler:
editor.keystrokes,nttttoolbar: this.view.toolbarntt} );nt}nnt/**nt *
Destroys the UI.nt */ntdestroy()
{nttthis.view.destroy();nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-editor-classic/src/classiceditorui.jsn// module id = nulln//
module chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module ui/viewcollectionn */nnimport CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nimport
ObservableMixin from
&#39;@ckeditor/ckeditor5-utils/src/observablemixin&#39;;nimport Collection
from &#39;@ckeditor/ckeditor5-utils/src/collection&#39;;nimport mix from
&#39;@ckeditor/ckeditor5-utils/src/mix&#39;;nn/**n * Collects {@link
module:ui/view~View} instances.n *n *ttconst parentView = new ParentView(
locale );n *ttconst collection = new ViewCollection( locale );n *n
*ttcollection.setParent( parentView.element );n *n *ttconst viewA = new
ChildView( locale );n *ttconst viewB = new ChildView( locale );n *n * View
collection renders and manages view {@link module:ui/view~View#element
elements}:n *n *ttcollection.add( viewA );n *ttcollection.add( viewB );n *n
*ttconsole.log( parentView.element.firsChild ); // -&gt; viewA.elementn
*ttconsole.log( parentView.element.lastChild ); // -&gt; viewB.elementn *n
* It {@link module:ui/viewcollection~ViewCollection#delegate propagates}
DOM events too:n *n *tt// Delegate click and keydown events from viewA and
viewB to the parentView.n *ttcollection.delegate( &#39;click&#39; ).to(
parentView );n *n *ttparentView.on( &#39;click&#39;, ( evt ) =&gt; {n
*tttconsole.log( `${ evt.source } has been clicked.` );n *tt} );n *n *tt//
This event will be delegated to the parentView.n *ttviewB.fire(
&#39;click&#39; );n *n * *Note*: A view collection can be used directly in
the {@link module:ui/template~TemplateDefinition definition}n * of a {@link
module:ui/template~Template template}.n *n * @extends
module:utils/collection~Collectionn * @mixes
module:utils/observablemixin~ObservableMixinn */nexport default class
ViewCollection extends Collection {nt/**nt * Creates a new instance of the
{@link module:ui/viewcollection~ViewCollection}.nt *nt * @param
{module:utils/locale~Locale} [locale] The {@link
module:core/editor/editor~Editor editor&#39;s locale} instance.nt
*/ntconstructor( locale ) {nttsuper( {nttt// An id Number attribute should
be legal and not break the `ViewCollection` instance.nttt// <a
href="https://github.com/ckeditor/ckeditor5-ui/issues/93\n\t\t\tidProperty">github.com/ckeditor/ckeditor5-ui/issues/93ntttidProperty</a>:
&#39;viewUid&#39;ntt} );nntt// Handle {@link module:ui/view~View#element}
in DOM when a new view is added to the collection.nttthis.on(
&#39;add&#39;, ( evt, view, index ) =&gt; {ntttif ( !view.isRendered )
{nttttview.render();nttt}nntttif ( view.element &amp;&amp;
this._parentElement ) {nttttthis._parentElement.insertBefore( view.element,
this._parentElement.children[ index ] );nttt}ntt} );nntt// Handle {@link
module:ui/view~View#element} in DOM when a view is removed from the
collection.nttthis.on( &#39;remove&#39;, ( evt, view ) =&gt; {ntttif (
view.element &amp;&amp; this._parentElement )
{nttttview.element.remove();nttt}ntt} );nntt/**ntt * The {@link
module:core/editor/editor~Editor#locale editor&#39;s locale} instance.ntt *
See the view {@link module:ui/view~View#locale locale} property.ntt *ntt *
@member {module:utils/locale~Locale}ntt */nttthis.locale =
locale;nntt/**ntt * A parent element within which child views are rendered
and managed in DOM.ntt *ntt * @protectedntt * @member {HTMLElement}ntt
*/nttthis._parentElement = null;nt}nnt/**nt * Destroys the view collection
along with child views.nt * See the view {@link
module:ui/view~View#destroy} method.nt */ntdestroy() {nttthis.map( view
=&gt; view.destroy() );nt}nnt/**nt * Sets the parent HTML element of this
collection. When parent is set, {@link add adding} andnt * {@link remove
removing} views in the collection synchronizes theirnt * {@link
module:ui/view~View#element elements} in the parent element.nt *nt * @param
{HTMLElement} element A new parent element.nt */ntsetParent(
elementOrDocFragment ) {nttthis._parentElement =
elementOrDocFragment;nt}nnt/**nt * Delegates selected events coming from
within views in the collection to anynt * {@link
module:utils/emittermixin~Emitter}.nt *nt * For the following views and
collection:nt *nt *ttconst viewA = new View();nt *ttconst viewB = new
View();nt *ttconst viewC = new View();nt *nt *ttconst views =
parentView.createCollection();nt *nt *ttviews.delegate( &#39;eventX&#39;
).to( viewB );nt *ttviews.delegate( &#39;eventX&#39;, &#39;eventY&#39;
).to( viewC );nt *nt *ttviews.add( viewA );nt *nt * the `eventX` is
delegated (fired by) `viewB` and `viewC` along with `customData`:nt *nt
*ttviewA.fire( &#39;eventX&#39;, customData );nt *nt * and `eventY` is
delegated (fired by) `viewC` along with `customData`:nt *nt *ttviewA.fire(
&#39;eventY&#39;, customData );nt *nt * See {@link
module:utils/emittermixin~EmitterMixin#delegate}.nt *nt * @param {…String}
events {@link module:ui/view~View} event names to be delegated to anothernt
* {@link module:utils/emittermixin~Emitter}.nt * @returns {Object}nt *
@returns {Function} return.to A function which accepts the destination ofnt
* {@link module:utils/emittermixin~EmitterMixin#delegate delegated}
events.nt */ntdelegate( …events ) {nttif ( !events.length ||
!isStringArray( events ) ) {nttt/**nttt * All event names must be
strings.nttt *nttt * @error ui-viewcollection-delegate-wrong-eventsnttt
*/ntttthrow new CKEditorError(
&#39;ui-viewcollection-delegate-wrong-events: All event names must be
strings.&#39; );ntt}nnttreturn {nttt/**nttt * Selects destination for
{@link module:utils/emittermixin~EmitterMixin#delegate} events.nttt *nttt *
@memberOf module:ui/viewcollection~ViewCollection#delegatenttt * @function
module:ui/viewcollection~ViewCollection#delegate.tonttt * @param
{module:utils/emittermixin~EmitterMixin} dest An `EmitterMixin` instance
which isnttt * the destination for delegated events.nttt */ntttto: dest
=&gt; {ntttt// Activate delegating on existing views in this
collection.nttttfor ( const view of this ) {ntttttfor ( const evtName of
events ) {nttttttview.delegate( evtName ).to( dest );nttttt}ntttt}nntttt//
Activate delegating on future views in this collection.nttttthis.on(
&#39;add&#39;, ( evt, view ) =&gt; {ntttttfor ( const evtName of events )
{nttttttview.delegate( evtName ).to( dest );nttttt}ntttt} );nntttt//
Deactivate delegating when view is removed from this
collection.nttttthis.on( &#39;remove&#39;, ( evt, view ) =&gt; {ntttttfor (
const evtName of events ) {nttttttview.stopDelegating( evtName, dest
);nttttt}ntttt} );nttt}ntt};nt}nnt/**nt * Removes a child view from the
collection. If the {@link setParent parent element} of thent * collection
has been set, the {@link module:ui/view~View#element element} of the view
is also removednt * in DOM, reflecting the order of the collection.nt *nt *
See the {@link add} method.nt *nt * @method removent * @param
{module:ui/view~View|Number|String} subject The view to remove, its id or
index in the collection.nt * @returns {Object} The removed view.nt
*/n}nnmix( Collection, ObservableMixin );nn// Check if all entries of the
array are of `String` type.n//n// @privaten// @param {Array} arr An array
to be checked.n// @returns {Boolean}nfunction isStringArray( arr )
{ntreturn arr.every( a =&gt; typeof a == &#39;string&#39;
);n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-ui/src/viewcollection.jsn// module id = nulln// module chunks
= ”,“import baseClone from &#39;./_baseClone&#39;;nn/**n * This method is
like `_.cloneWith` except that it recursively clones `value`.n *n *
@staticn * @memberOf _n * @since 4.0.0n * @category Langn * @param {*}
value The value to recursively clone.n * @param {Function} [customizer] The
function to customize cloning.n * @returns {*} Returns the deep cloned
value.n * @see _.cloneWithn * @examplen *n * function customizer(value) {n
*   if (_.isElement(value)) {n *     return value.cloneNode(true);n *   }n
* }n *n * var el = _.cloneDeepWith(document.body, customizer);n *n *
console.log(el === document.body);n * // =&gt; falsen *
console.log(el.nodeName);n * // =&gt; &#39;BODY&#39;n *
console.log(el.childNodes.length);n * // =&gt; 20n */nfunction
cloneDeepWith(value, customizer) {n  return baseClone(value, true, true,
customizer);n}nnexport default cloneDeepWith;nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-utils/src/lib/lodash/cloneDeepWith.jsn//
module id = nulln// module chunks = ”,“/**n * @license Copyright ©
2003-2018, CKSource - Frederico Knabben. All rights reserved.n * For
licensing, see LICENSE.md.n */nn/**n * @module ui/templaten */nn/* global
document */nnimport CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nimport mix from
&#39;@ckeditor/ckeditor5-utils/src/mix&#39;;nimport EmitterMixin from
&#39;@ckeditor/ckeditor5-utils/src/emittermixin&#39;;nimport View from
&#39;./view&#39;;nimport ViewCollection from
&#39;./viewcollection&#39;;nimport cloneDeepWith from
&#39;@ckeditor/ckeditor5-utils/src/lib/lodash/cloneDeepWith&#39;;nimport
isObject from
&#39;@ckeditor/ckeditor5-utils/src/lib/lodash/isObject&#39;;nimport isNode
from &#39;@ckeditor/ckeditor5-utils/src/dom/isnode&#39;;nimport log from
&#39;@ckeditor/ckeditor5-utils/src/log&#39;;nnconst xhtmlNs = &#39;<a
href="http://www.w3.org/1999/xhtml';\n\n/**\n">www.w3.org/1999/xhtml’;nn/**n</a>
* A basic Template class. It renders a DOM HTML element or text from an *
{@link module:ui/template~TemplateDefinition definition} and supports
element attributes, children,n * bindings to {@link
module:utils/observablemixin~Observable observables} and DOM event
propagation.n *n * A simple template can look like this:n *n *ttconst bind
= Template.bind( observable, emitter );n *n *ttnew Template( {n *ttttag:
&#39;p&#39;,n *tttattributes: {n *ttttclass: &#39;foo&#39;,n *ttttstyle: {n
*tttttbackgroundColor: &#39;yellow&#39;n *tttt}n *ttt},n *ttton: {n
*ttttclick: bind.to( &#39;clicked&#39; )n *ttt}n *tttchildren: [n
*tttt&#39;A paragraph.&#39;n *ttt]n *tt} ).render();n *n * and it will
render the following HTML element:n *n *tt&lt;p class=&quot;foo&quot;
style=&quot;background-color: yellow;&quot;&gt;A paragraph.&lt;/p&gt;n *n *
Additionally, the `observable` will always fire `clicked` upon clicking
`&lt;p&gt;` in the DOM.n *n * See {@link
module:ui/template~TemplateDefinition} to know more about templates and
complexn * template definitions.n n @mixes
module:utils/emittermixin~EmitterMixinn */nexport default class Template
{nt/**nt * Creates an instance of the {@link ~Template} class.nt *nt *
@param {module:ui/template~TemplateDefinition} def The definition of the
template.nt */ntconstructor( def ) {nttObject.assign( this, normalize(
clone( def ) ) );nntt/**ntt * Indicates whether this particular Template
instance has beenntt * {@link render rendered}.ntt *ntt * @readonlyntt *
@protectedntt * @member {Boolean}ntt */nttthis._isRendered =
false;nntt/**ntt * The tag (`tagName`) of this template, e.g. `div`. It
also indicates that the templatentt * renders to an HTML element.ntt *ntt *
@member {String} tagntt */nntt/**ntt * The text of the template. It also
indicates that the template renders to a DOM text node.ntt *ntt * @member
{Array.&lt;String|module:ui/template~TemplateValueSchema&gt;} textntt
*/nntt/**ntt * The attributes of the template, e.g. `{ id: [
&#39;ck-id&#39; ] }`, corresponding withntt * the attributes of an HTML
element.ntt *ntt * *Note*: This property only makes sense when {@link tag}
is defined.ntt *ntt * @member {Object} attributesntt */nntt/**ntt * The
children of the template. They can be either:ntt * * independent instances
of {@link ~Template} (sub–templates),ntt * * native DOM Nodes.ntt *ntt *
*Note*: This property only makes sense when {@link tag} is defined.ntt *ntt
* @member {Array.&lt;module:ui/template~Template|Node&gt;} childrenntt
*/nntt/**ntt * The DOM event listeners of the template.ntt *ntt * @member
{Object} eventListenersntt */nntt/**ntt * The data used by the {@link
revert} method to restore a node to its original state.ntt *ntt * See:
{@link apply}.ntt *ntt * @readonlyntt * @protectedntt * @member
{module:ui/template~RenderData}ntt */nttthis._revertData = null;nt}nnt/**nt
* Renders a DOM Node (an HTML element or text) out of the template.nt *nt
*ttconst domNode = new Template( { … } ).render();nt *nt * See: {@link
apply}.nt *nt * @returns {HTMLElement|Text}nt */ntrender() {nttconst node =
this._renderNode( {ntttintoFragment: truentt} );nnttthis._isRendered =
true;nnttreturn node;nt}nnt/**nt * Applies the template to an existing DOM
Node, either HTML element or text.nt *nt * *Note:* No new DOM nodes will be
created. Applying extendsnt * {@link module:ui/template~TemplateDefinition
attributes} andnt * {@link module:ui/template~TemplateDefinition event
listeners} only.nt *nt * *Note:* Existing `class` and `style` attributes
are extended when a templatent * is applied to an HTML element, while other
attributes and `textContent` are overridden.nt *nt * *Note:* The process of
applying a template can be easily reverted using thent * {@link
module:ui/template~Template#revert} method.nt *nt *ttconst element =
document.createElement( &#39;div&#39; );nt *ttconst bind = Template.bind(
observable, emitter );nt *nt *ttnew Template( {nt *tttattrs: {nt *ttttid:
&#39;first-div&#39;,nt *ttttclass: bind.to( &#39;divClass&#39; )nt *ttt},nt
*ttton: {nt *ttttclick: bind( &#39;elementClicked&#39; ) // Will be fired
by the observable.nt *ttt}nt *tttchildren: [nt *tttt&#39;Div text.&#39;nt
*ttt]nt *tt} ).apply( element );nt *nt *ttelement.outerHTML == "&lt;div
id=&quot;first-div&quot; class=&quot;my-div&quot;&gt;Div
text.&lt;/div&gt;&quot;nt *nt * @see module:ui/template~Template#rendernt *
@see module:ui/template~Template#revertnt * @param {Node} node Root node
for the template to apply.nt */ntapply( node ) {nttthis._revertData =
getEmptyRevertData();nnttthis._renderNode( {ntttnode,ntttisApplying:
true,ntttrevertData: this._revertDatantt} );nnttreturn node;nt}nnt/**nt *
Reverts a template {@link module:ui/template~Template#apply applied} to a
DOM node.nt *nt * @param {Node} node The root node for the template to
revert. In most of the cases, it is thent * same node used by {@link
module:ui/template~Template#apply}.nt */ntrevert( node ) {nttif (
!this._revertData ) {nttt/**nttt * Attempting to revert a template which
has not been applied yet.nttt *nttt * @error
ui-template-revert-not-appliednttt */ntttthrow new CKEditorError(
&#39;ui-template-revert-not-applied: Attempting to revert a template which
has not been applied yet.&#39; );ntt}nnttthis._revertTemplateFromNode(
node, this._revertData );nt}nnt/**nt * Returns an iterator which traverses
the template in search of {@link module:ui/view~View}nt * instances and
returns them one by one.nt *nt *ttconst viewFoo = new View();nt *ttconst
viewBar = new View();nt *ttconst viewBaz = new View();nt *ttconst template
= new Template( {nt *ttttag: &#39;div&#39;,nt *tttchildren: [nt
*ttttviewFoo,nt *tttt{nt *ttttttag: &#39;div&#39;,nt *tttttchildren: [nt
*ttttttviewBarnt *ttttt]nt *tttt},nt *ttttviewBaznt *ttt]nt *tt} );nt *nt
*tt// Logs: viewFoo, viewBar, viewBaznt *ttfor ( const view of
template.getViews() ) {nt *tttconsole.log( view );nt *tt}nt *nt * @returns
{Iterable.&lt;module:ui/view~View&gt;}nt */nt* getViews() {nttfunction*
search( def ) {ntttif ( def.children ) {nttttfor ( const child of
def.children ) {ntttttif ( isView( child ) ) {nttttttyield child;nttttt}
else if ( isTemplate( child ) ) {nttttttyield* search( child
);nttttt}ntttt}nttt}ntt}nnttyield* search( this );nt}nnt/**nt * An entry
point to the interface which binds DOM nodes tont * {@link
module:utils/observablemixin~Observable observables}.nt * There are two
types of bindings:nt *nt * * HTML element attributes or text `textContent`
synchronized with attributes of annt * {@link
module:utils/observablemixin~Observable}. Learn more about {@link
module:ui/template~BindChain#to}nt * and {@link
module:ui/template~BindChain#if}.nt *nt *ttconst bind = Template.bind(
observable, emitter );nt *nt *ttnew Template( {nt *tttattrs: {nt *tttt//
Binds the element "class&quot; attribute to observable#classAttribute.nt
*ttttclass: bind.to( &#39;classAttribute&#39; )nt *ttt}nt *tt}
).render();nt *nt * * DOM events fired on HTML element propagated throughnt
* {@link module:utils/observablemixin~Observable}. Learn more about {@link
module:ui/template~BindChain#to}.nt *nt *ttconst bind = Template.bind(
observable, emitter );nt *nt *ttnew Template( {nt *ttton: {nt *tttt// Will
be fired by the observable.nt *ttttclick: bind( &#39;elementClicked&#39;
)nt *ttt}nt *tt} ).render();nt *nt * Also see {@link
module:ui/view~View#bindTemplate}.nt *nt * @param
{module:utils/observablemixin~Observable} observable An observable which
provides boundable attributes.nt * @param
{module:utils/emittermixin~Emitter} emitter An emitter that listens to
observable attributent * changes or DOM Events (depending on the kind of
the binding). Usually, a {@link module:ui/view~View} instance.nt * @returns
{module:ui/template~BindChain}nt */ntstatic bind( observable, emitter )
{nttreturn {ntttto( eventNameOrFunctionOrAttribute, callback ) {nttttreturn
new TemplateToBinding( {nttttteventNameOrFunction:
eventNameOrFunctionOrAttribute,ntttttattribute:
eventNameOrFunctionOrAttribute,ntttttobservable, emitter, callbackntttt}
);nttt},nntttif( attribute, valueIfTrue, callback ) {nttttreturn new
TemplateIfBinding( {ntttttobservable, emitter, attribute, valueIfTrue,
callbackntttt} );nttt}ntt};nt}nnt/**nt * Extends an existing {@link
module:ui/template~Template} instance with some additional contentnt * from
another {@link module:ui/template~TemplateDefinition}.nt *nt *ttconst bind
= Template.bind( observable, emitter );nt *nt *ttconst template = new
Template( {nt *ttttag: &#39;p&#39;,nt *tttattributes: {nt *ttttclass:
&#39;a&#39;,nt *ttttdata-x: bind.to( &#39;foo&#39; )nt *ttt},nt
*tttchildren: [nt *tttt{nt *ttttttag: &#39;span&#39;,nt *tttttattributes:
{nt *ttttttclass: &#39;b&#39;nt *ttttt},nt *tttttchildren: [nt
*tttttt&#39;Span&#39;nt *ttttt]nt *tttt}nt *ttt]nt *tt } );nt *nt *tt//
Instance-level extension.nt *ttTemplate.extend( template, {nt
*tttattributes: {nt *ttttclass: &#39;b&#39;,nt *ttttdata-x: bind.to(
&#39;bar&#39; )nt *ttt},nt *tttchildren: [nt *tttt{nt *tttttattributes: {nt
*ttttttclass: &#39;c&#39;nt *ttttt}nt *tttt}nt *ttt]nt *tt} );nt *nt *tt//
Child extension.nt *ttTemplate.extend( template.children[ 0 ], {nt
*tttattributes: {nt *ttttclass: &#39;d&#39;nt *ttt}nt *tt} );nt *nt * the
`outerHTML` of `template.render()` is:nt *nt *tt&lt;p class=&quot;a b&quot;
data-x=&quot;{ observable.foo } { observable.bar }&quot;&gt;nt *ttt&lt;span
class=&quot;b c d&quot;&gt;Span&lt;/span&gt;nt *tt&lt;/p&gt;nt *nt * @param
{module:ui/template~Template} template An existing template instance to be
extended.nt * @param {module:ui/template~TemplateDefinition} def Additional
definition to be applied to a template.nt */ntstatic extend( template, def
) {nttif ( template._isRendered ) {nttt/**nttt * Extending a template after
rendering may not work as expected. To make surenttt * the {@link
module:ui/template~Template.extend extending} works for an element,nttt *
make sure it happens before {@link render} is called.nttt *nttt * @error
template-extend-rendernttt */ntttlog.warn( &#39;template-extend-render:
Attempting to extend a template which has already been rendered.&#39;
);ntt}nnttextendTemplate( template, normalize( clone( def ) ) );nt}nnt/**nt
* Renders a DOM Node (either an HTML element or text) out of the
template.nt *nt * @protectednt * @param {module:ui/template~RenderData}
data Rendering data.nt */nt_renderNode( data ) {nttlet isInvalid;nnttif (
data.node ) {nttt// When applying, a definition cannot have "tag&quot; and
"text&quot; at the same time.ntttisInvalid = this.tag &amp;&amp;
this.text;ntt} else {nttt// When rendering, a definition must have either
"tag&quot; or "text&quot;: XOR( this.tag, this.text ).ntttisInvalid =
this.tag ? this.text : !this.text;ntt}nnttif ( isInvalid ) {nttt/**nttt *
Node definition cannot have the "tag&quot; and "text&quot; properties at
the same time.nttt * Node definition must have either "tag&quot; or
"text&quot; when rendering a new Node.nttt *nttt * @error
ui-template-wrong-syntaxnttt */ntttthrow new
CKEditorError(ntttt&#39;ui-template-wrong-syntax: Node definition must have
either "tag&quot; or "text&quot; when rendering a new
Node.&#39;nttt);ntt}nnttif ( this.text ) {ntttreturn this._renderText( data
);ntt} else {ntttreturn this._renderElement( data );ntt}nt}nnt/**nt *
Renders an HTML element out of the template.nt *nt * @protectednt * @param
{module:ui/template~RenderData} data Rendering data.nt */nt_renderElement(
data ) {nttlet node = data.node;nnttif ( !node ) {ntttnode = data.node =
document.createElementNS( this.ns || xhtmlNs, this.tag
);ntt}nnttthis._renderAttributes( data );nttthis._renderElementChildren(
data );nttthis._setUpListeners( data );nnttreturn node;nt}nnt/**nt *
Renders a text node out of {@link module:ui/template~Template#text}.nt *nt
* @protectednt * @param {module:ui/template~RenderData} data Rendering
data.nt */nt_renderText( data ) {nttlet node = data.node;nntt// Save the
original textContent to revert it in revert().nttif ( node )
{ntttdata.revertData.text = node.textContent;ntt} else {ntttnode =
data.node = document.createTextNode( &#39;&#39; );ntt}nntt// Check if this
Text Node is bound to Observable. Cases:ntt//ntt//tttext: [ Template.bind(
… ).to( … ) ]ntt//ntt//tttext:
[ntt//ttt&#39;foo&#39;,ntt//tttTemplate.bind( … ).to( …
),ntt//ttt…ntt//tt]ntt//nttif ( hasTemplateBinding( this.text ) )
{ntttthis._bindToObservable( {nttttschema: this.text,nttttupdater:
getTextUpdater( node ),nttttdatanttt} );ntt}ntt// Simply set text.
Cases:ntt//ntt//tttext: [ &#39;all&#39;, &#39;are&#39;, &#39;static&#39;
]ntt//ntt//tttext: [ &#39;foo&#39; ]ntt//nttelse {ntttnode.textContent =
this.text.join( &#39;&#39; );ntt}nnttreturn node;nt}nnt/**nt * Renders HTML
element attributes out of {@link module:ui/template~Template#attributes}.nt
*nt * @protectednt * @param {module:ui/template~RenderData} data Rendering
data.nt */nt_renderAttributes( data ) {nttlet attrName, attrValue,
domAttrValue, attrNs;nnttif ( !this.attributes ) {ntttreturn;ntt}nnttconst
node = data.node;nttconst revertData = data.revertData;nnttfor ( attrName
in this.attributes ) {nttt// Current attribute value in
DOM.ntttdomAttrValue = node.getAttribute( attrName );nnttt// The value to
be set.ntttattrValue = this.attributes[ attrName ];nnttt// Save revert
data.ntttif ( revertData ) {nttttrevertData.attributes[ attrName ] =
domAttrValue;nttt}nnttt// Detect custom namespace:nttt//nttt//ttclass:
{nttt//tttns: &#39;abc&#39;,nttt//tttvalue: Template.bind( … ).to( …
)nttt//tt}nttt//ntttattrNs = ( isObject( attrValue[ 0 ] ) &amp;&amp;
attrValue[ 0 ].ns ) ? attrValue[ 0 ].ns : null;nnttt// Activate binding if
one is found. Cases:nttt//nttt//ttclass: [nttt//tttTemplate.bind( … ).to( …
)nttt//tt]nttt//nttt//ttclass:
[nttt//ttt&#39;bar&#39;,nttt//tttTemplate.bind( … ).to( …
),nttt//ttt&#39;baz&#39;nttt//tt]nttt//nttt//ttclass: {nttt//tttns:
&#39;abc&#39;,nttt//tttvalue: Template.bind( … ).to( …
)nttt//tt}nttt//ntttif ( hasTemplateBinding( attrValue ) ) {ntttt//
Normalize attributes with additional data like
namespace:ntttt//ntttt//ttclass: {ntttt//tttns:
&#39;abc&#39;,ntttt//tttvalue: [ … ]ntttt//tt}ntttt//nttttconst valueToBind
= attrNs ? attrValue[ 0 ].value : attrValue;nntttt// Extend the original
value of attributes like "style&quot; and "class&quot;,ntttt// don&#39;t
override them.nttttif ( revertData &amp;&amp; shouldExtend( attrName ) )
{ntttttvalueToBind.unshift( domAttrValue
);ntttt}nnttttthis._bindToObservable( {ntttttschema:
valueToBind,ntttttupdater: getAttributeUpdater( node, attrName, attrNs
),ntttttdatantttt} );nttt}nnttt// Style attribute could be an <a
href="../../../../Object.html">Object</a> so it needs to be parsed in a
specific way.nttt//nttt//ttstyle: {nttt//tttwidth:
&#39;100px&#39;,nttt//tttheight: Template.bind( … ).to( …
)nttt//tt}nttt//ntttelse if ( attrName == &#39;style&#39; &amp;&amp; typeof
attrValue[ 0 ] !== &#39;string&#39; ) {nttttthis._renderStyleAttribute(
attrValue[ 0 ], data );nttt}nnttt// Otherwise simply set the static
attribute:nttt//nttt//ttclass: [ &#39;foo&#39; ]nttt//nttt//ttclass: [
&#39;all&#39;, &#39;are&#39;, &#39;static&#39; ]nttt//nttt//ttclass:
[nttt//ttt{nttt//ttttns: &#39;abc&#39;,nttt//ttttvalue: [ &#39;foo&#39;
]nttt//ttt}nttt//tt]nttt//ntttelse {ntttt// Extend the original value of
attributes like "style&quot; and "class&quot;,ntttt// don&#39;t override
them.nttttif ( revertData &amp;&amp; domAttrValue &amp;&amp; shouldExtend(
attrName ) ) {ntttttattrValue.unshift( domAttrValue );ntttt}nnttttattrValue
= attrValuenttttt// Retrieve "values&quot; from:nttttt//nttttt//ttclass:
[nttttt//ttt{nttttt//ttttns: &#39;abc&#39;,nttttt//ttttvalue: [ …
]nttttt//ttt}nttttt//tt]nttttt//nttttt.map( val =&gt; val ? ( val.value ||
val ) : val )nttttt// Flatten the array.nttttt.reduce( ( prev, next ) =&gt;
prev.concat( next ), [] )nttttt// Convert into string.nttttt.reduce(
arrayValueReducer, &#39;&#39; );nnttttif ( !isFalsy( attrValue ) )
{ntttttnode.setAttributeNS( attrNs, attrName, attrValue
);ntttt}nttt}ntt}nt}nnt/**nt * Renders the `style` attribute of an HTML
element based onnt * {@link module:ui/template~Template#attributes}.nt *nt
* A style attribute is an {Object} with static values:nt *nt *ttattributes:
{nt *tttstyle: {nt *ttttcolor: &#39;red&#39;nt *ttt}nt *tt}nt *nt * or
values bound to {@link module:ui/model~Model} properties:nt *nt
*ttattributes: {nt *tttstyle: {nt *ttttcolor: bind.to( … )nt *ttt}nt *tt}nt
*nt * Note: The `style` attribute is rendered without setting the
namespace. It does not seem to bent * needed.nt *nt * @privatent * @param
{Object} styles Styles located in `attributes.style` of {@link
module:ui/template~TemplateDefinition}.nt * @param
{module:ui/template~RenderData} data Rendering data.nt
*/nt_renderStyleAttribute( styles, data ) {nttconst node =
data.node;nnttfor ( const styleName in styles ) {ntttconst styleValue =
styles[ styleName ];nnttt// Cases:nttt//nttt//ttstyle: {nttt//tttcolor:
bind.to( &#39;attribute&#39; )nttt//tt}nttt//ntttif ( hasTemplateBinding(
styleValue ) ) {nttttthis._bindToObservable( {ntttttschema: [ styleValue
],ntttttupdater: getStyleUpdater( node, styleName ),ntttttdatantttt}
);nttt}nnttt// Cases:nttt//nttt//ttstyle: {nttt//tttcolor:
&#39;red&#39;nttt//tt}nttt//ntttelse {nttttnode.style[ styleName ] =
styleValue;nttt}ntt}nt}nnt/**nt * Recursively renders HTML element&#39;s
children from {@link module:ui/template~Template#children}.nt *nt *
@protectednt * @param {module:ui/template~RenderData} data Rendering
data.nt */nt_renderElementChildren( data ) {nttconst node =
data.node;nttconst container = data.intoFragment ?
document.createDocumentFragment() : node;nttconst isApplying =
data.isApplying;nttlet childIndex = 0;nnttfor ( const child of
this.children ) {ntttif ( isViewCollection( child ) ) {nttttif (
!isApplying ) {ntttttchild.setParent( node );nnttttt// Note: ViewCollection
renders its children.ntttttfor ( const view of child )
{nttttttcontainer.appendChild( view.element );nttttt}ntttt}nttt} else if (
isView( child ) ) {nttttif ( !isApplying ) {ntttttif ( !child.isRendered )
{nttttttchild.render();nttttt}nntttttcontainer.appendChild( child.element
);ntttt}nttt} else if ( isNode( child ) ) {nttttcontainer.appendChild(
child );nttt} else {nttttif ( isApplying ) {ntttttconst revertData =
data.revertData;ntttttconst childRevertData =
getEmptyRevertData();nntttttrevertData.children.push( childRevertData
);nntttttchild._renderNode( {nttttttnode: container.childNodes[
childIndex++ ],nttttttisApplying: true,nttttttrevertData:
childRevertDatanttttt} );ntttt} else {ntttttcontainer.appendChild(
child.render() );ntttt}nttt}ntt}nnttif ( data.intoFragment )
{ntttnode.appendChild( container );ntt}nt}nnt/**nt * Activates `on` event
listeners from the {@link module:ui/template~TemplateDefinition}nt * on an
HTML element.nt *nt * @protectednt * @param {module:ui/template~RenderData}
data Rendering data.nt */nt_setUpListeners( data ) {nttif (
!this.eventListeners ) {ntttreturn;ntt}nnttfor ( const key in
this.eventListeners ) {ntttconst revertBindings = this.eventListeners[ key
].map( schemaItem =&gt; {nttttconst [ domEvtName, domSelector ] =
key.split( &#39;@&#39; );nnttttreturn schemaItem.activateDomEventListener(
domEvtName, domSelector, data );nttt} );nntttif ( data.revertData )
{nttttdata.revertData.bindings.push( revertBindings );nttt}ntt}nt}nnt/**nt
* For a given {@link module:ui/template~TemplateValueSchema} containing
{@link module:ui/template~TemplateBinding}nt * activates the binding and
sets its initial value.nt *nt * Note: {@link
module:ui/template~TemplateValueSchema} can be for HTML element attributes
ornt * text node `textContent`.nt *nt * @protectednt * @param {Object}
options Binding options.nt * @param
{module:ui/template~TemplateValueSchema} options.schemant * @param
{Function} options.updater A function which updates the DOM (like attribute
or text).nt * @param {module:ui/template~RenderData} options.data Rendering
data.nt */nt_bindToObservable( { schema, updater, data } ) {nttconst
revertData = data.revertData;nntt// Set initial
values.nttsyncValueSchemaValue( schema, updater, data );nnttconst
revertBindings = schemanttt// Filter "falsy&quot; (false, undefined, null,
&#39;&#39;) value schema components out.nttt.filter( item =&gt; !isFalsy(
item ) )nttt// Filter inactive bindings from schema, like static strings
(&#39;foo&#39;), numbers (42), etc.nttt.filter( item =&gt; item.observable
)nttt// Once only the actual binding are left, let the emitter listen to
observable change:attribute event.nttt// TODO: Reduce the number of
listeners attached as many bindings may listennttt// to the same observable
attribute.nttt.map( templateBinding =&gt;
templateBinding.activateAttributeListener( schema, updater, data ) );nnttif
( revertData ) {ntttrevertData.bindings.push( revertBindings
);ntt}nt}nnt/**nt * Reverts {@link module:ui/template~RenderData#revertData
template data} from a node tont * return it to the original state.nt *nt *
@protectednt * @param {HTMLElement|Text} node A node to be reverted.nt *
@param {module:ui/template~RenderData#revertData} revertData Stores
information aboutnt * what changes have been made by {@link apply} to the
node.nt */nt_revertTemplateFromNode( node, revertData ) {nttfor ( const
binding of revertData.bindings ) {nttt// Each binding may consist of
several observable+observable#attribute.nttt// like the following has
2:nttt//nttt//ttclass: [nttt//ttt&#39;x&#39;,nttt//tttbind.to(
&#39;foo&#39; ),nttt//ttt&#39;y&#39;,nttt//tttbind.to( &#39;bar&#39;
)nttt//tt]nttt//ntttfor ( const revertBinding of binding )
{nttttrevertBinding();nttt}ntt}nnttif ( revertData.text )
{ntttnode.textContent = revertData.text;nntttreturn;ntt}nnttfor ( const
attrName in revertData.attributes ) {ntttconst attrValue =
revertData.attributes[ attrName ];nnttt// When the attribute has *not* been
set before apply().ntttif ( attrValue === null )
{nttttnode.removeAttribute( attrName );nttt} else {nttttnode.setAttribute(
attrName, attrValue );nttt}ntt}nnttfor ( let i = 0; i &lt;
revertData.children.length; ++i ) {ntttthis._revertTemplateFromNode(
node.childNodes[ i ], revertData.children[ i ] );ntt}nt}n}nnmix( Template,
EmitterMixin );nn/**n * Describes a binding created by the {@link
module:ui/template~Template.bind} interface.n *n * @protectedn */nexport
class TemplateBinding {nt/**nt * Creates an instance of the {@link
module:ui/template~TemplateBinding} class.nt *nt * @param
{module:ui/template~TemplateDefinition} def The definition of the
binding.nt */ntconstructor( def ) {nttObject.assign( this, def );nntt/**ntt
* An observable instance of the binding. It either:ntt *ntt * * provides
the attribute with the value,ntt * * or passes the event when a
corresponding DOM event is fired.ntt *ntt * @member
{module:utils/observablemixin~ObservableMixin}
module:ui/template~TemplateBinding#observablentt */nntt/**ntt * An {@link
module:utils/emittermixin~Emitter} used by the binding to:ntt *ntt * *
listen to the attribute change in the {@link
module:ui/template~TemplateBinding#observable},ntt * * or listen to the
event in the DOM.ntt *ntt * @member
{module:utils/emittermixin~EmitterMixin}
module:ui/template~TemplateBinding#emitterntt */nntt/**ntt * The name of
the {@link module:ui/template~TemplateBinding#observable observed
attribute}.ntt *ntt * @member {String}
module:ui/template~TemplateBinding#attributentt */nntt/**ntt * A custom
function to process the value of the {@link
module:ui/template~TemplateBinding#attribute}.ntt *ntt * @member {Function}
[module:ui/template~TemplateBinding#callback]ntt */nt}nnt/**nt * Returns
the value of the binding. It is the value of the {@link
module:ui/template~TemplateBinding#attribute} innt * {@link
module:ui/template~TemplateBinding#observable}. The value may be processed
by thent * {@link module:ui/template~TemplateBinding#callback}, if such has
been passed to the binding.nt *nt * @param {Node} [node] A native DOM node,
passed to the custom {@link module:ui/template~TemplateBinding#callback}.nt
* @returns {*} The value of {@link
module:ui/template~TemplateBinding#attribute} innt * {@link
module:ui/template~TemplateBinding#observable}.nt */ntgetValue( node )
{nttconst value = this.observable[ this.attribute ];nnttreturn
this.callback ? this.callback( value, node ) : value;nt}nnt/**nt *
Activates the listener which waits for changes of the {@link
module:ui/template~TemplateBinding#attribute} innt * {@link
module:ui/template~TemplateBinding#observable}, then updates the DOM with
the aggregatednt * value of {@link
module:ui/template~TemplateValueSchema}.nt *nt * @param
{module:ui/template~TemplateValueSchema} schema A full schema to generate
an attribute or text in the DOM.nt * @param {Function} updater A DOM
updater function used to update the native DOM attribute or text.nt *
@param {module:ui/template~RenderData} data Rendering data.nt * @returns
{Function} A function to sever the listener binding.nt
*/ntactivateAttributeListener( schema, updater, data ) {nttconst callback =
() =&gt; syncValueSchemaValue( schema, updater, data
);nnttthis.emitter.listenTo( this.observable, &#39;change:&#39; +
this.attribute, callback );nntt// Allows revert of the listener.nttreturn
() =&gt; {ntttthis.emitter.stopListening( this.observable,
&#39;change:&#39; + this.attribute, callback );ntt};nt}n}nn/**n * Describes
either:n *n * * a binding to an {@link
module:utils/observablemixin~Observable},n * * or a native DOM event
binding.n *n * It is created by the {@link module:ui/template~BindChain#to}
method.n *n * @protectedn */nexport class TemplateToBinding extends
TemplateBinding {nt/**nt * Activates the listener for the native DOM event,
which when fired, is propagated bynt * the {@link
module:ui/template~TemplateBinding#emitter}.nt *nt * @param {String}
domEvtName The name of the native DOM event.nt * @param {String}
domSelector The selector in the DOM to filter delegated events.nt * @param
{module:ui/template~RenderData} data Rendering data.nt * @returns
{Function} A function to sever the listener binding.nt
*/ntactivateDomEventListener( domEvtName, domSelector, data ) {nttconst
callback = ( evt, domEvt ) =&gt; {ntttif ( !domSelector ||
domEvt.target.matches( domSelector ) ) {nttttif ( typeof
this.eventNameOrFunction == &#39;function&#39; )
{ntttttthis.eventNameOrFunction( domEvt );ntttt} else
{ntttttthis.observable.fire( this.eventNameOrFunction, domEvt
);ntttt}nttt}ntt};nnttthis.emitter.listenTo( data.node, domEvtName,
callback );nntt// Allows revert of the listener.nttreturn () =&gt;
{ntttthis.emitter.stopListening( data.node, domEvtName, callback
);ntt};nt}n}nn/**n * Describes a binding to {@link
module:utils/observablemixin~ObservableMixin} created by the {@link
module:ui/template~BindChain#if}n * method.n *n * @protectedn */nexport
class TemplateIfBinding extends TemplateBinding {nt/**nt * @inheritDocnt
*/ntgetValue( node ) {nttconst value = super.getValue( node );nnttreturn
isFalsy( value ) ? false : ( this.valueIfTrue || true );nt}nnt/**nt * The
value of the DOM attribute or text to be set if the {@link
module:ui/template~TemplateBinding#attribute} innt * {@link
module:ui/template~TemplateBinding#observable} is `true`.nt *nt * @member
{String} [module:ui/template~TemplateIfBinding#valueIfTrue]nt */n}nn//
Checks whether given {@link module:ui/template~TemplateValueSchema}
contains an// {@link module:ui/template~TemplateBinding}.n//n// @param
{module:ui/template~TemplateValueSchema} scheman// @returns
{Boolean}nfunction hasTemplateBinding( schema ) {ntif ( !schema )
{nttreturn false;nt}nnt// Normalize attributes with additional data like
namespace:nt//nt//ttclass: {nt//tttns: &#39;abc&#39;,nt//tttvalue: [ …
]nt//tt}nt//ntif ( schema.value ) {nttschema = schema.value;nt}nntif (
Array.isArray( schema ) ) {nttreturn schema.some( hasTemplateBinding );nt}
else if ( schema instanceof TemplateBinding ) {nttreturn true;nt}nntreturn
false;n}nn// Assembles the value using {@link
module:ui/template~TemplateValueSchema} and stores it in a form ofn// an
Array. Each entry of the Array corresponds to one of {@link
module:ui/template~TemplateValueSchema}n// items.n//n// @param
{module:ui/template~TemplateValueSchema} scheman// @param {Node} node DOM
Node updated when {@link module:utils/observablemixin~ObservableMixin}
changes.n// @return {Array}nfunction getValueSchemaValue( schema, node )
{ntreturn schema.map( schemaItem =&gt; {ntt// Process {@link
module:ui/template~TemplateBinding} bindings.nttif ( schemaItem instanceof
TemplateBinding ) {ntttreturn schemaItem.getValue( node );ntt}nntt// All
static values like strings, numbers, and "falsy&quot; values (false, null,
undefined, &#39;&#39;, etc.) just pass.nttreturn schemaItem;nt} );n}nn// A
function executed each time the bound Observable attribute changes, which
updates the DOM with a valuen// constructed from {@link
module:ui/template~TemplateValueSchema}.n//n// @param
{module:ui/template~TemplateValueSchema} scheman// @param {Function}
updater A function which updates the DOM (like attribute or text).n//
@param {Node} node DOM Node updated when {@link
module:utils/observablemixin~ObservableMixin} changes.nfunction
syncValueSchemaValue( schema, updater, { node } ) {ntlet value =
getValueSchemaValue( schema, node );nnt// Check if schema is a single
Template.bind.if, like:nt//nt//ttclass: Template.bind.if( &#39;foo&#39;
)nt//ntif ( schema.length == 1 &amp;&amp; schema[ 0 ] instanceof
TemplateIfBinding ) {nttvalue = value[ 0 ];nt} else {nttvalue =
value.reduce( arrayValueReducer, &#39;&#39; );nt}nntif ( isFalsy( value ) )
{nttupdater.remove();nt} else {nttupdater.set( value );nt}n}nn// Returns an
object consisting of `set` and `remove` functions, whichn// can be used in
the context of DOM Node to set or reset `textContent`.n// @see
module:ui/view~View#_bindToObservablen//n// @param {Node} node DOM Node to
be modified.n// @returns {Object}nfunction getTextUpdater( node ) {ntreturn
{nttset( value ) {ntttnode.textContent = value;ntt},nnttremove()
{ntttnode.textContent = &#39;&#39;;ntt}nt};n}nn// Returns an object
consisting of `set` and `remove` functions, whichn// can be used in the
context of DOM Node to set or reset an attribute.n// @see
module:ui/view~View#_bindToObservablen//n// @param {Node} node DOM Node to
be modified.n// @param {String} attrName Name of the attribute to be
modified.n// @param {String} [ns=null] Namespace to use.n// @returns
{Object}nfunction getAttributeUpdater( el, attrName, ns ) {ntreturn
{nttset( value ) {ntttel.setAttributeNS( ns, attrName, value
);ntt},nnttremove() {ntttel.removeAttributeNS( ns, attrName
);ntt}nt};n}nn// Returns an object consisting of `set` and `remove`
functions, whichn// can be used in the context of CSSStyleDeclaration to
set or remove a style.n// @see module:ui/view~View#_bindToObservablen//n//
@param {Node} node DOM Node to be modified.n// @param {String} styleName
Name of the style to be modified.n// @returns {Object}nfunction
getStyleUpdater( el, styleName ) {ntreturn {nttset( value ) {ntttel.style[
styleName ] = value;ntt},nnttremove() {ntttel.style[ styleName ] =
null;ntt}nt};n}nn// Clones definition of the template.n//n// @param
{module:ui/template~TemplateDefinition} defn// @returns
{module:ui/template~TemplateDefinition}nfunction clone( def ) {ntconst
clone = cloneDeepWith( def, value =&gt; {ntt// Don&#39;t clone the
`Template.bind`* bindings because of the references to Observablentt// and
DomEmitterMixin instances inside, which would also be traversed and cloned
by greedyntt// cloneDeepWith algorithm. There&#39;s no point in cloning
Observable/DomEmitterMixinsntt// along with the definition.ntt//ntt//
Don&#39;t clone Template instances if provided as a child. They&#39;re
simply render()edntt// and nothing should interfere.ntt//ntt// Also
don&#39;t clone View instances if provided as a child of the Template. The
templatentt// instance will be extracted from the View during the
normalization and there&#39;s no needntt// to clone it.nttif ( value
&amp;&amp; ( value instanceof TemplateBinding || isTemplate( value ) ||
isView( value ) || isViewCollection( value ) ) ) {ntttreturn value;ntt}nt}
);nntreturn clone;n}nn// Normalizes given {@link
module:ui/template~TemplateDefinition}.n//n// See:n//  * {@link
normalizeAttributes}n//  * {@link normalizeListeners}n//  * {@link
normalizePlainTextDefinition}n//  * {@link normalizeTextDefinition}n//n//
@param {module:ui/template~TemplateDefinition} defn// @returns
{module:ui/template~TemplateDefinition} Normalized definition.nfunction
normalize( def ) {ntif ( typeof def == &#39;string&#39; ) {nttdef =
normalizePlainTextDefinition( def );nt} else if ( def.text )
{nttnormalizeTextDefinition( def );nt}nntif ( def.on )
{nttdef.eventListeners = normalizeListeners( def.on );nntt// Template mixes
EmitterMixin, so delete on to avoid collision.nttdelete def.on;nt}nntif (
!def.text ) {nttif ( def.attributes ) {ntttnormalizeAttributes(
def.attributes );ntt}nnttconst children = [];nnttif ( def.children )
{ntttif ( isViewCollection( def.children ) ) {nttttchildren.push(
def.children );nttt} else {nttttfor ( const child of def.children )
{ntttttif ( isTemplate( child ) || isView( child ) || isNode( child ) )
{nttttttchildren.push( child );nttttt} else {nttttttchildren.push( new
Template( child ) );nttttt}ntttt}nttt}ntt}nnttdef.children =
children;nt}nntreturn def;n}nn// Normalizes "attributes&quot; section of
{@link module:ui/template~TemplateDefinition}.n//n//ttattributes: {n//ttta:
&#39;bar&#39;,n//tttb: {@link module:ui/template~TemplateBinding},n//tttc:
{n//ttttvalue: &#39;bar&#39;n//ttt}n//tt}n//n// becomesn//n//ttattributes:
{n//ttta: [ &#39;bar&#39; ],n//tttb: [ {@link
module:ui/template~TemplateBinding} ],n//tttc: {n//ttttvalue: [
&#39;bar&#39; ]n//ttt}n//tt}n//n// @param {Object} attrsnfunction
normalizeAttributes( attrs ) {ntfor ( const a in attrs ) {nttif ( attrs[ a
].value ) {ntttattrs[ a ].value = [].concat( attrs[ a ].value
);ntt}nnttarrayify( attrs, a );nt}n}nn// Normalizes "on&quot; section of
{@link module:ui/template~TemplateDefinition}.n//n//tton: {n//ttta:
&#39;bar&#39;,n//tttb: {@link module:ui/template~TemplateBinding},n//tttc:
[ {@link module:ui/template~TemplateBinding}, () =&gt; { … } ]n//tt}n//n//
becomesn//n//tton: {n//ttta: [ &#39;bar&#39; ],n//tttb: [ {@link
module:ui/template~TemplateBinding} ],n//tttc: [ {@link
module:ui/template~TemplateBinding}, () =&gt; { … } ]n//tt}n//n// @param
{Object} listenersn// @returns {Object} <a
href="../../../../Object.html">Object</a> containing normalized
listeners.nfunction normalizeListeners( listeners ) {ntfor ( const l in
listeners ) {nttarrayify( listeners, l );nt}nntreturn listeners;n}nn//
Normalizes "string&quot; {@link
module:ui/template~TemplateDefinition}.n//n//tt&quot;foo&quot;n//n//
becomesn//n//tt{ text: [ &#39;foo&#39; ] },n//n// @param {String} defn//
@returns {module:ui/template~TemplateDefinition} Normalized template
definition.nfunction normalizePlainTextDefinition( def ) {ntreturn
{ntttext: [ def ]nt};n}nn// Normalizes text {@link
module:ui/template~TemplateDefinition}.n//n//ttchildren: [n//ttt{ text:
&#39;def&#39; },n//ttt{ text: {@link module:ui/template~TemplateBinding}
}n//tt]n//n// becomesn//n//ttchildren: [n//ttt{ text: [ &#39;def&#39; ]
},n//ttt{ text: [ {@link module:ui/template~TemplateBinding} ]
}n//tt]n//n// @param {module:ui/template~TemplateDefinition} defnfunction
normalizeTextDefinition( def ) {ntif ( !Array.isArray( def.text ) )
{nttdef.text = [ def.text ];nt}n}nn// Wraps an entry in <a
href="../../../../Object.html">Object</a> in an Array, if not already
one.n//n//tt{n//tttx: &#39;y&#39;,n//ttta: [ &#39;b&#39; ]n//tt}n//n//
becomesn//n//tt{n//tttx: [ &#39;y&#39; ],n//ttta: [ &#39;b&#39;
]n//tt}n//n// @param {Object} objn// @param {String} keynfunction arrayify(
obj, key ) {ntif ( !Array.isArray( obj[ key ] ) ) {nttobj[ key ] = [ obj[
key ] ];nt}n}nn// A helper which concatenates the value avoiding
unwantedn// leading white spaces.n//n// @param {String} prevn// @param
{String} curn// @returns {String}nfunction arrayValueReducer( prev, cur )
{ntif ( isFalsy( cur ) ) {nttreturn prev;nt} else if ( isFalsy( prev ) )
{nttreturn cur;nt} else {nttreturn `${ prev } ${ cur }`;nt}n}nn// Extends
one object defined in the following format:n//n//tt{n//tttkey1:
[Array1],n//tttkey2: [Array2],n//ttt…n//tttkeyN: [ArrayN]n//tt}n//n// with
another object of the same data format.n//n// @param {Object} obj Base
object.n// @param {Object} ext <a href="../../../../Object.html">Object</a>
extending base.n// @returns {String}nfunction extendObjectValueArray( obj,
ext ) {ntfor ( const a in ext ) {nttif ( obj[ a ] ) {ntttobj[ a ].push(
…ext[ a ] );ntt} else {ntttobj[ a ] = ext[ a ];ntt}nt}n}nn// A helper for
{@link module:ui/template~Template#extend}. Recursively extends {@link
module:ui/template~Template} instancen// with content from
{module:ui/template~TemplateDefinition}. See {@link
module:ui/template~Template#extend} to learn more.n//n// @param
{module:ui/template~Template} def A template instance to be extended.n//
@param {module:ui/template~TemplateDefinition} def A definition which is to
extend the template instance.nfunction extendTemplate( template, def )
{ntif ( def.attributes ) {nttif ( !template.attributes )
{nttttemplate.attributes = {};ntt}nnttextendObjectValueArray(
template.attributes, def.attributes );nt}nntif ( def.eventListeners )
{nttif ( !template.eventListeners ) {nttttemplate.eventListeners =
{};ntt}nnttextendObjectValueArray( template.eventListeners,
def.eventListeners );nt}nntif ( def.text ) {ntttemplate.text.push(
…def.text );nt}nntif ( def.children &amp;&amp; def.children.length ) {nttif
( template.children.length != def.children.length ) {nttt/**nttt * The
number of children in extended definition does not match.nttt *nttt *
@error ui-template-extend-children-mismatchnttt */ntttthrow new
CKEditorError(ntttt&#39;ui-template-extend-children-mismatch: The number of
children in extended definition does not match.&#39;nttt);ntt}nnttlet
childIndex = 0;nnttfor ( const childDef of def.children )
{ntttextendTemplate( template.children[ childIndex++ ], childDef
);ntt}nt}n}nn// Checks if value is "falsy&quot;.n// Note: 0 (Number) is not
"falsy&quot; in this context.n//n// @privaten// @param {*} value Value to
be checked.nfunction isFalsy( value ) {ntreturn !value &amp;&amp; value !==
0;n}nn// Checks if the item is an instance of {@link
module:ui/view~View}n//n// @privaten// @param {*} value Value to be
checked.nfunction isView( item ) {ntreturn item instanceof View;n}nn//
Checks if the item is an instance of {@link
module:ui/template~Template}n//n// @privaten// @param {*} value Value to be
checked.nfunction isTemplate( item ) {ntreturn item instanceof
Template;n}nn// Checks if the item is an instance of {@link
module:ui/viewcollection~ViewCollection}n//n// @privaten// @param {*} value
Value to be checked.nfunction isViewCollection( item ) {ntreturn item
instanceof ViewCollection;n}nn// Creates an empty skeleton for {@link
module:ui/template~Template#revert}n// data.n//n// @privatenfunction
getEmptyRevertData() {ntreturn {nttchildren: [],nttbindings:
[],nttattributes: {}nt};n}nn// Checks whether an attribute should be
extended whenn// {@link module:ui/template~Template#apply} is called.n//n//
@privaten// @param {String} attrName Attribute name to check.nfunction
shouldExtend( attrName ) {ntreturn attrName == &#39;class&#39; || attrName
== &#39;style&#39;;n}nn/**n * A definition of the {@link
module:ui/template~Template}. It describes what kind ofn * node a template
will render (HTML element or text), attributes of an element, DOM eventn *
listeners and children.n *n * Also see:n * * {@link
module:ui/template~TemplateValueSchema} to learn about HTML element
attributes,n * * {@link module:ui/template~TemplateListenerSchema} to learn
about DOM event listeners.n *n * A sample definition on an HTML element can
look like this:n *n *ttnew Template( {n *ttttag: &#39;p&#39;,n
*tttchildren: [n *tttt{n *ttttttag: &#39;span&#39;,n *tttttattributes: { …
},n *tttttchildren: [ … ],n *tttt},n *tttt{n *ttttttext:
&#39;static–text&#39;n *tttt},n *tttt&#39;also-static–text&#39;,n *ttt],n
*tttattributes: {n *ttttclass: {@link
module:ui/template~TemplateValueSchema},n *ttttid: {@link
module:ui/template~TemplateValueSchema},n *ttttstyle: {@link
module:ui/template~TemplateValueSchema}n *n *tttt// …n *ttt},n *ttton: {n
*tttt&#39;click&#39;: {@link module:ui/template~TemplateListenerSchema}n *n
*tttt// Document.querySelector format is also accepted.n
*tttt&#39;keyup@a.some-class&#39;: {@link
module:ui/template~TemplateListenerSchema}n *n *tttt// …n *ttt}n *tt} );n
*n * A {@link module:ui/view~View}, another {@link
module:ui/template~Template} or a native DOM noden * can also become a
child of a template. When a view is passed, its {@link
module:ui/view~View#element} is used:n *n *ttconst view = new SomeView();n
*ttconst childTemplate = new Template( { … } );n *ttconst childNode =
document.createElement( &#39;b&#39; );n *n *ttnew Template( {n *ttttag:
&#39;p&#39;,n *n *tttchildren: [n *tttt// view#element will be added as a
child of this &lt;p&gt;.n *ttttview,n *n * tttt// The output of
childTemplate.render() will be added here.n *ttttchildTemplate,n *n *tttt//
Native DOM nodes are included directly in the rendered output.n
*ttttchildNoden *ttt]n *tt} );n *n * An entire {@link
module:ui/viewcollection~ViewCollection} can be used as a child in the
definition:n *n *ttconst collection = new ViewCollection();n
*ttcollection.add( someView );n *n *ttnew Template( {n *ttttag:
&#39;p&#39;,n *n *tttchildren: collectionn *tt} );n *n * @typedef
module:ui/template~TemplateDefinitionn * @type Objectn *n * @property
{String} tag See the template {@link module:ui/template~Template#tag}
property.n *n * @property
{Array.&lt;module:ui/template~TemplateDefinition&gt;} [children]n * See the
template {@link module:ui/template~Template#children} property.n *n *
@property {Object.&lt;String, module:ui/template~TemplateValueSchema&gt;}
[attributes]n * See the template {@link
module:ui/template~Template#attributes} property.n *n * @property
{String|module:ui/template~TemplateValueSchema|Array.&lt;String|module:ui/template~TemplateValueSchema&gt;}
[text]n * See the template {@link module:ui/template~Template#text}
property.n *n * @property {Object.&lt;String,
module:ui/template~TemplateListenerSchema&gt;} [on]n * See the template
{@link module:ui/template~Template#eventListeners} property.n */nn/**n *
Describes a value of an HTML element attribute or `textContent`. It allows
combining multiplen * data sources like static values and {@link
module:utils/observablemixin~Observable} attributes.n *n * Also see:n * *
{@link module:ui/template~TemplateDefinition} to learn where to use it,n *
* {@link module:ui/template~Template.bind} to learn how to configuren *
{@link module:utils/observablemixin~Observable} attribute bindings,n * *
{@link module:ui/template~Template#render} to learn how to render a
template,n * * {@link module:ui/template~BindChain#to `to()`} and {@link
module:ui/template~BindChain#if `if()`}n * methods to learn more about
bindings.n *n * Attribute values can be described in many different ways:n
*n *tt// Bind helper will create bindings to attributes of the observable.n
*ttconst bind = Template.bind( observable, emitter );n *n *ttnew Template(
{n *ttttag: &#39;p&#39;,n *tttattributes: {n *tttt// A plain string
schema.n *tttt&#39;class&#39;: &#39;static-text&#39;,n *n *tttt// An object
schema, binds to the "foo&quot; attribute of then *tttt// observable and
follows its value.n *tttt&#39;class&#39;: bind.to( &#39;foo&#39; ),n *n
*tttt// An array schema, combines the above.n *tttt&#39;class&#39;: [n
*ttttt&#39;static-text&#39;,n *tttttbind.to( &#39;bar&#39;, () =&gt; { … }
),n *n * ttttt// Bindings can also be conditional.n *tttttbind.if(
&#39;baz&#39;, &#39;class-when-baz-is-true&#39; )n *tttt],n *n *tttt// An
array schema, with a custom namespace, e.g. useful for creating SVGs.n
*tttt&#39;class&#39;: {n *tttttns: &#39;<a
href="http://ns.url',\n">ns.url’,n</a> *tttttvalue: [n *ttttttbind.if(
&#39;baz&#39;, &#39;value-when-true&#39; ),n *tttttt&#39;static-text&#39;n
*ttttt]n *tttt},n *n *tttt// An object schema, specific for styles.n
*ttttstyle: {n *tttttcolor: &#39;red&#39;,n *tttttbackgroundColor: bind.to(
&#39;qux&#39;, () =&gt; { … } )n *tttt}n *ttt}n *tt} );n *n * Text nodes
can also have complex values:n *n *ttconst bind = Template.bind(
observable, emitter );n *n *tt// Will render a "foo&quot; text node.n
*ttnew Template( {n *ttttext: &#39;foo&#39;n *tt} );n *n *tt// Will render
a "static text: {observable.foo}&quot; text node.n *tt// The text of the
node will be updated as the "foo&quot; attribute changes.n *ttnew Template(
{n *ttttext: [n *tttt&#39;static text: &#39;,n *ttttbind.to( &#39;foo&#39;,
() =&gt; { … } )n *ttt]n *tt} );n *n * @typedef
module:ui/template~TemplateValueScheman * @type {Object|String|Array}n
*/nn/**n * Describes an event listener attached to an HTML element. Such
listener can propagate DOM eventsn * through an {@link
module:utils/observablemixin~Observable} instance, execute custom
callbacksn * or both, if necessary.n *n * Also see:n * * {@link
module:ui/template~TemplateDefinition} to learn more about template
definitions,n * * {@link module:ui/template~BindChain#to `to()`} method to
learn more about bindings.n *n * Check out different ways of attaching
event listeners below:n *n *tt// Bind helper will propagate events through
the observable.n *ttconst bind = Template.bind( observable, emitter );n *n
*ttnew Template( {n *ttttag: &#39;p&#39;,n *ttton: {n *tttt// An object
schema. The observable will fire the "clicked&quot; event upon DOM
"click&quot;.n *ttttclick: bind.to( &#39;clicked&#39; )n *n *tttt// An
object schema. It will work for "click&quot; event on "a.foo&quot; children
only.n *tttt&#39;click@a.foo&#39;: bind.to( &#39;clicked&#39; )n *n *tttt//
An array schema, makes the observable propagate multiple events.n
*ttttclick: [n *tttttbind.to( &#39;clicked&#39; ),n *tttttbind.to(
&#39;executed&#39; )n *tttt],n *n *tttt// An array schema with a custom
callback.n *tttt&#39;click@a.foo&#39;: {n *tttttbind.to( &#39;clicked&#39;
),n *tttttbind.to( evt =&gt; {n *ttttttconsole.log( `${ evt.target } has
been clicked!` );n *ttttt} }n *tttt}n *ttt}n *tt} );n *n * @typedef
module:ui/template~TemplateListenerScheman * @type {Object|String|Array}n
*/nn/**n * The return value of {@link ~Template.bind `Template.bind()`}. It
provides `to()` and `if()`n * methods to create the {@link
module:utils/observablemixin~Observable observable} attribute and event
bindings.n *n * @interface module:ui/template~BindChainn */nn/**n * Binds
an {@link module:utils/observablemixin~Observable observable} to either:n
*n * * an HTML element attribute or a text node `textContent`, so it
remains in sync with the observablen * attribute as it changes,n * * or an
HTML element DOM event, so the DOM events are propagated through an
observable.n *n * Some common use cases of `to()` bindings are presented
below:n *n *ttconst bind = Template.bind( observable, emitter );n *n *ttnew
Template( {n *ttttag: &#39;p&#39;,n *tttattributes: {n *tttt//
class=&quot;…&quot; attribute gets bound to `observable#a`n *ttttclass:
bind.to( &#39;a&#39; )n *ttt},n *tttchildren: [n *tttt//
&lt;p&gt;…&lt;/p&gt; gets bound to observable#b; always `toUpperCase()`.n
*tttt{n *ttttttext: bind.to( &#39;b&#39;, ( value, node ) =&gt;
value.toUpperCase() )n *tttt}n *ttt],n *ttton: {n *ttttclick: [n *ttttt//
An observable will fire "clicked&quot; upon "click&quot; in the DOM.n
*tttttbind.to( &#39;clicked&#39; ),n *n *ttttt// A custom callback will be
executed upon "click&quot; in the DOM.n *tttttbind.to( () =&gt; {n
*tttttt…n *ttttt} )n *tttt]n *ttt}n *tt} ).render();n *n * Learn more about
using `to()` in the {@link module:ui/template~TemplateValueSchema} andn *
{@link module:ui/template~TemplateListenerSchema}.n *n * @method ton *
@param {String|Function} eventNameOrFunctionOrAttribute An attribute name
ofn * {@link module:utils/observablemixin~Observable} or a DOM event name
or an event callback.n * @param {Function} [callback] Allows for processing
of the value. Accepts `Node` and `value` as arguments.n * @return
{module:ui/template~TemplateBinding}n */nn/**n * Binds an {@link
module:utils/observablemixin~Observable observable} to an HTML element
attribute or a textn * node `textContent` so it remains in sync with the
observable attribute as it changes.n *n * Unlike {@link
module:ui/template~BindChain#to}, it controls the presence of the attribute
or `textContent`n * depending on the "falseness&quot; of an {@link
module:utils/observablemixin~Observable} attribute.n *n *ttconst bind =
Template.bind( observable, emitter );n *n *ttnew Template( {n *ttttag:
&#39;input&#39;,n *tttattributes: {n *tttt// &lt;input checked&gt; when
`observable#a` is not undefined/null/false/&#39;&#39;n *tttt//
&lt;input&gt; when `observable#a` is undefined/null/falsen *ttttchecked:
bind.if( &#39;a&#39; )n *ttt},n *tttchildren: [n *tttt{n *ttttt//
&lt;input&gt;&quot;b-is-not-set&quot;&lt;/input&gt; when `observable#b` is
undefined/null/false/&#39;&#39;n *ttttt// &lt;input&gt;&lt;/input&gt; when
`observable#b` is not "falsy&quot;n *ttttttext: bind.if( &#39;b&#39;,
&#39;b-is-not-set&#39;, ( value, node ) =&gt; !value )n *tttt}n *ttt]n *tt}
).render();n *n * Learn more about using `if()` in the {@link
module:ui/template~TemplateValueSchema}.n *n * @method ifn * @param
{String} attribute An attribute name of {@link
module:utils/observablemixin~Observable} used in the binding.n * @param
{String} [valueIfTrue] Value set when the {@link
module:utils/observablemixin~Observable} attribute is notn *
undefined/null/false/&#39;&#39; (empty string).n * @param {Function}
[callback] Allows for processing of the value. Accepts `Node` and `value`
as arguments.n * @return {module:ui/template~TemplateBinding}n */nn/**n *
The {@link module:ui/template~Template#_renderNode} configuration.n *n *
@privaten * @interface module:ui/template~RenderDatan */nn/**n * Tells
{@link module:ui/template~Template#_renderNode} to rendern * children into
`DocumentFragment` first and then append the fragmentn * to the parent
element. It is a speed optimization.n *n * @member {Boolean} intoFragmentn
*/nn/**n * A node which is being rendered.n *n * @member {HTMLElement|Text}
noden */nn/**n * Indicates whether the
{@module:ui/template~RenderNodeOptions#node} hasn * been provided by
{@module:ui/template~Template#apply}.n *n * @member {Boolean} isApplyingn
*/nn/**n * An object storing the data that helps
{@module:ui/template~Template#revert}n * bringing back an element to its
initial state, i.e. beforen * {@module:ui/template~Template#apply} was
called.n *n * @member {Object} revertDatan */nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-ui/src/template.jsn// module id = nulln//
module chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module utils/dom/tounitn */nn/**n * Returns a helper function,
which adds a desired trailingn * `unit` to the passed value.n *n * @param
{String} unit An unit like "px&quot; or "em&quot;.n * @returns
{module:utils/dom/tounit~helper}n */nexport default function toUnit( unit )
{nt/**nt * A function, which adds a pre–defined trailing `unit`nt * to the
passed `value`.nt *nt * @function helpern t * @param {*} value A value to
be given the unit.n t * @returns {String} A value with the trailing unit.nt
*/ntreturn value =&gt; value + unit;n}nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/dom/tounit.jsn// module id = nulln//
module chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module ui/focuscyclern */nnimport global from
&#39;@ckeditor/ckeditor5-utils/src/dom/global&#39;;nn/**n * A utility class
that helps cycling over focusable {@link module:ui/view~View views} in an *
{@link module:ui/viewcollection~ViewCollection} when the focus is tracked
by then * {@link module:utils/focustracker~FocusTracker} instance. It helps
implementing keyboardn * navigation in HTML forms, toolbars, lists and the
like.n *n * To work properly it requires:n * * a collection of focusable
(HTML `tabindex` attribute) views that implement the `focus()` method,n * *
an associated focus tracker to determine which view is focused.n *n * A
simple cycler setup can look like this:n *n *ttconst focusables = new
ViewCollection();n *ttconst focusTracker = new FocusTracker();n *n *tt//
Add focusable views to the focus tracker.n *ttfocusTracker.add( … );n *n *
Then, the cycler can be used manually:n *n *ttconst cycler = new
FocusCycler( { focusables, focusTracker } );n *n *tt// Will focus the first
focusable view in focusables.n *ttcycler.focusFirst();n *n *tt// Will log
the next focusable item in focusables.n *ttconsole.log( cycler.next );n *n
* Alternatively, it can work side by side with the {@link
module:utils/keystrokehandler~KeystrokeHandler}:n *n *ttconst
keystrokeHandler = new KeystrokeHandler();n *n *tt// Activate the keystroke
handler.n *ttkeystrokeHandler.listenTo( sourceOfEvents );n *n *ttconst
cycler = new FocusCycler( {n *tttfocusables, focusTracker,
keystrokeHandler,n *tttactions: {n *tttt// When arrowup of arrowleft is
detected by the keystrokeHandler,n *tttt// focusPrevious() will be called
on the cycler.n *ttttfocusPrevious: [ &#39;arrowup&#39;,
&#39;arrowleft&#39; ],n *ttt}n *tt} );n */nexport default class FocusCycler
{nt/**nt * Creates an instance of the focus cycler utility.nt *nt * @param
{Object} options Configuration options.nt * @param
{module:utils/collection~Collection|Object} options.focusablesnt * @param
{module:utils/focustracker~FocusTracker} options.focusTrackernt * @param
{module:utils/keystrokehandler~KeystrokeHandler}
[options.keystrokeHandler]nt * @param {Object} [options.actions]nt
*/ntconstructor( options ) {nttObject.assign( this, options );nntt/**ntt *
A {@link module:ui/view~View view} collection that the cycler operates
on.ntt *ntt * @readonlyntt * @member {module:utils/collection~Collection}
focusablesntt */nntt/**ntt * A focus tracker instance that the cycler uses
to determine the current focusntt * state in {@link focusables}.ntt *ntt *
@readonlyntt * @member {module:utils/focustracker~FocusTracker}
focusTrackerntt */nntt/**ntt * An instance of the {@link
module:utils/keystrokehandler~KeystrokeHandler}ntt * which can respond to
certain keystrokes and cycle the focus.ntt *ntt * @readonlyntt * @member
{module:utils/keystrokehandler~KeystrokeHandler} keystrokeHandlerntt
*/nntt/**ntt * Actions that the cycler can take when a keystroke is
pressed. Requiresntt * `options.keystrokeHandler` to be passed and working.
When an action isntt * performed, `preventDefault` and `stopPropagation`
will be called on the eventntt * the keystroke fired in the DOM.ntt *ntt
*ttactions: {ntt *ttt// Will call focusPrevious() when arrowleft or arrowup
is pressed.ntt *tttfocusPrevious: [ &#39;arrowleft&#39;, &#39;arrowup&#39;
],ntt *ntt *ttt// Will call focusNext() when arrowdown is pressed.ntt
*tttfocusNext: &#39;arrowdown&#39;ntt *tt}ntt *ntt * @readonlyntt * @member
{Object} actionsntt */nnttif ( options.actions &amp;&amp;
options.keystrokeHandler ) {ntttfor ( const methodName in options.actions )
{nttttlet actions = options.actions[ methodName ];nnttttif ( typeof actions
== &#39;string&#39; ) {ntttttactions = [ actions ];ntttt}nnttttfor ( const
keystroke of actions ) {ntttttoptions.keystrokeHandler.set( keystroke, (
data, cancel ) =&gt; {nttttttthis[ methodName ]();nttttttcancel();nttttt}
);ntttt}nttt}ntt}nt}nnt/**nt * Returns the first focusable view in {@link
focusables}.nt * Returns `null` if there is none.nt *nt * @readonlynt *
@member {module:ui/view~View|null} firstnt */ntget first() {nttreturn
this.focusables.find( isFocusable ) || null;nt}nnt/**nt * Returns the last
focusable view in {@link focusables}.nt * Returns `null` if there is
none.nt *nt * @readonlynt * @member {module:ui/view~View|null} lastnt
*/ntget last() {nttreturn this.focusables.filter( isFocusable ).slice( -1
)[ 0 ] || null;nt}nnt/**nt * Returns the next focusable view in {@link
focusables} based on {@link current}.nt * Returns `null` if there is
none.nt *nt * @readonlynt * @member {module:ui/view~View|null} nextnt
*/ntget next() {nttreturn this._getFocusableItem( 1 );nt}nnt/**nt * Returns
the previous focusable view in {@link focusables} based on {@link
current}.nt * Returns `null` if there is none.nt *nt * @readonlynt *
@member {module:ui/view~View|null} previousnt */ntget previous() {nttreturn
this._getFocusableItem( -1 );nt}nnt/**nt * An index of the view in the
{@link focusables} which is focused accordingnt * to {@link focusTracker}.
Returns `null` when there is no such view.nt *nt * @readonlynt * @member
{Number|null} currentnt */ntget current() {nttlet index = null;nntt//
There&#39;s no focused view in the focusables.nttif (
this.focusTracker.focusedElement === null ) {ntttreturn
null;ntt}nnttthis.focusables.find( ( view, viewIndex ) =&gt; {ntttconst
focused = view.element === this.focusTracker.focusedElement;nntttif (
focused ) {nttttindex = viewIndex;nttt}nntttreturn focused;ntt}
);nnttreturn index;nt}nnt/**nt * Focuses the {@link first} item in {@link
focusables}.nt */ntfocusFirst() {nttthis._focus( this.first );nt}nnt/**nt *
Focuses the {@link last} item in {@link focusables}.nt */ntfocusLast()
{nttthis._focus( this.last );nt}nnt/**nt * Focuses the {@link next} item in
{@link focusables}.nt */ntfocusNext() {nttthis._focus( this.next
);nt}nnt/**nt * Focuses the {@link previous} item in {@link focusables}.nt
*/ntfocusPrevious() {nttthis._focus( this.previous );nt}nnt/**nt * Focuses
the given view if it exists.nt *nt * @protectednt * @param
{module:ui/view~View} viewnt */nt_focus( view ) {nttif ( view )
{ntttview.focus();ntt}nt}nnt/**nt * Returns the next or previous focusable
view in {@link focusables} with respectnt * to {@link current}.nt *nt *
@protectednt * @param {Number} step Either `1` for checking forward from
{@link current} ornt * `-1` for checking backwards.nt * @returns
{module:ui/view~View|null}nt */nt_getFocusableItem( step ) {ntt// Cache for
speed.nttconst current = this.current;nttconst collectionLength =
this.focusables.length;nnttif ( !collectionLength ) {ntttreturn
null;ntt}nntt// Start from the beginning if no view is focused.ntt// <a
href="https://github.com/ckeditor/ckeditor5-ui/issues/206\n\t\tif">github.com/ckeditor/ckeditor5-ui/issues/206nttif</a>
( current === null ) {ntttreturn this[ step === 1 ? &#39;first&#39; :
&#39;last&#39; ];ntt}nntt// Cycle in both directions.nttlet index = (
current + collectionLength + step ) % collectionLength;nnttdo {ntttconst
view = this.focusables.get( index );nnttt// TODO: Check if view is
visible.ntttif ( isFocusable( view ) ) {nttttreturn view;nttt}nnttt// Cycle
in both directions.ntttindex = ( index + collectionLength + step ) %
collectionLength;ntt} while ( index !== current );nnttreturn null;nt}n}nn//
Checks whether a view is focusable.n//n// @privaten// @param
{module:ui/view~View} view A view to be checked.n// @returns
{Boolean}nfunction isFocusable( view ) {ntreturn !!( view.focus &amp;&amp;
global.window.getComputedStyle( view.element ).display != &#39;none&#39;
);n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-ui/src/focuscycler.jsn// module id = nulln// module chunks =
”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben. All
rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
ui/toolbar/toolbarseparatorviewn */nnimport View from
&#39;../view&#39;;nn/**n * The toolbar separator view class.n *n * @extends
module:ui/view~Viewn */nexport default class ToolbarSeparatorView extends
View {nt/**nt * @inheritDocnt */ntconstructor( locale ) {nttsuper( locale
);nnttthis.setTemplate( {nttttag: &#39;span&#39;,ntttattributes:
{nttttclass:
[nttttt&#39;ck&#39;,nttttt&#39;ck-toolbar__separator&#39;ntttt]nttt}ntt}
);nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-ui/src/toolbar/toolbarseparatorview.jsn// module id = nulln//
module chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module ui/bindings/preventdefaultn */nn/**n * A helper which
executes a native `Event.preventDefault()` if the target of an event equals
then * {@link module:ui/view~View#element element of the view}. It shortens
the definition of an * {@link module:ui/view~View#template template}.n *n
*tt// In a class extending View.n *ttimport preventDefault from
&#39;@ckeditor/ckeditor5-ui/src/bindings/preventdefault&#39;;n *n *tt// …n
*n *ttthis.setTemplate( {n *ttttag: &#39;div&#39;,n *n *ttton: {n *tttt//
Prevent the default mousedown action on this view.n *ttttmousedown:
preventDefault( this )n *ttt}n *tt} );n *n * @param {module:ui/view~View}
view View instance that defines the template.n * @returns
{module:ui/template~TemplateToBinding}n */nexport default function
preventDefault( view ) {ntreturn view.bindTemplate.to( evt =&gt; {nttif (
evt.target === view.element ) {ntttevt.preventDefault();ntt}nt}
);n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-ui/src/bindings/preventdefault.jsn// module id = nulln//
module chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/* globals HTMLTextAreaElement */nn/**n * @module
utils/dom/getdatafromelementn */nn/**n * Gets data from a given source
element.n *n * @param {HTMLElement} el The element from which the data will
be retrieved.n * @returns {String} The data string.n */nexport default
function getDataFromElement( el ) {ntif ( el instanceof HTMLTextAreaElement
) {nttreturn el.value;nt}nntreturn el.innerHTML;n}nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-utils/src/dom/getdatafromelement.jsn//
module id = nulln// module chunks = ”,“/**n * @license Copyright ©
2003-2018, CKSource - Frederico Knabben. All rights reserved.n * For
licensing, see LICENSE.md.n */nn/**n * @module
editor-classic/classiceditorn */nnimport Editor from
&#39;@ckeditor/ckeditor5-core/src/editor/editor&#39;;nimport DataApiMixin
from
&#39;@ckeditor/ckeditor5-core/src/editor/utils/dataapimixin&#39;;nimport
ElementApiMixin from
&#39;@ckeditor/ckeditor5-core/src/editor/utils/elementapimixin&#39;;nimport
attachToForm from
&#39;@ckeditor/ckeditor5-core/src/editor/utils/attachtoform&#39;;nimport
HtmlDataProcessor from
&#39;@ckeditor/ckeditor5-engine/src/dataprocessor/htmldataprocessor&#39;;nimport
ClassicEditorUI from &#39;./classiceditorui&#39;;nimport
ClassicEditorUIView from &#39;./classiceditoruiview&#39;;nimport
ElementReplacer from
&#39;@ckeditor/ckeditor5-utils/src/elementreplacer&#39;;nimport
getDataFromElement from
&#39;@ckeditor/ckeditor5-utils/src/dom/getdatafromelement&#39;;nimport mix
from &#39;@ckeditor/ckeditor5-utils/src/mix&#39;;nn/**n * The {@glink
builds/guides/overview#classic-editor classic editor} implementation.n * It
uses an inline editable and a sticky toolbar, all enclosed in a boxed UI.n
* See the {@glink examples/builds/classic-editor demo}.n *n * In order to
create a classic editor instance, use the staticn * {@link
module:editor-classic/classiceditor~ClassicEditor.create
`ClassicEditor.create()`} method.n *n * # Classic editor and classic buildn
*n * The classic editor can be used directly from source (if you installed
then * [`@ckeditor/ckeditor5-editor-classic`](<a
href="https://www.npmjs.com/package/@ckeditor/ckeditor5-editor-classic">www.npmjs.com/package/@ckeditor/ckeditor5-editor-classic</a>)
package)n * but it is also available in the {@glink
builds/guides/overview#classic-editor classic build}.n *n * {@glink
builds/guides/overview Builds} are ready-to-use editors with plugins
bundled in. When using the editor fromn * source you need to take care of
loading all plugins by yourselfn * (through the {@link
module:core/editor/editorconfig~EditorConfig#plugins `config.plugins`}
option).n * Using the editor from source gives much better flexibility and
allows easier customization.n *n * Read more about initializing the editor
from source or as a build inn * {@link
module:editor-classic/classiceditor~ClassicEditor.create
`ClassicEditor.create()`}.n *n * @mixes
module:core/editor/utils/dataapimixin~DataApiMixinn * @mixes
module:core/editor/utils/elementapimixin~ElementApiMixinn * @implements
module:core/editor/editorwithui~EditorWithUIn * @extends
module:core/editor/editor~Editorn */nexport default class ClassicEditor
extends Editor {nt/**nt * Creates an instance of the classic editor.nt *nt
* *Note:* do not use the constructor to create editor instances. Use the
staticnt * {@link module:editor-classic/classiceditor~ClassicEditor.create
`ClassicEditor.create()`} method instead.nt *nt * @protectednt * @param
{HTMLElement} element The DOM element that will be the source for the
created editor.nt * The data will be loaded from it and loaded back to it
once the editor is destroyed.nt * @param
{module:core/editor/editorconfig~EditorConfig} config The editor
configuration.nt */ntconstructor( element, config ) {nttsuper( config
);nntt/**ntt * The element replacer instance used to hide the editor
element.ntt *ntt * @protectedntt * @member
{module:utils/elementreplacer~ElementReplacer}ntt
*/nttthis._elementReplacer = new ElementReplacer();nnttthis.element =
element;nnttthis.data.processor = new
HtmlDataProcessor();nnttthis.model.document.createRoot();nnttthis.ui = new
ClassicEditorUI( this, new ClassicEditorUIView( this.locale )
);nnttattachToForm( this );nt}nnt/**nt * Destroys the editor instance,
releasing all resources used by it.nt *nt * Updates the original editor
element with the data.nt *nt * @returns {Promise}nt */ntdestroy()
{nttthis.updateElement();nttthis._elementReplacer.restore();nttthis.ui.destroy();nnttreturn
super.destroy();nt}nnt/**nt * Creates a classic editor instance.nt *nt *
Creating instance when using {@glink builds/index CKEditor build}:nt *nt
*ttClassicEditornt *ttt.create( document.querySelector( &#39;#editor&#39; )
)nt *ttt.then( editor =&gt; {nt *ttttconsole.log( &#39;Editor was
initialized&#39;, editor );nt *ttt} )nt *ttt.catch( err =&gt; {nt
*ttttconsole.error( err.stack );nt *ttt} );nt *nt * Creating instance when
using CKEditor from source (make sure to specify the list of plugins to
load and the toolbar):nt *nt *ttimport ClassicEditor from
&#39;@ckeditor/ckeditor5-editor-classic/src/classiceditor&#39;;nt *ttimport
Essentials from &#39;@ckeditor/ckeditor5-essentials/src/essentials&#39;;nt
*ttimport Bold from &#39;@ckeditor/ckeditor5-basic-styles/src/bold&#39;;nt
*ttimport Italic from
&#39;@ckeditor/ckeditor5-basic-styles/src/italic&#39;;nt *ttimport …nt *nt
*ttClassicEditornt *ttt.create( document.querySelector( &#39;#editor&#39;
), {nt *ttttplugins: [ Essentials, Bold, Italic, … ],nt *tttttoolbar: [
&#39;bold&#39;, &#39;italic&#39;, … ]nt *ttt} )nt *ttt.then( editor =&gt;
{nt *ttttconsole.log( &#39;Editor was initialized&#39;, editor );nt *ttt}
)nt *ttt.catch( err =&gt; {nt *ttttconsole.error( err.stack );nt *ttt} );nt
*nt * @param {HTMLElement} element The DOM element that will be the source
for the created editor.nt * The data will be loaded from it and loaded back
to it once the editor is destroyed.nt * @param
{module:core/editor/editorconfig~EditorConfig} config The editor
configuration.nt * @returns {Promise} A promise resolved once the editor is
ready.nt * The promise returns the created {@link
module:editor-classic/classiceditor~ClassicEditor} instance.nt */ntstatic
create( element, config ) {nttreturn new Promise( resolve =&gt; {ntttconst
editor = new this( element, config
);nntttresolve(ntttteditor.initPlugins()nttttt.then( () =&gt;
editor.ui.init() )nttttt.then( () =&gt;
{ntttttteditor._elementReplacer.replace( element, editor.ui.view.element
);ntttttteditor.fire( &#39;uiReady&#39; );nttttt} )nttttt.then( () =&gt;
editor.editing.view.attachDomRoot( editor.ui.view.editableElement )
)nttttt.then( () =&gt; editor.data.init( getDataFromElement( element ) )
)nttttt.then( () =&gt; {ntttttteditor.fire( &#39;dataReady&#39;
);ntttttteditor.fire( &#39;ready&#39; );nttttt} )nttttt.then( () =&gt;
editor )nttt);ntt} );nt}n}nnmix( ClassicEditor, DataApiMixin );nmix(
ClassicEditor, ElementApiMixin );nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-editor-classic/src/classiceditor.jsn// module id =
nulln// module chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module clipboard/datatransfern */nn/**n * Facade
over the native [`DataTransfer`](<a
href="https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer">developer.mozilla.org/en-US/docs/Web/API/DataTransfer</a>)
object.n */nexport default class DataTransfer {ntconstructor(
nativeDataTransfer ) {ntt/**ntt * The array of files created from the
native `DataTransfer#files` or `DataTransfer#items`.ntt *ntt * @readonlyntt
* @member {Array.&lt;File&gt;} filesntt */nttthis.files = getFiles(
nativeDataTransfer );nntt/**ntt * The native DataTransfer object.ntt *ntt *
@privatentt * @member {DataTransfer} #_nativentt */nttthis._native =
nativeDataTransfer;nt}nnt/**nt * Returns an array of available native
content types.nt *nt * @returns {Array.&lt;String&gt;}nt */ntget types()
{nttreturn this._native.types;nt}nnt/**nt * Gets data from the data
transfer by its mime type.nt *nt *ttdataTransfer.getData(
&#39;text/plain&#39; );nt *nt * @param {String} type The mime type. E.g.
`text/html` or `text/plain`.nt * @returns {String}nt */ntgetData( type )
{nttreturn this._native.getData( type );nt}nnt/**nt * Sets data in the data
transfer.nt *nt * @param {String} type The mime type. E.g. `text/html` or
`text/plain`.nt * @param {String} datant */ntsetData( type, data )
{nttthis._native.setData( type, data );nt}n}nnfunction getFiles(
nativeDataTransfer ) {nt// DataTransfer.files and items are Array-like and
might not have an iterable interface.ntconst files =
nativeDataTransfer.files ? Array.from( nativeDataTransfer.files ) :
[];ntconst items = nativeDataTransfer.items ? Array.from(
nativeDataTransfer.items ) : [];nntif ( files.length ) {nttreturn
files;nt}nt// Chrome have empty DataTransfer.files, but let get files
through the items interface.ntreturn itemsntt.filter( item =&gt; item.kind
=== &#39;file&#39; )ntt.map( item =&gt; item.getAsFile()
);n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-clipboard/src/datatransfer.jsn// module id = nulln// module
chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module clipboard/clipboardobservern */nnimport DomEventObserver from
&#39;@ckeditor/ckeditor5-engine/src/view/observer/domeventobserver&#39;;nimport
DataTransfer from &#39;./datatransfer&#39;;nn/**n * Clipboard events
observer.n *n * Fires the following events:n *n * * {@link
module:engine/view/document~Document#event:clipboardInput}n * * {@link
module:engine/view/document~Document#event:dragover}n * * {@link
module:engine/view/document~Document#event:drop}n * * {@link
module:engine/view/document~Document#event:paste}n * * {@link
module:engine/view/document~Document#event:copy}n * * {@link
module:engine/view/document~Document#event:cut}n *n * Note that this
observer is not available by default. To make it available it needs to be
added ton * {@link module:engine/view/document~Document} by the {@link
module:engine/view/view~View#addObserver} method.n *n * @extends
module:engine/view/observer/domeventobserver~DomEventObservern */nexport
default class ClipboardObserver extends DomEventObserver {ntconstructor(
view ) {nttsuper( view );nnttconst viewDocument =
this.document;nnttthis.domEventType = [ &#39;paste&#39;, &#39;copy&#39;,
&#39;cut&#39;, &#39;drop&#39;, &#39;dragover&#39; ];nnttthis.listenTo(
viewDocument, &#39;paste&#39;, handleInput, { priority: &#39;low&#39; }
);nttthis.listenTo( viewDocument, &#39;drop&#39;, handleInput, { priority:
&#39;low&#39; } );nnttfunction handleInput( evt, data )
{ntttdata.preventDefault();nntttconst targetRanges = data.dropRange ? [
data.dropRange ] : Array.from( viewDocument.selection.getRanges()
);nntttviewDocument.fire( &#39;clipboardInput&#39;, {nttttdataTransfer:
data.dataTransfer,ntttttargetRangesnttt} );ntt}nt}nntonDomEvent( domEvent )
{nttconst evtData = {ntttdataTransfer: new DataTransfer(
domEvent.clipboardData ? domEvent.clipboardData : domEvent.dataTransfer
)ntt};nnttif ( domEvent.type == &#39;drop&#39; ) {ntttevtData.dropRange =
getDropViewRange( this.view, domEvent );ntt}nnttthis.fire( domEvent.type,
domEvent, evtData );nt}n}nnfunction getDropViewRange( view, domEvent )
{ntconst domDoc = domEvent.target.ownerDocument;ntconst x =
domEvent.clientX;ntconst y = domEvent.clientY;ntlet domRange;nnt// Webkit
&amp; Blink.ntif ( domDoc.caretRangeFromPoint &amp;&amp;
domDoc.caretRangeFromPoint( x, y ) ) {nttdomRange =
domDoc.caretRangeFromPoint( x, y );nt}nt// FF.ntelse if (
domEvent.rangeParent ) {nttdomRange =
domDoc.createRange();nttdomRange.setStart( domEvent.rangeParent,
domEvent.rangeOffset );nttdomRange.collapse( true );nt}nntif ( domRange )
{nttreturn view.domConverter.domRangeToView( domRange );nt} else {nttreturn
view.document.selection.getFirstRange();nt}n}nn/**n * Fired as a
continuation of {@link event:paste} and {@link event:drop} events.n *
It&#39;s part of the {@link module:clipboard/clipboard~Clipboard "clipboard
pipeline&quot;}.n *n * Fired with a `dataTransfer` which comes from the
clipboard and which content should be processedn * and inserted into the
editor.n *n * Note that this event is not available by default. To make it
available {@link module:clipboard/clipboardobserver~ClipboardObserver}n *
needs to be added to {@link module:engine/view/document~Document} by the
{@link module:engine/view/view~View#addObserver} method.n * It&#39;s done
by the {@link module:clipboard/clipboard~Clipboard} feature. If it&#39;s
not loaded, it must be done manually.n *n * @see
module:clipboard/clipboardobserver~ClipboardObservern * @see
module:clipboard/clipboard~Clipboardn * @event
module:engine/view/document~Document#event:clipboardInputn * @param
{Object} data Event data.n * @param
{module:clipboard/datatransfer~DataTransfer} data.dataTransfer Data
transfer instance.n * @param {Array.&lt;module:engine/view/range~Range&gt;}
data.targetRanges Ranges which are the target of the operationn * (usually
– into which the content should be inserted).n * If clipboard input was
triggered by a paste operation, then these are the selection ranges. If by
a drop operation,n * then it&#39;s the drop position (which can be
different than the selection at the moment of drop).n */nn/**n * Fired when
user drags content over one of the editables.n *n * Introduced by {@link
module:clipboard/clipboardobserver~ClipboardObserver}.n *n * Note that this
event is not available by default. To make it available {@link
module:clipboard/clipboardobserver~ClipboardObserver}n * needs to be added
to {@link module:engine/view/document~Document} by the {@link
module:engine/view/view~View#addObserver} method.n * It&#39;s done by the
{@link module:clipboard/clipboard~Clipboard} feature. If it&#39;s not
loaded, it must be done manually.n *n * @see
module:engine/view/document~Document#event:clipboardInputn * @event
module:engine/view/document~Document#event:dragovern * @param
{module:clipboard/clipboardobserver~ClipboardEventData} data Event data.n
*/nn/**n * Fired when user dropped content into one of the editables.n *n *
Introduced by {@link
module:clipboard/clipboardobserver~ClipboardObserver}.n *n * Note that this
event is not available by default. To make it available {@link
module:clipboard/clipboardobserver~ClipboardObserver}n * needs to be added
to {@link module:engine/view/document~Document} by the {@link
module:engine/view/view~View#addObserver} method.n * It&#39;s done by the
{@link module:clipboard/clipboard~Clipboard} feature. If it&#39;s not
loaded, it must be done manually.n *n * @see
module:engine/view/document~Document#event:clipboardInputn * @event
module:engine/view/document~Document#event:dropn * @param
{module:clipboard/clipboardobserver~ClipboardEventData} data Event data.n *
@param {module:engine/view/range~Range} dropRange The position into which
the content is dropped.n */nn/**n * Fired when user pasted content into one
of the editables.n *n * Introduced by {@link
module:clipboard/clipboardobserver~ClipboardObserver}.n *n * Note that this
event is not available by default. To make it available {@link
module:clipboard/clipboardobserver~ClipboardObserver}n * needs to be added
to {@link module:engine/view/document~Document} by the {@link
module:engine/view/view~View#addObserver} method.n * It&#39;s done by the
{@link module:clipboard/clipboard~Clipboard} feature. If it&#39;s not
loaded, it must be done manually.n *n * @see
module:engine/view/document~Document#event:clipboardInputn * @event
module:engine/view/document~Document#event:pasten * @param
{module:clipboard/clipboardobserver~ClipboardEventData} data Event data.n
*/nn/**n * Fired when user copied content from one of the editables.n *n *
Introduced by {@link
module:clipboard/clipboardobserver~ClipboardObserver}.n *n * Note that this
event is not available by default. To make it available {@link
module:clipboard/clipboardobserver~ClipboardObserver}n * needs to be added
to {@link module:engine/view/document~Document} by the {@link
module:engine/view/view~View#addObserver} method.n * It&#39;s done by the
{@link module:clipboard/clipboard~Clipboard} feature. If it&#39;s not
loaded, it must be done manually.n *n * @see
module:clipboard/clipboardobserver~ClipboardObservern * @event
module:engine/view/document~Document#event:copyn * @param
{module:clipboard/clipboardobserver~ClipboardEventData} data Event data.n
*/nn/**n * Fired when user cut content from one of the editables.n *n *
Introduced by {@link
module:clipboard/clipboardobserver~ClipboardObserver}.n *n * Note that this
event is not available by default. To make it available {@link
module:clipboard/clipboardobserver~ClipboardObserver}n * needs to be added
to {@link module:engine/view/document~Document} by the {@link
module:engine/view/view~View#addObserver} method.n * It&#39;s done by the
{@link module:clipboard/clipboard~Clipboard} feature. If it&#39;s not
loaded, it must be done manually.n *n * @see
module:clipboard/clipboardobserver~ClipboardObservern * @event
module:engine/view/document~Document#event:cutn * @param
{module:clipboard/clipboardobserver~ClipboardEventData} data Event data.n
*/nn/**n * The value of the {@link
module:engine/view/document~Document#event:paste},n * {@link
module:engine/view/document~Document#event:copy} and {@link
module:engine/view/document~Document#event:cut} events.n *n * In order to
access clipboard data use `dataTransfer` property.n *n * @class
module:clipboard/clipboardobserver~ClipboardEventDatan * @extends
module:engine/view/observer/domeventdata~DomEventDatan */nn/**n * Data
transfer instance.n *n * @readonlyn * @member
{module:clipboard/datatransfer~DataTransfer}
module:clipboard/clipboardobserver~ClipboardEventData#dataTransfern
*/nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-clipboard/src/clipboardobserver.jsn// module id = nulln//
module chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module clipboard/utils/plaintexttohtmln */nn/**n * Converts
plain text to its HTML-ized version.n *n * @param {String} text The plain
text to convert.n * @returns {String} HTML generated from the plain text.n
*/nexport default function plainTextToHtml( text ) {nttext = textntt//
Encode &lt;&gt;.ntt.replace( /&lt;/g, &#39;&amp;lt;&#39; )ntt.replace(
/&gt;/g, &#39;&amp;gt;&#39; )ntt// Creates paragraphs for double line
breaks and change single line breaks to spaces.ntt// In the future single
line breaks may be converted into <br>s.ntt.replace( /\n\n/g,
&#39;&lt;/p&gt;&lt;p&gt;&#39; )ntt.replace( /\n/g, &#39; &#39; )ntt//
Preserve trailing spaces (only the first and last one – the rest is handled
below).ntt.replace( /^\s/, &#39;&amp;nbsp;&#39; )ntt.replace( /\s$/,
&#39;&amp;nbsp;&#39; )ntt// Preserve other subsequent spaces
now.ntt.replace( /\s\s/g, &#39; &amp;nbsp;&#39; );nntif ( text.indexOf(
&#39;&lt;/p&gt;&lt;p&gt;&#39; ) &gt; -1 ) {ntt// If we created paragraphs
above, add the trailing ones.ntttext = `&lt;p&gt;${ text
}&lt;/p&gt;`;nt}nnt// TODO:nt// * What about &#39;\nfoo&#39; vs &#39;
foo&#39;?nntreturn text;n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-clipboard/src/utils/plaintexttohtml.jsn// module id = nulln//
module chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module clipboard/utils/normalizeclipboarddatan */nn/**n *
Removes some popular browser quirks out of the clipboard data (HTML).n *n *
@param {String} data The HTML data to normalize.n * @returns {String}
Normalized HTML.n */nexport default function normalizeClipboardData( data )
{ntreturn datantt.replace( /&lt;span(?:
class=&quot;Apple-converted-space&quot;|)&gt;(\s+)&lt;\/span&gt;/g, (
fullMatch, spaces ) =&gt; {nttt// Handle the most popular and problematic
case when even a single space becomes an nbsp;.nttt// Decode those to
normal spaces. Read more in <a
href="https://github.com/ckeditor/ckeditor5-clipboard/issues/2.\n\t\t\tif">github.com/ckeditor/ckeditor5-clipboard/issues/2.ntttif</a>
( spaces.length == 1 ) {nttttreturn &#39; &#39;;nttt}nntttreturn
spaces;ntt} );n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-clipboard/src/utils/normalizeclipboarddata.jsn// module id =
nulln// module chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module clipboard/utils/viewtoplaintextn */nn//
Elements which should not have empty-line padding.n// Most
`view.ContainerElement` want to be separate by new-line, but some are
creating one structuren// together (like `&lt;li&gt;`) so it is better to
separate them by only one "\n&quot;.nconst smallPaddingElements = [
&#39;figcaption&#39;, &#39;li&#39; ];nn/**n * Converts {@link
module:engine/view/item~Item view item} and all of its children to plain
text.n *n * @param {module:engine/view/item~Item} viewItem View item to
convert.n * @returns {String} Plain text representation of `viewItem`.n
*/nexport default function viewToPlainText( viewItem ) {ntlet text =
&#39;&#39;;nntif ( viewItem.is( &#39;text&#39; ) || viewItem.is(
&#39;textProxy&#39; ) ) {ntt// If item is `Text` or `TextProxy` simple take
its text data.ntttext = viewItem.data;nt} else if ( viewItem.is(
&#39;img&#39; ) &amp;&amp; viewItem.hasAttribute( &#39;alt&#39; ) ) {ntt//
Special case for images - use alt attribute if it is provided.ntttext =
viewItem.getAttribute( &#39;alt&#39; );nt} else {ntt// Other elements are
document fragments, attribute elements or container elements.ntt// They
don&#39;t have their own text value, so convert their children.nttlet prev
= null;nnttfor ( const child of viewItem.getChildren() ) {ntttconst
childText = viewToPlainText( child );nnttt// Separate container element
children with one or more new-line characters.ntttif ( prev &amp;&amp; (
prev.is( &#39;containerElement&#39; ) || child.is(
&#39;containerElement&#39; ) ) ) {nttttif ( smallPaddingElements.includes(
prev.name ) || smallPaddingElements.includes( child.name ) ) {nttttttext +=
&#39;\n&#39;;ntttt} else {nttttttext += &#39;\n\n&#39;;ntttt}nttt}nnttttext
+= childText;ntttprev = child;ntt}nt}nntreturn
text;n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-clipboard/src/utils/viewtoplaintext.jsn// module id = nulln//
module chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module clipboard/clipboardn */nnimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nnimport ClipboardObserver
from &#39;./clipboardobserver&#39;;nnimport plainTextToHtml from
&#39;./utils/plaintexttohtml&#39;;nimport normalizeClipboardHtml from
&#39;./utils/normalizeclipboarddata&#39;;nimport viewToPlainText from
&#39;./utils/viewtoplaintext.js&#39;;nnimport HtmlDataProcessor from
&#39;@ckeditor/ckeditor5-engine/src/dataprocessor/htmldataprocessor&#39;;nn/**n
* The clipboard feature. Currently, it&#39;s responsible for intercepting
the `paste` and `drop` events andn * passing the pasted content through the
clipboard pipeline.n *n * # Clipboard input pipelinen *n * The feature
creates the clipboard input pipeline which allows processing clipboard
contentn * before it gets inserted into the editor. The pipeline consists
of two events on whichn * the features can listen in order to modify or
totally override the default behavior.n *n * ## On {@link
module:engine/view/document~Document#event:paste} and {@link
module:engine/view/document~Document#event:drop}n *n * The default action
is to:n *n * 1. get HTML or plain text from the clipboard,n * 2. prevent
the default action of the native `paste` or `drop` event,n * 3. fire {@link
module:engine/view/document~Document#event:clipboardInput} with an * {@link
module:clipboard/datatransfer~DataTransfer `dataTransfer`} property.n * 4.
fire {@link module:clipboard/clipboard~Clipboard#event:inputTransformation}
with a `data` containing the clipboard data parsed ton * a {@link
module:engine/view/documentfragment~DocumentFragment view document
fragment}.n *n * These action are performed by a low priority listeners, so
they can be overridden by a normal onesn * when a deeper change in pasting
behavior is needed. For example, a feature which wants to differently readn
* data from the clipboard (the {@link
module:clipboard/datatransfer~DataTransfer `DataTransfer`}).n * should plug
a listener at this stage.n *n * ## On {@link
module:engine/view/document~Document#event:clipboardInput}n *n * This
action is performed by a low priority listener, so it can be overridden by
a normal one.n *n * At this stage the dataTransfer object can be processed
by the features, which want to transform the original dataTransform.n *n
*ttthis.listenTo( editor.editing.view, &#39;clipboardInput&#39;, ( evt,
data ) =&gt; {n *tttconst content = customTransform( data.dataTransfer.get(
&#39;text/html&#39; ) );n *tttconst transformedContent = transform( content
);n *tttdata.dataTransfer.set( &#39;text/html&#39;, transformedContent );n
*tt} );n *n * ## On {@link
module:clipboard/clipboard~Clipboard#event:inputTransformation}n *n * The
default action is to insert the content (`data.content`, represented by an
* {@link module:engine/view/documentfragment~DocumentFragment}) to an
editor if the data is not empty.n *n * This action is performed by a low
priority listener, so it can be overridden by a normal one.n *n * At this
stage the pasted content can be processed by the features. E.g. a feature
which wants to transformn * a pasted text into a link can be implemented in
this way:n *n *ttthis.listenTo( editor.plugins.get( &#39;Clipboard&#39; ),
&#39;inputTransformation&#39;, ( evt, data ) =&gt; {n *tttif (
data.content.childCount == 1 &amp;&amp; isUrlText( data.content.getChild( 0
) ) ) {n *ttttconst linkUrl = data.content.getChild( 0 ).data;n *n
*ttttdata.content = new ViewDocumentFragment( [n *tttttViewElement(n
*tttttt&#39;a&#39;,n *tttttt{ href: linkUrl },n *tttttt[ new ViewText(
linkUrl ) ]n *ttttt)n *tttt] );n *ttt}n *tt} );n *n * # Clipboard output
pipelinen *n * The output pipeline is the equivalent of the input pipeline
but for the copy and cut operations.n * It allows to process the content
which will be then put into the clipboard or to override the whole
process.n *n * ## On {@link
module:engine/view/document~Document#event:copy} and {@link
module:engine/view/document~Document#event:cut}n *n * The default action is
to:n *n * 1. {@link module:engine/model/model~Model#getSelectedContent get
selected content} from the editor,n * 2. prevent the default action of the
native `copy` or `cut` event,n * 3. fire {@link
module:engine/view/document~Document#event:clipboardOutput} with a clone of
the selected contentn * converted to a {@link
module:engine/view/documentfragment~DocumentFragment view document
fragment}.n *n * ## On {@link
module:engine/view/document~Document#event:clipboardOutput}n *n * The
default action is to put the content (`data.content`, represented by an *
{@link module:engine/view/documentfragment~DocumentFragment}) to the
clipboard as HTML. In case of the cut operation,n * the selected content is
also deleted from the editor.n *n * This action is performed by a low
priority listener, so it can be overridden by a normal one.n *n * At this
stage the copied/cut content can be processed by the features.n *n *
@extends module:core/plugin~Pluginn */nexport default class Clipboard
extends Plugin {nt/**nt * @inheritDocnt */ntstatic get pluginName()
{nttreturn &#39;Clipboard&#39;;nt}nnt/**nt * @inheritDocnt */ntinit()
{nttconst editor = this.editor;nttconst modelDocument =
editor.model.document;nttconst view = editor.editing.view;nttconst
viewDocument = view.document;nntt/**ntt * Data processor used to convert
pasted HTML to a view structure.ntt *ntt * @privatentt * @member
{module:engine/dataprocessor/htmldataprocessor~HtmlDataProcessor}
#_htmlDataProcessorntt */nttthis._htmlDataProcessor = new
HtmlDataProcessor();nnttview.addObserver( ClipboardObserver );nntt// The
clipboard paste pipeline.nnttthis.listenTo( viewDocument,
&#39;clipboardInput&#39;, ( evt, data ) =&gt; {nttt// Pasting and dropping
is disabled when editor is read-only.nttt// See: <a
href="https://github.com/ckeditor/ckeditor5-clipboard/issues/26.\n\t\t\tif">github.com/ckeditor/ckeditor5-clipboard/issues/26.ntttif</a>
( editor.isReadOnly ) {nttttreturn;nttt}nntttconst dataTransfer =
data.dataTransfer;ntttlet content = &#39;&#39;;nntttif (
dataTransfer.getData( &#39;text/html&#39; ) ) {nttttcontent =
normalizeClipboardHtml( dataTransfer.getData( &#39;text/html&#39; ) );nttt}
else if ( dataTransfer.getData( &#39;text/plain&#39; ) ) {nttttcontent =
plainTextToHtml( dataTransfer.getData( &#39;text/plain&#39; )
);nttt}nntttcontent = this._htmlDataProcessor.toView( content
);nntttthis.fire( &#39;inputTransformation&#39;, { content }
);nntttview.scrollToTheSelection();ntt}, { priority: &#39;low&#39; }
);nnttthis.listenTo( this, &#39;inputTransformation&#39;, ( evt, data )
=&gt; {ntttif ( !data.content.isEmpty ) {nttttconst dataController =
this.editor.data;nttttconst model = this.editor.model;nntttt// Convert the
pasted content to a model document fragment.ntttt// Conversion is
contextual, but in this case we need an "all allowed&quot; context and for
thatntttt// we use the $clipboardHolder item.nttttconst modelFragment =
dataController.toModel( data.content, &#39;$clipboardHolder&#39; );nnttttif
( modelFragment.childCount == 0 )
{ntttttreturn;ntttt}nnttttmodel.insertContent( modelFragment,
modelDocument.selection );nttt}ntt}, { priority: &#39;low&#39; } );nntt//
The clipboard copy/cut pipeline.nnttfunction onCopyCut( evt, data )
{ntttconst dataTransfer =
data.dataTransfer;nntttdata.preventDefault();nntttconst content =
editor.data.toView( editor.model.getSelectedContent(
modelDocument.selection ) );nntttviewDocument.fire(
&#39;clipboardOutput&#39;, { dataTransfer, content, method: evt.name }
);ntt}nnttthis.listenTo( viewDocument, &#39;copy&#39;, onCopyCut, {
priority: &#39;low&#39; } );nttthis.listenTo( viewDocument, &#39;cut&#39;,
( evt, data ) =&gt; {nttt// Cutting is disabled when editor is
read-only.nttt// See: <a
href="https://github.com/ckeditor/ckeditor5-clipboard/issues/26.\n\t\t\tif">github.com/ckeditor/ckeditor5-clipboard/issues/26.ntttif</a>
( editor.isReadOnly ) {nttttdata.preventDefault();nttt} else
{nttttonCopyCut( evt, data );nttt}ntt}, { priority: &#39;low&#39; }
);nnttthis.listenTo( viewDocument, &#39;clipboardOutput&#39;, ( evt, data )
=&gt; {ntttif ( !data.content.isEmpty ) {nttttdata.dataTransfer.setData(
&#39;text/html&#39;, this._htmlDataProcessor.toData( data.content )
);nttttdata.dataTransfer.setData( &#39;text/plain&#39;, viewToPlainText(
data.content ) );nttt}nntttif ( data.method == &#39;cut&#39; )
{ntttteditor.model.deleteContent( modelDocument.selection );nttt}ntt}, {
priority: &#39;low&#39; } );nt}n}nn/**n * Fired with a `content`, which
comes from the clipboard (was pasted or dropped) andn * should be processed
in order to be inserted into the editor.n * It&#39;s part of the {@link
module:clipboard/clipboard~Clipboard "clipboard pipeline&quot;}.n *n * @see
module:clipboard/clipboardobserver~ClipboardObservern * @see
module:clipboard/clipboard~Clipboardn * @event
module:clipboard/clipboard~Clipboard#event:inputTransformationn * @param
{Object} data Event data.n * @param
{module:engine/view/documentfragment~DocumentFragment} data.content Event
data. Content to be inserted into the editor.n * It can be modified by the
event listeners. Read more about the clipboard pipelines in {@link
module:clipboard/clipboard~Clipboard}n */nn/**n * Fired on {@link
module:engine/view/document~Document#event:copy} and {@link
module:engine/view/document~Document#event:cut}n * with a copy of selected
content. The content can be processed before it ends up in the clipboard.n
* It&#39;s part of the {@link module:clipboard/clipboard~Clipboard
"clipboard pipeline&quot;}.n *n * @see
module:clipboard/clipboardobserver~ClipboardObservern * @see
module:clipboard/clipboard~Clipboardn * @event
module:engine/view/document~Document#event:clipboardOutputn * @param
{module:clipboard/clipboard~ClipboardOutputEventData} data Event data.n
*/nn/**n * The value of the {@link
module:engine/view/document~Document#event:clipboardOutput} event.n *n *
@class module:clipboard/clipboard~ClipboardOutputEventDatan */nn/**n * Data
transfer instance.n *n * @readonlyn * @member
{module:clipboard/datatransfer~DataTransfer}
module:clipboard/clipboard~ClipboardOutputEventData#dataTransfern */nn/**n
* Content to be put into the clipboard. It can be modified by the event
listeners.n * Read more about the clipboard pipelines in {@link
module:clipboard/clipboard~Clipboard}.n *n * @member
{module:engine/view/documentfragment~DocumentFragment}
module:clipboard/clipboard~ClipboardOutputEventData#contentn */nn/**n *
Whether the event was triggered by copy or cut operation.n *n * @member
{&#39;copy&#39;|&#39;cut&#39;}
module:clipboard/clipboard~ClipboardOutputEventData#methodn
*/nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-clipboard/src/clipboard.jsn// module id = nulln// module
chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module enter/entercommandn */nnimport Command from
&#39;@ckeditor/ckeditor5-core/src/command&#39;;nn/**n * Enter command. It
is used by the {@link module:enter/enter~Enter Enter feature} to handle the
&lt;kbd&gt;Enter&lt;/kbd&gt; key.n *n * @extends
module:core/command~Commandn */nexport default class EnterCommand extends
Command {nt/**nt * @inheritDocnt */ntexecute() {nttconst model =
this.editor.model;nttconst doc = model.document;nnttmodel.change( writer
=&gt; {ntttenterBlock( this.editor.model, writer, doc.selection,
model.schema );ntttthis.fire( &#39;afterExecute&#39;, { writer } );ntt}
);nt}n}nn// Creates a new block in the way that the
&lt;kbd&gt;Enter&lt;/kbd&gt; key is expected to work.n//n// @param
{module:engine/model~Model} modeln// @param
{module:engine/model/writer~Writer} writern// @param
{module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection}
selectionn// Selection on which the action should be performed.n// @param
{module:engine/model/schema~Schema} schemanfunction enterBlock( model,
writer, selection, schema ) {ntconst isSelectionEmpty =
selection.isCollapsed;ntconst range = selection.getFirstRange();ntconst
startElement = range.start.parent;ntconst endElement =
range.end.parent;nnt// Don&#39;t touch the roots and other limit
elements.ntif ( schema.isLimit( startElement ) || schema.isLimit(
endElement ) ) {ntt// Delete the selected content but only if inside a
single limit element.ntt// Abort, when crossing limit elements boundary
(e.g. &lt;<a
href="x</limit1>donttouchme<limit2>y”>limit1>x</a>y&lt;/limit2&gt;).ntt//
This is an edge case and it&#39;s hard to tell what should actually happen
because such a selectionntt// is not entirely valid.nttif (
!isSelectionEmpty &amp;&amp; startElement == endElement )
{ntttmodel.deleteContent( selection );ntt}nnttreturn;nt}nntif (
isSelectionEmpty ) {nttsplitBlock( writer, selection, range.start );nt}
else {nttconst leaveUnmerged = !( range.start.isAtStart &amp;&amp;
range.end.isAtEnd );nttconst isContainedWithinOneElement = ( startElement
== endElement );nnttmodel.deleteContent( selection, { leaveUnmerged }
);nnttif ( leaveUnmerged ) {nttt// Partially selected elements.nttt//nttt//
&lt;<a href="xx">h>x</a>x&lt;/h&gt;tt-&gt; &lt;h&gt;x^x&lt;/h&gt;ttt-&gt;
&lt;h&gt;x&lt;/h&gt;&lt;h&gt;^x&lt;/h&gt;ntttif (
isContainedWithinOneElement ) {nttttsplitBlock( writer, selection,
selection.focus );nttt}nttt// Selection over multiple elements.nttt//nttt//
&lt;<a href="x</h><p>y“>h>x</a>y&lt;p&gt;t-&gt;
&lt;h&gt;x^&lt;/h&gt;&lt;p&gt;y&lt;/p&gt;t-&gt;
&lt;h&gt;x&lt;/h&gt;&lt;p&gt;^y&lt;/p&gt;ntttelse
{nttttwriter.setSelection( endElement, 0 );nttt}ntt}nt}n}nnfunction
splitBlock( writer, selection, splitPos ) {ntconst oldElement =
splitPos.parent;ntconst newElement = new oldElement.constructor(
oldElement.name, oldElement.getAttributes() );nntif ( splitPos.isAtEnd )
{ntt// If the split is at the end of element, instead of splitting, just
create a clone of position&#39;s parentntt// element and insert it after
split element. The result is the same but less operations are donentt// and
it&#39;s more semantically correct (when it comes to operational
transformation).nttwriter.insert( newElement, splitPos.parent,
&#39;after&#39; );nt} else if ( splitPos.isAtStart ) {ntt// If the split is
at the start of element, instead of splitting, just create a clone of
position&#39;s parentntt// element and insert it before split element. The
result is the same but less operations are donentt// and it&#39;s more
semantically correct (when it comes to operational
transformation).nttwriter.insert( newElement, splitPos.parent,
&#39;before&#39; );nt} else {nttwriter.split( splitPos
);nt}nntwriter.setSelection( splitPos.parent.nextSibling, 0
);n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-enter/src/entercommand.jsn// module id = nulln// module chunks
= ”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben.
All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
enter/enterobservern */nnimport Observer from
&#39;@ckeditor/ckeditor5-engine/src/view/observer/observer&#39;;nimport
DomEventData from
&#39;@ckeditor/ckeditor5-engine/src/view/observer/domeventdata&#39;;nimport
{ keyCodes } from &#39;@ckeditor/ckeditor5-utils/src/keyboard&#39;;nn/**n *
Enter observer introduces the {@link
module:engine/view/document~Document#event:enter} event.n *n * @extends
module:engine/view/observer~Observern */nexport default class EnterObserver
extends Observer {ntconstructor( view ) {nttsuper( view );nnttconst
document = this.document;nnttdocument.on( &#39;keydown&#39;, ( evt, data )
=&gt; {ntttif ( this.isEnabled &amp;&amp; data.keyCode == keyCodes.enter )
{ntttt// Save the event object to check later if it was stopped or
not.nttttlet event;nttttdocument.once( &#39;enter&#39;, evt =&gt; ( event =
evt ), { priority: &#39;highest&#39; } );nnttttdocument.fire(
&#39;enter&#39;, new DomEventData( document, data.domEvent ) );nntttt//
Stop `keydown` event if `enter` event was stopped.ntttt// <a
href="https://github.com/ckeditor/ckeditor5/issues/753\n\t\t\t\tif">github.com/ckeditor/ckeditor5/issues/753nttttif</a>
( event &amp;&amp; event.stop.called ) {ntttttevt.stop();ntttt}nttt}ntt}
);nt}nnt/**nt * @inheritDocnt */ntobserve() {}n}nn/**n * Event fired when
the user presses the &lt;kbd&gt;Enter&lt;/kbd&gt; key.n *n * Note: This
event is fired by the {@link module:enter/enterobserver~EnterObserver
observer}n * (usually registered by the {@link module:enter/enter~Enter
Enter feature}).n *n * @event
module:engine/view/document~Document#event:entern * @param
{module:engine/view/observer/domeventdata~DomEventData} datan
*/nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-enter/src/enterobserver.jsn// module id = nulln// module
chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module utils/difftochangesn */nn/**n * Creates a set of changes which need
to be applied to the input in order to transformn * it into the output.
This function can be used with strings or arrays.n *n *ttconst input =
Array.from( &#39;abc&#39; );n *ttconst output = Array.from( &#39;xaby&#39;
);n *ttconst changes = diffToChanges( diff( input, output ), output );n *n
*ttchanges.forEach( change =&gt; {n *tttif ( change.type ==
&#39;insert&#39; ) {n *ttttinput.splice( change.index, 0, …change.values
);n *ttt} else if ( change.type == &#39;delete&#39; ) {n *ttttinput.splice(
change.index, change.howMany );n *ttt}n *tt} );n *n *ttinput.join(
&#39;&#39; ) == output.join( &#39;&#39; ); // -&gt; truen *n * @param
{Array.&lt;&#39;equal&#39;|&#39;insert&#39;|&#39;delete&#39;&gt;} diff
Result of {@link module:utils/diff~diff}.n * @param {String|Array} output
The string or array which was passed as diff&#39;s output.n * @returns
{Array.&lt;Object&gt;} Set of changes (insert or delete) which need to be
applied to the inputn * in order to transform it into the output.n
*/nexport default function diffToChanges( diff, output ) {ntconst changes =
[];ntlet index = 0;ntlet lastOperation;nntdiff.forEach( change =&gt; {nttif
( change == &#39;equal&#39; ) {ntttpushLast();nntttindex++;ntt} else if (
change == &#39;insert&#39; ) {ntttif ( isContinuationOf( &#39;insert&#39; )
) {nttttlastOperation.values.push( output[ index ] );nttt} else
{nttttpushLast();nnttttlastOperation = {nttttttype:
&#39;insert&#39;,ntttttindex,ntttttvalues: [ output[ index ]
]ntttt};nttt}nntttindex++;ntt} else /* if ( change == &#39;delete&#39; ) */
{ntttif ( isContinuationOf( &#39;delete&#39; ) )
{nttttlastOperation.howMany++;nttt} else
{nttttpushLast();nnttttlastOperation = {nttttttype:
&#39;delete&#39;,ntttttindex,nttttthowMany: 1ntttt};nttt}ntt}nt}
);nntpushLast();nntreturn changes;nntfunction pushLast() {nttif (
lastOperation ) {ntttchanges.push( lastOperation );ntttlastOperation =
null;ntt}nt}nntfunction isContinuationOf( expected ) {nttreturn
lastOperation &amp;&amp; lastOperation.type ==
expected;nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/difftochanges.jsn// module id = nulln// module
chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module typing/changebuffern */nnimport Batch from
&#39;@ckeditor/ckeditor5-engine/src/model/batch&#39;;nn/**n * Change buffer
allows to group atomic changes (like characters that have been typed) inton
* {@link module:engine/model/batch~Batch batches}.n *n * Batches represent
single undo steps, hence changes added to one single batch are undone
together.n *n * The buffer has a configurable limit of atomic changes that
it can accommodate. After the limit wasn * exceeded (see {@link
~ChangeBuffer#input}), a new batch is created in {@link
~ChangeBuffer#batch}.n *n * To use the change buffer you need to let it
know about the number of changes that were added to the batch:n *n *ttconst
buffer = new ChangeBuffer( model, LIMIT );n *n *tt// Later on in your
feature:n *ttbuffer.batch.insert( pos, insertedCharacters );n
*ttbuffer.input( insertedCharacters.length );n *n */nexport default class
ChangeBuffer {nt/**nt * Creates a new instance of the change buffer.nt *nt
* @param {module:engine/model/model~Model} modelnt * @param {Number}
[limit=20] The maximum number of atomic changes which can be contained in
one batch.nt */ntconstructor( model, limit = 20 ) {ntt/**ntt * The model
instance.ntt *ntt * @readonlyntt * @member
{module:engine/model/model~Model} modelntt */nttthis.model =
model;nntt/**ntt * The number of atomic changes in the buffer. Once it
exceeds the {@link limit},ntt * the {@link batch batch} is set to a new
one.ntt *ntt * @readonlyntt * @member {Number} sizentt */nttthis.size =
0;nntt/**ntt * The maximum number of atomic changes which can be contained
in one batch.ntt *ntt * @readonlyntt * @member {Number} limitntt
*/nttthis.limit = limit;nntt/**ntt * Whether the buffer is locked. A locked
buffer cannot be reset unless it gets unlocked.ntt *ntt * @readonlyntt *
@member {Boolean} isLockedntt */nttthis.isLocked = false;nntt// The
function to be called in order to notify the buffer about batches which
appeared in the document.ntt// The callback will check whether it is a new
batch and in that case the buffer will be flushed.ntt//ntt// The reason why
the buffer needs to be flushed whenever a new batch appears is that the
changes added afterwardsntt// should be added to a new batch. For instance,
when the  user types, then inserts an image, and then types again,ntt// the
characters typed after inserting the image should be added to a different
batch than the characters typed before.nttthis._changeCallback = ( evt,
batch ) =&gt; {ntttif ( batch.type != &#39;transparent&#39; &amp;&amp;
batch !== this._batch ) {nttttthis._reset( true
);nttt}ntt};nnttthis._selectionChangeCallback = () =&gt;
{ntttthis._reset();ntt};nnttthis.model.document.on( &#39;change&#39;,
this._changeCallback );nnttthis.model.document.selection.on(
&#39;change:range&#39;, this._selectionChangeCallback
);nttthis.model.document.selection.on( &#39;change:attribute&#39;,
this._selectionChangeCallback );nntt/**ntt * The current batch instance.ntt
*ntt * @privatentt * @member #_batchntt */nntt/**ntt * The callback to
document the change event which later needs to be removed.ntt *ntt *
@privatentt * @member #_changeCallbackntt */nntt/**ntt * The callback to
document selection `change:attribute` and `change:range` events which
resets the buffer.ntt *ntt * @privatentt * @member
#_selectionChangeCallbackntt */nt}nnt/**nt * The current batch to which a
feature should add its deltas. Once the {@link size}nt * is reached or
exceeds the {@link limit}, the batch is set to a new instance and the size
is reset.nt *nt * @type {module:engine/model/batch~Batch}nt */ntget batch()
{nttif ( !this._batch ) {ntttthis._batch = new Batch();ntt}nnttreturn
this._batch;nt}nnt/**nt * The input number of changes into the buffer. Once
the {@link size} isnt * reached or exceeds the {@link limit}, the batch is
set to a new instance and the size is reset.nt *nt * @param {Number}
changeCount The number of atomic changes to input.nt */ntinput( changeCount
) {nttthis.size += changeCount;nnttif ( this.size &gt;= this.limit )
{ntttthis._reset( true );ntt}nt}nnt/**nt * Locks the buffer.nt */ntlock()
{nttthis.isLocked = true;nt}nnt/**nt * Unlocks the buffer.nt */ntunlock()
{nttthis.isLocked = false;nt}nnt/**nt * Destroys the buffer.nt
*/ntdestroy() {nttthis.model.document.off( &#39;change&#39;,
this._changeCallback );nttthis.model.document.selection.off(
&#39;change:range&#39;, this._selectionChangeCallback
);nttthis.model.document.selection.off( &#39;change:attribute&#39;,
this._selectionChangeCallback );nt}nnt/**nt * Resets the change buffer.nt
*nt * @privatent * @param {Boolean} [ignoreLock] Whether internal lock
{@link isLocked} should be ignored.nt */nt_reset( ignoreLock ) {nttif (
!this.isLocked || ignoreLock ) {ntttthis._batch = null;ntttthis.size =
0;ntt}nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-typing/src/changebuffer.jsn// module id = nulln// module
chunks = ”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module typing/inputn */nnimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport ModelRange from
&#39;@ckeditor/ckeditor5-engine/src/model/range&#39;;nimport ViewPosition
from &#39;@ckeditor/ckeditor5-engine/src/view/position&#39;;nimport
ViewText from &#39;@ckeditor/ckeditor5-engine/src/view/text&#39;;nimport
diff from &#39;@ckeditor/ckeditor5-utils/src/diff&#39;;nimport
diffToChanges from
&#39;@ckeditor/ckeditor5-utils/src/difftochanges&#39;;nimport { getCode }
from &#39;@ckeditor/ckeditor5-utils/src/keyboard&#39;;nimport DomConverter
from &#39;@ckeditor/ckeditor5-engine/src/view/domconverter&#39;;nimport
InputCommand from &#39;./inputcommand&#39;;nn/**n * Handles text input
coming from the keyboard or other input methods.n *n * @extends
module:core/plugin~Pluginn */nexport default class Input extends Plugin
{nt/**nt * @inheritDocnt */ntstatic get pluginName() {nttreturn
&#39;Input&#39;;nt}nnt/**nt * @inheritDocnt */ntinit() {nttconst editor =
this.editor;nttconst editingView = editor.editing.view;nttconst
inputCommand = new InputCommand( editor, editor.config.get(
&#39;typing.undoStep&#39; ) || 20 );nntt// TODO The above default
configuration value should be defined using editor.config.define() once
it&#39;s fixed.nntteditor.commands.add( &#39;input&#39;, inputCommand
);nnttthis.listenTo( editingView.document, &#39;keydown&#39;, ( evt, data )
=&gt; {ntttthis._handleKeydown( data, inputCommand );ntt}, { priority:
&#39;lowest&#39; } );nnttthis.listenTo( editingView.document,
&#39;mutations&#39;, ( evt, mutations, viewSelection ) =&gt;
{ntttthis._handleMutations( mutations, viewSelection );ntt} );nt}nnt/**nt *
Handles the keydown event. We need to guess whether such keystroke is going
to resultnt * in typing. If so, then before character insertion happens,
any selected content needsnt * to be deleted. Otherwise the default browser
deletion mechanism would bent * triggered, resulting in:nt *nt * * Hundreds
of mutations which could not be handled.nt * * But most importantly, loss
of control over how the content is being deleted.nt *nt * The method is
used in a low-priority listener, hence allowing other listeners (e.g.
delete or enter features)nt * to handle the event.nt *nt * @privatent *
@param {module:engine/view/observer/keyobserver~KeyEventData} evtDatant *
@param {module:typing/inputcommand~InputCommand} inputCommandnt
*/nt_handleKeydown( evtData, inputCommand ) {nttconst model =
this.editor.model;nttconst doc = model.document;nttconst buffer =
inputCommand.buffer;nntt// By relying on the state of the input command we
allow disabling the entire input easilyntt// by just disabling the input
command. We could’ve used here the delete command but thatntt// would mean
requiring the delete feature which would block loading one without the
other.ntt// We could also check the editor.isReadOnly property, but that
wouldn&#39;t allow to blockntt// the input without blocking other
features.nttif ( !inputCommand.isEnabled ) {ntttreturn;ntt}nnttif (
isSafeKeystroke( evtData ) || doc.selection.isCollapsed )
{ntttreturn;ntt}nnttbuffer.lock();nnttmodel.enqueueChange( buffer.batch, ()
=&gt; {ntttthis.editor.model.deleteContent( doc.selection );ntt}
);nnttbuffer.unlock();nt}nnt/**nt * Handles DOM mutations.nt *nt *
@privatent * @param
{Array.&lt;module:engine/view/observer/mutationobserver~MutatedText|nt *
module:engine/view/observer/mutationobserver~MutatedChildren&gt;}
mutationsnt * @param {module:engine/view/selection~Selection|null}
viewSelectionnt */nt_handleMutations( mutations, viewSelection ) {nttnew
MutationHandler( this.editor ).handle( mutations, viewSelection
);nt}n}nn/**n * Helper class for translating DOM mutations into model
changes.n *n * @privaten */nclass MutationHandler {nt/**nt * Creates an
instance of the mutation handler.nt *nt * @param
{module:core/editor/editor~Editor} editornt */ntconstructor( editor )
{ntt/**ntt * Editor instance for which mutations are handled.ntt *ntt *
@readonlyntt * @member {module:core/editor/editor~Editor} editorntt
*/nttthis.editor = editor;nntt/**ntt * The editing controller.ntt *ntt *
@readonlyntt * @member
{module:engine/controller/editingcontroller~EditingController} editingntt
*/nttthis.editing = this.editor.editing;nt}nnt/**nt * Handles given
mutations.nt *nt * @param
{Array.&lt;module:engine/view/observer/mutationobserver~MutatedText|nt *
module:engine/view/observer/mutationobserver~MutatedChildren&gt;}
mutationsnt * @param {module:engine/view/selection~Selection|null}
viewSelectionnt */nthandle( mutations, viewSelection ) {nttif (
containerChildrenMutated( mutations ) )
{ntttthis._handleContainerChildrenMutations( mutations, viewSelection
);ntt} else {ntttfor ( const mutation of mutations ) {ntttt// Fortunately
it will never be both.nttttthis._handleTextMutation( mutation,
viewSelection );nttttthis._handleTextNodeInsertion( mutation
);nttt}ntt}nt}nnt/**nt * Handles situations when container&#39;s children
mutated during input. This can happen whennt * the browser is trying to
"fix&quot; DOM in certain situations. For example, when the user starts to
typent * in `&lt;p&gt;&lt;a
href=&quot;&quot;&gt;<em>Link{}</em>&lt;/a&gt;&lt;/p&gt;`, the browser
might change the order of elementsnt * to `&lt;p&gt;<em>&lt;a
href=&quot;&quot;&gt;Link&lt;/a&gt;x{}</em>&lt;/p&gt;`. A similar situation
happens when the spell checkernt * replaces a word wrapped with
`&lt;strong&gt;` with a word wrapped with a `&lt;b&gt;` element.nt *nt * To
handle such situations, the common DOM ancestor of all mutations is
converted to the model representationnt * and then compared with the
current model to calculate the proper text change.nt *nt * Note: Single
text node insertion is handled in {@link #_handleTextNodeInsertion} and
text node mutation is handlednt * in {@link #_handleTextMutation}).nt *nt *
@privatent * @param
{Array.&lt;module:engine/view/observer/mutationobserver~MutatedText|nt *
module:engine/view/observer/mutationobserver~MutatedChildren&gt;}
mutationsnt * @param {module:engine/view/selection~Selection|null}
viewSelectionnt */nt_handleContainerChildrenMutations( mutations,
viewSelection ) {ntt// Get common ancestor of all mutations.nttconst
mutationsCommonAncestor = getMutationsContainer( mutations );nntt// Quit if
there is no common ancestor.nttif ( !mutationsCommonAncestor )
{ntttreturn;ntt}nnttconst domConverter =
this.editor.editing.view.domConverter;nntt// Get common ancestor in
DOM.nttconst domMutationCommonAncestor = domConverter.mapViewToDom(
mutationsCommonAncestor );nntt// Create fresh DomConverter so it will not
use existing mapping and convert current DOM to model.ntt// This
wouldn&#39;t be needed if DomConverter would allow to create fresh view
without checking any mappings.nttconst freshDomConverter = new
DomConverter();nttconst modelFromCurrentDom =
this.editor.data.toModel(ntttfreshDomConverter.domToView(
domMutationCommonAncestor )ntt).getChild( 0 );nntt// Current model.nttconst
currentModel = this.editor.editing.mapper.toModelElement(
mutationsCommonAncestor );nntt// If common ancestor is not mapped, do not
do anything. It probably is a parent of another view element.ntt// That
means that we would need to diff model elements (see `if` below). Better
return early instead ofntt// trying to get a reasonable model ancestor. It
will fell into the `if` below anyway.ntt// This situation happens for
example for lists. If `&lt;ul&gt;` is a common ancestor, `currentModel` is
`undefined`ntt// because `&lt;ul&gt;` is not mapped (`&lt;li&gt;`s
are).ntt// See <a
href="https://github.com/ckeditor/ckeditor5/issues/718.\n\t\tif">github.com/ckeditor/ckeditor5/issues/718.nttif</a>
( !currentModel ) {ntttreturn;ntt}nntt// Get children from both
ancestors.nttconst modelFromDomChildren = Array.from(
modelFromCurrentDom.getChildren() );nttconst currentModelChildren =
Array.from( currentModel.getChildren() );nntt// Skip situations when common
ancestor has any elements (cause they are too hard).nttif (
!hasOnlyTextNodes( modelFromDomChildren ) || !hasOnlyTextNodes(
currentModelChildren ) ) {ntttreturn;ntt}nntt// Replace &amp;nbsp; inserted
by the browser with normal space.ntt// See comment in
`_handleTextMutation`.nttconst newText = modelFromDomChildren.map( item
=&gt; item.data ).join( &#39;&#39; ).replace( /\u00A0/g, &#39; &#39;
);nttconst oldText = currentModelChildren.map( item =&gt; item.data ).join(
&#39;&#39; );nntt// Do nothing if mutations created same text.nttif (
oldText === newText ) {ntttreturn;ntt}nnttconst diffResult = diff( oldText,
newText );nnttconst { firstChangeAt, insertions, deletions } =
calculateChanges( diffResult );nntt// Try setting new model selection
according to passed view selection.nttlet modelSelectionRange = null;nnttif
( viewSelection ) {ntttmodelSelectionRange =
this.editing.mapper.toModelRange( viewSelection.getFirstRange()
);ntt}nnttconst insertText = newText.substr( firstChangeAt, insertions
);nttconst removeRange =
ModelRange.createFromParentsAndOffsets(ntttcurrentModel,ntttfirstChangeAt,ntttcurrentModel,ntttfirstChangeAt
+ deletionsntt);nnttthis.editor.execute( &#39;input&#39;, {nttttext:
insertText,ntttrange: removeRange,ntttresultRange: modelSelectionRangentt}
);nt}nnt/**nt * @privatent */nt_handleTextMutation( mutation, viewSelection
) {nttif ( mutation.type != &#39;text&#39; ) {ntttreturn;ntt}nntt// Replace
&amp;nbsp; inserted by the browser with normal space.ntt// We want only
normal spaces in the model and in the view. Renderer and DOM Converter will
be then responsiblentt// for rendering consecutive spaces using &amp;nbsp;,
but the model and the view has to be clear.ntt// Other feature may
introduce inserting non-breakable space on specific key stroke (for example
shift + space).ntt// However then it will be handled outside of mutations,
like enter key is.ntt// The replacing is here because it has to be done
before `diff` and `diffToChanges` functions, as theyntt// take `newText`
and compare it to (cleaned up) view.ntt// It could also be done in mutation
observer too, however if any outside plugin would like tontt// introduce
additional events for mutations, they would get already cleaned up version
(this may be good or not).nttconst newText = mutation.newText.replace(
/\u00A0/g, &#39; &#39; );ntt// To have correct `diffResult`, we also
compare view node text data with &amp;nbsp; replaced by space.nttconst
oldText = mutation.oldText.replace( /\u00A0/g, &#39; &#39; );nnttconst
diffResult = diff( oldText, newText );nnttconst { firstChangeAt,
insertions, deletions } = calculateChanges( diffResult );nntt// Try setting
new model selection according to passed view selection.nttlet
modelSelectionRange = null;nnttif ( viewSelection )
{ntttmodelSelectionRange = this.editing.mapper.toModelRange(
viewSelection.getFirstRange() );ntt}nntt// Get the position in view and
model where the changes will happen.nttconst viewPos = new ViewPosition(
mutation.node, firstChangeAt );nttconst modelPos =
this.editing.mapper.toModelPosition( viewPos );nttconst removeRange =
ModelRange.createFromPositionAndShift( modelPos, deletions );nttconst
insertText = newText.substr( firstChangeAt, insertions
);nnttthis.editor.execute( &#39;input&#39;, {nttttext:
insertText,ntttrange: removeRange,ntttresultRange: modelSelectionRangentt}
);nt}nnt/**nt * @privatent */nt_handleTextNodeInsertion( mutation ) {nttif
( mutation.type != &#39;children&#39; ) {ntttreturn;ntt}nnttconst change =
getSingleTextNodeChange( mutation );nttconst viewPos = new ViewPosition(
mutation.node, change.index );nttconst modelPos =
this.editing.mapper.toModelPosition( viewPos );nttconst insertedText =
change.values[ 0 ].data;nnttthis.editor.execute( &#39;input&#39;, {nttt//
Replace &amp;nbsp; inserted by the browser with normal space.nttt// See
comment in `_handleTextMutation`.nttt// In this case we don&#39;t need to
do this before `diff` because we diff whole nodes.nttt// Just change
&amp;nbsp; in case there are some.nttttext: insertedText.replace(
/\u00A0/g, &#39; &#39; ),ntttrange: new ModelRange( modelPos )ntt}
);nt}n}nnconst safeKeycodes = [ntgetCode( &#39;arrowUp&#39; ),ntgetCode(
&#39;arrowRight&#39; ),ntgetCode( &#39;arrowDown&#39; ),ntgetCode(
&#39;arrowLeft&#39; ),nt9, // Tabnt16, // Shiftnt17, // Ctrlnt18, //
Altnt20, // CapsLocknt27, // Escapent33, // PageUpnt34, // PageDownnt35, //
Homent36, // Endnt229 // Composition start keyn];nn// Function keys.nfor (
let code = 112; code &lt;= 135; code++ ) {ntsafeKeycodes.push( code
);n}nn// Returns `true` if a keystroke should not cause any content change
caused by "typing&quot;.n//n// Note: This implementation is very simple and
will need to be refined with time.n//n// @privaten// @param
{engine.view.observer.keyObserver.KeyEventData} keyDatan// @returns
{Boolean}nfunction isSafeKeystroke( keyData ) {nt// Keystrokes which
contain Ctrl don&#39;t represent typing.ntif ( keyData.ctrlKey ) {nttreturn
true;nt}nntreturn safeKeycodes.includes( keyData.keyCode );n}nn// Helper
function that compares whether two given view nodes are same. It is used in
`diff` when it&#39;s passed an arrayn// with child nodes.nfunction
compareChildNodes( oldChild, newChild ) {ntif ( oldChild instanceof
ViewText &amp;&amp; newChild instanceof ViewText ) {nttreturn oldChild.data
=== newChild.data;nt} else {nttreturn oldChild === newChild;nt}n}nn//
Returns change made to a single text node. Returns `undefined` if more than
a single text node was changed.n//n// @privaten// @param mutationnfunction
getSingleTextNodeChange( mutation ) {nt// One new node.ntif (
mutation.newChildren.length - mutation.oldChildren.length != 1 )
{nttreturn;nt}nnt// Which is text.ntconst diffResult = diff(
mutation.oldChildren, mutation.newChildren, compareChildNodes );ntconst
changes = diffToChanges( diffResult, mutation.newChildren );nnt// In case
of [ delete, insert, insert ] the previous check will not exit.ntif (
changes.length &gt; 1 ) {nttreturn;nt}nntconst change = changes[ 0 ];nnt//
Which is text.ntif ( !( change.values[ 0 ] instanceof ViewText ) )
{nttreturn;nt}nntreturn change;n}nn// Returns first common ancestor of all
mutations that is either {@link
module:engine/view/containerelement~ContainerElement}n// or {@link
module:engine/view/rootelement~RootElement}.n//n// @privaten// @param
{Array.&lt;module:engine/view/observer/mutationobserver~MutatedText|n//
module:engine/view/observer/mutationobserver~MutatedChildren&gt;}
mutationsn// @returns
{module:engine/view/containerelement~ContainerElement|engine/view/rootelement~RootElement|undefined}nfunction
getMutationsContainer( mutations ) {ntconst lca = mutationsntt.map(
mutation =&gt; mutation.node )ntt.reduce( ( commonAncestor, node ) =&gt;
{ntttreturn commonAncestor.getCommonAncestor( node, { includeSelf: true }
);ntt} );nntif ( !lca ) {nttreturn;nt}nnt// We need to look for container
and root elements only, so check all LCA&#39;snt// ancestors (starting from
itself).ntreturn lca.getAncestors( { includeSelf: true, parentFirst: true }
)ntt.find( element =&gt; element.is( &#39;containerElement&#39; ) ||
element.is( &#39;rootElement&#39; ) );n}nn// Returns true if container
children have mutated or more than a single text node was changed.n//n//
Single text node child insertion is handled in {@link
module:typing/input~MutationHandler#_handleTextNodeInsertion}n// while text
mutation is handled in {@link
module:typing/input~MutationHandler#_handleTextMutation}.n//n// @privaten//
@param
{Array.&lt;module:engine/view/observer/mutationobserver~MutatedText|n//
module:engine/view/observer/mutationobserver~MutatedChildren&gt;}
mutationsn// @returns {Boolean}nfunction containerChildrenMutated(
mutations ) {ntif ( mutations.length == 0 ) {nttreturn false;nt}nnt// Check
if there is any mutation of `children` type or any mutation that changes
more than one text node.ntfor ( const mutation of mutations ) {nttif (
mutation.type === &#39;children&#39; &amp;&amp; !getSingleTextNodeChange(
mutation ) ) {ntttreturn true;ntt}nt}nntreturn false;n}nn// Returns true if
provided array contains only {@link module:engine/model/text~Text model
text nodes}.n//n// @param {Array.&lt;module:engine/model/node~Node&gt;}
childrenn// @returns {Boolean}nfunction hasOnlyTextNodes( children )
{ntreturn children.every( child =&gt; child.is( &#39;text&#39; ) );n}nn//
Calculates first change index and number of characters that should be
inserted and deleted starting from that index.n//n// @privaten// @param
diffResultn// @return {{insertions: number, deletions: number,
firstChangeAt: *}}nfunction calculateChanges( diffResult ) {nt// Index
where the first change happens. Used to set the position from which nodes
will be removed and where will be inserted.ntlet firstChangeAt = null;nt//
Index where the last change happens. Used to properly count how many
characters have to be removed and inserted.ntlet lastChangeAt = null;nnt//
Get `firstChangeAt` and `lastChangeAt`.ntfor ( let i = 0; i &lt;
diffResult.length; i++ ) {nttconst change = diffResult[ i ];nnttif ( change
!= &#39;equal&#39; ) {ntttfirstChangeAt = firstChangeAt === null ? i :
firstChangeAt;ntttlastChangeAt = i;ntt}nt}nnt// How many characters,
starting from `firstChangeAt`, should be removed.ntlet deletions = 0;nt//
How many characters, starting from `firstChangeAt`, should be
inserted.ntlet insertions = 0;nntfor ( let i = firstChangeAt; i &lt;=
lastChangeAt; i++ ) {ntt// If there is no change (equal) or delete, the
character is existing in `oldText`. We count it for removing.nttif (
diffResult[ i ] != &#39;insert&#39; ) {ntttdeletions++;ntt}nntt// If there
is no change (equal) or insert, the character is existing in `newText`. We
count it for inserting.nttif ( diffResult[ i ] != &#39;delete&#39; )
{ntttinsertions++;ntt}nt}nntreturn { insertions, deletions, firstChangeAt
};n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-typing/src/input.jsn// module id = nulln// module chunks =
”,“/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben. All
rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
typing/deletecommandn */nnimport Command from
&#39;@ckeditor/ckeditor5-core/src/command&#39;;nimport Selection from
&#39;@ckeditor/ckeditor5-engine/src/model/selection&#39;;nimport Element
from &#39;@ckeditor/ckeditor5-engine/src/model/element&#39;;nimport Range
from &#39;@ckeditor/ckeditor5-engine/src/model/range&#39;;nimport
ChangeBuffer from &#39;./changebuffer&#39;;nimport count from
&#39;@ckeditor/ckeditor5-utils/src/count&#39;;nn/**n * The delete command.
Used by the {@link module:typing/delete~Delete delete feature} to handle
the &lt;kbd&gt;Delete&lt;/kbd&gt; andn * &lt;kbd&gt;Backspace&lt;/kbd&gt;
keys.n *n * @extends module:core/command~Commandn */nexport default class
DeleteCommand extends Command {nt/**nt * Creates an instance of the
command.nt *nt * @param {module:core/editor/editor~Editor} editornt *
@param {&#39;forward&#39;|&#39;backward&#39;} direction The directionality
of the delete describing in what direction itnt * should consume the
content when the selection is collapsed.nt */ntconstructor( editor,
direction ) {nttsuper( editor );nntt/**ntt * The directionality of the
delete describing in what direction it shouldntt * consume the content when
the selection is collapsed.ntt *ntt * @readonlyntt * @member
{&#39;forward&#39;|&#39;backward&#39;} directionntt */nttthis.direction =
direction;nntt/**ntt * Delete&#39;s change buffer used to group subsequent
changes into batches.ntt *ntt * @readonlyntt * @privatentt * @member
{typing.ChangeBuffer} bufferntt */nttthis._buffer = new ChangeBuffer(
editor.model, editor.config.get( &#39;typing.undoStep&#39; ) );nt}nnt/**nt
* Executes the delete command. Depending on whether the selection is
collapsed or not, deletes its contentnt * or a piece of content in the
{@link direction defined direction}.nt *nt * @fires executent * @param
{Object} [options] The command options.nt * @param {&#39;character&#39;}
[options.unit=&#39;character&#39;] See {@link
module:engine/model/utils/modifyselection~modifySelection}&#39;s options.nt
* @param {Number} [options.sequence=1] A number describing which subsequent
delete event it is without the key being released.nt * See the {@link
module:engine/view/document~Document#event:delete} event data.nt
*/ntexecute( options = {} ) {nttconst model = this.editor.model;nttconst
doc = model.document;nnttmodel.enqueueChange( this._buffer.batch, writer
=&gt; {ntttthis._buffer.lock();nntttconst selection = new Selection(
doc.selection );nnttt// Do not replace the whole selected content if
selection was collapsed.nttt// This prevents such situation:nttt//nttt//
&lt;h1&gt;&lt;/h1&gt;&lt;p&gt;[]&lt;/p&gt;t–&gt;  &lt;<a
href="</h1><p>”>h1></a>&lt;/p&gt; tt–&gt;  &lt;p&gt;&lt;/p&gt;nttt//
starting contenttt–&gt;   after `modifySelection`t–&gt;  after
`deleteContent`.ntttconst doNotResetEntireContent =
selection.isCollapsed;nnttt// Try to extend the selection in the specified
direction.ntttif ( selection.isCollapsed ) {nttttmodel.modifySelection(
selection, { direction: this.direction, unit: options.unit } );nttt}nnttt//
Check if deleting in an empty editor. See #61.ntttif (
this._shouldEntireContentBeReplacedWithParagraph( options.sequence || 1 ) )
{nttttthis._replaceEntireContentWithParagraph( writer
);nnttttreturn;nttt}nnttt// If selection is still collapsed, then
there&#39;s nothing to delete.ntttif ( selection.isCollapsed )
{nttttreturn;nttt}nntttlet changeCount =
0;nntttselection.getFirstRange().getMinimalFlatRanges().forEach( range
=&gt; {nttttchangeCount += count(ntttttrange.getWalker( { singleCharacters:
true, ignoreElementEnd: true, shallow: true } )ntttt);nttt}
);nntttmodel.deleteContent( selection, { doNotResetEntireContent }
);ntttthis._buffer.input( changeCount );nntttwriter.setSelection( selection
);nntttthis._buffer.unlock();ntt} );nt}nnt/**nt * If the user keeps
&lt;kbd&gt;Backspace&lt;/kbd&gt; or &lt;kbd&gt;Delete&lt;/kbd&gt; key
pressed, the content of the currentnt * editable will be cleared. However,
this will not yet lead to resetting the remaining block to a paragraphnt *
(which happens e.g. when the user does &lt;kbd&gt;Ctrl&lt;/kbd&gt; +
&lt;kbd&gt;A&lt;/kbd&gt;, &lt;kbd&gt;Backspace&lt;/kbd&gt;).nt *nt * But,
if the user pressed the key in an empty editable for the first time,nt * we
want to replace the entire content with a paragraph if:nt *nt * * the
current limit element is empty,nt * * the paragraph is allowed in the limit
element,nt * * the limit doesn&#39;t already have a paragraph inside.nt *nt
* See <a
href="https://github.com/ckeditor/ckeditor5-typing/issues/61.\n\t">github.com/ckeditor/ckeditor5-typing/issues/61.nt</a>
*nt * @privatent * @param {Number} sequence A number describing which
subsequent delete event it is without the key being released.nt * @returns
{Boolean}nt */nt_shouldEntireContentBeReplacedWithParagraph( sequence )
{ntt// Does nothing if user pressed and held the "Backspace&quot; or
"Delete&quot; key.nttif ( sequence &gt; 1 ) {ntttreturn false;ntt}nnttconst
model = this.editor.model;nttconst doc = model.document;nttconst selection
= doc.selection;nttconst limitElement = model.schema.getLimitElement(
selection );nntt// If a collapsed selection contains the whole content it
means that the content is emptyntt// (from the user perspective).nttconst
limitElementIsEmpty = selection.isCollapsed &amp;&amp;
selection.containsEntireContent( limitElement );nnttif (
!limitElementIsEmpty ) {ntttreturn false;ntt}nnttif (
!model.schema.checkChild( limitElement, &#39;paragraph&#39; ) ) {ntttreturn
false;ntt}nnttconst limitElementFirstChild = limitElement.getChild( 0
);nntt// Does nothing if the limit element already contains only a
paragraph.ntt// We ignore the case when paragraph might have some inline
elements
(&lt;p&gt;&lt;inlineWidget&gt;[]&lt;/inlineWidget&gt;&lt;/p&gt;)ntt//
because we don&#39;t support such cases yet and it&#39;s unclear whether
inlineWidget shouldn&#39;t be a limit itself.nttif ( limitElementFirstChild
&amp;&amp; limitElementFirstChild.name === &#39;paragraph&#39; )
{ntttreturn false;ntt}nnttreturn true;nt}nnt/**nt * The entire content is
replaced with the paragraph. Selection is moved inside the paragraph.nt *nt
* @privatent */nt_replaceEntireContentWithParagraph( writer ) {nttconst
model = this.editor.model;nttconst doc = model.document;nttconst selection
= doc.selection;nttconst limitElement = model.schema.getLimitElement(
selection );nttconst paragraph = new Element( &#39;paragraph&#39;
);nnttwriter.remove( Range.createIn( limitElement ) );nttwriter.insert(
paragraph, limitElement );nnttwriter.setSelection( paragraph, 0
);nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-typing/src/deletecommand.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module undo/basecommandn */nnimport Command from
&#39;@ckeditor/ckeditor5-core/src/command&#39;;nn/**n * Base class for undo
feature commands: {@link module:undo/undocommand~UndoCommand} and {@link
module:undo/redocommand~RedoCommand}.n *n * @protectedn * @extends
module:core/command~Commandn */nexport default class BaseCommand extends
Command {ntconstructor( editor ) {nttsuper( editor );nntt/**ntt * Stack of
items stored by the command. These are pairs of:ntt *ntt * * {@link
module:engine/model/batch~Batch batch} saved by the command,ntt * * {@link
module:engine/model/selection~Selection selection} state at the moment of
saving the batch.ntt *ntt * @protectedntt * @member {Array} #_stackntt
*/nttthis._stack = [];nntt/**ntt * Stores all batches that were created by
this command.ntt *ntt * @protectedntt * @member
{WeakSet.&lt;module:engine/model/batch~Batch&gt;} #_createdBatchesntt
*/nttthis._createdBatches = new WeakSet();nntt// Refresh state, so the
command is inactive right after
initialization.nttthis.refresh();nt}nnt/**nt * @inheritDocnt */ntrefresh()
{nttthis.isEnabled = this._stack.length &gt; 0;nt}nnt/**nt * Stores a batch
in the command, together with the selection state of the {@link
module:engine/model/document~Document document}nt * created by the editor
which this command is registered to.nt *nt * @param
{module:engine/model/batch~Batch} batch The batch to add.nt */ntaddBatch(
batch ) {nttconst docSelection =
this.editor.model.document.selection;nnttconst selection = {ntttranges:
docSelection.hasOwnRange ? Array.from( docSelection.getRanges() ) :
[],ntttisBackward: docSelection.isBackwardntt};nnttthis._stack.push( {
batch, selection } );nttthis.refresh();nt}nnt/**nt * Removes all items from
the stack.nt */ntclearStack() {nttthis._stack =
[];nttthis.refresh();nt}nnt/**nt * Restores the {@link
module:engine/model/document~Document#selection document selection} state
after a batch was undone.nt *nt * @protectednt * @param
{Array.&lt;module:engine/model/range~Range&gt;} ranges Ranges to be
restored.nt * @param {Boolean} isBackward A flag describing whether the
restored range was selected forward or backward.nt * @param
{Array.&lt;module:engine/model/delta/delta~Delta&gt;} deltas Deltas which
has been applied since selection has been stored.nt */nt_restoreSelection(
ranges, isBackward, deltas ) {nttconst model = this.editor.model;nttconst
document = model.document;nntt// This will keep the transformed selection
ranges.nttconst selectionRanges = [];nntt// Transform all ranges from the
restored selection.nttfor ( const range of ranges ) {ntttconst
transformedRanges = transformSelectionRange( range, deltas );nnttt// For
each `range` from `ranges`, we take only one transformed range.nttt// This
is because we want to prevent situation where single-range selectionnttt//
got transformed to multi-range selection. We will take the first range
thatnttt// is not in the graveyard.ntttconst transformedRange =
transformedRanges.find(nttttrange =&gt; range.start.root !=
document.graveyardnttt);nnttt// `transformedRange` might be `undefined` if
transformed range ended up in graveyard.ntttif ( transformedRange )
{nttttselectionRanges.push( transformedRange );nttt}ntt}nntt//
`selectionRanges` may be empty if all ranges ended up in graveyard. If that
is the case, do not restore selection.nttif ( selectionRanges.length )
{ntttmodel.change( writer =&gt; {nttttwriter.setSelection( selectionRanges,
{ backward: isBackward } );nttt} );ntt}nt}nnt/**nt * Undoes a batch by
reversing that batch, transforming reversed batch and finally applying
it.nt * This is a helper method for {@link execute}.nt *nt * @protectednt *
@param {module:engine/model/batch~Batch} batchToUndo The batch to be
undone.nt * @param {module:engine/model/batch~Batch} undoingBatch The batch
that will contain undoing changes.nt */nt_undo( batchToUndo, undoingBatch )
{nttconst model = this.editor.model;nttconst document =
model.document;nntt// All changes done by the command execution will be
saved as one batch.nttthis._createdBatches.add( undoingBatch );nnttconst
deltasToUndo = batchToUndo.deltas.slice();nttdeltasToUndo.reverse();nntt//
We will process each delta from `batchToUndo`, in reverse order. If there
were deltas A, B and C in undone batch,ntt// we need to revert them in
reverse order, so first C&#39; (reversed C), then B&#39;, then
A&#39;.nttfor ( const deltaToUndo of deltasToUndo ) {nttt// For now
let&#39;s skip deltas with operation applied on detached document.nttt// We
assumed that there is no deltas with mixed (document and document fragment)
operationsnttt// so we can skip entire delta.ntttif (
deltaToUndo.operations.some( op =&gt; op.isDocumentOperation ) ) {ntttt//
Keep in mind that transformation algorithms return arrays. That&#39;s
because the transformation might result in multiplentttt// deltas, so we
need arrays to handle them. To simplify algorithms, it is better to always
operate on arrays.nttttconst nextBaseVersion = deltaToUndo.baseVersion +
deltaToUndo.operations.length;nntttt// Reverse delta from the
history.nttttconst historyDeltas = Array.from( document.history.getDeltas(
nextBaseVersion ) );nttttconst transformedSets = model.transformDeltas( [
deltaToUndo.getReversed() ], historyDeltas, true );nttttconst
reversedDeltas = transformedSets.deltasA;nntttt// After reversed delta has
been transformed by all history deltas, apply it.nttttfor ( const delta of
reversedDeltas ) {nttttt// Fix base version.ntttttdelta.baseVersion =
document.version;nnttttt// Before applying, add the delta to the
`undoingBatch`.ntttttundoingBatch.addDelta( delta );nnttttt// Now, apply
all operations of the delta.ntttttfor ( const operation of delta.operations
) {nttttttmodel.applyOperation( operation
);nttttt}nntttttdocument.history.setDeltaAsUndone( deltaToUndo, delta
);ntttt}nttt}ntt}nt}n}nn// Transforms given range `range` by given
`deltas`.n// Returns an array containing one or more ranges, which are
result of the transformation.nfunction transformSelectionRange( range,
deltas ) {ntconst transformed = transformRangesByDeltas( [ range ], deltas
);nnt// After `range` got transformed, we have an array of ranges. Some of
thosent// ranges may be "touching&quot; – they can be next to each other
and could be merged.nt// First, we have to sort those ranges to assure that
they are in order.nttransformed.sort( ( a, b ) =&gt; a.start.isBefore(
b.start ) ? -1 : 1 );nnt// Then, we check if two consecutive ranges are
touching.ntfor ( let i = 1; i &lt; transformed.length; i++ ) {nttconst a =
transformed[ i - 1 ];nttconst b = transformed[ i ];nnttif (
a.end.isTouching( b.start ) ) {nttt// And join them together if they
are.nttta.end = b.end;nttttransformed.splice( i, 1
);nttti–;ntt}nt}nntreturn transformed;n}nn// Transforms given set of
`ranges` by given set of `deltas`. Returns transformed `ranges`.nexport
function transformRangesByDeltas( ranges, deltas ) {ntfor ( const delta of
deltas ) {nttfor ( const operation of delta.operations ) {nttt// We look
through all operations from all deltas.nntttfor ( let i = 0; i &lt;
ranges.length; i++ ) {ntttt// We transform every range by every
operation.nttttlet result;nnttttswitch ( operation.type ) {ntttttcase
&#39;insert&#39;:nttttttresult = ranges[ i
]._getTransformedByInsertion(ntttttttoperation.position,ntttttttoperation.nodes.maxOffset,nttttttttruentttttt);nttttttbreak;nntttttcase
&#39;move&#39;:ntttttcase &#39;remove&#39;:ntttttcase
&#39;reinsert&#39;:nttttttresult = ranges[ i
]._getTransformedByMove(ntttttttoperation.sourcePosition,ntttttttoperation.targetPosition,ntttttttoperation.howMany,nttttttttruentttttt);nttttttbreak;ntttt}nntttt//
If we have a transformation result, we substitute transformed range with it
in `transformed` array.ntttt// Keep in mind that the result is an array and
may contain multiple ranges.nttttif ( result ) {ntttttranges.splice( i, 1,
…result );nnttttt// Fix iterator.nttttti = i + result.length -
1;ntttt}nttt}ntt}nt}nntreturn ranges;n}nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-undo/src/basecommand.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module undo/undocommandn */nnimport BaseCommand from
&#39;./basecommand&#39;;nimport Batch from
&#39;@ckeditor/ckeditor5-engine/src/model/batch&#39;;nn/**n * The undo
command stores {@link module:engine/model/batch~Batch batches} applied to
then * {@link module:engine/model/document~Document document} and is able
to undo a batch by reversing it and transforming byn * batches from {@link
module:engine/model/document~Document#history history} that happened after
the reversed batch.n *n * The undo command also takes care of restoring the
{@link module:engine/model/document~Document#selection document
selection}.n *n * @extends module:undo/basecommand~BaseCommandn */nexport
default class UndoCommand extends BaseCommand {nt/**nt * Executes the
command. This method reverts a {@link module:engine/model/batch~Batch
batch} added to the command&#39;s stack, transformsnt * and applies the
reverted version on the {@link module:engine/model/document~Document
document} and removes the batch from the stack.nt * Then, it restores the
{@link module:engine/model/document~Document#selection document
selection}.nt *nt * @fires executent * @fires revertnt * @param
{module:engine/model/batch~Batch} [batch] A batch that should be undone. If
not set, the last added batch will be undone.nt */ntexecute( batch = null )
{ntt// If batch is not given, set `batchIndex` to the last index in command
stack.nttconst batchIndex = batch ? this._stack.findIndex( a =&gt; a.batch
== batch ) : this._stack.length - 1;nnttconst item = this._stack.splice(
batchIndex, 1 )[ 0 ];nttconst undoingBatch = new Batch();nntt// All changes
has to be done in one `enqueueChange` callback so other listeners will
notntt// step between consecutive deltas, or won&#39;t do changes to the
document before selection is properly
restored.nttthis.editor.model.enqueueChange( undoingBatch, () =&gt;
{ntttthis._undo( item.batch, undoingBatch );nntttconst deltas =
this.editor.model.document.history.getDeltas( item.batch.baseVersion
);ntttthis._restoreSelection( item.selection.ranges,
item.selection.isBackward, deltas );nntttthis.fire( &#39;revert&#39;,
item.batch, undoingBatch );ntt} );nnttthis.refresh();nt}n}nn/**n * Fired
when execution of the command reverts some batch.n *n * @event revertn
*/nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-undo/src/undocommand.jsn// module id = nulln// module chunks =
“,”/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben. All
rights reserved.n * For licensing, see LICENSE.md.n */nn/* globals window,
document */nn/**n * @module adapter-ckfinder/utilsn */nnconst
TOKEN_COOKIE_NAME = &#39;ckCsrfToken&#39;;nconst TOKEN_LENGTH = 40;nconst
tokenCharset = &#39;abcdefghijklmnopqrstuvwxyz0123456789&#39;;nn/**n *
Returns the CSRF token value. The value is a hash stored in
`document.cookie`n * under the `ckCsrfToken` key. The CSRF token can be
used to secure the communicationn * between the web browser and the
CKFinder server.n *n * @returns {String}n */nexport function getCsrfToken()
{ntlet token = getCookie( TOKEN_COOKIE_NAME );nntif ( !token ||
token.length != TOKEN_LENGTH ) {ntttoken = generateToken( TOKEN_LENGTH
);nttsetCookie( TOKEN_COOKIE_NAME, token );nt}nntreturn token;n}nn/**n *
Returns the value of the cookie with a given name or `null` if the cookie
is not found.n *n * @param {String} namen * @returns {String|null}n
*/nexport function getCookie( name ) {ntname = name.toLowerCase();ntconst
parts = document.cookie.split( &#39;;&#39; );nntfor ( const part of parts )
{nttconst pair = part.split( &#39;=&#39; );nttconst key =
decodeURIComponent( pair[ 0 ].trim().toLowerCase() );nnttif ( key === name
) {ntttreturn decodeURIComponent( pair[ 1 ] );ntt}nt}nntreturn
null;n}nn/**n * Sets the value of the cookie with a given name.n *n *
@param {String} namen * @param {String} valuen */nexport function
setCookie( name, value ) {ntdocument.cookie = encodeURIComponent( name ) +
&#39;=&#39; + encodeURIComponent( value ) + &#39;;path=/&#39;;n}nn//
Generates the CSRF token with the given length.n//n// @privaten// @param
{Number} lengthn// @returns {string}nfunction generateToken( length )
{ntlet result = &#39;&#39;;ntconst randValues = new Uint8Array( length
);nntwindow.crypto.getRandomValues( randValues );nntfor ( let j = 0; j &lt;
randValues.length; j++ ) {nttconst character = tokenCharset.charAt(
randValues[ j ] % tokenCharset.length );nttresult += Math.random() &gt; 0.5
? character.toUpperCase() : character;nt}nntreturn
result;n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-adapter-ckfinder/src/utils.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */n/*
globals XMLHttpRequest, FormData */n/**n * @module
adapter-ckfinder/uploadadaptern */nimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport FileRepository from
&#39;@ckeditor/ckeditor5-upload/src/filerepository&#39;;nimport {
getCsrfToken } from &#39;./utils&#39;;n/**n * A plugin that enables
CKFinder uploads in CKEditor 5.n *n * Configure the upload URL inn * {@link
module:adapter-ckfinder/uploadadapter~CKFinderAdapterConfig#uploadUrl
`ckfinder.uploadUrl`}.n *n * @extends module:core/plugin~Pluginn */nexport
default class CKFinderUploadAdapter extends Plugin {n    /**nt *
@inheritDocnt */n    static get requires() {n        return
[FileRepository];n    }n    /**nt * @inheritDocnt */n    static get
pluginName() {n        return &#39;CKFinderUploadAdapter&#39;;n    }n   
/**nt * @inheritDocnt */n    init() {n        const url =
this.editor.config.get(&#39;ckfinder.uploadUrl&#39;);n        if (!url) {n 
return;n        }n        // Register CKFinderAdaptern       
this.editor.plugins.get(FileRepository).createUploadAdapter = loader =&gt;
new UploadAdapter(loader, url, this.editor.t);n    }n}n/**n * Upload
adapter for CKFinder.n *n * @privaten * @implements
module:upload/filerepository~UploadAdaptern */nclass UploadAdapter {n   
/**nt * Creates a new adapter instance.nt *nt * @param
{module:upload/filerepository~FileLoader} loadernt * @param {String} urlnt
* @param {module:utils/locale~Locale#t} tnt */n    constructor(loader, url,
t) {n        /**ntt * FileLoader instance to use during the upload.ntt *ntt
* @member {module:upload/filerepository~FileLoader} loaderntt */n       
this.loader = loader;n        /**ntt * Upload URL.ntt *ntt * @member
{String} urlntt */n        this.url = url;n        /**ntt * Locale
translation method.ntt *ntt * @member {module:utils/locale~Locale#t} tntt
*/n        this.t = t;n    }n    /**nt * Starts the upload process.nt *nt *
@see module:upload/filerepository~UploadAdapter#uploadnt * @returns
{Promise}nt */n    upload() {n        return new Promise((resolve, reject)
=&gt; {n            this._initRequest();n           
this._initListeners(resolve, reject);n            this._sendRequest();n    
});n    }n    /**nt * Aborts the upload process.nt *nt * @see
module:upload/filerepository~UploadAdapter#abortnt * @returns {Promise}nt
*/n    abort() {n        if (this.xhr) {n            this.xhr.abort();n    
}n    }n    /**nt * Initializes the XMLHttpRequest object.nt *nt *
@privatent */n    _initRequest() {n        const xhr = this.xhr = new
XMLHttpRequest();n        xhr.open(&#39;POST&#39;, this.url, true);n       
xhr.responseType = &#39;json&#39;;n    }n    /**nt * Initializes
XMLHttpRequest listeners.nt *nt * @privatent * @param {Function} resolve
Callback function to be called when the request is successful.nt * @param
{Function} reject Callback function to be called when the request cannot be
completed.nt */n    _initListeners(resolve, reject) {n        const xhr =
this.xhr;n        const loader = this.loader;n        const t = this.t;n   
const genericError = t(&#39;a&#39;) + ` ${ loader.file.name }.`;n       
xhr.addEventListener(&#39;error&#39;, () =&gt; reject(genericError));n     
xhr.addEventListener(&#39;abort&#39;, () =&gt; reject());n       
xhr.addEventListener(&#39;load&#39;, () =&gt; {n            const response
= xhr.response;n            if (!response || !response.uploaded) {n        
return reject(response &amp;&amp; response.error &amp;&amp;
response.error.message ? response.error.message : genericError);n          
}n            resolve({ default: response.url });n        });n        //
Upload progress when it&#39;s supported.n        /* istanbul ignore else
*/n        if (xhr.upload) {n           
xhr.upload.addEventListener(&#39;progress&#39;, evt =&gt; {n               
if (evt.lengthComputable) {n                    loader.uploadTotal =
evt.total;n                    loader.uploaded = evt.loaded;n              
}n            });n        }n    }n    /**nt * Prepares the data and sends
the request.nt *nt * @privatent */n    _sendRequest() {n        // Prepare
form data.n        const data = new FormData();n       
data.append(&#39;upload&#39;, this.loader.file);n       
data.append(&#39;ckCsrfToken&#39;, getCsrfToken());n        // Send
request.n        this.xhr.send(data);n    }n}    /**n * The configuration
of the {@link module:adapter-ckfinder/uploadadapter~CKFinderUploadAdapter
CKFinder upload adapter}.n *n * Read more in {@link
module:adapter-ckfinder/uploadadapter~CKFinderAdapterConfig}.n *n * @member
{module:adapter-ckfinder/uploadadapter~CKFinderAdapterConfig}
module:core/editor/editorconfig~EditorConfig#ckfindern */n     /**n * The
configuration of the {@link
module:adapter-ckfinder/uploadadapter~CKFinderUploadAdapter CKFinder upload
adapter}.n *n *ttClassicEditorn *ttt.create( editorElement, {n *
ttttckfinder: {n *tttttuploadUrl:
&#39;/ckfinder/core/connector/php/connector.php?command=QuickUpload&amp;type=Files&amp;responseType=json&#39;n
* tttt}n *ttt} )n *ttt.then( … )n *ttt.catch( … );n *n * See {@link
module:core/editor/editorconfig~EditorConfig all editor options}.n *n *
@interface CKFinderAdapterConfign */n     /**n * The URL to which files
should be uploaded.n *n * @member {String}
module:adapter-ckfinder/uploadadapter~CKFinderAdapterConfig#uploadUrln
*/nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-adapter-ckfinder/src/uploadadapter.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module autoformat/inlineautoformateditingn */nnimport
ModelRange from &#39;@ckeditor/ckeditor5-engine/src/model/range&#39;;nn/**n
* The inline autoformatting engine. It allows to format various inline
patterns. For example,n * it can be configured to make "foo&quot; bold when
typed `*foo*` (the `**` markers will be removed).n *n * The autoformatting
operation is integrated with the undo manager,n * so the autoformatting
step can be undone if the user&#39;s intention was not to format the text.n
*n * See the constructors documentation to learn how to create custom
inline autoformatters. You can also usen * the {@link
module:autoformat/autoformat~Autoformat} feature which enables a set of
default autoformattersn * (lists, headings, bold and italic).n */nexport
default class InlineAutoformatEditing {nt/**nt * Enables autoformatting
mechanism for a given {@link module:core/editor/editor~Editor}.nt *nt * It
formats the matched text by applying the given model attribute or by
running the provided formatting callback.nt * On every change applied to
the model the autoformatting engine checks the text on the left of the
selectionnt * and executes the provided action if the text matches given
criteria (regular expression or callback).nt *nt * @param
{module:core/editor/editor~Editor} editor The editor instance.nt * @param
{Function|RegExp} testRegexpOrCallback The regular expression or callback
to execute on text.nt * Provided regular expression must have three capture
groups. The first and the third capture groupnt * should match opening and
closing delimiters. The second capture group should match the text to
format.nt *nt *tt// Matches the `**bold text**` pattern.nt *tt// There are
three capturing groups:nt *tt// - The first to match the starting `**`
delimiter.nt *tt// - The second to match the text to format.nt *tt// - The
third to match the ending `**` delimiter.nt *ttnew InlineAutoformatEditing(
editor, /(**)([^*]+?)(**)$/g, &#39;bold&#39; );nt *nt * When a function is
provided instead of the regular expression, it will be executed with the
text to match as a parameter.nt * The function should return proper
"ranges&quot; to delete and format.nt *nt *tt{nt *tttremove: [nt *tttt[ 0,
1 ],t// Remove the first letter from the given text.nt *tttt[ 5, 6 ]t//
Remove the 6th letter from the given text.nt *ttt],nt *tttformat: [nt
*tttt[ 1, 5 ]t// Format all letters from 2nd to 5th.nt *ttt]nt *tt}nt *nt *
@param {Function|String} attributeOrCallback The name of attribute to apply
on matching text or a callback for manualnt * formatting.nt *nt *tt// Use
attribute name:nt *ttnew InlineAutoformatEditing( editor,
/(**)([^*]+?)(**)$/g, &#39;bold&#39; );nt *nt *tt// Use formatting
callback:nt *ttnew InlineAutoformatEditing( editor, /(**)([^*]+?)(**)$/g, (
writer, validRanges ) =&gt; {nt *tttfor ( let range of validRanges ) {nt
*ttttwriter.setAttribute( command, true, range );nt *ttt}nt *tt} );nt
*/ntconstructor( editor, testRegexpOrCallback, attributeOrCallback )
{nttlet regExp;nttlet attributeKey;nttlet testCallback;nttlet
formatCallback;nnttif ( testRegexpOrCallback instanceof RegExp )
{ntttregExp = testRegexpOrCallback;ntt} else {nttttestCallback =
testRegexpOrCallback;ntt}nnttif ( typeof attributeOrCallback ==
&#39;string&#39; ) {ntttattributeKey = attributeOrCallback;ntt} else
{ntttformatCallback = attributeOrCallback;ntt}nntt// A test callback run on
changed text.ntttestCallback = testCallback || ( text =&gt; {ntttlet
result;ntttconst remove = [];ntttconst format = [];nntttwhile ( ( result =
regExp.exec( text ) ) !== null ) {ntttt// There should be full match and 3
capture groups.nttttif ( result &amp;&amp; result.length &lt; 4 )
{ntttttbreak;ntttt}nnttttlet {ntttttindex,nttttt&#39;1&#39;:
leftDel,nttttt&#39;2&#39;: content,nttttt&#39;3&#39;: rightDelntttt} =
result;nntttt// Real matched string - there might be some non-capturing
groups so we need to recalculate starting index.nttttconst found = leftDel
+ content + rightDel;nttttindex += result[ 0 ].length -
found.length;nntttt// Start and End offsets of delimiters to
remove.nttttconst delStart = [ntttttindex,ntttttindex +
leftDel.lengthntttt];nttttconst delEnd = [ntttttindex + leftDel.length +
content.length,ntttttindex + leftDel.length + content.length +
rightDel.lengthntttt];nnttttremove.push( delStart );nttttremove.push(
delEnd );nnttttformat.push( [ index + leftDel.length, index +
leftDel.length + content.length ] );nttt}nntttreturn
{nttttremove,nttttformatnttt};ntt} );nntt// A format callback run on
matched text.nttformatCallback = formatCallback || ( ( writer, validRanges
) =&gt; {ntttfor ( const range of validRanges ) {nttttwriter.setAttribute(
attributeKey, true, range );nttt}nnttt// After applying attribute to the
text, remove given attribute from the selection.nttt// This way user is
able to type a text without attribute used by auto
formatter.ntttwriter.removeSelectionAttribute( attributeKey );ntt}
);nntteditor.model.document.on( &#39;change&#39;, ( evt, batch ) =&gt;
{ntttif ( batch.type == &#39;transparent&#39; )
{nttttreturn;nttt}nntttconst selection =
editor.model.document.selection;nnttt// Do nothing if selection is not
collapsed.ntttif ( !selection.isCollapsed ) {nttttreturn;nttt}nntttconst
changes = Array.from( editor.model.document.differ.getChanges() );ntttconst
entry = changes[ 0 ];nnttt// Typing is represented by only a single
change.ntttif ( changes.length != 1 || entry.type !== &#39;insert&#39; ||
entry.name != &#39;$text&#39; || entry.length != 1 )
{nttttreturn;nttt}nntttconst block = selection.focus.parent;ntttconst text
= getText( block ).slice( 0, selection.focus.offset );ntttconst testOutput
= testCallback( text );ntttconst rangesToFormat = testOutputToRanges(
block, testOutput.format );ntttconst rangesToRemove = testOutputToRanges(
block, testOutput.remove );nntttif ( !( rangesToFormat.length &amp;&amp;
rangesToRemove.length ) ) {nttttreturn;nttt}nnttt// Use enqueueChange to
create new batch to separate typing batch from the auto-format
changes.nttteditor.model.enqueueChange( writer =&gt; {nttttconst
validRanges = editor.model.schema.getValidRanges( rangesToFormat,
attributeKey );nntttt// Apply format.nttttformatCallback( writer,
validRanges );nntttt// Remove delimiters - use reversed order to not mix
the offsets while removing.nttttfor ( const range of
rangesToRemove.reverse() ) {ntttttwriter.remove( range );ntttt}nttt} );ntt}
);nt}n}nn// Returns whole text from parent element by adding all data from
text nodes together.n//n// @privaten// @param
{module:engine/model/element~Element} elementn// @returns {String}nfunction
getText( element ) {ntreturn Array.from( element.getChildren() ).reduce( (
a, b ) =&gt; a + b.data, &#39;&#39; );n}nn// Converts output of the test
function provided to the InlineAutoformatEditing and converts it to the
model rangesn// inside provided block.n//n// @privaten// @param
{module:engine/model/element~Element} blockn// @param {Array.&lt;Array&gt;}
arraysnfunction testOutputToRanges( block, arrays ) {ntreturn
arraysntt.filter( array =&gt; ( array[ 0 ] !== undefined &amp;&amp; array[
1 ] !== undefined ) )ntt.map( array =&gt;
ModelRange.createFromParentsAndOffsets( block, array[ 0 ], block, array[ 1
] ) );n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-autoformat/src/inlineautoformatediting.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module autoformat/autoformatn */nnimport
BlockAutoformatEditing from &#39;./blockautoformatediting&#39;;nimport
InlineAutoformatEditing from &#39;./inlineautoformatediting&#39;;nimport
Plugin from &#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nn/**n * Includes
a set of predefined autoformatting actions. For a detailed overview, checkn
* the {@glink features/autoformat Autoformatting feature documentation}.n
*n * @extends module:core/plugin~Pluginn */nexport default class Autoformat
extends Plugin {nt/**nt * @inheritDocnt */ntstatic get pluginName()
{nttreturn &#39;Autoformat&#39;;nt}nnt/**nt * @inheritDocnt */ntafterInit()
{nttthis._addListAutoformats();nttthis._addBasicStylesAutoformats();nttthis._addHeadingAutoformats();nttthis._addBlockQuoteAutoformats();nt}nnt/**nt
* Adds autoformatting related to the {@link module:list/list~List}.nt *nt *
When typed:nt * - `* ` or `- ` &amp;ndash; A paragraph will be changed to a
bulleted list.nt * - `1. ` or `1) ` &amp;ndash; A paragraph will be changed
to a numbered list (&quot;1&quot; can be any digit or a list of digits).nt
*nt * @privatent */nt_addListAutoformats() {nttconst commands =
this.editor.commands;nnttif ( commands.get( &#39;bulletedList&#39; ) )
{nttt// eslint-disable-next-line no-newntttnew BlockAutoformatEditing(
this.editor, /^[*-]\s$/, &#39;bulletedList&#39; );ntt}nnttif (
commands.get( &#39;numberedList&#39; ) ) {nttt// eslint-disable-next-line
no-newntttnew BlockAutoformatEditing( this.editor, /^\<a
href=".|)">d+</a>\s$/, &#39;numberedList&#39; );ntt}nt}nnt/**nt * Adds
autoformatting related to the {@link module:basic-styles/bold~Bold},nt *
{@link module:basic-styles/italic~Italic} and {@link
module:basic-styles/code~Code}.nt *nt * When typed:nt * - `*foobar*`
&amp;ndash; `**` characters are removed and `foobar` is set to bold,nt * -
`__foobar__` &amp;ndash; `__` characters are removed and `foobar` is set to
bold,nt * - `foobar` &amp;ndash; `*` characters are removed and `foobar` is
set to italic,nt * - `<em>foobar</em>` &amp;ndash; `_` characters are
removed and `foobar` is set to italic,nt * - “` `foobar` &amp;ndash; “` `
“` characters are removed and `foobar` is set to code.nt *nt * @privatent
*/nt_addBasicStylesAutoformats() {nttconst commands =
this.editor.commands;nnttif ( commands.get( &#39;bold&#39; ) ) {nttt/*
eslint-disable no-new */ntttnew InlineAutoformatEditing( this.editor,
/(**)([^*]+)(**)$/g, &#39;bold&#39; );ntttnew InlineAutoformatEditing(
this.editor, /(<a href="^_">__)(</a>+)(__)$/g, &#39;bold&#39; );nttt/*
eslint-enable no-new */ntt}nnttif ( commands.get( &#39;italic&#39; ) )
{nttt// The italic autoformatter cannot be triggered by the bold markers,
so we need to check thenttt// text before the pattern (e.g.
`(?:^|[^*])`).nnttt/* eslint-disable no-new */ntttnew
InlineAutoformatEditing( this.editor, /(?:^|[^*])(*)([^*_]+)(*)$/g,
&#39;italic&#39; );ntttnew InlineAutoformatEditing( this.editor, /(?:^|[^<a
href="^_">_])(_)(</a>+)(_)$/g, &#39;italic&#39; );nttt/* eslint-enable
no-new */ntt}nnttif ( commands.get( &#39;code&#39; ) ) {nttt/*
eslint-disable no-new */ntttnew InlineAutoformatEditing( this.editor,
/(`)([^`]+)(`)$/g, &#39;code&#39; );nttt/* eslint-enable no-new
*/ntt}nt}nnt/**nt * Adds autoformatting related to {@link
module:heading/heading~Heading}.nt *nt * It is using a number at the end of
the command name to associate it with the proper trigger:nt *nt * *
`heading` with value `heading1` will be executed when typing `#`,nt * *
`heading` with value `heading2` will be executed when typing `##`,nt * * …
up to `heading6` and `######`.nt *nt * @privatent
*/nt_addHeadingAutoformats() {nttconst command = this.editor.commands.get(
&#39;heading&#39; );nnttif ( command )
{ntttcommand.modelElementsntttt.filter( name =&gt; name.match( /^<a
href="1-6">heading</a>$/ ) )ntttt.forEach( commandValue =&gt; {ntttttconst
level = commandValue[ 7 ];ntttttconst pattern = new RegExp( `^(#{${ level
}})\\s$` );nnttttt// eslint-disable-next-line no-newntttttnew
BlockAutoformatEditing( this.editor, pattern, () =&gt;
{nttttttthis.editor.execute( &#39;heading&#39;, { value: commandValue }
);nttttt} );ntttt} );ntt}nt}nnt/**nt * Adds autoformatting related to
{@link module:block-quote/blockquote~BlockQuote}.nt *nt * When typed:nt * *
`&gt; ` &amp;ndash; A paragraph will be changed to a block quote.nt *nt *
@privatent */nt_addBlockQuoteAutoformats() {nttif (
this.editor.commands.get( &#39;blockQuote&#39; ) ) {nttt//
eslint-disable-next-line no-newntttnew BlockAutoformatEditing( this.editor,
/^&gt;\s$/, &#39;blockQuote&#39; );ntt}nt}n}nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-autoformat/src/autoformat.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module utils/firstn */nn/**n * Returns first item
of the given `iterable`.n *n * @param {Iterable.&lt;*&gt;} iterablen *
@returns {*}n */nexport default function first( iterable ) {ntconst
iteratorItem = iterable.next();nntif ( iteratorItem.done ) {nttreturn
null;nt}nntreturn iteratorItem.value;n}nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/first.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module block-quote/blockquotecommandn */nnimport Command from
&#39;@ckeditor/ckeditor5-core/src/command&#39;;nnimport Position from
&#39;@ckeditor/ckeditor5-engine/src/model/position&#39;;nimport Element
from &#39;@ckeditor/ckeditor5-engine/src/model/element&#39;;nimport Range
from &#39;@ckeditor/ckeditor5-engine/src/model/range&#39;;nimport first
from &#39;@ckeditor/ckeditor5-utils/src/first&#39;;nn/**n * The block quote
command plugin.n *n * @extends module:core/command~Commandn */nexport
default class BlockQuoteCommand extends Command {nt/**nt * Whether the
selection starts in a block quote.nt *nt * @observablent * @readonlynt *
@member {Boolean} valuent */nnt/**nt * @inheritDocnt */ntrefresh()
{nttthis.value = this._getValue();nttthis.isEnabled =
this._checkEnabled();nt}nnt/**nt * Executes the command. When the command
{@link value is on}, all block quotes withinnt * the selection will be
removed. If it is off, all selected blocks will be wrapped withnt * a block
quote.nt *nt * @fires executent */ntexecute() {nttconst model =
this.editor.model;nttconst doc = model.document;nttconst schema =
model.schema;nttconst blocks = Array.from(
doc.selection.getSelectedBlocks() );nnttmodel.change( writer =&gt; {ntttif
( this.value ) {nttttthis._removeQuote( writer, blocks.filter( findQuote )
);nttt} else {nttttconst blocksToQuote = blocks.filter( block =&gt;
{nttttt// Already quoted blocks needs to be considered while quoting
toonttttt// in order to reuse their &lt;bQ&gt; elements.ntttttreturn
findQuote( block ) || checkCanBeQuoted( schema, block );ntttt}
);nnttttthis._applyQuote( writer, blocksToQuote );nttt}ntt} );nt}nnt/**nt *
Checks the command&#39;s {@link value}.nt *nt * @privatent * @returns
{Boolean} The current value.nt */nt_getValue() {nttconst firstBlock =
first( this.editor.model.document.selection.getSelectedBlocks() );nntt// In
the current implementation, the block quote must be an immediate parent of
a block element.nttreturn !!( firstBlock &amp;&amp; findQuote( firstBlock )
);nt}nnt/**nt * Checks whether the command can be enabled in the current
context.nt *nt * @privatent * @returns {Boolean} Whether the command should
be enabled.nt */nt_checkEnabled() {nttif ( this.value ) {ntttreturn
true;ntt}nnttconst selection =
this.editor.model.document.selection;nttconst schema =
this.editor.model.schema;nnttconst firstBlock = first(
selection.getSelectedBlocks() );nnttif ( !firstBlock ) {ntttreturn
false;ntt}nnttreturn checkCanBeQuoted( schema, firstBlock );nt}nnt/**nt *
Removes the quote from given blocks.nt *nt * If blocks which are supposed
to be "unquoted&quot; are in the middle of a quote,nt * start it or end it,
then the quote will be split (if needed) and the blocksnt * will be moved
out of it, so other quoted blocks remained quoted.nt *nt * @privatent *
@param {module:engine/model/writer~Writer} writernt * @param
{Array.&lt;module:engine/model/element~Element&gt;} blocksnt
*/nt_removeQuote( writer, blocks ) {ntt// Unquote all groups of block.
Iterate in the reverse order to not break following
ranges.nttgetRangesOfBlockGroups( blocks ).reverse().forEach( groupRange
=&gt; {ntttif ( groupRange.start.isAtStart &amp;&amp;
groupRange.end.isAtEnd ) {nttttwriter.unwrap( groupRange.start.parent
);nnttttreturn;nttt}nnttt// The group of blocks are at the beginning of an
&lt;bQ&gt; so let&#39;s move them left (out of the &lt;bQ&gt;).ntttif (
groupRange.start.isAtStart ) {nttttconst positionBefore =
Position.createBefore( groupRange.start.parent );nnttttwriter.move(
groupRange, positionBefore );nnttttreturn;nttt}nnttt// The blocks are in
the middle of an &lt;bQ&gt; so we need to split the &lt;bQ&gt; after the
last blocknttt// so we move the items there.ntttif (
!groupRange.end.isAtEnd ) {nttttwriter.split( groupRange.end );nttt}nnttt//
Now we are sure that groupRange.end.isAtEnd is true, so let&#39;s move the
blocks right.nntttconst positionAfter = Position.createAfter(
groupRange.end.parent );nntttwriter.move( groupRange, positionAfter );ntt}
);nt}nnt/**nt * Applies the quote to given blocks.nt *nt * @privatent *
@param {module:engine/model/writer~Writer} writernt * @param
{Array.&lt;module:engine/model/element~Element&gt;} blocksnt
*/nt_applyQuote( writer, blocks ) {nttconst quotesToMerge = [];nntt// Quote
all groups of block. Iterate in the reverse order to not break following
ranges.nttgetRangesOfBlockGroups( blocks ).reverse().forEach( groupRange
=&gt; {ntttlet quote = findQuote( groupRange.start );nntttif ( !quote )
{nttttquote = new Element( &#39;blockQuote&#39; );nnttttwriter.wrap(
groupRange, quote );nttt}nntttquotesToMerge.push( quote );ntt} );nntt//
Merge subsequent &lt;bQ&gt; elements. Reverse the order again because this
time we want to go throughntt// the &lt;bQ&gt; elements in the source order
(due to how merge works – it moves the right element&#39;s contentntt// to
the first element and removes the right one. Since we may need to merge a
couple of subsequent `&lt;bQ&gt;` elementsntt// we want to keep the
reference to the first (furthest left)
one.nttquotesToMerge.reverse().reduce( ( currentQuote, nextQuote ) =&gt;
{ntttif ( currentQuote.nextSibling == nextQuote ) {nttttwriter.merge(
Position.createAfter( currentQuote ) );nnttttreturn
currentQuote;nttt}nntttreturn nextQuote;ntt} );nt}n}nnfunction findQuote(
elementOrPosition ) {ntreturn elementOrPosition.parent.name ==
&#39;blockQuote&#39; ? elementOrPosition.parent : null;n}nn// Returns a
minimal array of ranges containing groups of subsequent blocks.n//n//
content:         abcdefghn// blocks:          [ a, b, d , f, g, h ]n//
output ranges:   [<a href="fgh">ab]c[d]e</a>n//n// @param
{Array.&lt;module:engine/model/element~Element&gt;} blocksn// @returns
{Array.&lt;module:engine/model/range~Range&gt;}nfunction
getRangesOfBlockGroups( blocks ) {ntlet startPosition;ntlet i = 0;ntconst
ranges = [];nntwhile ( i &lt; blocks.length ) {nttconst block = blocks[ i
];nttconst nextBlock = blocks[ i + 1 ];nnttif ( !startPosition )
{ntttstartPosition = Position.createBefore( block );ntt}nnttif ( !nextBlock
|| block.nextSibling != nextBlock ) {ntttranges.push( new Range(
startPosition, Position.createAfter( block ) ) );ntttstartPosition =
null;ntt}nntti++;nt}nntreturn ranges;n}nn// Checks whether &lt;bQ&gt; can
wrap the block.nfunction checkCanBeQuoted( schema, block ) {nt// TMP will
be replaced with schema.checkWrap().ntconst isBQAllowed =
schema.checkChild( block.parent, &#39;blockQuote&#39; );ntconst
isBlockAllowedInBQ = schema.checkChild( [ &#39;$root&#39;,
&#39;blockQuote&#39; ], block );nntreturn isBQAllowed &amp;&amp;
isBlockAllowedInBQ;n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-block-quote/src/blockquotecommand.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module block-quote/blockquoteeditingn */nnimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport BlockQuoteCommand
from &#39;./blockquotecommand&#39;;nn/**n * The block quote editing.n *n *
Introduces the `&#39;blockQuote&#39;` command and the
`&#39;blockQuote&#39;` model element.n *n * @extends
module:core/plugin~Pluginn */nexport default class BlockQuoteEditing
extends Plugin {nt/**nt * @inheritDocnt */ntinit() {nttconst editor =
this.editor;nttconst schema = editor.model.schema;nntteditor.commands.add(
&#39;blockQuote&#39;, new BlockQuoteCommand( editor )
);nnttschema.register( &#39;blockQuote&#39;, {ntttallowWhere:
&#39;$block&#39;,ntttallowContentOf: &#39;$root&#39;ntt} );nntt// Disallow
blockQuote in blockQuote.nttschema.addChildCheck( ( ctx, childDef ) =&gt;
{ntttif ( ctx.endsWith( &#39;blockQuote&#39; ) &amp;&amp; childDef.name ==
&#39;blockQuote&#39; ) {nttttreturn false;nttt}ntt}
);nntteditor.conversion.elementToElement( { model: &#39;blockQuote&#39;,
view: &#39;blockquote&#39; } );nt}nnt/**nt * @inheritDocnt */ntafterInit()
{nttconst editor = this.editor;nttconst command = editor.commands.get(
&#39;blockQuote&#39; );nntt// Overwrite default Enter key behavior.ntt// If
Enter key is pressed with selection collapsed in empty block inside a
quote, break the quote.ntt// This listener is added in afterInit in order
to register it after list&#39;s feature listener.ntt// We can&#39;t use a
priority for this, because &#39;low&#39; is already used by the enter
feature, unlessntt// we&#39;d use numeric priority in this
case.nttthis.listenTo( this.editor.editing.view.document, &#39;enter&#39;,
( evt, data ) =&gt; {ntttconst doc = this.editor.model.document;ntttconst
positionParent = doc.selection.getLastPosition().parent;nntttif (
doc.selection.isCollapsed &amp;&amp; positionParent.isEmpty &amp;&amp;
command.value ) {nttttthis.editor.execute( &#39;blockQuote&#39;
);nttttthis.editor.editing.view.scrollToTheSelection();nnttttdata.preventDefault();nttttevt.stop();nttt}ntt}
);nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-block-quote/src/blockquoteediting.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2017, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/* eslint-env browser */nn&#39;use strict&#39;;nnimport mix from
&#39;@ckeditor/ckeditor5-utils/src/mix&#39;;nimport EmitterMixin from
&#39;@ckeditor/ckeditor5-utils/src/emittermixin&#39;;nnconst
BASE64_HEADER_REG_EXP = /^data:(\S*?);base64,/;nn/**n * FileUploader class
used to upload single file.n */nclass FileUploader {nt/**nt * Creates
`FileUploader` instance.nt *nt * @param {Blob|String} fileOrData A blob
object or a data string encoded with Base64.nt * @param {Token} token Token
used for authentication.nt * @param {String} apiAddress API address.nt
*/ntconstructor( fileOrData, token, apiAddress ) {nttif ( !fileOrData )
{ntttthrow new Error( &#39;File must be provided&#39; );ntt}nnttif ( !token
) {ntttthrow new Error( &#39;Token must be provided&#39; );ntt}nnttif (
!apiAddress ) {ntttthrow new Error( &#39;Api address must be provided&#39;
);ntt}nntt/**ntt * A file that is being uploaded.ntt *ntt * @type {Blob}ntt
*/nttthis.file = _isBase64( fileOrData ) ? _base64ToBlob( fileOrData ) :
fileOrData;nntt/**ntt * CKEditor Cloud Services access token.ntt *ntt *
@type {Token}ntt * @privatentt */nttthis._token = token;nntt/**ntt *
CKEditor Cloud Services API address.ntt *ntt * @type {String}ntt *
@privatentt */nttthis._apiAddress = apiAddress;nt}nnt/**nt * Registers
callback on `progress` event.nt *nt * @chainablent * @param {Function}
callbacknt * @returns {FileUploader}nt */ntonProgress( callback )
{nttthis.on( &#39;progress&#39;, ( event, data ) =&gt; callback( data )
);nnttreturn this;nt}nnt/**nt * Registers callback on `error` event. Event
is called once when error occurs.nt *nt * @chainablent * @param {Function}
callbacknt * @returns {FileUploader}nt */ntonError( callback )
{nttthis.once( &#39;error&#39;, ( event, data ) =&gt; callback( data )
);nnttreturn this;nt}nnt/**nt * Aborts upload process.nt */ntabort()
{nttthis.xhr.abort();nt}nnt/**nt * Sends XHR request to API.nt *nt *
@chainablent * @returns {Promise.&lt;Object&gt;}nt */ntsend()
{nttthis._prepareRequest();nttthis._attachXHRListeners();nnttreturn
this._sendRequest();nt}nnt/**nt * Prepares XHR request.nt *nt * @privatent
*/nt_prepareRequest() {nttconst xhr = new XMLHttpRequest();nnttxhr.open(
&#39;POST&#39;, this._apiAddress );nttxhr.setRequestHeader(
&#39;Authorization&#39;, this._token.value );nttxhr.responseType =
&#39;json&#39;;nnttthis.xhr = xhr;nt}nnt/**nt * Attaches listeners to the
XHR.nt *nt * @privatent */nt_attachXHRListeners() {nttconst that =
this;nttconst xhr = this.xhr;nnttxhr.addEventListener( &#39;error&#39;,
onError( &#39;Network Error&#39; ) );nttxhr.addEventListener(
&#39;abort&#39;, onError( &#39;Abort&#39; ) );nntt/* istanbul ignore else
*/nttif ( xhr.upload ) {ntttxhr.upload.addEventListener(
&#39;progress&#39;, event =&gt; {nttttif ( event.lengthComputable )
{ntttttthis.fire( &#39;progress&#39;, {ntttttttotal:
event.total,nttttttuploaded: event.loadednttttt} );ntttt}nttt}
);ntt}nnttxhr.addEventListener( &#39;load&#39;, () =&gt; {ntttconst
statusCode = xhr.status;ntttconst xhrResponse = xhr.response;nntttif (
statusCode &lt; 200 || statusCode &gt; 299 ) {nttttreturn this.fire(
&#39;error&#39;, xhrResponse.message || xhrResponse.error );nttt}ntt}
);nnttfunction onError( message ) {ntttreturn () =&gt; that.fire(
&#39;error&#39;, message );ntt}nt}nnt/**nt * Sends XHR request.nt *nt *
@privatent */nt_sendRequest() {nttconst formData = new FormData();nttconst
xhr = this.xhr;nnttformData.append( &#39;file&#39;, this.file );nnttreturn
new Promise( ( resolve, reject ) =&gt; {ntttxhr.addEventListener(
&#39;load&#39;, () =&gt; {nttttconst statusCode = xhr.status;nttttconst
xhrResponse = xhr.response;nnttttif ( statusCode &lt; 200 || statusCode
&gt; 299 ) {ntttttreturn reject( xhrResponse.message || xhrResponse.error
);ntttt}nnttttreturn resolve( xhrResponse );nttt}
);nntttxhr.addEventListener( &#39;error&#39;, () =&gt; reject( &#39;Network
Error&#39; ) );ntttxhr.addEventListener( &#39;abort&#39;, () =&gt; reject(
&#39;Abort&#39; ) );nntttxhr.send( formData );ntt} );nt}nnt/**nt * Fired
when error occurs.nt *nt * @event errornt * @param {String} error Error
messagent */nnt/**nt * Fired on upload progress.nt *nt * @event progressnt
* @param {Object} status Total and uploaded statusnt */n}nnmix(
FileUploader, EmitterMixin );nn/**n * Transforms Base64 string data into
file.n *n * @param {String} base64 String data.n * @param {Number}
[sliceSize=512]n * @returns {Blob}n * @privaten */nfunction _base64ToBlob(
base64, sliceSize = 512 ) {nttry {nttconst contentType = base64.match(
BASE64_HEADER_REG_EXP )[ 1 ];nttconst base64Data = atob( base64.replace(
BASE64_HEADER_REG_EXP, &#39;&#39; ) );nnttconst byteArrays = [];nnttfor (
let offset = 0; offset &lt; base64Data.length; offset += sliceSize )
{ntttconst slice = base64Data.slice( offset, offset + sliceSize );ntttconst
byteNumbers = new Array( slice.length );nntttfor ( let i = 0; i &lt;
slice.length; i++ ) {nttttbyteNumbers[ i ] = slice.charCodeAt( i
);nttt}nntttbyteArrays.push( new Uint8Array( byteNumbers ) );ntt}nnttreturn
new Blob( byteArrays, { type: contentType } );nt} catch ( error ) {nttthrow
new Error( &#39;Problem with decoding Base64 image data.&#39; );nt}n}nn/**n
* Checks that string is Base64.n *n * @param {String} stringn * @returns
{Boolean}n * @privaten */nfunction _isBase64( string ) {ntif ( typeof
string !== &#39;string&#39; ) {nttreturn false;nt}nntconst match =
string.match( BASE64_HEADER_REG_EXP );ntreturn !!( match &amp;&amp;
match.length );n}nnexport default FileUploader;nnnn//////////////////n//
WEBPACK FOOTERn// ckeditor at
/workspace/ckeditor5/node_modules//ckeditor-cloud-services-core/src/uploadgateway/fileuploader.jsn//
module id = nulln// module chunks = “,”/**n * @license Copyright ©
2003-2017, CKSource - Frederico Knabben. All rights reserved.n * For
licensing, see LICENSE.md.n */nn&#39;use strict&#39;;nnimport FileUploader
from &#39;./fileuploader&#39;;nn/**n * UploadGateway abstracts file uploads
to CKEditor Cloud Services.n */nexport default class UploadGateway {nt/**nt
* Creates `UploadGateway` instance.nt *nt * @param {Token} token Token used
for authentication.nt * @param {String} apiAddress API address.nt
*/ntconstructor( token, apiAddress ) {nttif ( !token ) {ntttthrow new
Error( &#39;Token must be provided&#39; );ntt}nnttif ( !apiAddress )
{ntttthrow new Error( &#39;Api address must be provided&#39;
);ntt}nntt/**ntt * CKEditor Cloud Services access token.ntt *ntt * @type
{Token}ntt * @privatentt */nttthis._token = token;nntt/**ntt * CKEditor
Cloud Services API address.ntt *ntt * @type {String}ntt * @privatentt
*/nttthis._apiAddress = apiAddress;nt}nnt/**nt * Creates a {@link
FileUploader} instance that wraps file upload process.nt * The file is
being sent at a time when the method {@link FileUploader#then then} is
callednt * or when {@link FileUploader#send send} method is called.nt *nt *
const token = await Token.create( &#39;<a
href="https://token-endpoint">token-endpoint</a>&#39; );nt *     new
UploadGateway( token, &#39;<a
href="https://example.org">example.org</a>&#39; )nt *        .upload(
&#39;FILE&#39; )nt *        .onProgress( ( data ) =&gt; console.log( data )
)nt *        .send()nt *        .then( ( response ) =&gt; console.log(
response ) );nt *nt *     // ORnt *nt *     const token = await
Token.create( &#39;<a href="https://token-endpoint">token-endpoint</a>&#39;
);nt *     new UploadGateway( token, &#39;<a
href="https://example.org">example.org</a>&#39; )nt *         .upload(
&#39;FILE&#39; )nt *         .onProgress( ( data ) =&gt; console.log( data
) )nt *         .send()nt *         .then( ( response ) =&gt; console.log(
response ) );nt *nt * @param {Blob/String} fileOrData A blob object or a
data string encoded with Base64.nt * @returns {FileUploader} Returns
`FileUploader` instance.nt */ntupload( fileOrData ) {nttreturn new
FileUploader( fileOrData, this._token, this._apiAddress
);nt}n}nnnnn//////////////////n// WEBPACK FOOTERn// ckeditor at
/workspace/ckeditor5/node_modules//ckeditor-cloud-services-core/src/uploadgateway/uploadgateway.jsn//
module id = nulln// module chunks = “,”/**n * @license Copyright ©
2003-2018, CKSource - Frederico Knabben. All rights reserved.n * For
licensing, see LICENSE.md.n */nn/**n * @module image/image/convertersn
*/nnimport ModelPosition from
&#39;@ckeditor/ckeditor5-engine/src/model/position&#39;;nimport first from
&#39;@ckeditor/ckeditor5-utils/src/first&#39;;nn/**n * Returns a function
that converts the image view representation:n *n *tt&lt;figure
class=&quot;image&quot;&gt;&lt;img src=&quot;…&quot;
alt=&quot;…&quot;&gt;&lt;/img&gt;&lt;/figure&gt;n *n * to the model
representation:n *n *tt&lt;image src=&quot;…&quot;
alt=&quot;…&quot;&gt;&lt;/image&gt;n *n * The entire content of the
`&lt;figure&gt;` element except the first `&lt;img&gt;` is being converted
as childrenn * of the `&lt;image&gt;` model element.n *n * @returns
{Function}n */nexport function viewFigureToModel() {ntreturn dispatcher
=&gt; {nttdispatcher.on( &#39;element:figure&#39;, converter
);nt};nntfunction converter( evt, data, conversionApi ) {ntt// Do not
convert if this is not an "image figure&quot;.nttif (
!conversionApi.consumable.test( data.viewItem, { name: true, classes:
&#39;image&#39; } ) ) {ntttreturn;ntt}nntt// Find an image element inside
the figure element.nttconst viewImage = Array.from(
data.viewItem.getChildren() ).find( viewChild =&gt; viewChild.is(
&#39;img&#39; ) );nntt// Do not convert if image element is absent, is
missing src attribute or was already converted.nttif ( !viewImage ||
!viewImage.hasAttribute( &#39;src&#39; ) || !conversionApi.consumable.test(
viewImage, { name: true } ) ) {ntttreturn;ntt}nntt// Convert view image to
model image.nttconst conversionResult = conversionApi.convertItem(
viewImage, data.modelCursor );nntt// Get image element from conversion
result.nttconst modelImage = first( conversionResult.modelRange.getItems()
);nntt// When image wasn&#39;t successfully converted then finish
conversion.nttif ( !modelImage ) {ntttreturn;ntt}nntt// Convert rest of the
figure element&#39;s children as an image
children.nttconversionApi.convertChildren( data.viewItem,
ModelPosition.createAt( modelImage ) );nntt// Set image range as conversion
result.nttdata.modelRange = conversionResult.modelRange;nntt// Continue
conversion where image conversion ends.nttdata.modelCursor =
conversionResult.modelCursor;nt}n}nn/**n * Converter used to convert the
`srcset` model image attribute to the `srcset`, `sizes` and `width`
attributes in the view.n *n * @return {Function}n */nexport function
srcsetAttributeConverter() {ntreturn dispatcher =&gt; {nttdispatcher.on(
&#39;attribute:srcset:image&#39;, converter );nt};nntfunction converter(
evt, data, conversionApi ) {nttif ( !conversionApi.consumable.consume(
data.item, evt.name ) ) {ntttreturn;ntt}nnttconst writer =
conversionApi.writer;nttconst figure = conversionApi.mapper.toViewElement(
data.item );nttconst img = figure.getChild( 0 );nnttif (
data.attributeNewValue === null ) {ntttconst srcset =
data.attributeOldValue;nntttif ( srcset.data )
{nttttwriter.removeAttribute( &#39;srcset&#39;, img
);nttttwriter.removeAttribute( &#39;sizes&#39;, img );nnttttif (
srcset.width ) {ntttttwriter.removeAttribute( &#39;width&#39;, img
);ntttt}nttt}ntt} else {ntttconst srcset = data.attributeNewValue;nntttif (
srcset.data ) {nttttwriter.setAttribute( &#39;srcset&#39;, srcset.data, img
);ntttt// Always outputting `100vw`. See <a
href="https://github.com/ckeditor/ckeditor5-image/issues/2.\n\t\t\t\twriter.setAttribute">github.com/ckeditor/ckeditor5-image/issues/2.nttttwriter.setAttribute</a>(
&#39;sizes&#39;, &#39;100vw&#39;, img );nnttttif ( srcset.width )
{ntttttwriter.setAttribute( &#39;width&#39;, srcset.width, img
);ntttt}nttt}ntt}nt}n}nnexport function modelToViewAttributeConverter(
attributeKey ) {ntreturn dispatcher =&gt; {nttdispatcher.on( `attribute:${
attributeKey }:image`, converter );nt};nntfunction converter( evt, data,
conversionApi ) {nttif ( !conversionApi.consumable.consume( data.item,
evt.name ) ) {ntttreturn;ntt}nnttconst viewWriter =
conversionApi.writer;nttconst figure = conversionApi.mapper.toViewElement(
data.item );nttconst img = figure.getChild( 0 );nnttif (
data.attributeNewValue !== null ) {ntttviewWriter.setAttribute(
data.attributeKey, data.attributeNewValue, img );ntt} else
{ntttviewWriter.removeAttribute( data.attributeKey, img
);ntt}nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-image/src/image/converters.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module widget/highlightstackn */nnimport EmitterMixin from
&#39;@ckeditor/ckeditor5-utils/src/emittermixin&#39;;nimport mix from
&#39;@ckeditor/ckeditor5-utils/src/mix&#39;;nn/**n * Class used to handle
correct order of highlights on elements.n *n * When different highlights
are applied to same element correct order should be preserved:n *n * *
highlight with highest priority should be applied,n * * if two highlights
have same priority - sort by CSS class provided inn * {@link
module:engine/conversion/downcast-converters~HighlightDescriptor}.n *n *
This way, highlight will be applied with the same rules it is applied on
texts.n */nexport default class HighlightStack {nt/**nt * Creates class
instance.nt */ntconstructor() {nttthis._stack = [];nt}nnt/**nt * Adds
highlight descriptor to the stack.nt *nt * @fires change:topnt * @param
{module:engine/conversion/downcast-converters~HighlightDescriptor}
descriptornt * @param {module:engine/view/writer~Writer} writernt */ntadd(
descriptor, writer ) {nttconst stack = this._stack;nntt// Save top
descriptor and insert new one. If top is changed - fire event.nttconst
oldTop = stack[ 0 ];nttthis._insertDescriptor( descriptor );nttconst newTop
= stack[ 0 ];nntt// When new object is at the top and stores different
information.nttif ( oldTop !== newTop &amp;&amp; !compareDescriptors(
oldTop, newTop ) ) {ntttthis.fire( &#39;change:top&#39;,
{nttttoldDescriptor: oldTop,nttttnewDescriptor: newTop,nttttwriternttt}
);ntt}nt}nnt/**nt * Removes highlight descriptor from the stack.nt *nt *
@fires change:topnt * @param {String} id Id of the descriptor to remove.nt
* @param {module:engine/view/writer~Writer} writernt */ntremove( id, writer
) {nttconst stack = this._stack;nnttconst oldTop = stack[ 0
];nttthis._removeDescriptor( id );nttconst newTop = stack[ 0 ];nntt// When
new object is at the top and stores different information.nttif ( oldTop
!== newTop &amp;&amp; !compareDescriptors( oldTop, newTop ) )
{ntttthis.fire( &#39;change:top&#39;, {nttttoldDescriptor:
oldTop,nttttnewDescriptor: newTop,nttttwriternttt} );ntt}nt}nnt/**nt *
Inserts given descriptor in correct place in the stack. It also takes care
about updating information whennt * descriptor with same id is already
present.nt *nt * @privatent * @param
{module:engine/conversion/downcast-converters~HighlightDescriptor}
descriptornt */nt_insertDescriptor( descriptor ) {nttconst stack =
this._stack;nttconst index = stack.findIndex( item =&gt; item.id ===
descriptor.id );nntt// Inserting exact same descriptor - do nothing.nttif (
compareDescriptors( descriptor, stack[ index ] ) ) {ntttreturn;ntt}nntt//
If descriptor with same id but with different information is on the stack -
remove it.nttif ( index &gt; -1 ) {ntttstack.splice( index, 1 );ntt}nntt//
Find correct place to insert descriptor in the stack.ntt// It have
different information (for example priority) so it must be re-inserted in
correct place.nttlet i = 0;nnttwhile ( stack[ i ] &amp;&amp;
shouldABeBeforeB( stack[ i ], descriptor ) ) {nttti++;ntt}nnttstack.splice(
i, 0, descriptor );nt}nnt/**nt * Removes descriptor with given id from the
stack.nt *nt * @privatent * @param {String} id Descriptor&#39;s id.nt
*/nt_removeDescriptor( id ) {nttconst stack = this._stack;nttconst index =
stack.findIndex( item =&gt; item.id === id );nntt// If descriptor with same
id is on the list - remove it.nttif ( index &gt; -1 ) {ntttstack.splice(
index, 1 );ntt}nt}n}nnmix( HighlightStack, EmitterMixin );nn// Compares two
descriptors by checking their priority and class list.n//n// @param
{module:engine/conversion/downcast-converters~HighlightDescriptor} an//
@param {module:engine/conversion/downcast-converters~HighlightDescriptor}
bn// @returns {Boolean} Returns true if both descriptors are defined and
have same priority and classes.nfunction compareDescriptors( a, b )
{ntreturn a &amp;&amp; b &amp;&amp; a.priority == b.priority &amp;&amp;
classesToString( a.classes ) == classesToString( b.classes );n}nn// Checks
whenever first descriptor should be placed in the stack before second
one.n//n// @param
{module:engine/conversion/downcast-converters~HighlightDescriptor} an//
@param {module:engine/conversion/downcast-converters~HighlightDescriptor}
bn// @returns {Boolean}nfunction shouldABeBeforeB( a, b ) {ntif (
a.priority &gt; b.priority ) {nttreturn true;nt} else if ( a.priority &lt;
b.priority ) {nttreturn false;nt}nnt// When priorities are equal and names
are different - use classes to compare.ntreturn classesToString( a.classes
) &gt; classesToString( b.classes );n}nn// Converts CSS classes passed with
{@link module:engine/conversion/downcast-converters~HighlightDescriptor}
ton// sorted string.n//n// @param {String|Array&lt;String&gt;}
descriptorn// @returns {String}nfunction classesToString( classes )
{ntreturn Array.isArray( classes ) ? classes.sort().join( &#39;,&#39; ) :
classes;n}nn/**n * Fired when top element on {@link
module:widget/highlightstack~HighlightStack} has been changedn *n * @event
change:topn * @param {Object} data Additional information about the
change.n * @param
{module:engine/conversion/downcast-converters~HighlightDescriptor}
[data.newDescriptor] New highlightn * descriptor. It will be `undefined`
when last descriptor is removed from the stack.n * @param
{module:engine/conversion/downcast-converters~HighlightDescriptor}
[data.oldDescriptor] Old highlightn * descriptor. It will be `undefined`
when first descriptor is added to the stack.n * @param
{module:engine/view/writer~Writer} writer View writer that can be used to
modify element.n */nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-widget/src/highlightstack.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module widget/utilsn */nnimport HighlightStack from
&#39;./highlightstack&#39;;nnconst widgetSymbol = Symbol(
&#39;isWidget&#39; );nconst labelSymbol = Symbol( &#39;label&#39; );nn/**n
* CSS class added to each widget element.n *n * @const {String}n */nexport
const WIDGET_CLASS_NAME = &#39;ck-widget&#39;;nn/**n * CSS class added to
currently selected widget element.n *n * @const {String}n */nexport const
WIDGET_SELECTED_CLASS_NAME = &#39;ck-widget_selected&#39;;nn/**n * Returns
`true` if given {@link module:engine/view/element~Element} is a widget.n *n
* @param {module:engine/view/element~Element} elementn * @returns
{Boolean}n */nexport function isWidget( element ) {ntreturn
!!element.getCustomProperty( widgetSymbol );n}nn/**n * Converts given
{@link module:engine/view/element~Element} to widget in following way:n * *
sets `contenteditable` attribute to `&quot;true&quot;`,n * * adds custom
`getFillerOffset` method returning `null`,n * * adds `ck-widget` CSS
class,n * * adds custom property allowing to recognize widget elements by
using {@link ~isWidget},n * * implements `addHighlight` and
`removeHighlight` custom properties to handle view highlight on widgets.n
*n * @param {module:engine/view/element~Element} elementn * @param
{module:engine/view/writer~Writer} writern * @param {Object} [options={}]n
* @param {String|Function} [options.label] Element&#39;s label provided to
{@link ~setLabel} function. It can be passed asn * a plain string or a
function returning a string.n * @returns
{module:engine/view/element~Element} Returns same element.n */nexport
function toWidget( element, writer, options = {} ) {ntwriter.setAttribute(
&#39;contenteditable&#39;, &#39;false&#39;, element );ntwriter.addClass(
WIDGET_CLASS_NAME, element );ntwriter.setCustomProperty( widgetSymbol,
true, element );ntelement.getFillerOffset = getFillerOffset;nntif (
options.label ) {nttsetLabel( element, options.label, writer
);nt}nntsetHighlightHandling(nttelement,nttwriter,ntt( element, descriptor,
writer ) =&gt; writer.addClass( normalizeToArray( descriptor.classes ),
element ),ntt( element, descriptor, writer ) =&gt; writer.removeClass(
normalizeToArray( descriptor.classes ), element )nt);nntreturn
element;nnt// Normalizes CSS class in descriptor that can be provided in
form of an array or a string.ntfunction normalizeToArray( classes )
{nttreturn Array.isArray( classes ) ? classes : [ classes ];nt}n}nn/**n *
Sets highlight handling methods. Uses {@link
module:widget/highlightstack~HighlightStack} ton * properly determine which
highlight descriptor should be used at given time.n *n * @param
{module:engine/view/element~Element} elementn * @param
{module:engine/view/writer~Writer} writern * @param {Function} addn *
@param {Function} removen */nexport function setHighlightHandling( element,
writer, add, remove ) {ntconst stack = new HighlightStack();nntstack.on(
&#39;change:top&#39;, ( evt, data ) =&gt; {nttif ( data.oldDescriptor )
{ntttremove( element, data.oldDescriptor, data.writer );ntt}nnttif (
data.newDescriptor ) {ntttadd( element, data.newDescriptor, data.writer
);ntt}nt} );nntwriter.setCustomProperty( &#39;addHighlight&#39;, ( element,
descriptor, writer ) =&gt; stack.add( descriptor, writer ), element
);ntwriter.setCustomProperty( &#39;removeHighlight&#39;, ( element, id,
writer ) =&gt; stack.remove( id, writer ), element );n}nn/**n * Sets label
for given element.n * It can be passed as a plain string or a function
returning a string. Function will be called each time label is retrieved
byn * {@link ~getLabel}.n *n * @param {module:engine/view/element~Element}
elementn * @param {String|Function} labelOrCreatorn * @param
{module:engine/view/writer~Writer} writern */nexport function setLabel(
element, labelOrCreator, writer ) {ntwriter.setCustomProperty( labelSymbol,
labelOrCreator, element );n}nn/**n * Returns label for provided element.n
*n * @param {module:engine/view/element~Element} elementn * @return
{String}n */nexport function getLabel( element ) {ntconst labelCreator =
element.getCustomProperty( labelSymbol );nntif ( !labelCreator ) {nttreturn
&#39;&#39;;nt}nntreturn typeof labelCreator == &#39;function&#39; ?
labelCreator() : labelCreator;n}nn/**n * Adds functionality to provided
{module:engine/view/editableelement~EditableElement} to act as a
widget&#39;s editable:n * * adds `ck-editor__editable` and
`ck-editor__nested-editable` CSS classes,n * * sets `contenteditable` as
`true` when {module:engine/view/editableelement~EditableElement#isReadOnly}
is `false`n * otherwise set `false`,n * * adds
`ck-editor__nested-editable_focused` CSS class when editable is focused and
removes it when it&#39;s blurred.n *n * @param
{module:engine/view/editableelement~EditableElement} editablen * @param
{module:engine/view/writer~Writer} writern * @returns
{module:engine/view/editableelement~EditableElement} Returns same element
that was provided in `editable` param.n */nexport function
toWidgetEditable( editable, writer ) {ntwriter.addClass( [
&#39;ck-editor__editable&#39;, &#39;ck-editor__nested-editable&#39; ],
editable );nnt// Set initial contenteditable value.ntwriter.setAttribute(
&#39;contenteditable&#39;, editable.isReadOnly ? &#39;false&#39; :
&#39;true&#39;, editable );nnt// Bind contenteditable property to
element#isReadOnly.nteditable.on( &#39;change:isReadOnly&#39;, ( evt,
property, is ) =&gt; {nttwriter.setAttribute( &#39;contenteditable&#39;, is
? &#39;false&#39; : &#39;true&#39;, editable );nt} );nnteditable.on(
&#39;change:isFocused&#39;, ( evt, property, is ) =&gt; {nttif ( is )
{ntttwriter.addClass( &#39;ck-editor__nested-editable_focused&#39;,
editable );ntt} else {ntttwriter.removeClass(
&#39;ck-editor__nested-editable_focused&#39;, editable );ntt}nt}
);nntreturn editable;n}nn// Default filler offset function applied to all
widget elements.n//n// @returns {null}nfunction getFillerOffset() {ntreturn
null;n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-widget/src/utils.jsn// module id = nulln// module chunks =
“,”/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben. All
rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
image/image/utilsn */nnimport { toWidget, isWidget } from
&#39;@ckeditor/ckeditor5-widget/src/utils&#39;;nimport ModelElement from
&#39;@ckeditor/ckeditor5-engine/src/model/element&#39;;nnconst imageSymbol
= Symbol( &#39;isImage&#39; );nn/**n * Converts a given {@link
module:engine/view/element~Element} to an image widget:n * * Adds a {@link
module:engine/view/element~Element#_setCustomProperty custom property}
allowing to recognize the image widget element.n * * Calls the {@link
module:widget/utils~toWidget} function with the proper element&#39;s label
creator.n *n * @param {module:engine/view/element~Element} viewElementn *
@param {module:engine/view/writer~Writer} writer An instance of the view
writer.n * @param {String} label The element&#39;s label. It will be
concatenated with the image `alt` attribute if one is present.n * @returns
{module:engine/view/element~Element}n */nexport function toImageWidget(
viewElement, writer, label ) {ntwriter.setCustomProperty( imageSymbol,
true, viewElement );nntreturn toWidget( viewElement, writer, { label:
labelCreator } );nntfunction labelCreator() {nttconst imgElement =
viewElement.getChild( 0 );nttconst altText = imgElement.getAttribute(
&#39;alt&#39; );nnttreturn altText ? `${ altText } ${ label }` :
label;nt}n}nn/**n * Checks if a given view element is an image widget.n *n
* @param {module:engine/view/element~Element} viewElementn * @returns
{Boolean}n */nexport function isImageWidget( viewElement ) {ntreturn
!!viewElement.getCustomProperty( imageSymbol ) &amp;&amp; isWidget(
viewElement );n}nn/**n * Checks if an image widget is the only selected
element.n *n * @param
{module:engine/view/selection~Selection|module:engine/view/documentselection~DocumentSelection}
selectionn * @returns {Boolean}n */nexport function isImageWidgetSelected(
selection ) {ntconst viewElement = selection.getSelectedElement();nntreturn
!!( viewElement &amp;&amp; isImageWidget( viewElement ) );n}nn/**n * Checks
if the provided model element is an instance of {@link
module:engine/model/element~Element Element} and its namen * is `image`.n
*n * @param {module:engine/model/element~Element} modelElementn * @returns
{Boolean}n */nexport function isImage( modelElement ) {ntreturn
modelElement instanceof ModelElement &amp;&amp; modelElement.name ==
&#39;image&#39;;n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-image/src/image/utils.jsn// module id = nulln// module chunks
= “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben.
All rights reserved.n * For licensing, see LICENSE.md.n */n/**n * @module
image/image/imageeditingn */nimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport {n   
viewFigureToModel,n    modelToViewAttributeConverter,n   
srcsetAttributeConvertern} from &#39;./converters&#39;;nimport {
toImageWidget } from &#39;./utils&#39;;nimport { downcastElementToElement }
from
&#39;@ckeditor/ckeditor5-engine/src/conversion/downcast-converters&#39;;nimport
{n    upcastElementToElement,n    upcastAttributeToAttributen} from
&#39;@ckeditor/ckeditor5-engine/src/conversion/upcast-converters&#39;;nimport
ViewPosition from
&#39;@ckeditor/ckeditor5-engine/src/view/position&#39;;n/**n * The image
engine plugin.n * It registers `&lt;image&gt;` as a block element in the
document schema, and allows `alt`, `src` and `srcset` attributes.n * It
also egisters converters for editing and data pipelines.n *n * @extends
module:core/plugin~Pluginn */nexport default class ImageEditing extends
Plugin {n    /**nt * @inheritDocnt */n    init() {n        const editor =
this.editor;n        const schema = editor.model.schema;n        const t =
editor.t;n        const conversion = editor.conversion;n        //
Configure schema.n        schema.register(&#39;image&#39;, {n           
isObject: true,n            isBlock: true,n            allowWhere:
&#39;$block&#39;,n            allowAttributes: [n               
&#39;alt&#39;,n                &#39;src&#39;,n               
&#39;srcset&#39;n            ]n        });n       
conversion.for(&#39;dataDowncast&#39;).add(downcastElementToElement({n     
model: &#39;image&#39;,n            view: (modelElement, viewWriter) =&gt;
createImageViewElement(viewWriter)n        }));n       
conversion.for(&#39;editingDowncast&#39;).add(downcastElementToElement({n  
model: &#39;image&#39;,n            view: (modelElement, viewWriter) =&gt;
toImageWidget(createImageViewElement(viewWriter), viewWriter,
t(&#39;e&#39;))n        }));n       
conversion.for(&#39;downcast&#39;).add(modelToViewAttributeConverter(&#39;src&#39;)).add(modelToViewAttributeConverter(&#39;alt&#39;)).add(srcsetAttributeConverter());n
conversion.for(&#39;upcast&#39;).add(upcastElementToElement({n           
view: {n                name: &#39;img&#39;,n                attributes: {
src: true }n            },n            model: (viewImage, modelWriter)
=&gt; modelWriter.createElement(&#39;image&#39;, { src:
viewImage.getAttribute(&#39;src&#39;) })n       
})).add(upcastAttributeToAttribute({n            view: {n               
name: &#39;img&#39;,n                key: &#39;alt&#39;n            },n    
model: &#39;alt&#39;n        })).add(upcastAttributeToAttribute({n         
view: {n                name: &#39;img&#39;,n                key:
&#39;srcset&#39;n            },n            model: {n                key:
&#39;srcset&#39;,n                value: viewImage =&gt; {n                
const value = { data: viewImage.getAttribute(&#39;srcset&#39;) };n         
if (viewImage.hasAttribute(&#39;width&#39;)) {n                       
value.width = viewImage.getAttribute(&#39;width&#39;);n                   
}n                    return value;n                }n            }n       
})).add(viewFigureToModel());n    }n}n// Creates a view element
representing the image.n//n//tt&lt;figure
class=&quot;image&quot;&gt;&lt;img&gt;&lt;/img&gt;&lt;/figure&gt;n//n//
Note that `alt` and `src` attributes are converted separately, so they are
not included.n//n// @privaten// @param {module:engine/view/writer~Writer}
writern// @return
{module:engine/view/containerelement~ContainerElement}nexport function
createImageViewElement(writer) {n    const emptyElement =
writer.createEmptyElement(&#39;img&#39;);n    const figure =
writer.createContainerElement(&#39;figure&#39;, { class: &#39;image&#39;
});n    writer.insert(ViewPosition.createAt(figure), emptyElement);n   
return figure;n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-image/src/image/imageediting.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module engine/view/observer/mouseobservern */nnimport DomEventObserver
from &#39;./domeventobserver&#39;;nn/**n * Mouse events observer.n *n *
Note that this observer is not available by default. To make it available
it needs to be added ton * {@link module:engine/view/view~View} by {@link
module:engine/view/view~View#addObserver} method.n *n * @extends
module:engine/view/observer/domeventobserver~DomEventObservern */nexport
default class MouseObserver extends DomEventObserver {ntconstructor( view )
{nttsuper( view );nnttthis.domEventType =
&#39;mousedown&#39;;nt}nntonDomEvent( domEvent ) {nttthis.fire(
domEvent.type, domEvent );nt}n}nn/**n * Fired when mouse button is pressed
down on one of the editables.n *n * Introduced by {@link
module:engine/view/observer/mouseobserver~MouseObserver}.n *n * Note that
this event is not available by default. To make it available {@link
module:engine/view/observer/mouseobserver~MouseObserver}n * needs to be
added to {@link module:engine/view/view~View} by a {@link
module:engine/view/view~View#addObserver} method.n *n * @see
module:engine/view/observer/mouseobserver~MouseObservern * @event
module:engine/view/document~Document#event:mousedownn * @param
{module:engine/view/observer/domeventdata~DomEventData} data Event data.n
*/nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/view/observer/mouseobserver.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module widget/widgetn */nnimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport MouseObserver from
&#39;@ckeditor/ckeditor5-engine/src/view/observer/mouseobserver&#39;;nimport
ModelRange from
&#39;@ckeditor/ckeditor5-engine/src/model/range&#39;;nimport ModelSelection
from &#39;@ckeditor/ckeditor5-engine/src/model/selection&#39;;nimport
ModelElement from
&#39;@ckeditor/ckeditor5-engine/src/model/element&#39;;nimport
ViewEditableElement from
&#39;@ckeditor/ckeditor5-engine/src/view/editableelement&#39;;nimport
RootEditableElement from
&#39;@ckeditor/ckeditor5-engine/src/view/rooteditableelement&#39;;nimport {
isWidget, WIDGET_SELECTED_CLASS_NAME, getLabel } from
&#39;./utils&#39;;nimport { keyCodes, getCode, parseKeystroke } from
&#39;@ckeditor/ckeditor5-utils/src/keyboard&#39;;nnimport
&#39;../theme/widget.css&#39;;nnconst selectAllKeystrokeCode =
parseKeystroke( &#39;Ctrl+A&#39; );nn/**n * The widget plugin.n * Registers
model to view selection converter for editing pipeline. It is hooked after
default selection conversion.n * If converted selection is placed around
widget element, selection is marked as fake. Additionally, proper CSS
classn * is added to indicate that widget has been selected.n * Adds
default {@link module:engine/view/document~Document#event:mousedown
mousedown} handling on widget elements.n *n * @extends
module:core/plugin~Plugin.n */nexport default class Widget extends Plugin
{nt/**nt * @inheritDocnt */ntstatic get pluginName() {nttreturn
&#39;Widget&#39;;nt}nnt/**nt * @inheritDocnt */ntinit() {nttconst view =
this.editor.editing.view;nttconst viewDocument = view.document;nntt/**ntt *
Holds previously selected widgets.ntt *ntt * @privatentt * @type
{Set.&lt;module:engine/view/element~Element&gt;}ntt
*/nttthis._previouslySelected = new Set();nntt// Model to view selection
converter.ntt// Converts selection placed over widget element to fake
selectionnttthis.editor.editing.downcastDispatcher.on( &#39;selection&#39;,
( evt, data, conversionApi ) =&gt; {nttt// Remove selected class from
previously selected widgets.ntttthis._clearPreviouslySelectedWidgets(
conversionApi.writer );nntttconst viewWriter =
conversionApi.writer;ntttconst viewSelection =
viewWriter.document.selection;ntttconst selectedElement =
viewSelection.getSelectedElement();nntttfor ( const range of
viewSelection.getRanges() ) {nttttfor ( const value of range ) {ntttttconst
node = value.item;nntttttif ( node.is( &#39;element&#39; ) &amp;&amp;
isWidget( node ) ) {nttttttviewWriter.addClass( WIDGET_SELECTED_CLASS_NAME,
node );nttttttthis._previouslySelected.add( node );nntttttt// Check if
widget is a single element selected.nttttttif ( node == selectedElement )
{ntttttttviewWriter.setSelection( viewSelection.getRanges(), { fake: true,
label: getLabel( selectedElement ) } );ntttttt}nttttt}ntttt}nttt}ntt}, {
priority: &#39;low&#39; } );nntt// If mouse down is pressed on widget -
create selection over whole widget.nttview.addObserver( MouseObserver
);nttthis.listenTo( viewDocument, &#39;mousedown&#39;, ( …args ) =&gt;
this._onMousedown( …args ) );nntt// Handle custom keydown
behaviour.nttthis.listenTo( viewDocument, &#39;keydown&#39;, ( …args )
=&gt; this._onKeydown( …args ), { priority: &#39;high&#39; } );nntt//
Handle custom delete behaviour.nttthis.listenTo( viewDocument,
&#39;delete&#39;, ( evt, data ) =&gt; {ntttif ( this._handleDelete(
data.direction == &#39;forward&#39; ) )
{nttttdata.preventDefault();nttttevt.stop();nttt}ntt}, { priority:
&#39;high&#39; } );nt}nnt/**nt * Handles {@link
module:engine/view/document~Document#event:mousedown mousedown} events on
widget elements.nt *nt * @privatent * @param
{module:utils/eventinfo~EventInfo} eventInfont * @param
{module:engine/view/observer/domeventdata~DomEventData} domEventDatant
*/nt_onMousedown( eventInfo, domEventData ) {nttconst editor =
this.editor;nttconst view = editor.editing.view;nttconst viewDocument =
view.document;nttlet element = domEventData.target;nntt// Do nothing if
inside nested editable.nttif ( isInsideNestedEditable( element ) )
{ntttreturn;ntt}nntt// If target is not a widget element - check if one of
the ancestors is.nttif ( !isWidget( element ) ) {ntttelement =
element.findAncestor( isWidget );nntttif ( !element )
{nttttreturn;nttt}ntt}nnttdomEventData.preventDefault();nntt// Focus editor
if is not focused already.nttif ( !viewDocument.isFocused )
{ntttview.focus();ntt}nntt// Create model selection over widget.nttconst
modelElement = editor.editing.mapper.toModelElement( element
);nnttthis._setSelectionOverElement( modelElement );nt}nnt/**nt * Handles
{@link module:engine/view/document~Document#event:keydown keydown}
events.nt *nt * @privatent * @param {module:utils/eventinfo~EventInfo}
eventInfont * @param
{module:engine/view/observer/domeventdata~DomEventData} domEventDatant
*/nt_onKeydown( eventInfo, domEventData ) {nttconst keyCode =
domEventData.keyCode;nttconst isForward = keyCode == keyCodes.delete ||
keyCode == keyCodes.arrowdown || keyCode == keyCodes.arrowright;nttlet
wasHandled = false;nntt// Checks if the keys were handled and then prevents
the default event behaviour and stopsntt// the propagation.nttif (
isArrowKeyCode( keyCode ) ) {ntttwasHandled = this._handleArrowKeys(
isForward );ntt} else if ( isSelectAllKeyCode( domEventData ) )
{ntttwasHandled = this._selectAllNestedEditableContent() ||
this._selectAllContent();ntt}nnttif ( wasHandled )
{ntttdomEventData.preventDefault();nttteventInfo.stop();ntt}nt}nnt/**nt *
Handles delete keys: backspace and delete.nt *nt * @privatent * @param
{Boolean} isForward Set to true if delete was performed in forward
direction.nt * @returns {Boolean|undefined} Returns `true` if keys were
handled correctly.nt */nt_handleDelete( isForward ) {ntt// Do nothing when
the read only mode is enabled.nttif ( this.editor.isReadOnly )
{ntttreturn;ntt}nnttconst modelDocument =
this.editor.model.document;nttconst modelSelection =
modelDocument.selection;nntt// Do nothing on non-collapsed selection.nttif
( !modelSelection.isCollapsed ) {ntttreturn;ntt}nnttconst objectElement =
this._getObjectElementNextToSelection( isForward );nnttif ( objectElement )
{ntttthis.editor.model.change( writer =&gt; {nttttlet previousNode =
modelSelection.anchor.parent;nntttt// Remove previous element if
empty.nttttwhile ( previousNode.isEmpty ) {ntttttconst nodeToRemove =
previousNode;ntttttpreviousNode = nodeToRemove.parent;nntttttwriter.remove(
nodeToRemove );ntttt}nnttttthis._setSelectionOverElement( objectElement
);nttt} );nntttreturn true;ntt}nt}nnt/**nt * Handles arrow keys.nt *nt *
@param {Boolean} isForward Set to true if arrow key should be handled in
forward direction.nt * @returns {Boolean|undefined} Returns `true` if keys
were handled correctly.nt */nt_handleArrowKeys( isForward ) {nttconst model
= this.editor.model;nttconst schema = model.schema;nttconst modelDocument =
model.document;nttconst modelSelection = modelDocument.selection;nttconst
objectElement = modelSelection.getSelectedElement();nntt// If object
element is selected.nttif ( objectElement &amp;&amp; schema.isObject(
objectElement ) ) {ntttconst position = isForward ?
modelSelection.getLastPosition() :
modelSelection.getFirstPosition();ntttconst newRange =
schema.getNearestSelectionRange( position, isForward ? &#39;forward&#39; :
&#39;backward&#39; );nntttif ( newRange ) {nttttmodel.change( writer =&gt;
{ntttttwriter.setSelection( newRange );ntttt} );nttt}nntttreturn
true;ntt}nntt// If selection is next to object element.ntt// Return if not
collapsed.nttif ( !modelSelection.isCollapsed ) {ntttreturn;ntt}nnttconst
objectElement2 = this._getObjectElementNextToSelection( isForward );nnttif
( objectElement2 instanceof ModelElement &amp;&amp; schema.isObject(
objectElement2 ) ) {ntttthis._setSelectionOverElement( objectElement2
);nntttreturn true;ntt}nt}nnt/**nt * Extends the {@link
module:engine/model/selection~Selection document&#39;s selection} to span
the entirent * content of the nested editable if already anchored in one.nt
*nt * See: {@link module:engine/model/schema~Schema#getLimitElement}.nt *nt
* @privatent */nt_selectAllNestedEditableContent() {nttconst model =
this.editor.model;nttconst documentSelection =
model.document.selection;nttconst limitElement =
model.schema.getLimitElement( documentSelection );nnttif (
documentSelection.getFirstRange().root == limitElement ) {ntttreturn
false;ntt}nnttmodel.change( writer =&gt; {ntttwriter.setSelection(
ModelRange.createIn( limitElement ) );ntt} );nnttreturn true;nt}nnt/**nt *
Handles &lt;kbd&gt;CTRL + A&lt;/kbd&gt; when widget is selected.nt *nt *
@privatent * @returns {Boolean} Returns true if widget was selected and
selecting all was handled by this method.nt */nt_selectAllContent()
{nttconst model = this.editor.model;nttconst editing =
this.editor.editing;nttconst view = editing.view;nttconst viewDocument =
view.document;nttconst viewSelection = viewDocument.selection;nnttconst
selectedElement = viewSelection.getSelectedElement();nntt// Only widget is
selected.ntt// <a
href="https://github.com/ckeditor/ckeditor5-widget/issues/23\n\t\tif">github.com/ckeditor/ckeditor5-widget/issues/23nttif</a>
( selectedElement &amp;&amp; isWidget( selectedElement ) ) {ntttconst
widgetParent = editing.mapper.toModelElement( selectedElement.parent
);nntttmodel.change( writer =&gt; {nttttwriter.setSelection(
ModelRange.createIn( widgetParent ) );nttt} );nntttreturn
true;ntt}nnttreturn false;nt}nnt/**nt * Sets {@link
module:engine/model/selection~Selection document&#39;s selection} over
given element.nt *nt * @privatent * @param
{module:engine/model/element~Element} elementnt
*/nt_setSelectionOverElement( element ) {nttthis.editor.model.change(
writer =&gt; {ntttwriter.setSelection( ModelRange.createOn( element )
);ntt} );nt}nnt/**nt * Checks if {@link module:engine/model/element~Element
element} placed next to the currentnt * {@link
module:engine/model/selection~Selection model selection} exists and is
marked innt * {@link module:engine/model/schema~Schema schema} as
`object`.nt *nt * @privatent * @param {Boolean} forward Direction of
checking.nt * @returns {module:engine/model/element~Element|null}nt
*/nt_getObjectElementNextToSelection( forward ) {nttconst model =
this.editor.model;nttconst schema = model.schema;nttconst modelSelection =
model.document.selection;nntt// Clone current selection to use it as a
probe. We must leave default selection as it is so it can returnntt// to
its current state after undo.nttconst probe = new ModelSelection(
modelSelection );nttmodel.modifySelection( probe, { direction: forward ?
&#39;forward&#39; : &#39;backward&#39; } );nttconst objectElement = forward
? probe.focus.nodeBefore : probe.focus.nodeAfter;nnttif ( objectElement
instanceof ModelElement &amp;&amp; schema.isObject( objectElement ) )
{ntttreturn objectElement;ntt}nnttreturn null;nt}nnt/**nt * Removes CSS
class from previously selected widgets.nt *nt * @privatent * @param
{module:engine/view/writer~Writer} writernt
*/nt_clearPreviouslySelectedWidgets( writer ) {nttfor ( const widget of
this._previouslySelected ) {ntttwriter.removeClass(
WIDGET_SELECTED_CLASS_NAME, widget
);ntt}nnttthis._previouslySelected.clear();nt}n}nn// Returns &#39;true&#39;
if provided key code represents one of the arrow keys.n//n// @param
{Number} keyCoden// @returns {Boolean}nfunction isArrowKeyCode( keyCode )
{ntreturn keyCode == keyCodes.arrowright ||nttkeyCode == keyCodes.arrowleft
||nttkeyCode == keyCodes.arrowup ||nttkeyCode == keyCodes.arrowdown;n}nn//
Returns &#39;true&#39; if provided (DOM) key event data corresponds with
the Ctrl+A keystroke.n//n// @param
{module:engine/view/observer/keyobserver~KeyEventData} domEventDatan//
@returns {Boolean}nfunction isSelectAllKeyCode( domEventData ) {ntreturn
getCode( domEventData ) == selectAllKeystrokeCode;n}nn// Returns `true`
when element is a nested editable or is placed inside one.n//n// @param
{module:engine/view/element~Element}n// @returns {Boolean}nfunction
isInsideNestedEditable( element ) {ntwhile ( element ) {nttif ( element
instanceof ViewEditableElement &amp;&amp; !( element instanceof
RootEditableElement ) ) {ntttreturn true;ntt}nnttelement =
element.parent;nt}nntreturn false;n}nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-widget/src/widget.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module image/imagetextalternative/imagetextalternativecommandn */nnimport
Command from &#39;@ckeditor/ckeditor5-core/src/command&#39;;nimport {
isImage } from &#39;../image/utils&#39;;nn/**n * The image text alternative
command. It is used to change the `alt` attribute of `&lt;image&gt;`
elements.n *n * @extends module:core/command~Commandn */nexport default
class ImageTextAlternativeCommand extends Command {nt/**nt * The command
value: `false` if there is no `alt` attribute, otherwise the value of the
`alt` attribute.nt *nt * @readonlynt * @observablent * @member
{String|Boolean} valuent */nnt/**nt * @inheritDocnt */ntrefresh() {nttconst
element =
this.editor.model.document.selection.getSelectedElement();nnttthis.isEnabled
= isImage( element );nnttif ( isImage( element ) &amp;&amp;
element.hasAttribute( &#39;alt&#39; ) ) {ntttthis.value =
element.getAttribute( &#39;alt&#39; );ntt} else {ntttthis.value =
false;ntt}nt}nnt/**nt * Executes the command.nt *nt * @fires executent *
@param {Object} optionsnt * @param {String} options.newValue The new value
of the `alt` attribute to set.nt */ntexecute( options ) {nttconst model =
this.editor.model;nttconst imageElement =
model.document.selection.getSelectedElement();nnttmodel.change( writer
=&gt; {ntttwriter.setAttribute( &#39;alt&#39;, options.newValue,
imageElement );ntt} );nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-image/src/imagetextalternative/imagetextalternativecommand.jsn//
module id = nulln// module chunks = “,”/**n * @license Copyright ©
2003-2018, CKSource - Frederico Knabben. All rights reserved.n * For
licensing, see LICENSE.md.n */nn/**n * @module
ui/bindings/clickoutsidehandlern */nn/* global document */nn/**n * Handles
clicking *outside* of a specified set of elements, then fires an action.n
*n * *Note*: Actually, the action is executed upon `mousedown`, not
`click`. It preventsn * certain issues when the user keeps holding the
mouse button and the UI cannot reactn * properly.n *n * @param {Object}
options Configuration options.n * @param
{module:utils/dom/emittermixin~Emitter} options.emitter The emitter to
which this behaviorn * should be added.n * @param {Function}
options.activator Function returning a `Boolean`, to determine whether the
handler is active.n * @param {Array.&lt;HTMLElement&gt;}
options.contextElements HTML elements that determine the scope of then *
handler. Clicking any of them or their descendants will *not* fire the
callback.n * @param {Function} options.callback An action executed by the
handler.n */nexport default function clickOutsideHandler( { emitter,
activator, callback, contextElements } ) {ntemitter.listenTo( document,
&#39;mousedown&#39;, ( evt, { target } ) =&gt; {nttif ( !activator() )
{ntttreturn;ntt}nnttfor ( const contextElement of contextElements ) {ntttif
( contextElement.contains( target ) )
{nttttreturn;nttt}ntt}nnttcallback();nt} );n}nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-ui/src/bindings/clickoutsidehandler.jsn//
module id = nulln// module chunks = “,”/**n * @license Copyright ©
2003-2018, CKSource - Frederico Knabben. All rights reserved.n * For
licensing, see LICENSE.md.n */nn/**n * @module
ui/labeledinput/labeledinputviewn */nnimport View from
&#39;../view&#39;;nimport uid from
&#39;@ckeditor/ckeditor5-utils/src/uid&#39;;nnimport LabelView from
&#39;../label/labelview&#39;;nn/**n * The labeled input view class.n *n *
@extends module:ui/view~Viewn */nexport default class LabeledInputView
extends View {nt/**nt * Creates an instance of the labeled input view
class.nt *nt * @param {module:utils/locale~Locale} locale The locale
instance.nt * @param {Function} InputView Constructor of the input view.nt
*/ntconstructor( locale, InputView ) {nttsuper( locale );nnttconst id =
`ck-input-${ uid() }`;nntt/**ntt * The text of the label.ntt *ntt *
@observablentt * @member {String} labelntt */nttthis.set( &#39;label&#39;
);nntt/**ntt * The value of the input.ntt *ntt * @observablentt * @member
{String} valuentt */nttthis.set( &#39;value&#39; );nntt/**ntt * Controls
whether the component is in read-only mode.ntt *ntt * @observablentt *
@member {Boolean} isReadOnlyntt */nttthis.set( &#39;isReadOnly&#39;, false
);nntt/**ntt * The label view.ntt *ntt * @member
{module:ui/label/labelview~LabelView} labelViewntt */nttthis.labelView =
this._createLabelView( id );nntt/**ntt * The input view.ntt *ntt * @member
{module:ui/view~View} inputViewntt */nttthis.inputView =
this._createInputView( InputView, id );nnttconst bind =
this.bindTemplate;nnttthis.setTemplate( {nttttag:
&#39;div&#39;,ntttattributes: {nttttclass:
[nttttt&#39;ck&#39;,nttttt&#39;ck-labeled-input&#39;,ntttttbind.if(
&#39;isReadOnly&#39;, &#39;ck-disabled&#39; )ntttt]nttt},ntttchildren:
[nttttthis.labelView,nttttthis.inputViewnttt]ntt} );nt}nnt/**nt * Creates
label view class instance and bind with view.nt *nt * @privatent * @param
{String} id Unique id to set as labelView#for attribute.nt * @returns
{module:ui/label/labelview~LabelView}nt */nt_createLabelView( id )
{nttconst labelView = new LabelView( this.locale );nnttlabelView.for =
id;nttlabelView.bind( &#39;text&#39; ).to( this, &#39;label&#39;
);nnttreturn labelView;nt}nnt/**nt * Creates input view class instance and
bind with view.nt *nt * @privatent * @param {Function} InputView Input view
constructor.nt * @param {String} id Unique id to set as inputView#id
attribute.nt * @returns {module:ui/inputtext/inputtextview~InputTextView}nt
*/nt_createInputView( InputView, id ) {nttconst inputView = new InputView(
this.locale );nnttinputView.id = id;nttinputView.bind( &#39;value&#39;
).to( this );nttinputView.bind( &#39;isReadOnly&#39; ).to( this
);nnttreturn inputView;nt}nnt/**nt * Moves the focus to the input and
selects the value.nt */ntselect() {nttthis.inputView.select();nt}nnt/**nt *
Focuses the input.nt */ntfocus()
{nttthis.inputView.focus();nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-ui/src/labeledinput/labeledinputview.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module ui/bindings/submithandlern */nn/**n * A handler useful
for {@link module:ui/view~View views} working as HTML forms. It intercepts
a native DOMn * `submit` event, prevents the default web browser behavior
(navigation and page reload) andn * fires the `submit` event on a view
instead. Such a custom event can be then used by anyn * {@link
module:utils/dom/emittermixin~Emitter emitter}, e.g. to serialize the form
data.n *n *ttimport submitHandler from
&#39;@ckeditor/ckeditor5-ui/src/bindings/submithandler&#39;;n *n *tt// …n
*n *ttclass AnyFormView extends View {n *tttconstructor() {n *ttttsuper();n
*n *tttt// …n *n *ttttsubmitHandler( {n *tttttview: thisn *tttt} );n *ttt}n
*tt}n *n *tt// …n *n *ttconst view = new AnyFormView();n *n *tt// A sample
listener attached by an emitter working with the view.n *ttthis.listenTo(
view, &#39;submit&#39;, () =&gt; {n *tttsaveTheFormData();n
*ttthideTheForm();n *tt} );n *n * @param {Object} [options] Configuration
options.n * @param {module:ui/view~View} options.view The view which DOM
`submit` events should be handled.n */nexport default function
submitHandler( { view } ) {ntview.listenTo( view.element, &#39;submit&#39;,
( evt, domEvt ) =&gt; {nttdomEvt.preventDefault();nttview.fire(
&#39;submit&#39; );nt}, { useCapture: true } );n}nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-ui/src/bindings/submithandler.jsn// module
id = nulln// module chunks = “,”/**n * @license Copyright © 2003-2018,
CKSource - Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module utils/dom/getpositionedancestorn */nnimport
global from &#39;./global&#39;;nn/**n * For a given element, returns the
nearest ancestor element which CSS position is not "static&quot;.n *n *
@param {HTMLElement} element Native DOM element to be checked.n * @returns
{HTMLElement|null}n */nexport default function getPositionedAncestor(
element ) {ntwhile ( element &amp;&amp; element.tagName.toLowerCase() !=
&#39;html&#39; ) {nttif ( global.window.getComputedStyle( element
).position != &#39;static&#39; ) {ntttreturn element;ntt}nnttelement =
element.parentElement;nt}nntreturn null;n}nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/dom/getpositionedancestor.jsn// module id
= nulln// module chunks = “,”/**n * @license Copyright © 2003-2018,
CKSource - Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module utils/dom/positionn */nnimport global from
&#39;./global&#39;;nimport Rect from &#39;./rect&#39;;nimport
getPositionedAncestor from &#39;./getpositionedancestor&#39;;nimport
getBorderWidths from &#39;./getborderwidths&#39;;nimport isFunction from
&#39;../lib/lodash/isFunction&#39;;nn/**n * Calculates the `position:
absolute` coordinates of a given element so it can be positioned with
respect to then * target in the visually most efficient way, taking various
restrictions like viewport or limiter geometryn * into consideration.n *n
*tt// The element which is to be positioned.n *ttconst element =
document.body.querySelector( &#39;#toolbar&#39; );n *n *tt// A target to
which the element is positioned relatively.n *ttconst target =
document.body.querySelector( &#39;#container&#39; );n *n *tt// Finding the
optimal coordinates for the positioning.n *ttconst { left, top, name } =
getOptimalPosition( {n *tttelement: element,n *ttttarget: target,n *n *
ttt// The algorithm will chose among these positions to meet the
requirements suchn * ttt// as "limiter&quot; element or
"fitInViewport&quot;, set below. The positions are consideredn * ttt// in
the order of the array.n *tttpositions: [n *tttt//n *ttt t//t[ Target ]n
*tttt//t+—————–+n *tttt//t|     Element     |n *tttt//t+—————–+n *tttt//n
*tttttargetRect =&gt; ( {n *ttttttop: targetRect.bottom,n *tttttleft:
targetRect.left,n *tttttname: &#39;mySouthEastPosition&#39;n *tttt} ),n *n
*tttt//n *tttt//t+—————–+n *tttt//t|     Element     |n *tttt//t+—————–+n
*tttt//t[ Target ]n *tttt//n *tttt( targetRect, elementRect ) =&gt; ( {n
*ttttttop: targetRect.top - elementRect.height,n *tttttleft:
targetRect.left,n *tttttname: &#39;myNorthEastPosition&#39;n *tttt} )n
*ttt],n *n *ttt// Find a position such guarantees the element remains
within visible boundaries of &lt;body&gt;.n *tttlimiter: document.body,n *n
*ttt// Find a position such guarantees the element remains within visible
boundaries of the browser viewport.n *tttfitInViewport: truen *tt} );n *n
*tt// The best position which fits into document.body and the viewport. May
be usefuln *tt// to set proper class on the `element`.n *ttconsole.log(
name ); -&gt; "myNorthEastPosition&quot;n *n *tt// Using the absolute
coordinates which has been found to position the elementn *tt// as in the
diagram depicting the "myNorthEastPosition&quot; position.n
*ttelement.style.top = top;n *ttelement.style.left = left;n *n * @param
{module:utils/dom/position~Options} options Positioning options object.n *
@returns {module:utils/dom/position~Position}n */nexport function
getOptimalPosition( { element, target, positions, limiter, fitInViewport }
) {nt// If the {@link module:utils/dom/position~Options#target} is a
function, use what it returns.nt// <a
href="https://github.com/ckeditor/ckeditor5-utils/issues/157\n\tif">github.com/ckeditor/ckeditor5-utils/issues/157ntif</a>
( isFunction( target ) ) {ntttarget = target();nt}nnt// If the {@link
module:utils/dom/position~Options#limiter} is a function, use what it
returns.nt// <a
href="https://github.com/ckeditor/ckeditor5-ui/issues/260\n\tif">github.com/ckeditor/ckeditor5-ui/issues/260ntif</a>
( isFunction( limiter ) ) {nttlimiter = limiter();nt}nntconst
positionedElementAncestor = getPositionedAncestor( element.parentElement
);ntconst elementRect = new Rect( element );ntconst targetRect = new Rect(
target );nntlet bestPosition;ntlet name;nnt// If there are no limits, just
grab the very first position and be done with that drama.ntif ( !limiter
&amp;&amp; !fitInViewport ) {ntt[ name, bestPosition ] = getPosition(
positions[ 0 ], targetRect, elementRect );nt} else {nttconst limiterRect =
limiter &amp;&amp; new Rect( limiter ).getVisible();nttconst viewportRect =
fitInViewport &amp;&amp; new Rect( global.window );nntt[ name, bestPosition
] =ntttgetBestPosition( positions, targetRect, elementRect, limiterRect,
viewportRect ) ||nttt// If there&#39;s no best position found, i.e. when
all intersections have no area becausenttt// rects have no width or height,
then just use the first available position.ntttgetPosition( positions[ 0 ],
targetRect, elementRect );nt}nntlet { left, top } =
getAbsoluteRectCoordinates( bestPosition );nntif (
positionedElementAncestor ) {nttconst ancestorPosition =
getAbsoluteRectCoordinates( new Rect( positionedElementAncestor )
);nttconst ancestorBorderWidths = getBorderWidths(
positionedElementAncestor );nntt// (<a
href="https://github.com/ckeditor/ckeditor5-ui-default/issues/126)\n\t\t">github.com/ckeditor/ckeditor5-ui-default/issues/126)ntt</a>//
If there&#39;s some positioned ancestor of the panel, then its `Rect` must
be taken intontt// consideration. `Rect` is always relative to the viewport
while `position: absolute` worksntt// with respect to that positioned
ancestor.nttleft -= ancestorPosition.left;ntttop -=
ancestorPosition.top;nntt// (<a
href="https://github.com/ckeditor/ckeditor5-utils/issues/139)\n\t\t">github.com/ckeditor/ckeditor5-utils/issues/139)ntt</a>//
If there&#39;s some positioned ancestor of the panel, not only its position
must be taken intontt// consideration (see above) but also its internal
scrolls. Scroll have an impact here because `Rect`ntt// is relative to the
viewport (it doesn&#39;t care about scrolling), while `position:
absolute`ntt// must compensate that scrolling.nttleft +=
positionedElementAncestor.scrollLeft;ntttop +=
positionedElementAncestor.scrollTop;nntt// (<a
href="https://github.com/ckeditor/ckeditor5-utils/issues/139)\n\t\t">github.com/ckeditor/ckeditor5-utils/issues/139)ntt</a>//
If there&#39;s some positioned ancestor of the panel, then its `Rect`
includes its CSS `borderWidth`ntt// while `position: absolute` positioning
does not consider it.ntt// E.g. `{ position: absolute, top: 0, left: 0 }`
means upper left corner of the element,ntt// not upper-left corner of its
border.nttleft -= ancestorBorderWidths.left;ntttop -=
ancestorBorderWidths.top;nt}nntreturn { left, top, name };n}nn// For given
position function, returns a corresponding `Rect` instance.n//n//
@privaten// @param {Function} position A function returning {@link
module:utils/dom/position~Position}.n// @param {utils/dom/rect~Rect}
targetRect A rect of the target.n// @param {utils/dom/rect~Rect}
elementRect A rect of positioned element.n// @returns {Array} An array
containing position name and its Rect.nfunction getPosition( position,
targetRect, elementRect ) {ntconst { left, top, name } = position(
targetRect, elementRect );nntreturn [ name, elementRect.clone().moveTo(
left, top ) ];n}nn// For a given array of positioning functions, returns
such that provides the bestn// fit of the `elementRect` into the
`limiterRect` and `viewportRect`.n//n// @privaten// @param
{module:utils/dom/position~Options#positions} positions Functions
returningn// {@link module:utils/dom/position~Position} to be checked, in
the order of preference.n// @param {utils/dom/rect~Rect} targetRect A rect
of the {@link module:utils/dom/position~Options#target}.n// @param
{utils/dom/rect~Rect} elementRect A rect of positioned {@link
module:utils/dom/position~Options#element}.n// @param {utils/dom/rect~Rect}
limiterRect A rect of the {@link
module:utils/dom/position~Options#limiter}.n// @param {utils/dom/rect~Rect}
viewportRect A rect of the viewport.n// @returns {Array} An array
containing the name of the position and it&#39;s rect.nfunction
getBestPosition( positions, targetRect, elementRect, limiterRect,
viewportRect ) {ntlet maxLimiterIntersectArea = 0;ntlet
maxViewportIntersectArea = 0;ntlet bestPositionRect;ntlet
bestPositionName;nnt// This is when element is fully visible.ntconst
elementRectArea = elementRect.getArea();nntpositions.some( position =&gt;
{nttconst [ positionName, positionRect ] = getPosition( position,
targetRect, elementRect );nttlet limiterIntersectArea;nttlet
viewportIntersectArea;nnttif ( limiterRect ) {ntttif ( viewportRect )
{ntttt// Consider only the part of the limiter which is visible in the
viewport. So the limiter is getting limited.nttttconst
limiterViewportIntersectRect = limiterRect.getIntersection( viewportRect
);nnttttif ( limiterViewportIntersectRect ) {nttttt// If the limiter is
within the viewport, then check the intersection between that part of
thenttttt// limiter and actual position.ntttttlimiterIntersectArea =
limiterViewportIntersectRect.getIntersectionArea( positionRect );ntttt}
else {ntttttlimiterIntersectArea = 0;ntttt}nttt} else
{nttttlimiterIntersectArea = limiterRect.getIntersectionArea( positionRect
);nttt}ntt}nnttif ( viewportRect ) {ntttviewportIntersectArea =
viewportRect.getIntersectionArea( positionRect );ntt}nntt// The only
criterion: intersection with the viewport.nttif ( viewportRect &amp;&amp;
!limiterRect ) {ntttif ( viewportIntersectArea &gt;
maxViewportIntersectArea ) {nttttsetBestPosition();nttt}ntt}ntt// The only
criterion: intersection with the limiter.nttelse if ( !viewportRect
&amp;&amp; limiterRect ) {ntttif ( limiterIntersectArea &gt;
maxLimiterIntersectArea ) {nttttsetBestPosition();nttt}ntt}ntt// Two
criteria: intersection with the viewport and the limiter visible in the
viewport.nttelse {ntttif ( viewportIntersectArea &gt;
maxViewportIntersectArea &amp;&amp; limiterIntersectArea &gt;=
maxLimiterIntersectArea ) {nttttsetBestPosition();nttt} else if (
viewportIntersectArea &gt;= maxViewportIntersectArea &amp;&amp;
limiterIntersectArea &gt; maxLimiterIntersectArea )
{nttttsetBestPosition();nttt}ntt}nnttfunction setBestPosition()
{ntttmaxViewportIntersectArea =
viewportIntersectArea;ntttmaxLimiterIntersectArea =
limiterIntersectArea;ntttbestPositionRect =
positionRect;ntttbestPositionName = positionName;ntt}nntt// If a such
position is found that element is fully container by the limiter then,
obviously,ntt// there will be no better one, so finishing.nttreturn
limiterIntersectArea === elementRectArea;nt} );nntreturn bestPositionRect ?
[ bestPositionName, bestPositionRect ] : null;n}nn// DOMRect (also Rect)
works in a scroll–independent geometry but `position: absolute`
doesn&#39;t.n// This function converts Rect to `position: absolute`
coordinates.n//n// @privaten// @param {utils/dom/rect~Rect} rect A rect to
be converted.n// @returns {Object} <a
href="../../../../Object.html">Object</a> containing `left` and `top`
properties, in absolute coordinates.nfunction getAbsoluteRectCoordinates( {
left, top } ) {ntconst { scrollX, scrollY } = global.window;nntreturn
{nttleft: left + scrollX,ntttop: top + scrollY,nt};n}nn/**n * The
`getOptimalPosition` helper options.n *n * @interface
module:utils/dom/position~Optionsn */nn/**n * Element that is to be
positioned.n *n * @member {HTMLElement} elementn */nn/**n * Target with
respect to which the `element` is to be positioned.n *n * @member
{HTMLElement|Range|ClientRect|Rect|Function} targetn */nn/**n * An array of
functions which return {@link module:utils/dom/position~Position} relativen
* to the `target`, in the order of preference.n *n * @member
{Array.&lt;Function&gt;} positionsn */nn/**n * When set, the algorithm will
chose position which fits the most in then * limiter&#39;s bounding rect.n
*n * @member {HTMLElement|Range|ClientRect|Rect|Function} limitern */nn/**n
* When set, the algorithm will chose such a position which fits `element`n
* the most inside visible viewport.n *n * @member {Boolean} fitInViewportn
*/nn/**n * An object describing a position in `position: absolute`
coordinaten * system, along with position name.n *n * @typedef {Object}
module:utils/dom/position~Positionn *n * @property {Number} top Top
position offset.n * @property {Number} left Left position offset.n *
@property {String} name Name of the position.n */nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-utils/src/dom/position.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module ui/panel/balloon/balloonpanelviewn
*/nnimport View from &#39;../../view&#39;;nimport { getOptimalPosition }
from &#39;@ckeditor/ckeditor5-utils/src/dom/position&#39;;nimport isRange
from &#39;@ckeditor/ckeditor5-utils/src/dom/isrange&#39;;nimport isElement
from &#39;@ckeditor/ckeditor5-utils/src/lib/lodash/isElement&#39;;nimport
toUnit from &#39;@ckeditor/ckeditor5-utils/src/dom/tounit&#39;;nimport
global from &#39;@ckeditor/ckeditor5-utils/src/dom/global&#39;;nnimport
&#39;../../../theme/components/panel/balloonpanel.css&#39;;nnconst toPx =
toUnit( &#39;px&#39; );nconst defaultLimiterElement =
global.document.body;nn/**n * The balloon panel view class.n *n * A
floating container which cann * {@link
module:ui/panel/balloon/balloonpanelview~BalloonPanelView#pin pin} to anyn
* {@link module:utils/dom/position~Options#target target} in DOM and remain
in that positionn * e.g. when the web page is scrolled.n *n * The balloon
panel can be used to display contextual, non-blocking UI like forms,
toolbars andn * the like in its {@link
module:ui/panel/balloon/balloonpanelview~BalloonPanelView#content} viewn *
collection.n *n * There is a number of {@link
module:ui/panel/balloon/balloonpanelview~BalloonPanelView.defaultPositions}n
* that the balloon can use, automatically switching from one to another
when the viewport space becomesn * scarce to keep the balloon visible to
the user as long as it is possible. The balloon will alson * accept any
custom position set provided by the user compatible with then * {@link
module:utils/dom/position~Options options}.n *n *ttconst panel = new
BalloonPanelView( locale );n *ttconst childView = new ChildView();n
*ttconst positions = BalloonPanelView.defaultPositions;n *n
*ttpanel.render();n *n *tt// Add a child view to the panel&#39;s content
collection.n *ttpanel.content.add( childView );n *n *tt// Start pinning the
panel to an element with the "target&quot; id DOM.n *tt// The balloon will
remain pinned until unpin() is called.n *ttpanel.pin( {n *ttttarget:
document.querySelector( &#39;#target&#39; ),n *tttpositions: [n
*ttttpositions.northArrowSouth,n *ttttpositions.southArrowNorthn *ttt]n
*tt} );n *n * @extends module:ui/view~Viewn */nexport default class
BalloonPanelView extends View {nt/**nt * @inheritDocnt */ntconstructor(
locale ) {nttsuper( locale );nnttconst bind = this.bindTemplate;nntt/**ntt
* The absolute top position of the balloon panel in pixels.ntt *ntt *
@observablentt * @default 0ntt * @member {Number} topntt */nttthis.set(
&#39;top&#39;, 0 );nntt/**ntt * The absolute left position of the balloon
panel in pixels.ntt *ntt * @observablentt * @default 0ntt * @member
{Number} leftntt */nttthis.set( &#39;left&#39;, 0 );nntt/**ntt * Balloon
panel&#39;s current position. The position name is reflected in the CSS
class setntt * to the balloon, i.e. `.ck-balloon-panel_arrow_nw` for
"arrow_nw&quot; position. The classntt * controls the minor aspects of the
balloon&#39;s visual appearance like placementntt * of an {@link withArrow
arrow}. To support a new position, an additional CSS must be created.ntt
*ntt * Default position names correspond withntt * {@link
module:ui/panel/balloon/balloonpanelview~BalloonPanelView.defaultPositions}.ntt
*ntt * See the {@link attachTo} and {@link pin} methods to learn about
custom balloon positions.ntt *ntt * @observablentt * @default
&#39;arrow_nw&#39;ntt * @member
{&#39;arrow_nw&#39;|&#39;arrow_ne&#39;|&#39;arrow_sw&#39;|&#39;arrow_se&#39;}
positionntt */nttthis.set( &#39;position&#39;, &#39;arrow_nw&#39;
);nntt/**ntt * Controls whether the balloon panel is visible or not.ntt
*ntt * @observablentt * @default falsentt * @member {Boolean} isVisiblentt
*/nttthis.set( &#39;isVisible&#39;, false );nntt/**ntt * Controls whether
the balloon panel has an arrow. The presence of the arrowntt * is reflected
in `ck-balloon-panel_with-arrow` CSS class.ntt *ntt * @observablentt *
@default truentt * @member {Boolean} withArrowntt */nttthis.set(
&#39;withArrow&#39;, true );nntt/**ntt * An additional CSS class added to
the {@link element}.ntt *ntt * @observablentt * @member {String}
classNamentt */nttthis.set( &#39;className&#39; );nntt/**ntt * A callback
that starts pining the panel when {@link isVisible} getsntt * `true`. Used
by {@link pin}.ntt *ntt * @privatentt * @member {Function}
#_pinWhenIsVisibleCallbackntt */nntt/**ntt * Collection of the child views
which creates balloon panel contents.ntt *ntt * @readonlyntt * @member
{module:ui/viewcollection~ViewCollection}ntt */nttthis.content =
this.createCollection();nnttthis.setTemplate( {nttttag:
&#39;div&#39;,ntttattributes: {nttttclass:
[nttttt&#39;ck&#39;,nttttt&#39;ck-balloon-panel&#39;,ntttttbind.to(
&#39;position&#39;, value =&gt; `ck-balloon-panel_${ value }`
),ntttttbind.if( &#39;isVisible&#39;, &#39;ck-balloon-panel_visible&#39;
),ntttttbind.if( &#39;withArrow&#39;, &#39;ck-balloon-panel_with-arrow&#39;
),ntttttbind.to( &#39;className&#39; )ntttt],nnttttstyle: {nttttttop:
bind.to( &#39;top&#39;, toPx ),ntttttleft: bind.to( &#39;left&#39;, toPx
)ntttt}nttt},nntttchildren: this.contentntt} );nt}nnt/**nt * Shows the
panel.nt *nt * See {@link isVisible}.nt */ntshow() {nttthis.isVisible =
true;nt}nnt/**nt * Hides the panel.nt *nt * See {@link isVisible}.nt
*/nthide() {nttthis.isVisible = false;nt}nnt/**nt * Attaches the panel to a
specified {@link module:utils/dom/position~Options#target} with ant * smart
positioning heuristics that choses from available positions to make sure
the panelnt * is visible to the user i.e. within the limits of the
viewport.nt *nt * This method accepts configuration {@link
module:utils/dom/position~Options options}nt * to set the `target`,
optional `limiter` and `positions` the balloon should chose from.nt *nt
*ttconst panel = new BalloonPanelView( locale );nt *ttconst positions =
BalloonPanelView.defaultPositions;nt *nt *ttpanel.render();nt *nt *tt//
Attach the panel to an element with the "target&quot; id DOM.nt
*ttpanel.attachTo( {nt *ttttarget: document.querySelector(
&#39;#target&#39; ),nt *tttpositions: [nt *ttttpositions.northArrowSouth,nt
*ttttpositions.southArrowNorthnt *ttt]nt *tt} );nt *nt * *Note*: Attaching
the panel will also automatically {@link show} it.nt *nt * *Note*: An
attached panel will not follow its target when the window is scrolled or
resized.nt * See the {@link pin} method for more permanent positioning
strategy.nt *nt * @param {module:utils/dom/position~Options} options
Positioning options compatible withnt * {@link
module:utils/dom/position~getOptimalPosition}. Default `positions` array
isnt * {@link
module:ui/panel/balloon/balloonpanelview~BalloonPanelView.defaultPositions}.nt
*/ntattachTo( options ) {nttthis.show();nnttconst defaultPositions =
BalloonPanelView.defaultPositions;nttconst positionOptions = Object.assign(
{}, {ntttelement: this.element,ntttpositions:
[nttttdefaultPositions.southArrowNorth,nttttdefaultPositions.southArrowNorthWest,nttttdefaultPositions.southArrowNorthEast,nttttdefaultPositions.northArrowSouth,nttttdefaultPositions.northArrowSouthWest,nttttdefaultPositions.northArrowSouthEastnttt],ntttlimiter:
defaultLimiterElement,ntttfitInViewport: truentt}, options );nnttconst {
top, left, name: position } = getOptimalPosition( positionOptions
);nnttObject.assign( this, { top, left, position } );nt}nnt/**nt * Works
the same way as the {@link attachTo} method except that the position of the
panel isnt * continuously updated when:nt *nt * * any ancestor of the
{@link module:utils/dom/position~Options#target}nt * or {@link
module:utils/dom/position~Options#limiter} is scrolled,nt * * the browser
window gets resized or scrolled.nt *nt * Thanks to that, the panel always
sticks to the {@link module:utils/dom/position~Options#target},nt * immune
to the changing environment.nt *nt *ttconst panel = new BalloonPanelView(
locale );nt *ttconst positions = BalloonPanelView.defaultPositions;nt *nt
*ttpanel.render();nt *nt *tt// Pin the panel to an element with the
"target&quot; id DOM.nt *ttpanel.pin( {nt *ttttarget:
document.querySelector( &#39;#target&#39; ),nt *tttpositions: [nt
*ttttpositions.northArrowSouth,nt *ttttpositions.southArrowNorthnt *ttt]nt
*tt} );nt *nt * To leave the pinned state, use the {@link unpin} method.nt
*nt * *Note*: Pinning the panel will also automatically {@link show} it.nt
*nt * @param {module:utils/dom/position~Options} options Positioning
options compatible withnt * {@link
module:utils/dom/position~getOptimalPosition}. Default `positions` array
isnt * {@link
module:ui/panel/balloon/balloonpanelview~BalloonPanelView.defaultPositions}.nt
*/ntpin( options ) {nttthis.unpin();nnttthis._pinWhenIsVisibleCallback = ()
=&gt; {ntttif ( this.isVisible ) {nttttthis._startPinning( options );nttt}
else {nttttthis._stopPinning();nttt}ntt};nnttthis._startPinning( options
);nntt// Control the state of the listeners depending on whether the panel
is visiblentt// or not.ntt// TODO: Use on() (<a
href="https://github.com/ckeditor/ckeditor5-utils/issues/144).\n\t\tthis.listenTo">github.com/ckeditor/ckeditor5-utils/issues/144).nttthis.listenTo</a>(
this, &#39;change:isVisible&#39;, this._pinWhenIsVisibleCallback
);nt}nnt/**nt * Stops pinning the panel, as set up by {@link pin}.nt
*/ntunpin() {nttif ( this._pinWhenIsVisibleCallback ) {nttt// Deactivate
listeners attached by pin().ntttthis._stopPinning();nnttt// Deactivate the
panel pin() control logic.nttt// TODO: Use off() (<a
href="https://github.com/ckeditor/ckeditor5-utils/issues/144).\n\t\t\tthis.stopListening">github.com/ckeditor/ckeditor5-utils/issues/144).ntttthis.stopListening</a>(
this, &#39;change:isVisible&#39;, this._pinWhenIsVisibleCallback
);nntttthis._pinWhenIsVisibleCallback =
null;nntttthis.hide();ntt}nt}nnt/**nt * Starts managing the pinned state of
the panel. See {@link pin}.nt *nt * @privatent * @param
{module:utils/dom/position~Options} options Positioning options compatible
withnt * {@link module:utils/dom/position~getOptimalPosition}.nt
*/nt_startPinning( options ) {nttthis.attachTo( options );nnttconst
targetElement = getDomElement( options.target );nttconst limiterElement =
options.limiter ? getDomElement( options.limiter ) :
defaultLimiterElement;nntt// Then we need to listen on scroll event of eny
element in the document.nttthis.listenTo( global.document,
&#39;scroll&#39;, ( evt, domEvt ) =&gt; {ntttconst scrollTarget =
domEvt.target;nnttt// The position needs to be updated if the positioning
target is within the scrolled element.ntttconst isWithinScrollTarget =
targetElement &amp;&amp; scrollTarget.contains( targetElement );nnttt// The
position needs to be updated if the positioning limiter is within the
scrolled element.ntttconst isLimiterWithinScrollTarget = limiterElement
&amp;&amp; scrollTarget.contains( limiterElement );nnttt// The positioning
target and/or limiter can be a Rect, object etc..nttt// There&#39;s no way
to optimize the listener then.ntttif ( isWithinScrollTarget ||
isLimiterWithinScrollTarget || !targetElement || !limiterElement )
{nttttthis.attachTo( options );nttt}ntt}, { useCapture: true } );nntt// We
need to listen on window resize event and update position.nttthis.listenTo(
global.window, &#39;resize&#39;, () =&gt; {ntttthis.attachTo( options
);ntt} );nt}nnt/**nt * Stops managing the pinned state of the panel. See
{@link pin}.nt *nt * @privatent */nt_stopPinning() {nttthis.stopListening(
global.document, &#39;scroll&#39; );nttthis.stopListening( global.window,
&#39;resize&#39; );nt}n}nn// Returns the DOM element for given object or
null, if there&#39;s none,n// e.g. when passed object is a Rect instance or
so.n//n// @privaten// @param {*} objectn// @returns
{HTMLElement|null}nfunction getDomElement( object ) {ntif ( isElement(
object ) ) {nttreturn object;nt}nntif ( isRange( object ) ) {nttreturn
object.commonAncestorContainer;nt}nntif ( typeof object ==
&#39;function&#39; ) {nttreturn getDomElement( object() );nt}nntreturn
null;n}nn/**n * A horizontal offset of the arrow tip from the edge of the
balloon. Controlled by CSS.n *n *tt +—–|———…n *tt |     |n *tt |     |n *tt
|     |n *tt |     |n *tt <code>--</code>  |  +——…n *tt     \ | /n *tt     
\|/n *t    &gt;|—–|&lt;—————- horizontal offsetn *n * @default 30n *
@member {Number}
module:ui/panel/balloon/balloonpanelview~BalloonPanelView.arrowHorizontalOffsetn
*/nBalloonPanelView.arrowHorizontalOffset = 25;nn/**n * A vertical offset
of the arrow from the edge of the balloon. Controlled by CSS.n *n *tt
+————-…n *tt |n *tt |n *tt |                      /– vertical offsetn *tt |
Vn *tt <code>--</code>    +—–…    ———n *tt     \  /              |n *tt    
\/               |n *tt——————————-n *tt                       ^n *n *
@default 15n * @member {Number}
module:ui/panel/balloon/balloonpanelview~BalloonPanelView.arrowVerticalOffsetn
*/nBalloonPanelView.arrowVerticalOffset = 10;nn/**n * A default set of
positioning functions used by the balloon panel viewn * when attaching
using {@link
module:ui/panel/balloon/balloonpanelview~BalloonPanelView#attachTo}
method.n *n * The available positioning functions are as follow:n *n *
*North*n *n * * `northArrowSouth`n *n * tt+—————–+n * tt|     Balloon    
|n * tt+—————–+n * tt         Vn * tt    [ Target ]n *n * *
`northArrowSouthEast`n *n * tt+—————–+n * tt|     Balloon     |n *
tt+—————–+n * tt               Vn * tt          [ Target ]n *n * *
`northArrowSouthWest`n *n * tt  <code>-----------------</code>n * tt  |    
Balloon     |n * tt  <code>-----------------</code>n * tt     Vn * tt[
Target ]n *n * **North west**n *n * * `northWestArrowSouth`n *n *
tt+—————–+n * tt|     Balloon     |n * tt+—————–+n * tt         Vn * tt    
[ Target ]n *n * * `northWestArrowSouthWest`n *n * tt+—————–+n * tt|    
Balloon     |n * tt+—————–+n * tt   Vn * tt   [ Target ]n *n * *
`northWestArrowSouthEast`n *n * tt+—————–+n * tt|     Balloon     |n *
tt+—————–+n * tt               Vn * tt               [ Target ]n *n *
**North east**n *n * * `northEastArrowSouth`n *n * tt+—————–+n * tt|    
Balloon     |n * tt+—————–+n * tt         Vn * tt[ Target ]n *n * *
`northEastArrowSouthEast`n *n * tt+—————–+n * tt|     Balloon     |n *
tt+—————–+n * tt               Vn * tt      [ Target ]n *n * *
`northEastArrowSouthWest`n *n * tt      <code>-----------------</code>n *
tt      |     Balloon     |n * tt      <code>-----------------</code>n * tt
Vn * tt[ Target ]n *n * *South*n *n * * `southArrowNorth`n *n *tt    [
Target ]n *tt         ^n *tt+—————–+n *tt|     Balloon     |n *tt+—————–+n
*n * * `southArrowNorthEast`n *n *tt          [ Target ]n *tt              
^n *tt+—————–+n *tt|     Balloon     |n *tt+—————–+n *n * *
`southArrowNorthWest`n *n *tt[ Target ]n *tt     ^n *tt  
<code>-----------------</code>n *tt   |     Balloon     |n *tt  
<code>-----------------</code>n *n * **South west**n *n * *
`southWestArrowNorth`n *n *tt         [ Target ]n *tt         ^n
*tt+—————–+n *tt|     Balloon     |n *tt+—————–+n *n * *
`southWestArrowNorthWest`n *n *tt  [ Target ]n *tt  ^n *tt+—————–+n *tt|   
Balloon     |n *tt+—————–+n *n * * `southWestArrowNorthEast`n *n *tt       
[ Target ]n *tt               ^n *tt+—————–+n *tt|     Balloon     |n
*tt+—————–+n *n * **South east**n *n * * `southEastArrowNorth`n *n *tt[
Target ]n *tt         ^n *tt+—————–+n *tt|     Balloon     |n *tt+—————–+n
*n * * `southEastArrowNorthEast`n *n *tt       [ Target ]n *tt             
^n *tt+—————–+n *tt|     Balloon     |n *tt+—————–+n *n * *
`southEastArrowNorthWest`n *n *tt[ Target ]n *tt         ^n *tt      
<code>-----------------</code>n *tt       |     Balloon     |n *tt      
<code>-----------------</code>n *n * See {@link
module:ui/panel/balloon/balloonpanelview~BalloonPanelView#attachTo}.n *n *
Positioning functions must be compatible with {@link
module:utils/dom/position~Position}.n *n * The name that position function
returns will be reflected in balloon panel&#39;s class thatn * controls the
placement of the "arrow&quot;. See {@link position} to learn more.n *n *
@member {Object}
module:ui/panel/balloon/balloonpanelview~BalloonPanelView.defaultPositionsn
*/nBalloonPanelView.defaultPositions = {nt// ——- NorthnntnorthArrowSouth: (
targetRect, balloonRect ) =&gt; ( {ntttop: getNorthTop( targetRect,
balloonRect ),nttleft: targetRect.left + targetRect.width / 2 -
balloonRect.width / 2,nttname: &#39;arrow_s&#39;nt}
),nntnorthArrowSouthEast: ( targetRect, balloonRect ) =&gt; ( {ntttop:
getNorthTop( targetRect, balloonRect ),nttleft: targetRect.left +
targetRect.width / 2 - balloonRect.width +
BalloonPanelView.arrowHorizontalOffset,nttname: &#39;arrow_se&#39;nt}
),nntnorthArrowSouthWest: ( targetRect, balloonRect ) =&gt; ( {ntttop:
getNorthTop( targetRect, balloonRect ),nttleft: targetRect.left +
targetRect.width / 2 - BalloonPanelView.arrowHorizontalOffset,nttname:
&#39;arrow_sw&#39;nt} ),nnt// ——- North westnntnorthWestArrowSouth: (
targetRect, balloonRect ) =&gt; ( {ntttop: getNorthTop( targetRect,
balloonRect ),nttleft: targetRect.left - balloonRect.width / 2,nttname:
&#39;arrow_s&#39;nt} ),nntnorthWestArrowSouthWest: ( targetRect,
balloonRect ) =&gt; ( {ntttop: getNorthTop( targetRect, balloonRect
),nttleft: targetRect.left -
BalloonPanelView.arrowHorizontalOffset,nttname: &#39;arrow_sw&#39;nt}
),nntnorthWestArrowSouthEast: ( targetRect, balloonRect ) =&gt; ( {ntttop:
getNorthTop( targetRect, balloonRect ),nttleft: targetRect.left -
balloonRect.width + BalloonPanelView.arrowHorizontalOffset,nttname:
&#39;arrow_se&#39;nt} ),nnt// ——- North eastnntnorthEastArrowSouth: (
targetRect, balloonRect ) =&gt; ( {ntttop: getNorthTop( targetRect,
balloonRect ),nttleft: targetRect.right - balloonRect.width / 2,nttname:
&#39;arrow_s&#39;nt} ),nntnorthEastArrowSouthEast: ( targetRect,
balloonRect ) =&gt; ( {ntttop: getNorthTop( targetRect, balloonRect
),nttleft: targetRect.right - balloonRect.width +
BalloonPanelView.arrowHorizontalOffset,nttname: &#39;arrow_se&#39;nt}
),nntnorthEastArrowSouthWest: ( targetRect, balloonRect ) =&gt; ( {ntttop:
getNorthTop( targetRect, balloonRect ),nttleft: targetRect.right -
BalloonPanelView.arrowHorizontalOffset,nttname: &#39;arrow_sw&#39;nt}
),nnt// ——- SouthnntsouthArrowNorth: ( targetRect, balloonRect ) =&gt; (
{ntttop: getSouthTop( targetRect, balloonRect ),nttleft: targetRect.left +
targetRect.width / 2 - balloonRect.width / 2,nttname: &#39;arrow_n&#39;nt}
),nntsouthArrowNorthEast: ( targetRect, balloonRect ) =&gt; ( {ntttop:
getSouthTop( targetRect, balloonRect ),nttleft: targetRect.left +
targetRect.width / 2 - balloonRect.width +
BalloonPanelView.arrowHorizontalOffset,nttname: &#39;arrow_ne&#39;nt}
),nntsouthArrowNorthWest: ( targetRect, balloonRect ) =&gt; ( {ntttop:
getSouthTop( targetRect, balloonRect ),nttleft: targetRect.left +
targetRect.width / 2 - BalloonPanelView.arrowHorizontalOffset,nttname:
&#39;arrow_nw&#39;nt} ),nnt// ——- South westnntsouthWestArrowNorth: (
targetRect, balloonRect ) =&gt; ( {ntttop: getSouthTop( targetRect,
balloonRect ),nttleft: targetRect.left - balloonRect.width / 2,nttname:
&#39;arrow_n&#39;nt} ),nntsouthWestArrowNorthWest: ( targetRect,
balloonRect ) =&gt; ( {ntttop: getSouthTop( targetRect, balloonRect
),nttleft: targetRect.left -
BalloonPanelView.arrowHorizontalOffset,nttname: &#39;arrow_nw&#39;nt}
),nntsouthWestArrowNorthEast: ( targetRect, balloonRect ) =&gt; ( {ntttop:
getSouthTop( targetRect, balloonRect ),nttleft: targetRect.left -
balloonRect.width + BalloonPanelView.arrowHorizontalOffset,nttname:
&#39;arrow_ne&#39;nt} ),nnt// ——- South eastnntsouthEastArrowNorth: (
targetRect, balloonRect ) =&gt; ( {ntttop: getSouthTop( targetRect,
balloonRect ),nttleft: targetRect.right - balloonRect.width / 2,nttname:
&#39;arrow_n&#39;nt} ),nntsouthEastArrowNorthEast: ( targetRect,
balloonRect ) =&gt; ( {ntttop: getSouthTop( targetRect, balloonRect
),nttleft: targetRect.right - balloonRect.width +
BalloonPanelView.arrowHorizontalOffset,nttname: &#39;arrow_ne&#39;nt}
),nntsouthEastArrowNorthWest: ( targetRect, balloonRect ) =&gt; ( {ntttop:
getSouthTop( targetRect, balloonRect ),nttleft: targetRect.right -
BalloonPanelView.arrowHorizontalOffset,nttname: &#39;arrow_nw&#39;nt}
),n};nn// Returns the top coordinate for positions starting with
`north*`.n//n// @privaten// @param {utils/dom/rect~Rect} targetRect A rect
of the target.n// @param {utils/dom/rect~Rect} elementRect A rect of the
balloon.n// @returns {Number}nfunction getNorthTop( targetRect, balloonRect
) {ntreturn targetRect.top - balloonRect.height -
BalloonPanelView.arrowVerticalOffset;n}nn// Returns the top coordinate for
positions starting with `south*`.n//n// @privaten// @param
{utils/dom/rect~Rect} targetRect A rect of the target.n// @param
{utils/dom/rect~Rect} elementRect A rect of the balloon.n// @returns
{Number}nfunction getSouthTop( targetRect ) {ntreturn targetRect.bottom +
BalloonPanelView.arrowVerticalOffset;n}nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-ui/src/panel/balloon/balloonpanelview.jsn// module
id = nulln// module chunks = “,”/**n * @license Copyright © 2003-2018,
CKSource - Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module ui/panel/balloon/contextualballoonn
*/nnimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport BalloonPanelView from
&#39;./balloonpanelview&#39;;nimport CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nimport first from
&#39;@ckeditor/ckeditor5-utils/src/first&#39;;nn/**n * Provides the common
contextual balloon panel for the editor.n *n * This plugin allows reusing a
single {module:ui/panel/balloon/balloonpanelview~BalloonPanelView}
instancen * to display multiple contextual balloon panels in the editor.n
*n * Child views of such a panel are stored in the stack and the last one
in the stack is visible. When then * visible view is removed from the
stack, the previous view becomes visible, etc. If there are no moren *
views in the stack, the balloon panel will hide.n *n * It simplifies
managing the views and helpsn * avoid the unnecessary complexity of
handling multiple
{module:ui/panel/balloon/balloonpanelview~BalloonPanelView}n * instances in
the editor.n *n * @extends module:core/plugin~Pluginn */nexport default
class ContextualBalloon extends Plugin {nt/**nt * @inheritDocnt */ntstatic
get pluginName() {nttreturn &#39;ContextualBalloon&#39;;nt}nnt/**nt *
@inheritDocnt */ntinit() {ntt/**ntt * The common balloon panel view.ntt
*ntt * @readonlyntt * @member
{module:ui/panel/balloon/balloonpanelview~BalloonPanelView} viewntt
*/nttthis.view = new BalloonPanelView();nntt/**ntt * The {@link
module:utils/dom/position~Options#limiter position limiter}ntt * for the
{@link view}, used when no `limiter` has been passed into {@link add}ntt *
or {@link updatePosition}.ntt *ntt * By default, a function, which obtains
the farthest DOMntt * {@link
module:engine/view/rooteditableelement~RootEditableElement}ntt * of the
{@link module:engine/view/document~Document#selection}.ntt *ntt * @member
{module:utils/dom/position~Options#limiter} positionLimiterntt
*/nttthis.positionLimiter = () =&gt; {ntttconst view =
this.editor.editing.view;ntttconst viewDocument = view.document;ntttconst
editableElement = viewDocument.selection.editableElement;nntttif (
editableElement ) {nttttreturn view.domConverter.mapViewToDom(
editableElement.root );nttt}nntttreturn null;ntt};nntt/**ntt * Stack of the
views injected into the balloon. Last one in the stack is displayedntt * as
a content of {@link
module:ui/panel/balloon/contextualballoon~ContextualBalloon#view}.ntt *ntt
* @privatentt * @member {Map} #_stackntt */nttthis._stack = new
Map();nntt// Add balloon panel view to editor `body` collection and wait
until view will be ready.nttthis.editor.ui.view.body.add( this.view
);nntt// Editor should be focused when contextual balloon is
focused.nttthis.editor.ui.focusTracker.add( this.view.element );nt}nnt/**nt
* Returns the currently visible view or `null` when there are nont * views
in the stack.nt *nt * @returns {module:ui/view~View|null}nt */ntget
visibleView() {nttconst item = this._stack.get( this.view.content.get( 0 )
);nnttreturn item ? item.view : null;nt}nnt/**nt * Returns `true` when the
given view is in the stack. Otherwise returns `false`.nt *nt * @param
{module:ui/view~View} viewnt * @returns {Boolean}nt */nthasView( view )
{nttreturn this._stack.has( view );nt}nnt/**nt * Adds a new view to the
stack and makes it visible.nt *nt * @param {Object} data Configuration of
the view.nt * @param {module:ui/view~View} [data.view] Content of the
balloon.nt * @param {module:utils/dom/position~Options} [data.position]
Positioning options.nt * @param {String} [data.balloonClassName] Additional
css class for {@link view} added when given view is visible.nt */ntadd(
data ) {nttif ( this.hasView( data.view ) ) {nttt/**nttt * Trying to add
configuration of the same view more than once.nttt *nttt * @error
contextualballoon-add-view-existnttt */ntttthrow new CKEditorError(
&#39;contextualballoon-add-view-exist: Cannot add configuration of the same
view twice.&#39; );ntt}nntt// When adding view to the not empty
balloon.nttif ( this.visibleView ) {nttt// Remove displayed content from
the view.ntttthis.view.content.remove( this.visibleView );ntt}nntt// Add
new view to the stack.nttthis._stack.set( data.view, data );nntt// And
display it.nttthis._show( data );nt}nnt/**nt * Removes the given view from
the stack. If the removed view was visible,nt * then the view preceding it
in the stack will become visible instead.nt * When there is no view in the
stack then balloon will hide.nt *nt * @param {module:ui/view~View} view A
view to be removed from the balloon.nt */ntremove( view ) {nttif (
!this.hasView( view ) ) {nttt/**nttt * Trying to remove configuration of
the view not defined in the stack.nttt *nttt * @error
contextualballoon-remove-view-not-existnttt */ntttthrow new CKEditorError(
&#39;contextualballoon-remove-view-not-exist: Cannot remove configuration
of not existing view.&#39; );ntt}nntt// When visible view is being
removed.nttif ( this.visibleView === view ) {nttt// We need to remove it
from the view content.ntttthis.view.content.remove( view );nnttt// And then
remove from the stack.ntttthis._stack.delete( view );nnttt// Next we need
to check if there is other view in stack to show.ntttconst last =
Array.from( this._stack.values() ).pop();nnttt// If it is some other
view.ntttif ( last ) {ntttt// Just show it.nttttthis._show( last );nttt}
else {ntttt// Hide the balloon panel.nttttthis.view.hide();nttt}ntt} else
{nttt// Just remove given view from the stack.ntttthis._stack.delete( view
);ntt}nt}nnt/**nt * Updates the position of the balloon using position data
of the first visible view in the stack.nt * When new position data is given
then position data of currently visible panel will be updated.nt *nt *
@param {module:utils/dom/position~Options} [position] position options.nt
*/ntupdatePosition( position ) {nttif ( position ) {ntttthis._stack.get(
this.visibleView ).position = position;ntt}nnttthis.view.pin(
this._getBalloonPosition() );nt}nnt/**nt * Sets the view as a content of
the balloon and attaches balloon using positionnt * options of the first
view.nt *nt * @privatent * @param {Object} data Configuration.nt * @param
{module:ui/view~View} [data.view] View to show in the balloon.nt * @param
{String} [data.balloonClassName=&#39;&#39;] Additional class name which
will added to the {#_balloon} view.nt */nt_show( { view, balloonClassName =
&#39;&#39; } ) {nttthis.view.className =
balloonClassName;nnttthis.view.content.add( view );nttthis.view.pin(
this._getBalloonPosition() );nt}nnt/**nt * Returns position options of the
first view in the stack.nt * This keeps the balloon in the same position
when view is changed.nt *nt * @privatent * @returns
{module:utils/dom/position~Options}nt */nt_getBalloonPosition() {nttlet
position = first( this._stack.values() ).position;nntt// Use the default
limiter if none has been specified.nttif ( position &amp;&amp;
!position.limiter ) {nttt// Don&#39;t modify the original options
object.ntttposition = Object.assign( {}, position, {nttttlimiter:
this.positionLimiternttt} );ntt}nnttreturn
position;nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-ui/src/panel/balloon/contextualballoon.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module image/image/ui/utilsn */nnimport
BalloonPanelView from
&#39;@ckeditor/ckeditor5-ui/src/panel/balloon/balloonpanelview&#39;;nimport
{ isImageWidgetSelected } from &#39;../utils&#39;;nn/**n * A helper utility
that positions then * {@link
module:ui/panel/balloon/contextualballoon~ContextualBalloon contextual
balloon} instancen * with respect to the image in the editor content, if
one is selected.n *n * @param {module:core/editor/editor~Editor} editor The
editor instance.n */nexport function repositionContextualBalloon( editor )
{ntconst balloon = editor.plugins.get( &#39;ContextualBalloon&#39; );nntif
( isImageWidgetSelected( editor.editing.view.document.selection ) )
{nttconst position = getBalloonPositionData( editor
);nnttballoon.updatePosition( position );nt}n}nn/**n * Returns the
positioning options that control the geometry of then * {@link
module:ui/panel/balloon/contextualballoon~ContextualBalloon contextual
balloon} with respectn * to the selected element in the editor content.n *n
* @param {module:core/editor/editor~Editor} editor The editor instance.n *
@returns {module:utils/dom/position~Options}n */nexport function
getBalloonPositionData( editor ) {ntconst editingView =
editor.editing.view;ntconst defaultPositions =
BalloonPanelView.defaultPositions;nntreturn {ntttarget:
editingView.domConverter.viewToDom(
editingView.document.selection.getSelectedElement() ),nttpositions:
[ntttdefaultPositions.northArrowSouth,ntttdefaultPositions.northArrowSouthWest,ntttdefaultPositions.northArrowSouthEast,ntttdefaultPositions.southArrowNorth,ntttdefaultPositions.southArrowNorthWest,ntttdefaultPositions.southArrowNorthEastntt]nt};n}nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-image/src/image/ui/utils.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */n/**n * @module
image/imagetextalternative/imagetextalternativeuin */nimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport ButtonView from
&#39;@ckeditor/ckeditor5-ui/src/button/buttonview&#39;;nimport
clickOutsideHandler from
&#39;@ckeditor/ckeditor5-ui/src/bindings/clickoutsidehandler&#39;;nimport
TextAlternativeFormView from &#39;./ui/textalternativeformview&#39;;nimport
ContextualBalloon from
&#39;@ckeditor/ckeditor5-ui/src/panel/balloon/contextualballoon&#39;;nimport
textAlternativeIcon from
&#39;@ckeditor/ckeditor5-core/theme/icons/low-vision.svg&#39;;nimport {n   
repositionContextualBalloon,n    getBalloonPositionDatan} from
&#39;../image/ui/utils&#39;;nimport { isImageWidgetSelected } from
&#39;../image/utils&#39;;n/**n * The image text alternative UI plugin.n *n
* The plugin uses the {@link
module:ui/panel/balloon/contextualballoon~ContextualBalloon}.n *n *
@extends module:core/plugin~Pluginn */nexport default class
ImageTextAlternativeUI extends Plugin {n    /**nt * @inheritDocnt */n   
static get requires() {n        return [ContextualBalloon];n    }n    /**nt
* @inheritDocnt */n    init() {n        this._createButton();n       
this._createForm();n    }n    /**nt * Creates a button showing the balloon
panel for changing the image text alternative andnt * registers it in the
editor {@link module:ui/componentfactory~ComponentFactory
ComponentFactory}.nt *nt * @privatent */n    _createButton() {n       
const editor = this.editor;n        const t = editor.t;n       
editor.ui.componentFactory.add(&#39;imageTextAlternative&#39;, locale =&gt;
{n            const command =
editor.commands.get(&#39;imageTextAlternative&#39;);n            const view
= new ButtonView(locale);n            view.set({n                label:
t(&#39;s&#39;),n                icon: textAlternativeIcon,n               
tooltip: truen            });n           
view.bind(&#39;isEnabled&#39;).to(command, &#39;isEnabled&#39;);n          
this.listenTo(view, &#39;execute&#39;, () =&gt; this._showForm());n        
return view;n        });n    }n    /**nt * Creates the {@link
module:image/imagetextalternative/ui/textalternativeformview~TextAlternativeFormView}nt
* form.nt *nt * @privatent */n    _createForm() {n        const editor =
this.editor;n        const view = editor.editing.view;n        const
viewDocument = view.document;n        /**ntt * The contextual balloon
plugin instance.ntt *ntt * @privatentt * @member
{module:ui/panel/balloon/contextualballoon~ContextualBalloon}ntt */n       
this._balloon = this.editor.plugins.get(&#39;ContextualBalloon&#39;);n     
/**ntt * A form containing a textarea and buttons, used to change the `alt`
text value.ntt *ntt * @member
{module:image/imagetextalternative/ui/textalternativeformview~TextAlternativeFormView}ntt
*/n        this._form = new TextAlternativeFormView(editor.locale);n       
// Render the form so its element is available for clickOutsideHandler.n   
this._form.render();n        this.listenTo(this._form, &#39;submit&#39;, ()
=&gt; {n            editor.execute(&#39;imageTextAlternative&#39;, {
newValue: this._form.labeledInput.inputView.element.value });n           
this._hideForm(true);n        });n        this.listenTo(this._form,
&#39;cancel&#39;, () =&gt; {n            this._hideForm(true);n        });n
// Close the form on Esc key press.n       
this._form.keystrokes.set(&#39;Esc&#39;, (data, cancel) =&gt; {n           
this._hideForm(true);n            cancel();n        });n        //
Reposition the balloon or hide the form if an image widget is no longer
selected.n        this.listenTo(view, &#39;render&#39;, () =&gt; {n        
if (!isImageWidgetSelected(viewDocument.selection)) {n               
this._hideForm(true);n            } else if (this._isVisible) {n           
repositionContextualBalloon(editor);n            }n        });n        //
Close on click outside of balloon panel element.n       
clickOutsideHandler({n            emitter: this._form,n           
activator: () =&gt; this._isVisible,n            contextElements:
[this._form.element],n            callback: () =&gt; this._hideForm()n     
});n    }n    /**nt * Shows the {@link #_form} in the {@link #_balloon}.nt
*nt * @privatent */n    _showForm() {n        if (this._isVisible) {n      
return;n        }n        const editor = this.editor;n        const command
= editor.commands.get(&#39;imageTextAlternative&#39;);n        const
labeledInput = this._form.labeledInput;n        if
(!this._balloon.hasView(this._form)) {n            this._balloon.add({n    
view: this._form,n                position: getBalloonPositionData(editor)n
});n        }n        // Make sure that each time the panel shows up, the
field remains in sync with the value ofn        // the command. If the user
typed in the input, then canceled the balloon (`labeledInput#value`n       
// stays unaltered) and re-opened it without changing the value of the
command, they would see then        // old value instead of the actual
value of the command.n        // <a
href="https://github.com/ckeditor/ckeditor5-image/issues/114\n">github.com/ckeditor/ckeditor5-image/issues/114n</a>
labeledInput.value = labeledInput.inputView.element.value = command.value
|| &#39;&#39;;n        this._form.labeledInput.select();n    }n    /**nt *
Removes the {@link #_form} from the {@link #_balloon}.nt *nt * @param
{Boolean} [focusEditable=false] Controls whether the editing view is
focused afterwards.nt * @privatent */n    _hideForm(focusEditable) {n      
if (!this._isVisible) {n            return;n        }n       
this._balloon.remove(this._form);n        if (focusEditable) {n           
this.editor.editing.view.focus();n        }n    }n    /**nt * Returns
`true` when the {@link #_form} is the visible view in the {@link
#_balloon}.nt *nt * @privatent * @type {Boolean}nt */n    get _isVisible()
{n        return this._balloon.visibleView == this._form;n   
}n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-image/src/imagetextalternative/imagetextalternativeui.jsn//
module id = nulln// module chunks = “,”/**n * @license Copyright ©
2003-2018, CKSource - Frederico Knabben. All rights reserved.n * For
licensing, see LICENSE.md.n */nn/**n * @module upload/utilsn */nnimport
ModelPosition from
&#39;@ckeditor/ckeditor5-engine/src/model/position&#39;;nn/**n * Checks if
a given file is an image.n *n * @param {File} filen * @returns {Boolean}n
*/nexport function isImageType( file ) {ntconst types =
/^image\/(jpeg|png|gif|bmp)$/;nntreturn types.test( file.type );n}nn/**n *
Returns a model position which is optimal (in terms of UX) for inserting an
image.n *n * For instance, if a selection is in the middle of a paragraph,
the position before this paragraphn * will be returned so that it is not
split. If the selection is at the end of a paragraph,n * the position after
this paragraph will be returned.n *n * Note: If the selection is placed in
an empty block, that block will be returned. If that positionn * is then
passed to {@link module:engine/model/model~Model#insertContent},n * the
block will be fully replaced by the image.n *n * @param
{module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection}
selectionn * The selection based on which the insertion position should be
calculated.n * @returns {module:engine/model/position~Position} The optimal
position.n */nexport function findOptimalInsertionPosition( selection )
{ntconst selectedElement = selection.getSelectedElement();nntif (
selectedElement ) {nttreturn ModelPosition.createAfter( selectedElement
);nt}nntconst firstBlock = selection.getSelectedBlocks().next().value;nntif
( firstBlock ) {ntt// If inserting into an empty block – return position in
that block. It will getntt// replaced with the image by insertContent().
#42.nttif ( firstBlock.isEmpty ) {ntttreturn ModelPosition.createAt(
firstBlock );ntt}nnttconst positionAfter = ModelPosition.createAfter(
firstBlock );nntt// If selection is at the end of the block - return
position after the block.nttif ( selection.focus.isTouching( positionAfter
) ) {ntttreturn positionAfter;ntt}nntt// Otherwise return position before
the block.nttreturn ModelPosition.createBefore( firstBlock );nt}nntreturn
selection.focus;n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-image/src/imageupload/utils.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */n/**n *
@module image/imageupload/imageuploaduin */nimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport FileDialogButtonView
from
&#39;@ckeditor/ckeditor5-upload/src/ui/filedialogbuttonview&#39;;nimport
imageIcon from
&#39;@ckeditor/ckeditor5-core/theme/icons/image.svg&#39;;nimport {n   
isImageType,n    findOptimalInsertionPositionn} from
&#39;./utils&#39;;n/**n * The image upload button plugin.n * Adds the
`imageUpload` button to the {@link
module:ui/componentfactory~ComponentFactory UI component factory}.n *n *
@extends module:core/plugin~Pluginn */nexport default class ImageUploadUI
extends Plugin {n    /**nt * @inheritDocnt */n    init() {n        const
editor = this.editor;n        const t = editor.t;n        // Setup
`imageUpload` button.n       
editor.ui.componentFactory.add(&#39;imageUpload&#39;, locale =&gt; {n      
const view = new FileDialogButtonView(locale);n            const command =
editor.commands.get(&#39;imageUpload&#39;);n            view.set({n        
acceptedType: &#39;image/*&#39;,n                allowMultipleFiles: truen 
});n            view.buttonView.set({n                label:
t(&#39;l&#39;),n                icon: imageIcon,n                tooltip:
truen            });n           
view.buttonView.bind(&#39;isEnabled&#39;).to(command);n           
view.on(&#39;done&#39;, (evt, files) =&gt; {n                for (const
file of Array.from(files)) {n                    const insertAt =
findOptimalInsertionPosition(editor.model.document.selection);n            
if (isImageType(file)) {n                       
editor.execute(&#39;imageUpload&#39;, {n                            file,n 
insertAtn                        });n                    }n               
}n            });n            return view;n        });n   
}n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-image/src/imageupload/imageuploadui.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module image/imageupload/imageuploadprogressn */nnimport Plugin
from &#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport FileRepository
from &#39;@ckeditor/ckeditor5-upload/src/filerepository&#39;;nimport
uploadingPlaceholder from
&#39;../../theme/icons/image_placeholder.svg&#39;;nimport ViewPosition from
&#39;@ckeditor/ckeditor5-engine/src/view/position&#39;;nimport ViewRange
from &#39;@ckeditor/ckeditor5-engine/src/view/range&#39;;nnimport
&#39;../../theme/imageuploadprogress.css&#39;;nn/**n * The image upload
progress plugin.n * It shows a placeholder when the image is read from the
disk and a progress bar while the image is uploading.n *n * @extends
module:core/plugin~Pluginn */nexport default class ImageUploadProgress
extends Plugin {nt/**nt * @inheritDocnt */ntconstructor( editor )
{nttsuper( editor );nntt/**ntt * The image placeholder that is displayed
before real image data can be accessed.ntt *ntt * @protectedntt * @member
{String} placeholderntt */nttthis.placeholder =
&#39;data:image/svg+xml;utf8,&#39; + encodeURIComponent(
uploadingPlaceholder );nt}nnt/**nt * @inheritDocnt */ntinit() {nttconst
editor = this.editor;nntt// Upload status change - update image&#39;s view
according to that status.ntteditor.editing.downcastDispatcher.on(
&#39;attribute:uploadStatus:image&#39;, ( …args ) =&gt;
this.uploadStatusChange( …args ) );nt}nnt/**nt * This method is called each
time the image `uploadStatus` attribute is changed.nt *nt * @param
{module:utils/eventinfo~EventInfo} evt An object containing information
about the fired event.nt * @param {Object} data Additional information
about the change.nt * @param
{module:engine/conversion/modelconsumable~ModelConsumable} consumable
Values to consume.nt * @param {Object} conversionApint
*/ntuploadStatusChange( evt, data, conversionApi ) {nttconst editor =
this.editor;nttconst modelImage = data.item;nttconst uploadId =
modelImage.getAttribute( &#39;uploadId&#39; );nnttif (
!conversionApi.consumable.consume( data.item, evt.name ) )
{ntttreturn;ntt}nnttconst fileRepository = editor.plugins.get(
FileRepository );nttconst status = uploadId ? data.attributeNewValue :
null;nttconst placeholder = this.placeholder;nttconst viewFigure =
editor.editing.mapper.toViewElement( modelImage );nttconst viewWriter =
conversionApi.writer;nnttif ( status == &#39;reading&#39; ) {nttt// Start
"appearing&quot; effect and show placeholder with infinite progress bar on
the topnttt// while image is read from disk.nttt_startAppearEffect(
viewFigure, viewWriter );nttt_showPlaceholder( placeholder, viewFigure,
viewWriter );nntttreturn;ntt}nntt// Show progress bar on the top of the
image when image is uploading.nttif ( status == &#39;uploading&#39; )
{ntttconst loader = fileRepository.loaders.get( uploadId );nnttt// Start
appear effect if needed - see <a
href="https://github.com/ckeditor/ckeditor5-image/issues/191.\n\t\t\t_startAppearEffect">github.com/ckeditor/ckeditor5-image/issues/191.nttt_startAppearEffect</a>(
viewFigure, viewWriter );nntttif ( !loader ) {ntttt// There is no loader
associated with uploadId - this means that image came from external
changes.ntttt// In such cases we still want to show the placeholder until
image is fully uploaded.ntttt// Show placeholder if needed - see <a
href="https://github.com/ckeditor/ckeditor5-image/issues/191.\n\t\t\t\t_showPlaceholder">github.com/ckeditor/ckeditor5-image/issues/191.ntttt_showPlaceholder</a>(
placeholder, viewFigure, viewWriter );nttt} else {ntttt// Hide placeholder
and initialize progress bar showing upload progress.ntttt_hidePlaceholder(
viewFigure, viewWriter );ntttt_showProgressBar( viewFigure, viewWriter,
loader, editor.editing.view );nttt}nntttreturn;ntt}nntt// Clean
up.ntt_hideProgressBar( viewFigure, viewWriter );ntt_hidePlaceholder(
viewFigure, viewWriter );ntt_stopAppearEffect( viewFigure, viewWriter
);nt}n}nn// Symbol added to progress bar UIElement to distinguish it from
other elements.nconst progressBarSymbol = Symbol( &#39;progress-bar&#39;
);nn// Adds ck-appear class to the image figure if one is not already
applied.n//n// @param
{module:engine/view/containerelement~ContainerElement} viewFiguren// @param
{module:engine/view/writer~Writer} writernfunction _startAppearEffect(
viewFigure, writer ) {ntif ( !viewFigure.hasClass( &#39;ck-appear&#39; ) )
{nttwriter.addClass( &#39;ck-appear&#39;, viewFigure );nt}n}nn// Removes
ck-appear class to the image figure if one is not already removed.n//n//
@param {module:engine/view/containerelement~ContainerElement} viewFiguren//
@param {module:engine/view/writer~Writer} writernfunction
_stopAppearEffect( viewFigure, writer ) {ntwriter.removeClass(
&#39;ck-appear&#39;, viewFigure );n}nn// Shows placeholder together with
infinite progress bar on given image figure.n//n// @param
{module:engine/view/containerelement~ContainerElement} viewFiguren// @param
{module:engine/view/writer~Writer} writernfunction _showPlaceholder(
placeholder, viewFigure, writer ) {ntif ( !viewFigure.hasClass(
&#39;ck-image-upload-placeholder&#39; ) ) {nttwriter.addClass(
&#39;ck-image-upload-placeholder&#39;, viewFigure );nt}nntif (
!viewFigure.hasClass( &#39;ck-infinite-progress&#39; ) )
{nttwriter.addClass( &#39;ck-infinite-progress&#39;, viewFigure
);nt}nntconst viewImg = viewFigure.getChild( 0 );nntif (
viewImg.getAttribute( &#39;src&#39; ) !== placeholder )
{nttwriter.setAttribute( &#39;src&#39;, placeholder, viewImg );nt}n}nn//
Removes placeholder together with infinite progress bar on given image
figure.n//n// @param {module:engine/view/containerelement~ContainerElement}
viewFiguren// @param {module:engine/view/writer~Writer} writernfunction
_hidePlaceholder( viewFigure, writer ) {ntif ( viewFigure.hasClass(
&#39;ck-image-upload-placeholder&#39; ) ) {nttwriter.removeClass(
&#39;ck-image-upload-placeholder&#39;, viewFigure );nt}nntif (
viewFigure.hasClass( &#39;ck-infinite-progress&#39; ) )
{nttwriter.removeClass( &#39;ck-infinite-progress&#39;, viewFigure
);nt}n}nn// Shows progress bar displaying upload progress.n// Attaches it
to the file loader to update when upload percentace is changed.n//n//
@param {module:engine/view/containerelement~ContainerElement} viewFiguren//
@param {module:engine/view/writer~Writer} writern// @param
{module:upload/filerepository~FileLoader} loadern// @param
{module:engine/view/view~View} viewnfunction _showProgressBar( viewFigure,
writer, loader, view ) {ntconst progressBar = createProgressBar( writer
);ntwriter.insert( ViewPosition.createAt( viewFigure, &#39;end&#39; ),
progressBar );nnt// Update progress bar width when uploadedPercent is
changed.ntloader.on( &#39;change:uploadedPercent&#39;, ( evt, name, value )
=&gt; {nttview.change( writer =&gt; {ntttwriter.setStyle( &#39;width&#39;,
value + &#39;%&#39;, progressBar );ntt} );nt} );n}nn// Hides upload
progress bar.n//n// @param
{module:engine/view/containerelement~ContainerElement} viewFiguren// @param
{module:engine/view/writer~Writer} writernfunction _hideProgressBar(
viewFigure, writer ) {ntconst progressBar = getProgressBar( viewFigure
);nntif ( progressBar ) {nttwriter.remove( ViewRange.createOn( progressBar
) );nt}n}nn// Create progress bar element using {@link
module:engine/view/uielement~UIElement}.n//n// @privaten// @param
{module:engine/view/writer~Writer} writern// @returns
{module:engine/view/uielement~UIElement}nfunction createProgressBar( writer
) {ntconst progressBar = writer.createUIElement( &#39;div&#39;, { class:
&#39;ck-progress-bar&#39; } );ntwriter.setCustomProperty(
progressBarSymbol, true, progressBar );nntreturn progressBar;n}nn// Returns
progress bar {@link module:engine/view/uielement~UIElement} from image
figure element. Returns `undefined` ifn// progress bar element is not
found.n//n// @privaten// @param {module:engine/view/element~Element}
imageFiguren// @returns
{module:engine/view/uielement~UIElement|undefined}nfunction getProgressBar(
imageFigure ) {ntfor ( const child of imageFigure.getChildren() ) {nttif (
child.getCustomProperty( progressBarSymbol ) ) {ntttreturn
child;ntt}nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-image/src/imageupload/imageuploadprogress.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nnimport ModelElement from
&#39;@ckeditor/ckeditor5-engine/src/model/element&#39;;nimport ModelRange
from &#39;@ckeditor/ckeditor5-engine/src/model/range&#39;;nimport
ModelSelection from
&#39;@ckeditor/ckeditor5-engine/src/model/selection&#39;;nimport
FileRepository from
&#39;@ckeditor/ckeditor5-upload/src/filerepository&#39;;nimport Command
from &#39;@ckeditor/ckeditor5-core/src/command&#39;;nn/**n * @module
image/imageupload/imageuploadcommandn */nn/**n * Image upload command.n *n
* @extends module:core/command~Commandn */nexport default class
ImageUploadCommand extends Command {nt/**nt * Executes the command.nt *nt *
@fires executent * @param {Object} options Options for the executed
command.nt * @param {File} options.file The image file to upload.nt *
@param {module:engine/model/position~Position} [options.insertAt] The
position at which the image should be inserted.nt * If the position is not
specified, the image will be inserted into the current selection.nt * Note:
You can use the {@link module:upload/utils~findOptimalInsertionPosition}
function to calculatent * (e.g. based on the current selection) a position
which is more optimal from the UX perspective.nt */ntexecute( options )
{nttconst editor = this.editor;nttconst doc =
editor.model.document;nttconst file = options.file;nttconst fileRepository
= editor.plugins.get( FileRepository );nntteditor.model.change( writer
=&gt; {ntttconst loader = fileRepository.createLoader( file );nnttt// Do
not throw when upload adapter is not set. FileRepository will log an error
anyway.ntttif ( !loader ) {nttttreturn;nttt}nntttconst imageElement = new
ModelElement( &#39;image&#39;, {nttttuploadId: loader.idnttt} );nntttlet
insertAtSelection;nntttif ( options.insertAt ) {nttttinsertAtSelection =
new ModelSelection( [ new ModelRange( options.insertAt ) ] );nttt} else
{nttttinsertAtSelection =
doc.selection;nttt}nnttteditor.model.insertContent( imageElement,
insertAtSelection );nnttt// Inserting an image might&#39;ve failed due to
schema regulations.ntttif ( imageElement.parent )
{nttttwriter.setSelection( ModelRange.createOn( imageElement ) );nttt}ntt}
);nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-image/src/imageupload/imageuploadcommand.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */n/**n * @module image/imageupload/imageuploadeditingn
*/nimport Plugin from &#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport
FileRepository from
&#39;@ckeditor/ckeditor5-upload/src/filerepository&#39;;nimport
ImageUploadCommand from
&#39;../../src/imageupload/imageuploadcommand&#39;;nimport Notification
from &#39;@ckeditor/ckeditor5-ui/src/notification/notification&#39;;nimport
ModelSelection from
&#39;@ckeditor/ckeditor5-engine/src/model/selection&#39;;nimport {n   
isImageType,n    findOptimalInsertionPositionn} from
&#39;../../src/imageupload/utils&#39;;n/**n * Image upload editing plugin.n
*n * @extends module:core/plugin~Pluginn */nexport default class
ImageUploadEditing extends Plugin {n    /**nt * @inheritDocnt */n    static
get requires() {n        return [n            FileRepository,n           
Notificationn        ];n    }n    /**nt * @inheritDocnt */n    init() {n   
const editor = this.editor;n        const doc = editor.model.document;n    
const schema = editor.model.schema;n        const fileRepository =
editor.plugins.get(FileRepository);n        // Setup schema to allow
uploadId and uploadStatus for images.n       
schema.extend(&#39;image&#39;, {n            allowAttributes: [n           
&#39;uploadId&#39;,n                &#39;uploadStatus&#39;n            ]n  
});n        // Register imageUpload command.n       
editor.commands.add(&#39;imageUpload&#39;, new
ImageUploadCommand(editor));n        // Execute imageUpload command when
image is dropped or pasted.n       
editor.editing.view.document.on(&#39;clipboardInput&#39;, (evt, data) =&gt;
{n            // Skip if non empty HTML data is included.n            // <a
href="https://github.com/ckeditor/ckeditor5-upload/issues/68\n">github.com/ckeditor/ckeditor5-upload/issues/68n</a>
if (isHtmlIncluded(data.dataTransfer)) {n                return;n          
}n            let targetModelSelection = new
ModelSelection(data.targetRanges.map(viewRange =&gt;
editor.editing.mapper.toModelRange(viewRange)));n            for (const
file of data.dataTransfer.files) {n                const insertAt =
findOptimalInsertionPosition(targetModelSelection);n                if
(isImageType(file)) {n                   
editor.execute(&#39;imageUpload&#39;, {n                        file,n     
insertAtn                    });n                    evt.stop();n          
}n                // Use target ranges only for the first image. Then, use
that image positionn                // so we keep adding the next ones
after the previous one.n                targetModelSelection =
doc.selection;n            }n        });n        // Prevents from browser
redirecting to the dropped image.n       
editor.editing.view.document.on(&#39;dragover&#39;, (evt, data) =&gt; {n   
data.preventDefault();n        });n        doc.on(&#39;change&#39;, ()
=&gt; {n            const changes = doc.differ.getChanges({
includeChangesInGraveyard: true });n            for (const entry of
changes) {n                if (entry.type == &#39;insert&#39; &amp;&amp;
entry.name == &#39;image&#39;) {n                    const item =
entry.position.nodeAfter;n                    const isInGraveyard =
entry.position.root.rootName == &#39;$graveyard&#39;;n                   
// Check if the image element still has upload id.n                   
const uploadId = item.getAttribute(&#39;uploadId&#39;);n                   
if (!uploadId) {n                        continue;n                    }n  
// Check if the image is loaded on this client.n                    const
loader = fileRepository.loaders.get(uploadId);n                    if
(!loader) {n                        continue;n                    }n       
if (isInGraveyard) {n                        // If the image was inserted
to the graveyard - abort the loading process.n                       
loader.abort();n                    } else if (loader.status ==
&#39;idle&#39;) {n                        // If the image was inserted into
content and has not been loaded, start loading it.n                       
this._load(loader, item);n                    }n                }n         
}n        });n    }n    /**nt * Performs image loading. The image is read
from the disk and temporary data is displayed. When the upload processnt *
is complete the temporary data is replaced with the target image from the
server.nt *nt * @privatent * @param
{module:upload/filerepository~FileLoader} loadernt * @param
{module:engine/model/element~Element} imageElementnt * @returns {Promise}nt
*/n    _load(loader, imageElement) {n        const editor = this.editor;n  
const model = editor.model;n        const t = editor.locale.t;n       
const fileRepository = editor.plugins.get(FileRepository);n        const
notification = editor.plugins.get(Notification);n       
model.enqueueChange(&#39;transparent&#39;, writer =&gt; {n           
writer.setAttribute(&#39;uploadStatus&#39;, &#39;reading&#39;,
imageElement);n        });n        return loader.read().then(data =&gt; {n 
const viewFigure = editor.editing.mapper.toViewElement(imageElement);n     
const viewImg = viewFigure.getChild(0);n            const promise =
loader.upload();n            editor.editing.view.change(writer =&gt; {n    
writer.setAttribute(&#39;src&#39;, data, viewImg);n            });n        
model.enqueueChange(&#39;transparent&#39;, writer =&gt; {n               
writer.setAttribute(&#39;uploadStatus&#39;, &#39;uploading&#39;,
imageElement);n            });n            return promise;n       
}).then(data =&gt; {n            model.enqueueChange(&#39;transparent&#39;,
writer =&gt; {n                writer.setAttributes({n                   
uploadStatus: &#39;complete&#39;,n                    src: data.defaultn   
}, imageElement);n                // Srcset attribute for responsive images
support.n                let maxWidth = 0;n                const
srcsetAttribute = Object.keys(data)    // Filter out keys that are not
integers.n.filter(key =&gt; {n                    const width =
parseInt(key, 10);n                    if (!isNaN(width)) {n               
maxWidth = Math.max(maxWidth, width);n                        return true;n
}n                })    // Convert each key to srcset entry.n.map(key =&gt;
`${ <a href="key">data</a> } ${ key }w`)    // Join all
entries.n.join(&#39;, &#39;);n                if (srcsetAttribute !=
&#39;&#39;) {n                    writer.setAttribute(&#39;srcset&#39;, {n 
data: srcsetAttribute,n                        width: maxWidthn            
}, imageElement);n                }n            });n            clean();n  
}).catch(error =&gt; {n            // If status is not &#39;error&#39; nor
&#39;aborted&#39; - throw error because it means that something else went
wrong,n            // it might be generic error and it would be real pain
to find what is going on.n            if (loader.status !== &#39;error&#39;
&amp;&amp; loader.status !== &#39;aborted&#39;) {n                throw
error;n            }n            // Might be &#39;aborted&#39;.n           
if (loader.status == &#39;error&#39;) {n               
notification.showWarning(error, {n                    title:
t(&#39;n&#39;),n                    namespace: &#39;upload&#39;n           
});n            }n            clean();n            // Permanently remove
image from insertion batch.n           
model.enqueueChange(&#39;transparent&#39;, writer =&gt; {n               
writer.remove(imageElement);n            });n        });n        function
clean() {n            model.enqueueChange(&#39;transparent&#39;, writer
=&gt; {n                writer.removeAttribute(&#39;uploadId&#39;,
imageElement);n               
writer.removeAttribute(&#39;uploadStatus&#39;, imageElement);n           
});n            fileRepository.destroyLoader(loader);n        }n    }n}n//
Returns `true` if non-empty `text/html` is included in the data
transfer.n//n// @param {module:clipboard/datatransfer~DataTransfer}
dataTransfern// @returns {Boolean}nexport function
isHtmlIncluded(dataTransfer) {n    return
Array.from(dataTransfer.types).includes(&#39;text/html&#39;) &amp;&amp;
dataTransfer.getData(&#39;text/html&#39;) !==
&#39;&#39;;n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-image/src/imageupload/imageuploadediting.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module image/imageuploadn */nnimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport ImageUploadUI from
&#39;./imageupload/imageuploadui&#39;;nimport ImageUploadProgress from
&#39;./imageupload/imageuploadprogress&#39;;nimport ImageUploadEditing from
&#39;./imageupload/imageuploadediting&#39;;nn/**n * The image upload
plugin.n *n * This plugin does not do anything directly, but it loads a set
of specific plugins to enable image uploading:n * * {@link
module:image/imageupload/imageuploadediting~ImageUploadEditing},n * *
{@link module:image/imageupload/imageuploadui~ImageUploadUI},n * * {@link
module:image/imageupload/imageuploadprogress~ImageUploadProgress}.n *n *
For a detailed overview, check the {@glink features/image-upload image
upload feature} documentation.n *n * @extends module:core/plugin~Pluginn
*/nexport default class ImageUpload extends Plugin {nt/**nt * @inheritDocnt
*/ntstatic get pluginName() {nttreturn &#39;ImageUpload&#39;;nt}nnt/**nt *
@inheritDocnt */ntstatic get requires() {nttreturn [ ImageUploadEditing,
ImageUploadUI, ImageUploadProgress ];nt}n}nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-image/src/imageupload.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module paragraph/paragraphcommandn */nnimport Command from
&#39;@ckeditor/ckeditor5-core/src/command&#39;;nimport first from
&#39;@ckeditor/ckeditor5-utils/src/first&#39;;nn/**n * The paragraph
command.n *n * @extends module:core/command~Commandn */nexport default
class ParagraphCommand extends Command {nt/**nt * The value of the command.
Indicates whether the selection start is placed in a paragraph.nt *nt *
@readonlynt * @observablent * @member {Boolean} valuent */nnt/**nt *
@inheritDocnt */ntrefresh() {nttconst model = this.editor.model;nttconst
document = model.document;nttconst block = first(
document.selection.getSelectedBlocks() );nnttthis.value = !!block
&amp;&amp; block.is( &#39;paragraph&#39; );nttthis.isEnabled = !!block
&amp;&amp; checkCanBecomeParagraph( block, model.schema );nt}nnt/**nt *
Executes the command. All the blocks (see {@link
module:engine/model/schema~Schema}) in the selectionnt * will be turned to
paragraphs.nt *nt * @fires executent * @param {Object} [options] Options
for the executed command.nt * @param
{module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection}
[options.selection]nt * The selection that the command should be applied
to.nt * By default, if not provided, the command is applied to the {@link
module:engine/model/document~Document#selection}.nt */ntexecute( options =
{} ) {nttconst model = this.editor.model;nttconst document =
model.document;nnttmodel.change( writer =&gt; {ntttconst blocks = (
options.selection || document.selection ).getSelectedBlocks();nntttfor (
const block of blocks ) {nttttif ( !block.is( &#39;paragraph&#39; )
&amp;&amp; checkCanBecomeParagraph( block, model.schema ) )
{ntttttwriter.rename( block, &#39;paragraph&#39; );ntttt}nttt}ntt}
);nt}n}nn// Checks whether the given block can be replaced by a
paragraph.n//n// @privaten// @param {module:engine/model/element~Element}
block A block to be tested.n// @param {module:engine/model/schema~Schema}
schema The schema of the document.n// @returns {Boolean}nfunction
checkCanBecomeParagraph( block, schema ) {ntreturn schema.checkChild(
block.parent, &#39;paragraph&#39; ) &amp;&amp; !schema.isObject( block
);n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-paragraph/src/paragraphcommand.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module paragraph/paragraphn */nnimport ParagraphCommand from
&#39;./paragraphcommand&#39;;nnimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport { SchemaContext }
from &#39;@ckeditor/ckeditor5-engine/src/model/schema&#39;;nimport Position
from &#39;@ckeditor/ckeditor5-engine/src/model/position&#39;;nimport Range
from &#39;@ckeditor/ckeditor5-engine/src/model/range&#39;;nn/**n * The
paragraph feature for the editor.n * It introduces the `&lt;paragraph&gt;`
element in the model which renders as a `&lt;p&gt;` element in the DOM and
data.n *n * @extends module:core/plugin~Pluginn */nexport default class
Paragraph extends Plugin {nt/**nt * @inheritDocnt */ntstatic get
pluginName() {nttreturn &#39;Paragraph&#39;;nt}nnt/**nt * @inheritDocnt
*/ntinit() {nttconst editor = this.editor;nttconst model =
editor.model;nttconst data = editor.data;nntteditor.commands.add(
&#39;paragraph&#39;, new ParagraphCommand( editor ) );nntt//
Schema.nttmodel.schema.register( &#39;paragraph&#39;, { inheritAllFrom:
&#39;$block&#39; } );nntteditor.conversion.elementToElement( { model:
&#39;paragraph&#39;, view: &#39;p&#39; } );nntt// Content autoparagraphing.
————————————————–nntt// Handles elements not converted by plugins and
checks if would be converted ifntt// we wraps them by a paragraph or
changes them to a paragraph.nttdata.upcastDispatcher.on( &#39;element&#39;,
( evt, data, conversionApi ) =&gt; {nttt// When element is already consumed
by higher priority converters then do nothing.ntttif (
!conversionApi.consumable.test( data.viewItem, { name: data.viewItem.name }
) ) {nttttreturn;nttt}nnttt// When element is paragraph-like lets try to
change it into a paragraph.ntttif ( Paragraph.paragraphLikeElements.has(
data.viewItem.name ) ) {nttttif ( data.viewItem.isEmpty )
{ntttttreturn;ntttt}nnttttconst paragraph =
conversionApi.writer.createElement( &#39;paragraph&#39; );nntttt// Find
allowed parent for paragraph that we are going to insert.ntttt// If current
parent does not allow to insert paragraph but one of the ancestors
doesntttt// then split nodes to allowed parent.nttttconst splitResult =
conversionApi.splitToAllowedParent( paragraph, data.modelCursor );nntttt//
When there is no split result it means that we can&#39;t insert paragraph
in this position.nttttif ( !splitResult ) {ntttttreturn;ntttt}nntttt//
Insert paragraph in allowed position.nttttconversionApi.writer.insert(
paragraph, splitResult.position );nntttt// Convert children to
paragraph.nttttconst { modelRange } = conversionApi.convertChildren(
data.viewItem, Position.createAt( paragraph ) );nntttt// Output range
starts before paragraph but ends inside it after last child.ntttt// This is
because we want to keep siblings inside the same paragraph as long as it is
possible.ntttt// When next node won&#39;t be allowed in a paragraph it will
split this paragraph anyway.nttttdata.modelRange = new Range(
Position.createBefore( paragraph ), modelRange.end );nttttdata.modelCursor
= data.modelRange.end;nnttt// When element is not paragraph-like lets try
to wrap it by a paragraph.nttt} else if ( isParagraphable( data.viewItem,
data.modelCursor, conversionApi.schema ) ) {nttttdata = Object.assign(
data, wrapInParagraph( data.viewItem, data.modelCursor, conversionApi )
);nttt}ntt}, { priority: &#39;low&#39; } );nntt// Handles not converted
text nodes and checks if would be converted if we wraps then by a
paragraph.nttdata.upcastDispatcher.on( &#39;text&#39;, ( evt, data,
conversionApi ) =&gt; {nttt// When node is already converted then do
nothing.ntttif ( data.modelRange ) {nttttreturn;nttt}nntttif (
isParagraphable( data.viewItem, data.modelCursor, conversionApi.schema ) )
{nttttdata = Object.assign( data, wrapInParagraph( data.viewItem,
data.modelCursor, conversionApi ) );nttt}ntt}, { priority: &#39;lowest&#39;
} );nntt// Empty roots autoparagraphing. ———————————————–nntt// Post-fixer
which takes care of adding empty paragraph elements to empty roots.ntt//
Besides fixing content on changesDone we also need to handle dataReady
becausentt// if initial data is empty or setData() wasn&#39;t even called
there will be no change fired.nttmodel.document.registerPostFixer( writer
=&gt; this._autoparagraphEmptyRoots( writer ) );nntteditor.on(
&#39;dataReady&#39;, () =&gt; {ntttmodel.enqueueChange(
&#39;transparent&#39;, writer =&gt; this._autoparagraphEmptyRoots( writer )
);ntt}, { priority: &#39;lowest&#39; } );nt}nnt/**nt * Fixes all empty
roots.nt *nt * @privatent * @returns {Boolean} `true` if any change has
been applied, `false` otherwise.nt */nt_autoparagraphEmptyRoots( writer )
{nttconst model = this.editor.model;nnttfor ( const rootName of
model.document.getRootNames() ) {ntttconst root = model.document.getRoot(
rootName );nntttif ( root.isEmpty &amp;&amp; root.rootName !=
&#39;$graveyard&#39; ) {ntttt// If paragraph element is allowed in the
root, create paragraph element.nttttif ( model.schema.checkChild( root,
&#39;paragraph&#39; ) ) {ntttttwriter.insertElement( &#39;paragraph&#39;,
root );nntttttreturn true;ntttt}nttt}ntt}nt}n}nn/**n * A list of element
names which should be treated by the autoparagraphing algorithms asn *
paragraph-like. This means that e.g. the following content:n *n
*tt&lt;h1&gt;Foo&lt;/h1&gt;n *tt&lt;table&gt;n *ttt&lt;tr&gt;n
*tttt&lt;td&gt;X&lt;/td&gt;n *tttt&lt;td&gt;n *ttttt&lt;ul&gt;n
*tttttt&lt;li&gt;Y&lt;/li&gt;n *tttttt&lt;li&gt;Z&lt;/li&gt;n
*ttttt&lt;/ul&gt;n *tttt&lt;/td&gt;n *ttt&lt;/tr&gt;n *tt&lt;/table&gt;n *n
* contains five paragraph-like elements: `&lt;h1&gt;`, two `&lt;td&gt;`s
and two `&lt;li&gt;`s.n * Hence, if none of the features is going to
convert those elements the above content will be automatically handledn *
by the paragraph feature and converted to:n *n *tt&lt;p&gt;Foo&lt;/p&gt;n
*tt&lt;p&gt;X&lt;/p&gt;n *tt&lt;p&gt;Y&lt;/p&gt;n *tt&lt;p&gt;Z&lt;/p&gt;n
*n * Note: The `&lt;td&gt;` containing two `&lt;li&gt;` elements was
ignored as the innermost paragraph-like elementsn * have a priority upon
conversion.n *n * @member {Set.&lt;String&gt;}
module:paragraph/paragraph~Paragraph.paragraphLikeElementsn
*/nParagraph.paragraphLikeElements = new Set(
[nt&#39;blockquote&#39;,nt&#39;dd&#39;,nt&#39;div&#39;,nt&#39;dt&#39;,nt&#39;h1&#39;,nt&#39;h2&#39;,nt&#39;h3&#39;,nt&#39;h4&#39;,nt&#39;h5&#39;,nt&#39;h6&#39;,nt&#39;li&#39;,nt&#39;p&#39;,nt&#39;td&#39;n]
);nnfunction wrapInParagraph( input, position, conversionApi ) {ntconst
paragraph = conversionApi.writer.createElement( &#39;paragraph&#39;
);nntconversionApi.writer.insert( paragraph, position );ntreturn
conversionApi.convertItem( input, Position.createAt( paragraph )
);n}nnfunction isParagraphable( node, position, schema ) {ntconst context =
new SchemaContext( position );nnt// When paragraph is allowed in this
context…ntif ( !schema.checkChild( context, &#39;paragraph&#39; ) )
{nttreturn false;nt}nnt// And a node would be allowed in this
paragraph…ntif ( !schema.checkChild( context.push( &#39;paragraph&#39; ),
node ) ) {nttreturn false;nt}nntreturn true;n}nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-paragraph/src/paragraph.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module heading/headingcommandn */nnimport Command
from &#39;@ckeditor/ckeditor5-core/src/command&#39;;nimport first from
&#39;@ckeditor/ckeditor5-utils/src/first&#39;;nn/**n * The heading command.
It is used by the {@link module:heading/heading~Heading heading feature} to
apply headings.n *n * @extends module:core/command~Commandn */nexport
default class HeadingCommand extends Command {nt/**nt * Creates an instance
of the command.nt *nt * @param {module:core/editor/editor~Editor} editor
Editor instance.nt * @param {Array.&lt;String&gt;} modelElements Names of
the element which this command can apply in the model.nt */ntconstructor(
editor, modelElements ) {nttsuper( editor );nntt/**ntt * If the selection
starts in a heading (which {@link modelElements is supported by this
command})ntt * the value is set to the name of that heading model
element.ntt * It is  set to `false` otherwise.ntt *ntt * @observablentt *
@readonlyntt * @member {Boolean|String} valuentt */nntt/**ntt * Set of
defined model&#39;s elements names that this command support.ntt * See
{@link module:heading/heading~HeadingOption}.ntt *ntt * @readonlyntt *
@member {Array.&lt;String&gt;}ntt */nttthis.modelElements =
modelElements;nt}nnt/**nt * @inheritDocnt */ntrefresh() {nttconst block =
first( this.editor.model.document.selection.getSelectedBlocks()
);nnttthis.value = !!block &amp;&amp; this.modelElements.includes(
block.name ) &amp;&amp; block.name;nttthis.isEnabled = !!block &amp;&amp;
this.modelElements.some( heading =&gt; checkCanBecomeHeading( block,
heading, this.editor.model.schema ) );nt}nnt/**nt * Executes the command.
Applies the heading to the selected blocks or, if the first selectednt *
block is a heading already, turns selected headings (of this level only) to
paragraphs.nt *nt * @param {Object} optionsnt * @param {String}
options.value Name of the element which this command will apply in the
model.nt * @fires executent */ntexecute( options ) {nttconst model =
this.editor.model;nttconst document = model.document;nnttconst modelElement
= options.value;nnttmodel.change( writer =&gt; {ntttconst blocks =
Array.from( document.selection.getSelectedBlocks() )ntttt.filter( block
=&gt; {ntttttreturn checkCanBecomeHeading( block, modelElement,
model.schema );ntttt} );nntttfor ( const block of blocks ) {nttttif (
!block.is( modelElement ) ) {ntttttwriter.rename( block, modelElement
);ntttt}nttt}ntt} );nt}n}nn// Checks whether the given block can be
replaced by a specific heading.n//n// @privaten// @param
{module:engine/model/element~Element} block A block to be tested.n// @param
{module:heading/headingcommand~HeadingCommand#modelElement} heading Command
element name in the model.n// @param {module:engine/model/schema~Schema}
schema The schema of the document.n// @returns {Boolean}nfunction
checkCanBecomeHeading( block, heading, schema ) {ntreturn
schema.checkChild( block.parent, heading ) &amp;&amp; !schema.isObject(
block );n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-heading/src/headingcommand.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module heading/headingeditingn */nnimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport Paragraph from
&#39;@ckeditor/ckeditor5-paragraph/src/paragraph&#39;;nimport
HeadingCommand from &#39;./headingcommand&#39;;nnconst defaultModelElement
= &#39;paragraph&#39;;nn/**n * The headings engine feature. It handles
switching between block formats &amp;ndash; headings and paragraph.n * This
class represents the engine part of the heading feature. See also {@link
module:heading/heading~Heading}.n * It introduces `heading1`-`headingN`
commands which allow to convert paragraphs into headings.n *n * @extends
module:core/plugin~Pluginn */nexport default class HeadingEditing extends
Plugin {nt/**nt * @inheritDocnt */ntconstructor( editor ) {nttsuper( editor
);nntteditor.config.define( &#39;heading&#39;, {ntttoptions: [ntttt{ model:
&#39;paragraph&#39;, title: &#39;Paragraph&#39;, class:
&#39;ck-heading_paragraph&#39; },ntttt{ model: &#39;heading1&#39;, view:
&#39;h2&#39;, title: &#39;Heading 1&#39;, class:
&#39;ck-heading_heading1&#39; },ntttt{ model: &#39;heading2&#39;, view:
&#39;h3&#39;, title: &#39;Heading 2&#39;, class:
&#39;ck-heading_heading2&#39; },ntttt{ model: &#39;heading3&#39;, view:
&#39;h4&#39;, title: &#39;Heading 3&#39;, class:
&#39;ck-heading_heading3&#39; }nttt]ntt} );nt}nnt/**nt * @inheritDocnt
*/ntstatic get requires() {nttreturn [ Paragraph ];nt}nnt/**nt *
@inheritDocnt */ntinit() {nttconst editor = this.editor;nttconst options =
editor.config.get( &#39;heading.options&#39; );nnttconst modelElements =
[];nnttfor ( const option of options ) {nttt// Skip paragraph - it is
defined in required Paragraph feature.ntttif ( option.model !==
defaultModelElement ) {ntttt// Schema.ntttteditor.model.schema.register(
option.model, {ntttttinheritAllFrom: &#39;$block&#39;ntttt}
);nntttteditor.conversion.elementToElement( option
);nnttttmodelElements.push( option.model );nttt}ntt}nntt// Register the
heading command for this option.ntteditor.commands.add( &#39;heading&#39;,
new HeadingCommand( editor, modelElements ) );nt}nnt/**nt * @inheritDocnt
*/ntafterInit() {ntt// If the enter command is added to the editor, alter
its behavior.ntt// Enter at the end of a heading element should create a
paragraph.nttconst editor = this.editor;nttconst enterCommand =
editor.commands.get( &#39;enter&#39; );nttconst options =
editor.config.get( &#39;heading.options&#39; );nnttif ( enterCommand )
{ntttthis.listenTo( enterCommand, &#39;afterExecute&#39;, ( evt, data )
=&gt; {nttttconst positionParent =
editor.model.document.selection.getFirstPosition().parent;nttttconst
isHeading = options.some( option =&gt; positionParent.is( option.model )
);nnttttif ( isHeading &amp;&amp; !positionParent.is( defaultModelElement )
&amp;&amp; positionParent.childCount === 0 ) {ntttttdata.writer.rename(
positionParent, defaultModelElement );ntttt}nttt}
);ntt}nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-heading/src/headingediting.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module ui/dropdown/utilsn */nnimport DropdownPanelView from
&#39;./dropdownpanelview&#39;;nimport DropdownView from
&#39;./dropdownview&#39;;nimport DropdownButtonView from
&#39;./button/dropdownbuttonview&#39;;nimport ToolbarView from
&#39;../toolbar/toolbarview&#39;;nimport ListView from
&#39;../list/listview&#39;;nimport ListItemView from
&#39;../list/listitemview&#39;;nnimport clickOutsideHandler from
&#39;../bindings/clickoutsidehandler&#39;;nnimport
&#39;../../theme/components/dropdown/toolbardropdown.css&#39;;nimport
&#39;../../theme/components/dropdown/listdropdown.css&#39;;nn/**n * A
helper for creating dropdowns. It creates an instance of a {@link
module:ui/dropdown/dropdownview~DropdownView dropdown},n * with a {@link
module:ui/dropdown/button/dropdownbutton~DropdownButton button},n * {@link
module:ui/dropdown/dropdownpanelview~DropdownPanelView panel} and all
standard dropdown&#39;s behaviors.n *n * # Creating dropdownsn *n * By
default, the default {@link
module:ui/dropdown/button/dropdownbuttonview~DropdownButtonView} class is
used asn * definition of the button:n *n *ttconst dropdown =
createDropdown( model );n *n *tt// Configure dropdown&#39;s button
properties:n *ttdropdown.buttonView.set( {n *tttlabel: &#39;A
dropdown&#39;,n *tttwithText: truen *tt} );n *n *ttdropdown.render();n *n
*tt// Will render a dropdown labeled "A dropdown&quot; with an empty
panel.n *ttdocument.body.appendChild( dropdown.element );n *n * You can
also provide other button views (they need to implement then *
{module:ui/dropdown/button/dropdownbutton~DropdownButton} interface). For
instance, you can usen * {@link
module:ui/dropdown/button/splitbuttonview~SplitButtonView} to create a
dropdown with a split button.n *n *ttconst dropdown = createDropdown(
model, SplitButtonView );n *n *tt// Configure dropdown&#39;s button
properties:n *ttdropdown.buttonView.set( {n *tttlabel: &#39;A
dropdown&#39;,n *tttwithText: truen *tt} );n *n *ttdropdown.buttonView.on(
&#39;execute&#39;, () =&gt; {n *ttt// Add the behavior of the "action
part&quot; of the split button.n *ttt// Split button consists of the
"action part&quot; and "arrow part&quot;.n *ttt// The arrow opens the
dropdown while the action part can have some other behavior.n * tt} );n *n
*ttdropdown.render();n *n *tt// Will render a dropdown labeled "A
dropdown&quot; with an empty panel.n *ttdocument.body.appendChild(
dropdown.element );n *n * # Adding content to the dropdown&#39;s paneln *n
* The content of the panel can be inserted directly into the
`dropdown.panelView.element`:n *n *ttdropdown.panelView.element.textContent
= &#39;Content of the panel&#39;;n *n * However, most of the time you will
want to add there either a {@link module:ui/list/listview~ListView list of
options}n * or a list of buttons (i.e. a {@link
module:ui/toolbar/toolbarview~ToolbarView toolbar}).n * To simplify the
task, you can use, respectively, {@link
module:ui/dropdown/utils~addListToDropdown} orn * {@link
module:ui/dropdown/utils~addToolbarToDropdown} utils.n *n * @param
{module:utils/locale~Locale} locale The locale instance.n * @param
{Function} ButtonClass The dropdown button view class. Needs to implement
then * {@link module:ui/dropdown/button/dropdownbutton~DropdownButton}
interface.n * @returns {module:ui/dropdown/dropdownview~DropdownView} The
dropdown view instance.n */nexport function createDropdown( locale,
ButtonClass = DropdownButtonView ) {ntconst buttonView = new ButtonClass(
locale );nntconst panelView = new DropdownPanelView( locale );ntconst
dropdownView = new DropdownView( locale, buttonView, panelView
);nntbuttonView.bind( &#39;isEnabled&#39; ).to( dropdownView );nntif (
buttonView instanceof DropdownButtonView ) {nttbuttonView.bind(
&#39;isOn&#39; ).to( dropdownView, &#39;isOpen&#39; );nt} else
{nttbuttonView.arrowView.bind( &#39;isOn&#39; ).to( dropdownView,
&#39;isOpen&#39; );nt}nntaddDefaultBehavior( dropdownView );nntreturn
dropdownView;n}nn/**n * Adds an instance of {@link
module:ui/toolbar/toolbarview~ToolbarView} to a dropdown.n *n *ttconst
buttons = [];n *n *tt// Either create a new ButtonView instance or create
existing.n *ttbuttons.push( new ButtonView() );n *ttbuttons.push(
editor.ui.componentFactory.get( &#39;someButton&#39; ) );n *n *ttconst
dropdown = createDropdown( locale );n *n *ttaddToolbarToDropdown( dropdown,
buttons );n *n *ttdropdown.toolbarView.isVertical = true;n *n *tt// Will
render a vertical button dropdown labeled "A button dropdown&quot;n *tt//
with a button group in the panel containing two buttons.n
*ttdropdown.render()n *ttdocument.body.appendChild( dropdown.element );n *n
* See {@link module:ui/dropdown/utils~createDropdown} and {@link
module:ui/toolbar/toolbarview~ToolbarView}.n *n * @param
{module:ui/dropdown/dropdownview~DropdownView} dropdownView A dropdown
instance to which `ToolbarView` will be added.n * @param
{Iterable.&lt;module:ui/button/buttonview~ButtonView&gt;} buttonsn
*/nexport function addToolbarToDropdown( dropdownView, buttons ) {ntconst
toolbarView = dropdownView.toolbarView = new
ToolbarView();nntdropdownView.extendTemplate( {nttattributes: {ntttclass: [
&#39;ck-toolbar-dropdown&#39; ]ntt}nt} );nntbuttons.map( view =&gt;
toolbarView.items.add( view ) );nntdropdownView.panelView.children.add(
toolbarView );nttoolbarView.items.delegate( &#39;execute&#39; ).to(
dropdownView );n}nn/**n * Adds an instance of {@link
module:ui/list/listview~ListView} to a dropdown.n *n *ttconst items = new
Collection();n *n *ttitems.add( new Model( { label: &#39;First item&#39;,
style: &#39;color: red&#39; } ) );n *ttitems.add( new Model( { label:
&#39;Second item&#39;, style: &#39;color: green&#39;, class: &#39;foo&#39;
} ) );n *n *ttconst dropdown = createDropdown( locale );n *n
*ttaddListToDropdown( dropdown, items );n *n *tt// Will render a dropdown
with a list in the panel containing two items.n *ttdropdown.render()n
*ttdocument.body.appendChild( dropdown.element );n *n * The `items`
collection passed to this methods controls the presence and attributes of
respectiven * {@link module:ui/list/listitemview~ListItemView list items}.n
*n *n * See {@link module:ui/dropdown/utils~createDropdown} and {@link
module:list/list~List}.n *n * @param
{module:ui/dropdown/dropdownview~DropdownView} dropdownView A dropdown
instance to which `ListVIew` will be added.n * @param
{module:utils/collection~Collection} itemsn * that the inner dropdown
{@link module:ui/list/listview~ListView} children are created from.n *n *
Usually, it is a collection of {@link module:ui/model~Model models}.n
*/nexport function addListToDropdown( dropdownView, items ) {ntconst locale
= dropdownView.locale;ntconst listView = dropdownView.listView = new
ListView( locale );nntlistView.items.bindTo( items ).using( itemModel =&gt;
{nttconst item = new ListItemView( locale );nntt// Bind all attributes of
the model to the item view.nttitem.bind( …Object.keys( itemModel ) ).to(
itemModel );nnttreturn item;nt} );nntdropdownView.panelView.children.add(
listView );nntlistView.items.delegate( &#39;execute&#39; ).to( dropdownView
);n}nn// Add a set of default behaviors to dropdown view.n//n// @param
{module:ui/dropdown/dropdownview~DropdownView} dropdownViewnfunction
addDefaultBehavior( dropdownView ) {ntcloseDropdownOnBlur( dropdownView
);ntcloseDropdownOnExecute( dropdownView );ntfocusDropdownContentsOnArrows(
dropdownView );n}nn// Adds a behavior to a dropdownView that closes opened
dropdown when user clicks outside the dropdown.n//n// @param
{module:ui/dropdown/dropdownview~DropdownView} dropdownViewnfunction
closeDropdownOnBlur( dropdownView ) {ntdropdownView.on( &#39;render&#39;,
() =&gt; {nttclickOutsideHandler( {ntttemitter: dropdownView,ntttactivator:
() =&gt; dropdownView.isOpen,ntttcallback: () =&gt;
{nttttdropdownView.isOpen = false;nttt},ntttcontextElements: [
dropdownView.element ]ntt} );nt} );n}nn// Adds a behavior to a dropdownView
that closes the dropdown view on "execute&quot; event.n//n// @param
{module:ui/dropdown/dropdownview~DropdownView} dropdownViewnfunction
closeDropdownOnExecute( dropdownView ) {nt// Close the dropdown when one of
the list items has been executed.ntdropdownView.on( &#39;execute&#39;, ()
=&gt; {nttdropdownView.isOpen = false;nt} );n}nn// Adds a behavior to a
dropdownView that focuses the dropdown&#39;s panel view contents on
keystrokes.n//n// @param {module:ui/dropdown/dropdownview~DropdownView}
dropdownViewnfunction focusDropdownContentsOnArrows( dropdownView ) {nt//
If the dropdown panel is already open, the arrow down key should focus the
first child of the panelView.ntdropdownView.keystrokes.set(
&#39;arrowdown&#39;, ( data, cancel ) =&gt; {nttif ( dropdownView.isOpen )
{ntttdropdownView.panelView.focus();ntttcancel();ntt}nt} );nnt// If the
dropdown panel is already open, the arrow up key should focus the last
child of the panelView.ntdropdownView.keystrokes.set( &#39;arrowup&#39;, (
data, cancel ) =&gt; {nttif ( dropdownView.isOpen )
{ntttdropdownView.panelView.focusLast();ntttcancel();ntt}nt}
);n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-ui/src/dropdown/utils.jsn// module id = nulln// module chunks
= “,”/**n * Returns heading options as defined in `config.heading.options`
but processed to considern * editor localization, i.e. to display {@link
module:heading/heading~HeadingOption}n * in the correct language.n *n *
Note: The reason behind this method is that there&#39;s no way to use
{@link module:utils/locale~Locale#t}n * when the user config is defined
because the editor does not exist yet.n *n * @param
{module:core/editor/editor~Editor} editorn * @returns
{Array.&lt;module:heading/heading~HeadingOption&gt;}.n */nexport function
getLocalizedOptions(editor) {n    const t = editor.t;n    const
localizedTitles = {n        Paragraph: t(&#39;t&#39;),n        &#39;Heading
1&#39;: t(&#39;u&#39;),n        &#39;Heading 2&#39;: t(&#39;v&#39;),n      
&#39;Heading 3&#39;: t(&#39;w&#39;)n    };n    return
editor.config.get(&#39;heading.options&#39;).map(option =&gt; {n       
const title = <a href="option.title">localizedTitles</a>;n        if (title
&amp;&amp; title != option.title) {n            // Clone the option to
avoid altering the original `config.heading.options`.n            option =
Object.assign({}, option, { title });n        }n        return option;n   
});n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-heading/src/utils.jsn// module id = nulln// module chunks =
“,”/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben. All
rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
engine/view/placeholdern */nnimport
&#39;../../theme/placeholder.css&#39;;nn// Each document stores information
about its placeholder elements and check functions.nconst
documentPlaceholders = new WeakMap();nn/**n * Attaches placeholder to
provided element and updates it&#39;s visibility. To change placeholder
simply call this methodn * once again with new parameters.n *n * @param
{module:engine/view/view~View} view View controller.n * @param
{module:engine/view/element~Element} element Element to attach placeholder
to.n * @param {String} placeholderText Placeholder text to use.n * @param
{Function} [checkFunction] If provided it will be called before checking if
placeholder should be displayed.n * If function returns `false` placeholder
will not be showed.n */nexport function attachPlaceholder( view, element,
placeholderText, checkFunction ) {ntconst document = view.document;nnt//
Single listener per document.ntif ( !documentPlaceholders.has( document ) )
{nttdocumentPlaceholders.set( document, new Map() );nntt// Create view post
fixer that will add placeholder where needed.nttdocument.registerPostFixer(
writer =&gt; updateAllPlaceholders( document, writer ) );nt}nnt// Store
information about element with placeholder.ntdocumentPlaceholders.get(
document ).set( element, {nttplaceholderText,nttcheckFunctionnt} );nnt//
Update view right away.ntview.render();n}nn/**n * Removes placeholder
functionality from given element.n *n * @param
{module:engine/view/view~View} viewn * @param
{module:engine/view/element~Element} elementn */nexport function
detachPlaceholder( view, element ) {ntconst doc =
element.document;nntview.change( writer =&gt; {nttif (
documentPlaceholders.has( doc ) ) {ntttdocumentPlaceholders.get( doc
).delete( element );ntt}nnttwriter.removeClass( &#39;ck-placeholder&#39;,
element );nttwriter.removeAttribute( &#39;data-placeholder&#39;, element
);nt} );n}nn// Updates all placeholders of given document.n//n//
@privaten// @param {module:engine/view/document~Document} viewn// @param
{module:engine/view/writer~Writer} writernfunction updateAllPlaceholders(
document, writer ) {ntconst placeholders = documentPlaceholders.get(
document );ntlet changed = false;nntfor ( const [ element, info ] of
placeholders ) {nttif ( updateSinglePlaceholder( writer, element, info ) )
{ntttchanged = true;ntt}nt}nntreturn changed;n}nn// Updates placeholder
class of given element.n//n// @privaten// @param
{module:engine/view/writer~Writer} writern// @param
{module:engine/view/element~Element} elementn// @param {Object}
infonfunction updateSinglePlaceholder( writer, element, info ) {ntconst
document = element.document;ntconst text = info.placeholderText;ntlet
changed = false;nnt// Element was removed from document.ntif ( !document )
{nttreturn false;nt}nnt// Update data attribute if needed.ntif (
element.getAttribute( &#39;data-placeholder&#39; ) !== text )
{nttwriter.setAttribute( &#39;data-placeholder&#39;, text, element
);nttchanged = true;nt}nntconst viewSelection = document.selection;ntconst
anchor = viewSelection.anchor;ntconst checkFunction =
info.checkFunction;nnt// If checkFunction is provided and returns false -
remove placeholder.ntif ( checkFunction &amp;&amp; !checkFunction() )
{nttif ( element.hasClass( &#39;ck-placeholder&#39; ) )
{ntttwriter.removeClass( &#39;ck-placeholder&#39;, element );ntttchanged =
true;ntt}nnttreturn changed;nt}nnt// Element is empty for placeholder
purposes when it has no children or only ui elements.nt// This check is
taken from `view.ContainerElement#getFillerOffset`.ntconst isEmptyish =
!Array.from( element.getChildren() ).some( element =&gt; !element.is(
&#39;uiElement&#39; ) );nnt// If element is empty and editor is
blurred.ntif ( !document.isFocused &amp;&amp; isEmptyish ) {nttif (
!element.hasClass( &#39;ck-placeholder&#39; ) ) {ntttwriter.addClass(
&#39;ck-placeholder&#39;, element );ntttchanged = true;ntt}nnttreturn
changed;nt}nnt// It there are no child elements and selection is not placed
inside element.ntif ( isEmptyish &amp;&amp; anchor &amp;&amp; anchor.parent
!== element ) {nttif ( !element.hasClass( &#39;ck-placeholder&#39; ) )
{ntttwriter.addClass( &#39;ck-placeholder&#39;, element );ntttchanged =
true;ntt}nt} else {nttif ( element.hasClass( &#39;ck-placeholder&#39; ) )
{ntttwriter.removeClass( &#39;ck-placeholder&#39;, element );ntttchanged =
true;ntt}nt}nntreturn changed;n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/view/placeholder.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module image/imagecaption/utilsn */nnimport ModelElement from
&#39;@ckeditor/ckeditor5-engine/src/model/element&#39;;nimport {
attachPlaceholder } from
&#39;@ckeditor/ckeditor5-engine/src/view/placeholder&#39;;nimport {
toWidgetEditable } from
&#39;@ckeditor/ckeditor5-widget/src/utils&#39;;nnconst captionSymbol =
Symbol( &#39;imageCaption&#39; );nn/**n * Returns a function that creates a
caption editable element for the given {@link
module:engine/view/document~Document}.n *n * @param
{module:engine/view/view~View} viewn * @param {String} placeholderText The
text to be displayed when the caption is empty.n * @return {Function}n
*/nexport function captionElementCreator( view, placeholderText ) {ntreturn
writer =&gt; {nttconst editable = writer.createEditableElement(
&#39;figcaption&#39; );nttwriter.setCustomProperty( captionSymbol, true,
editable );nttattachPlaceholder( view, editable, placeholderText
);nnttreturn toWidgetEditable( editable, writer );nt};n}nn/**n * Returns
`true` if a given view element is the image caption editable.n *n * @param
{module:engine/view/element~Element} viewElementn * @return {Boolean}n
*/nexport function isCaption( viewElement ) {ntreturn
!!viewElement.getCustomProperty( captionSymbol );n}nn/**n * Returns the
caption model element from a given image element. Returns `null` if no
caption is found.n *n * @param {module:engine/model/element~Element}
imageModelElementn * @return {module:engine/model/element~Element|null}n
*/nexport function getCaptionFromImage( imageModelElement ) {ntfor ( const
node of imageModelElement.getChildren() ) {nttif ( node instanceof
ModelElement &amp;&amp; node.name == &#39;caption&#39; ) {ntttreturn
node;ntt}nt}nntreturn null;n}nn/**n * {@link
module:engine/view/matcher~Matcher} pattern. Checks if a given element is a
`&lt;figcaption&gt;` element that is placedn * inside the image
`&lt;figure&gt;` element.n *n * @param {module:engine/view/element~Element}
elementn * @returns {Object|null} Returns the object accepted by {@link
module:engine/view/matcher~Matcher} or `null` if the elementn * cannot be
matched.n */nexport function matchImageCaption( element ) {ntconst parent =
element.parent;nnt// Convert only captions for images.ntif ( element.name
== &#39;figcaption&#39; &amp;&amp; parent &amp;&amp; parent.name ==
&#39;figure&#39; &amp;&amp; parent.hasClass( &#39;image&#39; ) ) {nttreturn
{ name: true };nt}nntreturn null;n}nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-image/src/imagecaption/utils.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */n/**n * @module image/imagecaption/imagecaptioneditingn
*/nimport Plugin from &#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport
ViewPosition from
&#39;@ckeditor/ckeditor5-engine/src/view/position&#39;;nimport {
upcastElementToElement } from
&#39;@ckeditor/ckeditor5-engine/src/conversion/upcast-converters&#39;;nimport
{ isImage } from &#39;../image/utils&#39;;nimport {n   
captionElementCreator,n    getCaptionFromImage,n    matchImageCaptionn}
from &#39;./utils&#39;;n/**n * The image caption engine plugin.n *n * It
registers proper converters. It takes care of adding a caption element if
the image without it is insertedn * to the model document.n *n * @extends
module:core/plugin~Pluginn */nexport default class ImageCaptionEditing
extends Plugin {n    /**nt * @inheritDocnt */n    init() {n        const
editor = this.editor;n        const view = editor.editing.view;n       
const schema = editor.model.schema;n        const data = editor.data;n     
const editing = editor.editing;n        const t = editor.t;n        /**ntt
* The last selected caption editable.ntt * It is used for hiding the
editable when it is empty and the image widget is no longer selected.ntt
*ntt * @privatentt * @member
{module:engine/view/editableelement~EditableElement}
#_lastSelectedCaptionntt */n        // Schema configuration.n       
schema.register(&#39;caption&#39;, {n            allowIn: &#39;image&#39;,n
allowContentOf: &#39;$block&#39;,n            isLimit: truen        });n   
// Add caption element to each image inserted without it.n       
editor.model.document.registerPostFixer(writer =&gt;
this._insertMissingModelCaptionElement(writer));n        // View to model
converter for the data pipeline.n       
editor.conversion.for(&#39;upcast&#39;).add(upcastElementToElement({n      
view: matchImageCaption,n            model: &#39;caption&#39;n        }));n
// Model to view converter for the data pipeline.n        const
createCaptionForData = writer =&gt;
writer.createContainerElement(&#39;figcaption&#39;);n       
data.downcastDispatcher.on(&#39;insert:caption&#39;,
captionModelToView(createCaptionForData, false));n        // Model to view
converter for the editing pipeline.n        const createCaptionForEditing =
captionElementCreator(view, t(&#39;k&#39;));n       
editing.downcastDispatcher.on(&#39;insert:caption&#39;,
captionModelToView(createCaptionForEditing));n        // Always show
caption in view when something is inserted in model.n       
editing.downcastDispatcher.on(&#39;insert&#39;,
this._fixCaptionVisibility(data =&gt; data.item), { priority:
&#39;high&#39; });n        // Hide caption when everything is removed from
it.n        editing.downcastDispatcher.on(&#39;remove&#39;,
this._fixCaptionVisibility(data =&gt; data.position.parent), { priority:
&#39;high&#39; });n        // Update caption visibility on view in post
fixer.n        view.document.registerPostFixer(writer =&gt;
this._updateCaptionVisibility(writer));n    }n    /**nt * Updates the view
before each rendering, making sure that empty captions (so unnecessary
ones) are hiddennt * and then visible when the image is selected.nt *nt *
@privatent * @param {module:engine/view/writer~Writer} viewWriternt *
@returns {Boolean} Returns `true` when the view is updated.nt */n   
_updateCaptionVisibility(viewWriter) {n        const mapper =
this.editor.editing.mapper;n        const lastCaption =
this._lastSelectedCaption;n        let viewCaption;n        // If whole
image is selected.n        const modelSelection =
this.editor.model.document.selection;n        const selectedElement =
modelSelection.getSelectedElement();n        if (selectedElement &amp;&amp;
selectedElement.is(&#39;image&#39;)) {n            const modelCaption =
getCaptionFromImage(selectedElement);n            viewCaption =
mapper.toViewElement(modelCaption);n        }n        // If selection is
placed inside caption.n        const position =
modelSelection.getFirstPosition();n        const modelCaption =
getParentCaption(position.parent);n        if (modelCaption) {n           
viewCaption = mapper.toViewElement(modelCaption);n        }n        // Is
currently any caption selected?n        if (viewCaption) {n            //
Was any caption selected before?n            if (lastCaption) {n           
// Same caption as before?n                if (lastCaption === viewCaption)
{n                    return showCaption(viewCaption, viewWriter);n        
} else {n                    hideCaptionIfEmpty(lastCaption, viewWriter);n 
this._lastSelectedCaption = viewCaption;n                    return
showCaption(viewCaption, viewWriter);n                }n            } else
{n                this._lastSelectedCaption = viewCaption;n               
return showCaption(viewCaption, viewWriter);n            }n        } else
{n            // Was any caption selected before?n            if
(lastCaption) {n                const viewModified =
hideCaptionIfEmpty(lastCaption, viewWriter);n               
this._lastSelectedCaption = null;n                return viewModified;n    
} else {n                return false;n            }n        }n    }n   
/**nt * Returns a converter that fixes caption visibility during the
model-to-view conversion.nt * Checks if the changed node is placed inside
the caption element and fixes its visibility in the view.nt *nt *
@privatent * @param {Function} nodeFindernt * @returns {Function}nt */n   
_fixCaptionVisibility(nodeFinder) {n        return (evt, data,
conversionApi) =&gt; {n            const node = nodeFinder(data);n         
const modelCaption = getParentCaption(node);n            const mapper =
this.editor.editing.mapper;n            const viewWriter =
conversionApi.writer;n            if (modelCaption) {n                const
viewCaption = mapper.toViewElement(modelCaption);n                if
(viewCaption) {n                    if (modelCaption.childCount) {n        
viewWriter.removeClass(&#39;ck-hidden&#39;, viewCaption);n                 
} else {n                        viewWriter.addClass(&#39;ck-hidden&#39;,
viewCaption);n                    }n                }n            }n       
};n    }n    /**nt * Checks whether the data inserted to the model document
have an image element that has no caption element inside it.nt * If there
is none, it adds it to the image element.nt *nt * @privatent * @param
{module:engine/model/writer~Writer} writer The writer to make changes
with.nt * @returns {Boolean} `true` if any change was applied, `false`
otherwise.nt */n    _insertMissingModelCaptionElement(writer) {n       
const model = this.editor.model;n        const changes =
model.document.differ.getChanges();n        for (const entry of changes) {n
if (entry.type == &#39;insert&#39; &amp;&amp; entry.name ==
&#39;image&#39;) {n                const item = entry.position.nodeAfter;n 
if (!getCaptionFromImage(item)) {n                   
writer.appendElement(&#39;caption&#39;, item);n                    return
true;n                }n            }n        }n    }n}n// Creates a
converter that converts image caption model element to view element.n//n//
@privaten// @param {Function} elementCreatorn// @param {Boolean}
[hide=true] When set to `false` view element will not be inserted when
it&#39;s empty.n// @return {Function}nfunction
captionModelToView(elementCreator, hide = true) {n    return (evt, data,
conversionApi) =&gt; {n        const captionElement = data.item;n        //
Return if element shouldn&#39;t be present when empty.n        if
(!captionElement.childCount &amp;&amp; !hide) {n            return;n       
}n        if (isImage(captionElement.parent)) {n            if
(!conversionApi.consumable.consume(data.item, &#39;insert&#39;)) {n        
return;n            }n            const viewImage =
conversionApi.mapper.toViewElement(data.range.start.parent);n           
const viewCaption = elementCreator(conversionApi.writer);n            const
viewWriter = conversionApi.writer;n            // Hide if empty.n          
if (!captionElement.childCount) {n               
viewWriter.addClass(&#39;ck-hidden&#39;, viewCaption);n            }n      
insertViewCaptionAndBind(viewCaption, data.item, viewImage,
conversionApi);n        }n    };n}n// Inserts `viewCaption` at the end of
`viewImage` and binds it to `modelCaption`.n//n// @privaten// @param
{module:engine/view/containerelement~ContainerElement} viewCaptionn//
@param {module:engine/model/element~Element} modelCaptionn// @param
{module:engine/view/containerelement~ContainerElement} viewImagen// @param
{Object} conversionApinfunction insertViewCaptionAndBind(viewCaption,
modelCaption, viewImage, conversionApi) {n    const viewPosition =
ViewPosition.createAt(viewImage, &#39;end&#39;);n   
conversionApi.writer.insert(viewPosition, viewCaption);n   
conversionApi.mapper.bindElements(modelCaption, viewCaption);n}n// Checks
if the provided node or one of its ancestors is a caption element, and
returns it.n//n// @privaten// @param {module:engine/model/node~Node}
noden// @returns {module:engine/model/element~Element|null}nfunction
getParentCaption(node) {n    const ancestors = node.getAncestors({
includeSelf: true });n    const caption = ancestors.find(ancestor =&gt;
ancestor.name == &#39;caption&#39;);n    if (caption &amp;&amp;
caption.parent &amp;&amp; caption.parent.name == &#39;image&#39;) {n       
return caption;n    }n    return null;n}n// Hides a given caption in the
view if it is empty.n//n// @privaten// @param
{module:engine/view/containerelement~ContainerElement} captionn// @param
{module:engine/view/writer~Writer} viewWritern// @returns {Boolean} Returns
`true` if the view was modified.nfunction hideCaptionIfEmpty(caption,
viewWriter) {n    if (!caption.childCount &amp;&amp;
!caption.hasClass(&#39;ck-hidden&#39;)) {n       
viewWriter.addClass(&#39;ck-hidden&#39;, caption);n        return true;n   
}n    return false;n}n// Shows the caption.n//n// @privaten// @param
{module:engine/view/containerelement~ContainerElement} captionn// @param
{module:engine/view/writer~Writer} viewWritern// @returns {Boolean} Returns
`true` if the view was modified.nfunction showCaption(caption, viewWriter)
{n    if (caption.hasClass(&#39;ck-hidden&#39;)) {n       
viewWriter.removeClass(&#39;ck-hidden&#39;, caption);n        return true;n
}n    return false;n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-image/src/imagecaption/imagecaptionediting.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nnimport first from
&#39;@ckeditor/ckeditor5-utils/src/first&#39;;nn/**n * @module
image/imagestyle/convertersn */nn/**n * Returns a converter for the
`imageStyle` attribute. It can be used for adding, changing and removing
the attribute.n *n * @param {Object} styles An object containing available
styles. See {@link
module:image/imagestyle/imagestyleediting~ImageStyleFormat}n * for more
details.n * @returns {Function} A model-to-view attribute converter.n
*/nexport function modelToViewStyleAttribute( styles ) {ntreturn ( evt,
data, conversionApi ) =&gt; {nttif ( !conversionApi.consumable.consume(
data.item, evt.name ) ) {ntttreturn;ntt}nntt// Check if there is class name
associated with given value.nttconst newStyle = getStyleByName(
data.attributeNewValue, styles );nttconst oldStyle = getStyleByName(
data.attributeOldValue, styles );nnttconst viewElement =
conversionApi.mapper.toViewElement( data.item );nttconst viewWriter =
conversionApi.writer;nnttif ( oldStyle ) {ntttviewWriter.removeClass(
oldStyle.className, viewElement );ntt}nnttif ( newStyle )
{ntttviewWriter.addClass( newStyle.className, viewElement
);ntt}nt};n}nn/**n * Returns a view-to-model converter converting image CSS
classes to a proper value in the model.n *n * @param
{Array.&lt;module:image/imagestyle/imagestyleediting~ImageStyleFormat&gt;}
styles The styles for which the converter is created.n * @returns
{Function} A view-to-model converter.n */nexport function
viewToModelStyleAttribute( styles ) {nt// Convert only non–default
styles.ntconst filteredStyles = styles.filter( style =&gt; !style.isDefault
);nntreturn ( evt, data, conversionApi ) =&gt; {nttif ( !data.modelRange )
{ntttreturn;ntt}nnttconst viewFigureElement = data.viewItem;nttconst
modelImageElement = first( data.modelRange.getItems() );nntt// Check if
`imageStyle` attribute is allowed for current element.nttif (
!conversionApi.schema.checkAttribute( modelImageElement,
&#39;imageStyle&#39; ) ) {ntttreturn;ntt}nntt// Convert style one by
one.nttfor ( const style of filteredStyles ) {nttt// Try to consume class
corresponding with style.ntttif ( conversionApi.consumable.consume(
viewFigureElement, { classes: style.className } ) ) {ntttt// And convert
this style to model attribute.nttttconversionApi.writer.setAttribute(
&#39;imageStyle&#39;, style.name, modelImageElement );nttt}ntt}nt};n}nn//
Returns the style with a given `name` from an array of styles.n//n// @param
{String} namen// @param
{Array.&lt;module:image/imagestyle/imagestyleediting~ImageStyleFormat&gt; }
stylesn// @return
{module:image/imagestyle/imagestyleediting~ImageStyleFormat|undefined}nfunction
getStyleByName( name, styles ) {ntfor ( const style of styles ) {nttif (
style.name === name ) {ntttreturn style;ntt}nt}n}nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-image/src/imagestyle/converters.jsn// module
id = nulln// module chunks = “,”/**n * @license Copyright © 2003-2018,
CKSource - Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module image/imagestyle/utilsn */nnimport log from
&#39;@ckeditor/ckeditor5-utils/src/log&#39;;nnimport fullWidthIcon from
&#39;@ckeditor/ckeditor5-core/theme/icons/object-full-width.svg&#39;;nimport
leftIcon from
&#39;@ckeditor/ckeditor5-core/theme/icons/object-left.svg&#39;;nimport
centerIcon from
&#39;@ckeditor/ckeditor5-core/theme/icons/object-center.svg&#39;;nimport
rightIcon from
&#39;@ckeditor/ckeditor5-core/theme/icons/object-right.svg&#39;;nn/**n *
Default image styles provided by the plugin that can be referred in then *
{@link module:image/image~ImageConfig#styles} configuration.n *n * Among
them, 2 default semantic content styles are available:n *n * * `full` is a
full–width image without any CSS class,n * * `side` is a side image styled
with the `image-style-side` CSS class.n *n * There are also 3 styles
focused on formatting:n *n * * `alignLeft` aligns the image to the left
using the `image-style-align-left` class,n * * `alignCenter` centers the
image using the `image-style-align-center` class,n * * `alignRight` aligns
the image to the right using the `image-style-align-right` class,n *n *
@member {Object.&lt;String,Object&gt;}n */nconst defaultStyles = {nt// This
option is equal to the situation when no style is applied.ntfull: {nttname:
&#39;full&#39;,ntttitle: &#39;Full size image&#39;,ntticon:
fullWidthIcon,nttisDefault: truent},nnt// This represents a side
image.ntside: {nttname: &#39;side&#39;,ntttitle: &#39;Side
image&#39;,ntticon: rightIcon,nttclassName:
&#39;image-style-side&#39;nt},nnt// This style represents an image aligned
to the left.ntalignLeft: {nttname: &#39;alignLeft&#39;,ntttitle: &#39;Left
aligned image&#39;,ntticon: leftIcon,nttclassName:
&#39;image-style-align-left&#39;nt},nnt// This style represents a centered
image.ntalignCenter: {nttname: &#39;alignCenter&#39;,ntttitle:
&#39;Centered image&#39;,ntticon: centerIcon,nttclassName:
&#39;image-style-align-center&#39;nt},nnt// This style represents an image
aligned to the right.ntalignRight: {nttname: &#39;alignRight&#39;,ntttitle:
&#39;Right aligned image&#39;,ntticon: rightIcon,nttclassName:
&#39;image-style-align-right&#39;nt}n};nn/**n * Default image style icons
provided by the plugin that can be referred in then * {@link
module:image/image~ImageConfig#styles} configuration.n *n * There are 4
icons available: `&#39;full&#39;`, `&#39;left&#39;`, `&#39;center&#39;` and
`&#39;right&#39;`.n *n * @member {Object.&lt;String, String&gt;}n */nconst
defaultIcons = {ntfull: fullWidthIcon,ntleft: leftIcon,ntright:
rightIcon,ntcenter: centerIconn};nn/**n * Returns a {@link
module:image/image~ImageConfig#styles} array with items normalized in then
* {@link module:image/imagestyle/imagestyleediting~ImageStyleFormat} format
and a complete `icon` markup for each style.n *n * @returns
{Array.&lt;module:image/imagestyle/imagestyleediting~ImageStyleFormat&gt;}n
*/nexport function normalizeImageStyles( configuredStyles = [] ) {ntreturn
configuredStylesntt.map( _normalizeStyle )ntt.map( style =&gt;
Object.assign( {}, style ) );n}nn// Normalizes an image style provided in
the {@link module:image/image~ImageConfig#styles}n// and returns it in a
{@link module:image/imagestyle/imagestyleediting~ImageStyleFormat}.n//n//
@param {Object} stylen// @returns {@link
module:image/imagestyle/imagestyleediting~ImageStyleFormat}nfunction
_normalizeStyle( style ) {nt// Just the name of the style has been
passed.ntif ( typeof style == &#39;string&#39; ) {nttconst styleName =
style;nntt// If it&#39;s one of the defaults, just use it.nttif (
defaultStyles[ styleName ] ) {nttt// Clone the style to avoid overriding
defaults.ntttstyle = Object.assign( {}, defaultStyles[ styleName ]
);ntt}ntt// If it&#39;s just a name but none of the defaults, warn because
probably it&#39;s a mistake.nttelse
{ntttlog.warn(ntttt&#39;image-style-not-found: There is no such image style
of given name.&#39;,ntttt{ name: styleName }nttt);nnttt// Normalize the
style anyway to prevent errors.ntttstyle = {nttttname:
styleNamenttt};ntt}nt}nt// If an object style has been passed and if the
name matches one of the defaults,nt// extend it with defaults – the user
wants to customize a default style.nt// Note: Don&#39;t override the
user–defined style object, clone it instead.ntelse if ( defaultStyles[
style.name ] ) {nttconst defaultStyle = defaultStyles[ style.name
];nttconst extendedStyle = Object.assign( {}, style );nnttfor ( const prop
in defaultStyle ) {ntttif ( !style.hasOwnProperty( prop ) )
{nttttextendedStyle[ prop ] = defaultStyle[ prop ];nttt}ntt}nnttstyle =
extendedStyle;nt}nnt// If an icon is defined as a string and correspond
with a nament// in default icons, use the default icon provided by the
plugin.ntif ( typeof style.icon == &#39;string&#39; &amp;&amp;
defaultIcons[ style.icon ] ) {nttstyle.icon = defaultIcons[ style.icon
];nt}nntreturn style;n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-image/src/imagestyle/utils.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module image/imagestyle/imagestyleeditingn */nnimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport ImageStyleCommand
from &#39;./imagestylecommand&#39;;nimport ImageEditing from
&#39;../image/imageediting&#39;;nimport { viewToModelStyleAttribute,
modelToViewStyleAttribute } from &#39;./converters&#39;;nimport {
normalizeImageStyles } from &#39;./utils&#39;;nn/**n * The image style
engine plugin. It sets the default configuration, creates converters and
registersn * {@link
module:image/imagestyle/imagestylecommand~ImageStyleCommand
ImageStyleCommand}.n *n * @extends {module:core/plugin~Plugin}n */nexport
default class ImageStyleEditing extends Plugin {nt/**nt * @inheritDocnt
*/ntstatic get requires() {nttreturn [ ImageEditing ];nt}nnt/**nt *
@inheritDocnt */ntstatic get pluginName() {nttreturn
&#39;ImageStyleEditing&#39;;nt}nnt/**nt * @inheritDocnt */ntinit()
{nttconst editor = this.editor;nttconst schema =
editor.model.schema;nttconst data = editor.data;nttconst editing =
editor.editing;nntt// Define default configuration.ntteditor.config.define(
&#39;image.styles&#39;, [ &#39;full&#39;, &#39;side&#39; ] );nntt// Get
configuration.nttconst styles = normalizeImageStyles( editor.config.get(
&#39;image.styles&#39; ) );nntt// Allow imageStyle attribute in image.ntt//
We could call it &#39;style&#39; but <a
href="https://github.com/ckeditor/ckeditor5-engine/issues/559.\n\t\tschema.extend">github.com/ckeditor/ckeditor5-engine/issues/559.nttschema.extend</a>(
&#39;image&#39;, { allowAttributes: &#39;imageStyle&#39; } );nntt//
Converters for imageStyle attribute from model to view.nttconst
modelToViewConverter = modelToViewStyleAttribute( styles
);nttediting.downcastDispatcher.on( &#39;attribute:imageStyle:image&#39;,
modelToViewConverter );nttdata.downcastDispatcher.on(
&#39;attribute:imageStyle:image&#39;, modelToViewConverter );nntt//
Converter for figure element from view to
model.nttdata.upcastDispatcher.on( &#39;element:figure&#39;,
viewToModelStyleAttribute( styles ), { priority: &#39;low&#39; } );nntt//
Register imageStyle command.ntteditor.commands.add( &#39;imageStyle&#39;,
new ImageStyleCommand( editor, styles ) );nt}n}nn/**n * The image style
format descriptor.n *n *ttimport fullSizeIcon from
&#39;path/to/icon.svg&#39;;n *n *ttconst imageStyleFormat = {n *tttname:
&#39;fullSize&#39;,n *ttticon: fullSizeIcon,n *ttttitle: &#39;Full size
image&#39;,n *tttclassName: &#39;image-full-size&#39;n *tt}n *n * @typedef
{Object} module:image/imagestyle/imagestyleediting~ImageStyleFormatn *n *
@property {String} name The unique name of the style. It will be used to:n
*n * * Store the chosen style in the model by setting the `imageStyle`
attribute of the `&lt;image&gt;` element.n * * As a value of the {@link
module:image/imagestyle/imagestylecommand~ImageStyleCommand#execute
`imageStyle` command},n * * when registering a button for each of the
styles (`&#39;imageStyle:{name}&#39;`) in then * {@link
module:ui/componentfactory~ComponentFactory UI components factory} (this
functionality is provided by then * {@link
module:image/imagestyle/imagestyleui~ImageStyleUI} plugin).n *n * @property
{Boolean} [isDefault] When set, the style will be used as the default one.n
* A default style does not apply any CSS class to the view element.n *n *
@property {String} icon One of the following to be used when creating the
style&#39;s button:n *n * * An SVG icon source (as an XML string).n * * One
of {@link module:image/imagestyle/utils~defaultIcons} to use a default icon
provided by the plugin.n *n * @property {String} title The style&#39;s
title.n *n * @property {String} className The CSS class used to represent
the style in the view.n */nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-image/src/imagestyle/imagestyleediting.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */n/**n * @module image/imagestyle/imagestyleuin */nimport
Plugin from &#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport
ButtonView from
&#39;@ckeditor/ckeditor5-ui/src/button/buttonview&#39;;nimport {
normalizeImageStyles } from &#39;./utils&#39;;nimport
&#39;../../theme/imagestyle.css&#39;;n/**n * The image style UI plugin.n *n
* @extends module:core/plugin~Pluginn */nexport default class ImageStyleUI
extends Plugin {n    /**nt * Returns the default localized style titles
provided by the plugin.nt *nt * The following localized titles
corresponding withnt * {@link module:image/imagestyle/utils~defaultStyles}
are available:nt *nt * * `&#39;Full size image&#39;`,nt * * `&#39;Side
image&#39;`,nt * * `&#39;Left aligned image&#39;`,nt * * `&#39;Centered
image&#39;`,nt * * `&#39;Right aligned image&#39;`nt *nt * @returns
{Object.&lt;String,String&gt;}nt */n    get localizedDefaultStylesTitles()
{n        const t = this.editor.t;n        return {n            &#39;Full
size image&#39;: t(&#39;f&#39;),n            &#39;Side image&#39;:
t(&#39;g&#39;),n            &#39;Left aligned image&#39;: t(&#39;h&#39;),n 
&#39;Centered image&#39;: t(&#39;i&#39;),n            &#39;Right aligned
image&#39;: t(&#39;j&#39;)n        };n    }n    /**nt * @inheritDocnt */n  
init() {n        const editor = this.editor;n        const configuredStyles
= editor.config.get(&#39;image.styles&#39;);n        const translatedStyles
= translateStyles(normalizeImageStyles(configuredStyles),
this.localizedDefaultStylesTitles);n        for (const style of
translatedStyles) {n            this._createButton(style);n        }n    }n
/**nt * Creates a button for each style and stores it in the editor {@link
module:ui/componentfactory~ComponentFactory ComponentFactory}.nt *nt *
@privatent * @param
{module:image/imagestyle/imagestyleediting~ImageStyleFormat} stylent */n   
_createButton(style) {n        const editor = this.editor;n        const
componentName = `imageStyle:${ style.name }`;n       
editor.ui.componentFactory.add(componentName, locale =&gt; {n           
const command = editor.commands.get(&#39;imageStyle&#39;);n           
const view = new ButtonView(locale);n            view.set({n               
label: style.title,n                icon: style.icon,n               
tooltip: truen            });n           
view.bind(&#39;isEnabled&#39;).to(command, &#39;isEnabled&#39;);n          
view.bind(&#39;isOn&#39;).to(command, &#39;value&#39;, value =&gt; value
=== style.name);n            this.listenTo(view, &#39;execute&#39;, ()
=&gt; editor.execute(&#39;imageStyle&#39;, { value: style.name }));n       
return view;n        });n    }n}n/**n * Returns the translated `title` from
the passed styles array.n *n * @param
{Array.&lt;module:image/imagestyle/imagestyleediting~ImageStyleFormat&gt;}
stylesn * @param titlesn * @returns
{Array.&lt;module:image/imagestyle/imagestyleediting~ImageStyleFormat&gt;}n
*/nfunction translateStyles(styles, titles) {n    for (const style of
styles) {n        // Localize the titles of the styles, if a title
corresponds withn        // a localized default provided by the plugin.n   
if (<a href="style.title">titles</a>) {n            style.title = <a
href="style.title">titles</a>;n        }n    }n    return
styles;n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-image/src/imagestyle/imagestyleui.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module image/imagestylen */nnimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport ImageStyleEditing
from &#39;./imagestyle/imagestyleediting&#39;;nimport ImageStyleUI from
&#39;./imagestyle/imagestyleui&#39;;nn/**n * The image style plugin.n *n *
It loads the {@link
module:image/imagestyle/imagestyleediting~ImageStyleEditing}n * and {@link
module:image/imagestyle/imagestyleui~ImageStyleUI} plugins.n *n * For a
detailed overview, check the {@glink features/image#image-styles image
styles} documentation.n *n * @extends module:core/plugin~Pluginn */nexport
default class ImageStyle extends Plugin {nt/**nt * @inheritDocnt */ntstatic
get requires() {nttreturn [ ImageStyleEditing, ImageStyleUI ];nt}nnt/**nt *
@inheritDocnt */ntstatic get pluginName() {nttreturn
&#39;ImageStyle&#39;;nt}n}nn/**n * Available image styles.n *n * The
default value is:n *n *ttconst imageConfig = {n *tttstyles: [
&#39;full&#39;, &#39;side&#39; ]n *tt};n *n * which configures two default
styles:n *n *  * the "full&quot; style which does not apply any class, e.g.
for images styled to span 100% width of the content,n *  * the "side&quot;
style with the `.image-style-side` CSS class.n *n * See {@link
module:image/imagestyle/utils~defaultStyles} to learn more about defaultn *
styles provided by the image feature.n *n * The {@link
module:image/imagestyle/utils~defaultStyles default styles} can be
customized,n * e.g. to change the icon, title or CSS class of the style.
The feature also provides severaln * {@link
module:image/imagestyle/utils~defaultIcons default icons} to choose from.n
*n *ttimport customIcon from &#39;custom-icon.svg&#39;;n *n *tt// …n *n
*ttconst imageConfig = {n *tttstyles: [n *tttt// This will only customize
the icon of the "full&quot; style.n *tttt// Note: &#39;right&#39; is one of
default icons provided by the feature.n *tttt{ name: &#39;full&#39;, icon:
&#39;right&#39; },n *n *tttt// This will customize the icon, title and CSS
class of the default "side&quot; style.n *tttt{ name: &#39;side&#39;, icon:
customIcon, title: &#39;My side style&#39;, class:
&#39;custom-side-image&#39; }n *ttt]n *tt};n *n * If none of the default
styles is good enough, it is possible to define independent custom styles,
too:n *n *ttimport fullSizeIcon from
&#39;@ckeditor/ckeditor5-core/theme/icons/object-center.svg&#39;;n
*ttimport sideIcon from
&#39;@ckeditor/ckeditor5-core/theme/icons/object-right.svg&#39;;n *n *tt//
…n *n *ttconst imageConfig = {n *tttstyles: [n *tttt// A completely custom
full size style with no class, used as a default.n *tttt{ name:
&#39;fullSize&#39;, title: &#39;Full size&#39;, icon: fullSizeIcon,
isDefault: true },n *n *tttt{ name: &#39;side&#39;, title: &#39;To the
side&#39;, icon: sideIcon, className: &#39;side-image&#39; }n *ttt]n *tt};n
*n * Note: Setting `title` to one of {@link
module:image/imagestyle/imagestyleui~ImageStyleUI#localizedDefaultStylesTitles}n
* will automatically translate it to the language of the editor.n *n * Read
more about styling images in the {@glink features/image#image-styles Image
styles guide}.n *n * The feature creates commands based on defined styles,
so you can change the style of a selected image by executingn * the
following command:n *n *tteditor.execute( &#39;imageStyle&#39; { value:
&#39;side&#39; } );n *n * The feature also creates buttons that execute the
commands. So, assuming that you use then * default image styles setting,
you can {@link module:image/image~ImageConfig#toolbar configure the image
toolbar}n * (or any other toolbar) to contain these options:n *n *ttconst
imageConfig = {n *ttttoolbar: [ &#39;imageStyle:full&#39;,
&#39;imageStyle:side&#39; ]n *tt};n *n * @member
{Array.&lt;module:image/imagestyle/imagestyleediting~ImageStyleFormat&gt;}
module:image/image~ImageConfig#stylesn */nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-image/src/imagestyle.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module link/findlinkrangen */nnimport Range from
&#39;@ckeditor/ckeditor5-engine/src/model/range&#39;;nimport Position from
&#39;@ckeditor/ckeditor5-engine/src/model/position&#39;;nn/**n * Walks
backward and forward from the start position, node by node, as long as they
have the same `linkHref` attribute value and returnn * a {@link
module:engine/model/range~Range Range} with the found link.n *n * @param
{module:engine/model/position~Position} position The start position.n *
@param {String} value The `linkHref` attribute value.n * @returns
{module:engine/model/range~Range} The link range.n */nexport default
function findLinkRange( position, value ) {ntreturn new Range( _findBound(
position, value, true ), _findBound( position, value, false ) );n}nn//
Walks forward or backward (depends on the `lookBack` flag), node by node,
as long as they have the same `linkHref` attribute valuen// and returns a
position just before or after (depends on the `lookBack` flag) the last
matched node.n//n// @param {module:engine/model/position~Position} position
The start position.n// @param {String} value The `linkHref` attribute
value.n// @param {Boolean} lookBack Whether the walk direction is forward
(`false`) or backward (`true`).n// @returns
{module:engine/model/position~Position} The position just before the last
matched node.nfunction _findBound( position, value, lookBack ) {nt// Get
node before or after position (depends on `lookBack` flag).nt// When
position is inside text node then start searching from text node.ntlet node
= position.textNode || ( lookBack ? position.nodeBefore :
position.nodeAfter );nntlet lastNode = null;nntwhile ( node &amp;&amp;
node.getAttribute( &#39;linkHref&#39; ) == value ) {nttlastNode =
node;nttnode = lookBack ? node.previousSibling :
node.nextSibling;nt}nntreturn lastNode ? Position.createAt( lastNode,
lookBack ? &#39;before&#39; : &#39;after&#39; ) :
position;n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-link/src/findlinkrange.jsn// module id = nulln// module chunks
= “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben.
All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
link/linkcommandn */nnimport Command from
&#39;@ckeditor/ckeditor5-core/src/command&#39;;nimport Range from
&#39;@ckeditor/ckeditor5-engine/src/model/range&#39;;nimport findLinkRange
from &#39;./findlinkrange&#39;;nimport toMap from
&#39;@ckeditor/ckeditor5-utils/src/tomap&#39;;nn/**n * The link command. It
is used by the {@link module:link/link~Link link feature}.n *n * @extends
module:core/command~Commandn */nexport default class LinkCommand extends
Command {nt/**nt * The value of the `&#39;linkHref&#39;` attribute if the
start of the selection is located in a node with this attribute.nt *nt *
@observablent * @readonlynt * @member {Object|undefined} valuent */nnt/**nt
* @inheritDocnt */ntrefresh() {nttconst model = this.editor.model;nttconst
doc = model.document;nnttthis.value = doc.selection.getAttribute(
&#39;linkHref&#39; );nttthis.isEnabled =
model.schema.checkAttributeInSelection( doc.selection, &#39;linkHref&#39;
);nt}nnt/**nt * Executes the command.nt *nt * When the selection is
non-collapsed, the `linkHref` attribute will be applied to nodes inside the
selection, but only tont * those nodes where the `linkHref` attribute is
allowed (disallowed nodes will be omitted).nt *nt * When the selection is
collapsed and is not inside the text with the `linkHref` attribute, thent *
new {@link module:engine/model/text~Text Text node} with the `linkHref`
attribute will be inserted in place of caret, butnt * only if such element
is allowed in this place. The `_data` of the inserted text will equal the
`href` parameter.nt * The selection will be updated to wrap the just
inserted text node.nt *nt * When the selection is collapsed and inside the
text with the `linkHref` attribute, the attribute value will be updated.nt
*nt * @fires executent * @param {String} href Link destination.nt
*/ntexecute( href ) {nttconst model = this.editor.model;nttconst selection
= model.document.selection;nnttmodel.change( writer =&gt; {nttt// If
selection is collapsed then update selected link or insert new one at the
place of caret.ntttif ( selection.isCollapsed ) {nttttconst position =
selection.getFirstPosition();nntttt// When selection is inside text with
`linkHref` attribute.nttttif ( selection.hasAttribute( &#39;linkHref&#39; )
) {nttttt// Then update `linkHref` value.ntttttconst linkRange =
findLinkRange( selection.getFirstPosition(), selection.getAttribute(
&#39;linkHref&#39; ) );nntttttwriter.setAttribute( &#39;linkHref&#39;,
href, linkRange );nnttttt// Create new range wrapping changed
link.ntttttwriter.setSelection( linkRange );ntttt}ntttt// If not then
insert text node with `linkHref` attribute in place of caret.ntttt//
However, since selection in collapsed, attribute value will be used as data
for text node.ntttt// So, if `href` is empty, do not create text
node.nttttelse if ( href !== &#39;&#39; ) {ntttttconst attributes = toMap(
selection.getAttributes() );nntttttattributes.set( &#39;linkHref&#39;, href
);nntttttconst node = writer.createText( href, attributes
);nntttttwriter.insert( node, position );nnttttt// Create new range
wrapping created node.ntttttwriter.setSelection( Range.createOn( node )
);ntttt}nttt} else {ntttt// If selection has non-collapsed ranges, we
change attribute on nodes inside those rangesntttt// omitting nodes where
`linkHref` attribute is disallowed.nttttconst ranges =
model.schema.getValidRanges( selection.getRanges(), &#39;linkHref&#39;
);nnttttfor ( const range of ranges ) {ntttttwriter.setAttribute(
&#39;linkHref&#39;, href, range );ntttt}nttt}ntt}
);nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-link/src/linkcommand.jsn// module id = nulln// module chunks =
“,”/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben. All
rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
link/utilsn */nnconst linkElementSymbol = Symbol( &#39;linkElement&#39;
);nn/**n * Returns `true` if a given view node is the link element.n *n *
@param {module:engine/view/node~Node} noden * @return {Boolean}n */nexport
function isLinkElement( node ) {ntreturn node.is(
&#39;attributeElement&#39; ) &amp;&amp; !!node.getCustomProperty(
linkElementSymbol );n}nn/**n * Creates link {@link
module:engine/view/attributeelement~AttributeElement} with provided `href`
attribute.n *n * @param {String} hrefn * @return
{module:engine/view/attributeelement~AttributeElement}n */nexport function
createLinkElement( href, writer ) {nt// Priority 5 - <a
href="https://github.com/ckeditor/ckeditor5-link/issues/121.\n\tconst">github.com/ckeditor/ckeditor5-link/issues/121.ntconst</a>
linkElement = writer.createAttributeElement( &#39;a&#39;, { href }, {
priority: 5 } );ntwriter.setCustomProperty( linkElementSymbol, true,
linkElement );nntreturn linkElement;n}nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-link/src/utils.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module engine/utils/bindtwostepcarettoattributen */nnimport { keyCodes }
from &#39;@ckeditor/ckeditor5-utils/src/keyboard&#39;;nimport priorities
from &#39;@ckeditor/ckeditor5-utils/src/priorities&#39;;nn/**n * This
helper enabled the two-step caret (phantom) movement behavior for the given
{@link module:engine/model/model~Model}n * attribute on arrow right
(&lt;kbd&gt;→&lt;/kbd&gt;) and left (&lt;kbd&gt;←&lt;/kbd&gt;) key press.n
*n * Thanks to this (phantom) caret movement the user is able to type
before/after as well as at then * beginning/end of an attribute.n *n * #
Forward movementn *n * ## "Entering&quot; an attribute:n *n * When this
behavior is enabled for the `a` attribute and the selection is right before
itn * (at the attribute boundary), pressing the right arrow key will not
move the selection but update itsn * attributes accordingly:n *n * * When
enabled:n *n *   ttfoo{}&lt;$text a=&quot;true&quot;&gt;bar&lt;/$text&gt;n
*n *    &lt;kbd&gt;→&lt;/kbd&gt;n *n *   ttfoo&lt;$text
a=&quot;true&quot;&gt;{}bar&lt;/$text&gt;n *n * * When disabled:n *n *  
ttfoo{}&lt;$text a=&quot;true&quot;&gt;bar&lt;/$text&gt;n *n *  
&lt;kbd&gt;→&lt;/kbd&gt;n *n *   ttfoo&lt;$text
a=&quot;true&quot;&gt;b{}ar&lt;/$text&gt;n *n *n * ## "Leaving&quot; an
attribute:n *n * * When enabled:n *n *   tt&lt;$text
a=&quot;true&quot;&gt;bar{}&lt;/$text&gt;bazn *n *   
&lt;kbd&gt;→&lt;/kbd&gt;n *n *   tt&lt;$text
a=&quot;true&quot;&gt;bar&lt;/$text&gt;{}bazn *n * * When disabled:n *n *  
tt&lt;$text a=&quot;true&quot;&gt;bar{}&lt;/$text&gt;bazn *n *  
&lt;kbd&gt;→&lt;/kbd&gt;n *n *   tt&lt;$text
a=&quot;true&quot;&gt;bar&lt;/$text&gt;b{}azn *n * # Backward movementn *n
* * When enabled:n *n *   tt&lt;$text
a=&quot;true&quot;&gt;bar&lt;/$text&gt;{}bazn *n *   
&lt;kbd&gt;←&lt;/kbd&gt;n *n *   tt&lt;$text
a=&quot;true&quot;&gt;bar{}&lt;/$text&gt;bazn *n * * When disabled:n *n *  
tt&lt;$text a=&quot;true&quot;&gt;bar&lt;/$text&gt;{}bazn *n *  
&lt;kbd&gt;←&lt;/kbd&gt;n *n *   tt&lt;$text
a=&quot;true&quot;&gt;ba{}r&lt;/$text&gt;b{}azn *n * @param
{module:engine/view/view~View} view View controller instance.n * @param
{module:engine/model/model~Model} model Data model instance.n * @param
{module:utils/dom/emittermixin~Emitter} emitter The emitter to which this
behavior should be addedn * (e.g. a plugin instance).n * @param {String}
attribute Attribute for which this behavior will be added.n */nexport
default function bindTwoStepCaretToAttribute( view, model, emitter,
attribute ) {ntconst twoStepCaretHandler = new TwoStepCaretHandler( model,
emitter, attribute );ntconst modelSelection =
model.document.selection;nnt// Listen to keyboard events and handle the
caret movement according to the 2-step caret logic.nt//nt// Note: This
listener has the "high+1&quot; priority:nt// * "high&quot; because of the
filler logic implemented in the renderer which also engages on keydown.nt//
When the gravity is overridden the attributes of the (model) selection
attributes are reset.nt// It may end up with the filler kicking in and
breaking the selection.nt// * "+1&quot; because we would like to avoid
collisions with other features (like Widgets), whichnt// take over the
keydown events with the "high&quot; priority. Two-step caret movement takes
precedencent// over Widgets in that matter.nt//nt// Find out more in <a
href="https://github.com/ckeditor/ckeditor5-engine/issues/1301.\n\temitter.listenTo">github.com/ckeditor/ckeditor5-engine/issues/1301.ntemitter.listenTo</a>(
view.document, &#39;keydown&#39;, ( evt, data ) =&gt; {ntt// This
implementation works only for collapsed selection.nttif (
!modelSelection.isCollapsed ) {ntttreturn;ntt}nntt// When user tries to
expand the selection or jump over the whole word or to the beginning/end
thenntt// two-steps movement is not necessary.nttif ( data.shiftKey ||
data.altKey || data.ctrlKey ) {ntttreturn;ntt}nnttconst arrowRightPressed =
data.keyCode == keyCodes.arrowright;nttconst arrowLeftPressed =
data.keyCode == keyCodes.arrowleft;nntt// When neither left or right arrow
has been pressed then do noting.nttif ( !arrowRightPressed &amp;&amp;
!arrowLeftPressed ) {ntttreturn;ntt}nnttconst position =
modelSelection.getFirstPosition();nttlet isMovementHandled;nnttif (
arrowRightPressed ) {ntttisMovementHandled =
twoStepCaretHandler.handleForwardMovement( position, data );ntt} else
{ntttisMovementHandled = twoStepCaretHandler.handleBackwardMovement(
position, data );ntt}nntt// Stop the keydown event if the two-step arent
movement handled it. Avoid collisionsntt// with other features which may
also take over the caret movement (e.g. Widget).nttif ( isMovementHandled )
{ntttevt.stop();ntt}nt}, { priority: priorities.get( &#39;high&#39; ) + 1 }
);n}nn/**n * This is a private helper–class for {@link
module:engine/utils/bindtwostepcarettoattribute}.n * It handles the state
of the 2-step caret movement for a single {@link
module:engine/model/model~Model}n * attribute upon the `keypress` in the
{@link module:engine/view/view~View}.n *n * @privaten */nclass
TwoStepCaretHandler {nt/*nt * Creates two step handler instance.nt *nt *
@param {module:engine/model/model~Model} model Data model instance.nt *
@param {module:utils/dom/emittermixin~Emitter} emitter The emitter to which
this behavior should be addednt * (e.g. a plugin instance).nt * @param
{String} attribute Attribute for which the behavior will be added.nt
*/ntconstructor( model, emitter, attribute ) {ntt/**ntt * The model
instance this class instance operates on.ntt *ntt * @readonlyntt * @member
{module:engine/model/model~Model#schema}ntt */nttthis.model =
model;nntt/**ntt * The Attribute this class instance operates on.ntt *ntt *
@readonlyntt * @member {String}ntt */nttthis.attribute =
attribute;nntt/**ntt * A reference to the document selection.ntt *ntt *
@privatentt * @member {module:engine/model/selection~Selection}ntt
*/nttthis._modelSelection = model.document.selection;nntt/**ntt * The
current UID of the overridden gravity, as returned byntt * {@link
module:engine/model/writer~Writer#overrideSelectionGravity}.ntt *ntt *
@privatentt * @member {String}ntt */nttthis._overrideUid = null;nntt/**ntt
* A flag indicating that the automatic gravity restoration for this
attributentt * should not happen upon the nextntt * {@link
module:engine/model/selection~Selection#event:change:range} event.ntt *ntt
* @privatentt * @member {String}ntt
*/nttthis._isNextGravityRestorationSkipped = false;nntt// The automatic
gravity restoration logic.nttemitter.listenTo( this._modelSelection,
&#39;change:range&#39;, ( evt, data ) =&gt; {nttt// Skipping the automatic
restoration is needed if the selection should changenttt// but the gravity
must remain overridden afterwards. See the handleBackwardMovementnttt// to
learn more.ntttif ( this._isNextGravityRestorationSkipped )
{nttttthis._isNextGravityRestorationSkipped =
false;nnttttreturn;nttt}nnttt// Skip automatic restore when the gravity is
not overridden — simply, there&#39;s nothing to restorenttt// at this
moment.ntttif ( !this._isGravityOverridden ) {nttttreturn;nttt}nnttt// Skip
automatic restore when the change is indirect AND the selection is at the
attribute boundary.nttt// It means that e.g. if the change was external
(collaboration) and the user had theirnttt// selection around the link, its
gravity should remain intact in this change:range event.ntttif (
!data.directChange &amp;&amp; isAtBoundary(
this._modelSelection.getFirstPosition(), attribute ) )
{nttttreturn;nttt}nntttthis._restoreGravity();ntt} );nt}nnt/**nt * Updates
the document selection and the view according to the two–step caret
movement statent * when moving *forwards*. Executed upon `keypress` in the
{@link module:engine/view/view~View}.nt *nt * @param
{module:engine/model/position~Position} position The model position at the
moment of the key press.nt * @param
{module:engine/view/observer/domeventdata~DomEventData} data Data of the
key press.nt * @returns {Boolean} `true` when the handler prevented caret
movementnt */nthandleForwardMovement( position, data ) {nttconst attribute
= this.attribute;nntt// DON&#39;T ENGAGE 2-SCM if gravity is already
overridden. It means that we just enteredntt//ntt//
tt&lt;paragraph&gt;foo&lt;$text
attribute&gt;{}bar&lt;/$text&gt;baz&lt;/paragraph&gt;ntt//ntt// or left the
attributentt//ntt// tt&lt;paragraph&gt;foo&lt;$text
attribute&gt;bar&lt;/$text&gt;{}baz&lt;/paragraph&gt;ntt//ntt// and the
gravity will be restored automatically.nttif ( this._isGravityOverridden )
{ntttreturn;ntt}nntt// DON&#39;T ENGAGE 2-SCM when the selection is at the
beginning of the block AND already has thentt// attribute:ntt// * when the
selection was initially set there using the mouse,ntt// * when the editor
has just startedntt//ntt//tt&lt;paragraph&gt;&lt;$text
attribute&gt;{}bar&lt;/$text&gt;baz&lt;/paragraph&gt;ntt//nttif (
position.isAtStart &amp;&amp; this._hasSelectionAttribute )
{ntttreturn;ntt}nntt// ENGAGE 2-SCM when about to leave one attribute value
and enter another:ntt//ntt// tt&lt;paragraph&gt;&lt;$text
attribute=&quot;1&quot;&gt;foo{}&lt;/$text&gt;&lt;$text
attribute=&quot;2&quot;&gt;bar&lt;/$text&gt;&lt;/paragraph&gt;ntt//ntt//
but DON&#39;T when already in between of them (no attribute
selection):ntt//ntt// tt&lt;paragraph&gt;&lt;$text
attribute=&quot;1&quot;&gt;foo&lt;/$text&gt;{}&lt;$text
attribute=&quot;2&quot;&gt;bar&lt;/$text&gt;&lt;/paragraph&gt;ntt//nttif (
isBetweenDifferentValues( position, attribute ) &amp;&amp;
this._hasSelectionAttribute ) {ntttthis._preventCaretMovement( data
);ntttthis._removeSelectionAttribute();nntttreturn true;ntt}nntt// ENGAGE
2-SCM when entering an attribute:ntt//ntt//
tt&lt;paragraph&gt;foo{}&lt;$text
attribute&gt;bar&lt;/$text&gt;baz&lt;/paragraph&gt;ntt//nttif (
isAtStartBoundary( position, attribute ) ) {ntttthis._preventCaretMovement(
data );ntttthis._overrideGravity();nntttreturn true;ntt}nntt// ENGAGE 2-SCM
when leaving an attribute:ntt//ntt//tt&lt;paragraph&gt;foo&lt;$text
attribute&gt;bar{}&lt;/$text&gt;baz&lt;/paragraph&gt;ntt//nttif (
isAtEndBoundary( position, attribute ) &amp;&amp;
this._hasSelectionAttribute ) {ntttthis._preventCaretMovement( data
);ntttthis._overrideGravity();nntttreturn true;ntt}nt}nnt/**nt * Updates
the document selection and the view according to the two–step caret
movement statent * when moving *backwards*. Executed upon `keypress` in the
{@link module:engine/view/view~View}.nt *nt * @param
{module:engine/model/position~Position} position The model position at the
moment of the key press.nt * @param
{module:engine/view/observer/domeventdata~DomEventData} data Data of the
key press.nt * @returns {Boolean} `true` when the handler prevented caret
movementnt */nthandleBackwardMovement( position, data ) {nttconst attribute
= this.attribute;nntt// When the gravity is already overridden…nttif (
this._isGravityOverridden ) {nttt// ENGAGE 2-SCM &amp; REMOVE SELECTION
ATTRIBUTEnttt// when about to leave one attribute value and enter
another:nttt//nttt// tt&lt;paragraph&gt;&lt;$text
attribute=&quot;1&quot;&gt;foo&lt;/$text&gt;&lt;$text
attribute=&quot;2&quot;&gt;{}bar&lt;/$text&gt;&lt;/paragraph&gt;nttt//nttt//
but DON&#39;T when already in between of them (no attribute
selection):nttt//nttt// tt&lt;paragraph&gt;&lt;$text
attribute=&quot;1&quot;&gt;foo&lt;/$text&gt;{}&lt;$text
attribute=&quot;2&quot;&gt;bar&lt;/$text&gt;&lt;/paragraph&gt;nttt//ntttif
( isBetweenDifferentValues( position, attribute ) &amp;&amp;
this._hasSelectionAttribute ) {nttttthis._preventCaretMovement( data
);nttttthis._restoreGravity();nttttthis._removeSelectionAttribute();nnttttreturn
true;nttt}nnttt// ENGAGE 2-SCM when at any boundary of the
attribute:nttt//nttt// tt&lt;paragraph&gt;foo&lt;$text
attribute&gt;bar&lt;/$text&gt;{}baz&lt;/paragraph&gt;nttt//
tt&lt;paragraph&gt;foo&lt;$text
attribute&gt;{}bar&lt;/$text&gt;baz&lt;/paragraph&gt;nttt//ntttelse
{nttttthis._preventCaretMovement( data
);nttttthis._restoreGravity();nntttt// REMOVE SELECTION ATRIBUTE at the
beginning of the block.ntttt// It&#39;s like restoring gravity but towards
a non-existent content whenntttt// the gravity is overridden:ntttt//ntttt//
tt&lt;paragraph&gt;&lt;$text
attribute&gt;{}bar&lt;/$text&gt;&lt;/paragraph&gt;ntttt//ntttt//
becomes:ntttt//ntttt// tt&lt;paragraph&gt;{}&lt;$text
attribute&gt;bar&lt;/$text&gt;&lt;/paragraph&gt;ntttt//nttttif (
position.isAtStart )
{ntttttthis._removeSelectionAttribute();ntttt}nnttttreturn true;nttt}ntt}
else {nttt// ENGAGE 2-SCM when between two different attribute values but
selection has no attribute:nttt//nttt// tt&lt;paragraph&gt;&lt;$text
attribute=&quot;1&quot;&gt;foo&lt;/$text&gt;{}&lt;$text
attribute=&quot;2&quot;&gt;bar&lt;/$text&gt;&lt;/paragraph&gt;nttt//ntttif
( isBetweenDifferentValues( position, attribute ) &amp;&amp;
!this._hasSelectionAttribute ) {nttttthis._preventCaretMovement( data
);nttttthis._setSelectionAttributeFromTheNodeBefore( position
);nnttttreturn true;nttt}nnttt// End of block boundary cases:nttt//nttt//
tt&lt;paragraph&gt;&lt;$text
attribute&gt;bar{}&lt;/$text&gt;&lt;/paragraph&gt;nttt//
tt&lt;paragraph&gt;&lt;$text
attribute&gt;bar&lt;/$text&gt;{}&lt;/paragraph&gt;nttt//ntttif (
position.isAtEnd &amp;&amp; isAtEndBoundary( position, attribute ) )
{ntttt// DON&#39;T ENGAGE 2-SCM if the selection has the attribute
already.ntttt// This is a common selection if set using the
mouse.ntttt//ntttt// tt&lt;paragraph&gt;&lt;$text
attribute&gt;bar{}&lt;/$text&gt;&lt;/paragraph&gt;ntttt//nttttif (
this._hasSelectionAttribute ) {nttttt// DON&#39;T ENGAGE 2-SCM if the
attribute at the end of the block which has length == 1.nttttt// Make sure
the selection will not the attribute after it moves
backwards.nttttt//nttttt// tt&lt;paragraph&gt;foo&lt;$text
attribute&gt;b{}&lt;/$text&gt;&lt;/paragraph&gt;nttttt//ntttttif (
isStepAfterTheAttributeBoundary( position, attribute ) ) {ntttttt// Skip
the automatic gravity restore upon the next selection#change:range
event.ntttttt// If not skipped, it would automatically restore the gravity,
which should remainntttttt//
overridden.nttttttthis._skipNextAutomaticGravityRestoration();nttttttthis._overrideGravity();nntttttt//
Don&#39;t return "true&quot; here because we didn&#39;t call
_preventCaretMovement.ntttttt// Returning here will destabilize the filler
logic, which also listens tontttttt// keydown (and the event would be
stopped).nttttt}nntttttreturn;ntttt}ntttt// ENGAGE 2-SCM if the selection
has no attribute. This may happen when the userntttt// left the attribute
using a FORWARD 2-SCM.ntttt//ntttt// tt&lt;paragraph&gt;&lt;$text
attribute&gt;bar&lt;/$text&gt;{}&lt;/paragraph&gt;ntttt//nttttelse
{ntttttthis._preventCaretMovement( data
);ntttttthis._setSelectionAttributeFromTheNodeBefore( position
);nntttttreturn true;ntttt}nttt}nnttt// REMOVE SELECTION ATRIBUTE when
restoring gravity towards a non-existent content at thenttt// beginning of
the block.nttt//nttt// tt&lt;paragraph&gt;{}&lt;$text
attribute&gt;bar&lt;/$text&gt;&lt;/paragraph&gt;nttt//ntttif (
position.isAtStart ) {nttttif ( this._hasSelectionAttribute )
{ntttttthis._removeSelectionAttribute();ntttttthis._preventCaretMovement(
data );nntttttreturn true;ntttt}nnttttreturn;nttt}nnttt// DON&#39;T ENGAGE
2-SCM when about to enter of leave an attribute.nttt// We need to check if
the caret is a one position before the attribute boundary:nttt//nttt//
tt&lt;paragraph&gt;foo&lt;$text
attribute&gt;b{}ar&lt;/$text&gt;baz&lt;/paragraph&gt;nttt//
tt&lt;paragraph&gt;foo&lt;$text
attribute&gt;bar&lt;/$text&gt;b{}az&lt;/paragraph&gt;nttt//ntttif (
isStepAfterTheAttributeBoundary( position, attribute ) ) {ntttt// Skip the
automatic gravity restore upon the next selection#change:range
event.ntttt// If not skipped, it would automatically restore the gravity,
which should remainntttt//
overridden.nttttthis._skipNextAutomaticGravityRestoration();nttttthis._overrideGravity();nntttt//
Don&#39;t return "true&quot; here because we didn&#39;t call
_preventCaretMovement.ntttt// Returning here will destabilize the filler
logic, which also listens tontttt// keydown (and the event would be
stopped).nttt}ntt}nt}nnt/**nt * `true` when the gravity is overridden for
the {@link attribute}.nt *nt * @readonlynt * @privatent * @type {Boolean}nt
*/ntget _isGravityOverridden() {nttreturn !!this._overrideUid;nt}nnt/**nt *
`true` when the {@link module:engine/model/selection~Selection} has the
{@link attribute}.nt *nt * @readonlynt * @privatent * @type {Boolean}nt
*/ntget _hasSelectionAttribute() {nttreturn
this._modelSelection.hasAttribute( this.attribute );nt}nnt/**nt * Overrides
the gravity using the {@link module:engine/model/writer~Writer model
writer}nt * and stores the information about this fact in the {@link
#_overrideUid}.nt *nt * A shorthand for {@link
module:engine/model/writer~Writer#overrideSelectionGravity}.nt *nt *
@privatent */nt_overrideGravity() {nttthis._overrideUid =
this.model.change( writer =&gt; writer.overrideSelectionGravity()
);nt}nnt/**nt * Restores the gravity using the {@link
module:engine/model/writer~Writer model writer}.nt *nt * A shorthand for
{@link module:engine/model/writer~Writer#restoreSelectionGravity}.nt *nt *
@privatent */nt_restoreGravity() {nttthis.model.change( writer =&gt;
{ntttwriter.restoreSelectionGravity( this._overrideUid
);ntttthis._overrideUid = null;ntt} );nt}nnt/**nt * Prevents the caret
movement in the view by calling `preventDefault` on the event data.nt *nt *
@privatent */nt_preventCaretMovement( data )
{nttdata.preventDefault();nt}nnt/**nt * Removes the {@link attribute} from
the selection using using thent * {@link module:engine/model/writer~Writer
model writer}.nt *nt * @privatent */nt_removeSelectionAttribute()
{nttthis.model.change( writer =&gt; {ntttwriter.removeSelectionAttribute(
this.attribute );ntt} );nt}nnt/**nt * Applies the {@link attribute} to the
current selection using using thent * value from the node before the
current position. Usesnt * the {@link module:engine/model/writer~Writer
model writer}.nt *nt * @privatent * @param
{module:engine/model/position~Position} positionnt
*/nt_setSelectionAttributeFromTheNodeBefore( position ) {nttconst attribute
= this.attribute;nnttthis.model.change( writer =&gt;
{ntttwriter.setSelectionAttribute( this.attribute,
position.nodeBefore.getAttribute( attribute ) );ntt} );nt}nnt/**nt * Skips
the next automatic selection gravity restoration upon thent * {@link
module:engine/model/selection~Selection#event:change:range} event.nt *nt *
See {@link #_isNextGravityRestorationSkipped}.nt *nt * @privatent
*/nt_skipNextAutomaticGravityRestoration()
{nttthis._isNextGravityRestorationSkipped = true;nt}n}nn// @param
{module:engine/model/position~Position} positionn// @param {String}
attributen// @returns {Boolean} `true` when position between the nodes
sticks to the bound of text with given attribute.nfunction isAtBoundary(
position, attribute ) {ntreturn isAtStartBoundary( position, attribute ) ||
isAtEndBoundary( position, attribute );n}nn// @param
{module:engine/model/position~Position} positionn// @param {String}
attributenfunction isAtStartBoundary( position, attribute ) {ntconst {
nodeBefore, nodeAfter } = position;ntconst isAttrBefore = nodeBefore ?
nodeBefore.hasAttribute( attribute ) : false;ntconst isAttrAfter =
nodeAfter ? nodeAfter.hasAttribute( attribute ) : false;nntreturn
isAttrAfter &amp;&amp; ( !isAttrBefore || nodeBefore.getAttribute(
attribute ) !== nodeAfter.getAttribute( attribute ) );n}nn// @param
{module:engine/model/position~Position} positionn// @param {String}
attributenfunction isAtEndBoundary( position, attribute ) {ntconst {
nodeBefore, nodeAfter } = position;ntconst isAttrBefore = nodeBefore ?
nodeBefore.hasAttribute( attribute ) : false;ntconst isAttrAfter =
nodeAfter ? nodeAfter.hasAttribute( attribute ) : false;nntreturn
isAttrBefore &amp;&amp; ( !isAttrAfter || nodeBefore.getAttribute(
attribute ) !== nodeAfter.getAttribute( attribute ) );n}nn// @param
{module:engine/model/position~Position} positionn// @param {String}
attributenfunction isBetweenDifferentValues( position, attribute ) {ntconst
{ nodeBefore, nodeAfter } = position;ntconst isAttrBefore = nodeBefore ?
nodeBefore.hasAttribute( attribute ) : false;ntconst isAttrAfter =
nodeAfter ? nodeAfter.hasAttribute( attribute ) : false;nntif (
!isAttrAfter || !isAttrBefore ) {nttreturn;nt}nntreturn
nodeAfter.getAttribute( attribute ) !== nodeBefore.getAttribute( attribute
);n}nn// @param {module:engine/model/position~Position} positionn// @param
{String} attributenfunction isStepAfterTheAttributeBoundary( position,
attribute ) {ntreturn isAtBoundary( position.getShiftedBy( -1 ), attribute
);n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/utils/bindtwostepcarettoattribute.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */n/**n * @module link/linkuin */nimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport ClickObserver from
&#39;@ckeditor/ckeditor5-engine/src/view/observer/clickobserver&#39;;nimport
Range from &#39;@ckeditor/ckeditor5-engine/src/view/range&#39;;nimport {
isLinkElement } from &#39;./utils&#39;;nimport ContextualBalloon from
&#39;@ckeditor/ckeditor5-ui/src/panel/balloon/contextualballoon&#39;;nimport
clickOutsideHandler from
&#39;@ckeditor/ckeditor5-ui/src/bindings/clickoutsidehandler&#39;;nimport
ButtonView from
&#39;@ckeditor/ckeditor5-ui/src/button/buttonview&#39;;nimport LinkFormView
from &#39;./ui/linkformview&#39;;nimport LinkActionsView from
&#39;./ui/linkactionsview&#39;;nimport linkIcon from
&#39;../theme/icons/link.svg&#39;;nconst linkKeystroke =
&#39;Ctrl+K&#39;;n/**n * The link UI plugin. It introduces the Link and
Unlink buttons and the &lt;kbd&gt;Ctrl+K&lt;/kbd&gt; keystroke.n *n * It
uses then * {@link
module:ui/panel/balloon/contextualballoon~ContextualBalloon contextual
balloon plugin}.n *n * @extends module:core/plugin~Pluginn */nexport
default class LinkUI extends Plugin {n    /**nt * @inheritDocnt */n   
static get requires() {n        return [ContextualBalloon];n    }n    /**nt
* @inheritDocnt */n    init() {n        const editor = this.editor;n       
editor.editing.view.addObserver(ClickObserver);n        /**ntt * The
actions view displayed inside of the balloon.ntt *ntt * @member
{module:link/ui/linkactionsview~LinkActionsView}ntt */n       
this.actionsView = this._createActionsView();n        /**ntt * The form
view displayed inside the balloon.ntt *ntt * @member
{module:link/ui/linkformview~LinkFormView}ntt */n        this.formView =
this._createFormView();n        /**ntt * The contextual balloon plugin
instance.ntt *ntt * @privatentt * @member
{module:ui/panel/balloon/contextualballoon~ContextualBalloon}ntt */n       
this._balloon = editor.plugins.get(ContextualBalloon);n        // Create
toolbar buttons.n        this._createToolbarLinkButton();n        // Attach
lifecycle actions to the the balloon.n       
this._enableUserBalloonInteractions();n    }n    /**nt * Creates the {@link
module:link/ui/linkactionsview~LinkActionsView} instance.nt *nt *
@privatent * @returns {module:link/ui/linkactionsview~LinkActionsView} The
link actions view instance.nt */n    _createActionsView() {n        const
editor = this.editor;n        const actionsView = new
LinkActionsView(editor.locale);n        const linkCommand =
editor.commands.get(&#39;link&#39;);n        const unlinkCommand =
editor.commands.get(&#39;unlink&#39;);n       
actionsView.bind(&#39;href&#39;).to(linkCommand, &#39;value&#39;);n       
actionsView.editButtonView.bind(&#39;isEnabled&#39;).to(linkCommand);n     
actionsView.unlinkButtonView.bind(&#39;isEnabled&#39;).to(unlinkCommand);n 
// Execute unlink command after clicking on the "Edit&quot; button.n       
this.listenTo(actionsView, &#39;edit&#39;, () =&gt; {n           
this._addFormView();n        });n        // Execute unlink command after
clicking on the "Unlink&quot; button.n        this.listenTo(actionsView,
&#39;unlink&#39;, () =&gt; {n            editor.execute(&#39;unlink&#39;);n
this._hideUI();n        });n        // Close the panel on esc key press
when the **actions have focus**.n       
actionsView.keystrokes.set(&#39;Esc&#39;, (data, cancel) =&gt; {n          
this._hideUI();n            cancel();n        });n        // Open the form
view on Ctrl+K when the **actions have focus**..n       
actionsView.keystrokes.set(linkKeystroke, (data, cancel) =&gt; {n          
this._addFormView();n            cancel();n        });n        return
actionsView;n    }n    /**nt * Creates the {@link
module:link/ui/linkformview~LinkFormView} instance.nt *nt * @privatent *
@returns {module:link/ui/linkformview~LinkFormView} The link form
instance.nt */n    _createFormView() {n        const editor = this.editor;n
const formView = new LinkFormView(editor.locale);n        const linkCommand
= editor.commands.get(&#39;link&#39;);n       
formView.urlInputView.bind(&#39;value&#39;).to(linkCommand,
&#39;value&#39;);n        // Form elements should be read-only when
corresponding commands are disabled.n       
formView.urlInputView.bind(&#39;isReadOnly&#39;).to(linkCommand,
&#39;isEnabled&#39;, value =&gt; !value);n       
formView.saveButtonView.bind(&#39;isEnabled&#39;).to(linkCommand);n       
// Execute link command after clicking the "Save&quot; button.n       
this.listenTo(formView, &#39;submit&#39;, () =&gt; {n           
editor.execute(&#39;link&#39;,
formView.urlInputView.inputView.element.value);n           
this._removeFormView();n        });n        // Hide the panel after
clicking the "Cancel&quot; button.n        this.listenTo(formView,
&#39;cancel&#39;, () =&gt; {n            this._removeFormView();n       
});n        // Close the panel on esc key press when the **form has
focus**.n        formView.keystrokes.set(&#39;Esc&#39;, (data, cancel)
=&gt; {n            this._removeFormView();n            cancel();n       
});n        return formView;n    }n    /**nt * Creates a toolbar Link
button. Clicking this button will shownt * a {@link #_balloon} attached to
the selection.nt *nt * @privatent */n    _createToolbarLinkButton() {n     
const editor = this.editor;n        const linkCommand =
editor.commands.get(&#39;link&#39;);n        const t = editor.t;n        //
Handle the `Ctrl+K` keystroke and show the panel.n       
editor.keystrokes.set(linkKeystroke, (keyEvtData, cancel) =&gt; {n         
// Prevent focusing the search bar in FF and opening new tab in Edge. #153,
#154.n            cancel();n            if (linkCommand.isEnabled) {n      
this._showUI();n            }n        });n       
editor.ui.componentFactory.add(&#39;link&#39;, locale =&gt; {n           
const button = new ButtonView(locale);n            button.isEnabled =
true;n            button.label = t(&#39;m&#39;);n            button.icon =
linkIcon;n            button.keystroke = linkKeystroke;n           
button.tooltip = true;n            // Bind button to the command.n         
button.bind(&#39;isEnabled&#39;).to(linkCommand, &#39;isEnabled&#39;);n    
// Show the panel on button click.n            this.listenTo(button,
&#39;execute&#39;, () =&gt; this._showUI());n            return button;n   
});n    }n    /**nt * Attaches actions that control whether the balloon
panel containing thent * {@link formView} is visible or not.nt *nt *
@privatent */n    _enableUserBalloonInteractions() {n        const
viewDocument = this.editor.editing.view.document;n        // Handle click
on view document and show panel when selection is placed inside the link
element.n        // Keep panel open until selection will be inside the same
link element.n        this.listenTo(viewDocument, &#39;click&#39;, () =&gt;
{n            const parentLink = this._getSelectedLinkElement();n          
if (parentLink) {n                // Then show panel but keep focus inside
editor editable.n                this._showUI();n            }n        });n
// Focus the form if the balloon is visible and the Tab key has been
pressed.n        this.editor.keystrokes.set(&#39;Tab&#39;, (data, cancel)
=&gt; {n            if (this._areActionsVisible &amp;&amp;
!this.actionsView.focusTracker.isFocused) {n               
this.actionsView.focus();n                cancel();n            }n       
}, {n            // Use the high priority because the link UI navigation is
more importantn            // than other feature&#39;s actions, e.g. list
indentation.n            // <a
href="https://github.com/ckeditor/ckeditor5-link/issues/146\n">github.com/ckeditor/ckeditor5-link/issues/146n</a>
priority: &#39;high&#39;n        });n        // Close the panel on the Esc
key press when the editable has focus and the balloon is visible.n       
this.editor.keystrokes.set(&#39;Esc&#39;, (data, cancel) =&gt; {n          
if (this._isUIVisible) {n                this._hideUI();n               
cancel();n            }n        });n        // Close on click outside of
balloon panel element.n        clickOutsideHandler({n            emitter:
this.formView,n            activator: () =&gt; this._isUIVisible,n         
contextElements: [this._balloon.view.element],n            callback: ()
=&gt; this._hideUI()n        });n    }n    /**nt * Adds the {@link
actionsView} to the {@link #_balloon}.nt *nt * @protectednt */n   
_addActionsView() {n        if (this._areActionsInPanel) {n           
return;n        }n        this._balloon.add({n            view:
this.actionsView,n            position: this._getBalloonPositionData()n    
});n    }n    /**nt * Adds the {@link formView} to the {@link #_balloon}.nt
*nt * @protectednt */n    _addFormView() {n        if (this._isFormInPanel)
{n            return;n        }n        const editor = this.editor;n       
const linkCommand = editor.commands.get(&#39;link&#39;);n       
this._balloon.add({n            view: this.formView,n            position:
this._getBalloonPositionData()n        });n       
this.formView.urlInputView.select();n        // Make sure that each time
the panel shows up, the URL field remains in sync with the value ofn       
// the command. If the user typed in the input, then canceled the balloon
(`urlInputView#value` staysn        // unaltered) and re-opened it without
changing the value of the link command (e.g. because theyn        //
clicked the same link), they would see the old value instead of the actual
value of the command.n        // <a
href="https://github.com/ckeditor/ckeditor5-link/issues/78\n">github.com/ckeditor/ckeditor5-link/issues/78n</a>
// <a
href="https://github.com/ckeditor/ckeditor5-link/issues/123\n">github.com/ckeditor/ckeditor5-link/issues/123n</a>
this.formView.urlInputView.inputView.element.value = linkCommand.value ||
&#39;&#39;;n    }n    /**nt * Removes the {@link formView} from the {@link
#_balloon}.nt *nt * @protectednt */n    _removeFormView() {n        if
(this._isFormInPanel) {n            this._balloon.remove(this.formView);n  
// Because the form has an input which has focus, the focus must be brought
backn            // to the editor. Otherwise, it would be lost.n           
this.editor.editing.view.focus();n        }n    }n    /**nt * Shows the
right kind of the UI for current state of the command. It&#39;s eithernt *
{@link formView} or {@link actionsView}.nt *nt * @privatent */n   
_showUI() {n        const editor = this.editor;n        const linkCommand =
editor.commands.get(&#39;link&#39;);n        if (!linkCommand.isEnabled) {n
return;n        }n        // When there&#39;s no link under the selection,
go straight to the editing UI.n        if (!this._getSelectedLinkElement())
{n            this._addActionsView();n            this._addFormView();n    
}    // If theres a link under the selection…n        else {n            //
Go to the editing UI if actions are already visible.n            if
(this._areActionsVisible) {n                this._addFormView();n          
}    // Otherwise display just the actions UI.n            else {n         
this._addActionsView();n            }n        }n        // Begin responding
to view#render once the UI is added.n       
this._startUpdatingUIOnViewRender();n    }n    /**nt * Removes the {@link
formView} from the {@link #_balloon}.nt *nt * See {@link #_addFormView},
{@link #_addActionsView}.nt *nt * @protectednt */n    _hideUI() {n       
if (!this._isUIInPanel) {n            return;n        }n        const
editingView = this.editor.editing.view;n       
this.stopListening(editingView, &#39;render&#39;);n        // Remove form
first because it&#39;s on top of the stack.n       
this._removeFormView();n        // Then remove the actions view because
it&#39;s beneath the form.n        this._balloon.remove(this.actionsView);n
// Make sure the focus always gets back to the editable.n       
editingView.focus();n    }n    /**nt * Makes the UI react to the {@link
module:engine/view/view~View#event:render} in the view tont * reposition
itself as the document changes.nt *nt * See: {@link #_hideUI} to learn when
the UI stops reacting to the `render` event.nt *nt * @protectednt */n   
_startUpdatingUIOnViewRender() {n        const editor = this.editor;n      
const editing = editor.editing;n        const editingView = editing.view;n 
let prevSelectedLink = this._getSelectedLinkElement();n        let
prevSelectionParent = getSelectionParent();n       
this.listenTo(editingView, &#39;render&#39;, () =&gt; {n            const
selectedLink = this._getSelectedLinkElement();n            const
selectionParent = getSelectionParent();n            // Hide the panel if:n 
//n            // * the selection went out of the EXISTING link element.
E.g. user moved the caret outn            //   of the link,n            //
* the selection went to a different parent when creating a NEW link. E.g.
someonen            //   else modified the document.n            // * the
selection has expanded (e.g. displaying link actions then pressing
SHIFT+Right arrow).n            //n            // Note:
#_getSelectedLinkElement will return a link for a non-collapsed selection
onlyn            // when fully selected.n            if (prevSelectedLink
&amp;&amp; !selectedLink || !prevSelectedLink &amp;&amp; selectionParent
!== prevSelectionParent) {n                this._hideUI();n            }   
// Update the position of the panel when:n                 //  * the
selection remains in the original link element,n                 //  *
there was no link element in the first place, i.e. creating a new linkn    
else {n                // If still in a link element, simply update the
position of the balloon.n                // If there was no link (e.g.
inserting one), the balloon must be movedn                // to the new
position in the editing view (a new native DOM range).n               
this._balloon.updatePosition(this._getBalloonPositionData());n           
}n            prevSelectedLink = selectedLink;n           
prevSelectionParent = selectionParent;n        });n        function
getSelectionParent() {n            return
editingView.document.selection.focus.getAncestors().reverse().find(node
=&gt; node.is(&#39;element&#39;));n        }n    }n    /**nt * Returns true
when {@link formView} is in the {@link #_balloon}.nt *nt * @readonlynt *
@protectednt * @type {Boolean}nt */n    get _isFormInPanel() {n       
return this._balloon.hasView(this.formView);n    }n    /**nt * Returns true
when {@link actionsView} is in the {@link #_balloon}.nt *nt * @readonlynt *
@protectednt * @type {Boolean}nt */n    get _areActionsInPanel() {n       
return this._balloon.hasView(this.actionsView);n    }n    /**nt * Returns
true when {@link actionsView} is in the {@link #_balloon} and it isnt *
currently visible.nt *nt * @readonlynt * @protectednt * @type {Boolean}nt
*/n    get _areActionsVisible() {n        return this._balloon.visibleView
=== this.actionsView;n    }n    /**nt * Returns true when {@link
actionsView} or {@link formView} is in the {@link #_balloon}.nt *nt *
@readonlynt * @protectednt * @type {Boolean}nt */n    get _isUIInPanel() {n
return this._isFormInPanel || this._areActionsInPanel;n    }n    /**nt *
Returns true when {@link actionsView} or {@link formView} is in the {@link
#_balloon} and it isnt * currently visible.nt *nt * @readonlynt *
@protectednt * @type {Boolean}nt */n    get _isUIVisible() {n        const
visibleView = this._balloon.visibleView;n        return visibleView ==
this.formView || this._areActionsVisible;n    }n    /**nt * Returns
positioning options for the {@link #_balloon}. They control the way the
balloon is attachednt * to the target element or selection.nt *nt * If the
selection is collapsed and inside a link element, the panel will be
attached to thent * entire link element. Otherwise, it will be attached to
the selection.nt *nt * @privatent * @returns
{module:utils/dom/position~Options}nt */n    _getBalloonPositionData() {n  
const view = this.editor.editing.view;n        const viewDocument =
view.document;n        const targetLink = this._getSelectedLinkElement();n 
const target = targetLink ? // When selection is inside link element, then
attach panel to this element.n       
view.domConverter.mapViewToDom(targetLink) : // Otherwise attach panel to
the selection.n       
view.domConverter.viewRangeToDom(viewDocument.selection.getFirstRange());n 
return { target };n    }n    /**nt * Returns the link {@link
module:engine/view/attributeelement~AttributeElement} undernt * the {@link
module:engine/view/document~Document editing view&#39;s} selection or
`null`nt * if there is none.nt *nt * *Note*: For a non–collapsed selection
the link element is only returned when *fully*nt * selected and the *only*
element within the selection boundaries.nt *nt * @privatent * @returns
{module:engine/view/attributeelement~AttributeElement|null}nt */n   
_getSelectedLinkElement() {n        const selection =
this.editor.editing.view.document.selection;n        if
(selection.isCollapsed) {n            return
findLinkElementAncestor(selection.getFirstPosition());n        } else {n   
// The range for fully selected link is usually anchored in adjacent text
nodes.n            // Trim it to get closer to the actual link element.n   
const range = selection.getFirstRange().getTrimmed();n            const
startLink = findLinkElementAncestor(range.start);n            const endLink
= findLinkElementAncestor(range.end);n            if (!startLink ||
startLink != endLink) {n                return null;n            }n        
// Check if the link element is fully selected.n            if
(Range.createIn(startLink).getTrimmed().isEqual(range)) {n               
return startLink;n            } else {n                return null;n       
}n        }n    }n}n// Returns a link element if there&#39;s one among the
ancestors of the provided `Position`.n//n// @privaten// @param
{module:engine/view/position~Position} View position to analyze.n//
@returns {module:engine/view/attributeelement~AttributeElement|null} Link
element at the position or null.nfunction findLinkElementAncestor(position)
{n    return position.getAncestors().find(ancestor =&gt;
isLinkElement(ancestor));n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-link/src/linkui.jsn// module id = nulln// module chunks =
“,”/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben. All
rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
link/linkn */nnimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport LinkEditing from
&#39;./linkediting&#39;;nimport LinkUI from &#39;./linkui&#39;;nn/**n * The
link plugin. It introduces the Link and Unlink buttons and the
&lt;kbd&gt;Ctrl+K&lt;/kbd&gt; keystroke.n *n * It loads the {@link
module:link/linkediting~LinkEditing link editing feature}n * and {@link
module:link/linkui~LinkUI link UI feature}.n *n * @extends
module:core/plugin~Pluginn */nexport default class Link extends Plugin
{nt/**nt * @inheritDocnt */ntstatic get requires() {nttreturn [
LinkEditing, LinkUI ];nt}nnt/**nt * @inheritDocnt */ntstatic get
pluginName() {nttreturn &#39;Link&#39;;nt}n}nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-link/src/link.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module list/listcommandn */nnimport Command from
&#39;@ckeditor/ckeditor5-core/src/command&#39;;nimport first from
&#39;@ckeditor/ckeditor5-utils/src/first&#39;;nn/**n * The list command. It
is used by the {@link module:list/list~List list feature}.n *n * @extends
module:core/command~Commandn */nexport default class ListCommand extends
Command {nt/**nt * Creates an instance of the command.nt *nt * @param
{module:core/editor/editor~Editor} editor The editor instance.nt * @param
{&#39;numbered&#39;|&#39;bulleted&#39;} type List type that will be handled
by this command.nt */ntconstructor( editor, type ) {nttsuper( editor
);nntt/**ntt * The type of the list created by the command.ntt *ntt *
@readonlyntt * @member {&#39;numbered&#39;|&#39;bulleted&#39;}ntt
*/nttthis.type = type == &#39;bulleted&#39; ? &#39;bulleted&#39; :
&#39;numbered&#39;;nntt/**ntt * A flag indicating whether the command is
active, which means that the selection starts in a list of the same
type.ntt *ntt * @observablentt * @readonlyntt * @member {Boolean} valuentt
*/nt}nnt/**nt * @inheritDocnt */ntrefresh() {nttthis.value =
this._getValue();nttthis.isEnabled = this._checkEnabled();nt}nnt/**nt *
Executes the command.nt *nt * @protectednt */ntexecute() {nttconst model =
this.editor.model;nttconst document = model.document;nttconst blocks =
Array.from( document.selection.getSelectedBlocks() )nttt.filter( block
=&gt; checkCanBecomeListItem( block, model.schema ) );nntt// Whether we are
turning off some items.nttconst turnOff = this.value === true;ntt// If we
are turning off items, we are going to rename them to
paragraphs.nnttmodel.change( writer =&gt; {nttt// If part of a list got
turned off, we need to handle (outdent) all of sub-items of the last
turned-off item.nttt// To be sure that model is all the time in a good
state, we first fix items below turned-off item.ntttif ( turnOff ) {ntttt//
Start from the model item that is just after the last turned-off
item.nttttlet next = blocks[ blocks.length - 1 ].nextSibling;nttttlet
currentIndent = Number.POSITIVE_INFINITY;nttttlet changes = [];nntttt//
Correct indent of all items after the last turned off item.ntttt// Rules
that should be followed:ntttt// 1. All direct sub-items of turned-off item
should become indent 0, because the first item after itntttt//    will be
the first item of a new list. Other items are at the same level, so should
have same 0 index.ntttt// 2. All items with indent lower than indent of
turned-off item should become indent 0, because theyntttt//    should not
end up as a child of any of list items that they were not children of
before.ntttt// 3. All other items should have their indent changed
relatively to it&#39;s parent.ntttt//ntttt// For example:ntttt// 1  *
——–ntttt// 2     * ——–ntttt// 3        * ——–ttt&lt;– this is turned
off.ntttt// 4           * ——–tt&lt;– this has to become indent = 0, because
it will be first item on a new list.ntttt// 5              * ——–t&lt;– this
should be still be a child of item above, so indent = 1.ntttt// 6        *
——–ttt&lt;– this has to become indent = 0, because it should not be a child
of any of items above.ntttt// 7           * ——–tt&lt;– this should be still
be a child of item above, so indent = 1.ntttt// 8     * ——–tttt&lt;– this
has to become indent = 0.ntttt// 9        * ——–ttt&lt;– this should still
be a child of item above, so indent = 1.ntttt// 10          * ——–tt&lt;–
this should still be a child of item above, so indent = 2.ntttt// 11       
* ——–tt&lt;– this should still be at the same level as item above, so
indent = 2.ntttt// 12 * ——–tttt&lt;– this and all below are left
unchanged.ntttt// 13    * ——–ntttt// 14       * ——–ntttt//ntttt// After
turning off 3 the list becomes:ntttt//ntttt// 1  * ——–ntttt// 2     *
——–ntttt//ntttt// 3  ——–ntttt//ntttt// 4  * ——–ntttt// 5     * ——–ntttt// 6
* ——–ntttt// 7     * ——–ntttt// 8  * ——–ntttt// 9     * ——–ntttt// 10      
* ——–ntttt// 11       * ——–ntttt// 12 * ——–ntttt// 13    * ——–ntttt// 14   
* ——–ntttt//ntttt// Thanks to this algorithm no lists are mismatched and no
items get unexpected children/parent, whilentttt// those parent-child
connection which are possible to maintain are still maintained. It&#39;s
worth notingntttt// that this is the same effect that we would be get by
multiple use of outdent command. However doingntttt// it like this is much
more efficient because it&#39;s less operation (less memory usage, easier
OT) andntttt// less conversion (faster).nttttwhile ( next &amp;&amp;
next.name == &#39;listItem&#39; &amp;&amp; next.getAttribute(
&#39;indent&#39; ) !== 0 ) {nttttt// Check each next list item, as long as
its indent is bigger than 0.nttttt// If the indent is 0 we are not going to
change anything anyway.ntttttconst indent = next.getAttribute(
&#39;indent&#39; );nnttttt// We check if that&#39;s item indent is lower as
current relative indent.ntttttif ( indent &lt; currentIndent ) {ntttttt//
If it is, current relative indent becomes that indent.nttttttcurrentIndent
= indent;nttttt}nnttttt// Fix indent relatively to current relative
indent.nttttt// Note, that if we just changed the current relative indent,
the newIndent will be equal to 0.ntttttconst newIndent = indent -
currentIndent;nnttttt// Save the entry in changes array. We do not apply it
at the moment, because we will need tonttttt// reverse the changes so the
last item is changed first.nttttt// This is to keep model in correct state
all the time.ntttttchanges.push( { element: next, indent: newIndent }
);nnttttt// Find next item.ntttttnext =
next.nextSibling;ntttt}nnttttchanges = changes.reverse();nnttttfor ( const
item of changes ) {ntttttwriter.setAttribute( &#39;indent&#39;,
item.indent, item.element );ntttt}nttt}nnttt// If we are turning on, we
might change some items that are already `listItem`s but with different
type.nttt// Changing one nested list item to other type should also trigger
changing all its siblings so thenttt// whole nested list is of the same
type.nttt// Example (assume changing to numbered list):nttt// * ——tttt&lt;–
do not fix, top level itemnttt//   * ——ttt&lt;– fix, because latter list
item of this item&#39;s list is changednttt//      * ——tt&lt;– do not fix,
item is not affected (different list)nttt//   * ——ttt&lt;– fix, because
latter list item of this item&#39;s list is changednttt//      * ——tt&lt;–
fix, because latter list item of this item&#39;s list is changednttt//     
* —[–tt&lt;– already in selectionnttt//   * ——ttt&lt;– already in
selectionnttt//   * ——ttt&lt;– already in selectionnttt// * ——tttt&lt;–
already in selection, but does not cause other list items to change because
is top-levelnttt//   * —]–ttt&lt;– already in selectionnttt//   *
——ttt&lt;– fix, because preceding list item of this item&#39;s list is
changednttt//      * ——tt&lt;– do not fix, item is not affected (different
list)nttt// * ——tttt&lt;– do not fix, top level itemntttif ( !turnOff )
{ntttt// Find lowest indent among selected items. This will be indicator
what is the indent ofntttt// top-most list affected by the command.nttttlet
lowestIndent = Number.POSITIVE_INFINITY;nnttttfor ( const item of blocks )
{ntttttif ( item.is( &#39;listItem&#39; ) &amp;&amp; item.getAttribute(
&#39;indent&#39; ) &lt; lowestIndent ) {nttttttlowestIndent =
item.getAttribute( &#39;indent&#39; );nttttt}ntttt}nntttt// Do not execute
the fix for top-level lists.nttttlowestIndent = lowestIndent === 0 ? 1 :
lowestIndent;nntttt// Fix types of list items that are "before&quot; the
selected blocks.ntttt_fixType( blocks, true, lowestIndent );nntttt// Fix
types of list items that are "after&quot; the selected
blocks.ntttt_fixType( blocks, false, lowestIndent );nttt}nnttt// Phew! Now
it will be easier :).nttt// For each block element that was in the
selection, we will either: turn it to list item,nttt// turn it to
paragraph, or change it&#39;s type. Or leave it as it is.nttt// Do it in
reverse as there might be multiple blocks (same as with changing
indents).ntttfor ( const element of blocks.reverse() ) {nttttif ( turnOff
&amp;&amp; element.name == &#39;listItem&#39; ) {nttttt// We are turning
off and the element is a `listItem` - it should be converted to
`paragraph`.nttttt// List item specific attributes are removed by post
fixer.ntttttwriter.rename( element, &#39;paragraph&#39; );ntttt} else if (
!turnOff &amp;&amp; element.name != &#39;listItem&#39; ) {nttttt// We are
turning on and the element is not a `listItem` - it should be converted to
`listItem`.nttttt// The order of operations is important to keep model in
correct state.ntttttwriter.setAttributes( { type: this.type, indent: 0 },
element );ntttttwriter.rename( element, &#39;listItem&#39; );ntttt} else if
( !turnOff &amp;&amp; element.name == &#39;listItem&#39; &amp;&amp;
element.getAttribute( &#39;type&#39; ) != this.type ) {nttttt// We are
turning on and the element is a `listItem` but has different type - change
it&#39;s type andnttttt// type of it&#39;s all siblings that have same
indent.ntttttwriter.setAttribute( &#39;type&#39;, this.type, element
);ntttt}nttt}ntt} );nt}nnt/**nt * Checks the command&#39;s {@link value}.nt
*nt * @privatent * @returns {Boolean} The current value.nt */nt_getValue()
{ntt// Check whether closest `listItem` ancestor of the position has a
correct type.nttconst listItem = first(
this.editor.model.document.selection.getSelectedBlocks() );nnttreturn
!!listItem &amp;&amp; listItem.is( &#39;listItem&#39; ) &amp;&amp;
listItem.getAttribute( &#39;type&#39; ) == this.type;nt}nnt/**nt * Checks
whether the command can be enabled in the current context.nt *nt *
@privatent * @returns {Boolean} Whether the command should be enabled.nt
*/nt_checkEnabled() {ntt// If command value is true it means that we are in
list item, so the command should be enabled.nttif ( this.value )
{ntttreturn true;ntt}nnttconst selection =
this.editor.model.document.selection;nttconst schema =
this.editor.model.schema;nnttconst firstBlock = first(
selection.getSelectedBlocks() );nnttif ( !firstBlock ) {ntttreturn
false;ntt}nntt// Otherwise, check if list item can be inserted at the
position start.nttreturn checkCanBecomeListItem( firstBlock, schema
);nt}n}nn// Helper function used when one or more list item have their type
changed. Fixes type of other list itemsn// that are affected by the change
(are in same lists) but are not directly in selection. The function got
extractedn// not to duplicated code, as same fix has to be performed before
and after selection.n//n// @param
{Array.&lt;module:engine/model/node~Node&gt;} blocks Blocks that are in
selection.n// @param {Boolean} isBackward Specified whether fix will be
applied for blocks before first selected block (`true`)n// or blocks after
last selected block (`false`).n// @param {Number} lowestIndent Lowest
indent among selected blocks.nfunction _fixType( blocks, isBackward,
lowestIndent ) {nt// We need to check previous sibling of first changed
item and next siblings of last changed item.ntconst startingItem =
isBackward ? blocks[ 0 ] : blocks[ blocks.length - 1 ];nntif (
startingItem.is( &#39;listItem&#39; ) ) {nttlet item = startingItem[
isBackward ? &#39;previousSibling&#39; : &#39;nextSibling&#39; ];ntt//
During processing items, keeps the lowest indent of already processed
items.ntt// This saves us from changing too many items.ntt// Following
example is for going forward as it is easier to read, however same applies
to going backward.ntt// * ——ntt//   * ——ntt//     * –[—ntt//   * ——tt&lt;–
`lowestIndent` should be 1ntt//     * –]—tt&lt;– `startingItem`,
`currentIndent` = 2, `lowestIndent` == 1ntt//     * ——tt&lt;– should be
fixed, `indent` == 2 == `currentIndent`ntt//   * ——tt&lt;– should be fixed,
set `currentIndent` to 1, `indent` == 1 == `currentIndent`ntt//     *
——tt&lt;– should not be fixed, item is in different list, `indent` = 2,
`indent` != `currentIndent`ntt//   * ——tt&lt;– should be fixed, `indent` ==
1 == `currentIndent`ntt// * ——ttt&lt;– break loop (`indent` &lt;
`lowestIndent`)nttlet currentIndent = startingItem.getAttribute(
&#39;indent&#39; );nntt// Look back until a list item with indent lower
than reference `lowestIndent`.ntt// That would be the parent of nested
sublist which contains item having `lowestIndent`.nttwhile ( item
&amp;&amp; item.is( &#39;listItem&#39; ) &amp;&amp; item.getAttribute(
&#39;indent&#39; ) &gt;= lowestIndent ) {ntttif ( currentIndent &gt;
item.getAttribute( &#39;indent&#39; ) ) {nttttcurrentIndent =
item.getAttribute( &#39;indent&#39; );nttt}nnttt// Found an item that is in
the same nested sublist.ntttif ( item.getAttribute( &#39;indent&#39; ) ==
currentIndent ) {ntttt// Just add the item to selected blocks like it was
selected by the user.nttttblocks[ isBackward ? &#39;unshift&#39; :
&#39;push&#39; ]( item );nttt}nntttitem = item[ isBackward ?
&#39;previousSibling&#39; : &#39;nextSibling&#39; ];ntt}nt}n}nn// Checks
whether the given block can be replaced by a listItem.n//n// @privaten//
@param {module:engine/model/element~Element} block A block to be tested.n//
@param {module:engine/model/schema~Schema} schema The schema of the
document.n// @returns {Boolean}nfunction checkCanBecomeListItem( block,
schema ) {ntreturn schema.checkChild( block.parent, &#39;listItem&#39; )
&amp;&amp; !schema.isObject( block );n}nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-list/src/listcommand.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module list/indentcommandn */nnimport Command from
&#39;@ckeditor/ckeditor5-core/src/command&#39;;nimport first from
&#39;@ckeditor/ckeditor5-utils/src/first&#39;;nn/**n * The list indent
command. It is used by the {@link module:list/list~List list feature}.n *n
* @extends module:core/command~Commandn */nexport default class
IndentCommand extends Command {nt/**nt * Creates an instance of the
command.nt *nt * @param {module:core/editor/editor~Editor} editor The
editor instance.nt * @param {&#39;forward&#39;|&#39;backward&#39;}
indentDirection The direction of indent. If it is equal to `backward`, the
commandnt * will outdent a list item.nt */ntconstructor( editor,
indentDirection ) {nttsuper( editor );nntt/**ntt * Determines by how much
the command will change the list item&#39;s indent attribute.ntt *ntt *
@readonlyntt * @privatentt * @member {Number}ntt */nttthis._indentBy =
indentDirection == &#39;forward&#39; ? 1 : -1;nt}nnt/**nt * @inheritDocnt
*/ntrefresh() {nttthis.isEnabled = this._checkEnabled();nt}nnt/**nt *
Indents or outdents (depends on the {@link constructor}&#39;s
`indentDirection` parameter) selected list items.nt *nt * @fires executent
*/ntexecute() {nttconst model = this.editor.model;nttconst doc =
model.document;nttlet itemsToChange = Array.from(
doc.selection.getSelectedBlocks() );nnttmodel.change( writer =&gt;
{ntttconst lastItem = itemsToChange[ itemsToChange.length - 1 ];nnttt//
Indenting a list item should also indent all the items that are already
sub-items of indented item.ntttlet next = lastItem.nextSibling;nnttt//
Check all items after last indented item, as long as their indent is bigger
than indent of that item.ntttwhile ( next &amp;&amp; next.name ==
&#39;listItem&#39; &amp;&amp; next.getAttribute( &#39;indent&#39; ) &gt;
lastItem.getAttribute( &#39;indent&#39; ) ) {nttttitemsToChange.push( next
);nnttttnext = next.nextSibling;nttt}nnttt// We need to be sure to keep
model in correct state after each small change, because convertersnttt//
bases on that state and assumes that model is correct.nttt// Because of
that, if the command outdents items, we will outdent them starting from the
last item, asnttt// it is safer.ntttif ( this._indentBy &lt; 0 )
{nttttitemsToChange = itemsToChange.reverse();nttt}nntttfor ( const item of
itemsToChange ) {nttttconst indent = item.getAttribute( &#39;indent&#39; )
+ this._indentBy;nntttt// If indent is lower than 0, it means that the item
got outdented when it was not indented.ntttt// This means that we need to
convert that list item to paragraph.nttttif ( indent &lt; 0 ) {nttttt// To
keep the model as correct as possible, first rename listItem, then remove
attributes,nttttt// as listItem without attributes is very incorrect and
will cause problems in converters.nttttt// No need to remove attributes,
will be removed by post fixer.ntttttwriter.rename( item,
&#39;paragraph&#39; );ntttt}ntttt// If indent is &gt;= 0, change the
attribute value.nttttelse {ntttttwriter.setAttribute( &#39;indent&#39;,
indent, item );ntttt}nttt}ntt} );nt}nnt/**nt * Checks whether the command
can be enabled in the current context.nt *nt * @privatent * @returns
{Boolean} Whether the command should be enabled.nt */nt_checkEnabled()
{ntt// Check whether any of position&#39;s ancestor is a list item.nttconst
listItem = first( this.editor.model.document.selection.getSelectedBlocks()
);nntt// If selection is not in a list item, the command is disabled.nttif
( !listItem || !listItem.is( &#39;listItem&#39; ) ) {ntttreturn
false;ntt}nnttif ( this._indentBy &gt; 0 ) {nttt// Cannot indent first item
in it&#39;s list. Check if before `listItem` is a list item that is in same
list.nttt// To be in the same list, the item has to have same attributes
and cannot be "split&quot; by an item with lower indent.ntttconst indent =
listItem.getAttribute( &#39;indent&#39; );ntttconst type =
listItem.getAttribute( &#39;type&#39; );nntttlet prev =
listItem.previousSibling;nntttwhile ( prev &amp;&amp; prev.is(
&#39;listItem&#39; ) &amp;&amp; prev.getAttribute( &#39;indent&#39; ) &gt;=
indent ) {nttttif ( prev.getAttribute( &#39;indent&#39; ) == indent )
{nttttt// The item is on the same level.nttttt// If it has same type, it
means that we found a preceding sibling from the same list.nttttt// If it
does not have same type, it means that `listItem` is on different list
(this can happen onlynttttt// on top level lists, though).ntttttreturn
prev.getAttribute( &#39;type&#39; ) == type;ntttt}nnttttprev =
prev.previousSibling;nttt}nnttt// Could not find similar list item, this
means that `listItem` is first in its list.ntttreturn false;ntt}nntt// If
we are outdenting it is enough to be in list item. Every list item can
always be outdented.nttreturn true;nt}n}nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-list/src/indentcommand.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module list/utilsn */nn/**n * Creates list item {@link
module:engine/view/containerelement~ContainerElement}.n *n * @param
{module:engine/view/writer~Writer} writer The writer instance.n * @returns
{module:engine/view/containerelement~ContainerElement}n */nexport function
createViewListItemElement( writer ) {ntconst viewItem =
writer.createContainerElement( &#39;li&#39; );ntviewItem.getFillerOffset =
getFillerOffset;nntreturn viewItem;n}nn// Implementation of getFillerOffset
for view list item element.n//n// @returns {Number|null} Block filler
offset or `null` if block filler is not needed.nfunction getFillerOffset()
{ntconst hasOnlyLists = !this.isEmpty &amp;&amp; ( this.getChild( 0 ).name
== &#39;ul&#39; || this.getChild( 0 ).name == &#39;ol&#39; );nntreturn
this.isEmpty || hasOnlyLists ? 0 : null;n}nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-list/src/utils.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module list/convertersn */nnimport ModelElement from
&#39;@ckeditor/ckeditor5-engine/src/model/element&#39;;nimport
ModelPosition from
&#39;@ckeditor/ckeditor5-engine/src/model/position&#39;;nimport ModelRange
from &#39;@ckeditor/ckeditor5-engine/src/model/range&#39;;nnimport
ViewPosition from
&#39;@ckeditor/ckeditor5-engine/src/view/position&#39;;nimport ViewRange
from &#39;@ckeditor/ckeditor5-engine/src/view/range&#39;;nimport
ViewTreeWalker from
&#39;@ckeditor/ckeditor5-engine/src/view/treewalker&#39;;nimport {
createViewListItemElement } from &#39;./utils&#39;;nn/**n * A model-to-view
converter for `listItem` model element insertion.n *n * It creates a
`&lt;ul&gt;&lt;li&gt;&lt;/li&gt;&lt;ul&gt;` (or `&lt;ol&gt;`) view
structure out of a `listItem` model element, inserts it at the correctn *
position, and merges the list with surrounding lists (if available).n *n *
@see
module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:insertn
* @param {module:utils/eventinfo~EventInfo} evt An object containing
information about the fired event.n * @param {Object} data Additional
information about the change.n * @param {Object} conversionApi Conversion
interface.n */nexport function modelViewInsertion( evt, data, conversionApi
) {ntconst consumable = conversionApi.consumable;nntif ( !consumable.test(
data.item, &#39;insert&#39; ) ||ntt!consumable.test( data.item,
&#39;attribute:type&#39; ) ||ntt!consumable.test( data.item,
&#39;attribute:indent&#39; )nt) {nttreturn;nt}nntconsumable.consume(
data.item, &#39;insert&#39; );ntconsumable.consume( data.item,
&#39;attribute:type&#39; );ntconsumable.consume( data.item,
&#39;attribute:indent&#39; );nntconst modelItem = data.item;ntconst
viewItem = generateLiInUl( modelItem, conversionApi );nntinjectViewList(
modelItem, viewItem, conversionApi );n}nn/**n * A model-to-view converter
for `listItem` model element removal.n *n * @see
module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:removen
* @param {module:utils/eventinfo~EventInfo} evt An object containing
information about the fired event.n * @param {Object} data Additional
information about the change.n * @param {Object} conversionApi Conversion
interface.n */nexport function modelViewRemove( evt, data, conversionApi )
{ntconst viewStart = conversionApi.mapper.toViewPosition( data.position
).getLastMatchingPosition( value =&gt; !value.item.is( &#39;li&#39; )
);ntconst viewItem = viewStart.nodeAfter;ntconst viewWriter =
conversionApi.writer;nnt// 1. Break the container after and before the list
item.nt// This will create a view list with one view list item - the one to
remove.ntviewWriter.breakContainer( ViewPosition.createBefore( viewItem )
);ntviewWriter.breakContainer( ViewPosition.createAfter( viewItem ) );nnt//
2. Remove the list with the item to remove.ntconst viewList =
viewItem.parent;ntconst viewListPrev = viewList.previousSibling;ntconst
removeRange = ViewRange.createOn( viewList );ntconst removed =
viewWriter.remove( removeRange );nnt// 3. Merge the whole created by
breaking and removing the list.ntif ( viewListPrev &amp;&amp;
viewListPrev.nextSibling ) {nttmergeViewLists( viewWriter, viewListPrev,
viewListPrev.nextSibling );nt}nnt// 4. Bring back nested list that was in
the removed &lt;li&gt;.ntconst modelItem =
conversionApi.mapper.toModelElement( viewItem );nnthoistNestedLists(
modelItem.getAttribute( &#39;indent&#39; ) + 1, data.position,
removeRange.start, viewItem, conversionApi );nnt// 5. Unbind removed view
item and all children.ntfor ( const child of ViewRange.createIn( removed
).getItems() ) {nttconversionApi.mapper.unbindViewElement( child
);nt}nntevt.stop();n}nn/**n * A model-to-view converter for `type`
attribute change on `listItem` model element.n *n * This change means that
`&lt;li&gt;` elements parent changes from `&lt;ul&gt;` to `&lt;ol&gt;` (or
vice versa). This is accomplishedn * by breaking view elements, changing
their name and merging them.n *n * @see
module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:attributen
* @param {module:utils/eventinfo~EventInfo} evt An object containing
information about the fired event.n * @param {Object} data Additional
information about the change.n * @param {Object} conversionApi Conversion
interface.n */nexport function modelViewChangeType( evt, data,
conversionApi ) {ntif ( !conversionApi.consumable.consume( data.item,
&#39;attribute:type&#39; ) ) {nttreturn;nt}nntconst viewItem =
conversionApi.mapper.toViewElement( data.item );ntconst viewWriter =
conversionApi.writer;nnt// 1. Break the container after and before the list
item.nt// This will create a view list with one view list item – the one
that changed type.ntviewWriter.breakContainer( ViewPosition.createBefore(
viewItem ) );ntviewWriter.breakContainer( ViewPosition.createAfter(
viewItem ) );nnt// 2. Change name of the view list that holds the changed
view item.nt// We cannot just change name property, because that would not
render properly.ntlet viewList = viewItem.parent;ntconst listName =
data.attributeNewValue == &#39;numbered&#39; ? &#39;ol&#39; :
&#39;ul&#39;;ntviewList = viewWriter.rename( viewList, listName );nnt// 3.
Merge the changed view list with other lists, if possible.ntmergeViewLists(
viewWriter, viewList, viewList.nextSibling );ntmergeViewLists( viewWriter,
viewList.previousSibling, viewList );nnt// 4. Consumable insertion of
children inside the item. They are already handled by re-building the item
in view.ntfor ( const child of data.item.getChildren() )
{nttconversionApi.consumable.consume( child, &#39;insert&#39; );nt}n}nn/**n
* A model-to-view converter for `indent` attribute change on `listItem`
model element.n *n * @see
module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:attributen
* @param {module:utils/eventinfo~EventInfo} evt An object containing
information about the fired event.n * @param {Object} data Additional
information about the change.n * @param {Object} conversionApi Conversion
interface.n */nexport function modelViewChangeIndent( evt, data,
conversionApi ) {ntif ( !conversionApi.consumable.consume( data.item,
&#39;attribute:indent&#39; ) ) {nttreturn;nt}nntconst viewItem =
conversionApi.mapper.toViewElement( data.item );ntconst viewWriter =
conversionApi.writer;nnt// 1. Break the container after and before the list
item.nt// This will create a view list with one view list item – the one
that changed type.ntviewWriter.breakContainer( ViewPosition.createBefore(
viewItem ) );ntviewWriter.breakContainer( ViewPosition.createAfter(
viewItem ) );nnt// 2. Extract view list with changed view list item and
merge "hole&quot; possibly created by breaking and removing
elements.ntconst viewList = viewItem.parent;ntconst viewListPrev =
viewList.previousSibling;ntconst removeRange = ViewRange.createOn( viewList
);ntviewWriter.remove( removeRange );nntif ( viewListPrev &amp;&amp;
viewListPrev.nextSibling ) {nttmergeViewLists( viewWriter, viewListPrev,
viewListPrev.nextSibling );nt}nnt// 3. Bring back nested list that was in
the removed &lt;li&gt;.nthoistNestedLists( data.attributeOldValue + 1,
data.range.start, removeRange.start, viewItem, conversionApi );nnt// 4.
Inject view list like it is newly inserted.ntinjectViewList( data.item,
viewItem, conversionApi );nnt// 5. Consume insertion of children inside the
item. They are already handled by re-building the item in view.ntfor (
const child of data.item.getChildren() )
{nttconversionApi.consumable.consume( child, &#39;insert&#39; );nt}n}nn/**n
* A special model-to-view converter introduced by the {@link
module:list/list~List list feature}. This converter is fired forn * insert
change of every model item, and should be fired before the actual
converter. The converter checks whether the insertedn * model item is a
non-`listItem` element. If it is, and it is inserted inside a view list,
the converter breaks then * list so the model element is inserted to the
view parent element corresponding to its model parent element.n *n * The
converter prevents such situations:n *n *tt// Model:                       
// View:n *tt&lt;listItem&gt;foo&lt;/listItem&gt;         &lt;ul&gt;n
*tt&lt;listItem&gt;bar&lt;/listItem&gt;            
&lt;li&gt;foo&lt;/li&gt;n *tt                                    
&lt;li&gt;bar&lt;/li&gt;n *tt                                 &lt;/ul&gt;n
*n *tt// After change:                 // Correct view guaranteed by this
converter:n *tt&lt;listItem&gt;foo&lt;/listItem&gt;        
&lt;ul&gt;&lt;li&gt;foo&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;xxx&lt;/p&gt;&lt;ul&gt;&lt;li&gt;bar&lt;/li&gt;&lt;/ul&gt;n
*tt&lt;paragraph&gt;xxx&lt;/paragraph&gt;       // Instead of this wrong
view state:n *tt&lt;listItem&gt;bar&lt;/listItem&gt;        
&lt;ul&gt;&lt;li&gt;foo&lt;/li&gt;&lt;p&gt;xxx&lt;/p&gt;&lt;li&gt;bar&lt;/li&gt;&lt;/ul&gt;n
*n * @see
module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:insertn
* @param {module:utils/eventinfo~EventInfo} evt An object containing
information about the fired event.n * @param {Object} data Additional
information about the change.n * @param {Object} conversionApi Conversion
interface.n */nexport function modelViewSplitOnInsert( evt, data,
conversionApi ) {ntif ( data.item.name != &#39;listItem&#39; ) {nttlet
viewPosition = conversionApi.mapper.toViewPosition( data.range.start
);nnttconst viewWriter = conversionApi.writer;nttconst lists = [];nntt//
Break multiple ULs/OLs if there are.ntt//ntt// Imagine following
list:ntt//ntt// 1 ——–ntt//   1.1 ——–ntt//     1.1.1 ——–ntt//     1.1.2
——–ntt//     1.1.3 ——–ntt//       1.1.3.1 ——–ntt//   1.2 ——–ntt//     1.2.1
——–ntt// 2 ——–ntt//ntt// Insert paragraph after item 1.1.1:ntt//ntt// 1
——–ntt//   1.1 ——–ntt//     1.1.1 ——–ntt//ntt// Lorem ipsum.ntt//ntt//    
1.1.2 ——–ntt//     1.1.3 ——–ntt//       1.1.3.1 ——–ntt//   1.2 ——–ntt//    
1.2.1 ——–ntt// 2 ——–ntt//ntt// In this case 1.1.2 has to become beginning
of a new list.ntt// We need to break list before 1.1.2 (obvious), then we
need to break list also before 1.2.ntt// Then we need to move those broken
pieces one after another and merge:ntt//ntt// 1 ——–ntt//   1.1 ——–ntt//    
1.1.1 ——–ntt//ntt// Lorem ipsum.ntt//ntt// 1.1.2 ——–ntt//   1.1.3 ——–ntt// 
1.1.3.1 ——–ntt// 1.2 ——–ntt//   1.2.1 ——–ntt// 2 ——–ntt//nttwhile (
viewPosition.parent.name == &#39;ul&#39; || viewPosition.parent.name ==
&#39;ol&#39; ) {ntttviewPosition = viewWriter.breakContainer( viewPosition
);nntttif ( viewPosition.parent.name != &#39;li&#39; )
{nttttbreak;nttt}nnttt// Remove lists that are after inserted
element.nttt// They will be brought back later, below the inserted
element.ntttconst removeStart = viewPosition;ntttconst removeEnd =
ViewPosition.createAt( viewPosition.parent, &#39;end&#39; );nnttt//
Don&#39;t remove if there is nothing to remove.ntttif (
!removeStart.isEqual( removeEnd ) ) {nttttconst removed =
viewWriter.remove( new ViewRange( removeStart, removeEnd )
);nttttlists.push( removed );nttt}nntttviewPosition =
ViewPosition.createAfter( viewPosition.parent );ntt}nntt// Bring back
removed lists.nttif ( lists.length &gt; 0 ) {ntttfor ( let i = 0; i &lt;
lists.length; i++ ) {nttttconst previousList =
viewPosition.nodeBefore;nttttconst insertedRange = viewWriter.insert(
viewPosition, lists[ i ] );nttttviewPosition = insertedRange.end;nntttt//
Don&#39;t merge first list! We want a split in that place (this is why this
converter is introduced).nttttif ( i &gt; 0 ) {ntttttconst mergePos =
mergeViewLists( viewWriter, previousList, previousList.nextSibling
);nnttttt// If `mergePos` is in `previousList` it means that the lists got
merged.nttttt// In this case, we need to fix insert position.ntttttif (
mergePos &amp;&amp; mergePos.parent == previousList )
{nttttttviewPosition.offset–;nttttt}ntttt}nttt}nnttt// Merge last inserted
list with element after it.ntttmergeViewLists( viewWriter,
viewPosition.nodeBefore, viewPosition.nodeAfter );ntt}nt}n}nn/**n * A
special model-to-view converter introduced by the {@link
module:list/list~List list feature}. This converter takes care ofn *
merging view lists after something is removed or moved from near them.n *n
* Example:n *n *tt// Model:                        // View:n
*tt&lt;listItem&gt;foo&lt;/listItem&gt;        
&lt;ul&gt;&lt;li&gt;foo&lt;/li&gt;&lt;/ul&gt;n
*tt&lt;paragraph&gt;xxx&lt;/paragraph&gt;       &lt;p&gt;xxx&lt;/p&gt;n
*tt&lt;listItem&gt;bar&lt;/listItem&gt;        
&lt;ul&gt;&lt;li&gt;bar&lt;/li&gt;&lt;/ul&gt;n *n *tt// After change:      
// Correct view guaranteed by this converter:n
*tt&lt;listItem&gt;foo&lt;/listItem&gt;         &lt;ul&gt;n
*tt&lt;listItem&gt;bar&lt;/listItem&gt;            
&lt;li&gt;foo&lt;/li&gt;n *tt                                    
&lt;li&gt;bar&lt;/li&gt;n *tt                                 &lt;/ul&gt;n
*n * @see
module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:removen
* @param {module:utils/eventinfo~EventInfo} evt An object containing
information about the fired event.n * @param {Object} data Additional
information about the change.n * @param {Object} conversionApi Conversion
interface.n */nexport function modelViewMergeAfter( evt, data,
conversionApi ) {ntconst viewPosition =
conversionApi.mapper.toViewPosition( data.position );ntconst viewItemPrev =
viewPosition.nodeBefore;ntconst viewItemNext = viewPosition.nodeAfter;nnt//
Merge lists if something (remove, move) was done from inside of list.nt//
Merging will be done only if both items are view lists of the same
type.nt// The check is done inside the helper function.ntmergeViewLists(
conversionApi.writer, viewItemPrev, viewItemNext );n}nn/**n * A
view-to-model converter that converts `&lt;li&gt;` view elements into
`listItem` model elements.n *n * To set correct values of the `type` and
`indent` attributes the converter:n * * checks `&lt;li&gt;`&#39;s parent,n
* * stores and increases the `conversionApi.store.indent` value when
`&lt;li&gt;`&#39;s sub-items are converted.n *n * @see
module:engine/conversion/upcastdispatcher~UpcastDispatcher#event:elementn *
@param {module:utils/eventinfo~EventInfo} evt An object containing
information about the fired event.n * @param {Object} data An object
containing conversion input and a placeholder for conversion output and
possibly other values.n * @param {Object} conversionApi Conversion
interface to be used by the callback.n */nexport function
viewModelConverter( evt, data, conversionApi ) {ntif (
conversionApi.consumable.consume( data.viewItem, { name: true } ) )
{nttconst writer = conversionApi.writer;nttconst conversionStore =
this.conversionApi.store;nntt// 1. Create `listItem` model element.nttconst
listItem = writer.createElement( &#39;listItem&#39; );nntt// 2. Handle
`listItem` model element attributes.nttconversionStore.indent =
conversionStore.indent || 0;nttwriter.setAttribute( &#39;indent&#39;,
conversionStore.indent, listItem );nntt// Set &#39;bulleted&#39; as
default. If this item is pasted into a context,nttconst type =
data.viewItem.parent &amp;&amp; data.viewItem.parent.name == &#39;ol&#39; ?
&#39;numbered&#39; : &#39;bulleted&#39;;nttwriter.setAttribute(
&#39;type&#39;, type, listItem );nntt// `listItem`s created recursively
should have bigger indent.nttconversionStore.indent++;nntt// Try to find
allowed parent for list item.nttconst splitResult =
conversionApi.splitToAllowedParent( listItem, data.modelCursor );nntt//
When there is no allowed parent it means that list item cannot be converted
at current model positionntt// and in any of position ancestors.nttif (
!splitResult ) {ntttreturn;ntt}nnttwriter.insert( listItem,
splitResult.position );nntt// Remember position after list item, next list
items will be inserted at this position.nttlet nextPosition =
ModelPosition.createAfter( listItem );nntt// Check all children of the
converted `&lt;li&gt;`.ntt// At this point we assume there are no
"whitespace&quot; view text nodes in view list, between view list
items.ntt// This should be handled by `&lt;ul&gt;` and `&lt;ol&gt;`
converters.nttfor ( const child of data.viewItem.getChildren() ) {nttt// If
this is a view list element, we will convert it after last `listItem` model
element.ntttif ( child.name == &#39;ul&#39; || child.name == &#39;ol&#39; )
{nttttnextPosition = conversionApi.convertItem( child, nextPosition
).modelCursor;nttt}nttt// If it was not a list it was a "regular&quot; list
item content. Just convert it to `listItem`.ntttelse
{nttttconversionApi.convertItem( child, ModelPosition.createAt( listItem,
&#39;end&#39; ) );nttt}ntt}nnttconversionStore.indent–;nntt// Result range
starts before the first item and ends after the last.nttdata.modelRange =
new ModelRange( data.modelCursor, nextPosition );nntt// When modelCursor
parent had to be split to insert list item.nttif ( splitResult.cursorParent
) {nttt// Then continue conversion in split element.ntttdata.modelCursor =
ModelPosition.createAt( splitResult.cursorParent );ntt} else {nttt//
Otherwise continue conversion after last list item.ntttdata.modelCursor =
data.modelRange.end;ntt}nt}n}nn/**n * A view-to-model converter for
`&lt;ul&gt;` and `&lt;ol&gt;` view elements that cleans the input view of
garbage.n * This is mostly to clean whitespaces from between `&lt;li&gt;`
view elements inside the view list element, however, alson * incorrect data
can be cleared if the view was incorrect.n *n * @see
module:engine/conversion/upcastdispatcher~UpcastDispatcher#event:elementn *
@param {module:utils/eventinfo~EventInfo} evt An object containing
information about the fired event.n * @param {Object} data An object
containing conversion input and a placeholder for conversion output and
possibly other values.n * @param {Object} conversionApi Conversion
interface to be used by the callback.n */nexport function cleanList( evt,
data, conversionApi ) {ntif ( conversionApi.consumable.test( data.viewItem,
{ name: true } ) ) {ntt// Caching children because when we start removing
them iterating fails.nttconst children = Array.from(
data.viewItem.getChildren() );nnttfor ( const child of children ) {ntttif (
!child.is( &#39;li&#39; ) ) {nttttchild._remove();nttt}ntt}nt}n}nn/**n * A
view-to-model converter for `&lt;li&gt;` elements that cleans whitespace
formatting from the input view.n *n * @see
module:engine/conversion/upcastdispatcher~UpcastDispatcher#event:elementn *
@param {module:utils/eventinfo~EventInfo} evt An object containing
information about the fired event.n * @param {Object} data An object
containing conversion input and a placeholder for conversion output and
possibly other values.n * @param {Object} conversionApi Conversion
interface to be used by the callback.n */nexport function cleanListItem(
evt, data, conversionApi ) {ntif ( conversionApi.consumable.test(
data.viewItem, { name: true } ) ) {nttif ( data.viewItem.childCount === 0 )
{ntttreturn;ntt}nnttconst children = [ …data.viewItem.getChildren()
];nnttlet foundList = false;nttlet firstNode = true;nnttfor ( const child
of children ) {ntttif ( foundList &amp;&amp; !child.is( &#39;ul&#39; )
&amp;&amp; !child.is( &#39;ol&#39; ) ) {nttttchild._remove();nttt}nntttif (
child.is( &#39;text&#39; ) ) {ntttt// If this is the first node and
it&#39;s a text node, left-trim it.nttttif ( firstNode ) {ntttttchild._data
= child.data.replace( /^\s+/, &#39;&#39; );ntttt}nntttt// If this is the
last text node before &lt;ul&gt; or &lt;ol&gt;, right-trim it.nttttif (
!child.nextSibling || ( child.nextSibling.is( &#39;ul&#39; ) ||
child.nextSibling.is( &#39;ol&#39; ) ) ) {ntttttchild._data =
child.data.replace( /\s+$/, &#39;&#39; );ntttt}nttt} else if ( child.is(
&#39;ul&#39; ) || child.is( &#39;ol&#39; ) ) {ntttt// If this is a
&lt;ul&gt; or &lt;ol&gt;, do not process it, just mark that we already
visited list element.nttttfoundList = true;nttt}nntttfirstNode =
false;ntt}nt}n}nn/**n * The callback for model position to view position
mapping for {@link module:engine/conversion/mapper~Mapper}. The callback
fixesn * positions between `listItem` elements that would be incorrectly
mapped because of how list items are represented in modeln * and view.n *n
* @see module:engine/conversion/mapper~Mapper#event:modelToViewPositionn *
@param {module:utils/eventinfo~EventInfo} evt An object containing
information about the fired event.n * @param {Object} data An object
containing additional data and placeholder for mapping result.n */nexport
function modelToViewPosition( evt, data ) {ntif ( data.isPhantom )
{nttreturn;nt}nntconst modelItem = data.modelPosition.nodeBefore;nntif (
modelItem &amp;&amp; modelItem.is( &#39;listItem&#39; ) ) {nttconst
viewItem = data.mapper.toViewElement( modelItem );nttconst topmostViewList
= viewItem.getAncestors().find( element =&gt; element.is( &#39;ul&#39; ) ||
element.is( &#39;ol&#39; ) );nttconst walker = new ViewTreeWalker(
{ntttstartPosition: ViewPosition.createAt( viewItem, 0 )ntt} );nnttfor (
const value of walker ) {ntttif ( value.type == &#39;elementStart&#39;
&amp;&amp; value.item.is( &#39;li&#39; ) ) {nttttdata.viewPosition =
value.previousPosition;nnttttbreak;nttt} else if ( value.type ==
&#39;elementEnd&#39; &amp;&amp; value.item == topmostViewList )
{nttttdata.viewPosition =
value.nextPosition;nnttttbreak;nttt}ntt}nt}n}nn/**n * The callback for view
position to model position mapping for {@link
module:engine/conversion/mapper~Mapper}. The callback fixesn * positions
between `&lt;li&gt;` elements that would be incorrectly mapped because of
how list items are represented in modeln * and view.n *n * @see
module:engine/conversion/mapper~Mapper#event:viewToModelPositionn * @param
{module:utils/eventinfo~EventInfo} evt An object containing information
about the fired event.n * @param {Object} data An object containing
additional data and placeholder for mapping result.n */nexport function
viewToModelPosition( evt, data ) {ntconst viewPos =
data.viewPosition;ntconst viewParent = viewPos.parent;ntconst mapper =
data.mapper;nntif ( viewParent.name == &#39;ul&#39; || viewParent.name ==
&#39;ol&#39; ) {ntt// Position is directly in &lt;ul&gt; or
&lt;ol&gt;.nttif ( !viewPos.isAtEnd ) {nttt// If position is not at the
end, it must be before &lt;li&gt;.nttt// Get that &lt;li&gt;, map it to
`listItem` and set model position before that `listItem`.ntttconst
modelNode = mapper.toModelElement( viewPos.nodeAfter
);nntttdata.modelPosition = ModelPosition.createBefore( modelNode );ntt}
else {nttt// Position is at the end of &lt;ul&gt; or &lt;ol&gt;, so there
is no &lt;li&gt; after it to be mapped.nttt// There is &lt;li&gt; before
the position, but we cannot just map it to `listItem` and set model
position after it,nttt// because that &lt;li&gt; may contain nested
items.nttt// We will check "model length&quot; of that &lt;li&gt;, in other
words - how many `listItem`s are in that &lt;li&gt;.ntttconst modelNode =
mapper.toModelElement( viewPos.nodeBefore );ntttconst modelLength =
mapper.getModelLength( viewPos.nodeBefore );nnttt// Then we get model
position before mapped `listItem` and shift it
accordingly.ntttdata.modelPosition = ModelPosition.createBefore( modelNode
).getShiftedBy( modelLength );ntt}nnttevt.stop();nt} else if (
viewParent.name == &#39;li&#39; &amp;&amp; viewPos.nodeBefore &amp;&amp; (
viewPos.nodeBefore.name == &#39;ul&#39; || viewPos.nodeBefore.name ==
&#39;ol&#39; ) ) {ntt// In most cases when view position is in &lt;li&gt;
it is in text and this is a correct position.ntt// However, if position is
after &lt;ul&gt; or &lt;ol&gt; we have to fix it – because in model
&lt;ul&gt;/&lt;ol&gt; are not in the `listItem`.nttconst modelNode =
mapper.toModelElement( viewParent );nntt// Check all &lt;ul&gt;s and
&lt;ol&gt;s that are in the &lt;li&gt; but before mapped position.ntt// Get
model length of those elements and then add it to the offset of `listItem`
mapped to the original &lt;li&gt;.nttlet modelLength = 1; // Starts from 1
because the original &lt;li&gt; has to be counted in too.nttlet viewList =
viewPos.nodeBefore;nnttwhile ( viewList &amp;&amp; ( viewList.is(
&#39;ul&#39; ) || viewList.is( &#39;ol&#39; ) ) ) {ntttmodelLength +=
mapper.getModelLength( viewList );nntttviewList =
viewList.previousSibling;ntt}nnttdata.modelPosition =
ModelPosition.createBefore( modelNode ).getShiftedBy( modelLength
);nnttevt.stop();nt}n}nn/**n * Post-fixer that reacts to changes on
document and fixes incorrect model states.n *n * In an example below, there
is a correct list structure.n * Then the middle element will be removed so
the list structure will become incorrect:n *n *tt&lt;listItem
type=&quot;bulleted&quot; indent=0&gt;Item 1&lt;/listItem&gt;n
*tt&lt;listItem type=&quot;bulleted&quot; indent=1&gt;Item
2&lt;/listItem&gt;   &lt;— this is removed.n *tt&lt;listItem
type=&quot;bulleted&quot; indent=2&gt;Item 3&lt;/listItem&gt;n *n * List
structure after the middle element removed:n *n * tt&lt;listItem
type=&quot;bulleted&quot; indent=0&gt;Item 1&lt;/listItem&gt;n
*tt&lt;listItem type=&quot;bulleted&quot; indent=2&gt;Item
3&lt;/listItem&gt;n *n * Should become:n *n *tt&lt;listItem
type=&quot;bulleted&quot; indent=0&gt;Item 1&lt;/listItem&gt;n
*tt&lt;listItem type=&quot;bulleted&quot; indent=1&gt;Item
3&lt;/listItem&gt;   &lt;— note that indent got post-fixed.n *n * @param
{module:engine/model/model~Model} model The data model.n * @param
{module:engine/model/writer~Writer} writer The writer to do changes with.n
* @returns {Boolean} `true` if any change has been applied, `false`
otherwise.n */nexport function modelChangePostFixer( model, writer )
{ntconst changes = model.document.differ.getChanges();ntconst
itemToListHead = new Map();nntlet applied = false;nntfor ( const entry of
changes ) {nttif ( entry.type == &#39;insert&#39; &amp;&amp; entry.name ==
&#39;listItem&#39; ) {nttt_addListToFix( entry.position );ntt} else if (
entry.type == &#39;insert&#39; &amp;&amp; entry.name != &#39;listItem&#39;
) {ntttif ( entry.name != &#39;$text&#39; ) {ntttt// In case of renamed
element.nttttconst item = entry.position.nodeAfter;nnttttif (
item.hasAttribute( &#39;indent&#39; ) ) {ntttttwriter.removeAttribute(
&#39;indent&#39;, item );nntttttapplied = true;ntttt}nnttttif (
item.hasAttribute( &#39;type&#39; ) ) {ntttttwriter.removeAttribute(
&#39;type&#39;, item );nntttttapplied = true;ntttt}nttt}nntttconst posAfter
= entry.position.getShiftedBy( entry.length );nnttt_addListToFix( posAfter
);ntt} else if ( entry.type == &#39;remove&#39; &amp;&amp; entry.name ==
&#39;listItem&#39; ) {nttt_addListToFix( entry.position );ntt} else if (
entry.type == &#39;attribute&#39; &amp;&amp; entry.attributeKey ==
&#39;indent&#39; ) {nttt_addListToFix( entry.range.start );ntt} else if (
entry.type == &#39;attribute&#39; &amp;&amp; entry.attributeKey ==
&#39;type&#39; ) {nttt_addListToFix( entry.range.start );ntt}nt}nntfor (
const listHead of itemToListHead.values() ) {ntt_fixListIndents( listHead
);ntt_fixListTypes( listHead );nt}nntreturn applied;nntfunction
_addListToFix( position ) {nttconst prev = position.nodeBefore;nnttif (
!prev || !prev.is( &#39;listItem&#39; ) ) {ntttconst item =
position.nodeAfter;nntttif ( item &amp;&amp; item.is( &#39;listItem&#39; )
) {nttttitemToListHead.set( item, item );nttt}ntt} else {ntttlet listHead =
prev;nntttif ( itemToListHead.has( listHead ) )
{nttttreturn;nttt}nntttwhile ( listHead.previousSibling &amp;&amp;
listHead.previousSibling.is( &#39;listItem&#39; ) ) {nttttlistHead =
listHead.previousSibling;nnttttif ( itemToListHead.has( listHead ) )
{ntttttreturn;ntttt}nttt}nntttitemToListHead.set( position.nodeBefore,
listHead );ntt}nt}nntfunction _fixListIndents( item ) {nttlet maxIndent =
0;nttlet fixBy = null;nnttwhile ( item &amp;&amp; item.is(
&#39;listItem&#39; ) ) {ntttconst itemIndent = item.getAttribute(
&#39;indent&#39; );nntttif ( itemIndent &gt; maxIndent ) {nttttlet
newIndent;nnttttif ( fixBy === null ) {ntttttfixBy = itemIndent -
maxIndent;ntttttnewIndent = maxIndent;ntttt} else {ntttttif ( fixBy &gt;
itemIndent ) {nttttttfixBy = itemIndent;nttttt}nntttttnewIndent =
itemIndent - fixBy;ntttt}nnttttwriter.setAttribute( &#39;indent&#39;,
newIndent, item );nnttttapplied = true;nttt} else {nttttfixBy =
null;nttttmaxIndent = item.getAttribute( &#39;indent&#39; ) +
1;nttt}nntttitem = item.nextSibling;ntt}nt}nntfunction _fixListTypes( item
) {nttlet typesStack = [];nttlet prev = null;nnttwhile ( item &amp;&amp;
item.is( &#39;listItem&#39; ) ) {ntttconst itemIndent = item.getAttribute(
&#39;indent&#39; );nntttif ( prev &amp;&amp; prev.getAttribute(
&#39;indent&#39; ) &gt; itemIndent ) {ntttttypesStack = typesStack.slice(
0, itemIndent + 1 );nttt}nntttif ( itemIndent != 0 ) {nttttif ( typesStack[
itemIndent ] ) {ntttttconst type = typesStack[ itemIndent ];nntttttif (
item.getAttribute( &#39;type&#39; ) != type ) {nttttttwriter.setAttribute(
&#39;type&#39;, type, item );nnttttttapplied = true;nttttt}ntttt} else
{nttttttypesStack[ itemIndent ] = item.getAttribute( &#39;type&#39;
);ntttt}nttt}nntttprev = item;ntttitem = item.nextSibling;ntt}nt}n}nn/**n *
A fixer for pasted content that includes list items.n *n * It fixes
indentation of pasted list items so the pasted items match correctly to the
context they are pasted into.n *n * Example:n *n *tt&lt;listItem
type=&quot;bulleted&quot; indent=0&gt;A&lt;/listItem&gt;n *tt&lt;listItem
type=&quot;bulleted&quot; indent=1&gt;B^&lt;/listItem&gt;n *tt// At ^
paste:  &lt;listItem type=&quot;bulleted&quot;
indent=4&gt;X&lt;/listItem&gt;n *tt//              &lt;listItem
type=&quot;bulleted&quot; indent=5&gt;Y&lt;/listItem&gt;n *tt&lt;listItem
type=&quot;bulleted&quot; indent=2&gt;C&lt;/listItem&gt;n *n * Should
become:n *n *tt&lt;listItem type=&quot;bulleted&quot;
indent=0&gt;A&lt;/listItem&gt;n *tt&lt;listItem type=&quot;bulleted&quot;
indent=1&gt;BX&lt;/listItem&gt;n *tt&lt;listItem type=&quot;bulleted&quot;
indent=2&gt;Y/listItem&gt;n *tt&lt;listItem type=&quot;bulleted&quot;
indent=2&gt;C&lt;/listItem&gt;n *n * @param
{module:utils/eventinfo~EventInfo} evt An object containing information
about the fired event.n * @param {Array} args Arguments of {@link
module:engine/model/model~Model#insertContent}.n */nexport function
modelIndentPasteFixer( evt, [ content, selection ] ) {nt// Check whether
inserted content starts from a `listItem`. If it does not, it means that
there are some othernt// elements before it and there is no need to fix
indents, because even if we insert that content into a list,nt// that list
will be broken.nt// Note: we also need to handle singular elements because
inserting item with indent 0 into 0,1,[],2nt// would create incorrect
model.ntlet item = content.is( &#39;documentFragment&#39; ) ?
content.getChild( 0 ) : content;nntif ( item &amp;&amp; item.is(
&#39;listItem&#39; ) ) {ntt// Get a reference list item. Inserted list
items will be fixed according to that item.nttconst pos =
selection.getFirstPosition();nttlet refItem = null;nnttif ( pos.parent.is(
&#39;listItem&#39; ) ) {ntttrefItem = pos.parent;ntt} else if (
pos.nodeBefore &amp;&amp; pos.nodeBefore.is( &#39;listItem&#39; ) )
{ntttrefItem = pos.nodeBefore;ntt}nntt// If there is `refItem` it means
that we do insert list items into an existing list.nttif ( refItem )
{nttt// First list item in `data` has indent equal to 0 (it is a first list
item). It should have indent equalnttt// to the indent of reference item.
We have to fix the first item and all of it&#39;s children and following
siblings.nttt// Indent of all those items has to be adjusted to reference
item.ntttconst indentChange = refItem.getAttribute( &#39;indent&#39;
);nnttt// Fix only if there is anything to fix.ntttif ( indentChange &gt; 0
) {ntttt// Adjust indent of all "first&quot; list items in inserted
data.nttttwhile ( item &amp;&amp; item.is( &#39;listItem&#39; ) )
{ntttttitem._setAttribute( &#39;indent&#39;, item.getAttribute(
&#39;indent&#39; ) + indentChange );nntttttitem =
item.nextSibling;ntttt}nttt}ntt}nt}n}nn// Helper function that creates a
`&lt;ul&gt;&lt;li&gt;&lt;/li&gt;&lt;/ul&gt;` or (`&lt;ol&gt;`) structure
out of given `modelItem` model `listItem` element.n// Then, it binds
created view list item (&lt;li&gt;) with model `listItem` element.n// The
function then returns created view list item (&lt;li&gt;).nfunction
generateLiInUl( modelItem, conversionApi ) {ntconst mapper =
conversionApi.mapper;ntconst viewWriter = conversionApi.writer;ntconst
listType = modelItem.getAttribute( &#39;type&#39; ) == &#39;numbered&#39; ?
&#39;ol&#39; : &#39;ul&#39;;ntconst viewItem = createViewListItemElement(
viewWriter );nntconst viewList = viewWriter.createContainerElement(
listType, null );ntviewWriter.insert( ViewPosition.createAt( viewList ),
viewItem );nntmapper.bindElements( modelItem, viewItem );nntreturn
viewItem;n}nn// Helper function that seeks for a list item sibling of given
model item (or position) which meets given criteria.n// `options` object
may contain one or more of given values (by default they are `false`):n//
`options.sameIndent` - whether sought sibling should have same indent
(default = no),n// `options.smallerIndent` - whether sought sibling should
have smaller indent (default = no).n// `options.indent` - used as reference
item when first parameter is a positionn// Either `options.sameIndent` or
`options.biggerIndent` should be set to `true`.nfunction
getSiblingListItem( modelItemOrPosition, options ) {ntconst sameIndent =
!!options.sameIndent;ntconst smallerIndent =
!!options.smallerIndent;nntconst indent = modelItemOrPosition instanceof
ModelElement ? modelItemOrPosition.getAttribute( &#39;indent&#39; ) :
options.indent;ntlet item = modelItemOrPosition instanceof ModelElement ?
modelItemOrPosition.previousSibling :
modelItemOrPosition.nodeBefore;nntwhile ( item &amp;&amp; item.name ==
&#39;listItem&#39; ) {nttconst itemIndent = item.getAttribute(
&#39;indent&#39; );nnttif ( ( sameIndent &amp;&amp; indent == itemIndent )
|| ( smallerIndent &amp;&amp; indent &gt; itemIndent ) ) {ntttreturn
item;ntt}nnttitem = item.previousSibling;nt}nntreturn null;n}nn// Helper
function that takes two parameters, that are expected to be view list
elements, and merges them.n// The merge happen only if both parameters are
UL or OL elements.nfunction mergeViewLists( viewWriter, firstList,
secondList ) {ntif ( firstList &amp;&amp; secondList &amp;&amp; (
firstList.name == &#39;ul&#39; || firstList.name == &#39;ol&#39; )
&amp;&amp; firstList.name == secondList.name ) {nttreturn
viewWriter.mergeContainers( ViewPosition.createAfter( firstList )
);nt}nntreturn null;n}nn// Helper function that takes model list item
element `modelItem`, corresponding view list item element `injectedItem`n//
that is not added to the view and is inside a view list element (`ul` or
`ol`) and is that&#39;s list only child.n// The list is inserted at correct
position (element breaking may be needed) and then merged with it&#39;s
siblings.n// See comments below to better understand the
algorithm.nfunction injectViewList( modelItem, injectedItem, conversionApi
) {ntconst injectedList = injectedItem.parent;ntconst mapper =
conversionApi.mapper;ntconst viewWriter = conversionApi.writer;nnt//
Position where view list will be inserted.ntlet insertPosition =
mapper.toViewPosition( ModelPosition.createBefore( modelItem ) );nnt// 1.
Find previous list item that has same or smaller indent. Basically we are
looking for a first model itemnt// that is "parent&quot; or "sibling&quot;
of injected model item.nt// If there is no such list item, it means that
injected list item is the first item in "its list&quot;.ntconst refItem =
getSiblingListItem( modelItem, { sameIndent: true, smallerIndent: true }
);ntconst prevItem = modelItem.previousSibling;nntif ( refItem &amp;&amp;
refItem.getAttribute( &#39;indent&#39; ) == modelItem.getAttribute(
&#39;indent&#39; ) ) {ntt// There is a list item with same indent - we
found same-level sibling.ntt// Break the list after it. Inserted view item
will be inserted in the broken space.nttconst viewItem =
mapper.toViewElement( refItem );nttinsertPosition =
viewWriter.breakContainer( ViewPosition.createAfter( viewItem ) );nt} else
{ntt// There is no list item with same indent. Check previous model
item.nttif ( prevItem &amp;&amp; prevItem.name == &#39;listItem&#39; )
{nttt// If it is a list item, it has to have lower indent.nttt// It means
that inserted item should be added to it as its nested
item.ntttinsertPosition = mapper.toViewPosition( ModelPosition.createAt(
prevItem, &#39;end&#39; ) );ntt} else {nttt// Previous item is not a list
item (or does not exist at all).nttt// Just map the position and insert the
view item at mapped position.ntttinsertPosition = mapper.toViewPosition(
ModelPosition.createBefore( modelItem ) );ntt}nt}nntinsertPosition =
positionAfterUiElements( insertPosition );nnt// Insert the view
item.ntviewWriter.insert( insertPosition, injectedList );nnt// 2. Handle
possible children of injected model item.ntif ( prevItem &amp;&amp;
prevItem.name == &#39;listItem&#39; ) {nttconst prevView =
mapper.toViewElement( prevItem );nnttconst walker = new ViewTreeWalker(
{ntttboundaries: new ViewRange(nttttViewPosition.createAt( prevView, 0
),nttttinsertPositionnttt),ntttignoreElementEnd: truentt} );nnttfor ( const
value of walker ) {ntttif ( value.item.is( &#39;li&#39; ) ) {nttttconst
breakPosition = viewWriter.breakContainer( ViewPosition.createBefore(
value.item ) );nttttconst viewList = value.item.parent;nnttttconst
targetPosition = ViewPosition.createAt( injectedItem, &#39;end&#39;
);nttttmergeViewLists( viewWriter, targetPosition.nodeBefore,
targetPosition.nodeAfter );nttttviewWriter.move( ViewRange.createOn(
viewList ), targetPosition );nnttttwalker.position =
breakPosition;nttt}ntt}nt} else {nttconst nextViewList =
injectedList.nextSibling;nnttif ( nextViewList &amp;&amp; (
nextViewList.is( &#39;ul&#39; ) || nextViewList.is( &#39;ol&#39; ) ) )
{ntttlet lastSubChild = null;nntttfor ( const child of
nextViewList.getChildren() ) {nttttconst modelChild =
mapper.toModelElement( child );nnttttif ( modelChild &amp;&amp;
modelChild.getAttribute( &#39;indent&#39; ) &gt; modelItem.getAttribute(
&#39;indent&#39; ) ) {ntttttlastSubChild = child;ntttt} else
{ntttttbreak;ntttt}nttt}nntttif ( lastSubChild )
{nttttviewWriter.breakContainer( ViewPosition.createAfter( lastSubChild )
);nttttviewWriter.move( ViewRange.createOn( lastSubChild.parent ),
ViewPosition.createAt( injectedItem, &#39;end&#39; ) );nttt}ntt}nt}nnt//
Merge inserted view list with its possible neighbour
lists.ntmergeViewLists( viewWriter, injectedList, injectedList.nextSibling
);ntmergeViewLists( viewWriter, injectedList.previousSibling, injectedList
);n}nn// Helper function that takes all children of given `viewRemovedItem`
and moves them in a correct place, accordingn// to other given
parameters.nfunction hoistNestedLists( nextIndent,
modelRemoveStartPosition, viewRemoveStartPosition, viewRemovedItem,
conversionApi ) {nt// Find correct previous model list item element.nt//
The element has to have either same or smaller indent than given reference
indent.nt// This will be the model element which will get nested items (if
it has smaller indent) or sibling items (if it has same indent).nt// Keep
in mind that such element might not be found, if removed item was the first
item.ntconst prevModelItem = getSiblingListItem( modelRemoveStartPosition,
{nttsameIndent: true,nttsmallerIndent: true,nttindent: nextIndentnt}
);nntconst mapper = conversionApi.mapper;ntconst viewWriter =
conversionApi.writer;nnt// Indent of found element or `null` if the element
has not been found.ntconst prevIndent = prevModelItem ?
prevModelItem.getAttribute( &#39;indent&#39; ) : null;nntlet
insertPosition;nntif ( !prevModelItem ) {ntt// If element has not been
found, simply insert lists at the position where the removed item
was:ntt//ntt// Lorem ipsum.ntt// 1 ——–           &lt;— this is removed, no
previous list item, put nested items in place of removed item.ntt//   1.1
——–       &lt;— this is reference indent.ntt//     1.1.1 ——–ntt//     1.1.2
——–ntt//   1.2 ——–ntt//ntt// Becomes:ntt//ntt// Lorem ipsum.ntt// 1.1
——–ntt//   1.1.1 ——–ntt//   1.1.2 ——–ntt// 1.2 ——–nttinsertPosition =
viewRemoveStartPosition;nt} else if ( prevIndent == nextIndent ) {ntt// If
element has been found and has same indent as reference indent it means
that nested items shouldntt// become siblings of found element:ntt//ntt// 1
——–ntt//   1.1 ——–ntt//   1.2 ——–       &lt;— this is `prevModelItem`.ntt//
2 ——–           &lt;— this is removed, previous list item has indent same
as reference indent.ntt//   2.1 ——–       &lt;— this is reference indent,
this and 2.2 should become siblings of 1.2.ntt//   2.2 ——–ntt//ntt//
Becomes:ntt//ntt// 1 ——–ntt//   1.1 ——–ntt//   1.2 ——–ntt//   2.1 ——–ntt// 
2.2 ——–nttconst prevViewList = mapper.toViewElement( prevModelItem
).parent;nttinsertPosition = ViewPosition.createAfter( prevViewList );nt}
else {ntt// If element has been found and has smaller indent as reference
indent it means that nested itemsntt// should become nested items of found
item:ntt//ntt// 1 ——–           &lt;— this is `prevModelItem`.ntt//   1.1
——–       &lt;— this is removed, previous list item has indent smaller than
reference indent.ntt//     1.1.1 ——–   &lt;— this is reference indent, this
and 1.1.1 should become nested items of 1.ntt//     1.1.2 ——–ntt//   1.2
——–ntt//ntt// Becomes:ntt//ntt// 1 ——–ntt//   1.1.1 ——–ntt//   1.1.2
——–ntt//   1.2 ——–ntt//ntt// Note: in this case 1.1.1 have indent 2 while 1
have indent 0. In model that should not be possible,ntt// because following
item may have indent bigger only by one. But this is fixed by
postfixer.nttconst modelPosition = ModelPosition.createAt( prevModelItem,
&#39;end&#39; );nttinsertPosition = mapper.toViewPosition( modelPosition
);nt}nntinsertPosition = positionAfterUiElements( insertPosition );nnt//
Handle multiple lists. This happens if list item has nested numbered and
bulleted lists. Following listsnt// are inserted after the first list (no
need to recalculate insertion position for them).ntfor ( const child of [
…viewRemovedItem.getChildren() ] ) {nttif ( child.is( &#39;ul&#39; ) ||
child.is( &#39;ol&#39; ) ) {ntttinsertPosition = viewWriter.move(
ViewRange.createOn( child ), insertPosition ).end;nntttmergeViewLists(
viewWriter, child, child.nextSibling );ntttmergeViewLists( viewWriter,
child.previousSibling, child );ntt}nt}n}nn// Helper function that for given
`view.Position`, returns a `view.Position` that is after all
`view.UIElement`s thatn// are after given position.n// For example:n//
&lt;container:p&gt;foo^&lt;ui:span&gt;&lt;/ui:span&gt;&lt;ui:span&gt;&lt;/ui:span&gt;bar&lt;/contain:p&gt;n//
For position ^, a position before "bar&quot; will be returned.nfunction
positionAfterUiElements( viewPosition ) {ntreturn
viewPosition.getLastMatchingPosition( value =&gt; value.item.is(
&#39;uiElement&#39; ) );n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-list/src/converters.jsn// module id = nulln// module chunks =
“,”/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben. All
rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
list/listeditingn */nnimport ListCommand from
&#39;./listcommand&#39;;nimport IndentCommand from
&#39;./indentcommand&#39;;nnimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport Paragraph from
&#39;@ckeditor/ckeditor5-paragraph/src/paragraph&#39;;nnimport
{ntcleanList,ntcleanListItem,ntmodelViewInsertion,ntmodelViewChangeType,ntmodelViewMergeAfter,ntmodelViewRemove,ntmodelViewSplitOnInsert,ntmodelViewChangeIndent,ntmodelChangePostFixer,ntmodelIndentPasteFixer,ntviewModelConverter,ntmodelToViewPosition,ntviewToModelPositionn}
from &#39;./converters&#39;;nn/**n * The engine of the list feature. It
handles creating, editing and removing lists and list items.n * It
registers the `numberedList`, `bulletedList`, `indentList` and
`outdentList` commands.n *n * @extends module:core/plugin~Pluginn */nexport
default class ListEditing extends Plugin {nt/**nt * @inheritDocnt
*/ntstatic get requires() {nttreturn [ Paragraph ];nt}nnt/**nt *
@inheritDocnt */ntinit() {nttconst editor = this.editor;nntt// Schema.ntt//
Note: in case `$block` will ever be allowed in `listItem`, keep in mind
that this featurentt// uses `Selection#getSelectedBlocks()` without any
additional processing to obtain all selected list items.ntt// If there are
blocks allowed inside list item, algorithms using `getSelectedBlocks()`
will have to be modified.ntteditor.model.schema.register(
&#39;listItem&#39;, {ntttinheritAllFrom:
&#39;$block&#39;,ntttallowAttributes: [ &#39;type&#39;, &#39;indent&#39;
]ntt} );nntt// Converters.nttconst data = editor.data;nttconst editing =
editor.editing;nntteditor.model.document.registerPostFixer( writer =&gt;
modelChangePostFixer( editor.model, writer )
);nnttediting.mapper.registerViewToModelLength( &#39;li&#39;,
getViewListItemLength );nttdata.mapper.registerViewToModelLength(
&#39;li&#39;, getViewListItemLength );nnttediting.mapper.on(
&#39;modelToViewPosition&#39;, modelToViewPosition );nttediting.mapper.on(
&#39;viewToModelPosition&#39;, viewToModelPosition );nttdata.mapper.on(
&#39;modelToViewPosition&#39;, modelToViewPosition
);nnttediting.downcastDispatcher.on( &#39;insert&#39;,
modelViewSplitOnInsert, { priority: &#39;high&#39; }
);nttediting.downcastDispatcher.on( &#39;insert:listItem&#39;,
modelViewInsertion );nttdata.downcastDispatcher.on( &#39;insert&#39;,
modelViewSplitOnInsert, { priority: &#39;high&#39; }
);nttdata.downcastDispatcher.on( &#39;insert:listItem&#39;,
modelViewInsertion );nnttediting.downcastDispatcher.on(
&#39;attribute:type:listItem&#39;, modelViewChangeType
);nttdata.downcastDispatcher.on( &#39;attribute:type:listItem&#39;,
modelViewChangeType );nttediting.downcastDispatcher.on(
&#39;attribute:indent:listItem&#39;, modelViewChangeIndent
);nttdata.downcastDispatcher.on( &#39;attribute:indent:listItem&#39;,
modelViewChangeIndent );nnttediting.downcastDispatcher.on(
&#39;remove:listItem&#39;, modelViewRemove
);nttediting.downcastDispatcher.on( &#39;remove&#39;, modelViewMergeAfter,
{ priority: &#39;low&#39; } );nttdata.downcastDispatcher.on(
&#39;remove:listItem&#39;, modelViewRemove );nttdata.downcastDispatcher.on(
&#39;remove&#39;, modelViewMergeAfter, { priority: &#39;low&#39; }
);nnttdata.upcastDispatcher.on( &#39;element:ul&#39;, cleanList, {
priority: &#39;high&#39; } );nttdata.upcastDispatcher.on(
&#39;element:ol&#39;, cleanList, { priority: &#39;high&#39; }
);nttdata.upcastDispatcher.on( &#39;element:li&#39;, cleanListItem, {
priority: &#39;high&#39; } );nttdata.upcastDispatcher.on(
&#39;element:li&#39;, viewModelConverter );nntt// Fix indentation of pasted
items.ntteditor.model.on( &#39;insertContent&#39;, modelIndentPasteFixer, {
priority: &#39;high&#39; } );nntt// Register commands for numbered and
bulleted list.ntteditor.commands.add( &#39;numberedList&#39;, new
ListCommand( editor, &#39;numbered&#39; ) );ntteditor.commands.add(
&#39;bulletedList&#39;, new ListCommand( editor, &#39;bulleted&#39; )
);nntt// Register commands for indenting.ntteditor.commands.add(
&#39;indentList&#39;, new IndentCommand( editor, &#39;forward&#39; )
);ntteditor.commands.add( &#39;outdentList&#39;, new IndentCommand( editor,
&#39;backward&#39; ) );nnttconst viewDocument =
this.editor.editing.view.document;nntt// Overwrite default Enter key
behavior.ntt// If Enter key is pressed with selection collapsed in empty
list item, outdent it instead of breaking it.nttthis.listenTo(
viewDocument, &#39;enter&#39;, ( evt, data ) =&gt; {ntttconst doc =
this.editor.model.document;ntttconst positionParent =
doc.selection.getLastPosition().parent;nntttif ( doc.selection.isCollapsed
&amp;&amp; positionParent.name == &#39;listItem&#39; &amp;&amp;
positionParent.isEmpty ) {nttttthis.editor.execute( &#39;outdentList&#39;
);nnttttdata.preventDefault();nttttevt.stop();nttt}ntt} );nntt// Overwrite
default Backspace key behavior.ntt// If Backspace key is pressed with
selection collapsed on first position in first list item, outdent it.
#83nttthis.listenTo( viewDocument, &#39;delete&#39;, ( evt, data ) =&gt;
{nttt// Check conditions from those that require less computations like
those immediately available.ntttif ( data.direction !== &#39;backward&#39;
) {nttttreturn;nttt}nntttconst selection =
this.editor.model.document.selection;nntttif ( !selection.isCollapsed )
{nttttreturn;nttt}nntttconst firstPosition =
selection.getFirstPosition();nntttif ( !firstPosition.isAtStart )
{nttttreturn;nttt}nntttconst positionParent = firstPosition.parent;nntttif
( positionParent.name !== &#39;listItem&#39; ) {nttttreturn;nttt}nntttconst
previousIsAListItem = positionParent.previousSibling &amp;&amp;
positionParent.previousSibling.name === &#39;listItem&#39;;nntttif (
previousIsAListItem ) {nttttreturn;nttt}nntttthis.editor.execute(
&#39;outdentList&#39; );nntttdata.preventDefault();ntttevt.stop();ntt}, {
priority: &#39;high&#39; } );nnttconst getCommandExecuter = commandName
=&gt; {ntttreturn ( data, cancel ) =&gt; {nttttconst command =
this.editor.commands.get( commandName );nnttttif ( command.isEnabled )
{ntttttthis.editor.execute( commandName
);ntttttcancel();ntttt}nttt};ntt};nnttthis.editor.keystrokes.set(
&#39;Tab&#39;, getCommandExecuter( &#39;indentList&#39; )
);nttthis.editor.keystrokes.set( &#39;Shift+Tab&#39;, getCommandExecuter(
&#39;outdentList&#39; ) );nt}n}nnfunction getViewListItemLength( element )
{ntlet length = 1;nntfor ( const child of element.getChildren() ) {nttif (
child.name == &#39;ul&#39; || child.name == &#39;ol&#39; ) {ntttfor ( const
item of child.getChildren() ) {nttttlength += getViewListItemLength( item
);nttt}ntt}nt}nntreturn length;n}nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-list/src/listediting.jsn// module id = nulln//
module chunks = “,”import apply from &#39;./_apply&#39;;nimport toInteger
from &#39;./toInteger&#39;;nn/** Used as the `TypeError` message for
"Functions&quot; methods. */nvar FUNC_ERROR_TEXT = &#39;Expected a
function&#39;;nn/* Built-in method references for those with the same name
as other `lodash` methods. */nvar nativeMax = Math.max;nn/**n * Creates a
function that invokes `func` with the `this` binding of then * created
function and arguments from `start` and beyond provided asn * an array.n *n
* *Note:* This method is based on then * [rest parameter](<a
href="https://mdn.io/rest_parameters).\n">mdn.io/rest_parameters).n</a> *n
* @staticn * @memberOf _n * @since 4.0.0n * @category Functionn * @param
{Function} func The function to apply a rest parameter to.n * @param
{number} [start=func.length-1] The start position of the rest parameter.n *
@returns {Function} Returns the new function.n * @examplen *n * var say =
_.rest(function(what, names) {n *   return what + &#39; &#39; +
_.initial(names).join(&#39;, &#39;) +n *     (_.size(names) &gt; 1 ? &#39;,
&amp; &#39; : &#39;&#39;) + _.last(names);n * });n *n *
say(&#39;hello&#39;, &#39;fred&#39;, &#39;barney&#39;, &#39;pebbles&#39;);n
* // =&gt; &#39;hello fred, barney, &amp; pebbles&#39;n */nfunction
rest(func, start) {n  if (typeof func != &#39;function&#39;) {n    throw
new TypeError(FUNC_ERROR_TEXT);n  }n  start = nativeMax(start === undefined
? (func.length - 1) : toInteger(start), 0);n  return function() {n    var
args = arguments,n        index = -1,n        length =
nativeMax(args.length - start, 0),n        array = Array(length);nn   
while (++index &lt; length) {n      <a href="index">array</a> = args[start
+ index];n    }n    switch (start) {n      case 0: return func.call(this,
array);n      case 1: return func.call(this, <a href="0">args</a>, array);n
case 2: return func.call(this, <a href="0">args</a>, <a href="1">args</a>,
array);n    }n    var otherArgs = Array(start + 1);n    index = -1;n   
while (++index &lt; start) {n      <a href="index">otherArgs</a> = <a
href="index">args</a>;n    }n    <a href="start">otherArgs</a> = array;n   
return apply(func, this, otherArgs);n  };n}nnexport default
rest;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/rest.jsn// module id = nulln// module
chunks = “,”/* Built-in method references for those with the same name as
other `lodash` methods. */nvar nativeGetPrototype =
Object.getPrototypeOf;nn/**n * Gets the `[[Prototype]]` of `value`.n *n *
@privaten * @param {*} value The value to query.n * @returns {null|Object}
Returns the `[[Prototype]]`.n */nfunction getPrototype(value) {n  return
nativeGetPrototype(Object(value));n}nnexport default
getPrototype;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_getPrototype.jsn// module id = nulln//
module chunks = “,”/**n * Checks if `value` is a host object in IE &lt; 9.n
*n * @privaten * @param {*} value The value to check.n * @returns {boolean}
Returns `true` if `value` is a host object, else `false`.n */nfunction
isHostObject(value) {n  // Many host objects are `Object` objects that can
coerce to stringsn  // despite having improperly defined `toString`
methods.n  var result = false;n  if (value != null &amp;&amp; typeof
value.toString != &#39;function&#39;) {n    try {n      result = !!(value +
&#39;&#39;);n    } catch (e) {}n  }n  return result;n}nnexport default
isHostObject;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_isHostObject.jsn// module id = nulln//
module chunks = “,”/**n * Checks if `value` is object-like. A value is
object-like if it&#39;s not `null`n * and has a `typeof` result of
"object&quot;.n *n * @staticn * @memberOf _n * @since 4.0.0n * @category
Langn * @param {*} value The value to check.n * @returns {boolean} Returns
`true` if `value` is object-like, else `false`.n * @examplen *n *
_.isObjectLike({});n * // =&gt; truen *n * _.isObjectLike([1, 2, 3]);n * //
=&gt; truen *n * <em>.isObjectLike(</em>.noop);n * // =&gt; falsen *n *
_.isObjectLike(null);n * // =&gt; falsen */nfunction isObjectLike(value) {n
return !!value &amp;&amp; typeof value == &#39;object&#39;;n}nnexport
default isObjectLike;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/isObjectLike.jsn// module id = nulln//
module chunks = “,”import getPrototype from
&#39;./_getPrototype&#39;;nimport isHostObject from
&#39;./_isHostObject&#39;;nimport isObjectLike from
&#39;./isObjectLike&#39;;nn/** `Object#toString` result references. */nvar
objectTag = &#39;[object Object]&#39;;nn/** Used for built-in method
references. */nvar objectProto = Object.prototype;nn/** Used to resolve the
decompiled source of functions. */nvar funcToString =
Function.prototype.toString;nn/** Used to check objects for own properties.
*/nvar hasOwnProperty = objectProto.hasOwnProperty;nn/** Used to infer the
`Object` constructor. */nvar objectCtorString =
funcToString.call(Object);nn/**n * Used to resolve then *
[`toStringTag`](<a
href="http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n">ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)n</a>
* of values.n */nvar objectToString = objectProto.toString;nn/**n * Checks
if `value` is a plain object, that is, an object created by then * `Object`
constructor or one with a `[[Prototype]]` of `null`.n *n * @staticn *
@memberOf _n * @since 0.8.0n * @category Langn * @param {*} value The value
to check.n * @returns {boolean} Returns `true` if `value` is a plain
object,n *  else `false`.n * @examplen *n * function Foo() {n *   this.a =
1;n * }n *n * _.isPlainObject(new Foo);n * // =&gt; falsen *n *
_.isPlainObject([1, 2, 3]);n * // =&gt; falsen *n * _.isPlainObject({
&#39;x&#39;: 0, &#39;y&#39;: 0 });n * // =&gt; truen *n *
_.isPlainObject(Object.create(null));n * // =&gt; truen */nfunction
isPlainObject(value) {n  if (!isObjectLike(value) ||n     
objectToString.call(value) != objectTag || isHostObject(value)) {n   
return false;n  }n  var proto = getPrototype(value);n  if (proto === null)
{n    return true;n  }n  var Ctor = hasOwnProperty.call(proto,
&#39;constructor&#39;) &amp;&amp; proto.constructor;n  return (typeof Ctor
== &#39;function&#39; &amp;&amp;n    Ctor instanceof Ctor &amp;&amp;
funcToString.call(Ctor) == objectCtorString);n}nnexport default
isPlainObject;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/isPlainObject.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module utils/confign */nnimport isPlainObject from
&#39;./lib/lodash/isPlainObject&#39;;nn/**n * Handles a configuration
dictionary.n */nexport default class Config {nt/**nt * Creates an instance
of the {@link ~Config} class.nt *nt * @param {Object} [configurations] The
initial configurations to be set. Usually, provided by the user.nt * @param
{Object} [defaultConfigurations] The default configurations. Usually,
provided by the system.nt */ntconstructor( configurations,
defaultConfigurations ) {ntt/**ntt * Store for the whole configuration.ntt
*ntt * @privatentt * @member {Object}ntt */nttthis._config = {};nntt// Set
default configuration.nttif ( defaultConfigurations ) {ntttthis.define(
defaultConfigurations );ntt}nntt// Set initial configuration.nttif (
configurations ) {ntttthis._setObjectToTarget( this._config, configurations
);ntt}nt}nnt/**nt * Set configuration values.nt *nt * It accepts both a
name/value pair or an object, which properties and values will be used to
setnt * configurations.nt *nt * It also accepts setting a "deep
configuration&quot; by using dots in the name. For example,
`&#39;resize.width&#39;` setsnt * the value for the `width` configuration
in the `resize` subset.nt *nt *ttconfig.set( &#39;width&#39;, 500 );nt
*ttconfig.set( &#39;toolbar.collapsed&#39;, true );nt *nt *tt// Equivalent
to:nt *ttconfig.set( {nt *tttwidth: 500nt *ttttoolbar: {nt *ttttcollapsed:
truent *ttt}nt *tt} );nt *nt * Passing an object as the value will amend
the configuration, not replace it.nt *nt *ttconfig.set( &#39;toolbar&#39;,
{nt *tttcollapsed: true,nt *tt} );nt *nt *ttconfig.set( &#39;toolbar&#39;,
{nt *tttcolor: &#39;red&#39;,nt *tt} );nt *nt *ttconfig.get(
&#39;toolbar.collapsed&#39; ); // truent *ttconfig.get(
&#39;toolbar.color&#39; ); // &#39;red&#39;nt *nt * @param {String|Object}
name The configuration name or an object from which take properties asnt *
configuration entries. Configuration names are case-sensitive.nt * @param
{*} value The configuration value. Used if a name is passed.nt */ntset(
name, value ) {nttthis._setToTarget( this._config, name, value
);nt}nnt/**nt * Does exactly the same as {@link set} with one exception –
passed configuration extendsnt * existing one, but does not overwrite
already defined values.nt *nt * This method is supposed to be called by
plugin developers to setup plugin&#39;s configurations. It would bent *
rarely used for other needs.nt *nt * @param {String|Object} name The
configuration name or an object from which take properties asnt *
configuration entries. Configuration names are case-sensitive.nt * @param
{*} value The configuration value. Used if a name is passed.nt */ntdefine(
name, value ) {nttconst isDefine = true;nnttthis._setToTarget(
this._config, name, value, isDefine );nt}nnt/**nt * Gets the value for a
configuration entry.nt *nt *ttconfig.get( &#39;name&#39; );nt *nt * Deep
configurations can be retrieved by separating each part with a dot.nt *nt
*ttconfig.get( &#39;toolbar.collapsed&#39; );nt *nt * @param {String} name
The configuration name. Configuration names are case-sensitive.nt *
@returns {*} The configuration value or `undefined` if the configuration
entry was not found.nt */ntget( name ) {nttreturn this._getFromSource(
this._config, name );nt}nnt/**nt * Saves passed configuration to the
specified target (nested object).nt *nt * @privatent * @param {Object}
target Nested config object.nt * @param {String|Object} name The
configuration name or an object from which take properties asnt *
configuration entries. Configuration names are case-sensitive.nt * @param
{*} value The configuration value. Used if a name is passed.nt * @param
{Boolean} [isDefine=false] Define if passed configuration should overwrite
existing one.nt */nt_setToTarget( target, name, value, isDefine = false )
{ntt// In case of an object, iterate through it and call `_setToTarget`
again for each property.nttif ( isPlainObject( name ) )
{ntttthis._setObjectToTarget( target, name, isDefine
);nntttreturn;ntt}nntt// The configuration name should be split into parts
if it has dots. E.g. `resize.width` -&gt; [`resize`, `width`].nttconst
parts = name.split( &#39;.&#39; );nntt// Take the name of the configuration
out of the parts. E.g. `resize.width` -&gt; `width`.nttname =
parts.pop();nntt// Iterate over parts to check if currently stored
configuration has proper structure.nttfor ( const part of parts ) {nttt//
If there is no object for specified part then create one.ntttif (
!isPlainObject( target[ part ] ) ) {ntttttarget[ part ] = {};nttt}nnttt//
Nested object becomes a target.nttttarget = target[ part ];ntt}nntt// In
case of value is an object.nttif ( isPlainObject( value ) ) {nttt// We take
care of proper config structure.ntttif ( !isPlainObject( target[ name ] ) )
{ntttttarget[ name ] = {};nttt}nnttttarget = target[ name ];nnttt// And
iterate through this object calling `_setToTarget` again for each
property.ntttthis._setObjectToTarget( target, value, isDefine
);nntttreturn;ntt}nntt// Do nothing if we are defining configuration for
non empty name.nttif ( isDefine &amp;&amp; typeof target[ name ] !=
&#39;undefined&#39; ) {ntttreturn;ntt}nntttarget[ name ] =
value;nt}nnt/**nt * Get specified configuration from specified source
(nested object).nt *nt * @privatent * @param {Object} source level of
nested object.nt * @param {String} name The configuration name.
Configuration names are case-sensitive.nt * @returns {*} The configuration
value or `undefined` if the configuration entry was not found.nt
*/nt_getFromSource( source, name ) {ntt// The configuration name should be
split into parts if it has dots. E.g. `resize.width` -&gt; [`resize`,
`width`].nttconst parts = name.split( &#39;.&#39; );nntt// Take the name of
the configuration out of the parts. E.g. `resize.width` -&gt;
`width`.nttname = parts.pop();nntt// Iterate over parts to check if
currently stored configuration has proper structure.nttfor ( const part of
parts ) {ntttif ( !isPlainObject( source[ part ] ) ) {nttttsource =
null;nttttbreak;nttt}nnttt// Nested object becomes a source.ntttsource =
source[ part ];ntt}nntt// Always returns undefined for non existing
configurationnttreturn source ? source[ name ] : undefined;nt}nnt/**nt *
Iterates through passed object and calls {@link #_setToTarget} method with
object key and value for each property.nt *nt * @privatent * @param
{Object} target Nested config object.nt * @param {Object} configuration
Configuration data setnt * @param {Boolean} [isDefine] Defines if passed
configuration is default configuration or not.nt */nt_setObjectToTarget(
target, configuration, isDefine ) {nttObject.keys( configuration ).forEach(
key =&gt; {ntttthis._setToTarget( target, key, configuration[ key ],
isDefine );ntt} );nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/config.jsn// module id = nulln// module chunks =
“,”/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben. All
rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
utils/eventinfon */nnimport spy from &#39;./spy&#39;;nn/**n * The event
object passed to event callbacks. It is used to provide information about
the event as well as a tool ton * manipulate it.n */nexport default class
EventInfo {nt/**nt * @param {Object} source The emitter.nt * @param
{String} name The event name.nt */ntconstructor( source, name ) {ntt/**ntt
* The object that fired the event.ntt *ntt * @readonlyntt * @member
{Object}ntt */nttthis.source = source;nntt/**ntt * The event name.ntt *ntt
* @readonlyntt * @member {String}ntt */nttthis.name = name;nntt/**ntt *
Path this event has followed. See {@link
module:utils/emittermixin~EmitterMixin#delegate}.ntt *ntt * @readonlyntt *
@member {Array.&lt;Object&gt;}ntt */nttthis.path = [];nntt// The following
methods are defined in the constructor because they must be re-created per
instance.nntt/**ntt * Stops the event emitter to call further callbacks for
this event interaction.ntt *ntt * @method stopntt */nttthis.stop =
spy();nntt/**ntt * Removes the current callback from future interactions of
this event.ntt *ntt * @method offntt */nttthis.off = spy();nntt/**ntt * The
value which will be returned by {@link
module:utils/emittermixin~EmitterMixin#fire}.ntt *ntt * It&#39;s
`undefined` by default and can be changed by an event listener:ntt *ntt
*ttdataController.fire( &#39;getSelectedContent&#39;, ( evt ) =&gt; {ntt
*ttt// This listener will make `dataController.fire(
&#39;getSelectedContent&#39; )`ntt *ttt// always return an empty
DocumentFragment.ntt *tttevt.return = new DocumentFragment();ntt *ntt
*ttt// Make sure no other listeners are executed.ntt *tttevt.stop();ntt
*tt} );ntt *ntt * @member returnntt */nt}n}nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-utils/src/eventinfo.jsn// module id =
nulln// module chunks = “,”import eq from &#39;./eq&#39;;nn/**n * Gets the
index at which the `key` is found in `array` of key-value pairs.n *n *
@privaten * @param {Array} array The array to search.n * @param {*} key The
key to search for.n * @returns {number} Returns the index of the matched
value, else `-1`.n */nfunction assocIndexOf(array, key) {n  var length =
array.length;n  while (length–) {n    if (<a href="length">eq(array</a>[0],
key)) {n      return length;n    }n  }n  return -1;n}nnexport default
assocIndexOf;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_assocIndexOf.jsn// module id = nulln//
module chunks = “,”/**n * Performs an * [`SameValueZero`](<a
href="http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n">ecma-international.org/ecma-262/6.0/#sec-samevaluezero)n</a>
* comparison between two values to determine if they are equivalent.n *n *
@staticn * @memberOf _n * @since 4.0.0n * @category Langn * @param {*}
value The value to compare.n * @param {*} other The other value to
compare.n * @returns {boolean} Returns `true` if the values are equivalent,
else `false`.n * @examplen *n * var object = { &#39;user&#39;:
&#39;fred&#39; };n * var other = { &#39;user&#39;: &#39;fred&#39; };n *n *
_.eq(object, object);n * // =&gt; truen *n * _.eq(object, other);n * //
=&gt; falsen *n * _.eq(&#39;a&#39;, &#39;a&#39;);n * // =&gt; truen *n *
_.eq(&#39;a&#39;, Object(&#39;a&#39;));n * // =&gt; falsen *n * _.eq(NaN,
NaN);n * // =&gt; truen */nfunction eq(value, other) {n  return value ===
other || (value !== value &amp;&amp; other !== other);n}nnexport default
eq;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/eq.jsn// module id = nulln// module
chunks = “,”import assocIndexOf from &#39;./_assocIndexOf&#39;;nn/** Used
for built-in method references. */nvar arrayProto = Array.prototype;nn/**
Built-in value references. */nvar splice = arrayProto.splice;nn/**n *
Removes `key` and its value from the list cache.n *n * @privaten * @name
deleten * @memberOf ListCachen * @param {string} key The key of the value
to remove.n * @returns {boolean} Returns `true` if the entry was removed,
else `false`.n */nfunction listCacheDelete(key) {n  var data =
this.__data__,n      index = assocIndexOf(data, key);nn  if (index &lt; 0)
{n    return false;n  }n  var lastIndex = data.length - 1;n  if (index ==
lastIndex) {n    data.pop();n  } else {n    splice.call(data, index, 1);n 
}n  return true;n}nnexport default
listCacheDelete;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_listCacheDelete.jsn// module id =
nulln// module chunks = “,”import assocIndexOf from
&#39;./_assocIndexOf&#39;;nn/**n * Gets the list cache value for `key`.n *n
* @privaten * @name getn * @memberOf ListCachen * @param {string} key The
key of the value to get.n * @returns {*} Returns the entry value.n
*/nfunction listCacheGet(key) {n  var data = this.__data__,n      index =
assocIndexOf(data, key);nn  return index &lt; 0 ? undefined : <a
href="index">data</a>[1];n}nnexport default
listCacheGet;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_listCacheGet.jsn// module id = nulln//
module chunks = “,”import assocIndexOf from
&#39;./_assocIndexOf&#39;;nn/**n * Checks if a list cache value for `key`
exists.n *n * @privaten * @name hasn * @memberOf ListCachen * @param
{string} key The key of the entry to check.n * @returns {boolean} Returns
`true` if an entry for `key` exists, else `false`.n */nfunction
listCacheHas(key) {n  return assocIndexOf(this.__data__, key) &gt;
-1;n}nnexport default listCacheHas;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/_listCacheHas.jsn// module id =
nulln// module chunks = “,”import assocIndexOf from
&#39;./_assocIndexOf&#39;;nn/**n * Sets the list cache `key` to `value`.n
*n * @privaten * @name setn * @memberOf ListCachen * @param {string} key
The key of the value to set.n * @param {*} value The value to set.n *
@returns {Object} Returns the list cache instance.n */nfunction
listCacheSet(key, value) {n  var data = this.__data__,n      index =
assocIndexOf(data, key);nn  if (index &lt; 0) {n    data.push([key,
value]);n  } else {n    <a href="index">data</a>[1] = value;n  }n  return
this;n}nnexport default listCacheSet;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/_listCacheSet.jsn// module id =
nulln// module chunks = “,”import ListCache from
&#39;./_ListCache&#39;;nn/**n * Removes all key-value entries from the
stack.n *n * @privaten * @name clearn * @memberOf Stackn */nfunction
stackClear() {n  this.__data__ = new ListCache;n}nnexport default
stackClear;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_stackClear.jsn// module id = nulln//
module chunks = “,”import isObject from &#39;./isObject&#39;;nn/**
`Object#toString` result references. */nvar funcTag = &#39;[object
Function]&#39;,n    genTag = &#39;[object GeneratorFunction]&#39;;nn/**
Used for built-in method references. */nvar objectProto =
Object.prototype;nn/**n * Used to resolve then * [`toStringTag`](<a
href="http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n">ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)n</a>
* of values.n */nvar objectToString = objectProto.toString;nn/**n * Checks
if `value` is classified as a `Function` object.n *n * @staticn * @memberOf
_n * @since 0.1.0n * @category Langn * @param {*} value The value to
check.n * @returns {boolean} Returns `true` if `value` is correctly
classified,n *  else `false`.n * @examplen *n * <em>.isFunction(</em>);n *
// =&gt; truen *n * _.isFunction(/abc/);n * // =&gt; falsen */nfunction
isFunction(value) {n  // The use of `Object#toString` avoids issues with
the `typeof` operatorn  // in Safari 8 which returns &#39;object&#39; for
typed array and weak map constructors,n  // and PhantomJS 1.9 which returns
&#39;function&#39; for `NodeList` instances.n  var tag = isObject(value) ?
objectToString.call(value) : &#39;&#39;;n  return tag == funcTag || tag ==
genTag;n}nnexport default isFunction;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/isFunction.jsn// module id =
nulln// module chunks = “,”/**n * Checks if `value` is then * [language
type](<a
href="http://www.ecma-international.org/ecma-262/6.0/#sec-ecmascript-language-types)\n">www.ecma-international.org/ecma-262/6.0/#sec-ecmascript-language-types)n</a>
* of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`,
and `new String(&#39;&#39;)`)n *n * @staticn * @memberOf _n * @since 0.1.0n
* @category Langn * @param {*} value The value to check.n * @returns
{boolean} Returns `true` if `value` is an object, else `false`.n *
@examplen *n * _.isObject({});n * // =&gt; truen *n * _.isObject([1, 2,
3]);n * // =&gt; truen *n * <em>.isObject(</em>.noop);n * // =&gt; truen *n
* _.isObject(null);n * // =&gt; falsen */nfunction isObject(value) {n  var
type = typeof value;n  return !!value &amp;&amp; (type == &#39;object&#39;
|| type == &#39;function&#39;);n}nnexport default
isObject;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/isObject.jsn// module id = nulln// module
chunks = “,”/** Used to resolve the decompiled source of functions. */nvar
funcToString = Function.prototype.toString;nn/**n * Converts `func` to its
source code.n *n * @privaten * @param {Function} func The function to
process.n * @returns {string} Returns the source code.n */nfunction
toSource(func) {n  if (func != null) {n    try {n      return
funcToString.call(func);n    } catch (e) {}n    try {n      return (func +
&#39;&#39;);n    } catch (e) {}n  }n  return &#39;&#39;;n}nnexport default
toSource;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_toSource.jsn// module id = nulln//
module chunks = “,”import isFunction from &#39;./isFunction&#39;;nimport
isHostObject from &#39;./_isHostObject&#39;;nimport isObject from
&#39;./isObject&#39;;nimport toSource from &#39;./_toSource&#39;;nn/**n *
Used to match `RegExp`n * [syntax characters](<a
href="http://ecma-international.org/ecma-262/6.0/#sec-patterns).\n">ecma-international.org/ecma-262/6.0/#sec-patterns).n</a>
*/nvar reRegExpChar = /[\\^$.*+?()[\]{}|]/g;nn/** Used to detect host
constructors (Safari). */nvar reIsHostCtor = /^\[object
.+?Constructor\]$/;nn/** Used for built-in method references. */nvar
objectProto = Object.prototype;nn/** Used to resolve the decompiled source
of functions. */nvar funcToString = Function.prototype.toString;nn/** Used
to check objects for own properties. */nvar hasOwnProperty =
objectProto.hasOwnProperty;nn/** Used to detect if a method is native.
*/nvar reIsNative = RegExp(&#39;^&#39; +n 
funcToString.call(hasOwnProperty).replace(reRegExpChar,
&#39;\\$&amp;&#39;)n  .replace(/hasOwnProperty|(function).*?(?=\\\()| for
.+?(?=\\\])/g, &#39;$1.*?&#39;) + &#39;$&#39;n);nn/**n * Checks if `value`
is a native function.n *n * @staticn * @memberOf _n * @since 3.0.0n *
@category Langn * @param {*} value The value to check.n * @returns
{boolean} Returns `true` if `value` is a native function,n *  else
`false`.n * @examplen *n * _.isNative(Array.prototype.push);n * // =&gt;
truen *n * <em>.isNative(</em>);n * // =&gt; falsen */nfunction
isNative(value) {n  if (!isObject(value)) {n    return false;n  }n  var
pattern = (isFunction(value) || isHostObject(value)) ? reIsNative :
reIsHostCtor;n  return pattern.test(toSource(value));n}nnexport default
isNative;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/isNative.jsn// module id = nulln// module
chunks = “,”import isNative from &#39;./isNative&#39;;nn/**n * Gets the
native function at `key` of `object`.n *n * @privaten * @param {Object}
object The object to query.n * @param {string} key The key of the method to
get.n * @returns {*} Returns the function if it&#39;s native, else
`undefined`.n */nfunction getNative(object, key) {n  var value = <a
href="key">object</a>;n  return isNative(value) ? value :
undefined;n}nnexport default getNative;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/_getNative.jsn// module id =
nulln// module chunks = “,”import getNative from
&#39;./_getNative&#39;;nn/* Built-in method references that are verified to
be native. */nvar nativeCreate = getNative(Object,
&#39;create&#39;);nnexport default nativeCreate;nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-utils/src/lib/lodash/_nativeCreate.jsn//
module id = nulln// module chunks = “,”import nativeCreate from
&#39;./_nativeCreate&#39;;nn/**n * Removes all key-value entries from the
hash.n *n * @privaten * @name clearn * @memberOf Hashn */nfunction
hashClear() {n  this.__data__ = nativeCreate ? nativeCreate(null) :
{};n}nnexport default hashClear;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_hashClear.jsn// module id = nulln//
module chunks = “,”import nativeCreate from &#39;./_nativeCreate&#39;;nn/**
Used to stand-in for `undefined` hash values. */nvar HASH_UNDEFINED =
&#39;<em>lodash_hash_undefined</em>&#39;;nn/** Used for built-in method
references. */nvar objectProto = Object.prototype;nn/** Used to check
objects for own properties. */nvar hasOwnProperty =
objectProto.hasOwnProperty;nn/**n * Gets the hash value for `key`.n *n *
@privaten * @name getn * @memberOf Hashn * @param {string} key The key of
the value to get.n * @returns {*} Returns the entry value.n */nfunction
hashGet(key) {n  var data = this.__data__;n  if (nativeCreate) {n    var
result = <a href="key">data</a>;n    return result === HASH_UNDEFINED ?
undefined : result;n  }n  return hasOwnProperty.call(data, key) ? <a
href="key">data</a> : undefined;n}nnexport default
hashGet;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_hashGet.jsn// module id = nulln// module
chunks = “,”import nativeCreate from &#39;./_nativeCreate&#39;;nn/** Used
for built-in method references. */nvar objectProto = Object.prototype;nn/**
Used to check objects for own properties. */nvar hasOwnProperty =
objectProto.hasOwnProperty;nn/**n * Checks if a hash value for `key`
exists.n *n * @privaten * @name hasn * @memberOf Hashn * @param {string}
key The key of the entry to check.n * @returns {boolean} Returns `true` if
an entry for `key` exists, else `false`.n */nfunction hashHas(key) {n  var
data = this.__data__;n  return nativeCreate ? <a href="key">data</a> !==
undefined : hasOwnProperty.call(data, key);n}nnexport default
hashHas;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_hashHas.jsn// module id = nulln// module
chunks = “,”/**n * Removes `key` and its value from the hash.n *n *
@privaten * @name deleten * @memberOf Hashn * @param {Object} hash The hash
to modify.n * @param {string} key The key of the value to remove.n *
@returns {boolean} Returns `true` if the entry was removed, else `false`.n
*/nfunction hashDelete(key) {n  return this.has(key) &amp;&amp; delete <a
href="key">this.__data__</a>;n}nnexport default
hashDelete;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_hashDelete.jsn// module id = nulln//
module chunks = “,”import nativeCreate from &#39;./_nativeCreate&#39;;nn/**
Used to stand-in for `undefined` hash values. */nvar HASH_UNDEFINED =
&#39;<em>lodash_hash_undefined</em>&#39;;nn/**n * Sets the hash `key` to
`value`.n *n * @privaten * @name setn * @memberOf Hashn * @param {string}
key The key of the value to set.n * @param {*} value The value to set.n *
@returns {Object} Returns the hash instance.n */nfunction hashSet(key,
value) {n  var data = this.__data__;n  <a href="key">data</a> =
(nativeCreate &amp;&amp; value === undefined) ? HASH_UNDEFINED : value;n 
return this;n}nnexport default hashSet;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/_hashSet.jsn// module id =
nulln// module chunks = “,”import getNative from
&#39;./_getNative&#39;;nimport root from &#39;./_root&#39;;nn/* Built-in
method references that are verified to be native. */nvar Map =
getNative(root, &#39;Map&#39;);nnexport default
Map;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_Map.jsn// module id = nulln// module
chunks = “,”import Hash from &#39;./_Hash&#39;;nimport ListCache from
&#39;./_ListCache&#39;;nimport Map from &#39;./_Map&#39;;nn/**n * Removes
all key-value entries from the map.n *n * @privaten * @name clearn *
@memberOf MapCachen */nfunction mapCacheClear() {n  this.__data__ = {n   
&#39;hash&#39;: new Hash,n    &#39;map&#39;: new (Map || ListCache),n   
&#39;string&#39;: new Hashn  };n}nnexport default
mapCacheClear;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_mapCacheClear.jsn// module id = nulln//
module chunks = “,”import isKeyable from &#39;./_isKeyable&#39;;nn/**n *
Gets the data for `map`.n *n * @privaten * @param {Object} map The map to
query.n * @param {string} key The reference key.n * @returns {*} Returns
the map data.n */nfunction getMapData(map, key) {n  var data =
map.__data__;n  return isKeyable(key)n    ? data[typeof key ==
&#39;string&#39; ? &#39;string&#39; : &#39;hash&#39;]n    :
data.map;n}nnexport default getMapData;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/_getMapData.jsn// module id =
nulln// module chunks = “,”/**n * Checks if `value` is suitable for use as
unique object key.n *n * @privaten * @param {*} value The value to check.n
* @returns {boolean} Returns `true` if `value` is suitable, else `false`.n
*/nfunction isKeyable(value) {n  var type = typeof value;n  return (type ==
&#39;string&#39; || type == &#39;number&#39; || type == &#39;symbol&#39; ||
type == &#39;boolean&#39;)n    ? (value !== &#39;__proto__&#39;)n    :
(value === null);n}nnexport default isKeyable;nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-utils/src/lib/lodash/_isKeyable.jsn// module
id = nulln// module chunks = “,”import getMapData from
&#39;./_getMapData&#39;;nn/**n * Removes `key` and its value from the map.n
*n * @privaten * @name deleten * @memberOf MapCachen * @param {string} key
The key of the value to remove.n * @returns {boolean} Returns `true` if the
entry was removed, else `false`.n */nfunction mapCacheDelete(key) {n 
return getMapData(this, <a href="'delete'">key)</a>(key);n}nnexport default
mapCacheDelete;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_mapCacheDelete.jsn// module id = nulln//
module chunks = “,”import getMapData from &#39;./_getMapData&#39;;nn/**n *
Gets the map value for `key`.n *n * @privaten * @name getn * @memberOf
MapCachen * @param {string} key The key of the value to get.n * @returns
{*} Returns the entry value.n */nfunction mapCacheGet(key) {n  return
getMapData(this, key).get(key);n}nnexport default
mapCacheGet;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_mapCacheGet.jsn// module id = nulln//
module chunks = “,”import getMapData from &#39;./_getMapData&#39;;nn/**n *
Checks if a map value for `key` exists.n *n * @privaten * @name hasn *
@memberOf MapCachen * @param {string} key The key of the entry to check.n *
@returns {boolean} Returns `true` if an entry for `key` exists, else
`false`.n */nfunction mapCacheHas(key) {n  return getMapData(this,
key).has(key);n}nnexport default mapCacheHas;nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-utils/src/lib/lodash/_mapCacheHas.jsn//
module id = nulln// module chunks = “,”import getMapData from
&#39;./_getMapData&#39;;nn/**n * Sets the map `key` to `value`.n *n *
@privaten * @name setn * @memberOf MapCachen * @param {string} key The key
of the value to set.n * @param {*} value The value to set.n * @returns
{Object} Returns the map cache instance.n */nfunction mapCacheSet(key,
value) {n  getMapData(this, key).set(key, value);n  return this;n}nnexport
default mapCacheSet;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_mapCacheSet.jsn// module id = nulln//
module chunks = “,”import ListCache from &#39;./_ListCache&#39;;nimport
MapCache from &#39;./_MapCache&#39;;nn/** Used as the size to enable large
array optimizations. */nvar LARGE_ARRAY_SIZE = 200;nn/**n * Sets the stack
`key` to `value`.n *n * @privaten * @name setn * @memberOf Stackn * @param
{string} key The key of the value to set.n * @param {*} value The value to
set.n * @returns {Object} Returns the stack cache instance.n */nfunction
stackSet(key, value) {n  var cache = this.__data__;n  if (cache instanceof
ListCache &amp;&amp; cache.__data__.length == LARGE_ARRAY_SIZE) {n    cache
= this.__data__ = new MapCache(cache.__data__);n  }n  cache.set(key,
value);n  return this;n}nnexport default stackSet;nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-utils/src/lib/lodash/_stackSet.jsn// module
id = nulln// module chunks = “,”/**n * Removes `key` and its value from the
stack.n *n * @privaten * @name deleten * @memberOf Stackn * @param {string}
key The key of the value to remove.n * @returns {boolean} Returns `true` if
the entry was removed, else `false`.n */nfunction stackDelete(key) {n 
return <a href="'delete'">this.__data__</a>(key);n}nnexport default
stackDelete;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_stackDelete.jsn// module id = nulln//
module chunks = “,”/**n * Gets the stack value for `key`.n *n * @privaten *
@name getn * @memberOf Stackn * @param {string} key The key of the value to
get.n * @returns {*} Returns the entry value.n */nfunction stackGet(key) {n
return this.__data__.get(key);n}nnexport default
stackGet;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_stackGet.jsn// module id = nulln//
module chunks = “,”/**n * Checks if a stack value for `key` exists.n *n *
@privaten * @name hasn * @memberOf Stackn * @param {string} key The key of
the entry to check.n * @returns {boolean} Returns `true` if an entry for
`key` exists, else `false`.n */nfunction stackHas(key) {n  return
this.__data__.has(key);n}nnexport default
stackHas;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_stackHas.jsn// module id = nulln//
module chunks = “,”/**n * A specialized version of `_.forEach` for arrays
without support forn * iteratee shorthands.n *n * @privaten * @param
{Array} array The array to iterate over.n * @param {Function} iteratee The
function invoked per iteration.n * @returns {Array} Returns `array`.n
*/nfunction arrayEach(array, iteratee) {n  var index = -1,n      length =
array.length;nn  while (++index &lt; length) {n    if (<a
href="index">iteratee(array</a>, index, array) === false) {n      break;n  
}n  }n  return array;n}nnexport default arrayEach;nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-utils/src/lib/lodash/_arrayEach.jsn// module
id = nulln// module chunks = “,”import assignValue from
&#39;./_assignValue&#39;;nn/**n * Copies properties of `source` to
`object`.n *n * @privaten * @param {Object} source The object to copy
properties from.n * @param {Array} props The property identifiers to copy.n
* @param {Object} [object={}] The object to copy properties to.n * @param
{Function} [customizer] The function to customize copied values.n *
@returns {Object} Returns `object`.n */nfunction copyObject(source, props,
object, customizer) {n  object || (object = {});nn  var index = -1,n     
length = props.length;nn  while (++index &lt; length) {n    var key = <a
href="index">props</a>;nn    var newValue = customizern      ? <a
href="key">customizer(object</a>, <a href="key">source</a>, key, object,
source)n      : <a href="key">source</a>;nn    assignValue(object, key,
newValue);n  }n  return object;n}nnexport default
copyObject;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_copyObject.jsn// module id = nulln//
module chunks = “,”/* Built-in method references for those with the same
name as other `lodash` methods. */nvar nativeKeys = Object.keys;nn/**n *
The base implementation of `_.keys` which doesn&#39;t skip the constructorn
* property of prototypes or treat sparse arrays as dense.n *n * @privaten *
@param {Object} object The object to query.n * @returns {Array} Returns the
array of property names.n */nfunction baseKeys(object) {n  return
nativeKeys(Object(object));n}nnexport default
baseKeys;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_baseKeys.jsn// module id = nulln//
module chunks = “,”/**n * The base implementation of `_.times` without
support for iteratee shorthandsn * or max array length checks.n *n *
@privaten * @param {number} n The number of times to invoke `iteratee`.n *
@param {Function} iteratee The function invoked per iteration.n * @returns
{Array} Returns the array of results.n */nfunction baseTimes(n, iteratee)
{n  var index = -1,n      result = Array(n);nn  while (++index &lt; n) {n  
<a href="index">result</a> = iteratee(index);n  }n  return
result;n}nnexport default baseTimes;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/_baseTimes.jsn// module id =
nulln// module chunks = “,”/**n * The base implementation of `_.property`
without support for deep paths.n *n * @privaten * @param {string} key The
key of the property to get.n * @returns {Function} Returns the new accessor
function.n */nfunction baseProperty(key) {n  return function(object) {n   
return object == null ? undefined : <a href="key">object</a>;n 
};n}nnexport default baseProperty;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/_baseProperty.jsn// module id =
nulln// module chunks = “,”import baseProperty from
&#39;./_baseProperty&#39;;nn/**n * Gets the "length&quot; property value of
`object`.n *n * *Note:* This function is used to avoid an * [JIT bug](<a
href="https://bugs.webkit.org/show_bug.cgi?id=142792">bugs.webkit.org/show_bug.cgi?id=142792</a>)
that affectsn * Safari on at least iOS 8.1-8.3 ARM64.n *n * @privaten *
@param {Object} object The object to query.n * @returns {*} Returns the
"length&quot; value.n */nvar getLength =
baseProperty(&#39;length&#39;);nnexport default
getLength;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_getLength.jsn// module id = nulln//
module chunks = “,”/** Used as references for various `Number` constants.
*/nvar MAX_SAFE_INTEGER = 9007199254740991;nn/**n * Checks if `value` is a
valid array-like length.n *n * *Note:* This function is loosely based onn *
[`ToLength`](<a
href="http://ecma-international.org/ecma-262/6.0/#sec-tolength).\n">ecma-international.org/ecma-262/6.0/#sec-tolength).n</a>
*n * @staticn * @memberOf _n * @since 4.0.0n * @category Langn * @param {*}
value The value to check.n * @returns {boolean} Returns `true` if `value`
is a valid length,n *  else `false`.n * @examplen *n * _.isLength(3);n * //
=&gt; truen *n * _.isLength(Number.MIN_VALUE);n * // =&gt; falsen *n *
_.isLength(Infinity);n * // =&gt; falsen *n * _.isLength(&#39;3&#39;);n *
// =&gt; falsen */nfunction isLength(value) {n  return typeof value ==
&#39;number&#39; &amp;&amp;n    value &gt; -1 &amp;&amp; value % 1 == 0
&amp;&amp; value &lt;= MAX_SAFE_INTEGER;n}nnexport default
isLength;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/isLength.jsn// module id = nulln// module
chunks = “,”import getLength from &#39;./_getLength&#39;;nimport isFunction
from &#39;./isFunction&#39;;nimport isLength from
&#39;./isLength&#39;;nn/**n * Checks if `value` is array-like. A value is
considered array-like if it&#39;sn * not a function and has a
`value.length` that&#39;s an integer greater than orn * equal to `0` and
less than or equal to `Number.MAX_SAFE_INTEGER`.n *n * @staticn * @memberOf
_n * @since 4.0.0n * @category Langn * @param {*} value The value to
check.n * @returns {boolean} Returns `true` if `value` is array-like, else
`false`.n * @examplen *n * _.isArrayLike([1, 2, 3]);n * // =&gt; truen *n *
_.isArrayLike(document.body.children);n * // =&gt; truen *n *
_.isArrayLike(&#39;abc&#39;);n * // =&gt; truen *n *
<em>.isArrayLike(</em>.noop);n * // =&gt; falsen */nfunction
isArrayLike(value) {n  return value != null &amp;&amp;
isLength(getLength(value)) &amp;&amp; !isFunction(value);n}nnexport default
isArrayLike;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/isArrayLike.jsn// module id = nulln//
module chunks = “,”import isArrayLike from &#39;./isArrayLike&#39;;nimport
isObjectLike from &#39;./isObjectLike&#39;;nn/**n * This method is like
`_.isArrayLike` except that it also checks if `value`n * is an object.n *n
* @staticn * @memberOf _n * @since 4.0.0n * @category Langn * @param {*}
value The value to check.n * @returns {boolean} Returns `true` if `value`
is an array-like object,n *  else `false`.n * @examplen *n *
_.isArrayLikeObject([1, 2, 3]);n * // =&gt; truen *n *
_.isArrayLikeObject(document.body.children);n * // =&gt; truen *n *
_.isArrayLikeObject(&#39;abc&#39;);n * // =&gt; falsen *n *
<em>.isArrayLikeObject(</em>.noop);n * // =&gt; falsen */nfunction
isArrayLikeObject(value) {n  return isObjectLike(value) &amp;&amp;
isArrayLike(value);n}nnexport default
isArrayLikeObject;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/isArrayLikeObject.jsn// module id =
nulln// module chunks = “,”import isArrayLikeObject from
&#39;./isArrayLikeObject&#39;;nn/** `Object#toString` result references.
*/nvar argsTag = &#39;[object Arguments]&#39;;nn/** Used for built-in
method references. */nvar objectProto = Object.prototype;nn/** Used to
check objects for own properties. */nvar hasOwnProperty =
objectProto.hasOwnProperty;nn/**n * Used to resolve then *
[`toStringTag`](<a
href="http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n">ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)n</a>
* of values.n */nvar objectToString = objectProto.toString;nn/** Built-in
value references. */nvar propertyIsEnumerable =
objectProto.propertyIsEnumerable;nn/**n * Checks if `value` is likely an
`arguments` object.n *n * @staticn * @memberOf _n * @since 0.1.0n *
@category Langn * @param {*} value The value to check.n * @returns
{boolean} Returns `true` if `value` is correctly classified,n *  else
`false`.n * @examplen *n * _.isArguments(function() { return arguments;
}());n * // =&gt; truen *n * _.isArguments([1, 2, 3]);n * // =&gt; falsen
*/nfunction isArguments(value) {n  // Safari 8.1 incorrectly makes
`arguments.callee` enumerable in strict mode.n  return
isArrayLikeObject(value) &amp;&amp; hasOwnProperty.call(value,
&#39;callee&#39;) &amp;&amp;n    (!propertyIsEnumerable.call(value,
&#39;callee&#39;) || objectToString.call(value) == argsTag);n}nnexport
default isArguments;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/isArguments.jsn// module id = nulln//
module chunks = “,”/**n * Checks if `value` is classified as an `Array`
object.n *n * @staticn * @memberOf _n * @since 0.1.0n * @type {Function}n *
@category Langn * @param {*} value The value to check.n * @returns
{boolean} Returns `true` if `value` is correctly classified,n *  else
`false`.n * @examplen *n * _.isArray([1, 2, 3]);n * // =&gt; truen *n *
_.isArray(document.body.children);n * // =&gt; falsen *n *
_.isArray(&#39;abc&#39;);n * // =&gt; falsen *n *
<em>.isArray(</em>.noop);n * // =&gt; falsen */nvar isArray =
Array.isArray;nnexport default isArray;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/isArray.jsn// module id =
nulln// module chunks = “,”import isArray from &#39;./isArray&#39;;nimport
isObjectLike from &#39;./isObjectLike&#39;;nn/** `Object#toString` result
references. */nvar stringTag = &#39;[object String]&#39;;nn/** Used for
built-in method references. */nvar objectProto = Object.prototype;nn/**n *
Used to resolve then * [`toStringTag`](<a
href="http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n">ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)n</a>
* of values.n */nvar objectToString = objectProto.toString;nn/**n * Checks
if `value` is classified as a `String` primitive or object.n *n * @staticn
* @since 0.1.0n * @memberOf _n * @category Langn * @param {*} value The
value to check.n * @returns {boolean} Returns `true` if `value` is
correctly classified,n *  else `false`.n * @examplen *n *
_.isString(&#39;abc&#39;);n * // =&gt; truen *n * _.isString(1);n * //
=&gt; falsen */nfunction isString(value) {n  return typeof value ==
&#39;string&#39; ||n    (!isArray(value) &amp;&amp; isObjectLike(value)
&amp;&amp; objectToString.call(value) == stringTag);n}nnexport default
isString;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/isString.jsn// module id = nulln// module
chunks = “,”import baseTimes from &#39;./_baseTimes&#39;;nimport
isArguments from &#39;./isArguments&#39;;nimport isArray from
&#39;./isArray&#39;;nimport isLength from &#39;./isLength&#39;;nimport
isString from &#39;./isString&#39;;nn/**n * Creates an array of index keys
for `object` values of arrays,n * `arguments` objects, and strings,
otherwise `null` is returned.n *n * @privaten * @param {Object} object The
object to query.n * @returns {Array|null} Returns index keys, else `null`.n
*/nfunction indexKeys(object) {n  var length = object ? object.length :
undefined;n  if (isLength(length) &amp;&amp;n      (isArray(object) ||
isString(object) || isArguments(object))) {n    return baseTimes(length,
String);n  }n  return null;n}nnexport default
indexKeys;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_indexKeys.jsn// module id = nulln//
module chunks = “,”/** Used as references for various `Number` constants.
*/nvar MAX_SAFE_INTEGER = 9007199254740991;nn/** Used to detect unsigned
integer values. */nvar reIsUint = /^(?:<a href="1-9">0|</a>\d*)$/;nn/**n *
Checks if `value` is a valid array-like index.n *n * @privaten * @param {*}
value The value to check.n * @param {number} [length=MAX_SAFE_INTEGER] The
upper bounds of a valid index.n * @returns {boolean} Returns `true` if
`value` is a valid index, else `false`.n */nfunction isIndex(value, length)
{n  length = length == null ? MAX_SAFE_INTEGER : length;n  return !!length
&amp;&amp;n    (typeof value == &#39;number&#39; || reIsUint.test(value))
&amp;&amp;n    (value &gt; -1 &amp;&amp; value % 1 == 0 &amp;&amp; value
&lt; length);n}nnexport default isIndex;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/_isIndex.jsn// module id =
nulln// module chunks = “,”/** Used for built-in method references. */nvar
objectProto = Object.prototype;nn/**n * Checks if `value` is likely a
prototype object.n *n * @privaten * @param {*} value The value to check.n *
@returns {boolean} Returns `true` if `value` is a prototype, else `false`.n
*/nfunction isPrototype(value) {n  var Ctor = value &amp;&amp;
value.constructor,n      proto = (typeof Ctor == &#39;function&#39;
&amp;&amp; Ctor.prototype) || objectProto;nn  return value ===
proto;n}nnexport default isPrototype;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/_isPrototype.jsn// module id =
nulln// module chunks = “,”import baseHas from &#39;./_baseHas&#39;;nimport
baseKeys from &#39;./_baseKeys&#39;;nimport indexKeys from
&#39;./_indexKeys&#39;;nimport isArrayLike from
&#39;./isArrayLike&#39;;nimport isIndex from &#39;./_isIndex&#39;;nimport
isPrototype from &#39;./_isPrototype&#39;;nn/**n * Creates an array of the
own enumerable property names of `object`.n *n * *Note:* Non-object values
are coerced to objects. See then * [ES spec](<a
href="http://ecma-international.org/ecma-262/6.0/#sec-object.keys)\n">ecma-international.org/ecma-262/6.0/#sec-object.keys)n</a>
* for more details.n *n * @staticn * @since 0.1.0n * @memberOf _n *
@category Objectn * @param {Object} object The object to query.n * @returns
{Array} Returns the array of property names.n * @examplen *n * function
Foo() {n *   this.a = 1;n *   this.b = 2;n * }n *n * Foo.prototype.c = 3;n
*n * _.keys(new Foo);n * // =&gt; [&#39;a&#39;, &#39;b&#39;] (iteration
order is not guaranteed)n *n * _.keys(&#39;hi&#39;);n * // =&gt;
[&#39;0&#39;, &#39;1&#39;]n */nfunction keys(object) {n  var isProto =
isPrototype(object);n  if (!(isProto || isArrayLike(object))) {n    return
baseKeys(object);n  }n  var indexes = indexKeys(object),n      skipIndexes
= !!indexes,n      result = indexes || [],n      length = result.length;nn 
for (var key in object) {n    if (baseHas(object, key) &amp;&amp;n       
!(skipIndexes &amp;&amp; (key == &#39;length&#39; || isIndex(key, length)))
&amp;&amp;n        !(isProto &amp;&amp; key == &#39;constructor&#39;)) {n  
result.push(key);n    }n  }n  return result;n}nnexport default
keys;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/keys.jsn// module id = nulln// module
chunks = “,”import copyObject from &#39;./_copyObject&#39;;nimport keys
from &#39;./keys&#39;;nn/**n * The base implementation of `_.assign`
without support for multiple sourcesn * or `customizer` functions.n *n *
@privaten * @param {Object} object The destination object.n * @param
{Object} source The source object.n * @returns {Object} Returns `object`.n
*/nfunction baseAssign(object, source) {n  return object &amp;&amp;
copyObject(source, keys(source), object);n}nnexport default
baseAssign;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_baseAssign.jsn// module id = nulln//
module chunks = “,”/**n * Creates a clone of  `buffer`.n *n * @privaten *
@param {Buffer} buffer The buffer to clone.n * @param {boolean} [isDeep]
Specify a deep clone.n * @returns {Buffer} Returns the cloned buffer.n
*/nfunction cloneBuffer(buffer, isDeep) {n  if (isDeep) {n    return
buffer.slice();n  }n  var result = new buffer.constructor(buffer.length);n 
buffer.copy(result);n  return result;n}nnexport default
cloneBuffer;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_cloneBuffer.jsn// module id = nulln//
module chunks = “,”/**n * Copies the values of `source` to `array`.n *n *
@privaten * @param {Array} source The array to copy values from.n * @param
{Array} [<a href="]">array=</a> The array to copy values to.n * @returns
{Array} Returns `array`.n */nfunction copyArray(source, array) {n  var
index = -1,n      length = source.length;nn  array || (array =
Array(length));n  while (++index &lt; length) {n    <a
href="index">array</a> = <a href="index">source</a>;n  }n  return
array;n}nnexport default copyArray;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/_copyArray.jsn// module id =
nulln// module chunks = “,”import copyObject from
&#39;./_copyObject&#39;;nimport getSymbols from
&#39;./_getSymbols&#39;;nn/**n * Copies own symbol properties of `source`
to `object`.n *n * @privaten * @param {Object} source The object to copy
symbols from.n * @param {Object} [object={}] The object to copy symbols
to.n * @returns {Object} Returns `object`.n */nfunction copySymbols(source,
object) {n  return copyObject(source, getSymbols(source),
object);n}nnexport default copySymbols;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/_copySymbols.jsn// module id =
nulln// module chunks = “,”/**n * Appends the elements of `values` to
`array`.n *n * @privaten * @param {Array} array The array to modify.n *
@param {Array} values The values to append.n * @returns {Array} Returns
`array`.n */nfunction arrayPush(array, values) {n  var index = -1,n     
length = values.length,n      offset = array.length;nn  while (++index &lt;
length) {n    array[offset + index] = <a href="index">values</a>;n  }n 
return array;n}nnexport default arrayPush;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/_arrayPush.jsn// module id =
nulln// module chunks = “,”import arrayPush from
&#39;./_arrayPush&#39;;nimport isArray from &#39;./isArray&#39;;nn/**n *
The base implementation of `getAllKeys` and `getAllKeysIn` which usesn *
`keysFunc` and `symbolsFunc` to get the enumerable property names andn *
symbols of `object`.n *n * @privaten * @param {Object} object The object to
query.n * @param {Function} keysFunc The function to get the keys of
`object`.n * @param {Function} symbolsFunc The function to get the symbols
of `object`.n * @returns {Array} Returns the array of property names and
symbols.n */nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {n  var
result = keysFunc(object);n  return isArray(object) ? result :
arrayPush(result, symbolsFunc(object));n}nnexport default
baseGetAllKeys;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_baseGetAllKeys.jsn// module id = nulln//
module chunks = “,”import baseGetAllKeys from
&#39;./_baseGetAllKeys&#39;;nimport getSymbols from
&#39;./_getSymbols&#39;;nimport keys from &#39;./keys&#39;;nn/**n * Creates
an array of own enumerable property names and symbols of `object`.n *n *
@privaten * @param {Object} object The object to query.n * @returns {Array}
Returns the array of property names and symbols.n */nfunction
getAllKeys(object) {n  return baseGetAllKeys(object, keys,
getSymbols);n}nnexport default getAllKeys;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/_getAllKeys.jsn// module id =
nulln// module chunks = “,”import getNative from
&#39;./_getNative&#39;;nimport root from &#39;./_root&#39;;nn/* Built-in
method references that are verified to be native. */nvar DataView =
getNative(root, &#39;DataView&#39;);nnexport default
DataView;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_DataView.jsn// module id = nulln//
module chunks = “,”import getNative from &#39;./_getNative&#39;;nimport
root from &#39;./_root&#39;;nn/* Built-in method references that are
verified to be native. */nvar Promise = getNative(root,
&#39;Promise&#39;);nnexport default Promise;nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-utils/src/lib/lodash/_Promise.jsn// module
id = nulln// module chunks = “,”import getNative from
&#39;./_getNative&#39;;nimport root from &#39;./_root&#39;;nn/* Built-in
method references that are verified to be native. */nvar Set =
getNative(root, &#39;Set&#39;);nnexport default
Set;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_Set.jsn// module id = nulln// module
chunks = “,”import getNative from &#39;./_getNative&#39;;nimport root from
&#39;./_root&#39;;nn/* Built-in method references that are verified to be
native. */nvar WeakMap = getNative(root, &#39;WeakMap&#39;);nnexport
default WeakMap;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_WeakMap.jsn// module id = nulln// module
chunks = “,”/** Used for built-in method references. */nvar objectProto =
Object.prototype;nn/** Used to check objects for own properties. */nvar
hasOwnProperty = objectProto.hasOwnProperty;nn/**n * Initializes an array
clone.n *n * @privaten * @param {Array} array The array to clone.n *
@returns {Array} Returns the initialized clone.n */nfunction
initCloneArray(array) {n  var length = array.length,n      result =
array.constructor(length);nn  // Add properties assigned by `RegExp#exec`.n
if (length &amp;&amp; typeof <a href="0">array</a> == &#39;string&#39;
&amp;&amp; hasOwnProperty.call(array, &#39;index&#39;)) {n    result.index
= array.index;n    result.input = array.input;n  }n  return
result;n}nnexport default initCloneArray;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/_initCloneArray.jsn// module id
= nulln// module chunks = “,”import root from &#39;./_root&#39;;nn/**
Built-in value references. */nvar Uint8Array = root.Uint8Array;nnexport
default Uint8Array;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_Uint8Array.jsn// module id = nulln//
module chunks = “,”import Uint8Array from &#39;./_Uint8Array&#39;;nn/**n *
Creates a clone of `arrayBuffer`.n *n * @privaten * @param {ArrayBuffer}
arrayBuffer The array buffer to clone.n * @returns {ArrayBuffer} Returns
the cloned array buffer.n */nfunction cloneArrayBuffer(arrayBuffer) {n  var
result = new arrayBuffer.constructor(arrayBuffer.byteLength);n  new
Uint8Array(result).set(new Uint8Array(arrayBuffer));n  return
result;n}nnexport default cloneArrayBuffer;nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-utils/src/lib/lodash/_cloneArrayBuffer.jsn//
module id = nulln// module chunks = “,”import cloneArrayBuffer from
&#39;./_cloneArrayBuffer&#39;;nn/**n * Creates a clone of `dataView`.n *n *
@privaten * @param {Object} dataView The data view to clone.n * @param
{boolean} [isDeep] Specify a deep clone.n * @returns {Object} Returns the
cloned data view.n */nfunction cloneDataView(dataView, isDeep) {n  var
buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;n 
return new dataView.constructor(buffer, dataView.byteOffset,
dataView.byteLength);n}nnexport default
cloneDataView;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_cloneDataView.jsn// module id = nulln//
module chunks = “,”/**n * Adds the key-value `pair` to `map`.n *n *
@privaten * @param {Object} map The map to modify.n * @param {Array} pair
The key-value pair to add.n * @returns {Object} Returns `map`.n */nfunction
addMapEntry(map, pair) {n  // Don&#39;t return `Map#set` because it
doesn&#39;t return the map instance in IE 11.n  <a
href="0">map.set(pair</a>, <a href="1">pair</a>);n  return map;n}nnexport
default addMapEntry;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_addMapEntry.jsn// module id = nulln//
module chunks = “,”/**n * A specialized version of `_.reduce` for arrays
without support forn * iteratee shorthands.n *n * @privaten * @param
{Array} array The array to iterate over.n * @param {Function} iteratee The
function invoked per iteration.n * @param {*} [accumulator] The initial
value.n * @param {boolean} [initAccum] Specify using the first element of
`array` asn *  the initial value.n * @returns {*} Returns the accumulated
value.n */nfunction arrayReduce(array, iteratee, accumulator, initAccum) {n
var index = -1,n      length = array.length;nn  if (initAccum &amp;&amp;
length) {n    accumulator = <a href="++index">array</a>;n  }n  while
(++index &lt; length) {n    accumulator = iteratee(accumulator, <a
href="index">array</a>, index, array);n  }n  return accumulator;n}nnexport
default arrayReduce;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_arrayReduce.jsn// module id = nulln//
module chunks = “,”/**n * Converts `map` to its key-value pairs.n *n *
@privaten * @param {Object} map The map to convert.n * @returns {Array}
Returns the key-value pairs.n */nfunction mapToArray(map) {n  var index =
-1,n      result = Array(map.size);nn  map.forEach(function(value, key) {n 
<a href="++index">result</a> = [key, value];n  });n  return
result;n}nnexport default mapToArray;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/_mapToArray.jsn// module id =
nulln// module chunks = “,”import addMapEntry from
&#39;./_addMapEntry&#39;;nimport arrayReduce from
&#39;./_arrayReduce&#39;;nimport mapToArray from
&#39;./_mapToArray&#39;;nn/**n * Creates a clone of `map`.n *n * @privaten
* @param {Object} map The map to clone.n * @param {Function} cloneFunc The
function to clone values.n * @param {boolean} [isDeep] Specify a deep
clone.n * @returns {Object} Returns the cloned map.n */nfunction
cloneMap(map, isDeep, cloneFunc) {n  var array = isDeep ?
cloneFunc(mapToArray(map), true) : mapToArray(map);n  return
arrayReduce(array, addMapEntry, new map.constructor);n}nnexport default
cloneMap;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_cloneMap.jsn// module id = nulln//
module chunks = “,”/** Used to match `RegExp` flags from their coerced
string values. */nvar reFlags = /\w*$/;nn/**n * Creates a clone of
`regexp`.n *n * @privaten * @param {Object} regexp The regexp to clone.n *
@returns {Object} Returns the cloned regexp.n */nfunction
cloneRegExp(regexp) {n  var result = new regexp.constructor(regexp.source,
reFlags.exec(regexp));n  result.lastIndex = regexp.lastIndex;n  return
result;n}nnexport default cloneRegExp;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/_cloneRegExp.jsn// module id =
nulln// module chunks = “,”/**n * Adds `value` to `set`.n *n * @privaten *
@param {Object} set The set to modify.n * @param {*} value The value to
add.n * @returns {Object} Returns `set`.n */nfunction addSetEntry(set,
value) {n  set.add(value);n  return set;n}nnexport default
addSetEntry;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_addSetEntry.jsn// module id = nulln//
module chunks = “,”/**n * Converts `set` to an array of its values.n *n *
@privaten * @param {Object} set The set to convert.n * @returns {Array}
Returns the values.n */nfunction setToArray(set) {n  var index = -1,n     
result = Array(set.size);nn  set.forEach(function(value) {n    <a
href="++index">result</a> = value;n  });n  return result;n}nnexport default
setToArray;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_setToArray.jsn// module id = nulln//
module chunks = “,”import addSetEntry from &#39;./_addSetEntry&#39;;nimport
arrayReduce from &#39;./_arrayReduce&#39;;nimport setToArray from
&#39;./_setToArray&#39;;nn/**n * Creates a clone of `set`.n *n * @privaten
* @param {Object} set The set to clone.n * @param {Function} cloneFunc The
function to clone values.n * @param {boolean} [isDeep] Specify a deep
clone.n * @returns {Object} Returns the cloned set.n */nfunction
cloneSet(set, isDeep, cloneFunc) {n  var array = isDeep ?
cloneFunc(setToArray(set), true) : setToArray(set);n  return
arrayReduce(array, addSetEntry, new set.constructor);n}nnexport default
cloneSet;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_cloneSet.jsn// module id = nulln//
module chunks = “,”import root from &#39;./_root&#39;;nn/** Built-in value
references. */nvar Symbol = root.Symbol;nnexport default
Symbol;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_Symbol.jsn// module id = nulln// module
chunks = “,”import Symbol from &#39;./_Symbol&#39;;nn/** Used to convert
symbols to primitives and strings. */nvar symbolProto = Symbol ?
Symbol.prototype : undefined,n    symbolValueOf = symbolProto ?
symbolProto.valueOf : undefined;nn/**n * Creates a clone of the `symbol`
object.n *n * @privaten * @param {Object} symbol The symbol object to
clone.n * @returns {Object} Returns the cloned symbol object.n */nfunction
cloneSymbol(symbol) {n  return symbolValueOf ?
Object(symbolValueOf.call(symbol)) : {};n}nnexport default
cloneSymbol;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_cloneSymbol.jsn// module id = nulln//
module chunks = “,”import cloneArrayBuffer from
&#39;./_cloneArrayBuffer&#39;;nn/**n * Creates a clone of `typedArray`.n *n
* @privaten * @param {Object} typedArray The typed array to clone.n *
@param {boolean} [isDeep] Specify a deep clone.n * @returns {Object}
Returns the cloned typed array.n */nfunction cloneTypedArray(typedArray,
isDeep) {n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) :
typedArray.buffer;n  return new typedArray.constructor(buffer,
typedArray.byteOffset, typedArray.length);n}nnexport default
cloneTypedArray;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_cloneTypedArray.jsn// module id =
nulln// module chunks = “,”import cloneArrayBuffer from
&#39;./_cloneArrayBuffer&#39;;nimport cloneDataView from
&#39;./_cloneDataView&#39;;nimport cloneMap from
&#39;./_cloneMap&#39;;nimport cloneRegExp from
&#39;./_cloneRegExp&#39;;nimport cloneSet from
&#39;./_cloneSet&#39;;nimport cloneSymbol from
&#39;./_cloneSymbol&#39;;nimport cloneTypedArray from
&#39;./_cloneTypedArray&#39;;nn/** `Object#toString` result references.
*/nvar boolTag = &#39;[object Boolean]&#39;,n    dateTag = &#39;[object
Date]&#39;,n    mapTag = &#39;[object Map]&#39;,n    numberTag =
&#39;[object Number]&#39;,n    regexpTag = &#39;[object RegExp]&#39;,n   
setTag = &#39;[object Set]&#39;,n    stringTag = &#39;[object
String]&#39;,n    symbolTag = &#39;[object Symbol]&#39;;nnvar
arrayBufferTag = &#39;[object ArrayBuffer]&#39;,n    dataViewTag =
&#39;[object DataView]&#39;,n    float32Tag = &#39;[object
Float32Array]&#39;,n    float64Tag = &#39;[object Float64Array]&#39;,n   
int8Tag = &#39;[object Int8Array]&#39;,n    int16Tag = &#39;[object
Int16Array]&#39;,n    int32Tag = &#39;[object Int32Array]&#39;,n   
uint8Tag = &#39;[object Uint8Array]&#39;,n    uint8ClampedTag =
&#39;[object Uint8ClampedArray]&#39;,n    uint16Tag = &#39;[object
Uint16Array]&#39;,n    uint32Tag = &#39;[object Uint32Array]&#39;;nn/**n *
Initializes an object clone based on its `toStringTag`.n *n * *Note:* This
function only supports cloning values with tags ofn * `Boolean`, `Date`,
`Error`, `Number`, `RegExp`, or `String`.n *n * @privaten * @param {Object}
object The object to clone.n * @param {string} tag The `toStringTag` of the
object to clone.n * @param {Function} cloneFunc The function to clone
values.n * @param {boolean} [isDeep] Specify a deep clone.n * @returns
{Object} Returns the initialized clone.n */nfunction initCloneByTag(object,
tag, cloneFunc, isDeep) {n  var Ctor = object.constructor;n  switch (tag)
{n    case arrayBufferTag:n      return cloneArrayBuffer(object);nn    case
boolTag:n    case dateTag:n      return new Ctor(+object);nn    case
dataViewTag:n      return cloneDataView(object, isDeep);nn    case
float32Tag: case float64Tag:n    case int8Tag: case int16Tag: case
int32Tag:n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case
uint32Tag:n      return cloneTypedArray(object, isDeep);nn    case mapTag:n
return cloneMap(object, isDeep, cloneFunc);nn    case numberTag:n    case
stringTag:n      return new Ctor(object);nn    case regexpTag:n      return
cloneRegExp(object);nn    case setTag:n      return cloneSet(object,
isDeep, cloneFunc);nn    case symbolTag:n      return cloneSymbol(object);n
}n}nnexport default initCloneByTag;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/_initCloneByTag.jsn// module id
= nulln// module chunks = “,”import isObject from
&#39;./isObject&#39;;nn/** Built-in value references. */nvar objectCreate =
Object.create;nn/**n * The base implementation of `_.create` without
support for assigningn * properties to the created object.n *n * @privaten
* @param {Object} prototype The object to inherit from.n * @returns
{Object} Returns the new object.n */nfunction baseCreate(proto) {n  return
isObject(proto) ? objectCreate(proto) : {};n}nnexport default
baseCreate;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_baseCreate.jsn// module id = nulln//
module chunks = “,”import baseCreate from &#39;./_baseCreate&#39;;nimport
getPrototype from &#39;./_getPrototype&#39;;nimport isPrototype from
&#39;./_isPrototype&#39;;nn/**n * Initializes an object clone.n *n *
@privaten * @param {Object} object The object to clone.n * @returns
{Object} Returns the initialized clone.n */nfunction
initCloneObject(object) {n  return (typeof object.constructor ==
&#39;function&#39; &amp;&amp; !isPrototype(object))n    ?
baseCreate(getPrototype(object))n    : {};n}nnexport default
initCloneObject;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_initCloneObject.jsn// module id =
nulln// module chunks = “,”import baseClone from
&#39;./_baseClone&#39;;nn/**n * Creates a shallow clone of `value`.n *n *
*Note:* This method is loosely based on then * [structured clone
algorithm](<a
href="https://mdn.io/Structured_clone_algorithm)\n">mdn.io/Structured_clone_algorithm)n</a>
* and supports cloning arrays, array buffers, booleans, date objects,
maps,n * numbers, `Object` objects, regexes, sets, strings, symbols, and
typedn * arrays. The own enumerable properties of `arguments` objects are
clonedn * as plain objects. An empty object is returned for uncloneable
values suchn * as error objects, functions, DOM nodes, and WeakMaps.n *n *
@staticn * @memberOf _n * @since 0.1.0n * @category Langn * @param {*}
value The value to clone.n * @returns {*} Returns the cloned value.n * @see
_.cloneDeepn * @examplen *n * var objects = [{ &#39;a&#39;: 1 }, {
&#39;b&#39;: 2 }];n *n * var shallow = _.clone(objects);n * <a
href="0">console.log(shallow</a> === <a href="0">objects</a>);n * // =&gt;
truen */nfunction clone(value) {n  return baseClone(value, false,
true);n}nnexport default clone;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/clone.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module engine/view/textn */nnimport Node from &#39;./node&#39;;nn/**n *
Tree view text node.n *n * @extends module:engine/view/node~Noden */nexport
default class Text extends Node {nt/**nt * Creates a tree view text node.nt
*nt * *Note:* Constructor of this class shouldn&#39;t be used directly in
the code.nt * Use the {@link module:engine/view/writer~Writer#createText}
method instead.nt *nt * @protectednt * @param {String} data Text.nt
*/ntconstructor( data ) {nttsuper();nntt/**ntt * The text content.ntt *ntt
* Setting the data fires the {@link
module:engine/view/node~Node#event:change:text change event}.ntt *ntt *
@protectedntt * @member {String} module:engine/view/text~Text#_textDatantt
*/nttthis._textData = data;nt}nnt/**nt * @inheritDocnt */ntis( type )
{nttreturn type == &#39;text&#39; || super.is( type );nt}nnt/**nt * The
text content.nt *nt * @returns {String}nt */ntget data() {nttreturn
this._textData;nt}nnt/**nt * This getter is required when using the
addition assignment operator on protected property:nt *nt *ttconst foo =
new Text( &#39;foo&#39; );nt *ttconst bar = new Text( &#39;bar&#39; );nt
*nt *ttfoo._data += bar.data;   // executes: `foo._data = foo._data +
bar.data`nt *ttconsole.log( foo.data ); // prints: &#39;foobar&#39;nt *nt *
If the protected getter didn&#39;t exist, `foo._data` will return
`undefined` and result of the merge will be invalid.nt *nt * @protectednt *
@returns {String}nt */ntget _data() {nttreturn this.data;nt}nnt/**nt * Sets
data and fires the {@link module:engine/view/node~Node#event:change:text
change event}.nt *nt * @protectednt * @fires change:textnt * @param
{String} data New data for the text node.nt */ntset _data( data )
{nttthis._fireChange( &#39;text&#39;, this );nnttthis._textData =
data;nt}nnt/**nt * Checks if this text node is similar to other text
node.nt * Both nodes should have the same data to be considered as
similar.nt *nt * @param {module:engine/view/text~Text} otherNode Node to
check if it is same as this node.nt * @returns {Boolean}nt */ntisSimilar(
otherNode ) {nttif ( !( otherNode instanceof Text ) ) {ntttreturn
false;ntt}nnttreturn this === otherNode || this.data ===
otherNode.data;nt}nnt/**nt * Clones this node.nt *nt * @protectednt *
@returns {module:engine/view/text~Text} Text node that is a clone of this
node.nt */nt_clone() {nttreturn new Text( this.data
);nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/view/text.jsn// module id = nulln// module chunks =
“,”/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben. All
rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
engine/view/textproxyn */nnimport CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nn/**n * TextProxy is
a wrapper for substring of {@link module:engine/view/text~Text}. Instance
of this class is created byn * {@link
module:engine/view/treewalker~TreeWalker} when only a part of {@link
module:engine/view/text~Text} needs to be returned.n *n * `TextProxy` has
an API similar to {@link module:engine/view/text~Text Text} and allows to
do most of the common tasks performedn * on view nodes.n *n * *Note:* Some
`TextProxy` instances may represent whole text node, not just a part of
it.n * See {@link module:engine/view/textproxy~TextProxy#isPartial}.n *n *
*Note:* `TextProxy` is a readonly interface.n *n * *Note:* `TextProxy`
instances are created on the fly basing on the current state of parent
{@link module:engine/view/text~Text}.n * Because of this it is highly
unrecommended to store references to `TextProxy instances because they
might getn * invalidated due to operations on Document. Also TextProxy is
not a {@link module:engine/view/node~Node} so it can not ben * inserted as
a child of {@link module:engine/view/element~Element}.n *n * `TextProxy`
instances are created by {@link module:engine/view/treewalker~TreeWalker
view tree walker}. You should not need to createn * an instance of this
class by your own.n */nexport default class TextProxy {nt/**nt * Creates a
text proxy.nt *nt * @protectednt * @param {module:engine/view/text~Text}
textNode Text node which part is represented by this text proxy.nt * @param
{Number} offsetInText Offset in {@link
module:engine/view/textproxy~TextProxy#textNode text node}nt * from which
the text proxy starts.nt * @param {Number} length Text proxy length, that
is how many text node&#39;s characters, starting from `offsetInText` it
represents.nt * @constructornt */ntconstructor( textNode, offsetInText,
length ) {ntt/**ntt * Reference to the {@link module:engine/view/text~Text}
element which TextProxy is a substring.ntt *ntt * @readonlyntt * @member
{module:engine/view/text~Text}
module:engine/view/textproxy~TextProxy#textNodentt */nttthis.textNode =
textNode;nnttif ( offsetInText &lt; 0 || offsetInText &gt;
textNode.data.length ) {nttt/**nttt * Given offsetInText value is
incorrect.nttt *nttt * @error view-textproxy-wrong-offsetintextnttt
*/ntttthrow new CKEditorError( &#39;view-textproxy-wrong-offsetintext:
Given offsetInText value is incorrect.&#39; );ntt}nnttif ( length &lt; 0 ||
offsetInText + length &gt; textNode.data.length ) {nttt/**nttt * Given
length value is incorrect.nttt *nttt * @error
view-textproxy-wrong-lengthnttt */ntttthrow new CKEditorError(
&#39;view-textproxy-wrong-length: Given length value is incorrect.&#39;
);ntt}nntt/**ntt * Text data represented by this text proxy.ntt *ntt *
@readonlyntt * @member {String}
module:engine/view/textproxy~TextProxy#datantt */nttthis.data =
textNode.data.substring( offsetInText, offsetInText + length );nntt/**ntt *
Offset in the `textNode` where this `TextProxy` instance starts.ntt *ntt *
@readonlyntt * @member {Number}
module:engine/view/textproxy~TextProxy#offsetInTextntt
*/nttthis.offsetInText = offsetInText;nt}nnt/**nt * @inheritDocnt */ntget
offsetSize() {nttreturn this.data.length;nt}nnt/**nt * Flag indicating
whether `TextProxy` instance covers only part of the original {@link
module:engine/view/text~Text text node}nt * (`true`) or the whole text node
(`false`).nt *nt * This is `false` when text proxy starts at the very
beginning of {@link module:engine/view/textproxy~TextProxy#textNode
textNode}nt * ({@link module:engine/view/textproxy~TextProxy#offsetInText
offsetInText} equals `0`) and text proxy sizes is equal tont * text node
size.nt *nt * @readonlynt * @type {Boolean}nt */ntget isPartial()
{nttreturn this.data.length !== this.textNode.data.length;nt}nnt/**nt *
Parent of this text proxy, which is same as parent of text node represented
by this text proxy.nt *nt * @readonlynt * @type
{module:engine/view/element~Element|module:engine/view/documentfragment~DocumentFragment|null}nt
*/ntget parent() {nttreturn this.textNode.parent;nt}nnt/**nt * Root of this
text proxy, which is same as root of text node represented by this text
proxy.nt *nt * @readonlynt * @type
{module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment}nt
*/ntget root() {nttreturn this.textNode.root;nt}nnt/**nt * {@link
module:engine/view/document~Document View document} that owns this text
proxy, or `null` if the text proxy is insident * {@link
module:engine/view/documentfragment~DocumentFragment document fragment}.nt
*nt * @readonlynt * @type {module:engine/view/document~Document|null}nt
*/ntget document() {nttreturn this.textNode.document;nt}nnt/**nt * Checks
whether given view tree object is of given type.nt *nt * Read more in
{@link module:engine/view/node~Node#is}.nt *nt * @param {String} typent *
@returns {Boolean}nt */ntis( type ) {nttreturn type ==
&#39;textProxy&#39;;nt}nnt/**nt * Returns ancestors array of this text
proxy.nt *nt * @param {Object} options Options object.nt * @param {Boolean}
[options.includeSelf=false] When set to `true` {#textNode} will be also
included in parent&#39;s array.nt * @param {Boolean}
[options.parentFirst=false] When set to `true`, array will be sorted from
text proxy parent tont * root element, otherwise root element will be the
first item in the array.nt * @returns {Array} Array with ancestors.nt
*/ntgetAncestors( options = { includeSelf: false, parentFirst: false } )
{nttconst ancestors = [];nttlet parent = options.includeSelf ?
this.textNode : this.parent;nnttwhile ( parent !== null ) {ntttancestors[
options.parentFirst ? &#39;push&#39; : &#39;unshift&#39; ]( parent
);ntttparent = parent.parent;ntt}nnttreturn
ancestors;nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/view/textproxy.jsn// module id = nulln// module
chunks = “,”/**n * A faster alternative to `Function#apply`, this function
invokes `func`n * with the `this` binding of `thisArg` and the arguments of
`args`.n *n * @privaten * @param {Function} func The function to invoke.n *
@param {*} thisArg The `this` binding of `func`.n * @param {Array} args The
arguments to invoke `func` with.n * @returns {*} Returns the result of
`func`.n */nfunction apply(func, thisArg, args) {n  var length =
args.length;n  switch (length) {n    case 0: return func.call(thisArg);n   
case 1: return func.call(thisArg, <a href="0">args</a>);n    case 2: return
func.call(thisArg, <a href="0">args</a>, <a href="1">args</a>);n    case 3:
return func.call(thisArg, <a href="0">args</a>, <a href="1">args</a>, <a
href="2">args</a>);n  }n  return func.apply(thisArg, args);n}nnexport
default apply;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_apply.jsn// module id = nulln// module
chunks = “,”import isObjectLike from &#39;./isObjectLike&#39;;nn/**
`Object#toString` result references. */nvar symbolTag = &#39;[object
Symbol]&#39;;nn/** Used for built-in method references. */nvar objectProto
= Object.prototype;nn/**n * Used to resolve then * [`toStringTag`](<a
href="http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n">ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)n</a>
* of values.n */nvar objectToString = objectProto.toString;nn/**n * Checks
if `value` is classified as a `Symbol` primitive or object.n *n * @staticn
* @memberOf _n * @since 4.0.0n * @category Langn * @param {*} value The
value to check.n * @returns {boolean} Returns `true` if `value` is
correctly classified,n *  else `false`.n * @examplen *n *
_.isSymbol(Symbol.iterator);n * // =&gt; truen *n *
_.isSymbol(&#39;abc&#39;);n * // =&gt; falsen */nfunction isSymbol(value)
{n  return typeof value == &#39;symbol&#39; ||n    (isObjectLike(value)
&amp;&amp; objectToString.call(value) == symbolTag);n}nnexport default
isSymbol;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/isSymbol.jsn// module id = nulln// module
chunks = “,”import isFunction from &#39;./isFunction&#39;;nimport isObject
from &#39;./isObject&#39;;nimport isSymbol from &#39;./isSymbol&#39;;nn/**
Used as references for various `Number` constants. */nvar NAN = 0 / 0;nn/**
Used to match leading and trailing whitespace. */nvar reTrim =
/^\s+|\s+$/g;nn/** Used to detect bad signed hexadecimal string values.
*/nvar reIsBadHex = /^[-+]<a href="0-9a-f">0x</a>+$/i;nn/** Used to detect
binary string values. */nvar reIsBinary = /^<a href="01">0b</a>+$/i;nn/**
Used to detect octal string values. */nvar reIsOctal = /^<a
href="0-7">0o</a>+$/i;nn/** Built-in method references without a dependency
on `root`. */nvar freeParseInt = parseInt;nn/**n * Converts `value` to a
number.n *n * @staticn * @memberOf _n * @since 4.0.0n * @category Langn *
@param {*} value The value to process.n * @returns {number} Returns the
number.n * @examplen *n * _.toNumber(3.2);n * // =&gt; 3.2n *n *
_.toNumber(Number.MIN_VALUE);n * // =&gt; 5e-324n *n *
_.toNumber(Infinity);n * // =&gt; Infinityn *n *
_.toNumber(&#39;3.2&#39;);n * // =&gt; 3.2n */nfunction toNumber(value) {n 
if (typeof value == &#39;number&#39;) {n    return value;n  }n  if
(isSymbol(value)) {n    return NAN;n  }n  if (isObject(value)) {n    var
other = isFunction(value.valueOf) ? value.valueOf() : value;n    value =
isObject(other) ? (other + &#39;&#39;) : other;n  }n  if (typeof value !=
&#39;string&#39;) {n    return value === 0 ? value : +value;n  }n  value =
value.replace(reTrim, &#39;&#39;);n  var isBinary =
reIsBinary.test(value);n  return (isBinary || reIsOctal.test(value))n    ?
freeParseInt(value.slice(2), isBinary ? 2 : 8)n    :
(reIsBadHex.test(value) ? NAN : +value);n}nnexport default
toNumber;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/toNumber.jsn// module id = nulln// module
chunks = “,”import toNumber from &#39;./toNumber&#39;;nn/** Used as
references for various `Number` constants. */nvar INFINITY = 1 / 0,n   
MAX_INTEGER = 1.7976931348623157e+308;nn/**n * Converts `value` to a finite
number.n *n * @staticn * @memberOf _n * @since 4.12.0n * @category Langn *
@param {*} value The value to convert.n * @returns {number} Returns the
converted number.n * @examplen *n * _.toFinite(3.2);n * // =&gt; 3.2n *n *
_.toFinite(Number.MIN_VALUE);n * // =&gt; 5e-324n *n *
_.toFinite(Infinity);n * // =&gt; 1.7976931348623157e+308n *n *
_.toFinite(&#39;3.2&#39;);n * // =&gt; 3.2n */nfunction toFinite(value) {n 
if (!value) {n    return value === 0 ? value : 0;n  }n  value =
toNumber(value);n  if (value === INFINITY || value === -INFINITY) {n    var
sign = (value &lt; 0 ? -1 : 1);n    return sign * MAX_INTEGER;n  }n  return
value === value ? value : 0;n}nnexport default
toFinite;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/toFinite.jsn// module id = nulln// module
chunks = “,”import toFinite from &#39;./toFinite&#39;;nn/**n * Converts
`value` to an integer.n *n * *Note:* This function is loosely based onn *
[`ToInteger`](<a
href="http://www.ecma-international.org/ecma-262/6.0/#sec-tointeger).\n">www.ecma-international.org/ecma-262/6.0/#sec-tointeger).n</a>
*n * @staticn * @memberOf _n * @since 4.0.0n * @category Langn * @param {*}
value The value to convert.n * @returns {number} Returns the converted
integer.n * @examplen *n * _.toInteger(3.2);n * // =&gt; 3n *n *
_.toInteger(Number.MIN_VALUE);n * // =&gt; 0n *n * _.toInteger(Infinity);n
* // =&gt; 1.7976931348623157e+308n *n * _.toInteger(&#39;3.2&#39;);n * //
=&gt; 3n */nfunction toInteger(value) {n  var result = toFinite(value),n   
remainder = result % 1;nn  return result === result ? (remainder ? result -
remainder : result) : 0;n}nnexport default
toInteger;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/toInteger.jsn// module id = nulln//
module chunks = “,”import isIterateeCall from
&#39;./_isIterateeCall&#39;;nimport rest from &#39;./rest&#39;;nn/**n *
Creates a function like `_.assign`.n *n * @privaten * @param {Function}
assigner The function to assign values.n * @returns {Function} Returns the
new assigner function.n */nfunction createAssigner(assigner) {n  return
rest(function(object, sources) {n    var index = -1,n        length =
sources.length,n        customizer = length &gt; 1 ? sources[length - 1] :
undefined,n        guard = length &gt; 2 ? <a href="2">sources</a> :
undefined;nn    customizer = (assigner.length &gt; 3 &amp;&amp; typeof
customizer == &#39;function&#39;)n      ? (length–, customizer)n      :
undefined;nn    if (guard &amp;&amp; <a
href="0">isIterateeCall(sources</a>, <a href="1">sources</a>, guard)) {n   
customizer = length &lt; 3 ? undefined : customizer;n      length = 1;n   
}n    object = Object(object);n    while (++index &lt; length) {n      var
source = <a href="index">sources</a>;n      if (source) {n       
assigner(object, source, index, customizer);n      }n    }n    return
object;n  });n}nnexport default createAssigner;nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-utils/src/lib/lodash/_createAssigner.jsn//
module id = nulln// module chunks = “,”import root from
&#39;./_root&#39;;nn/** Built-in value references. */nvar Reflect =
root.Reflect;nnexport default Reflect;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/_Reflect.jsn// module id =
nulln// module chunks = “,”/**n * Converts `iterator` to an array.n *n *
@privaten * @param {Object} iterator The iterator to convert.n * @returns
{Array} Returns the converted array.n */nfunction iteratorToArray(iterator)
{n  var data,n      result = [];nn  while (!(data = iterator.next()).done)
{n    result.push(data.value);n  }n  return result;n}nnexport default
iteratorToArray;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_iteratorToArray.jsn// module id =
nulln// module chunks = “,”import baseKeysIn from
&#39;./_baseKeysIn&#39;;nimport indexKeys from
&#39;./_indexKeys&#39;;nimport isIndex from &#39;./_isIndex&#39;;nimport
isPrototype from &#39;./_isPrototype&#39;;nn/** Used for built-in method
references. */nvar objectProto = Object.prototype;nn/** Used to check
objects for own properties. */nvar hasOwnProperty =
objectProto.hasOwnProperty;nn/**n * Creates an array of the own and
inherited enumerable property names of `object`.n *n * *Note:* Non-object
values are coerced to objects.n *n * @staticn * @memberOf _n * @since
3.0.0n * @category Objectn * @param {Object} object The object to query.n *
@returns {Array} Returns the array of property names.n * @examplen *n *
function Foo() {n *   this.a = 1;n *   this.b = 2;n * }n *n *
Foo.prototype.c = 3;n *n * _.keysIn(new Foo);n * // =&gt; [&#39;a&#39;,
&#39;b&#39;, &#39;c&#39;] (iteration order is not guaranteed)n */nfunction
keysIn(object) {n  var index = -1,n      isProto = isPrototype(object),n   
props = baseKeysIn(object),n      propsLength = props.length,n      indexes
= indexKeys(object),n      skipIndexes = !!indexes,n      result = indexes
|| [],n      length = result.length;nn  while (++index &lt; propsLength) {n
var key = <a href="index">props</a>;n    if (!(skipIndexes &amp;&amp; (key
== &#39;length&#39; || isIndex(key, length))) &amp;&amp;n        !(key ==
&#39;constructor&#39; &amp;&amp; (isProto || !hasOwnProperty.call(object,
key)))) {n      result.push(key);n    }n  }n  return result;n}nnexport
default keysIn;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/keysIn.jsn// module id = nulln// module
chunks = “,”import assignValue from &#39;./_assignValue&#39;;nimport
copyObject from &#39;./_copyObject&#39;;nimport createAssigner from
&#39;./_createAssigner&#39;;nimport isArrayLike from
&#39;./isArrayLike&#39;;nimport isPrototype from
&#39;./_isPrototype&#39;;nimport keysIn from &#39;./keysIn&#39;;nn/** Used
for built-in method references. */nvar objectProto = Object.prototype;nn/**
Built-in value references. */nvar propertyIsEnumerable =
objectProto.propertyIsEnumerable;nn/** Detect if properties shadowing those
on `Object.prototype` are non-enumerable. */nvar nonEnumShadows =
!propertyIsEnumerable.call({ &#39;valueOf&#39;: 1 },
&#39;valueOf&#39;);nn/**n * This method is like `_.assign` except that it
iterates over own andn * inherited source properties.n *n * *Note:* This
method mutates `object`.n *n * @staticn * @memberOf _n * @since 4.0.0n *
@alias extendn * @category Objectn * @param {Object} object The destination
object.n * @param {…Object} [sources] The source objects.n * @returns
{Object} Returns `object`.n * @see _.assignn * @examplen *n * function
Foo() {n *   this.b = 2;n * }n *n * function Bar() {n *   this.d = 4;n * }n
*n * Foo.prototype.c = 3;n * Bar.prototype.e = 5;n *n * _.assignIn({
&#39;a&#39;: 1 }, new Foo, new Bar);n * // =&gt; { &#39;a&#39;: 1,
&#39;b&#39;: 2, &#39;c&#39;: 3, &#39;d&#39;: 4, &#39;e&#39;: 5 }n */nvar
assignIn = createAssigner(function(object, source) {n  if (nonEnumShadows
|| isPrototype(source) || isArrayLike(source)) {n    copyObject(source,
keysIn(source), object);n    return;n  }n  for (var key in source) {n   
assignValue(object, key, <a href="key">source</a>);n  }n});nnexport default
assignIn;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/assignIn.jsn// module id = nulln// module
chunks = “,”export { default } from
&#39;./assignIn&#39;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/extend.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module engine/view/rooteditableelementn */nnimport EditableElement from
&#39;./editableelement&#39;;nnconst rootNameSymbol = Symbol(
&#39;rootName&#39; );nn/**n * Class representing a single root in the data
view. A root can be either {@link ~RootEditableElement#isReadOnly editable
or read-only},n * but in both cases it is called "an editable&quot;. Roots
can contain other {@link
module:engine/view/editableelement~EditableElementn * editable elements}
making them "nested editables&quot;.n *n * @extends
module:engine/view/editableelement~EditableElementn */nexport default class
RootEditableElement extends EditableElement {nt/**nt * Creates root
editable element.nt *nt * @param {String} name Node name.nt
*/ntconstructor( name ) {nttsuper( name );nntt/**ntt * Name of this root
inside {@link module:engine/view/document~Document} that is an owner of
this root. If nontt * other name is set, `main` name is used.ntt *ntt *
@readonlyntt * @member {String}ntt */nttthis.rootName =
&#39;main&#39;;nt}nnt/**nt * @inheritDocnt */ntis( type, name = null )
{nttif ( !name ) {ntttreturn type == &#39;rootElement&#39; || super.is(
type );ntt} else {ntttreturn ( type == &#39;rootElement&#39; &amp;&amp;
name == this.name ) || super.is( type, name );ntt}nt}nntget rootName()
{nttreturn this.getCustomProperty( rootNameSymbol );nt}nntset rootName(
rootName ) {nttthis._setCustomProperty( rootNameSymbol, rootName
);nt}nnt/**nt * Overrides old element name and sets new one.nt * This is
needed because view roots are created before they are attached to the
DOM.nt * The name of the root element is temporary at this stage. It has to
be changed when thent * view root element is attached to the DOM element.nt
*nt * @protectednt * @param {String} name The new name of element.nt
*/ntset _name( name ) {nttthis.name = name;nt}n}nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-engine/src/view/rooteditableelement.jsn//
module id = nulln// module chunks = “,”/**n * @license Copyright ©
2003-2018, CKSource - Frederico Knabben. All rights reserved.n * For
licensing, see LICENSE.md.n */nn/**n * @module engine/view/treewalkern
*/nnimport Element from &#39;./element&#39;;nimport Text from
&#39;./text&#39;;nimport TextProxy from &#39;./textproxy&#39;;nimport
Position from &#39;./position&#39;;nimport CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nn/**n * Position
iterator class. It allows to iterate forward and backward over the
document.n */nexport default class TreeWalker {nt/**nt * Creates a range
iterator. All parameters are optional, but you have to specify either
`boundaries` or `startPosition`.nt *nt * @constructornt * @param {Object}
options <a href="../../../../Object.html">Object</a> with configuration.nt
* @param {module:engine/view/range~Range} [options.boundaries=null] Range
to define boundaries of the iterator.nt * @param
{module:engine/view/position~Position} [options.startPosition] Starting
position.nt * @param {&#39;forward&#39;|&#39;backward&#39;}
[options.direction=&#39;forward&#39;] Walking direction.nt * @param
{Boolean} [options.singleCharacters=false] Flag indicating whether all
characters fromnt * {@link module:engine/view/text~Text} should be returned
as one {@link module:engine/view/text~Text} (`false`) ore one by one asnt *
{@link module:engine/view/textproxy~TextProxy} (`true`).nt * @param
{Boolean} [options.shallow=false] Flag indicating whether iterator should
enter elements or not. If thent * iterator is shallow child nodes of any
iterated node will not be returned along with `elementEnd` tag.nt * @param
{Boolean} [options.ignoreElementEnd=false] Flag indicating whether iterator
should ignore `elementEnd`nt * tags. If the option is true walker will not
return a parent node of start position. If this option is `true`nt * each
{@link module:engine/view/element~Element} will be returned once, while if
the option is `false` they might be returnednt * twice: for
`&#39;elementStart&#39;` and `&#39;elementEnd&#39;`.nt */ntconstructor(
options = {} ) {nttif ( !options.boundaries &amp;&amp;
!options.startPosition ) {nttt/**nttt * Neither boundaries nor starting
position have been defined.nttt *nttt * @error
view-tree-walker-no-start-positionnttt */ntttthrow new CKEditorError(
&#39;view-tree-walker-no-start-position: Neither boundaries nor starting
position have been defined.&#39; );ntt}nnttif ( options.direction
&amp;&amp; options.direction != &#39;forward&#39; &amp;&amp;
options.direction != &#39;backward&#39; ) {ntttthrow new
CKEditorError(ntttt&#39;view-tree-walker-unknown-direction: Only `backward`
and `forward` direction allowed.&#39;,ntttt{ direction: options.direction
}nttt);ntt}nntt/**ntt * Iterator boundaries.ntt *ntt * When the iterator is
walking `&#39;forward&#39;` on the end of boundary or is walking
`&#39;backward&#39;`ntt * on the start of boundary, then `{ done: true }`
is returned.ntt *ntt * If boundaries are not defined they are set before
first and after last child of the root node.ntt *ntt * @readonlyntt *
@member {module:engine/view/range~Range}
module:engine/view/treewalker~TreeWalker#boundariesntt */nttthis.boundaries
= options.boundaries || null;nntt/**ntt * Iterator position. If start
position is not defined then position depends on {@link direction}. If
direction isntt * `&#39;forward&#39;` position starts form the beginning,
when direction is `&#39;backward&#39;` position starts from the end.ntt
*ntt * @readonlyntt * @member {module:engine/view/position~Position}
module:engine/view/treewalker~TreeWalker#positionntt */nttif (
options.startPosition ) {ntttthis.position = Position.createFromPosition(
options.startPosition );ntt} else {ntttthis.position =
Position.createFromPosition( options.boundaries[ options.direction ==
&#39;backward&#39; ? &#39;end&#39; : &#39;start&#39; ] );ntt}nntt/**ntt *
Walking direction. Defaults `&#39;forward&#39;`.ntt *ntt * @readonlyntt *
@member {&#39;backward&#39;|&#39;forward&#39;}
module:engine/view/treewalker~TreeWalker#directionntt */nttthis.direction =
options.direction || &#39;forward&#39;;nntt/**ntt * Flag indicating whether
all characters from {@link module:engine/view/text~Text} should be returned
as onentt * {@link module:engine/view/text~Text} or one by one as {@link
module:engine/view/textproxy~TextProxy}.ntt *ntt * @readonlyntt * @member
{Boolean} module:engine/view/treewalker~TreeWalker#singleCharactersntt
*/nttthis.singleCharacters = !!options.singleCharacters;nntt/**ntt * Flag
indicating whether iterator should enter elements or not. If the iterator
is shallow child nodes of anyntt * iterated node will not be returned along
with `elementEnd` tag.ntt *ntt * @readonlyntt * @member {Boolean}
module:engine/view/treewalker~TreeWalker#shallowntt */nttthis.shallow =
!!options.shallow;nntt/**ntt * Flag indicating whether iterator should
ignore `elementEnd` tags. If set to `true`, walker will notntt * return a
parent node of the start position. Each {@link
module:engine/view/element~Element} will be returned once.ntt * When set to
`false` each element might be returned twice: for `&#39;elementStart&#39;`
and `&#39;elementEnd&#39;`.ntt *ntt * @readonlyntt * @member {Boolean}
module:engine/view/treewalker~TreeWalker#ignoreElementEndntt
*/nttthis.ignoreElementEnd = !!options.ignoreElementEnd;nntt/**ntt * Start
boundary parent.ntt *ntt * @privatentt * @member
{module:engine/view/node~Node}
module:engine/view/treewalker~TreeWalker#_boundaryStartParentntt
*/nttthis._boundaryStartParent = this.boundaries ?
this.boundaries.start.parent : null;nntt/**ntt * End boundary parent.ntt
*ntt * @privatentt * @member {module:engine/view/node~Node}
module:engine/view/treewalker~TreeWalker#_boundaryEndParentntt
*/nttthis._boundaryEndParent = this.boundaries ? this.boundaries.end.parent
: null;nt}nnt/**nt * Iterable interface.nt *nt * @returns
{Iterable.&lt;module:engine/view/treewalker~TreeWalkerValue&gt;}nt */nt[
Symbol.iterator ]() {nttreturn this;nt}nnt/**nt * Moves {@link position} in
the {@link direction} skipping values as long as the callback function
returns `true`.nt *nt * For example:nt *nt * ttwalker.skip( value =&gt;
value.type == &#39;text&#39; ); // &lt;p&gt;{}foo&lt;/p&gt; -&gt;
&lt;p&gt;foo[]&lt;/p&gt;nt * ttwalker.skip( value =&gt; true ); // Move the
position to the end: &lt;p&gt;{}foo&lt;/p&gt; -&gt;
&lt;p&gt;foo&lt;/p&gt;[]nt * ttwalker.skip( value =&gt; false ); // Do not
move the position.nt *nt * @param {Function} skip Callback function. Gets
{@link module:engine/view/treewalker~TreeWalkerValue} and shouldnt * return
`true` if the value should be skipped or `false` if not.nt */ntskip( skip )
{nttlet done, value, prevPosition;nnttdo {ntttprevPosition =
this.position;nnttt( { done, value } = this.next() );ntt} while ( !done
&amp;&amp; skip( value ) );nnttif ( !done ) {ntttthis.position =
prevPosition;ntt}nt}nnt/**nt * Gets the next tree walker&#39;s value.nt *nt
* @returns {module:engine/view/treewalker~TreeWalkerValue} <a
href="../../../../Object.html">Object</a> implementing iterator interface,
returningnt * information about taken step.nt */ntnext() {nttif (
this.direction == &#39;forward&#39; ) {ntttreturn this._next();ntt} else
{ntttreturn this._previous();ntt}nt}nnt/**nt * Makes a step forward in
view. Moves the {@link position} to the next position and returns the
encountered value.nt *nt * @privatent * @returns {Object}nt * @returns
{Boolean} return.done `true` if iterator is done, `false` otherwise.nt *
@returns {module:engine/view/treewalker~TreeWalkerValue} return.value
Information about taken step.nt */nt_next() {nttlet position =
Position.createFromPosition( this.position );nttconst previousPosition =
this.position;nttconst parent = position.parent;nntt// We are at the end of
the root.nttif ( parent.parent === null &amp;&amp; position.offset ===
parent.childCount ) {ntttreturn { done: true };ntt}nntt// We reached the
walker boundary.nttif ( parent === this._boundaryEndParent &amp;&amp;
position.offset == this.boundaries.end.offset ) {ntttreturn { done: true
};ntt}nntt// Get node just after current position.nttlet node;nntt// Text
is a specific parent because it contains string instead of child
nodes.nttif ( parent instanceof Text ) {ntttif ( position.isAtEnd )
{ntttt// Prevent returning "elementEnd&quot; for Text node. Skip that value
and return the next walker step.nttttthis.position = Position.createAfter(
parent );nnttttreturn this._next();nttt}nntttnode = parent.data[
position.offset ];ntt} else {ntttnode = parent.getChild( position.offset
);ntt}nnttif ( node instanceof Element ) {ntttif ( !this.shallow )
{nttttposition = new Position( node, 0 );nttt} else
{nttttposition.offset++;nttt}nntttthis.position = position;nntttreturn
this._formatReturnValue( &#39;elementStart&#39;, node, previousPosition,
position, 1 );ntt} else if ( node instanceof Text ) {ntttif (
this.singleCharacters ) {nttttposition = new Position( node, 0
);nttttthis.position = position;nnttttreturn this._next();nttt} else
{nttttlet charactersCount = node.data.length;nttttlet item;nntttt// If text
stick out of walker range, we need to cut it and wrap by TextProxy.nttttif
( node == this._boundaryEndParent ) {ntttttcharactersCount =
this.boundaries.end.offset;ntttttitem = new TextProxy( node, 0,
charactersCount );ntttttposition = Position.createAfter( item );ntttt} else
{ntttttitem = new TextProxy( node, 0, node.data.length );nttttt// If not
just keep moving forward.ntttttposition.offset++;ntttt}nnttttthis.position
= position;nnttttreturn this._formatReturnValue( &#39;text&#39;, item,
previousPosition, position, charactersCount );nttt}ntt} else if ( typeof
node == &#39;string&#39; ) {ntttlet textLength;nntttif (
this.singleCharacters ) {ntttttextLength = 1;nttt} else {ntttt// Check if
text stick out of walker range.nttttconst endOffset = parent ===
this._boundaryEndParent ? this.boundaries.end.offset :
parent.data.length;nntttttextLength = endOffset -
position.offset;nttt}nntttconst textProxy = new TextProxy( parent,
position.offset, textLength );nntttposition.offset +=
textLength;ntttthis.position = position;nntttreturn
this._formatReturnValue( &#39;text&#39;, textProxy, previousPosition,
position, textLength );ntt} else {nttt// `node` is not set, we reached the
end of current `parent`.ntttposition = Position.createAfter( parent
);ntttthis.position = position;nntttif ( this.ignoreElementEnd )
{nttttreturn this._next();nttt} else {nttttreturn this._formatReturnValue(
&#39;elementEnd&#39;, parent, previousPosition, position
);nttt}ntt}nt}nnt/**nt * Makes a step backward in view. Moves the {@link
position} to the previous position and returns the encountered value.nt *nt
* @privatent * @returns {Object}nt * @returns {Boolean} return.done True if
iterator is done.nt * @returns
{module:engine/view/treewalker~TreeWalkerValue} return.value Information
about taken step.nt */nt_previous() {nttlet position =
Position.createFromPosition( this.position );nttconst previousPosition =
this.position;nttconst parent = position.parent;nntt// We are at the
beginning of the root.nttif ( parent.parent === null &amp;&amp;
position.offset === 0 ) {ntttreturn { done: true };ntt}nntt// We reached
the walker boundary.nttif ( parent == this._boundaryStartParent &amp;&amp;
position.offset == this.boundaries.start.offset ) {ntttreturn { done: true
};ntt}nntt// Get node just before current position.nttlet node;nntt// Text
{@link module:engine/view/text~Text} element is a specific parent because
contains string instead of child nodes.nttif ( parent instanceof Text )
{ntttif ( position.isAtStart ) {ntttt// Prevent returning
"elementStart&quot; for Text node. Skip that value and return the next
walker step.nttttthis.position = Position.createBefore( parent
);nnttttreturn this._previous();nttt}nntttnode = parent.data[
position.offset - 1 ];ntt} else {ntttnode = parent.getChild(
position.offset - 1 );ntt}nnttif ( node instanceof Element ) {ntttif (
!this.shallow ) {nttttposition = new Position( node, node.childCount
);nttttthis.position = position;nnttttif ( this.ignoreElementEnd )
{ntttttreturn this._previous();ntttt} else {ntttttreturn
this._formatReturnValue( &#39;elementEnd&#39;, node, previousPosition,
position );ntttt}nttt} else {nttttposition.offset–;nttttthis.position =
position;nnttttreturn this._formatReturnValue( &#39;elementStart&#39;,
node, previousPosition, position, 1 );nttt}ntt} else if ( node instanceof
Text ) {ntttif ( this.singleCharacters ) {nttttposition = new Position(
node, node.data.length );nttttthis.position = position;nnttttreturn
this._previous();nttt} else {nttttlet charactersCount =
node.data.length;nttttlet item;nntttt// If text stick out of walker range,
we need to cut it and wrap by TextProxy.nttttif ( node ==
this._boundaryStartParent ) {ntttttconst offset =
this.boundaries.start.offset;nntttttitem = new TextProxy( node, offset,
node.data.length - offset );ntttttcharactersCount =
item.data.length;ntttttposition = Position.createBefore( item );ntttt} else
{ntttttitem = new TextProxy( node, 0, node.data.length );nttttt// If not
just keep moving backward.ntttttposition.offset–;ntttt}nnttttthis.position
= position;nnttttreturn this._formatReturnValue( &#39;text&#39;, item,
previousPosition, position, charactersCount );nttt}ntt} else if ( typeof
node == &#39;string&#39; ) {ntttlet textLength;nntttif (
!this.singleCharacters ) {ntttt// Check if text stick out of walker
range.nttttconst startOffset = parent === this._boundaryStartParent ?
this.boundaries.start.offset : 0;nntttttextLength = position.offset -
startOffset;nttt} else {ntttttextLength = 1;nttt}nntttposition.offset -=
textLength;nntttconst textProxy = new TextProxy( parent, position.offset,
textLength );nntttthis.position = position;nntttreturn
this._formatReturnValue( &#39;text&#39;, textProxy, previousPosition,
position, textLength );ntt} else {nttt// `node` is not set, we reached the
beginning of current `parent`.ntttposition = Position.createBefore( parent
);ntttthis.position = position;nntttreturn this._formatReturnValue(
&#39;elementStart&#39;, parent, previousPosition, position, 1
);ntt}nt}nnt/**nt * Format returned data and adjust `previousPosition` and
`nextPosition` if reach the bound of the {@link
module:engine/view/text~Text}.nt *nt * @privatent * @param
{module:engine/view/treewalker~TreeWalkerValueType} type Type of step.nt *
@param {module:engine/view/item~Item} item Item between old and new
position.nt * @param {module:engine/view/position~Position}
previousPosition Previous position of iterator.nt * @param
{module:engine/view/position~Position} nextPosition Next position of
iterator.nt * @param {Number} [length] Length of the item.nt * @returns
{module:engine/view/treewalker~TreeWalkerValue}nt */nt_formatReturnValue(
type, item, previousPosition, nextPosition, length ) {ntt// Text is a
specific parent, because contains string instead of children.ntt// Walker
doesn&#39;t enter to the Text except situations when walker is iterating
over every single character,ntt// or the bound starts/ends inside the Text.
So when the position is at the beginning or at the end of the Textntt// we
move it just before or just after Text.nttif ( item instanceof TextProxy )
{nttt// Position is at the end of Text.ntttif ( item.offsetInText +
item.data.length == item.textNode.data.length ) {nttttif ( this.direction
== &#39;forward&#39; &amp;&amp; !( this.boundaries &amp;&amp;
this.boundaries.end.isEqual( this.position ) ) ) {ntttttnextPosition =
Position.createAfter( item.textNode );nttttt// When we change nextPosition
of returned value we need also update walker current
position.ntttttthis.position = nextPosition;ntttt} else
{ntttttpreviousPosition = Position.createAfter( item.textNode
);ntttt}nttt}nnttt// Position is at the begining ot the text.ntttif (
item.offsetInText === 0 ) {nttttif ( this.direction == &#39;backward&#39;
&amp;&amp; !( this.boundaries &amp;&amp; this.boundaries.start.isEqual(
this.position ) ) ) {ntttttnextPosition = Position.createBefore(
item.textNode );nttttt// When we change nextPosition of returned value we
need also update walker current position.ntttttthis.position =
nextPosition;ntttt} else {ntttttpreviousPosition = Position.createBefore(
item.textNode );ntttt}nttt}ntt}nnttreturn {ntttdone: false,ntttvalue:
{ntttttype,nttttitem,nttttpreviousPosition,nttttnextPosition,nttttlengthnttt}ntt};nt}n}nn/**n
* Type of the step made by {@link
module:engine/view/treewalker~TreeWalker}.n * Possible values:
`&#39;elementStart&#39;` if walker is at the beginning of a node,
`&#39;elementEnd&#39;` if walker is at the endn * of node, or
`&#39;text&#39;` if walker traversed over single and multiple characters.n
* For {@link module:engine/view/text~Text} `elementStart` and `elementEnd`
is not returned.n *n * @typedef {String}
module:engine/view/treewalker~TreeWalkerValueTypen */nn/**n * <a
href="../../../../Object.html">Object</a> returned by {@link
module:engine/view/treewalker~TreeWalker} when traversing tree view.n *n *
@typedef {Object} module:engine/view/treewalker~TreeWalkerValuen *
@property {module:engine/view/treewalker~TreeWalkerValueType} typen *
@property {module:engine/view/item~Item} item Item between old and new
positions of {@link module:engine/view/treewalker~TreeWalker}.n * @property
{module:engine/view/position~Position} previousPosition Previous position
of the iterator.n * * Forward iteration: For `&#39;elementEnd&#39;` it is
the last position inside the element. For all other types it is then *
position before the item. Note that it is more efficient to use this
position then calculate the position beforen * the node using {@link
module:engine/view/position~Position.createBefore}.n * * Backward
iteration: For `&#39;elementStart&#39;` it is the first position inside the
element. For all other types it isn * the position after item.n * * If the
position is at the beginning or at the end of the {@link
module:engine/view/text~Text} it is always moved from then * inside of the
Text to its parent just before or just after Text.n * @property
{module:engine/view/position~Position} nextPosition Next position of the
iterator.n * * Forward iteration: For `&#39;elementStart&#39;` it is the
first position inside the element. For all other types it isn * the
position after the item.n * * Backward iteration: For
`&#39;elementEnd&#39;` it is last position inside element. For all other
types it is the positionn * before the item.n * * If the position is at the
beginning or at the end of the {@link module:engine/view/text~Text} it is
always moved from then * inside of the Text to its parent just before or
just after Text.n * @property {Number} [length] Length of the item. For
`&#39;elementStart&#39;` it is 1. For `&#39;text&#39;` it isn * the length
of the text. For `&#39;elementEnd&#39;` it is undefined.n */nn/**n * Tree
walking directions.n *n * @typedef {&#39;forward&#39;|&#39;backward&#39;}
module:engine/view/treewalker~TreeWalkerDirectionn
*/nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/view/treewalker.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module engine/view/positionn */nnimport TreeWalker from
&#39;./treewalker&#39;;nnimport compareArrays from
&#39;@ckeditor/ckeditor5-utils/src/comparearrays&#39;;nimport CKEditorError
from &#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nimport
EditableElement from &#39;./editableelement&#39;;nn/**n * Position in the
tree. Position is always located before or after a node.n */nexport default
class Position {nt/**nt * Creates a position.nt *nt * @param
{module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment}
parent Position parent.nt * @param {Number} offset Position offset.nt
*/ntconstructor( parent, offset ) {ntt/**ntt * Position parent.ntt *ntt *
@readonlyntt * @member
{module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment}ntt
* module:engine/view/position~Position#parentntt */nttthis.parent =
parent;nntt/**ntt * Position offset.ntt *ntt * @readonlyntt * @member
{Number} module:engine/view/position~Position#offsetntt */nttthis.offset =
offset;nt}nnt/**nt * Node directly after the position. Equals `null` when
there is no node after position or position is locatednt * inside text
node.nt *nt * @readonlynt * @type {module:engine/view/node~Node|null}nt
*/ntget nodeAfter() {nttif ( this.parent.is( &#39;text&#39; ) ) {ntttreturn
null;ntt}nnttreturn this.parent.getChild( this.offset ) || null;nt}nnt/**nt
* Node directly before the position. Equals `null` when there is no node
before position or position is locatednt * inside text node.nt *nt *
@readonlynt * @type {module:engine/view/node~Node|null}nt */ntget
nodeBefore() {nttif ( this.parent.is( &#39;text&#39; ) ) {ntttreturn
null;ntt}nnttreturn this.parent.getChild( this.offset - 1 ) ||
null;nt}nnt/**nt * Is `true` if position is at the beginning of its {@link
module:engine/view/position~Position#parent parent}, `false` otherwise.nt
*nt * @readonlynt * @type {Boolean}nt */ntget isAtStart() {nttreturn
this.offset === 0;nt}nnt/**nt * Is `true` if position is at the end of its
{@link module:engine/view/position~Position#parent parent}, `false`
otherwise.nt *nt * @readonlynt * @type {Boolean}nt */ntget isAtEnd()
{nttconst endOffset = this.parent.is( &#39;text&#39; ) ?
this.parent.data.length : this.parent.childCount;nnttreturn this.offset ===
endOffset;nt}nnt/**nt * Position&#39;s root, that is the root of the
position&#39;s parent element.nt *nt * @readonlynt * @type
{module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment}nt
*/ntget root() {nttreturn this.parent.root;nt}nnt/**nt * {@link
module:engine/view/editableelement~EditableElement EditableElement}
instance that contains this position, or `null` ifnt * position is not
inside an editable element.nt *nt * @type
{module:engine/view/editableelement~EditableElement|null}nt */ntget
editableElement() {nttlet editable = this.parent;nnttwhile ( !( editable
instanceof EditableElement ) ) {ntttif ( editable.parent ) {ntttteditable =
editable.parent;nttt} else {nttttreturn null;nttt}ntt}nnttreturn
editable;nt}nnt/**nt * Returns a new instance of Position with offset
incremented by `shift` value.nt *nt * @param {Number} shift How position
offset should get changed. Accepts negative values.nt * @returns
{module:engine/view/position~Position} Shifted position.nt
*/ntgetShiftedBy( shift ) {nttconst shifted = Position.createFromPosition(
this );nnttconst offset = shifted.offset + shift;nttshifted.offset = offset
&lt; 0 ? 0 : offset;nnttreturn shifted;nt}nnt/**nt * Gets the farthest
position which matches the callback usingnt * {@link
module:engine/view/treewalker~TreeWalker TreeWalker}.nt *nt * For
example:nt *nt * ttgetLastMatchingPosition( value =&gt; value.type ==
&#39;text&#39; ); // &lt;p&gt;{}foo&lt;/p&gt; -&gt;
&lt;p&gt;foo[]&lt;/p&gt;nt * ttgetLastMatchingPosition( value =&gt;
value.type == &#39;text&#39;, { direction: &#39;backward&#39; } ); //
&lt;p&gt;foo[]&lt;/p&gt; -&gt; &lt;p&gt;{}foo&lt;/p&gt;nt *
ttgetLastMatchingPosition( value =&gt; false ); // Do not move the
position.nt *nt * @param {Function} skip Callback function. Gets {@link
module:engine/view/treewalker~TreeWalkerValue} and shouldnt * return `true`
if the value should be skipped or `false` if not.nt * @param {Object}
options <a href="../../../../Object.html">Object</a> with configuration
options. See {@link module:engine/view/treewalker~TreeWalker}.nt *nt *
@returns {module:engine/view/position~Position} The position after the last
item which matches the `skip` callback test.nt */ntgetLastMatchingPosition(
skip, options = {} ) {nttoptions.startPosition = this;nnttconst treeWalker
= new TreeWalker( options );ntttreeWalker.skip( skip );nnttreturn
treeWalker.position;nt}nnt/**nt * Returns ancestors array of this position,
that is this position&#39;s parent and it&#39;s ancestors.nt *nt * @returns
{Array} Array with ancestors.nt */ntgetAncestors() {nttif ( this.parent.is(
&#39;documentFragment&#39; ) ) {ntttreturn [ this.parent ];ntt} else
{ntttreturn this.parent.getAncestors( { includeSelf: true }
);ntt}nt}nnt/**nt * Returns a {@link module:engine/view/node~Node} or
{@link module:engine/view/documentfragment~DocumentFragment}nt * which is a
common ancestor of both positions.nt *nt * @param
{module:engine/view/position~Position} positionnt * @returns
{module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment|null}nt
*/ntgetCommonAncestor( position ) {nttconst ancestorsA =
this.getAncestors();nttconst ancestorsB = position.getAncestors();nnttlet i
= 0;nnttwhile ( ancestorsA[ i ] == ancestorsB[ i ] &amp;&amp; ancestorsA[ i
] ) {nttti++;ntt}nnttreturn i === 0 ? null : ancestorsA[ i - 1
];nt}nnt/**nt * Checks whether this position equals given position.nt *nt *
@param {module:engine/view/position~Position} otherPosition Position to
compare with.nt * @returns {Boolean} True if positions are same.nt
*/ntisEqual( otherPosition ) {nttreturn ( this.parent ==
otherPosition.parent &amp;&amp; this.offset == otherPosition.offset
);nt}nnt/**nt * Checks whether this position is located before given
position. When method returns `false` it does not mean thatnt * this
position is after give one. Two positions may be located inside separate
roots and in that situation thisnt * method will still return `false`.nt
*nt * @see module:engine/view/position~Position#isAfternt * @see
module:engine/view/position~Position#compareWithnt * @param
{module:engine/view/position~Position} otherPosition Position to compare
with.nt * @returns {Boolean} Returns `true` if this position is before
given position.nt */ntisBefore( otherPosition ) {nttreturn
this.compareWith( otherPosition ) == &#39;before&#39;;nt}nnt/**nt * Checks
whether this position is located after given position. When method returns
`false` it does not mean thatnt * this position is before give one. Two
positions may be located inside separate roots and in that situation thisnt
* method will still return `false`.nt *nt * @see
module:engine/view/position~Position#isBeforent * @see
module:engine/view/position~Position#compareWithnt * @param
{module:engine/view/position~Position} otherPosition Position to compare
with.nt * @returns {Boolean} Returns `true` if this position is after given
position.nt */ntisAfter( otherPosition ) {nttreturn this.compareWith(
otherPosition ) == &#39;after&#39;;nt}nnt/**nt * Checks whether this
position is before, after or in same position that other position. Two
positions may be alsont * different when they are located in separate
roots.nt *nt * @param {module:engine/view/position~Position} otherPosition
Position to compare with.nt * @returns
{module:engine/view/position~PositionRelation}nt */ntcompareWith(
otherPosition ) {nttif ( this.root !== otherPosition.root ) {ntttreturn
&#39;different&#39;;ntt}nnttif ( this.isEqual( otherPosition ) )
{ntttreturn &#39;same&#39;;ntt}nntt// Get path from root to position&#39;s
parent element.nttconst thisPath = this.parent.is( &#39;node&#39; ) ?
this.parent.getPath() : [];nttconst otherPath = otherPosition.parent.is(
&#39;node&#39; ) ? otherPosition.parent.getPath() : [];nntt// Add the
positions&#39; offsets to the parents offsets.nttthisPath.push( this.offset
);nttotherPath.push( otherPosition.offset );nntt// Compare both path arrays
to find common ancestor.nttconst result = compareArrays( thisPath,
otherPath );nnttswitch ( result ) {ntttcase &#39;prefix&#39;:nttttreturn
&#39;before&#39;;nntttcase &#39;extension&#39;:nttttreturn
&#39;after&#39;;nntttdefault:nttttreturn thisPath[ result ] &lt; otherPath[
result ] ? &#39;before&#39; : &#39;after&#39;;ntt}nt}nnt/**nt * Creates
position at the given location. The location can be specified as:nt *nt * *
a {@link module:engine/view/position~Position position},nt * * parent
element and offset (offset defaults to `0`),nt * * parent element and
`&#39;end&#39;` (sets position at the end of that element),nt * * {@link
module:engine/view/item~Item view item} and `&#39;before&#39;` or
`&#39;after&#39;` (sets position before or after given view item).nt *nt *
This method is a shortcut to other constructors such as:nt *nt * * {@link
module:engine/view/position~Position.createBefore},nt * * {@link
module:engine/view/position~Position.createAfter},nt * * {@link
module:engine/view/position~Position.createFromPosition}.nt *nt * @param
{module:engine/view/item~Item|module:engine/model/position~Position}
itemOrPositionnt * @param
{Number|&#39;end&#39;|&#39;before&#39;|&#39;after&#39;} [offset=0] Offset
or one of the flags. Used only whennt * first parameter is a {@link
module:engine/view/item~Item view item}.nt */ntstatic createAt(
itemOrPosition, offset ) {nttif ( itemOrPosition instanceof Position )
{ntttreturn this.createFromPosition( itemOrPosition );ntt} else {ntttconst
node = itemOrPosition;nntttif ( offset == &#39;end&#39; ) {nttttoffset =
node.is( &#39;text&#39; ) ? node.data.length : node.childCount;nttt} else
if ( offset == &#39;before&#39; ) {nttttreturn this.createBefore( node
);nttt} else if ( offset == &#39;after&#39; ) {nttttreturn
this.createAfter( node );nttt} else if ( !offset ) {nttttoffset =
0;nttt}nntttreturn new Position( node, offset );ntt}nt}nnt/**nt * Creates a
new position after given view item.nt *nt * @param
{module:engine/view/item~Item} item View item after which the position
should be located.nt * @returns {module:engine/view/position~Position}nt
*/ntstatic createAfter( item ) {ntt// TextProxy is not a instance of Node
so we need do handle it in specific way.nttif ( item.is(
&#39;textProxy&#39; ) ) {ntttreturn new Position( item.textNode,
item.offsetInText + item.data.length );ntt}nnttif ( !item.parent )
{nttt/**nttt * You can not make a position after a root.nttt *nttt * @error
view-position-after-rootnttt * @param {module:engine/view/node~Node}
rootnttt */ntttthrow new CKEditorError( &#39;view-position-after-root: You
can not make position after root.&#39;, { root: item } );ntt}nnttreturn new
Position( item.parent, item.index + 1 );nt}nnt/**nt * Creates a new
position before given view item.nt *nt * @param
{module:engine/view/item~Item} item View item before which the position
should be located.nt * @returns {module:engine/view/position~Position}nt
*/ntstatic createBefore( item ) {ntt// TextProxy is not a instance of Node
so we need do handle it in specific way.nttif ( item.is(
&#39;textProxy&#39; ) ) {ntttreturn new Position( item.textNode,
item.offsetInText );ntt}nnttif ( !item.parent ) {nttt/**nttt * You cannot
make a position before a root.nttt *nttt * @error
view-position-before-rootnttt * @param {module:engine/view/node~Node}
rootnttt */ntttthrow new CKEditorError( &#39;view-position-before-root: You
can not make position before root.&#39;, { root: item } );ntt}nnttreturn
new Position( item.parent, item.index );nt}nnt/**nt * Creates and returns a
new instance of `Position`, which is equal to the passed position.nt *nt *
@param {module:engine/view/position~Position} position Position to be
cloned.nt * @returns {module:engine/view/position~Position}nt */ntstatic
createFromPosition( position ) {nttreturn new this( position.parent,
position.offset );nt}n}nn/**n * A flag indicating whether this position is
`&#39;before&#39;` or `&#39;after&#39;` or `&#39;same&#39;` as given
position.n * If positions are in different roots `&#39;different&#39;` flag
is returned.n *n * @typedef {String}
module:engine/view/position~PositionRelationn */nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-engine/src/view/position.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module engine/view/documentselectionn */nnimport
Selection from &#39;./selection&#39;;nimport mix from
&#39;@ckeditor/ckeditor5-utils/src/mix&#39;;nimport EmitterMixin from
&#39;@ckeditor/ckeditor5-utils/src/emittermixin&#39;;nn/**n * Class
representing document selection in tree view. It&#39;s instance is stored
atn * {@link module:engine/view/document~Document#selection}. It is similar
to {@link module:engine/view/selection~Selection} butn * it has read-only
API and can be modified only by writer obtained from {@link
module:engine/view/view~View#change} method.n *n * Selection can consist of
{@link module:engine/view/range~Range ranges}.n * Selection&#39;s ranges
can be obtained via {@link
module:engine/view/documentselection~DocumentSelection#getRanges
getRanges},n * {@link
module:engine/view/documentselection~DocumentSelection#getFirstRange
getFirstRange}n * and {@link
module:engine/view/documentselection~DocumentSelection#getLastRange
getLastRange}n * methods, which return copies of ranges stored inside
selection. Modifications made on these copies will not changen *
selection&#39;s state. Similar situation occurs when getting {@link
module:engine/view/documentselection~DocumentSelection#anchor anchor},n *
{@link module:engine/view/documentselection~DocumentSelection#focus
focus},n * {@link
module:engine/view/documentselection~DocumentSelection#getFirstPosition
first} andn * {@link
module:engine/view/documentselection~DocumentSelection#getLastPosition
last} positions - all will returnn * copies of requested positions.n
*/nexport default class DocumentSelection {nt/**nt * Creates new
DocumentSelection instance.nt *nt * tt// Creates empty selection without
ranges.nt *ttconst selection = new DocumentSelection();nt *nt *tt// Creates
selection at the given range.nt *ttconst range = new Range( start, end );nt
*ttconst selection = new DocumentSelection( range );nt *nt *tt// Creates
selection at the given rangesnt * ttconst ranges = [ new Range( start1,
end2 ), new Range( star2, end2 ) ];nt *ttconst selection = new
DocumentSelection( ranges );nt *nt *tt// Creates selection from the other
selection.nt *ttconst otherSelection = new Selection();nt *ttconst
selection = new DocumentSelection( otherSelection );nt *nt * tt// Creates
selection at the given position.nt *ttconst position = new Position( root,
path );nt *ttconst selection = new DocumentSelection( position );nt *nt
*tt// Creates collapsed selection at the position of given item and
offset.nt *ttconst paragraph = writer.createContainerElement(
&#39;paragraph&#39; );nt *ttconst selection = new DocumentSelection(
paragraph, offset );nt *nt *tt// Creates a range inside an {@link
module:engine/view/element~Element element} which starts before thent *tt//
first child of that element and ends after the last child of that
element.nt *ttconst selection = new DocumentSelection( paragraph,
&#39;in&#39; );nt *nt *tt// Creates a range on an {@link
module:engine/view/item~Item item} which starts before the item and endsnt
*tt// just after the item.nt *ttconst selection = new DocumentSelection(
paragraph, &#39;on&#39; );nt *nt * `Selection`&#39;s constructor allow
passing additional options (`backward`, `fake` and `label`) as the last
argument.nt *nt *tt// Creates backward selection.nt *ttconst selection =
new DocumentSelection( range, { backward: true } );nt *nt * Fake selection
does not render as browser native selection over selected elements and is
hidden to the user.nt * This way, no native selection UI artifacts are
displayed to the user and selection over elements can bent * represented in
other way, for example by applying proper CSS class.nt *nt * Additionally
fake&#39;s selection label can be provided. It will be used to describe
fake selection in DOMnt * (and be  properly handled by screen readers).nt
*nt *tt// Creates fake selection with label.nt *ttconst selection = new
DocumentSelection( range, { fake: true, label: &#39;foo&#39; } );nt *nt *
@param
{module:engine/view/selection~Selection|module:engine/view/position~Position|nt
*
Iterable.&lt;module:engine/view/range~Range&gt;|module:engine/view/range~Range|nt
* module:engine/view/item~Item|null} [selectable=null]nt * @param
{Number|&#39;before&#39;|&#39;end&#39;|&#39;after&#39;|&#39;on&#39;|&#39;in&#39;}
[placeOrOffset] Offset or place when selectable is an `Item`.nt * @param
{Object} [options]nt * @param {Boolean} [options.backward] Sets this
selection instance to be backward.nt * @param {Boolean} [options.fake] Sets
this selection instance to be marked as `fake`.nt * @param {String}
[options.label] Label for the fake selection.nt */ntconstructor( selectable
= null, placeOrOffset, options ) {ntt/**ntt * Selection is used internally
(`DocumentSelection` is a proxy to that selection).ntt *ntt * @privatentt *
@member {module:engine/view/selection~Selection}ntt */nttthis._selection =
new Selection();nntt// Delegate change event to be fired on
DocumentSelection instance.nttthis._selection.delegate( &#39;change&#39;
).to( this );nntt// Set selection data.nttthis._selection.setTo(
selectable, placeOrOffset, options );nt}nnt/**nt * Returns true if
selection instance is marked as `fake`.nt *nt * @see #_setTont * @returns
{Boolean}nt */ntget isFake() {nttreturn this._selection.isFake;nt}nnt/**nt
* Returns fake selection label.nt *nt * @see #_setTont * @returns
{String}nt */ntget fakeSelectionLabel() {nttreturn
this._selection.fakeSelectionLabel;nt}nnt/**nt * Selection anchor. Anchor
may be described as a position where the selection starts. Together withnt
* {@link focus focus} they define the direction of selection, which is
importantnt * when expanding/shrinking selection. Anchor is always the
start or end of the most recent added range.nt * It may be a bit
unintuitive when there are multiple ranges in selection.nt *nt * @see
focusnt * @type {module:engine/view/position~Position}nt */ntget anchor()
{nttreturn this._selection.anchor;nt}nnt/**nt * Selection focus. Focus is a
position where the selection ends.nt *nt * @see anchornt * @type
{module:engine/view/position~Position}nt */ntget focus() {nttreturn
this._selection.focus;nt}nnt/**nt * Returns whether the selection is
collapsed. Selection is collapsed when there is exactly one range which
isnt * collapsed.nt *nt * @type {Boolean}nt */ntget isCollapsed()
{nttreturn this._selection.isCollapsed;nt}nnt/**nt * Returns number of
ranges in selection.nt *nt * @type {Number}nt */ntget rangeCount()
{nttreturn this._selection.rangeCount;nt}nnt/**nt * Specifies whether the
{@link focus} precedes {@link anchor}.nt *nt * @type {Boolean}nt */ntget
isBackward() {nttreturn this._selection.isBackward;nt}nnt/**nt * {@link
module:engine/view/editableelement~EditableElement EditableElement}
instance that contains this selection, or `null`nt * if the selection is
not inside an editable element.nt *nt * @type
{module:engine/view/editableelement~EditableElement|null}nt */ntget
editableElement() {nttreturn this._selection.editableElement;nt}nnt/**nt *
Used for the compatibility with the {@link
module:engine/view/selection~Selection#isEqual} method.nt *nt *
@protectednt */ntget _ranges() {nttreturn
this._selection._ranges;nt}nnt/**nt * Returns an iterable that contains
copies of all ranges added to the selection.nt *nt * @returns
{Iterable.&lt;module:engine/view/range~Range&gt;}nt */nt* getRanges()
{nttyield* this._selection.getRanges();nt}nnt/**nt * Returns copy of the
first range in the selection. First range is the one whichnt * {@link
module:engine/view/range~Range#start start} position {@link
module:engine/view/position~Position#isBefore is before} startnt * position
of all other ranges (not to confuse with the first range added to the
selection).nt * Returns `null` if no ranges are added to selection.nt *nt *
@returns {module:engine/view/range~Range|null}nt */ntgetFirstRange()
{nttreturn this._selection.getFirstRange();nt}nnt/**nt * Returns copy of
the last range in the selection. Last range is the one which {@link
module:engine/view/range~Range#end end}nt * position {@link
module:engine/view/position~Position#isAfter is after} end position of all
other ranges (not to confusent * with the last range added to the
selection). Returns `null` if no ranges are added to selection.nt *nt *
@returns {module:engine/view/range~Range|null}nt */ntgetLastRange()
{nttreturn this._selection.getLastRange();nt}nnt/**nt * Returns copy of the
first position in the selection. First position is the position thatnt *
{@link module:engine/view/position~Position#isBefore is before} any other
position in the selection ranges.nt * Returns `null` if no ranges are added
to selection.nt *nt * @returns
{module:engine/view/position~Position|null}nt */ntgetFirstPosition()
{nttreturn this._selection.getFirstPosition();nt}nnt/**nt * Returns copy of
the last position in the selection. Last position is the position thatnt *
{@link module:engine/view/position~Position#isAfter is after} any other
position in the selection ranges.nt * Returns `null` if no ranges are added
to selection.nt *nt * @returns
{module:engine/view/position~Position|null}nt */ntgetLastPosition()
{nttreturn this._selection.getLastPosition();nt}nnt/**nt * Returns the
selected element. {@link module:engine/view/element~Element Element} is
considered as selected if there is onlynt * one range in the selection, and
that range contains exactly one element.nt * Returns `null` if there is no
selected element.nt *nt * @returns
{module:engine/view/element~Element|null}nt */ntgetSelectedElement()
{nttreturn this._selection.getSelectedElement();nt}nnt/**nt * Checks
whether, this selection is equal to given selection. Selections are equal
if they have same directions,nt * same number of ranges and all ranges from
one selection equal to a range from other selection.nt *nt * @param
{module:engine/view/selection~Selection|module:engine/view/documentselection~DocumentSelection}
otherSelectionnt * Selection to compare with.nt * @returns {Boolean} `true`
if selections are equal, `false` otherwise.nt */ntisEqual( otherSelection )
{nttreturn this._selection.isEqual( otherSelection );nt}nnt/**nt * Checks
whether this selection is similar to given selection. Selections are
similar if they have same directions, sament * number of ranges, and all
{@link module:engine/view/range~Range#getTrimmed trimmed} ranges from one
selection arent * equal to any trimmed range from other selection.nt *nt *
@param
{module:engine/view/selection~Selection|module:engine/view/documentselection~DocumentSelection}
otherSelectionnt * Selection to compare with.nt * @returns {Boolean} `true`
if selections are similar, `false` otherwise.nt */ntisSimilar(
otherSelection ) {nttreturn this._selection.isSimilar( otherSelection
);nt}nnt/**nt * Sets this selection&#39;s ranges and direction to the
specified location based on the givennt * {@link
module:engine/view/documentselection~DocumentSelection document
selection},nt * {@link module:engine/view/selection~Selection selection},
{@link module:engine/view/position~Position position},nt * {@link
module:engine/view/item~Item item}, {@link module:engine/view/range~Range
range},nt * an iterable of {@link module:engine/view/range~Range ranges} or
null.nt *nt *tt// Sets selection to the given range.nt *ttconst range = new
Range( start, end );nt *ttdocumentSelection._setTo( range );nt *nt *tt//
Sets selection to given ranges.nt * ttconst ranges = [ new Range( start1,
end2 ), new Range( star2, end2 ) ];nt *ttdocumentSelection._setTo( range
);nt *nt *tt// Sets selection to the other selection.nt *ttconst
otherSelection = new Selection();nt *ttdocumentSelection._setTo(
otherSelection );nt *nt * tt// Sets collapsed selection at the given
position.nt *ttconst position = new Position( root, path );nt
*ttdocumentSelection._setTo( position );nt *nt * tt// Sets collapsed
selection at the position of given item and offset.nt
*ttdocumentSelection._setTo( paragraph, offset );nt *nt * Creates a range
inside an {@link module:engine/view/element~Element element} which starts
before the first child ofnt * that element and ends after the last child of
that element.nt *nt *ttdocumentSelection._setTo( paragraph, &#39;in&#39;
);nt *nt * Creates a range on an {@link module:engine/view/item~Item item}
which starts before the item and ends just after the item.nt *nt
*ttdocumentSelection._setTo( paragraph, &#39;on&#39; );nt *nt * tt// Clears
selection. Removes all ranges.nt *ttdocumentSelection._setTo( null );nt *nt
* `Selection#_setTo()` method allow passing additional options (`backward`,
`fake` and `label`) as the last argument.nt *nt *tt// Sets selection as
backward.nt *ttdocumentSelection._setTo( range, { backward: true } );nt *nt
* Fake selection does not render as browser native selection over selected
elements and is hidden to the user.nt * This way, no native selection UI
artifacts are displayed to the user and selection over elements can bent *
represented in other way, for example by applying proper CSS class.nt *nt *
Additionally fake&#39;s selection label can be provided. It will be used to
des cribe fake selection in DOMnt * (and be  properly handled by screen
readers).nt *nt *tt// Creates fake selection with label.nt
*ttdocumentSelection._setTo( range, { fake: true, label: &#39;foo&#39; }
);nt *nt * @protectednt * @fires changent * @param
{module:engine/view/selection~Selection|module:engine/view/position~Position|nt
*
Iterable.&lt;module:engine/view/range~Range&gt;|module:engine/view/range~Range|module:engine/view/item~Item|null}
selectablent * @param
{Number|&#39;before&#39;|&#39;end&#39;|&#39;after&#39;|&#39;on&#39;|&#39;in&#39;}
[placeOrOffset] Sets place or offset of the selection.nt * @param {Object}
[options]nt * @param {Boolean} [options.backward] Sets this selection
instance to be backward.nt * @param {Boolean} [options.fake] Sets this
selection instance to be marked as `fake`.nt * @param {String}
[options.label] Label for the fake selection.nt */nt_setTo( selectable,
placeOrOffset, options ) {nttthis._selection.setTo( selectable,
placeOrOffset, options );nt}nnt/**nt * Moves {@link focus} to the specified
location.nt *nt * The location can be specified in the same form as {@link
module:engine/view/position~Position.createAt} parameters.nt *nt *
@protectednt * @fires changent * @param
{module:engine/view/item~Item|module:engine/view/position~Position}
itemOrPositionnt * @param
{Number|&#39;end&#39;|&#39;before&#39;|&#39;after&#39;} [offset=0] Offset
or one of the flags. Used only whennt * first parameter is a {@link
module:engine/view/item~Item view item}.nt */nt_setFocus( itemOrPosition,
offset ) {nttthis._selection.setFocus( itemOrPosition, offset );nt}nnt/**nt
* Fired whenever selection ranges are changed through {@link
~DocumentSelection Selection API}.nt *nt * @event changent */n}nnmix(
DocumentSelection, EmitterMixin );nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-engine/src/view/documentselection.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module utils/collectionn */nnimport EmitterMixin
from &#39;./emittermixin&#39;;nimport CKEditorError from
&#39;./ckeditorerror&#39;;nimport uid from &#39;./uid&#39;;nimport mix from
&#39;./mix&#39;;nn/**n * Collections are ordered sets of objects. Items in
the collection can be retrieved by their indexesn * in the collection (like
in an array) or by their ids.n *n * If an object without an `id` property
is being added to the collection, the `id` property will be generatedn *
automatically. Note that the automatically generated id is unique only
within this single collection instance.n *n * By default an item in the
collection is identified by its `id` property. The name of the identifier
can ben * configured through the constructor of the collection.n *n *
@mixes module:utils/emittermixin~EmitterMixinn */nexport default class
Collection {nt/**nt * Creates a new Collection instance.nt *nt * @param
{Object} [options={}] The options object.nt * @param {String}
[options.idProperty=&#39;id&#39;] The name of the property which is
considered to identify an item.nt */ntconstructor( options = {} )
{ntt/**ntt * The internal list of items in the collection.ntt *ntt *
@privatentt * @member {Object[]}ntt */nttthis._items = [];nntt/**ntt * The
internal map of items in the collection.ntt *ntt * @privatentt * @member
{Map}ntt */nttthis._itemMap = new Map();nntt/**ntt * The name of the
property which is considered to identify an item.ntt *ntt * @privatentt *
@member {String}ntt */nttthis._idProperty = options.idProperty ||
&#39;id&#39;;nntt/**ntt * A helper mapping external items of a bound
collection ({@link bindTo})ntt * and actual items of this collection. It
provides informationntt * necessary to properly remove items bound to
another collection.ntt *ntt * See {@link #_bindToInternalToExternalMap}.ntt
*ntt * @protectedntt * @member {WeakMap}ntt
*/nttthis._bindToExternalToInternalMap = new WeakMap();nntt/**ntt * A
helper mapping items of this collection to external items of a bound
collectionntt * ({@link bindTo}). It provides information necessary to
manage the bindings, e.g.ntt * to avoid loops in two–way bindings.ntt *ntt
* See {@link #_bindToExternalToInternalMap}.ntt *ntt * @protectedntt *
@member {WeakMap}ntt */nttthis._bindToInternalToExternalMap = new
WeakMap();nntt/**ntt * Stores indexes of skipped items from bound external
collection.ntt *ntt * @privatentt * @member {Array}ntt
*/nttthis._skippedIndexesFromExternal = [];nntt/**ntt * A collection
instance this collection is bound to as a resultntt * of calling {@link
bindTo} method.ntt *ntt * @protectedntt * @member
{module:utils/collection~Collection} #_bindToCollectionntt */nt}nnt/**nt *
The number of items available in the collection.nt *nt * @member {Number}
lengthnt */ntget length() {nttreturn this._items.length;nt}nnt/**nt *
Returns the first item from the collection or null when collection is
empty.nt *nt * @returns {Object|null} The first item or `null` if
collection is empty.nt */ntget first() {nttreturn this._items[ 0 ] ||
null;nt}nnt/**nt * Returns the last item from the collection or null when
collection is empty.nt *nt * @returns {Object|null} The last item or `null`
if collection is empty.nt */ntget last() {nttreturn this._items[
this.length - 1 ] || null;nt}nnt/**nt * Adds an item into the collection.nt
*nt * If the item does not have an id, then it will be automatically
generated and set on the item.nt *nt * @chainablent * @param {Object}
itemnt * @param {Number} [index] The position of the item in the
collection. The itemnt * is pushed to the collection when `index` not
specified.nt * @fires addnt */ntadd( item, index ) {nttlet itemId;nttconst
idProperty = this._idProperty;nnttif ( ( idProperty in item ) ) {ntttitemId
= item[ idProperty ];nntttif ( typeof itemId != &#39;string&#39; )
{ntttt/**ntttt * This item&#39;s id should be a string.ntttt *ntttt *
@error collection-add-invalid-idntttt */nttttthrow new CKEditorError(
&#39;collection-add-invalid-id&#39; );nttt}nntttif ( this.get( itemId ) )
{ntttt/**ntttt * This item already exists in the collection.ntttt *ntttt *
@error collection-add-item-already-existsntttt */nttttthrow new
CKEditorError( &#39;collection-add-item-already-exists&#39; );nttt}ntt}
else {ntttitem[ idProperty ] = itemId = uid();ntt}nntt// TODO: Use ES6
default function argument.nttif ( index === undefined ) {ntttindex =
this._items.length;ntt} else if ( index &gt; this._items.length || index
&lt; 0 ) {nttt/**nttt * The index number has invalid value.nttt *nttt *
@error collection-add-item-bad-indexnttt */ntttthrow new CKEditorError(
&#39;collection-add-item-invalid-index&#39; );ntt}nnttthis._items.splice(
index, 0, item );nnttthis._itemMap.set( itemId, item );nnttthis.fire(
&#39;add&#39;, item, index );nnttreturn this;nt}nnt/**nt * Gets item by its
id or index.nt *nt * @param {String|Number} idOrIndex The item id or index
in the collection.nt * @returns {Object|null} The requested item or `null`
if such item does not exist.nt */ntget( idOrIndex ) {nttlet item;nnttif (
typeof idOrIndex == &#39;string&#39; ) {ntttitem = this._itemMap.get(
idOrIndex );ntt} else if ( typeof idOrIndex == &#39;number&#39; ) {ntttitem
= this._items[ idOrIndex ];ntt} else {nttt/**nttt * Index or id must be
given.nttt *nttt * @error collection-get-invalid-argnttt */ntttthrow new
CKEditorError( &#39;collection-get-invalid-arg: Index or id must be
given.&#39; );ntt}nnttreturn item || null;nt}nnt/**nt * Gets index of item
in the collection.nt * When item is not defined in the collection then
index will be equal -1.nt *nt * @param {String|Object} idOrItem The item or
its id in the collection.nt * @returns {Number} Index of given item.nt
*/ntgetIndex( idOrItem ) {nttlet item;nnttif ( typeof idOrItem ==
&#39;string&#39; ) {ntttitem = this._itemMap.get( idOrItem );ntt} else
{ntttitem = idOrItem;ntt}nnttreturn this._items.indexOf( item );nt}nnt/**nt
* Removes an item from the collection.nt *nt * @param
{Object|Number|String} subject The item to remove, its id or index in the
collection.nt * @returns {Object} The removed item.nt * @fires removent
*/ntremove( subject ) {nttlet index, id, item;nttlet itemDoesNotExist =
false;nttconst idProperty = this._idProperty;nnttif ( typeof subject ==
&#39;string&#39; ) {ntttid = subject;ntttitem = this._itemMap.get( id
);ntttitemDoesNotExist = !item;nntttif ( item ) {nttttindex =
this._items.indexOf( item );nttt}ntt} else if ( typeof subject ==
&#39;number&#39; ) {ntttindex = subject;ntttitem = this._items[ index
];ntttitemDoesNotExist = !item;nntttif ( item ) {nttttid = item[ idProperty
];nttt}ntt} else {ntttitem = subject;ntttid = item[ idProperty ];ntttindex
= this._items.indexOf( item );ntttitemDoesNotExist = ( index == -1 ||
!this._itemMap.get( id ) );ntt}nnttif ( itemDoesNotExist ) {nttt/**nttt *
Item not found.nttt *nttt * @error collection-remove-404nttt */ntttthrow
new CKEditorError( &#39;collection-remove-404: Item not found.&#39;
);ntt}nnttthis._items.splice( index, 1 );nttthis._itemMap.delete( id
);nnttconst externalItem = this._bindToInternalToExternalMap.get( item
);nttthis._bindToInternalToExternalMap.delete( item
);nttthis._bindToExternalToInternalMap.delete( externalItem
);nnttthis.fire( &#39;remove&#39;, item, index );nnttreturn
item;nt}nnt/**nt * Executes the callback for each item in the collection
and composes an array or values returned by this callback.nt *nt * @param
{Function} callbacknt * @param {Object} callback.itemnt * @param {Number}
callback.indexnt * @params {Object} ctx Context in which the `callback`
will be called.nt * @returns {Array} The result of mapping.nt */ntmap(
callback, ctx ) {nttreturn this._items.map( callback, ctx );nt}nnt/**nt *
Finds the first item in the collection for which the `callback` returns a
true value.nt *nt * @param {Function} callbacknt * @param {Object}
callback.itemnt * @param {Number} callback.indexnt * @returns {Object} The
item for which `callback` returned a true value.nt * @params {Object} ctx
Context in which the `callback` will be called.nt */ntfind( callback, ctx )
{nttreturn this._items.find( callback, ctx );nt}nnt/**nt * Returns an array
with items for which the `callback` returned a true value.nt *nt * @param
{Function} callbacknt * @param {Object} callback.itemnt * @param {Number}
callback.indexnt * @params {Object} ctx Context in which the `callback`
will be called.nt * @returns {Object[]} The array with matching items.nt
*/ntfilter( callback, ctx ) {nttreturn this._items.filter( callback, ctx
);nt}nnt/**nt * Removes all items from the collection and destroys the
binding created usingnt * {@link bindTo}.nt */ntclear() {nttif (
this._bindToCollection ) {ntttthis.stopListening( this._bindToCollection
);ntttthis._bindToCollection = null;ntt}nnttwhile ( this.length )
{ntttthis.remove( 0 );ntt}nt}nnt/**nt * Binds and synchronizes the
collection with another one.nt *nt * The binding can be a simple factory:nt
*nt *ttclass FactoryClass {nt *tttconstructor( data ) {nt *ttttthis.label =
data.label;nt *ttt}nt *tt}nt *nt *ttconst source = new Collection( {
idProperty: &#39;label&#39; } );nt *ttconst target = new Collection();nt
*nt *tttarget.bindTo( source ).as( FactoryClass );nt *nt *ttsource.add( {
label: &#39;foo&#39; } );nt *ttsource.add( { label: &#39;bar&#39; } );nt
*nt *ttconsole.log( target.length ); // 2nt *ttconsole.log( target.get( 1
).label ); // &#39;bar&#39;nt *nt *ttsource.remove( 0 );nt *ttconsole.log(
target.length ); // 1nt *ttconsole.log( target.get( 0 ).label ); //
&#39;bar&#39;nt *nt * or the factory driven by a custom callback:nt *nt
*ttclass FooClass {nt *tttconstructor( data ) {nt *ttttthis.label =
data.label;nt *ttt}nt *tt}nt *nt *ttclass BarClass {nt *tttconstructor(
data ) {nt *ttttthis.label = data.label;nt *ttt}nt *tt}nt *nt *ttconst
source = new Collection( { idProperty: &#39;label&#39; } );nt *ttconst
target = new Collection();nt *nt *tttarget.bindTo( source ).using( ( item )
=&gt; {nt *tttif ( item.label == &#39;foo&#39; ) {nt *ttttreturn new
FooClass( item );nt *ttt} else {nt *ttttreturn new BarClass( item );nt
*ttt}nt *tt} );nt *nt *ttsource.add( { label: &#39;foo&#39; } );nt
*ttsource.add( { label: &#39;bar&#39; } );nt *nt *ttconsole.log(
target.length ); // 2nt *ttconsole.log( target.get( 0 ) instanceof FooClass
); // truent *ttconsole.log( target.get( 1 ) instanceof BarClass ); //
truent *nt * or the factory out of property name:nt *nt *ttconst source =
new Collection( { idProperty: &#39;label&#39; } );nt *ttconst target = new
Collection();nt *nt *tttarget.bindTo( source ).using( &#39;label&#39; );nt
*nt *ttsource.add( { label: { value: &#39;foo&#39; } } );nt *ttsource.add(
{ label: { value: &#39;bar&#39; } } );nt *nt *ttconsole.log( target.length
); // 2nt *ttconsole.log( target.get( 0 ).value ); // &#39;foo&#39;nt
*ttconsole.log( target.get( 1 ).value ); // &#39;bar&#39;nt *nt * It&#39;s
possible to skip specified items by returning falsy value:nt *nt *ttconst
source = new Collection();nt *ttconst target = new Collection();nt *nt
*tttarget.bindTo( source ).using( item =&gt; {nt *tttif ( item.hidden ) {nt
*ttttreturn null;nt *ttt}nt *nt *tttreturn item;nt *tt} );nt *nt
*ttsource.add( { hidden: true } );nt *ttsource.add( { hidden: false } );nt
*nt *ttconsole.log( source.length ); // 2nt *ttconsole.log( target.length
); // 1nt *nt * *Note*: {@link clear} can be used to break the binding.nt
*nt * @param {module:utils/collection~Collection} externalCollection A
collection to be bound.nt * @returns {Object}nt * @returns
{module:utils/collection~Collection#bindTo#as} return.asnt * @returns
{module:utils/collection~Collection#bindTo#using} return.usingnt
*/ntbindTo( externalCollection ) {nttif ( this._bindToCollection )
{nttt/**nttt * The collection cannot be bound more than once.nttt *nttt *
@error collection-bind-to-rebindnttt */ntttthrow new CKEditorError(
&#39;collection-bind-to-rebind: The collection cannot be bound more than
once.&#39; );ntt}nnttthis._bindToCollection = externalCollection;nnttreturn
{nttt/**nttt * Creates the class factory binding.nttt *nttt * @staticnttt *
@param {Function} Class Specifies which class factory is to be
initialized.nttt */ntttas: Class =&gt; {nttttthis._setUpBindToBinding( item
=&gt; new Class( item ) );nttt},nnttt/**nttt * Creates callback or property
binding.nttt *nttt * @staticnttt * @param {Function|String}
callbackOrProperty When the function is passed, it is used tonttt * produce
the items. When the string is provided, the property value is used to
createnttt * the bound collection items.nttt */ntttusing:
callbackOrProperty =&gt; {nttttif ( typeof callbackOrProperty ==
&#39;function&#39; ) {ntttttthis._setUpBindToBinding( item =&gt;
callbackOrProperty( item ) );ntttt} else {ntttttthis._setUpBindToBinding(
item =&gt; item[ callbackOrProperty ] );ntttt}nttt}ntt};nt}nnt/**nt *
Finalizes and activates a binding initiated by {#bindTo}.nt *nt *
@protectednt * @param {Function} factory A function which produces
collection items.nt */nt_setUpBindToBinding( factory ) {nttconst
externalCollection = this._bindToCollection;nntt// Adds the item to the
collection once a change has been done to the external
collection.ntt//ntt// @privatenttconst addItem = ( evt, externalItem, index
) =&gt; {ntttconst isExternalBoundToThis =
externalCollection._bindToCollection == this;ntttconst externalItemBound =
externalCollection._bindToInternalToExternalMap.get( externalItem );nnttt//
If an external collection is bound to this collection, which makes it a
2–way binding,nttt// and the particular external collection item is already
bound, don&#39;t add it here.nttt// The external item has been created
**out of this collection&#39;s item** and (re)adding it willnttt// cause a
loop.ntttif ( isExternalBoundToThis &amp;&amp; externalItemBound )
{nttttthis._bindToExternalToInternalMap.set( externalItem,
externalItemBound );nttttthis._bindToInternalToExternalMap.set(
externalItemBound, externalItem );nttt} else {nttttconst item = factory(
externalItem );nntttt// When there is no item we need to remember skipped
index first and then we can skip this item.nttttif ( !item )
{ntttttthis._skippedIndexesFromExternal.push( index
);nntttttreturn;ntttt}nntttt// Lets try to put item at the same index as
index in external collectionntttt// but when there are a skipped items in
one or both collections we need to recalculate this index.nttttlet
finalIndex = index;nntttt// When we try to insert item after some skipped
items from external collection we needntttt// to include this skipped items
and decrease index.ntttt//ntttt// For the following example:ntttt//
external -&gt; [ &#39;A&#39;, &#39;B - skipped for internal&#39;, &#39;C -
skipped for internal&#39; ]ntttt// internal -&gt; [ A ]ntttt//ntttt//
Another item is been added at the end of external collection:ntttt//
external.add( &#39;D&#39; )ntttt// external -&gt; [ &#39;A&#39;, &#39;B -
skipped for internal&#39;, &#39;C - skipped for internal&#39;, &#39;D&#39;
]ntttt//ntttt// We can&#39;t just add &#39;D&#39; to internal at the same
index as index in external becausentttt// this will produce empty indexes
what is invalid:ntttt// internal -&gt; [ &#39;A&#39;, empty, empty,
&#39;D&#39; ]ntttt//ntttt// So we need to include skipped items and
decrease indexntttt// internal -&gt; [ &#39;A&#39;, &#39;D&#39; ]nttttfor (
const skipped of this._skippedIndexesFromExternal ) {ntttttif ( index &gt;
skipped ) {nttttttfinalIndex–;nttttt}ntttt}nntttt// We need to take into
consideration that external collection could skip some items fromntttt//
internal collection.ntttt//ntttt// For the following example:ntttt//
internal -&gt; [ &#39;A&#39;, &#39;B - skipped for external&#39;, &#39;C -
skipped for external&#39; ]ntttt// external -&gt; [ A ]ntttt//ntttt//
Another item is been added at the end of external collection:ntttt//
external.add( &#39;D&#39; )ntttt// external -&gt; [ &#39;A&#39;,
&#39;D&#39; ]ntttt//ntttt// We need to include skipped items and place new
item after them:ntttt// internal -&gt; [ &#39;A&#39;, &#39;B - skipped for
external&#39;, &#39;C - skipped for external&#39;, &#39;D&#39; ]nttttfor (
const skipped of externalCollection._skippedIndexesFromExternal ) {ntttttif
( finalIndex &gt;= skipped )
{nttttttfinalIndex++;nttttt}ntttt}nnttttthis._bindToExternalToInternalMap.set(
externalItem, item );nttttthis._bindToInternalToExternalMap.set( item,
externalItem );nttttthis.add( item, finalIndex );nntttt// After adding new
element to internal collection we need update indexesntttt// of skipped
items in external collection.nttttfor ( let i = 0; i &lt;
externalCollection._skippedIndexesFromExternal.length; i++ ) {ntttttif (
finalIndex &lt;= externalCollection._skippedIndexesFromExternal[ i ] )
{nttttttexternalCollection._skippedIndexesFromExternal[ i
]++;nttttt}ntttt}nttt}ntt};nntt// Load the initial content of the
collection.nttfor ( const externalItem of externalCollection )
{ntttaddItem( null, externalItem, externalCollection.getIndex( externalItem
) );ntt}nntt// Synchronize the with collection as new items are
added.nttthis.listenTo( externalCollection, &#39;add&#39;, addItem );nntt//
Synchronize the with collection as new items are removed.nttthis.listenTo(
externalCollection, &#39;remove&#39;, ( evt, externalItem, index ) =&gt;
{ntttconst item = this._bindToExternalToInternalMap.get( externalItem
);nntttif ( item ) {nttttthis.remove( item );nttt}nnttt// After removing
element from external collection we need update/remove indexesnttt// of
skipped items in internal collection.ntttthis._skippedIndexesFromExternal =
this._skippedIndexesFromExternal.reduce( ( result, skipped ) =&gt; {nttttif
( index &lt; skipped ) {ntttttresult.push( skipped - 1 );ntttt}nnttttif (
index &gt; skipped ) {ntttttresult.push( skipped );ntttt}nnttttreturn
result;nttt}, [] );ntt} );nt}nnt/**nt * Iterable interface.nt *nt *
@returns {Iterable.&lt;*&gt;}nt */nt[ Symbol.iterator ]() {nttreturn
this._items[ Symbol.iterator ]();nt}nnt/**nt * Fired when an item is added
to the collection.nt *nt * @event addnt * @param {Object} item The added
item.nt */nnt/**nt * Fired when an item is removed from the collection.nt
*nt * @event removent * @param {Object} item The removed item.nt * @param
{Number} index Index from which item was removed.nt */n}nnmix( Collection,
EmitterMixin );nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/collection.jsn// module id = nulln// module chunks =
“,”/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben. All
rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
engine/view/documentn */nnimport DocumentSelection from
&#39;./documentselection&#39;;nimport Collection from
&#39;@ckeditor/ckeditor5-utils/src/collection&#39;;nimport mix from
&#39;@ckeditor/ckeditor5-utils/src/mix&#39;;nimport ObservableMixin from
&#39;@ckeditor/ckeditor5-utils/src/observablemixin&#39;;nn/**n * Document
class creates an abstract layer over the content editable area, contains a
tree of view elements andn * {@link
module:engine/view/documentselection~DocumentSelection view selection}
associated with this document.n *n * @mixes
module:utils/observablemixin~ObservableMixinn */nexport default class
Document {nt/**nt * Creates a Document instance.nt */ntconstructor()
{ntt/**ntt * Selection done on this document.ntt *ntt * @readonlyntt *
@member {module:engine/view/documentselection~DocumentSelection}
module:engine/view/document~Document#selectionntt */nttthis.selection = new
DocumentSelection();nntt/**ntt * Roots of the view tree. Collection of the
{module:engine/view/element~Element view elements}.ntt *ntt * View roots
are created as a result of binding between {@link
module:engine/view/document~Document#roots} andntt * {@link
module:engine/model/document~Document#roots} and this is handled byntt *
{@link module:engine/controller/editingcontroller~EditingController}, so to
create view root we need to createntt * model root using {@link
module:engine/model/document~Document#createRoot}.ntt *ntt * @readonlyntt *
@member {Collection} module:engine/view/document~Document#rootsntt
*/nttthis.roots = new Collection( { idProperty: &#39;rootName&#39; }
);nntt/**ntt * Defines whether document is in read-only mode.ntt *ntt *
When document is read-ony then all roots are read-only as well and caret
placed inside this root is hidden.ntt *ntt * @observablentt * @member
{Boolean} isReadOnlyntt */nttthis.set( &#39;isReadOnly&#39;, false
);nntt/**ntt * True if document is focused.ntt *ntt * This property is
updated by the {@link
module:engine/view/observer/focusobserver~FocusObserver}.ntt * If the
{@link module:engine/view/observer/focusobserver~FocusObserver} is disabled
this property will not change.ntt *ntt * @readonlyntt * @observablentt *
@member {Boolean} module:engine/view/document~Document#isFocusedntt
*/nttthis.set( &#39;isFocused&#39;, false );nntt/**ntt * True if
composition is in progress inside the document.ntt *ntt * This property is
updated by the {@link
module:engine/view/observer/compositionobserver~CompositionObserver}.ntt *
If the {@link
module:engine/view/observer/compositionobserver~CompositionObserver} is
disabled this property will not change.ntt *ntt * @readonlyntt *
@observablentt * @member {Boolean}
module:engine/view/document~Document#isComposingntt */nttthis.set(
&#39;isComposing&#39;, false );nntt/**ntt * Post-fixer callbacks registered
to the view document.ntt *ntt * @privatentt * @member {Set}ntt
*/nttthis._postFixers = new Set();nt}nnt/**nt * Gets a {@link
module:engine/view/document~Document#roots view root element} with the
specified name. If the name is notnt * specific "main&quot; root is
returned.nt *nt * @param {String} [name=&#39;main&#39;] Name of the root.nt
* @returns
{module:engine/view/rooteditableelement~RootEditableElement|null} The view
root element with the specified nament * or null when there is no root of
given name.nt */ntgetRoot( name = &#39;main&#39; ) {nttreturn
this.roots.get( name );nt}nnt/**nt * Used to register a post-fixer
callback. A post-fixers mechanism allows to update view tree just before
renderingnt * to the DOM.nt *nt * Post-fixers are fired just after all
changes from the outermost change block were applied butnt * before the
{@link module:engine/view/view~View#event:render render event} is fired. If
a post-fixer callback madent * a change, it should return `true`. When this
happens, all post-fixers are fired again to check if something else
shouldnt * not be fixed in the new document tree state.nt *nt * View
post-fixers are useful when you wants to update view structure whenever it
changes, for instance add some classesnt * to elements based on the view
structure or selection. However, is you need DOM elements to be already
updated, usent * {@link module:engine/view/view~View#event:render render
event}.nt *nt * As a parameter, a post-fixer callback receives a {@link
module:engine/view/writer~Writer writer} instance connected with thent *
executed changes block.nt *nt * @param {Function} postFixernt
*/ntregisterPostFixer( postFixer ) {nttthis._postFixers.add( postFixer
);nt}nnt/**nt * Performs post-fixer loops. Executes post-fixer callbacks as
long as none of them has done any changes to the model.nt *nt *
@protectednt * @param {module:engine/view/writer~Writer} writernt
*/nt_callPostFixers( writer ) {nttlet wasFixed = false;nnttdo {ntttfor (
const callback of this._postFixers ) {nttttwasFixed = callback( writer
);nnttttif ( wasFixed ) {ntttttbreak;ntttt}nttt}ntt} while ( wasFixed
);nt}n}nnmix( Document, ObservableMixin );nn/**n * Enum representing type
of the change.n *n * Possible values:n *n * * `children` - for child list
changes,n * * `attributes` - for element attributes changes,n * * `text` -
for text nodes changes.n *n * @typedef {String}
module:engine/view/document~ChangeTypen */nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-engine/src/view/document.jsn// module id = nulln//
module chunks = “,”/** Used to stand-in for `undefined` hash values. */nvar
HASH_UNDEFINED = &#39;<em>lodash_hash_undefined</em>&#39;;nn/**n * Adds
`value` to the array cache.n *n * @privaten * @name addn * @memberOf
SetCachen * @alias pushn * @param {*} value The value to cache.n * @returns
{Object} Returns the cache instance.n */nfunction setCacheAdd(value) {n 
this.__data__.set(value, HASH_UNDEFINED);n  return this;n}nnexport default
setCacheAdd;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_setCacheAdd.jsn// module id = nulln//
module chunks = “,”/**n * Checks if `value` is in the array cache.n *n *
@privaten * @name hasn * @memberOf SetCachen * @param {*} value The value
to search for.n * @returns {number} Returns `true` if `value` is found,
else `false`.n */nfunction setCacheHas(value) {n  return
this.__data__.has(value);n}nnexport default
setCacheHas;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_setCacheHas.jsn// module id = nulln//
module chunks = “,”/**n * A specialized version of `_.some` for arrays
without support for iterateen * shorthands.n *n * @privaten * @param
{Array} array The array to iterate over.n * @param {Function} predicate The
function invoked per iteration.n * @returns {boolean} Returns `true` if any
element passes the predicate check,n *  else `false`.n */nfunction
arraySome(array, predicate) {n  var index = -1,n      length =
array.length;nn  while (++index &lt; length) {n    if (<a
href="index">predicate(array</a>, index, array)) {n      return true;n   
}n  }n  return false;n}nnexport default arraySome;nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-utils/src/lib/lodash/_arraySome.jsn// module
id = nulln// module chunks = “,”import SetCache from
&#39;./_SetCache&#39;;nimport arraySome from &#39;./_arraySome&#39;;nn/**
Used to compose bitmasks for comparison styles. */nvar
UNORDERED_COMPARE_FLAG = 1,n    PARTIAL_COMPARE_FLAG = 2;nn/**n * A
specialized version of `baseIsEqualDeep` for arrays with support forn *
partial deep comparisons.n *n * @privaten * @param {Array} array The array
to compare.n * @param {Array} other The other array to compare.n * @param
{Function} equalFunc The function to determine equivalents of values.n *
@param {Function} customizer The function to customize comparisons.n *
@param {number} bitmask The bitmask of comparison flags. See `baseIsEqual`n
*  for more details.n * @param {Object} stack Tracks traversed `array` and
`other` objects.n * @returns {boolean} Returns `true` if the arrays are
equivalent, else `false`.n */nfunction equalArrays(array, other, equalFunc,
customizer, bitmask, stack) {n  var isPartial = bitmask &amp;
PARTIAL_COMPARE_FLAG,n      arrLength = array.length,n      othLength =
other.length;nn  if (arrLength != othLength &amp;&amp; !(isPartial
&amp;&amp; othLength &gt; arrLength)) {n    return false;n  }n  // Assume
cyclic values are equal.n  var stacked = stack.get(array);n  if (stacked)
{n    return stacked == other;n  }n  var index = -1,n      result = true,n 
seen = (bitmask &amp; UNORDERED_COMPARE_FLAG) ? new SetCache : undefined;nn
stack.set(array, other);nn  // Ignore non-index properties.n  while
(++index &lt; arrLength) {n    var arrValue = <a href="index">array</a>,n  
othValue = <a href="index">other</a>;nn    if (customizer) {n      var
compared = isPartialn        ? customizer(othValue, arrValue, index, other,
array, stack)n        : customizer(arrValue, othValue, index, array, other,
stack);n    }n    if (compared !== undefined) {n      if (compared) {n     
continue;n      }n      result = false;n      break;n    }n    //
Recursively compare arrays (susceptible to call stack limits).n    if
(seen) {n      if (!arraySome(other, function(othValue, othIndex) {n       
if (!seen.has(othIndex) &amp;&amp;n                (arrValue === othValue
|| equalFunc(arrValue, othValue, customizer, bitmask, stack))) {n          
return seen.add(othIndex);n            }n          })) {n        result =
false;n        break;n      }n    } else if (!(n          arrValue ===
othValue ||n            equalFunc(arrValue, othValue, customizer, bitmask,
stack)n        )) {n      result = false;n      break;n    }n  }n  <a
href="'delete'">stack</a>(array);n  return result;n}nnexport default
equalArrays;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_equalArrays.jsn// module id = nulln//
module chunks = “,”import Symbol from &#39;./_Symbol&#39;;nimport
Uint8Array from &#39;./_Uint8Array&#39;;nimport equalArrays from
&#39;./_equalArrays&#39;;nimport mapToArray from
&#39;./_mapToArray&#39;;nimport setToArray from
&#39;./_setToArray&#39;;nn/** Used to compose bitmasks for comparison
styles. */nvar UNORDERED_COMPARE_FLAG = 1,n    PARTIAL_COMPARE_FLAG =
2;nn/** `Object#toString` result references. */nvar boolTag = &#39;[object
Boolean]&#39;,n    dateTag = &#39;[object Date]&#39;,n    errorTag =
&#39;[object Error]&#39;,n    mapTag = &#39;[object Map]&#39;,n   
numberTag = &#39;[object Number]&#39;,n    regexpTag = &#39;[object
RegExp]&#39;,n    setTag = &#39;[object Set]&#39;,n    stringTag =
&#39;[object String]&#39;,n    symbolTag = &#39;[object Symbol]&#39;;nnvar
arrayBufferTag = &#39;[object ArrayBuffer]&#39;,n    dataViewTag =
&#39;[object DataView]&#39;;nn/** Used to convert symbols to primitives and
strings. */nvar symbolProto = Symbol ? Symbol.prototype : undefined,n   
symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;nn/**n * A
specialized version of `baseIsEqualDeep` for comparing objects ofn * the
same `toStringTag`.n *n * *Note:* This function only supports comparing
values with tags ofn * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or
`String`.n *n * @privaten * @param {Object} object The object to compare.n
* @param {Object} other The other object to compare.n * @param {string} tag
The `toStringTag` of the objects to compare.n * @param {Function} equalFunc
The function to determine equivalents of values.n * @param {Function}
customizer The function to customize comparisons.n * @param {number}
bitmask The bitmask of comparison flags. See `baseIsEqual`n *  for more
details.n * @param {Object} stack Tracks traversed `object` and `other`
objects.n * @returns {boolean} Returns `true` if the objects are
equivalent, else `false`.n */nfunction equalByTag(object, other, tag,
equalFunc, customizer, bitmask, stack) {n  switch (tag) {n    case
dataViewTag:n      if ((object.byteLength != other.byteLength) ||n         
(object.byteOffset != other.byteOffset)) {n        return false;n      }n  
object = object.buffer;n      other = other.buffer;nn    case
arrayBufferTag:n      if ((object.byteLength != other.byteLength) ||n      
!equalFunc(new Uint8Array(object), new Uint8Array(other))) {n        return
false;n      }n      return true;nn    case boolTag:n    case dateTag:n    
// Coerce dates and booleans to numbers, dates to milliseconds andn      //
booleans to `1` or `0` treating invalid dates coerced to `NaN` asn      //
not equal.n      return +object == +other;nn    case errorTag:n      return
object.name == other.name &amp;&amp; object.message == other.message;nn   
case numberTag:n      // Treat `NaN` vs. `NaN` as equal.n      return
(object != +object) ? other != +other : object == +other;nn    case
regexpTag:n    case stringTag:n      // Coerce regexes to strings and treat
strings, primitives and objects,n      // as equal. See <a
href="http://www.ecma-international.org/ecma-262/6.0/#sec-regexp.prototype.tostring\n">www.ecma-international.org/ecma-262/6.0/#sec-regexp.prototype.tostringn</a>
// for more details.n      return object == (other + &#39;&#39;);nn    case
mapTag:n      var convert = mapToArray;nn    case setTag:n      var
isPartial = bitmask &amp; PARTIAL_COMPARE_FLAG;n      convert || (convert =
setToArray);nn      if (object.size != other.size &amp;&amp; !isPartial) {n
return false;n      }n      // Assume cyclic values are equal.n      var
stacked = stack.get(object);n      if (stacked) {n        return stacked ==
other;n      }n      bitmask |= UNORDERED_COMPARE_FLAG;n     
stack.set(object, other);nn      // Recursively compare objects
(susceptible to call stack limits).n      return
equalArrays(convert(object), convert(other), equalFunc, customizer,
bitmask, stack);nn    case symbolTag:n      if (symbolValueOf) {n       
return symbolValueOf.call(object) == symbolValueOf.call(other);n      }n 
}n  return false;n}nnexport default equalByTag;nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-utils/src/lib/lodash/_equalByTag.jsn//
module id = nulln// module chunks = “,”import Stack from
&#39;./_Stack&#39;;nimport equalArrays from
&#39;./_equalArrays&#39;;nimport equalByTag from
&#39;./_equalByTag&#39;;nimport equalObjects from
&#39;./_equalObjects&#39;;nimport getTag from &#39;./_getTag&#39;;nimport
isArray from &#39;./isArray&#39;;nimport isHostObject from
&#39;./_isHostObject&#39;;nimport isTypedArray from
&#39;./isTypedArray&#39;;nn/** Used to compose bitmasks for comparison
styles. */nvar PARTIAL_COMPARE_FLAG = 2;nn/** `Object#toString` result
references. */nvar argsTag = &#39;[object Arguments]&#39;,n    arrayTag =
&#39;[object Array]&#39;,n    objectTag = &#39;[object Object]&#39;;nn/**
Used for built-in method references. */nvar objectProto =
Object.prototype;nn/** Used to check objects for own properties. */nvar
hasOwnProperty = objectProto.hasOwnProperty;nn/**n * A specialized version
of `baseIsEqual` for arrays and objects which performsn * deep comparisons
and tracks traversed objects enabling objects with circularn * references
to be compared.n *n * @privaten * @param {Object} object The object to
compare.n * @param {Object} other The other object to compare.n * @param
{Function} equalFunc The function to determine equivalents of values.n *
@param {Function} [customizer] The function to customize comparisons.n *
@param {number} [bitmask] The bitmask of comparison flags. See
`baseIsEqual`n *  for more details.n * @param {Object} [stack] Tracks
traversed `object` and `other` objects.n * @returns {boolean} Returns
`true` if the objects are equivalent, else `false`.n */nfunction
baseIsEqualDeep(object, other, equalFunc, customizer, bitmask, stack) {n 
var objIsArr = isArray(object),n      othIsArr = isArray(other),n     
objTag = arrayTag,n      othTag = arrayTag;nn  if (!objIsArr) {n    objTag
= getTag(object);n    objTag = objTag == argsTag ? objectTag : objTag;n  }n
if (!othIsArr) {n    othTag = getTag(other);n    othTag = othTag == argsTag
? objectTag : othTag;n  }n  var objIsObj = objTag == objectTag &amp;&amp;
!isHostObject(object),n      othIsObj = othTag == objectTag &amp;&amp;
!isHostObject(other),n      isSameTag = objTag == othTag;nn  if (isSameTag
&amp;&amp; !objIsObj) {n    stack || (stack = new Stack);n    return
(objIsArr || isTypedArray(object))n      ? equalArrays(object, other,
equalFunc, customizer, bitmask, stack)n      : equalByTag(object, other,
objTag, equalFunc, customizer, bitmask, stack);n  }n  if (!(bitmask &amp;
PARTIAL_COMPARE_FLAG)) {n    var objIsWrapped = objIsObj &amp;&amp;
hasOwnProperty.call(object, &#39;__wrapped__&#39;),n        othIsWrapped =
othIsObj &amp;&amp; hasOwnProperty.call(other, &#39;__wrapped__&#39;);nn   
if (objIsWrapped || othIsWrapped) {n      var objUnwrapped = objIsWrapped ?
object.value() : object,n          othUnwrapped = othIsWrapped ?
other.value() : other;nn      stack || (stack = new Stack);n      return
equalFunc(objUnwrapped, othUnwrapped, customizer, bitmask, stack);n    }n 
}n  if (!isSameTag) {n    return false;n  }n  stack || (stack = new
Stack);n  return equalObjects(object, other, equalFunc, customizer,
bitmask, stack);n}nnexport default
baseIsEqualDeep;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_baseIsEqualDeep.jsn// module id =
nulln// module chunks = “,”import baseIsEqual from
&#39;./_baseIsEqual&#39;;nn/**n * This method is like `_.isEqual` except
that it accepts `customizer` whichn * is invoked to compare values. If
`customizer` returns `undefined`, comparisonsn * are handled by the method
instead. The `customizer` is invoked with up ton * six arguments:
(objValue, othValue [, index|key, object, other, stack]).n *n * @staticn *
@memberOf _n * @since 4.0.0n * @category Langn * @param {*} value The value
to compare.n * @param {*} other The other value to compare.n * @param
{Function} [customizer] The function to customize comparisons.n * @returns
{boolean} Returns `true` if the values are equivalent,n *  else `false`.n *
@examplen *n * function isGreeting(value) {n *   return
/^h(?:i|ello)$/.test(value);n * }n *n * function customizer(objValue,
othValue) {n *   if (isGreeting(objValue) &amp;&amp; isGreeting(othValue))
{n *     return true;n *   }n * }n *n * var array = [&#39;hello&#39;,
&#39;goodbye&#39;];n * var other = [&#39;hi&#39;, &#39;goodbye&#39;];n *n *
_.isEqualWith(array, other, customizer);n * // =&gt; truen */nfunction
isEqualWith(value, other, customizer) {n  customizer = typeof customizer ==
&#39;function&#39; ? customizer : undefined;n  var result = customizer ?
customizer(value, other) : undefined;n  return result === undefined ?
baseIsEqual(value, other, customizer) : !!result;n}nnexport default
isEqualWith;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/isEqualWith.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module engine/view/observer/mutationobservern */nn/* globals
window */nnimport Observer from &#39;./observer&#39;;nimport ViewSelection
from &#39;../selection&#39;;nimport { startsWithFiller,
getDataWithoutFiller } from &#39;../filler&#39;;nimport isEqualWith from
&#39;@ckeditor/ckeditor5-utils/src/lib/lodash/isEqualWith&#39;;nn/**n *
Mutation observer class observes changes in the DOM, fires {@link
module:engine/view/document~Document#event:mutations} event, mark viewn *
elements as changed and call {@link
module:engine/view/renderer~Renderer#render}.n * Because all mutated nodes
are marked as "to be rendered&quot; and then * {@link
module:engine/view/renderer~Renderer#render} is called, all changes will be
reverted, unless the mutation will be handled by then * {@link
module:engine/view/document~Document#event:mutations} event listener. It
means user will see only handled changes, and the editorn * will block all
changes which are not handled.n *n * Mutation Observer also take care of
reducing number of mutations which are fired. It removes duplicates andn *
mutations on elements which do not have corresponding view elements. Alson
* {@link module:engine/view/observer/mutationobserver~MutatedText text
mutation} is fired only if parent element do not change child list.n *n *
Note that this observer is attached by the {@link
module:engine/view/view~View} and is available by default.n *n * @extends
module:engine/view/observer/observer~Observern */nexport default class
MutationObserver extends Observer {ntconstructor( view ) {nttsuper( view
);nntt/**ntt * Native mutation observer config.ntt *ntt * @privatentt *
@member {Object}ntt */nttthis._config = {ntttchildList:
true,ntttcharacterData: true,ntttcharacterDataOldValue: true,ntttsubtree:
truentt};nntt/**ntt * Reference to the {@link
module:engine/view/view~View#domConverter}.ntt *ntt * @member
{module:engine/view/domconverter~DomConverter}ntt */nttthis.domConverter =
view.domConverter;nntt/**ntt * Reference to the {@link
module:engine/view/view~View#renderer}.ntt *ntt * @member
{module:engine/view/renderer~Renderer}ntt */nttthis.renderer =
view._renderer;nntt/**ntt * Observed DOM elements.ntt *ntt * @privatentt *
@member {Array.&lt;HTMLElement&gt;}ntt */nttthis._domElements =
[];nntt/**ntt * Native mutation observer.ntt *ntt * @privatentt * @member
{MutationObserver}ntt */nttthis._mutationObserver = new
window.MutationObserver( this._onMutations.bind( this ) );nt}nnt/**nt *
Synchronously fires {@link
module:engine/view/document~Document#event:mutations} event with all
mutations in record queue.nt * At the same time empties the queue so
mutations will not be fired twice.nt */ntflush() {nttthis._onMutations(
this._mutationObserver.takeRecords() );nt}nnt/**nt * @inheritDocnt
*/ntobserve( domElement ) {nttthis._domElements.push( domElement );nnttif (
this.isEnabled ) {ntttthis._mutationObserver.observe( domElement,
this._config );ntt}nt}nnt/**nt * @inheritDocnt */ntenable()
{nttsuper.enable();nnttfor ( const domElement of this._domElements )
{ntttthis._mutationObserver.observe( domElement, this._config
);ntt}nt}nnt/**nt * @inheritDocnt */ntdisable()
{nttsuper.disable();nnttthis._mutationObserver.disconnect();nt}nnt/**nt *
@inheritDocnt */ntdestroy()
{nttsuper.destroy();nnttthis._mutationObserver.disconnect();nt}nnt/**nt *
Handles mutations. Deduplicates, mark view elements to sync, fire event and
call render.nt *nt * @privatent * @param {Array.&lt;Object&gt;}
domMutations Array of native mutations.nt */nt_onMutations( domMutations )
{ntt// As a result of this.flush() we can have an empty collection.nttif (
domMutations.length === 0 ) {ntttreturn;ntt}nnttconst domConverter =
this.domConverter;nntt// Use map and set for deduplication.nttconst
mutatedTexts = new Map();nttconst mutatedElements = new Set();nntt// Handle
`childList` mutations first, so we will be able to check if the
`characterData` mutation is in thentt// element with changed structure
anyway.nttfor ( const mutation of domMutations ) {ntttif ( mutation.type
=== &#39;childList&#39; ) {nttttconst element = domConverter.mapDomToView(
mutation.target );nntttt// Do not collect mutations from UIElements.nttttif
( element &amp;&amp; element.is( &#39;uiElement&#39; ) )
{ntttttcontinue;ntttt}nnttttif ( element &amp;&amp;
!this._isBogusBrMutation( mutation ) ) {ntttttmutatedElements.add( element
);ntttt}nttt}ntt}nntt// Handle `characterData` mutations later, when we
have the full list of nodes which changed structure.nttfor ( const mutation
of domMutations ) {ntttconst element = domConverter.mapDomToView(
mutation.target );nnttt// Do not collect mutations from UIElements.ntttif (
element &amp;&amp; element.is( &#39;uiElement&#39; ) )
{nttttcontinue;nttt}nntttif ( mutation.type === &#39;characterData&#39; )
{nttttconst text = domConverter.findCorrespondingViewText( mutation.target
);nnttttif ( text &amp;&amp; !mutatedElements.has( text.parent ) )
{nttttt// Use text as a key, for deduplication. If there will be another
mutation on the same text elementnttttt// we will have only one in the
map.ntttttmutatedTexts.set( text, {ntttttttype:
&#39;text&#39;,nttttttoldText: text.data,nttttttnewText:
getDataWithoutFiller( mutation.target ),nttttttnode: textnttttt}
);ntttt}ntttt// When we added first letter to the text node which had only
inline filler, for the DOM it is mutationntttt// on text, but for the view,
where filler text node did not existed, new text node was created, so
wentttt// need to fire &#39;children&#39; mutation instead of
&#39;text&#39;.nttttelse if ( !text &amp;&amp; startsWithFiller(
mutation.target ) ) {ntttttmutatedElements.add( domConverter.mapDomToView(
mutation.target.parentNode ) );ntttt}nttt}ntt}nntt// Now we build the list
of mutations to fire and mark elements. We did not do it earlier to avoid
marking thentt// same node multiple times in case of duplication.nntt//
List of mutations we will fire.nttconst viewMutations = [];nnttfor ( const
mutatedText of mutatedTexts.values() ) {ntttthis.renderer.markToSync(
&#39;text&#39;, mutatedText.node );ntttviewMutations.push( mutatedText
);ntt}nnttfor ( const viewElement of mutatedElements ) {ntttconst
domElement = domConverter.mapViewToDom( viewElement );ntttconst
viewChildren = Array.from( viewElement.getChildren() );ntttconst
newViewChildren = Array.from( domConverter.domChildrenToView( domElement, {
withChildren: false } ) );nnttt// It may happen that as a result of many
changes (sth was inserted and then removed),nttt// both elements
haven&#39;t really changed. #1031ntttif ( !isEqualWith( viewChildren,
newViewChildren, sameNodes ) ) {nttttthis.renderer.markToSync(
&#39;children&#39;, viewElement );nnttttviewMutations.push( {nttttttype:
&#39;children&#39;,ntttttoldChildren: viewChildren,ntttttnewChildren:
newViewChildren,ntttttnode: viewElementntttt} );nttt}ntt}nntt// Retrieve
`domSelection` using `ownerDocument` of one of mutated nodes.ntt// There
should not be simultaneous mutation in multiple documents, so it&#39;s
fine.nttconst domSelection = domMutations[ 0
].target.ownerDocument.getSelection();nnttlet viewSelection = null;nnttif (
domSelection &amp;&amp; domSelection.anchorNode ) {nttt// If `domSelection`
is inside a dom node that is already bound to a view node from view tree,
getnttt// corresponding selection in the view and pass it together with
`viewMutations`. The `viewSelection` maynttt// be used by features handling
mutations.nttt// Only one range is supported.nntttconst viewSelectionAnchor
= domConverter.domPositionToView( domSelection.anchorNode,
domSelection.anchorOffset );ntttconst viewSelectionFocus =
domConverter.domPositionToView( domSelection.focusNode,
domSelection.focusOffset );nnttt// Anchor and focus has to be properly
mapped to view.ntttif ( viewSelectionAnchor &amp;&amp; viewSelectionFocus )
{nttttviewSelection = new ViewSelection( viewSelectionAnchor
);nttttviewSelection.setFocus( viewSelectionFocus
);nttt}ntt}nnttthis.document.fire( &#39;mutations&#39;, viewMutations,
viewSelection );nntt// If nothing changes on `mutations` event, at this
point we have "dirty DOM&quot; (changed) and de-synchedntt// view (which
has not been changed). In order to "reset DOM&quot; we render the view
again.nttthis.view.render();nnttfunction sameNodes( child1, child2 )
{nttt// First level of comparison (array of children vs array of children)
– use the Lodash&#39;s default behavior.ntttif ( Array.isArray( child1 ) )
{nttttreturn;nttt}nnttt// Elements.ntttif ( child1 === child2 )
{nttttreturn true;nttt}nttt// Texts.ntttelse if ( child1.is( &#39;text&#39;
) &amp;&amp; child2.is( &#39;text&#39; ) ) {nttttreturn child1.data ===
child2.data;nttt}nnttt// Not matching types.ntttreturn
false;ntt}nt}nnt/**nt * Checks if mutation was generated by the browser
inserting bogus br on the end of the block element.nt * Such mutations are
generated while pressing space or performing native spellchecker
correctionnt * on the end of the block element in Firefox browser.nt *nt *
@privatent * @param {Object} mutation Native mutation object.nt * @returns
{Boolean}nt */nt_isBogusBrMutation( mutation ) {nttlet addedNode =
null;nntt// Check if mutation added only one node on the end of its
parent.nttif ( mutation.nextSibling === null &amp;&amp;
mutation.removedNodes.length === 0 &amp;&amp; mutation.addedNodes.length ==
1 ) {ntttaddedNode = this.domConverter.domToView( mutation.addedNodes[ 0 ],
{nttttwithChildren: falsenttt} );ntt}nnttreturn addedNode &amp;&amp;
addedNode.is( &#39;element&#39;, &#39;br&#39; );nt}n}nn/**n * Fired when
mutation occurred. If tree view is not changed on this event, DOM will be
reverted to the state beforen * mutation, so all changes which should be
applied, should be handled on this event.n *n * Introduced by {@link
module:engine/view/observer/mutationobserver~MutationObserver}.n *n * Note
that because {@link
module:engine/view/observer/mutationobserver~MutationObserver} is attached
by then * {@link module:engine/view/view~View} this event is available by
default.n *n * @see
module:engine/view/observer/mutationobserver~MutationObservern * @event
module:engine/view/document~Document#event:mutationsn * @param
{Array.&lt;module:engine/view/observer/mutationobserver~MutatedText|module:engine/view/observer/mutationobserver~MutatedChildren&gt;}n
* viewMutations Array of mutations.n * For mutated texts it will be {@link
module:engine/view/observer/mutationobserver~MutatedText} and for mutated
elements it will ben * {@link
module:engine/view/observer/mutationobserver~MutatedChildren}. You can
recognize the type based on the `type` property.n * @param
{module:engine/view/selection~Selection|null} viewSelection View selection
that is a result of converting DOM selection to view.n * Keep inn * mind
that the DOM selection is already "updated&quot;, meaning that it already
acknowledges changes done in mutation.n */nn/**n * Mutation item for text.n
*n * @see module:engine/view/document~Document#event:mutationsn * @see
module:engine/view/observer/mutationobserver~MutatedChildrenn *n * @typedef
{Object} module:engine/view/observer/mutationobserver~MutatedTextn *n *
@property {String} type For text mutations it is always &#39;text&#39;.n *
@property {module:engine/view/text~Text} node Mutated text node.n *
@property {String} oldText Old text.n * @property {String} newText New
text.n */nn/**n * Mutation item for child nodes.n *n * @see
module:engine/view/document~Document#event:mutationsn * @see
module:engine/view/observer/mutationobserver~MutatedTextn *n * @typedef
{Object} module:engine/view/observer/mutationobserver~MutatedChildrenn *n *
@property {String} type For child nodes mutations it is always
&#39;children&#39;.n * @property {module:engine/view/element~Element} node
Parent of the mutated children.n * @property
{Array.&lt;module:engine/view/node~Node&gt;} oldChildren Old child nodes.n
* @property {Array.&lt;module:engine/view/node~Node&gt;} newChildren New
child nodes.n */nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/view/observer/mutationobserver.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module engine/view/observer/domeventdatan
*/nnimport extend from
&#39;@ckeditor/ckeditor5-utils/src/lib/lodash/extend&#39;;nn/**n *
Information about a DOM event in context of the {@link
module:engine/view/document~Document}.n * It wraps the native event, which
usually should not be used as the wrapper containsn * additional data (like
key code for keyboard events).n */nexport default class DomEventData
{nt/**nt * @param {module:engine/view/view~View} view The instance of the
view controller.nt * @param {Event} domEvent The DOM event.nt * @param
{Object} [additionalData] Additional properties that the instance should
contain.nt */ntconstructor( view, domEvent, additionalData ) {ntt/**ntt *
Instance of the view controller.ntt *ntt * @readonlyntt * @member
{module:engine/view/view~View}
module:engine/view/observer/observer~Observer.DomEvent#viewntt
*/nttthis.view = view;nntt/**ntt * The instance of the document.ntt *ntt *
@readonlyntt * @member {module:engine/view/document~Document}
module:engine/view/observer/observer~Observer.DomEvent#documentntt
*/nttthis.document = view.document;nntt/**ntt * The DOM event.ntt *ntt *
@readonlyntt * @member {Event}
module:engine/view/observer/observer~Observer.DomEvent#domEventntt
*/nttthis.domEvent = domEvent;nntt/**ntt * The DOM target.ntt *ntt *
@readonlyntt * @member {HTMLElement}
module:engine/view/observer/observer~Observer.DomEvent#targetntt
*/nttthis.domTarget = domEvent.target;nnttextend( this, additionalData
);nt}nnt/**nt * The tree view element representing the target.nt *nt *
@readonlynt * @type module:engine/view/element~Elementnt */ntget target()
{nttreturn this.view.domConverter.mapDomToView( this.domTarget
);nt}nnt/**nt * Prevents the native&#39;s event default action.nt
*/ntpreventDefault() {nttthis.domEvent.preventDefault();nt}nnt/**nt * Stops
native event propagation.nt */ntstopPropagation()
{nttthis.domEvent.stopPropagation();nt}n}nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-engine/src/view/observer/domeventdata.jsn// module
id = nulln// module chunks = “,”/**n * @license Copyright © 2003-2018,
CKSource - Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module engine/view/observer/domeventobservern
*/nnimport Observer from &#39;./observer&#39;;nimport DomEventData from
&#39;./domeventdata&#39;;nn/**n * Base class for DOM event observers. This
class handlesn * {@link
module:engine/view/observer/observer~Observer#observe adding} listeners to
DOM elements,n * {@link
module:engine/view/observer/observer~Observer#disable disabling} andn *
{@link module:engine/view/observer/observer~Observer#enable re-enabling}
events.n * Child class needs to definen * {@link
module:engine/view/observer/domeventobserver~DomEventObserver#domEventType
DOM event type} andn * {@link
module:engine/view/observer/domeventobserver~DomEventObserver#onDomEvent
callback}.n *n * For instance:n *n *ttclass ClickObserver extends
DomEventObserver {n *ttt// It can also be defined as a normal property in
the constructor.n *tttget domEventType() {n *ttttreturn &#39;click&#39;;n
*ttt}n *n *tttonDomEvent( domEvent ) {n *ttttthis.fire( &#39;click&#39;,
domEvent );n *ttt}n *tt}n *n * @extends
module:engine/view/observer/observer~Observern */nexport default class
DomEventObserver extends Observer {nt/**nt * Type of the DOM event the
observer should listen on. Array of types can be definednt * if the obsever
should listen to multiple DOM events.nt *nt * @readonlynt * @member
{String|Array.&lt;String&gt;} domEventTypent */nnt/**nt * Callback which
should be called when the DOM event occurred. Note that the callback will
not be called ifnt * observer {@link isEnabled is not enabled}.nt *nt *
@see domEventTypent * @abstractnt * @method onDomEventnt */nnt/**nt *
@inheritDocnt */ntconstructor( view ) {nttsuper( view );nntt/**ntt * If set
to `true` DOM events will be listened on the capturing phase.ntt * Default
value is `false`.ntt *ntt * @member {Boolean}ntt */nttthis.useCapture =
false;nt}nnt/**nt * @inheritDocnt */ntobserve( domElement ) {nttconst types
= typeof this.domEventType == &#39;string&#39; ? [ this.domEventType ] :
this.domEventType;nntttypes.forEach( type =&gt; {ntttthis.listenTo(
domElement, type, ( eventInfo, domEvent ) =&gt; {nttttif ( this.isEnabled )
{ntttttthis.onDomEvent( domEvent );ntttt}nttt}, { useCapture:
this.useCapture } );ntt} );nt}nnt/**nt * Calls `Document#fire()` if
observer {@link isEnabled is enabled}.nt *nt * @see
module:utils/emittermixin~EmitterMixin#firent * @param {String} eventType
The event type (name).nt * @param {Event} domEvent The DOM event.nt *
@param {Object} [additionalData] The additional data which should extend
thent * {@link module:engine/view/observer/domeventdata~DomEventData event
data} object.nt */ntfire( eventType, domEvent, additionalData ) {nttif (
this.isEnabled ) {ntttthis.document.fire( eventType, new DomEventData(
this.view, domEvent, additionalData ) );ntt}nt}n}nnnn//////////////////n//
WEBPACK FOOTERn//
../ckeditor5-engine/src/view/observer/domeventobserver.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module engine/view/observer/keyobservern
*/nnimport DomEventObserver from &#39;./domeventobserver&#39;;nimport {
getCode } from &#39;@ckeditor/ckeditor5-utils/src/keyboard&#39;;nn/**n *
{@link module:engine/view/document~Document#event:keydown Key down} event
observer.n *n * Note that this observer is attached by the {@link
module:engine/view/view~View} and is available by default.n *n * @extends
module:engine/view/observer/domeventobserver~DomEventObservern */nexport
default class KeyObserver extends DomEventObserver {ntconstructor( view )
{nttsuper( view );nnttthis.domEventType = [ &#39;keydown&#39;,
&#39;keyup&#39; ];nt}nntonDomEvent( domEvt ) {nttthis.fire( domEvt.type,
domEvt, {ntttkeyCode: domEvt.keyCode,nntttaltKey:
domEvt.altKey,ntttctrlKey: domEvt.ctrlKey || domEvt.metaKey,ntttshiftKey:
domEvt.shiftKey,nntttget keystroke() {nttttreturn getCode( this );nttt}ntt}
);nt}n}nn/**n * Fired when a key has been pressed.n *n * Introduced by
{@link module:engine/view/observer/keyobserver~KeyObserver}.n *n * Note
that because {@link module:engine/view/observer/keyobserver~KeyObserver} is
attached by then * {@link module:engine/view/view~View} this event is
available by default.n *n * @see
module:engine/view/observer/keyobserver~KeyObservern * @event
module:engine/view/document~Document#event:keydownn * @param
{module:engine/view/observer/keyobserver~KeyEventData} keyEventDatan
*/nn/**n * Fired when a key has been released.n *n * Introduced by {@link
module:engine/view/observer/keyobserver~KeyObserver}.n *n * Note that
because {@link module:engine/view/observer/keyobserver~KeyObserver} is
attached by then * {@link module:engine/view/view~View} this event is
available by default.n *n * @see
module:engine/view/observer/keyobserver~KeyObservern * @event
module:engine/view/document~Document#event:keyupn * @param
{module:engine/view/observer/keyobserver~KeyEventData} keyEventDatan
*/nn/**n * The value of both events - {@link
module:engine/view/document~Document#event:keydown} andn * {@link
module:engine/view/document~Document#event:keyup}.n *n * @class
module:engine/view/observer/keyobserver~KeyEventDatan * @extends
module:engine/view/observer/domeventdata~DomEventDatan * @implements
module:utils/keyboard~KeystrokeInfon */nn/**n * Code of the whole
keystroke. See {@link module:utils/keyboard~getCode}.n *n * @readonlyn *
@member {Number}
module:engine/view/observer/keyobserver~KeyEventData#keystroken
*/nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/view/observer/keyobserver.jsn// module id = nulln//
module chunks = “,”/**n * Gets the timestamp of the number of milliseconds
that have elapsed sincen * the Unix epoch (1 January 1970 00:00:00 UTC).n
*n * @staticn * @memberOf _n * @since 2.4.0n * @type {Function}n *
@category Daten * @returns {number} Returns the timestamp.n * @examplen *n
* _.defer(function(stamp) {n *   console.log(_.now() - stamp);n * },
_.now());n * // =&gt; Logs the number of milliseconds it took for the
deferred function to be invoked.n */nvar now = Date.now;nnexport default
now;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/now.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module engine/view/observer/selectionobservern */nn/* global setInterval,
clearInterval */nnimport Observer from &#39;./observer&#39;;nimport
MutationObserver from &#39;./mutationobserver&#39;;nimport log from
&#39;@ckeditor/ckeditor5-utils/src/log&#39;;nimport debounce from
&#39;@ckeditor/ckeditor5-utils/src/lib/lodash/debounce&#39;;nn/**n *
Selection observer class observes selection changes in the document. If
selection changes on the document thisn * observer checks if there are any
mutations and if DOM selection is different than then * {@link
module:engine/view/document~Document#selection view selection}. Selection
observer firesn * {@link
module:engine/view/document~Document#event:selectionChange} event only if
selection change was the only change in the documentn * and DOM selection
is different then the view selection.n *n * Note that this observer is
attached by the {@link module:engine/view/view~View} and is available by
default.n *n * @see
module:engine/view/observer/mutationobserver~MutationObservern * @extends
module:engine/view/observer/observer~Observern */nexport default class
SelectionObserver extends Observer {ntconstructor( view ) {nttsuper( view
);nntt/**ntt * Instance of the mutation observer. Selection observer
callsntt * {@link
module:engine/view/observer/mutationobserver~MutationObserver#flush} to
ensure that the mutations will be handledntt * before the {@link
module:engine/view/document~Document#event:selectionChange} event is
fired.ntt *ntt * @readonlyntt * @member
{module:engine/view/observer/mutationobserver~MutationObserver}ntt *
module:engine/view/observer/selectionobserver~SelectionObserver#mutationObserverntt
*/nttthis.mutationObserver = view.getObserver( MutationObserver
);nntt/**ntt * Reference to the view {@link
module:engine/view/documentselection~DocumentSelection} object used to
comparentt * new selection with it.ntt *ntt * @readonlyntt * @member
{module:engine/view/documentselection~DocumentSelection}ntt *
module:engine/view/observer/selectionobserver~SelectionObserver#selectionntt
*/nttthis.selection = this.document.selection;nntt/* eslint-disable max-len
*/ntt/**ntt * Reference to the {@link
module:engine/view/view~View#domConverter}.ntt *ntt * @readonlyntt *
@member {module:engine/view/domconverter~DomConverter}
module:engine/view/observer/selectionobserver~SelectionObserver#domConverterntt
*/ntt/* eslint-enable max-len */nttthis.domConverter =
view.domConverter;nntt/**ntt * Set of documents which have added
"selectionchange&quot; listener to avoid adding listener twice to the
samentt * document.ntt *ntt * @privatentt * @member
{WeakSet.&lt;Document&gt;}
module:engine/view/observer/selectionobserver~SelectionObserver#_documentsntt
*/nttthis._documents = new WeakSet();nntt/**ntt * Fires debounced event
`selectionChangeDone`. It uses `lodash#debounce` method to delay function
call.ntt *ntt * @privatentt * @param {Object} data Selection change
data.ntt * @method #_fireSelectionChangeDoneDebouncedntt
*/nttthis._fireSelectionChangeDoneDebounced = debounce( data =&gt;
this.document.fire( &#39;selectionChangeDone&#39;, data ), 200
);nnttthis._clearInfiniteLoopInterval = setInterval( () =&gt;
this._clearInfiniteLoop(), 1000 );nntt/**ntt * Private property to check if
the code does not enter infinite loop.ntt *ntt * @privatentt * @member
{Number}
module:engine/view/observer/selectionobserver~SelectionObserver#_loopbackCounterntt
*/nttthis._loopbackCounter = 0;nt}nnt/**nt * @inheritDocnt */ntobserve(
domElement ) {nttconst domDocument = domElement.ownerDocument;nntt// Add
listener once per each document.nttif ( this._documents.has( domDocument )
) {ntttreturn;ntt}nnttthis.listenTo( domDocument,
&#39;selectionchange&#39;, () =&gt; {ntttthis._handleSelectionChange(
domDocument );ntt} );nnttthis._documents.add( domDocument );nt}nnt/**nt *
@inheritDocnt */ntdestroy() {nttsuper.destroy();nnttclearInterval(
this._clearInfiniteLoopInterval
);nttthis._fireSelectionChangeDoneDebounced.cancel();nt}nnt/**nt *
Selection change listener. {@link
module:engine/view/observer/mutationobserver~MutationObserver#flush Flush}
mutations, check ifnt * selection changes and fires {@link
module:engine/view/document~Document#event:selectionChange} event on every
changent * and {@link
module:engine/view/document~Document#event:selectionChangeDone} when
selection stop changing.nt *nt * @privatent * @param {Document} domDocument
DOM document.nt */nt_handleSelectionChange( domDocument ) {ntt// Selection
is handled when document is not focused but is read-only. This is because
in read-onlyntt// mode contenteditable is set as false and editor won&#39;t
receive focus but we still need to knowntt// selection position.nttif (
!this.isEnabled || ( !this.document.isFocused &amp;&amp;
!this.document.isReadOnly ) ) {ntttreturn;ntt}nntt// Ensure the mutation
event will be before selection event on all
browsers.nttthis.mutationObserver.flush();nntt// If there were mutations
then the view will be re-rendered by the mutation observer and
selectionntt// will be updated, so selections will equal and event will not
be fired, as expected.nttconst domSelection =
domDocument.defaultView.getSelection();nttconst newViewSelection =
this.domConverter.domSelectionToView( domSelection );nnttif (
this.selection.isEqual( newViewSelection ) &amp;&amp;
this.domConverter.isDomSelectionCorrect( domSelection ) )
{ntttreturn;ntt}nntt// Ensure we are not in the infinite loop (#400).ntt//
This counter is reset each second. 60 selection changes in 1 second is
enough high numberntt// to be very difficult (impossible) to achieve using
just keyboard keys (during normal editor use).nttif (
++this._loopbackCounter &gt; 60 ) {nttt/**nttt * Selection change observer
detected an infinite rendering loop.nttt * Most probably you try to put the
selection in the position which is not allowednttt * by the browser and
browser fixes it automatically what causes `selectionchange` event onnttt *
which a loopback through a model tries to re-render the wrong selection and
again.nttt *nttt * @error selectionchange-infinite-loopnttt */ntttlog.warn(
&#39;selectionchange-infinite-loop: Selection change observer detected an
infinite rendering loop.&#39; );nntttreturn;ntt}nnttif (
this.selection.isSimilar( newViewSelection ) ) {nttt// If selection was
equal and we are at this point of algorithm, it means that it was
incorrect.nttt// Just re-render it, no need to fire any events,
etc.ntttthis.view.render();ntt} else {ntttconst data = {nttttoldSelection:
this.selection,nttttnewSelection:
newViewSelection,nttttdomSelectionnttt};nnttt// Prepare data for new
selection and fire appropriate events.ntttthis.document.fire(
&#39;selectionChange&#39;, data );nnttt// Call`
#_fireSelectionChangeDoneDebounced` every time when `selectionChange` event
is fired.nttt// This function is debounced what means that
`selectionChangeDone` event will be fired only whennttt// defined int the
function time will elapse since the last time the function was
called.nttt// So `selectionChangeDone` will be fired when selection will
stop changing.ntttthis._fireSelectionChangeDoneDebounced( data
);ntt}nt}nnt/**nt * Clears `SelectionObserver` internal properties
connected with preventing infinite loop.nt *nt * @protectednt
*/nt_clearInfiniteLoop() {nttthis._loopbackCounter = 0;nt}n}nn/**n * Fired
when selection has changed. This event is fired only when the selection
change was the only change that happenedn * in the document, and old
selection is different then the new selection.n *n * Introduced by {@link
module:engine/view/observer/selectionobserver~SelectionObserver}.n *n *
Note that because {@link
module:engine/view/observer/selectionobserver~SelectionObserver} is
attached by then * {@link module:engine/view/view~View} this event is
available by default.n *n * @see
module:engine/view/observer/selectionobserver~SelectionObservern * @event
module:engine/view/document~Document#event:selectionChangen * @param
{Object} datan * @param
{module:engine/view/documentselection~DocumentSelection} data.oldSelection
Old View selection which isn * {@link
module:engine/view/document~Document#selection}.n * @param
{module:engine/view/selection~Selection} data.newSelection New View
selection which is converted DOM selection.n * @param {Selection}
data.domSelection Native DOM selection.n */nn/**n * Fired when selection
stops changing.n *n * Introduced by {@link
module:engine/view/observer/selectionobserver~SelectionObserver}.n *n *
Note that because {@link
module:engine/view/observer/selectionobserver~SelectionObserver} is
attached by then * {@link module:engine/view/view~View} this event is
available by default.n *n * @see
module:engine/view/observer/selectionobserver~SelectionObservern * @event
module:engine/view/document~Document#event:selectionChangeDonen * @param
{Object} datan * @param
{module:engine/view/documentselection~DocumentSelection} data.oldSelection
Old View selection which isn * {@link
module:engine/view/document~Document#selection}.n * @param
{module:engine/view/selection~Selection} data.newSelection New View
selection which is converted DOM selection.n * @param {Selection}
data.domSelection Native DOM selection.n */nnnn//////////////////n//
WEBPACK FOOTERn//
../ckeditor5-engine/src/view/observer/selectionobserver.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module engine/view/observer/focusobservern */nn/*
globals setTimeout, clearTimeout */nnimport DomEventObserver from
&#39;./domeventobserver&#39;;nn/**n * {@link
module:engine/view/document~Document#event:focus Focus}n * and {@link
module:engine/view/document~Document#event:blur blur} events observer.n *
Focus observer handle also {@link
module:engine/view/rooteditableelement~RootEditableElement#isFocused
isFocused} property of then * {@link
module:engine/view/rooteditableelement~RootEditableElement root elements}.n
*n * Note that this observer is attached by the {@link
module:engine/view/view~View} and is available by default.n *n * @extends
module:engine/view/observer/domeventobserver~DomEventObservern */nexport
default class FocusObserver extends DomEventObserver {ntconstructor( view )
{nttsuper( view );nnttthis.domEventType = [ &#39;focus&#39;, &#39;blur&#39;
];nttthis.useCapture = true;nttconst document =
this.document;nnttdocument.on( &#39;focus&#39;, () =&gt;
{ntttdocument.isFocused = true;nnttt// Unfortunately native
`selectionchange` event is fired asynchronously.nttt// We need to wait
until `SelectionObserver` handle the event and then render. Otherwise
rendering willnttt// overwrite new DOM selection with selection from the
view.nttt// See <a
href="https://github.com/ckeditor/ckeditor5-engine/issues/795">github.com/ckeditor/ckeditor5-engine/issues/795</a>
for more details.nttt// Long timeout is needed to solve #676 and <a
href="https://github.com/ckeditor/ckeditor5-engine/issues/1157">github.com/ckeditor/ckeditor5-engine/issues/1157</a>
issues.ntttthis._renderTimeoutId = setTimeout( () =&gt; view.render(), 50
);ntt} );nnttdocument.on( &#39;blur&#39;, ( evt, data ) =&gt; {ntttconst
selectedEditable = document.selection.editableElement;nntttif (
selectedEditable === null || selectedEditable === data.target )
{nttttdocument.isFocused = false;nntttt// Re-render the document to update
view elements.nttttview.render();nttt}ntt} );nntt/**ntt * Identifier of the
timeout currently used by focus listener to delay rendering execution.ntt
*ntt * @privatentt * @member {Number} #_renderTimeoutIdntt
*/nt}nntonDomEvent( domEvent ) {nttthis.fire( domEvent.type, domEvent
);nt}nnt/**nt * @inheritDocnt */ntdestroy() {nttif ( this._renderTimeoutId
) {ntttclearTimeout( this._renderTimeoutId
);ntt}nnttsuper.destroy();nt}n}nn/**n * Fired when one of the editables
gets focus.n *n * Introduced by {@link
module:engine/view/observer/focusobserver~FocusObserver}.n *n * Note that
because {@link module:engine/view/observer/focusobserver~FocusObserver} is
attached by then * {@link module:engine/view/view~View} this event is
available by default.n *n * @see
module:engine/view/observer/focusobserver~FocusObservern * @event
module:engine/view/document~Document#event:focusn * @param
{module:engine/view/observer/domeventdata~DomEventData} data Event data.n
*/nn/**n * Fired when one of the editables loses focus.n *n * Introduced by
{@link module:engine/view/observer/focusobserver~FocusObserver}.n *n * Note
that because {@link
module:engine/view/observer/focusobserver~FocusObserver} is attached by
then * {@link module:engine/view/view~View} this event is available by
default.n *n * @see
module:engine/view/observer/focusobserver~FocusObservern * @event
module:engine/view/document~Document#event:blurn * @param
{module:engine/view/observer/domeventdata~DomEventData} data Event data.n
*/nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/view/observer/focusobserver.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module engine/view/observer/compositionobservern
*/nnimport DomEventObserver from &#39;./domeventobserver&#39;;nn/**n *
{@link module:engine/view/document~Document#event:compositionstart
Compositionstart},n * {@link
module:engine/view/document~Document#event:compositionupdate
compositionupdate} andn * {@link
module:engine/view/document~Document#event:compositionend compositionend}
events observer.n *n * Note that this observer is attached by the {@link
module:engine/view/view~View} and is available by default.n *n * @extends
module:engine/view/observer/domeventobserver~DomEventObservern */nexport
default class CompositionObserver extends DomEventObserver {ntconstructor(
view ) {nttsuper( view );nnttthis.domEventType = [
&#39;compositionstart&#39;, &#39;compositionupdate&#39;,
&#39;compositionend&#39; ];nttconst document =
this.document;nnttdocument.on( &#39;compositionstart&#39;, () =&gt;
{ntttdocument.isComposing = true;ntt} );nnttdocument.on(
&#39;compositionend&#39;, () =&gt; {ntttdocument.isComposing = false;ntt}
);nt}nntonDomEvent( domEvent ) {nttthis.fire( domEvent.type, domEvent
);nt}n}nn/**n * Fired when composition starts inside one of the editables.n
*n * Introduced by {@link
module:engine/view/observer/compositionobserver~CompositionObserver}.n *n *
Note that because {@link
module:engine/view/observer/compositionobserver~CompositionObserver} is
attached by then * {@link module:engine/view/view~View} this event is
available by default.n *n * @see
module:engine/view/observer/compositionobserver~CompositionObservern *
@event module:engine/view/document~Document#event:compositionstartn *
@param {module:engine/view/observer/domeventdata~DomEventData} data Event
data.n */nn/**n * Fired when composition is updated inside one of the
editables.n *n * Introduced by {@link
module:engine/view/observer/compositionobserver~CompositionObserver}.n *n *
Note that because {@link
module:engine/view/observer/compositionobserver~CompositionObserver} is
attached by then * {@link module:engine/view/view~View} this event is
available by default.n *n * @see
module:engine/view/observer/compositionobserver~CompositionObservern *
@event module:engine/view/document~Document#event:compositionupdaten *
@param {module:engine/view/observer/domeventdata~DomEventData} data Event
data.n */nn/**n * Fired when composition ends inside one of the editables.n
*n * Introduced by {@link
module:engine/view/observer/compositionobserver~CompositionObserver}.n *n *
Note that because {@link
module:engine/view/observer/compositionobserver~CompositionObserver} is
attached by then * {@link module:engine/view/view~View} this event is
available by default.n *n * @see
module:engine/view/observer/compositionobserver~CompositionObservern *
@event module:engine/view/document~Document#event:compositionendn * @param
{module:engine/view/observer/domeventdata~DomEventData} data Event data.n
*/nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/view/observer/compositionobserver.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module engine/model/textn */nnimport Node from
&#39;./node&#39;;nn/**n * Model text node. Type of {@link
module:engine/model/node~Node node} that contains {@link
module:engine/model/text~Text#data text data}.n *n * *Important:* see
{@link module:engine/model/node~Node} to read about restrictions using
`Text` and `Node` API.n *n * *Note:* keep in mind that `Text` instances
might indirectly got removed from model tree when model is changed.n * This
happens when {@link module:engine/model/writer~Writer model writer} is used
to change model and the text node is merged withn * another text node.
Then, both text nodes are removed and a new text node is inserted into the
model. Because ofn * this behavior, keeping references to `Text` is not
recommended. Instead, consider creatingn * {@link
module:engine/model/liveposition~LivePosition live position} placed before
the text node.n *n * @extends {module:engine/model/node~Node}n */nexport
default class Text extends Node {nt/**nt * Creates a text node.nt *nt *
*Note:* Constructor of this class shouldn&#39;t be used directly in the
code.nt * Use the {@link module:engine/model/writer~Writer#createText}
method instead.nt *nt * @protectednt * @param {String} data Node&#39;s
text.nt * @param {Object} [attrs] Node&#39;s attributes. See {@link
module:utils/tomap~toMap} for a list of accepted values.nt */ntconstructor(
data, attrs ) {nttsuper( attrs );nntt/**ntt * Text data contained in this
text node.ntt *ntt * @protectedntt * @type {String}ntt */nttthis._data =
data || &#39;&#39;;nt}nnt/**nt * @inheritDocnt */ntget offsetSize()
{nttreturn this.data.length;nt}nnt/**nt * Returns a text data contained in
the node.nt *nt * @returns {String}nt */ntget data() {nttreturn
this._data;nt}nnt/**nt * @inheritDocnt */ntis( type ) {nttreturn type ==
&#39;text&#39; || super.is( type );nt}nnt/**nt * Converts `Text` instance
to plain object and returns it.nt *nt * @returns {Object} `Text` instance
converted to plain object.nt */nttoJSON() {nttconst json =
super.toJSON();nnttjson.data = this.data;nnttreturn json;nt}nnt/**nt *
Creates a copy of this text node and returns it. Created text node has same
text data and attributes as original text node.nt *nt * @protectednt *
@returns {module:engine/model/text~Text} `Text` instance created using
given plain object.nt */nt_clone() {nttreturn new Text( this.data,
this.getAttributes() );nt}nnt/**nt * Creates a `Text` instance from given
plain object (i.e. parsed JSON string).nt *nt * @param {Object} json Plain
object to be converted to `Text`.nt * @returns
{module:engine/model/text~Text} `Text` instance created using given plain
object.nt */ntstatic fromJSON( json ) {nttreturn new Text( json.data,
json.attributes );nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/text.jsn// module id = nulln// module chunks
= “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben.
All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
engine/model/textproxyn */nnimport CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nn/**n * `TextProxy`
represents a part of {@link module:engine/model/text~Text text node}.n *n *
Since {@link module:engine/model/position~Position positions} can be placed
between characters of a text node,n * {@link
module:engine/model/range~Range ranges} may contain only parts of text
nodes. When {@link module:engine/model/range~Range#getItemsn * getting
items}n * contained in such range, we need to represent a part of that text
node, since returning the whole text node would be incorrect.n *
`TextProxy` solves this issue.n *n * `TextProxy` has an API similar to
{@link module:engine/model/text~Text Text} and allows to do most of the
common tasks performedn * on model nodes.n *n * *Note:* Some `TextProxy`
instances may represent whole text node, not just a part of it.n * See
{@link module:engine/model/textproxy~TextProxy#isPartial}.n *n * *Note:*
`TextProxy` is not an instance of {@link module:engine/model/node~Node
node}. Keep this in mind when using it as an * parameter of methods.n *n *
*Note:* `TextProxy` is a readonly interface. If you want to perform changes
on model data represented by a `TextProxy`n * use {@link
module:engine/model/writer~Writer model writer API}.n *n * *Note:*
`TextProxy` instances are created on the fly, basing on the current state
of model. Because of this, it isn * highly unrecommended to store
references to `TextProxy` instances. `TextProxy` instances are not
refreshed whenn * model changes, so they might get invalidated. Instead,
consider creating {@link module:engine/model/liveposition~LivePosition
liven * position}.n *n * `TextProxy` instances are created by {@link
module:engine/model/treewalker~TreeWalker model tree walker}. You should
not need to createn * an instance of this class by your own.n */nexport
default class TextProxy {nt/**nt * Creates a text proxy.nt *nt *
@protectednt * @param {module:engine/model/text~Text} textNode Text node
which part is represented by this text proxy.nt * @param {Number}
offsetInText Offset in {@link
module:engine/model/textproxy~TextProxy#textNode text node} from which the
text proxynt * starts.nt * @param {Number} length Text proxy length, that
is how many text node&#39;s characters, starting from `offsetInText` it
represents.nt * @constructornt */ntconstructor( textNode, offsetInText,
length ) {ntt/**ntt * Text node which part is represented by this text
proxy.ntt *ntt * @readonlyntt * @member {module:engine/model/text~Text}ntt
*/nttthis.textNode = textNode;nnttif ( offsetInText &lt; 0 || offsetInText
&gt; textNode.offsetSize ) {nttt/**nttt * Given `offsetInText` value is
incorrect.nttt *nttt * @error model-textproxy-wrong-offsetintextnttt
*/ntttthrow new CKEditorError( &#39;model-textproxy-wrong-offsetintext:
Given offsetInText value is incorrect.&#39; );ntt}nnttif ( length &lt; 0 ||
offsetInText + length &gt; textNode.offsetSize ) {nttt/**nttt * Given
`length` value is incorrect.nttt *nttt * @error
model-textproxy-wrong-lengthnttt */ntttthrow new CKEditorError(
&#39;model-textproxy-wrong-length: Given length value is incorrect.&#39;
);ntt}nntt/**ntt * Text data represented by this text proxy.ntt *ntt *
@readonlyntt * @member {String}ntt */nttthis.data =
textNode.data.substring( offsetInText, offsetInText + length );nntt/**ntt *
Offset in {@link module:engine/model/textproxy~TextProxy#textNode text
node} from which the text proxy starts.ntt *ntt * @readonlyntt * @member
{Number}ntt */nttthis.offsetInText = offsetInText;nt}nnt/**nt * Offset at
which this text proxy starts in it&#39;s parent.nt *nt * @see
module:engine/model/node~Node#startOffsetnt * @readonlynt * @type
{Number}nt */ntget startOffset() {nttreturn this.textNode.startOffset !==
null ? this.textNode.startOffset + this.offsetInText : null;nt}nnt/**nt *
Offset size of this text proxy. Equal to the number of characters
represented by the text proxy.nt *nt * @see
module:engine/model/node~Node#offsetSizent * @readonlynt * @type {Number}nt
*/ntget offsetSize() {nttreturn this.data.length;nt}nnt/**nt * Offset at
which this text proxy ends in it&#39;s parent.nt *nt * @see
module:engine/model/node~Node#endOffsetnt * @readonlynt * @type {Number}nt
*/ntget endOffset() {nttreturn this.startOffset !== null ? this.startOffset
+ this.offsetSize : null;nt}nnt/**nt * Flag indicating whether `TextProxy`
instance covers only part of the original {@link
module:engine/model/text~Text text node}nt * (`true`) or the whole text
node (`false`).nt *nt * This is `false` when text proxy starts at the very
beginning of {@link module:engine/model/textproxy~TextProxy#textNode
textNode}nt * ({@link module:engine/model/textproxy~TextProxy#offsetInText
offsetInText} equals `0`) and text proxy sizes is equal tont * text node
size.nt *nt * @readonlynt * @type {Boolean}nt */ntget isPartial()
{nttreturn this.offsetSize !== this.textNode.offsetSize;nt}nnt/**nt *
Parent of this text proxy, which is same as parent of text node represented
by this text proxy.nt *nt * @readonlynt * @type
{module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment|null}nt
*/ntget parent() {nttreturn this.textNode.parent;nt}nnt/**nt * Root of this
text proxy, which is same as root of text node represented by this text
proxy.nt *nt * @readonlynt * @type
{module:engine/model/node~Node|module:engine/model/documentfragment~DocumentFragment}nt
*/ntget root() {nttreturn this.textNode.root;nt}nnt/**nt * {@link
module:engine/model/document~Document Document} that owns text node
represented by this text proxy or `null` if the text nodent * has no parent
or is inside a {@link module:engine/model/documentfragment~DocumentFragment
DocumentFragment}.nt *nt * @readonlynt * @type
{module:engine/model/document~Document|null}nt */ntget document()
{nttreturn this.textNode.document;nt}nnt/**nt * Checks whether given model
tree object is of given type.nt *nt * Read more in {@link
module:engine/model/node~Node#is}.nt *nt * @param {String} typent *
@returns {Boolean}nt */ntis( type ) {nttreturn type ==
&#39;textProxy&#39;;nt}nnt/**nt * Gets path to this text proxy.nt *nt *
@see module:engine/model/node~Node#getPathnt * @returns
{Array.&lt;Number&gt;}nt */ntgetPath() {nttconst path =
this.textNode.getPath();nnttif ( path.length &gt; 0 ) {ntttpath[
path.length - 1 ] += this.offsetInText;ntt}nnttreturn path;nt}nnt/**nt *
Returns ancestors array of this text proxy.nt *nt * @param {Object} options
Options object.nt * @param {Boolean} [options.includeSelf=false] When set
to `true` this text proxy will be also included in parent&#39;s array.nt *
@param {Boolean} [options.parentFirst=false] When set to `true`, array will
be sorted from text proxy parent to root element,nt * otherwise root
element will be the first item in the array.nt * @returns {Array} Array
with ancestors.nt */ntgetAncestors( options = { includeSelf: false,
parentFirst: false } ) {nttconst ancestors = [];nttlet parent =
options.includeSelf ? this : this.parent;nnttwhile ( parent )
{ntttancestors[ options.parentFirst ? &#39;push&#39; : &#39;unshift&#39; ](
parent );ntttparent = parent.parent;ntt}nnttreturn ancestors;nt}nnt/**nt *
Checks if this text proxy has an attribute for given key.nt *nt * @param
{String} key Key of attribute to check.nt * @returns {Boolean} `true` if
attribute with given key is set on text proxy, `false` otherwise.nt
*/nthasAttribute( key ) {nttreturn this.textNode.hasAttribute( key
);nt}nnt/**nt * Gets an attribute value for given key or `undefined` if
that attribute is not set on text proxy.nt *nt * @param {String} key Key of
attribute to look for.nt * @returns {*} Attribute value or `undefined`.nt
*/ntgetAttribute( key ) {nttreturn this.textNode.getAttribute( key
);nt}nnt/**nt * Returns iterator that iterates over this node&#39;s
attributes. Attributes are returned as arrays containing twont * items.
First one is attribute key and second is attribute value.nt *nt * This
format is accepted by native `Map` object and also can be passed in `Node`
constructor.nt *nt * @returns {Iterable.&lt;*&gt;}nt */ntgetAttributes()
{nttreturn this.textNode.getAttributes();nt}nnt/**nt * Returns iterator
that iterates over this node&#39;s attribute keys.nt *nt * @returns
{Iterable.&lt;String&gt;}nt */ntgetAttributeKeys() {nttreturn
this.textNode.getAttributeKeys();nt}n}nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-engine/src/model/textproxy.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module engine/model/nodelistn */nnimport Node from
&#39;./node&#39;;nimport CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nn/**n * Provides an
interface to operate on a list of {@link module:engine/model/node~Node
nodes}. `NodeList` is used internallyn * in classes like {@link
module:engine/model/element~Element Element}n * or {@link
module:engine/model/documentfragment~DocumentFragment DocumentFragment}.n
*/nexport default class NodeList {nt/**nt * Creates an empty node list.nt
*nt * @protectednt * @param
{Iterable.&lt;module:engine/model/node~Node&gt;} nodes Nodes contained in
this node list.nt */ntconstructor( nodes ) {ntt/**ntt * Nodes contained in
this node list.ntt *ntt * @privatentt * @member
{Array.&lt;module:engine/model/node~Node&gt;}ntt */nttthis._nodes =
[];nnttif ( nodes ) {ntttthis._insertNodes( 0, nodes );ntt}nt}nnt/**nt *
Iterable interface.nt *nt * Iterates over all nodes contained inside this
node list.nt *nt * @returns
{Iterable.&lt;module:engine/model/node~Node&gt;}nt */nt[ Symbol.iterator
]() {nttreturn this._nodes[ Symbol.iterator ]();nt}nnt/**nt * Number of
nodes contained inside this node list.nt *nt * @readonlynt * @type
{Number}nt */ntget length() {nttreturn this._nodes.length;nt}nnt/**nt * Sum
of {@link module:engine/model/node~Node#offsetSize offset sizes} of all
nodes contained inside this node list.nt *nt * @readonlynt * @type
{Number}nt */ntget maxOffset() {nttreturn this._nodes.reduce( ( sum, node )
=&gt; sum + node.offsetSize, 0 );nt}nnt/**nt * Gets the node at the given
index. Returns `null` if incorrect index was passed.nt *nt * @param
{Number} index Index of node.nt * @returns
{module:engine/model/node~Node|null} Node at given index.nt */ntgetNode(
index ) {nttreturn this._nodes[ index ] || null;nt}nnt/**nt * Returns an
index of the given node. Returns `null` if given node is not inside this
node list.nt *nt * @param {module:engine/model/node~Node} node Child node
to look for.nt * @returns {Number|null} Child node&#39;s index.nt
*/ntgetNodeIndex( node ) {nttconst index = this._nodes.indexOf( node
);nnttreturn index == -1 ? null : index;nt}nnt/**nt * Returns the starting
offset of given node. Starting offset is equal to the sum ofnt *
{module:engine/model/node~Node#offsetSize offset sizes} of all nodes that
are before this node in this node list.nt *nt * @param
{module:engine/model/node~Node} node Node to look for.nt * @returns
{Number|null} Node&#39;s starting offset.nt */ntgetNodeStartOffset( node )
{nttconst index = this.getNodeIndex( node );nnttreturn index === null ?
null : this._nodes.slice( 0, index ).reduce( ( sum, node ) =&gt; sum +
node.offsetSize, 0 );nt}nnt/**nt * Converts index to offset in node list.nt
*nt * Returns starting offset of a node that is at given index. Throws
{@link module:utils/ckeditorerror~CKEditorError CKEditorError}nt *
`model-nodelist-index-out-of-bounds` if given index is less than `0` or
more than {@link length}.nt *nt * @param {Number} index Node&#39;s index.nt
* @returns {Number} Node&#39;s starting offset.nt */ntindexToOffset( index
) {nttif ( index == this._nodes.length ) {ntttreturn
this.maxOffset;ntt}nnttconst node = this._nodes[ index ];nnttif ( !node )
{nttt/**nttt * Given index cannot be found in the node list.nttt *nttt *
@error nodelist-index-out-of-boundsnttt */ntttthrow new CKEditorError(
&#39;model-nodelist-index-out-of-bounds: Given index cannot be found in the
node list.&#39; );ntt}nnttreturn this.getNodeStartOffset( node
);nt}nnt/**nt * Converts offset in node list to index.nt *nt * Returns
index of a node that occupies given offset. Throws {@link
module:utils/ckeditorerror~CKEditorError CKEditorError}nt *
`model-nodelist-offset-out-of-bounds` if given offset is less than `0` or
more than {@link maxOffset}.nt *nt * @param {Number} offset Offset to look
for.nt * @returns {Number} Index of a node that occupies given offset.nt
*/ntoffsetToIndex( offset ) {nttlet totalOffset = 0;nnttfor ( const node of
this._nodes ) {ntttif ( offset &gt;= totalOffset &amp;&amp; offset &lt;
totalOffset + node.offsetSize ) {nttttreturn this.getNodeIndex( node
);nttt}nnttttotalOffset += node.offsetSize;ntt}nnttif ( totalOffset !=
offset ) {nttt/**nttt * Given offset cannot be found in the node list.nttt
*nttt * @error nodelist-offset-out-of-boundsnttt */ntttthrow new
CKEditorError( &#39;model-nodelist-offset-out-of-bounds: Given offset
cannot be found in the node list.&#39; );ntt}nnttreturn
this.length;nt}nnt/**nt * Inserts given nodes at given index.nt *nt *
@protectednt * @param {Number} index Index at which nodes should be
inserted.nt * @param {Iterable.&lt;module:engine/model/node~Node&gt;} nodes
Nodes to be inserted.nt */nt_insertNodes( index, nodes ) {ntt//
Validation.nttfor ( const node of nodes ) {ntttif ( !( node instanceof Node
) ) {ntttt/**ntttt * Trying to insert an object which is not a Node
instance.ntttt *ntttt * @error nodelist-insertNodes-not-nodentttt
*/nttttthrow new CKEditorError( &#39;model-nodelist-insertNodes-not-node:
Trying to insert an object which is not a Node instance.&#39;
);nttt}ntt}nnttthis._nodes.splice( index, 0, …nodes );nt}nnt/**nt * Removes
one or more nodes starting at the given index.nt *nt * @protectednt *
@param {Number} indexStart Index of the first node to remove.nt * @param
{Number} [howMany=1] Number of nodes to remove.nt * @returns
{Array.&lt;module:engine/model/node~Node&gt;} Array containing removed
nodes.nt */nt_removeNodes( indexStart, howMany = 1 ) {nttreturn
this._nodes.splice( indexStart, howMany );nt}nnt/**nt * Converts `NodeList`
instance to an array containing nodes that were inserted in the node list.
Nodesnt * are also converted to their plain object representation.nt *nt *
@returns {Array.&lt;module:engine/model/node~Node&gt;} `NodeList` instance
converted to `Array`.nt */nttoJSON() {nttreturn this._nodes.map( node =&gt;
node.toJSON() );nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/nodelist.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module engine/model/positionn */nnimport TreeWalker from
&#39;./treewalker&#39;;nimport last from
&#39;@ckeditor/ckeditor5-utils/src/lib/lodash/last&#39;;nimport
compareArrays from
&#39;@ckeditor/ckeditor5-utils/src/comparearrays&#39;;nimport CKEditorError
from &#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nimport Text
from &#39;./text&#39;;nn/**n * Represents a position in the model tree.n *n
* *Note:* Position is based on offsets, not indexes. This means that
position in element containing two text nodesn * with data `foo` and `bar`,
position between them has offset `3`, not `1`.n * See {@link
module:engine/model/position~Position#path} for more.n *n * Since position
in a model is represented by a {@link
module:engine/model/position~Position#root position root} andn * {@link
module:engine/model/position~Position#path position path} it is possible to
create positions placed in non-existing elements.n * This requirement is
important for {@link module:engine/model/operation/transform~transform
operational transformation}.n *n * Also, {@link
module:engine/model/operation/operation~Operation operations}n * kept in
{@link module:engine/model/document~Document#history document history}n *
are storing positions (and ranges) which were correct when those operations
were applied, but may not be correctn * after document got changed.n *n *
When changes are applied to model, it may also happen that {@link
module:engine/model/position~Position#parent position parent}n * will
change even if position path has not changed. Keep in mind, that if a
position leads to non-existing element,n * {@link
module:engine/model/position~Position#parent} and some other properties and
methods will throw errors.n *n * In most cases, position with wrong path is
caused by an error in code, but it is sometimes needed, as described
above.n */nexport default class Position {nt/**nt * Creates a position.nt
*nt * @param
{module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment}
root Root of the position.nt * @param {Array.&lt;Number&gt;} path Position
path. See {@link module:engine/model/position~Position#path}.nt
*/ntconstructor( root, path ) {nttif ( !root.is( &#39;element&#39; )
&amp;&amp; !root.is( &#39;documentFragment&#39; ) ) {nttt/**nttt * Position
root is invalid.nttt *nttt * Positions can only be anchored in elements or
document fragments.nttt *nttt * @error model-position-root-invalidnttt
*/ntttthrow new CKEditorError( &#39;model-position-root-invalid: Position
root invalid.&#39; );ntt}nnttif ( !( path instanceof Array ) || path.length
=== 0 ) {nttt/**nttt * Position path must be an array with at least one
item.nttt *nttt * @error model-position-path-incorrectnttt * @param
pathnttt */ntttthrow new CKEditorError( &#39;model-position-path-incorrect:
Position path must be an array with at least one item.&#39;, { path }
);ntt}nntt// Normalize the root and path (if element was passed).nttpath =
root.getPath().concat( path );nttroot = root.root;nntt/**ntt * Root of the
position path.ntt *ntt * @readonlyntt * @member
{module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment}ntt
* module:engine/model/position~Position#rootntt */nttthis.root =
root;nntt/**ntt * Position of the node in the tree. **Path contains
offsets, not indexes.**ntt *ntt * Position can be placed before, after or
in a {@link module:engine/model/node~Node node} if that node hasntt *
{@link module:engine/model/node~Node#offsetSize} greater than `1`. Items in
position path arentt * {@link module:engine/model/node~Node#startOffset
starting offsets} of position ancestors, starting from direct root
children,ntt * down to the position offset in it&#39;s parent.ntt *ntt *tt
ROOTntt *tt  |- P            before: [ 0 ]         after: [ 1 ]ntt *tt  |-
UL           before: [ 1 ]         after: [ 2 ]ntt *tt     |- LI       
before: [ 1, 0 ]      after: [ 1, 1 ]ntt *tt     |  |- foo    before: [ 1,
0, 0 ]   after: [ 1, 0, 3 ]ntt *tt     |- LI        before: [ 1, 1 ]     
after: [ 1, 2 ]ntt *tt        |- bar    before: [ 1, 1, 0 ]   after: [ 1,
1, 3 ]ntt *ntt * `foo` and `bar` are representing {@link
module:engine/model/text~Text text nodes}. Since text nodes has offset
sizentt * greater than `1` you can place position offset between their
start and end:ntt *ntt *tt ROOTntt *tt  |- Pntt *tt  |- ULntt *tt     |-
LIntt *tt     |  |- f^o|o  ^ has path: [ 1, 0, 1 ]   | has path: [ 1, 0, 2
]ntt *tt     |- LIntt *tt        |- b^a|r  ^ has path: [ 1, 1, 1 ]   | has
path: [ 1, 1, 2 ]ntt *ntt * @readonlyntt * @member {Array.&lt;Number&gt;}
module:engine/model/position~Position#pathntt */nttthis.path =
path;nt}nnt/**nt * Offset at which this position is located in its {@link
module:engine/model/position~Position#parent parent}. It is equalnt * to
the last item in position {@link module:engine/model/position~Position#path
path}.nt *nt * @type {Number}nt */ntget offset() {nttreturn last( this.path
);nt}nnt/**nt * @param {Number} newOffsetnt */ntset offset( newOffset )
{nttthis.path[ this.path.length - 1 ] = newOffset;nt}nnt/**nt * Parent
element of this position.nt *nt * Keep in mind that `parent` value is
calculated when the property is accessed.nt * If {@link
module:engine/model/position~Position#path position path}nt * leads to a
non-existing element, `parent` property will throw error.nt *nt * Also it
is a good idea to cache `parent` property if it is used frequently in an
algorithm (i.e. in a long loop).nt *nt * @readonlynt * @type
{module:engine/model/element~Element}nt */ntget parent() {nttlet parent =
this.root;nnttfor ( let i = 0; i &lt; this.path.length - 1; i++ )
{ntttparent = parent.getChild( parent.offsetToIndex( this.path[ i ] )
);ntt}nnttreturn parent;nt}nnt/**nt * Position {@link
module:engine/model/position~Position#offset offset} converted to an index
in position&#39;s parent node. It isnt * equal to the {@link
module:engine/model/node~Node#index index} of a node after this position.
If position is placednt * in text node, position index is equal to the
index of that text node.nt *nt * @readonlynt * @type {Number}nt */ntget
index() {nttreturn this.parent.offsetToIndex( this.offset );nt}nnt/**nt *
Returns {@link module:engine/model/text~Text text node} instance in which
this position is placed or `null` if thisnt * position is not in a text
node.nt *nt * @readonlynt * @type {module:engine/model/text~Text|null}nt
*/ntget textNode() {nttconst node = this.parent.getChild( this.index
);nnttreturn ( node instanceof Text &amp;&amp; node.startOffset &lt;
this.offset ) ? node : null;nt}nnt/**nt * Node directly after this position
or `null` if this position is in text node.nt *nt * @readonlynt * @type
{module:engine/model/node~Node|null}nt */ntget nodeAfter() {nttreturn
this.textNode === null ? this.parent.getChild( this.index ) :
null;nt}nnt/**nt * Node directly before this position or `null` if this
position is in text node.nt *nt * @readonlynt * @type {Node}nt */ntget
nodeBefore() {nttreturn this.textNode === null ? this.parent.getChild(
this.index - 1 ) : null;nt}nnt/**nt * Is `true` if position is at the
beginning of its {@link module:engine/model/position~Position#parent
parent}, `false` otherwise.nt *nt * @readonlynt * @type {Boolean}nt */ntget
isAtStart() {nttreturn this.offset === 0;nt}nnt/**nt * Is `true` if
position is at the end of its {@link
module:engine/model/position~Position#parent parent}, `false` otherwise.nt
*nt * @readonlynt * @type {Boolean}nt */ntget isAtEnd() {nttreturn
this.offset == this.parent.maxOffset;nt}nnt/**nt * Checks whether this
position is before or after given position.nt *nt * @param
{module:engine/model/position~Position} otherPosition Position to compare
with.nt * @returns {module:engine/model/position~PositionRelation}nt
*/ntcompareWith( otherPosition ) {nttif ( this.root != otherPosition.root )
{ntttreturn &#39;different&#39;;ntt}nnttconst result = compareArrays(
this.path, otherPosition.path );nnttswitch ( result ) {ntttcase
&#39;same&#39;:nttttreturn &#39;same&#39;;nntttcase
&#39;prefix&#39;:nttttreturn &#39;before&#39;;nntttcase
&#39;extension&#39;:nttttreturn &#39;after&#39;;nntttdefault:nttttreturn
this.path[ result ] &lt; otherPosition.path[ result ] ? &#39;before&#39; :
&#39;after&#39;;ntt}nt}nnt/**nt * Gets the farthest position which matches
the callback usingnt * {@link module:engine/model/treewalker~TreeWalker
TreeWalker}.nt *nt * For example:nt *nt * ttgetLastMatchingPosition( value
=&gt; value.type == &#39;text&#39; );nt * tt//
&lt;paragraph&gt;[]foo&lt;/paragraph&gt; -&gt;
&lt;paragraph&gt;foo[]&lt;/paragraph&gt;nt *nt * ttgetLastMatchingPosition(
value =&gt; value.type == &#39;text&#39;, { direction: &#39;backward&#39; }
);nt * tt// &lt;paragraph&gt;foo[]&lt;/paragraph&gt; -&gt;
&lt;paragraph&gt;[]foo&lt;/paragraph&gt;nt *nt * ttgetLastMatchingPosition(
value =&gt; false );nt * tt// Do not move the position.nt *nt * @param
{Function} skip Callback function. Gets {@link
module:engine/model/treewalker~TreeWalkerValue} and shouldnt * return
`true` if the value should be skipped or `false` if not.nt * @param
{Object} options <a href="../../../../Object.html">Object</a> with
configuration options. See {@link
module:engine/model/treewalker~TreeWalker}.nt *nt * @returns
{module:engine/model/position~Position} The position after the last item
which matches the `skip` callback test.nt */ntgetLastMatchingPosition(
skip, options = {} ) {nttoptions.startPosition = this;nnttconst treeWalker
= new TreeWalker( options );ntttreeWalker.skip( skip );nnttreturn
treeWalker.position;nt}nnt/**nt * Returns a path to this position&#39;s
parent. Parent path is equal to position {@link
module:engine/model/position~Position#path path}nt * but without the last
item.nt *nt * This method returns the parent path even if the parent does
not exists.nt *nt * @returns {Array.&lt;Number&gt;} Path to the parent.nt
*/ntgetParentPath() {nttreturn this.path.slice( 0, -1 );nt}nnt/**nt *
Returns ancestors array of this position, that is this position&#39;s
parent and its ancestors.nt *nt * @returns
{Array.&lt;module:engine/model/item~Item&gt;} Array with ancestors.nt
*/ntgetAncestors() {nttif ( this.parent.is( &#39;documentFragment&#39; ) )
{ntttreturn [ this.parent ];ntt} else {ntttreturn this.parent.getAncestors(
{ includeSelf: true } );ntt}nt}nnt/**nt * Returns the slice of two position
{@link path paths} which is identical. The {@link root roots}nt * of these
two paths must be identical.nt *nt * @param
{module:engine/model/position~Position} position The second position.nt *
@returns {Array.&lt;Number&gt;} The common path.nt */ntgetCommonPath(
position ) {nttif ( this.root != position.root ) {ntttreturn [];ntt}nntt//
We find on which tree-level start and end have the lowest common
ancestornttconst cmp = compareArrays( this.path, position.path );ntt// If
comparison returned string it means that arrays are same.nttconst diffAt =
( typeof cmp == &#39;string&#39; ) ? Math.min( this.path.length,
position.path.length ) : cmp;nnttreturn this.path.slice( 0, diffAt
);nt}nnt/**nt * Returns an {@link module:engine/model/element~Element} or
{@link module:engine/model/documentfragment~DocumentFragment}nt * which is
a common ancestor of both positions. The {@link root roots} of these two
positions must be identical.nt *nt * @param
{module:engine/model/position~Position} position The second position.nt *
@returns
{module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment|null}nt
*/ntgetCommonAncestor( position ) {nttconst ancestorsA =
this.getAncestors();nttconst ancestorsB = position.getAncestors();nnttlet i
= 0;nnttwhile ( ancestorsA[ i ] == ancestorsB[ i ] &amp;&amp; ancestorsA[ i
] ) {nttti++;ntt}nnttreturn i === 0 ? null : ancestorsA[ i - 1
];nt}nnt/**nt * Returns a new instance of `Position`, that has same {@link
parent parent} but it&#39;s offsetnt * is shifted by `shift` value (can be
a negative value).nt *nt * @param {Number} shift Offset shift. Can be a
negative value.nt * @returns {module:engine/model/position~Position}
Shifted position.nt */ntgetShiftedBy( shift ) {nttconst shifted =
Position.createFromPosition( this );nnttconst offset = shifted.offset +
shift;nttshifted.offset = offset &lt; 0 ? 0 : offset;nnttreturn
shifted;nt}nnt/**nt * Checks whether this position is after given
position.nt *nt * @see module:engine/model/position~Position#isBeforent *nt
* @param {module:engine/model/position~Position} otherPosition Position to
compare with.nt * @returns {Boolean} True if this position is after given
position.nt */ntisAfter( otherPosition ) {nttreturn this.compareWith(
otherPosition ) == &#39;after&#39;;nt}nnt/**nt * Checks whether this
position is before given position.nt *nt * *Note:* watch out when using
negation of the value returned by this method, because the negation will
alsont * be `true` if positions are in different roots and you might not
expect this. You should probably usent * `a.isAfter( b ) || a.isEqual( b )`
or `!a.isBefore( p ) &amp;&amp; a.root == b.root` in most scenarios. If
yournt * condition uses multiple `isAfter` and `isBefore` checks, build
them so they do not use negated values, i.e.:nt *nt *ttif ( a.isBefore( b )
&amp;&amp; c.isAfter( d ) ) {nt *ttt// do A.nt *tt} else {nt *ttt// do B.nt
*tt}nt *nt * or, if you have only one if-branch:nt *nt *ttif ( !(
a.isBefore( b ) &amp;&amp; c.isAfter( d ) ) {nt *ttt// do B.nt *tt}nt *nt *
rather than:nt *nt *ttif ( !a.isBefore( b ) || &amp;&amp; !c.isAfter( d ) )
{nt *ttt// do B.nt *tt} else {nt *ttt// do A.nt *tt}nt *nt * @param
{module:engine/model/position~Position} otherPosition Position to compare
with.nt * @returns {Boolean} True if this position is before given
position.nt */ntisBefore( otherPosition ) {nttreturn this.compareWith(
otherPosition ) == &#39;before&#39;;nt}nnt/**nt * Checks whether this
position is equal to given position.nt *nt * @param
{module:engine/model/position~Position} otherPosition Position to compare
with.nt * @returns {Boolean} True if positions are same.nt */ntisEqual(
otherPosition ) {nttreturn this.compareWith( otherPosition ) ==
&#39;same&#39;;nt}nnt/**nt * Checks whether this position is touching given
position. Positions touch when there are no text nodesnt * or empty nodes
in a range between them. Technically, those positions are not equal but in
many casesnt * they are very similar or even indistinguishable.nt *nt *
*Note:* this method traverses model document so it can be only used when
range is up-to-date with model document.nt *nt * @param
{module:engine/model/position~Position} otherPosition Position to compare
with.nt * @returns {Boolean} True if positions touch.nt */ntisTouching(
otherPosition ) {nttlet left = null;nttlet right = null;nttconst compare =
this.compareWith( otherPosition );nnttswitch ( compare ) {ntttcase
&#39;same&#39;:nttttreturn true;nntttcase &#39;before&#39;:nttttleft =
Position.createFromPosition( this );nttttright =
Position.createFromPosition( otherPosition );nttttbreak;nntttcase
&#39;after&#39;:nttttleft = Position.createFromPosition( otherPosition
);nttttright = Position.createFromPosition( this
);nttttbreak;nntttdefault:nttttreturn false;ntt}nntt// Cached for
optimization purposes.nttlet leftParent = left.parent;nnttwhile (
left.path.length + right.path.length ) {ntttif ( left.isEqual( right ) )
{nttttreturn true;nttt}nntttif ( left.path.length &gt; right.path.length )
{nttttif ( left.offset !== leftParent.maxOffset ) {ntttttreturn
false;ntttt}nnttttleft.path = left.path.slice( 0, -1 );nttttleftParent =
leftParent.parent;nttttleft.offset++;nttt} else {nttttif ( right.offset !==
0 ) {ntttttreturn false;ntttt}nnttttright.path = right.path.slice( 0, -1
);nttt}ntt}nt}nnt/**nt * Returns a copy of this position that is updated by
removing `howMany` nodes starting from `deletePosition`.nt * It may happen
that this position is in a removed node. If that is the case, `null` is
returned instead.nt *nt * @protectednt * @param
{module:engine/model/position~Position} deletePosition Position before the
first removed node.nt * @param {Number} howMany How many nodes are
removed.nt * @returns {module:engine/model/position~Position|null}
Transformed position or `null`.nt */nt_getTransformedByDeletion(
deletePosition, howMany ) {nttconst transformed =
Position.createFromPosition( this );nntt// This position can&#39;t be
affected if deletion was in a different root.nttif ( this.root !=
deletePosition.root ) {ntttreturn transformed;ntt}nnttif ( compareArrays(
deletePosition.getParentPath(), this.getParentPath() ) == &#39;same&#39; )
{nttt// If nodes are removed from the node that is pointed by this
position…ntttif ( deletePosition.offset &lt; this.offset ) {ntttt// And are
removed from before an offset of that position…nttttif (
deletePosition.offset + howMany &gt; this.offset ) {nttttt// Position is in
removed range, it&#39;s no longer in the tree.ntttttreturn null;ntttt} else
{nttttt// Decrement the offset accordingly.nttttttransformed.offset -=
howMany;ntttt}nttt}ntt} else if ( compareArrays(
deletePosition.getParentPath(), this.getParentPath() ) == &#39;prefix&#39;
) {nttt// If nodes are removed from a node that is on a path to this
position…ntttconst i = deletePosition.path.length - 1;nntttif (
deletePosition.offset &lt;= this.path[ i ] ) {ntttt// And are removed from
before next node of that path…nttttif ( deletePosition.offset + howMany
&gt; this.path[ i ] ) {nttttt// If the next node of that path is removed
return nullnttttt// because the node containing this position got
removed.ntttttreturn null;ntttt} else {nttttt// Otherwise, decrement index
on that path.nttttttransformed.path[ i ] -=
howMany;ntttt}nttt}ntt}nnttreturn transformed;nt}nnt/**nt * Returns a copy
of this position that is updated by inserting `howMany` nodes at
`insertPosition`.nt *nt * @protectednt * @param
{module:engine/model/position~Position} insertPosition Position where nodes
are inserted.nt * @param {Number} howMany How many nodes are inserted.nt *
@param {Boolean} insertBefore Flag indicating whether nodes are inserted
before or after `insertPosition`.nt * This is important only when
`insertPosition` and this position are same. If that is the case and the
flag isnt * set to `true`, this position will get transformed. If the flag
is set to `false`, it won&#39;t.nt * @returns
{module:engine/model/position~Position} Transformed position.nt
*/nt_getTransformedByInsertion( insertPosition, howMany, insertBefore )
{nttconst transformed = Position.createFromPosition( this );nntt// This
position can&#39;t be affected if insertion was in a different root.nttif (
this.root != insertPosition.root ) {ntttreturn transformed;ntt}nnttif (
compareArrays( insertPosition.getParentPath(), this.getParentPath() ) ==
&#39;same&#39; ) {nttt// If nodes are inserted in the node that is pointed
by this position…ntttif ( insertPosition.offset &lt; this.offset || (
insertPosition.offset == this.offset &amp;&amp; insertBefore ) ) {ntttt//
And are inserted before an offset of that position…ntttt// "Push&quot; this
positions offset.ntttttransformed.offset += howMany;nttt}ntt} else if (
compareArrays( insertPosition.getParentPath(), this.getParentPath() ) ==
&#39;prefix&#39; ) {nttt// If nodes are inserted in a node that is on a
path to this position…ntttconst i = insertPosition.path.length - 1;nntttif
( insertPosition.offset &lt;= this.path[ i ] ) {ntttt// And are inserted
before next node of that path…ntttt// "Push&quot; the index on that
path.ntttttransformed.path[ i ] += howMany;nttt}ntt}nnttreturn
transformed;nt}nnt/**nt * Returns a copy of this position that is updated
by moving `howMany` nodes from `sourcePosition` to `targetPosition`.nt *nt
* @protectednt * @param {module:engine/model/position~Position}
sourcePosition Position before the first element to move.nt * @param
{module:engine/model/position~Position} targetPosition Position where moved
elements will be inserted.nt * @param {Number} howMany How many consecutive
nodes to move, starting from `sourcePosition`.nt * @param {Boolean}
insertBefore Flag indicating whether moved nodes are pasted before or after
`insertPosition`.nt * This is important only when `targetPosition` and this
position are same. If that is the case and the flag isnt * set to `true`,
this position will get transformed by range insertion. If the flag is set
to `false`, it won&#39;t.nt * @param {Boolean} [sticky] Flag indicating
whether this position "sticks&quot; to range, that is if it should be
movednt * with the moved range if it is equal to one of range&#39;s
boundaries.nt * @returns {module:engine/model/position~Position}
Transformed position.nt */nt_getTransformedByMove( sourcePosition,
targetPosition, howMany, insertBefore, sticky ) {ntt// Moving a range
removes nodes from their original position. We acknowledge this by proper
transformation.nttlet transformed = this._getTransformedByDeletion(
sourcePosition, howMany );nntt// Then we update target position, as it
could be affected by nodes removal too.ntttargetPosition =
targetPosition._getTransformedByDeletion( sourcePosition, howMany );nnttif
( transformed === null || ( sticky &amp;&amp; transformed.isEqual(
sourcePosition ) ) ) {nttt// This position is inside moved range (or sticks
to it).nttt// In this case, we calculate a combination of this position,
move source position and target position.nttttransformed =
this._getCombined( sourcePosition, targetPosition );ntt} else {nttt// This
position is not inside a removed range.nttt// In next step, we simply
reflect inserting `howMany` nodes, which might further affect the
position.nttttransformed = transformed._getTransformedByInsertion(
targetPosition, howMany, insertBefore );ntt}nnttreturn
transformed;nt}nnt/**nt * Returns a new position that is a combination of
this position and given positions.nt *nt * The combined position is a copy
of this position transformed by moving a range starting at `source`
positionnt * to the `target` position. It is expected that this position is
inside the moved range.nt *nt * Example:nt *nt *ttlet original = new
Position( root, [ 2, 3, 1 ] );nt *ttlet source = new Position( root, [ 2, 2
] );nt *ttlet target = new Position( otherRoot, [ 1, 1, 3 ] );nt
*ttoriginal._getCombined( source, target ); // path is [ 1, 1, 4, 1 ], root
is `otherRoot`nt *nt * Explanation:nt *nt * We have a position `[ 2, 3, 1
]` and move some nodes from `[ 2, 2 ]` to `[ 1, 1, 3 ]`. The original
positionnt * was inside moved nodes and now should point to the new place.
The moved nodes will be afternt * positions `[ 1, 1, 3 ]`, `[ 1, 1, 4 ]`,
`[ 1, 1, 5 ]`. Since our position was in the second moved node,nt * the
transformed position will be in a sub-tree of a node at `[ 1, 1, 4 ]`.
Looking at original path, went * took care of `[ 2, 3 ]` part of it. Now we
have to add the rest of the original path to the transformed path.nt *
Finally, the transformed position will point to `[ 1, 1, 4, 1 ]`.nt *nt *
@protectednt * @param {module:engine/model/position~Position} source
Beginning of the moved range.nt * @param
{module:engine/model/position~Position} target Position where the range is
moved.nt * @returns {module:engine/model/position~Position} Combined
position.nt */nt_getCombined( source, target ) {nttconst i =
source.path.length - 1;nntt// The first part of a path to combined position
is a path to the place where nodes were moved.nttconst combined =
Position.createFromPosition( target );nntt// Then we have to update the
rest of the path.nntt// Fix the offset because this position might be after
`from` position and we have to reflect that.nttcombined.offset =
combined.offset + this.path[ i ] - source.offset;nntt// Then, add the rest
of the path.ntt// If this position is at the same level as `from` position
nothing will get added.nttcombined.path = combined.path.concat(
this.path.slice( i + 1 ) );nnttreturn combined;nt}nnt/**nt * Creates
position at the given location. The location can be specified as:nt *nt * *
a {@link module:engine/model/position~Position position},nt * * parent
element and offset (offset defaults to `0`),nt * * parent element and
`&#39;end&#39;` (sets position at the end of that element),nt * * {@link
module:engine/model/item~Item model item} and `&#39;before&#39;` or
`&#39;after&#39;` (sets position before or after given model item).nt *nt *
This method is a shortcut to other constructors such as:nt *nt * * {@link
module:engine/model/position~Position.createBefore},nt * * {@link
module:engine/model/position~Position.createAfter},nt * * {@link
module:engine/model/position~Position.createFromParentAndOffset},nt * *
{@link module:engine/model/position~Position.createFromPosition}.nt *nt *
@param
{module:engine/model/item~Item|module:engine/model/position~Position}
itemOrPositionnt * @param
{Number|&#39;end&#39;|&#39;before&#39;|&#39;after&#39;} [offset=0] Offset
or one of the flags. Used only whennt * first parameter is a {@link
module:engine/model/item~Item model item}.nt */ntstatic createAt(
itemOrPosition, offset ) {nttif ( itemOrPosition instanceof Position )
{ntttreturn this.createFromPosition( itemOrPosition );ntt} else {ntttconst
node = itemOrPosition;nntttif ( offset == &#39;end&#39; ) {nttttoffset =
node.maxOffset;nttt} else if ( offset == &#39;before&#39; ) {nttttreturn
this.createBefore( node );nttt} else if ( offset == &#39;after&#39; )
{nttttreturn this.createAfter( node );nttt} else if ( !offset )
{nttttoffset = 0;nttt}nntttreturn this.createFromParentAndOffset( node,
offset );ntt}nt}nnt/**nt * Creates a new position, after given {@link
module:engine/model/item~Item model item}.nt *nt * @param
{module:engine/model/item~Item} item Item after which the position should
be placed.nt * @returns {module:engine/model/position~Position}nt
*/ntstatic createAfter( item ) {nttif ( !item.parent ) {nttt/**nttt * You
can not make a position after a root element.nttt *nttt * @error
model-position-after-rootnttt * @param {module:engine/model/item~Item}
rootnttt */ntttthrow new CKEditorError( &#39;model-position-after-root: You
cannot make a position after root.&#39;, { root: item } );ntt}nnttreturn
this.createFromParentAndOffset( item.parent, item.endOffset );nt}nnt/**nt *
Creates a new position, before the given {@link
module:engine/model/item~Item model item}.nt *nt * @param
{module:engine/model/item~Item} item Item before which the position should
be placed.nt * @returns {module:engine/model/position~Position}nt
*/ntstatic createBefore( item ) {nttif ( !item.parent ) {nttt/**nttt * You
can not make a position before a root element.nttt *nttt * @error
model-position-before-rootnttt * @param {module:engine/model/item~Item}
rootnttt */ntttthrow new CKEditorError( &#39;model-position-before-root:
You cannot make a position before root.&#39;, { root: item }
);ntt}nnttreturn this.createFromParentAndOffset( item.parent,
item.startOffset );nt}nnt/**nt * Creates a new position from the parent
element and an offset in that element.nt *nt * @param
{module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment}
parent Position&#39;s parent.nt * @param {Number} offset Position&#39;s
offset.nt * @returns {module:engine/model/position~Position}nt */ntstatic
createFromParentAndOffset( parent, offset ) {nttif ( !parent.is(
&#39;element&#39; ) &amp;&amp; !parent.is( &#39;documentFragment&#39; ) )
{nttt/**nttt * Position parent have to be a model element or model document
fragment.nttt *nttt * @error model-position-parent-incorrectnttt
*/ntttthrow new CKEditorError( &#39;model-position-parent-incorrect:
Position parent have to be a element or document fragment.&#39;
);ntt}nnttconst path = parent.getPath();nnttpath.push( offset );nnttreturn
new this( parent.root, path );nt}nnt/**nt * Creates a new position, which
is equal to passed position.nt *nt * @param
{module:engine/model/position~Position} position Position to be cloned.nt *
@returns {module:engine/model/position~Position}nt */ntstatic
createFromPosition( position ) {nttreturn new this( position.root,
position.path.slice() );nt}nnt/**nt * Creates a `Position` instance from
given plain object (i.e. parsed JSON string).nt *nt * @param {Object} json
Plain object to be converted to `Position`.nt * @returns
{module:engine/model/position~Position} `Position` instance created using
given plain object.nt */ntstatic fromJSON( json, doc ) {nttif ( json.root
=== &#39;$graveyard&#39; ) {ntttreturn new Position( doc.graveyard,
json.path );ntt}nnttif ( !doc.getRoot( json.root ) ) {nttt/**nttt * Cannot
create position for document. Root with specified name does not exist.nttt
*nttt * @error model-position-fromjson-no-rootnttt * @param {String}
rootNamenttt */ntttthrow new
CKEditorError(ntttt&#39;model-position-fromjson-no-root: Cannot create
position for document. Root with specified name does not exist.&#39;,ntttt{
rootName: json.root }nttt);ntt}nnttreturn new Position( doc.getRoot(
json.root ), json.path );nt}n}nn/**n * A flag indicating whether this
position is `&#39;before&#39;` or `&#39;after&#39;` or `&#39;same&#39;` as
given position.n * If positions are in different roots
`&#39;different&#39;` flag is returned.n *n * @typedef {String}
module:engine/model/position~PositionRelationn */nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-engine/src/model/position.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module engine/model/rangen */nnimport Position
from &#39;./position&#39;;nimport TreeWalker from
&#39;./treewalker&#39;;nimport CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nn/**n * Range class.
Range is iterable.n */nexport default class Range {nt/**nt * Creates a
range spanning from `start` position to `end` position.nt *nt * *Note:*
Constructor creates it&#39;s own {@link
module:engine/model/position~Position Position} instances basing on passed
values.nt *nt * @param {module:engine/model/position~Position} start Start
position.nt * @param {module:engine/model/position~Position} [end] End
position. If not set, range will be collapsed at `start` position.nt
*/ntconstructor( start, end = null ) {ntt/**ntt * Start position.ntt *ntt *
@readonlyntt * @member {module:engine/model/position~Position}ntt
*/nttthis.start = Position.createFromPosition( start );nntt/**ntt * End
position.ntt *ntt * @readonlyntt * @member
{module:engine/model/position~Position}ntt */nttthis.end = end ?
Position.createFromPosition( end ) : Position.createFromPosition( start
);nt}nnt/**nt * Iterable interface.nt *nt * Iterates over all {@link
module:engine/model/item~Item items} that are in this range and returnsnt *
them together with additional information like length or {@link
module:engine/model/position~Position positions},nt * grouped as {@link
module:engine/model/treewalker~TreeWalkerValue}.nt * It iterates over all
{@link module:engine/model/textproxy~TextProxy text contents} that are
inside the rangent * and all the {@link
module:engine/model/element~Element}s that are entered into when iterating
over this range.nt *nt * This iterator uses {@link
module:engine/model/treewalker~TreeWalker} with `boundaries` set to this
rangent * and `ignoreElementEnd` option set to `true`.nt *nt * @returns
{Iterable.&lt;module:engine/model/treewalker~TreeWalkerValue&gt;}nt */nt* [
Symbol.iterator ]() {nttyield* new TreeWalker( { boundaries: this,
ignoreElementEnd: true } );nt}nnt/**nt * Returns whether the range is
collapsed, that is if {@link start} andnt * {@link end} positions are
equal.nt *nt * @type {Boolean}nt */ntget isCollapsed() {nttreturn
this.start.isEqual( this.end );nt}nnt/**nt * Returns whether this range is
flat, that is if {@link start} position andnt * {@link end} position are in
the same {@link module:engine/model/position~Position#parent}.nt *nt *
@type {Boolean}nt */ntget isFlat() {nttreturn this.start.parent ===
this.end.parent;nt}nnt/**nt * Range root element.nt *nt * @type
{module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment}nt
*/ntget root() {nttreturn this.start.root;nt}nnt/**nt * Checks whether this
range contains given {@link module:engine/model/position~Position
position}.nt *nt * @param {module:engine/model/position~Position} position
Position to check.nt * @returns {Boolean} `true` if given {@link
module:engine/model/position~Position position} is containednt * in this
range,`false` otherwise.nt */ntcontainsPosition( position ) {nttreturn
position.isAfter( this.start ) &amp;&amp; position.isBefore( this.end
);nt}nnt/**nt * Checks whether this range contains given {@link ~Range
range}.nt *nt * @param {module:engine/model/range~Range} otherRange Range
to check.nt * @param {Boolean} [loose=false] Whether the check is loose or
strict. If the check is strict (`false`), compared range cannotnt * start
or end at the same position as this range boundaries. If the check is loose
(`true`), compared range can start, end ornt * even be equal to this range.
Note that collapsed ranges are always compared in strict mode.nt * @returns
{Boolean} `true` if given {@link ~Range range} boundaries are contained by
this range, `false` otherwise.nt */ntcontainsRange( otherRange, loose =
false ) {nttif ( otherRange.isCollapsed ) {ntttloose = false;ntt}nnttconst
containsStart = this.containsPosition( otherRange.start ) || ( loose
&amp;&amp; this.start.isEqual( otherRange.start ) );nttconst containsEnd =
this.containsPosition( otherRange.end ) || ( loose &amp;&amp;
this.end.isEqual( otherRange.end ) );nnttreturn containsStart &amp;&amp;
containsEnd;nt}nnt/**nt * Checks whether given {@link
module:engine/model/item~Item} is inside this range.nt *nt * @param
{module:engine/model/item~Item} item Model item to check.nt
*/ntcontainsItem( item ) {nttconst pos = Position.createBefore( item
);nnttreturn this.containsPosition( pos ) || this.start.isEqual( pos
);nt}nnt/**nt * Two ranges are equal if their {@link start} and {@link end}
positions are equal.nt *nt * @param {module:engine/model/range~Range}
otherRange Range to compare with.nt * @returns {Boolean} `true` if ranges
are equal, `false` otherwise.nt */ntisEqual( otherRange ) {nttreturn
this.start.isEqual( otherRange.start ) &amp;&amp; this.end.isEqual(
otherRange.end );nt}nnt/**nt * Checks and returns whether this range
intersects with given range.nt *nt * @param
{module:engine/model/range~Range} otherRange Range to compare with.nt *
@returns {Boolean} `true` if ranges intersect, `false` otherwise.nt
*/ntisIntersecting( otherRange ) {nttreturn this.start.isBefore(
otherRange.end ) &amp;&amp; this.end.isAfter( otherRange.start
);nt}nnt/**nt * Computes which part(s) of this {@link ~Range range} is not
a part of given {@link ~Range range}.nt * Returned array contains zero, one
or two {@link ~Range ranges}.nt *nt * Examples:nt *nt *ttlet range = new
Range( new Position( root, [ 2, 7 ] ), new Position( root, [ 4, 0, 1 ] )
);nt *ttlet otherRange = new Range( new Position( root, [ 1 ] ), new
Position( root, [ 5 ] ) );nt *ttlet transformed = range.getDifference(
otherRange );nt *tt// transformed array has no ranges because `otherRange`
contains `range`nt *nt *ttotherRange = new Range( new Position( root, [ 1 ]
), new Position( root, [ 3 ] ) );nt *tttransformed = range.getDifference(
otherRange );nt *tt// transformed array has one range: from [ 3 ] to [ 4,
0, 1 ]nt *nt *ttotherRange = new Range( new Position( root, [ 3 ] ), new
Position( root, [ 4 ] ) );nt *tttransformed = range.getDifference(
otherRange );nt *tt// transformed array has two ranges: from [ 2, 7 ] to [
3 ] and from [ 4 ] to [ 4, 0, 1 ]nt *nt * @param
{module:engine/model/range~Range} otherRange Range to differentiate
against.nt * @returns {Array.&lt;module:engine/model/range~Range&gt;} The
difference between ranges.nt */ntgetDifference( otherRange ) {nttconst
ranges = [];nnttif ( this.isIntersecting( otherRange ) ) {nttt// Ranges
intersect.nntttif ( this.containsPosition( otherRange.start ) ) {ntttt//
Given range start is inside this range. This means that we have tontttt//
add shrunken range - from the start to the middle of this
range.nttttranges.push( new Range( this.start, otherRange.start )
);nttt}nntttif ( this.containsPosition( otherRange.end ) ) {ntttt// Given
range end is inside this range. This means that we have tontttt// add
shrunken range - from the middle of this range to the end.nttttranges.push(
new Range( otherRange.end, this.end ) );nttt}ntt} else {nttt// Ranges do
not intersect, return the original range.ntttranges.push(
Range.createFromRange( this ) );ntt}nnttreturn ranges;nt}nnt/**nt * Returns
an intersection of this {@link ~Range range} and given {@link ~Range
range}.nt * Intersection is a common part of both of those ranges. If
ranges has no common part, returns `null`.nt *nt * Examples:nt *nt *ttlet
range = new Range( new Position( root, [ 2, 7 ] ), new Position( root, [ 4,
0, 1 ] ) );nt *ttlet otherRange = new Range( new Position( root, [ 1 ] ),
new Position( root, [ 2 ] ) );nt *ttlet transformed =
range.getIntersection( otherRange ); // null - ranges have no common partnt
*nt *ttotherRange = new Range( new Position( root, [ 3 ] ), new Position(
root, [ 5 ] ) );nt *tttransformed = range.getIntersection( otherRange ); //
range from [ 3 ] to [ 4, 0, 1 ]nt *nt * @param
{module:engine/model/range~Range} otherRange Range to check for
intersection.nt * @returns {module:engine/model/range~Range|null} A common
part of given ranges or `null` if ranges have no common part.nt
*/ntgetIntersection( otherRange ) {nttif ( this.isIntersecting( otherRange
) ) {nttt// Ranges intersect, so a common range will be returned.nttt// At
most, it will be same as this range.ntttlet commonRangeStart =
this.start;ntttlet commonRangeEnd = this.end;nntttif (
this.containsPosition( otherRange.start ) ) {ntttt// Given range start is
inside this range. This means thaNt we have tontttt// shrink common range
to the given range start.nttttcommonRangeStart =
otherRange.start;nttt}nntttif ( this.containsPosition( otherRange.end ) )
{ntttt// Given range end is inside this range. This means that we have
tontttt// shrink common range to the given range end.nttttcommonRangeEnd =
otherRange.end;nttt}nntttreturn new Range( commonRangeStart, commonRangeEnd
);ntt}nntt// Ranges do not intersect, so they do not have common
part.nttreturn null;nt}nnt/**nt * Computes and returns the smallest set of
{@link isFlat flat} ranges, that covers this range in whole.nt *nt * See an
example of a model structure (`[` and `]` are range boundaries):nt *nt
*ttroot                                                            rootnt
*tt |- element DIV                         DIV             P2             
P3             DIVnt *tt |   |- element H                   H        P1    
f o o           b a r       H         P4nt *tt |   |   |- "fir[st&quot;    
fir[st     lorem                               se]cond     ipsumnt *tt |  
|- element P1nt *tt |   |   |- "lorem&quot;                                
||nt *tt |- element P2                                                  
||nt *tt |   |- "foo&quot;                                                 
VVnt *tt |- element P3nt *tt |   |- "bar&quot;                             
rootnt *tt |- element DIV                         DIV             [P2      
P3]             DIVnt *tt |   |- element H                   H       [P1]  
f o o           b a r        H         P4nt *tt |   |   |- "se]cond&quot;  
<a href="st">fir</a>    lorem                               [se]cond    
ipsumnt *tt |   |- element P4nt *tt |   |   |- "ipsum&quot;nt *nt * As it
can be seen, letters contained in the range are: `stloremfoobarse`, spread
across different parents.nt * We are looking for minimal set of flat ranges
that contains the same nodes.nt *nt * Minimal flat ranges for above range
`( [ 0, 0, 3 ], [ 3, 0, 2 ] )` will be:nt *nt *tt( [ 0, 0, 3 ], [ 0, 0, 5 ]
) = "st&quot;nt *tt( [ 0, 1 ], [ 0, 2 ] ) = element P1
(&quot;lorem&quot;)nt *tt( [ 1 ], [ 3 ] ) = element P2, element P3
(&quot;foobar&quot;)nt *tt( [ 3, 0, 0 ], [ 3, 0, 2 ] ) = "se&quot;nt *nt *
*Note:* if an {@link module:engine/model/element~Element element} is not
wholly contained in this range, it won&#39;t be returnednt * in any of the
returned flat ranges. See in the example how `H` elements at the beginning
and at the end of the rangent * were omitted. Only their parts that were
wholly in the range were returned.nt *nt * *Note:* this method is not
returning flat ranges that contain no nodes.nt *nt * @returns
{Array.&lt;module:engine/model/range~Range&gt;} Array of flat ranges
covering this range.nt */ntgetMinimalFlatRanges() {nttconst ranges =
[];nttconst diffAt = this.start.getCommonPath( this.end ).length;nnttconst
pos = Position.createFromPosition( this.start );nttlet posParent =
pos.parent;nntt// Go up.nttwhile ( pos.path.length &gt; diffAt + 1 )
{ntttconst howMany = posParent.maxOffset - pos.offset;nntttif ( howMany !==
0 ) {nttttranges.push( new Range( pos, pos.getShiftedBy( howMany ) )
);nttt}nntttpos.path = pos.path.slice( 0, -1
);ntttpos.offset++;ntttposParent = posParent.parent;ntt}nntt// Go
down.nttwhile ( pos.path.length &lt;= this.end.path.length ) {ntttconst
offset = this.end.path[ pos.path.length - 1 ];ntttconst howMany = offset -
pos.offset;nntttif ( howMany !== 0 ) {nttttranges.push( new Range( pos,
pos.getShiftedBy( howMany ) ) );nttt}nntttpos.offset =
offset;ntttpos.path.push( 0 );ntt}nnttreturn ranges;nt}nnt/**nt * Creates a
{@link module:engine/model/treewalker~TreeWalker TreeWalker} instance with
this range as a boundary.nt *nt * @param {Object} options <a
href="../../../../Object.html">Object</a> with configuration options. See
{@link module:engine/model/treewalker~TreeWalker}.nt * @param
{module:engine/model/position~Position} [options.startPosition]nt * @param
{Boolean} [options.singleCharacters=false]nt * @param {Boolean}
[options.shallow=false]nt * @param {Boolean}
[options.ignoreElementEnd=false]nt */ntgetWalker( options = {} )
{nttoptions.boundaries = this;nnttreturn new TreeWalker( options
);nt}nnt/**nt * Returns an iterator that iterates over all {@link
module:engine/model/item~Item items} that are in this range and returnsnt *
them.nt *nt * This method uses {@link
module:engine/model/treewalker~TreeWalker} with `boundaries` set to this
range and `ignoreElementEnd` optionnt * set to `true`. However it returns
only {@link module:engine/model/item~Item model items},nt * not {@link
module:engine/model/treewalker~TreeWalkerValue}.nt *nt * You may specify
additional options for the tree walker. See {@link
module:engine/model/treewalker~TreeWalker} fornt * a full list of available
options.nt *nt * @method getItemsnt * @param {Object} options <a
href="../../../../Object.html">Object</a> with configuration options. See
{@link module:engine/model/treewalker~TreeWalker}.nt * @returns
{Iterable.&lt;module:engine/model/item~Item&gt;}nt */nt* getItems( options
= {} ) {nttoptions.boundaries = this;nttoptions.ignoreElementEnd =
true;nnttconst treeWalker = new TreeWalker( options );nnttfor ( const value
of treeWalker ) {ntttyield value.item;ntt}nt}nnt/**nt * Returns an iterator
that iterates over all {@link module:engine/model/position~Position
positions} that are boundaries ornt * contained in this range.nt *nt * This
method uses {@link module:engine/model/treewalker~TreeWalker} with
`boundaries` set to this range. However it returns onlynt * {@link
module:engine/model/position~Position positions}, not {@link
module:engine/model/treewalker~TreeWalkerValue}.nt *nt * You may specify
additional options for the tree walker. See {@link
module:engine/model/treewalker~TreeWalker} fornt * a full list of available
options.nt *nt * @param {Object} options <a
href="../../../../Object.html">Object</a> with configuration options. See
{@link module:engine/model/treewalker~TreeWalker}.nt * @returns
{Iterable.&lt;module:engine/model/position~Position&gt;}nt */nt*
getPositions( options = {} ) {nttoptions.boundaries = this;nnttconst
treeWalker = new TreeWalker( options );nnttyield
treeWalker.position;nnttfor ( const value of treeWalker ) {ntttyield
value.nextPosition;ntt}nt}nnt/**nt * Returns a range that is a result of
transforming this range by given `delta`.nt *nt * *Note:* transformation
may break one range into multiple ranges (e.g. when a part of the range
isnt * moved to a different part of document tree). For this reason, an
array is returned by this method and itnt * may contain one or more `Range`
instances.nt *nt * @param {module:engine/model/delta/delta~Delta} delta
Delta to transform range by.nt * @returns
{Array.&lt;module:engine/model/range~Range&gt;} Range which is the result
of transformation.nt */ntgetTransformedByDelta( delta ) {nttconst ranges =
[ Range.createFromRange( this ) ];nntt// Operation types that a range can
be transformed by.nttconst supportedTypes = new Set( [ &#39;insert&#39;,
&#39;move&#39;, &#39;remove&#39;, &#39;reinsert&#39; ] );nnttfor ( const
operation of delta.operations ) {ntttif ( supportedTypes.has(
operation.type ) ) {nttttfor ( let i = 0; i &lt; ranges.length; i++ )
{ntttttlet result;nntttttif ( operation.type == &#39;insert&#39; )
{nttttttresult = ranges[ i
]._getTransformedByDocumentChange(ntttttttoperation.type,ntttttttdelta.type,ntttttttoperation.position,ntttttttoperation.nodes.maxOffsetntttttt);nttttt}
else {nttttttresult = ranges[ i
]._getTransformedByDocumentChange(ntttttttoperation.type,ntttttttdelta.type,ntttttttoperation.targetPosition,ntttttttoperation.howMany,ntttttttoperation.sourcePositionntttttt);nttttt}nntttttranges.splice(
i, 1, …result );nnttttti += result.length - 1;ntttt}nttt}ntt}nnttreturn
ranges;nt}nnt/**nt * Returns a range that is a result of transforming this
range by multiple `deltas`.nt *nt * *Note:* transformation may break one
range into multiple ranges (e.g. when a part of the range isnt * moved to a
different part of document tree). For this reason, an array is returned by
this method and itnt * may contain one or more `Range` instances.nt *nt *
@param {Iterable.&lt;module:engine/model/delta/delta~Delta&gt;} deltas
Deltas to transform the range by.nt * @returns
{Array.&lt;module:engine/model/range~Range&gt;} Range which is the result
of transformation.nt */ntgetTransformedByDeltas( deltas ) {nttconst ranges
= [ Range.createFromRange( this ) ];nnttfor ( const delta of deltas )
{ntttfor ( let i = 0; i &lt; ranges.length; i++ ) {nttttconst result =
ranges[ i ].getTransformedByDelta( delta );nnttttranges.splice( i, 1,
…result );ntttti += result.length - 1;nttt}ntt}nntt// It may happen that a
range is split into two, and then the part of second "piece&quot; is moved
into firstntt// "piece&quot;. In this case we will have incorrect third
range, which should not be included in the result –ntt// because it is
already included in the first "piece&quot;. In this loop we are looking for
all such ranges thatntt// are inside other ranges and we simply remove
them.nttfor ( let i = 0; i &lt; ranges.length; i++ ) {ntttconst range =
ranges[ i ];nntttfor ( let j = i + 1; j &lt; ranges.length; j++ )
{nttttconst next = ranges[ j ];nnttttif ( range.containsRange( next ) ||
next.containsRange( range ) || range.isEqual( next ) )
{ntttttranges.splice( j, 1 );ntttt}nttt}ntt}nnttreturn ranges;nt}nnt/**nt *
Returns an {@link module:engine/model/element~Element} or {@link
module:engine/model/documentfragment~DocumentFragment}nt * which is a
common ancestor of the range&#39;s both ends (in which the entire range is
contained).nt *nt * @returns
{module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment|null}nt
*/ntgetCommonAncestor() {nttreturn this.start.getCommonAncestor( this.end
);nt}nnt/**nt * Returns a range that is a result of transforming this range
by a change in the model document.nt *nt * @protectednt * @param
{&#39;insert&#39;|&#39;move&#39;|&#39;remove&#39;|&#39;reinsert&#39;} type
Change type.nt * @param {String} deltaType Type of delta that introduced
the change.nt * @param {module:engine/model/position~Position}
targetPosition Position before the first changed node.nt * @param {Number}
howMany How many nodes has been changed.nt * @param
{module:engine/model/position~Position} sourcePosition Source position of
changes.nt * @returns {Array.&lt;module:engine/model/range~Range&gt;}nt
*/nt_getTransformedByDocumentChange( type, deltaType, targetPosition,
howMany, sourcePosition ) {nttif ( type == &#39;insert&#39; ) {ntttreturn
this._getTransformedByInsertion( targetPosition, howMany, false, false
);ntt} else {ntttconst sourceRange = Range.createFromPositionAndShift(
sourcePosition, howMany );nnttt// Edge case for merge delta.ntttif
(nttttdeltaType == &#39;merge&#39; &amp;&amp;nttttthis.isCollapsed
&amp;&amp;ntttt( this.start.isEqual( sourceRange.start ) ||
this.start.isEqual( sourceRange.end ) )nttt) {ntttt// Collapsed range is in
merged element, at the beginning or at the end of it.ntttt// Without fix,
the range would end up in the graveyard, together with removed
element.ntttt// &lt;p&gt;foo&lt;/p&gt;&lt;p&gt;[]bar&lt;/p&gt; -&gt;
&lt;p&gt;foobar&lt;/p&gt;&lt;p&gt;[]&lt;/p&gt; -&gt;
&lt;p&gt;foobar&lt;/p&gt; -&gt; &lt;p&gt;foo[]bar&lt;/p&gt;ntttt//
&lt;p&gt;foo&lt;/p&gt;&lt;p&gt;bar[]&lt;/p&gt; -&gt;
&lt;p&gt;foobar&lt;/p&gt;&lt;p&gt;[]&lt;/p&gt; -&gt;
&lt;p&gt;foobar&lt;/p&gt; -&gt; &lt;p&gt;foobar[]&lt;/p&gt;ntttt//ntttt//
In most cases, `sourceRange.start.offset` for merge delta&#39;s move
operation would be 0,ntttt// so this formula might look
overcomplicated.ntttt// However in some scenarios, after operational
transformation, move operation might notntttt// in fact start from 0 and we
need to properly count new offset.ntttt// <a
href="https://github.com/ckeditor/ckeditor5-engine/pull/1133#issuecomment-329080668.\n\t\t\t\tconst">github.com/ckeditor/ckeditor5-engine/pull/1133#issuecomment-329080668.nttttconst</a>
offset = this.start.offset - sourceRange.start.offset;nnttttreturn [ new
Range( targetPosition.getShiftedBy( offset ) ) ];nttt}nttt//nttt// Edge
case for split delta.nttt//ntttif ( deltaType == &#39;split&#39; &amp;&amp;
this.isCollapsed &amp;&amp; this.end.isEqual( sourceRange.end ) ) {ntttt//
Collapsed range is at the end of split element.ntttt// Without fix, the
range would end up at the end of split (old) element instead of at the end
of new element.ntttt// That would happen because this range is not
technically inside moved range. Last step below shows the fix.ntttt//
&lt;p&gt;foobar[]&lt;/p&gt; -&gt;
&lt;p&gt;foobar[]&lt;/p&gt;&lt;p&gt;&lt;/p&gt; -&gt;
&lt;p&gt;foo[]&lt;/p&gt;&lt;p&gt;bar&lt;/p&gt; -&gt;
&lt;p&gt;foo&lt;/p&gt;&lt;p&gt;bar[]&lt;/p&gt;nttttreturn [ new Range(
targetPosition.getShiftedBy( howMany ) ) ];nttt}nttt//nttt// Other edge
cases:nttt//nttt// In all examples `[]` is `this` and `{}` is
`sourceRange`, while `^` is move target position.nttt//nttt//
Example:nttt// &lt;p&gt;xx&lt;/p&gt;^&lt;w&gt;{&lt;<a
href="b</p>}</w><p>c“>p>a</a>d&lt;/p&gt;   –&gt;   &lt;<a
href="b</p><w></w><p>c”>p>xx</p><p>a</a>d&lt;/p&gt;nttt//
^&lt;p&gt;xx&lt;/p&gt;&lt;w&gt;{&lt;<a
href="b</p>}</w><p>c“>p>a</a>d&lt;/p&gt;   –&gt;   &lt;<a
href="b</p><p>xx</p><w></w><p>c”>p>a</a>d&lt;/p&gt;  // Note
&lt;p&gt;xx&lt;/p&gt; inclusion.nttt// &lt;w&gt;{&lt;<a
href="b</p>}</w>^<p>c“>p>a</a>d&lt;/p&gt;            –&gt;   &lt;<a
href="b</p><p>c”>w></w><p>a</a>d&lt;/p&gt;ntttif (ntttt(
sourceRange.containsPosition( this.start ) || sourceRange.start.isEqual(
this.start ) ) &amp;&amp;nttttthis.containsPosition( sourceRange.end )
&amp;&amp;nttttthis.end.isAfter( targetPosition )nttt) {nttttconst start =
this.start._getCombined(ntttttsourcePosition,nttttttargetPosition._getTransformedByDeletion(
sourcePosition, howMany )ntttt);nttttconst end =
this.end._getTransformedByMove( sourcePosition, targetPosition, howMany,
false, false );nnttttreturn [ new Range( start, end ) ];nttt}nnttt//
Example:nttt// &lt;<a
href="d</p><w>{<p>a“>p>c</a>b&lt;/p&gt;}&lt;/w&gt;^&lt;p&gt;xx&lt;/p&gt;  
–&gt;   &lt;<a
href="d</p><w></w><p>a”>p>c</a>b&lt;/p&gt;&lt;p&gt;xx&lt;/p&gt;nttt//
&lt;<a
href="d</p><w>{<p>a“>p>c</a>b&lt;/p&gt;}&lt;/w&gt;&lt;p&gt;xx&lt;/p&gt;^  
–&gt;   &lt;<a href="d</p><w></w><p>xx</p><p>a”>p>c</a>b&lt;/p&gt;  // Note
&lt;p&gt;xx&lt;/p&gt; inclusion.nttt// &lt;<a
href="d</p>^<w>{<p>a“>p>c</a>b&lt;/p&gt;}&lt;/w&gt;            –&gt;  
&lt;<a href="d</p><p>a”>p>c</a>b&lt;/p&gt;&lt;w&gt;&lt;/w&gt;ntttif (ntttt(
sourceRange.containsPosition( this.end ) || sourceRange.end.isEqual(
this.end ) ) &amp;&amp;nttttthis.containsPosition( sourceRange.start )
&amp;&amp;nttttthis.start.isBefore( targetPosition )nttt) {nttttconst start
=
this.start._getTransformedByMove(ntttttsourcePosition,nttttttargetPosition,nttttthowMany,nttttttrue,ntttttfalsentttt);nttttconst
end =
this.end._getCombined(ntttttsourcePosition,nttttttargetPosition._getTransformedByDeletion(
sourcePosition, howMany )ntttt);nnttttreturn [ new Range( start, end )
];nttt}nntttreturn this._getTransformedByMove( sourcePosition,
targetPosition, howMany );ntt}nt}nnt/**nt * Returns an array containing one
or two {@link ~Range ranges} that are a result of transforming thisnt *
{@link ~Range range} by inserting `howMany` nodes at `insertPosition`. Two
{@link ~Range ranges} arent * returned if the insertion was inside this
{@link ~Range range} and `spread` is set to `true`.nt *nt * Examples:nt *nt
*ttlet range = new Range( new Position( root, [ 2, 7 ] ), new Position(
root, [ 4, 0, 1 ] ) );nt *ttlet transformed =
range._getTransformedByInsertion( new Position( root, [ 1 ] ), 2 );nt *tt//
transformed array has one range from [ 4, 7 ] to [ 6, 0, 1 ]nt *nt
*tttransformed = range._getTransformedByInsertion( new Position( root, [ 4,
0, 0 ] ), 4 );nt *tt// transformed array has one range from [ 2, 7 ] to [
4, 0, 5 ]nt *nt *tttransformed = range._getTransformedByInsertion( new
Position( root, [ 3, 2 ] ), 4 );nt *tt// transformed array has one range,
which is equal to original rangent *nt *tttransformed =
range._getTransformedByInsertion( new Position( root, [ 3, 2 ] ), 4, true
);nt *tt// transformed array has two ranges: from [ 2, 7 ] to [ 3, 2 ] and
from [ 3, 6 ] to [ 4, 0, 1 ]nt *nt *tttransformed =
range._getTransformedByInsertion( new Position( root, [ 4, 0, 1 ] ), 4,
false, false );nt *tt// transformed array has one range which is equal to
original range because insertion is after the range boundarynt *nt
*tttransformed = range._getTransformedByInsertion( new Position( root, [ 4,
0, 1 ] ), 4, false, true );nt *tt// transformed array has one range: from [
2, 7 ] to [ 4, 0, 5 ] because range was expandednt *nt * @protectednt *
@param {module:engine/model/position~Position} insertPosition Position
where nodes are inserted.nt * @param {Number} howMany How many nodes are
inserted.nt * @param {Boolean} [spread] Flag indicating whether this
{~Range range} should be spread if insertionnt * was inside the range.
Defaults to `false`.nt * @param {Boolean} [isSticky] Flag indicating
whether insertion should expand a range if it is in a place ofnt * range
boundary. Defaults to `false`.nt * @returns
{Array.&lt;module:engine/model/range~Range&gt;} Result of the
transformation.nt */nt_getTransformedByInsertion( insertPosition, howMany,
spread = false, isSticky = false ) {nttif ( spread &amp;&amp;
this.containsPosition( insertPosition ) ) {nttt// Range has to be spread.
The first part is from original start to the spread point.nttt// The other
part is from spread point to the original end, but transformed bynttt//
insertion to reflect insertion changes.nntttreturn [nttttnew Range(
this.start, insertPosition ),nttttnew
Range(ntttttinsertPosition._getTransformedByInsertion( insertPosition,
howMany, true ),ntttttthis.end._getTransformedByInsertion( insertPosition,
howMany, this.isCollapsed )ntttt)nttt];ntt} else {ntttconst range =
Range.createFromRange( this );nntttconst insertBeforeStart =
!isSticky;ntttconst insertBeforeEnd = range.isCollapsed ? true :
isSticky;nntttrange.start = range.start._getTransformedByInsertion(
insertPosition, howMany, insertBeforeStart );ntttrange.end =
range.end._getTransformedByInsertion( insertPosition, howMany,
insertBeforeEnd );nntttreturn [ range ];ntt}nt}nnt/**nt * Returns an array
containing {@link ~Range ranges} that are a result of transforming thisnt *
{@link ~Range range} by moving `howMany` nodes from `sourcePosition` to
`targetPosition`.nt *nt * @protectednt * @param
{module:engine/model/position~Position} sourcePosition Position from which
nodes are moved.nt * @param {module:engine/model/position~Position}
targetPosition Position to where nodes are moved.nt * @param {Number}
howMany How many nodes are moved.nt * @returns
{Array.&lt;module:engine/model/range~Range&gt;} Result of the
transformation.nt */nt_getTransformedByMove( sourcePosition,
targetPosition, howMany ) {nttif ( this.isCollapsed ) {ntttconst newPos =
this.start._getTransformedByMove( sourcePosition, targetPosition, howMany,
true, false );nntttreturn [ new Range( newPos ) ];ntt}nnttlet
result;nnttconst moveRange = new Range( sourcePosition,
sourcePosition.getShiftedBy( howMany ) );nnttconst differenceSet =
this.getDifference( moveRange );nttlet difference = null;nnttconst common =
this.getIntersection( moveRange );nnttif ( differenceSet.length == 1 )
{nttt// `moveRange` and this range may intersect.ntttdifference = new
Range(nttttdifferenceSet[ 0 ].start._getTransformedByDeletion(
sourcePosition, howMany ),nttttdifferenceSet[ 0
].end._getTransformedByDeletion( sourcePosition, howMany )nttt);ntt} else
if ( differenceSet.length == 2 ) {nttt// `moveRange` is inside this
range.ntttdifference = new
Range(nttttthis.start,nttttthis.end._getTransformedByDeletion(
sourcePosition, howMany )nttt);ntt} // else, `moveRange` contains this
range.nnttconst insertPosition = targetPosition._getTransformedByDeletion(
sourcePosition, howMany );nnttif ( difference ) {ntttresult =
difference._getTransformedByInsertion( insertPosition, howMany, common !==
null );ntt} else {ntttresult = [];ntt}nnttif ( common ) {ntttresult.push(
new Range(nttttcommon.start._getCombined( moveRange.start, insertPosition
),nttttcommon.end._getCombined( moveRange.start, insertPosition )nttt)
);ntt}nnttreturn result;nt}nnt/**nt * Creates a new range, spreading from
specified {@link module:engine/model/position~Position position} to a
position moved bynt * given `shift`. If `shift` is a negative value,
shifted position is treated as the beginning of the range.nt *nt * @param
{module:engine/model/position~Position} position Beginning of the range.nt
* @param {Number} shift How long the range should be.nt * @returns
{module:engine/model/range~Range}nt */ntstatic createFromPositionAndShift(
position, shift ) {nttconst start = position;nttconst end =
position.getShiftedBy( shift );nnttreturn shift &gt; 0 ? new this( start,
end ) : new this( end, start );nt}nnt/**nt * Creates a range from given
parents and offsets.nt *nt * @param {module:engine/model/element~Element}
startElement Start position parent element.nt * @param {Number} startOffset
Start position offset.nt * @param {module:engine/model/element~Element}
endElement End position parent element.nt * @param {Number} endOffset End
position offset.nt * @returns {module:engine/model/range~Range}nt
*/ntstatic createFromParentsAndOffsets( startElement, startOffset,
endElement, endOffset ) {nttreturn new
this(ntttPosition.createFromParentAndOffset( startElement, startOffset
),ntttPosition.createFromParentAndOffset( endElement, endOffset
)ntt);nt}nnt/**nt * Creates a new instance of `Range` which is equal to
passed range.nt *nt * @param {module:engine/model/range~Range} range Range
to clone.nt * @returns {module:engine/model/range~Range}nt */ntstatic
createFromRange( range ) {nttreturn new this( range.start, range.end
);nt}nnt/**nt * Creates a range inside an {@link
module:engine/model/element~Element element} which starts before the first
child ofnt * that element and ends after the last child of that element.nt
*nt * @param {module:engine/model/element~Element} element Element which is
a parent for the range.nt * @returns {module:engine/model/range~Range}nt
*/ntstatic createIn( element ) {nttreturn this.createFromParentsAndOffsets(
element, 0, element, element.maxOffset );nt}nnt/**nt * Creates a range that
starts before given {@link module:engine/model/item~Item model item} and
ends after it.nt *nt * @param {module:engine/model/item~Item} itemnt *
@returns {module:engine/model/range~Range}nt */ntstatic createOn( item )
{nttreturn this.createFromPositionAndShift( Position.createBefore( item ),
item.offsetSize );nt}nnt/**nt * Creates a collapsed range at given {@link
module:engine/model/position~Position position}nt * or on the given {@link
module:engine/model/item~Item item}.nt *nt * @param
{module:engine/model/item~Item|module:engine/model/position~Position}
itemOrPositionnt * @param
{Number|&#39;end&#39;|&#39;before&#39;|&#39;after&#39;} [offset=0] Offset
or one of the flags. Used only whennt * first parameter is a {@link
module:engine/model/item~Item model item}.nt */ntstatic createCollapsedAt(
itemOrPosition, offset ) {nttconst start = Position.createAt(
itemOrPosition, offset );nttconst end = Position.createFromPosition( start
);nnttreturn new Range( start, end );nt}nnt/**nt * Combines all ranges from
the passed array into a one range. At least one range has to be passed.nt *
Passed ranges must not have common parts.nt *nt * The first range from the
array is a reference range. If other ranges start or end on the exactly
same position wherent * the reference range, they get combined into one
range.nt *nt *tt[  ][]  [    ][ ][             ][ ][]  [  ]  // Passed
ranges, shown sortednt *tt[    ]                                       //
The result of the function if the first range was a reference range.nt *t  
[                           ]        // The result of the function if the
third-to-seventh range was a reference range.nt *t                         
[  ]  // The result of the function if the last range was a reference
range.nt *nt * @param {Array.&lt;module:engine/model/range~Range&gt;}
ranges Ranges to combine.nt * @returns {module:engine/model/range~Range}
Combined range.nt */ntstatic createFromRanges( ranges ) {nttif (
ranges.length === 0 ) {nttt/**nttt * At least one range has to be passed
tonttt * {@link module:engine/model/range~Range.createFromRanges
`Range.createFromRanges()`}.nttt *nttt * @error
range-create-from-ranges-empty-arraynttt */ntttthrow new CKEditorError(
&#39;range-create-from-ranges-empty-array: At least one range has to be
passed.&#39; );ntt} else if ( ranges.length == 1 ) {ntttreturn
this.createFromRange( ranges[ 0 ] );ntt}nntt// 1. Set the first range in
`ranges` array as a reference range.ntt// If we are going to return just a
one range, one of the ranges need to be the reference one.ntt// Other
ranges will be stuck to that range, if possible.nttconst ref = ranges[ 0
];nntt// 2. Sort all the ranges so it&#39;s easier to process
them.nttranges.sort( ( a, b ) =&gt; {ntttreturn a.start.isAfter( b.start )
? 1 : -1;ntt} );nntt// 3. Check at which index the reference range is
now.nttconst refIndex = ranges.indexOf( ref );nntt// 4. At this moment we
don&#39;t need the original range.ntt// We are going to modify the result
and we need to return a new instance of Range.ntt// We have to create a
copy of the reference range.nttconst result = new this( ref.start, ref.end
);nntt// 5. Ranges should be checked and glued starting from the range that
is closest to the reference range.ntt// Since ranges are sorted, start with
the range with index that is closest to reference range index.nttfor ( let
i = refIndex - 1; i &gt;= 0; i++ ) {ntttif ( ranges[ i ].end.isEqual(
result.start ) ) {nttttresult.start = Position.createFromPosition( ranges[
i ].start );nttt} else {ntttt// If ranges are not starting/ending at the
same position there is no point in looking
further.nttttbreak;nttt}ntt}nntt// 6. Ranges should be checked and glued
starting from the range that is closest to the reference range.ntt// Since
ranges are sorted, start with the range with index that is closest to
reference range index.nttfor ( let i = refIndex + 1; i &lt; ranges.length;
i++ ) {ntttif ( ranges[ i ].start.isEqual( result.end ) ) {nttttresult.end
= Position.createFromPosition( ranges[ i ].end );nttt} else {ntttt// If
ranges are not starting/ending at the same position there is no point in
looking further.nttttbreak;nttt}ntt}nnttreturn result;nt}nnt/**nt * Creates
a `Range` instance from given plain object (i.e. parsed JSON string).nt *nt
* @param {Object} json Plain object to be converted to `Range`.nt * @param
{module:engine/model/document~Document} doc Document object that will be
range owner.nt * @returns {module:engine/model/element~Element} `Range`
instance created using given plain object.nt */ntstatic fromJSON( json, doc
) {nttreturn new this( Position.fromJSON( json.start, doc ),
Position.fromJSON( json.end, doc ) );nt}n}nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-engine/src/model/range.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module engine/conversion/mappern */nnimport ModelPosition from
&#39;../model/position&#39;;nimport ModelRange from
&#39;../model/range&#39;;nnimport ViewPosition from
&#39;../view/position&#39;;nimport ViewRange from
&#39;../view/range&#39;;nimport ViewText from
&#39;../view/text&#39;;nnimport EmitterMixin from
&#39;@ckeditor/ckeditor5-utils/src/emittermixin&#39;;nimport mix from
&#39;@ckeditor/ckeditor5-utils/src/mix&#39;;nn/**n * Maps elements,
positions and markers between {@link module:engine/view/document~Document
the view} andn * {@link module:engine/model/model the model}.n *n * Mapper
use bound elements to find corresponding elements and positions, so, to get
proper results,n * all model elements should be {@link
module:engine/conversion/mapper~Mapper#bindElements bound}.n *n * To map
complex model to/from view relations, you may provide custom callbacks forn
* {@link module:engine/conversion/mapper~Mapper#event:modelToViewPosition
modelToViewPosition event} andn * {@link
module:engine/conversion/mapper~Mapper#event:viewToModelPosition
viewToModelPosition event} that are fired whenevern * a position mapping
request occurs.n * Those events are fired by {@link
module:engine/conversion/mapper~Mapper#toViewPosition toViewPosition}n *
and {@link module:engine/conversion/mapper~Mapper#toModelPosition
toModelPosition} methods. `Mapper` adds it&#39;s own default callbacksn *
with `&#39;lowest&#39;` priority. To override default `Mapper` mapping, add
custom callback with higher priority andn * stop the event.n */nexport
default class Mapper {nt/**nt * Creates an instance of the mapper.nt
*/ntconstructor() {ntt/**ntt * Model element to view element mapping.ntt
*ntt * @privatentt * @member {WeakMap}ntt */nttthis._modelToViewMapping =
new WeakMap();nntt/**ntt * View element to model element mapping.ntt *ntt *
@privatentt * @member {WeakMap}ntt */nttthis._viewToModelMapping = new
WeakMap();nntt/**ntt * A map containing callbacks between view element
names and functions evaluating length of view elementsntt * in model.ntt
*ntt * @privatentt * @member {Map}ntt */nttthis._viewToModelLengthCallbacks
= new Map();nntt/**ntt * Model marker name to view elements mapping.ntt
*ntt * Keys are `String`s while values are `Set`s with {@link
module:engine/view/element~Element view elements}.ntt * One marker (name)
can be mapped to multiple elements.ntt *ntt * @privatentt * @member
{Map}ntt */nttthis._markerNameToElements = new Map();nntt// Default mapper
algorithm for mapping model position to view position.nttthis.on(
&#39;modelToViewPosition&#39;, ( evt, data ) =&gt; {ntttif (
data.viewPosition ) {nttttreturn;nttt}nntttconst viewContainer =
this._modelToViewMapping.get( data.modelPosition.parent
);nntttdata.viewPosition = this._findPositionIn( viewContainer,
data.modelPosition.offset );ntt}, { priority: &#39;low&#39; } );nntt//
Default mapper algorithm for mapping view position to model
position.nttthis.on( &#39;viewToModelPosition&#39;, ( evt, data ) =&gt;
{ntttif ( data.modelPosition ) {nttttreturn;nttt}nntttlet viewBlock =
data.viewPosition.parent;ntttlet modelParent =
this._viewToModelMapping.get( viewBlock );nntttwhile ( !modelParent )
{nttttviewBlock = viewBlock.parent;nttttmodelParent =
this._viewToModelMapping.get( viewBlock );nttt}nntttconst modelOffset =
this._toModelOffset( data.viewPosition.parent, data.viewPosition.offset,
viewBlock );nntttdata.modelPosition =
ModelPosition.createFromParentAndOffset( modelParent, modelOffset );ntt}, {
priority: &#39;low&#39; } );nt}nnt/**nt * Marks model and view elements as
corresponding. Corresponding elements can be retrieved by usingnt * the
{@link module:engine/conversion/mapper~Mapper#toModelElement
toModelElement} andnt * {@link
module:engine/conversion/mapper~Mapper#toViewElement toViewElement}
methods.nt * The information that elements are bound is also used to
translate positions.nt *nt * @param {module:engine/model/element~Element}
modelElement Model element.nt * @param {module:engine/view/element~Element}
viewElement View element.nt */ntbindElements( modelElement, viewElement )
{nttthis._modelToViewMapping.set( modelElement, viewElement
);nttthis._viewToModelMapping.set( viewElement, modelElement );nt}nnt/**nt
* Unbinds given {@link module:engine/view/element~Element view element}
from the map.nt *nt * *Note:* view-to-model binding will be removed, if it
existed. However, corresponding model-to-view bindingnt * will be removed
only if model element is still bound to passed `viewElement`.nt *nt * This
behavior lets for re-binding model element to another view element without
fear of losing the new bindingnt * when the previously bound view element
is unbound.nt *nt * @param {module:engine/view/element~Element} viewElement
View element to unbind.nt */ntunbindViewElement( viewElement ) {nttconst
modelElement = this.toModelElement( viewElement
);nnttthis._viewToModelMapping.delete( viewElement );nnttif (
this._modelToViewMapping.get( modelElement ) == viewElement )
{ntttthis._modelToViewMapping.delete( modelElement );ntt}nt}nnt/**nt *
Unbinds given {@link module:engine/model/element~Element model element}
from the map.nt *nt * *Note:* model-to-view binding will be removed, if it
existed. However, corresponding view-to-model bindingnt * will be removed
only if view element is still bound to passed `modelElement`.nt *nt * This
behavior lets for re-binding view element to another model element without
fear of losing the new bindingnt * when the previously bound model element
is unbound.nt *nt * @param {module:engine/model/element~Element}
modelElement Model element to unbind.nt */ntunbindModelElement(
modelElement ) {nttconst viewElement = this.toViewElement( modelElement
);nnttthis._modelToViewMapping.delete( modelElement );nnttif (
this._viewToModelMapping.get( viewElement ) == modelElement )
{ntttthis._viewToModelMapping.delete( viewElement );ntt}nt}nnt/**nt * Binds
given marker name with given {@link module:engine/view/element~Element view
element}. The elementnt * will be added to the current set of elements
bound with given marker name.nt *nt * @param
{module:engine/view/element~Element} element Element to bind.nt * @param
{String} name Marker name.nt */ntbindElementToMarker( element, name )
{nttconst elements = this._markerNameToElements.get( name ) || new
Set();nnttelements.add( element );nnttthis._markerNameToElements.set( name,
elements );nt}nnt/**nt * Unbinds all elements from given marker name.nt *nt
* @param {String} name Marker name.nt */ntunbindElementsFromMarkerName(
name ) {nttthis._markerNameToElements.delete( name );nt}nnt/**nt * Removes
all model to view and view to model bindings.nt */ntclearBindings()
{nttthis._modelToViewMapping = new WeakMap();nttthis._viewToModelMapping =
new WeakMap();nttthis._markerNameToElements = new Map();nt}nnt/**nt * Gets
the corresponding model element.nt *nt * *Note:* {@link
module:engine/view/uielement~UIElement} does not have corresponding element
in model.nt *nt * @param {module:engine/view/element~Element} viewElement
View element.nt * @returns {module:engine/model/element~Element|undefined}
Corresponding model element or `undefined` if not found.nt
*/nttoModelElement( viewElement ) {nttreturn this._viewToModelMapping.get(
viewElement );nt}nnt/**nt * Gets the corresponding view element.nt *nt *
@param {module:engine/model/element~Element} modelElement Model element.nt
* @returns {module:engine/view/element~Element|undefined} Corresponding
view element or `undefined` if not found.nt */nttoViewElement( modelElement
) {nttreturn this._modelToViewMapping.get( modelElement );nt}nnt/**nt *
Gets the corresponding model range.nt *nt * @param
{module:engine/view/range~Range} viewRange View range.nt * @returns
{module:engine/model/range~Range} Corresponding model range.nt
*/nttoModelRange( viewRange ) {nttreturn new ModelRange(
this.toModelPosition( viewRange.start ), this.toModelPosition(
viewRange.end ) );nt}nnt/**nt * Gets the corresponding view range.nt *nt *
@param {module:engine/model/range~Range} modelRange Model range.nt *
@returns {module:engine/view/range~Range} Corresponding view range.nt
*/nttoViewRange( modelRange ) {nttreturn new ViewRange(
this.toViewPosition( modelRange.start ), this.toViewPosition(
modelRange.end ) );nt}nnt/**nt * Gets the corresponding model position.nt
*nt * @fires viewToModelPositionnt * @param
{module:engine/view/position~Position} viewPosition View position.nt *
@returns {module:engine/model/position~Position} Corresponding model
position.nt */nttoModelPosition( viewPosition ) {nttconst data =
{ntttviewPosition,ntttmapper: thisntt};nnttthis.fire(
&#39;viewToModelPosition&#39;, data );nnttreturn
data.modelPosition;nt}nnt/**nt * Gets the corresponding view position.nt
*nt * @fires modelToViewPositionnt * @param
{module:engine/model/position~Position} modelPosition Model position.nt *
@param {Object} [options] Additional options for position mapping
process.nt * @param {Boolean} [options.isPhantom=false] Should be set to
`true` if the model position to map is pointing to a placent * in model
tree which no longer exists. For example, it could be an end of a removed
model range.nt * @returns {module:engine/view/position~Position}
Corresponding view position.nt */nttoViewPosition( modelPosition, options =
{ isPhantom: false } ) {nttconst data = {ntttmodelPosition,ntttmapper:
this,ntttisPhantom: options.isPhantomntt};nnttthis.fire(
&#39;modelToViewPosition&#39;, data );nnttreturn
data.viewPosition;nt}nnt/**nt * Gets all view elements bound to the given
marker name.nt *nt * @param {String} name Marker name.nt * @returns
{Set.&lt;module:engine/view/element~Element&gt;|null} View elements bound
with given marker name or `null`nt * if no elements are bound to given
marker name.nt */ntmarkerNameToElements( name ) {nttconst boundElements =
this._markerNameToElements.get( name );nnttif ( !boundElements )
{ntttreturn null;ntt}nnttconst elements = new Set();nnttfor ( const element
of boundElements ) {ntttif ( element.is( &#39;attributeElement&#39; ) )
{nttttfor ( const clone of element.getElementsWithSameId() )
{ntttttelements.add( clone );ntttt}nttt} else {nttttelements.add( element
);nttt}ntt}nnttreturn elements;nt}nnt/**nt * Registers a callback that
evaluates the length in the model of a view element with given name.nt *nt
* The callback is fired with one argument, which is a view element
instance. The callback is expected to returnnt * a number representing the
length of view element in model.nt *nt *tt// List item in view may contain
nested list, which have other list items. In model though,nt *tt// the
lists are represented by flat structure. Because of those differences,
length of list view elementnt *tt// may be greater than one. In the
callback it&#39;s checked how many nested list items are in evaluated list
item.nt *nt *ttfunction getViewListItemLength( element ) {nt *tttlet length
= 1;nt *nt *tttfor ( let child of element.getChildren() ) {nt *ttttif (
child.name == &#39;ul&#39; || child.name == &#39;ol&#39; ) {nt *tttttfor (
let item of child.getChildren() ) {nt *ttttttlength +=
getViewListItemLength( item );nt *ttttt}nt *tttt}nt *ttt}nt *nt *tttreturn
length;nt *tt}nt *nt *ttmapper.registerViewToModelLength( &#39;li&#39;,
getViewListItemLength );nt *nt * @param {String} viewElementName Name of
view element for which callback is registered.nt * @param {Function}
lengthCallback Function return a length of view element instance in
model.nt */ntregisterViewToModelLength( viewElementName, lengthCallback )
{nttthis._viewToModelLengthCallbacks.set( viewElementName, lengthCallback
);nt}nnt/**nt * Calculates model offset based on the view position and the
block element.nt *nt * Example:nt *nt
*tt&lt;p&gt;foo&lt;b&gt;ba|r</strong>&lt;/p&gt; // _toModelOffset( b, 2, p
) -&gt; 5nt *nt * Is a sum of:nt *nt
*tt&lt;p&gt;foo|<strong>bar</strong>&lt;/p&gt; // _toModelOffset( p, 3, p )
-&gt; 3nt *tt&lt;p&gt;foo<strong>ba|r</strong>&lt;/p&gt; // _toModelOffset(
b, 2, b ) -&gt; 2nt *nt * @privatent * @param
{module:engine/view/element~Element} viewParent Position parent.nt * @param
{Number} viewOffset Position offset.nt * @param
{module:engine/view/element~Element} viewBlock Block used as a base to
calculate offset.nt * @returns {Number} Offset in the model.nt
*/nt_toModelOffset( viewParent, viewOffset, viewBlock ) {nttif ( viewBlock
!= viewParent ) {nttt// See example.ntttconst offsetToParentStart =
this._toModelOffset( viewParent.parent, viewParent.index, viewBlock
);ntttconst offsetInParent = this._toModelOffset( viewParent, viewOffset,
viewParent );nntttreturn offsetToParentStart + offsetInParent;ntt}nntt//
viewBlock == viewParent, so we need to calculate the offset in the parent
element.nntt// If the position is a text it is simple (&quot;ba|r&quot;
-&gt; 2).nttif ( viewParent.is( &#39;text&#39; ) ) {ntttreturn
viewOffset;ntt}nntt// If the position is in an element we need to sum
lengths of siblings ( <strong> bar </strong> foo | -&gt; 3 + 3 = 6 ).nttlet
modelOffset = 0;nnttfor ( let i = 0; i &lt; viewOffset; i++ )
{ntttmodelOffset += this.getModelLength( viewParent.getChild( i )
);ntt}nnttreturn modelOffset;nt}nnt/**nt * Gets the length of the view
element in the model.nt *nt * The length is calculated as follows:nt * * if
{@link registerViewToModelLength length mapping callback} is provided for
given `viewNode` it is used tont * evaluate model length (`viewNode` is
used as first and only parameter passed to the callback),nt * * length of a
{@link module:engine/view/text~Text text node} is equal to the length of
it&#39;snt * {@link module:engine/view/text~Text#data data},nt * * length
of a {@link module:engine/view/uielement~UIElement ui element} is equal to
0,nt * * length of a mapped {@link module:engine/view/element~Element
element} is equal to 1,nt * * length of a not-mapped {@link
module:engine/view/element~Element element} is equal to the length of
it&#39;s children.nt *nt * Examples:nt *nt *ttfoo                         
-&gt; 3 // Text length is equal to it&#39;s data length.nt
*tt&lt;p&gt;foo&lt;/p&gt;                   -&gt; 1 // Length of an element
which is mapped is by default equal to 1.nt *tt<strong>foo</strong>        
-&gt; 3 // Length of an element which is not mapped is a length of its
children.nt
*tt&lt;div&gt;&lt;p&gt;x&lt;/p&gt;&lt;p&gt;y&lt;/p&gt;&lt;/div&gt;  -&gt; 2
// Assuming that &lt;div&gt; is not mapped and &lt;p&gt; are mapped.nt *nt
* @param {module:engine/view/element~Element} viewNode View node.nt *
@returns {Number} Length of the node in the tree model.nt
*/ntgetModelLength( viewNode ) {nttif (
this._viewToModelLengthCallbacks.get( viewNode.name ) ) {ntttconst callback
= this._viewToModelLengthCallbacks.get( viewNode.name );nntttreturn
callback( viewNode );ntt} else if ( this._viewToModelMapping.has( viewNode
) ) {ntttreturn 1;ntt} else if ( viewNode.is( &#39;text&#39; ) )
{ntttreturn viewNode.data.length;ntt} else if ( viewNode.is(
&#39;uiElement&#39; ) ) {ntttreturn 0;ntt} else {ntttlet len = 0;nntttfor (
const child of viewNode.getChildren() ) {nttttlen += this.getModelLength(
child );nttt}nntttreturn len;ntt}nt}nnt/**nt * Finds the position in the
view node (or its children) with the expected model offset.nt *nt *
Example:nt *nt *tt&lt;p&gt;fo<strong>bar</strong>bom&lt;/p&gt; -&gt;
expected offset: 4nt *nt *tt_findPositionIn( p, 4 ):nt
*tt&lt;p&gt;|fo<strong>bar</strong>bom&lt;/p&gt; -&gt; expected offset: 4,
actual offset: 0nt *tt&lt;p&gt;fo|<strong>bar</strong>bom&lt;/p&gt; -&gt;
expected offset: 4, actual offset: 2nt
*tt&lt;p&gt;fo<strong>bar</strong>|bom&lt;/p&gt; -&gt; expected offset: 4,
actual offset: 5 -&gt; we are too farnt *nt *tt_findPositionIn( b, 4 - ( 5
- 3 ) ):nt *tt&lt;p&gt;fo<strong>|bar</strong>bom&lt;/p&gt; -&gt; expected
offset: 2, actual offset: 0nt
*tt&lt;p&gt;fo<strong>bar|</strong>bom&lt;/p&gt; -&gt; expected offset: 2,
actual offset: 3 -&gt; we are too farnt *nt *tt_findPositionIn( bar, 2 - (
3 - 3 ) ):nt *ttWe are in the text node so we can simple find the offset.nt
*tt&lt;p&gt;fo<strong>ba|r</strong>bom&lt;/p&gt; -&gt; expected offset: 2,
actual offset: 2 -&gt; position foundnt *nt * @privatent * @param
{module:engine/view/element~Element} viewParent Tree view element in which
we are looking for the position.nt * @param {Number} expectedOffset
Expected offset.nt * @returns {module:engine/view/position~Position} Found
position.nt */nt_findPositionIn( viewParent, expectedOffset ) {ntt// Last
scanned view node.nttlet viewNode;ntt// Length of the last scanned view
node.nttlet lastLength = 0;nnttlet modelOffset = 0;nttlet viewOffset =
0;nntt// In the text node it is simple: offset in the model equals offset
in the text.nttif ( viewParent.is( &#39;text&#39; ) ) {ntttreturn new
ViewPosition( viewParent, expectedOffset );ntt}nntt// In other cases we add
lengths of child nodes to find the proper offset.nntt// If it is smaller we
add the length.nttwhile ( modelOffset &lt; expectedOffset ) {ntttviewNode =
viewParent.getChild( viewOffset );ntttlastLength = this.getModelLength(
viewNode );ntttmodelOffset += lastLength;ntttviewOffset++;ntt}nntt// If it
equals we found the position.nttif ( modelOffset == expectedOffset )
{ntttreturn this._moveViewPositionToTextNode( new ViewPosition( viewParent,
viewOffset ) );ntt}ntt// If it is higher we need to enter last
child.nttelse {nttt// ( modelOffset - lastLength ) is the offset to the
child we enter,nttt// so we subtract it from the expected offset to fine
the offset in the child.ntttreturn this._findPositionIn( viewNode,
expectedOffset - ( modelOffset - lastLength ) );ntt}nt}nnt/**nt * Because
we prefer positions in text nodes over positions next to text node moves
view position to the text nodent * if it was next to it.nt *nt
*tt&lt;p&gt;[]<strong>foo</strong>&lt;/p&gt; -&gt;
&lt;p&gt;[]<strong>foo</strong>&lt;/p&gt; // do not touch if position is
not directly next to textnt *tt&lt;p&gt;foo[]<strong>foo</strong>&lt;/p&gt;
-&gt; &lt;p&gt;foo{}<strong>foo</strong>&lt;/p&gt; // move to text nodent
*tt&lt;p&gt;<strong>[]foo</strong>&lt;/p&gt; -&gt;
&lt;p&gt;<strong>{}foo</strong>&lt;/p&gt; // move to text nodent *nt *
@privatent * @param {module:engine/view/position~Position} viewPosition
Position potentially next to text node.nt * @returns
{module:engine/view/position~Position} Position in text node if possible.nt
*/nt_moveViewPositionToTextNode( viewPosition ) {ntt// If the position is
just after text node, put it at the end of that text node.ntt// If the
position is just before text node, put it at the beginning of that text
node.nttconst nodeBefore = viewPosition.nodeBefore;nttconst nodeAfter =
viewPosition.nodeAfter;nnttif ( nodeBefore instanceof ViewText )
{ntttreturn new ViewPosition( nodeBefore, nodeBefore.data.length );ntt}
else if ( nodeAfter instanceof ViewText ) {ntttreturn new ViewPosition(
nodeAfter, 0 );ntt}nntt// Otherwise, just return the given
position.nttreturn viewPosition;nt}nnt/**nt * Fired for each model-to-view
position mapping request. The purpose of this event is to enable custom
model-to-view positionnt * mapping. Callbacks added to this event take
{@link module:engine/model/position~Position model position} and are
expected tont * calculate {@link module:engine/view/position~Position view
position}. Calculated view position should be added as `viewPosition`nt *
value in `data` object that is passed as one of parameters to the event
callback.nt *nt * tt// Assume that "captionedImage&quot; model element is
converted to &lt;img&gt; and following &lt;span&gt; elements in view,nt *
tt// and the model element is bound to &lt;img&gt; element. Force mapping
model positions inside "captionedImage&quot; to thatnt * tt// &lt;span&gt;
element.nt *ttmapper.on( &#39;modelToViewPosition&#39;, ( evt, data ) =&gt;
{nt *tttconst positionParent = modelPosition.parent;nt *nt *tttif (
positionParent.name == &#39;captionedImage&#39; ) {nt *ttttconst viewImg =
data.mapper.toViewElement( positionParent );nt *ttttconst viewCaption =
viewImg.nextSibling; // The &lt;span&gt; element.nt *nt
*ttttdata.viewPosition = new ViewPosition( viewCaption,
modelPosition.offset );nt *nt *tttt// Stop the event if other callbacks
should not modify calculated value.nt *ttttevt.stop();nt *ttt}nt *tt} );nt
*nt * *<strong>Note:</strong>* keep in mind that sometimes a "phantom&quot;
model position is being converted. "Phantom&quot; model position isnt * a
position that points to a non-existing place in model. Such position might
still be valid for conversion, thoughnt * (it would point to a correct
place in view when converted). One example of such situation is when a
range isnt * removed from model, there may be a need to map the range&#39;s
end (which is no longer valid model position). Tont * handle such
situation, check `data.isPhantom` flag:nt *nt * tt// Assume that there is
"customElement&quot; model element and whenever position is before it, we
want to move itnt * tt// to the inside of the view element bound to
"customElement&quot;.nt *ttmapper.on( &#39;modelToViewPosition&#39;, ( evt,
data ) =&gt; {nt *tttif ( data.isPhantom ) {nt *ttttreturn;nt *ttt}nt *nt
*ttt// Below line might crash for phantom position that does not exist in
model.nt *tttconst sibling = data.modelPosition.nodeBefore;nt *nt *ttt//
Check if this is the element we are interested in.nt *tttif ( !sibling.is(
&#39;customElement&#39; ) ) {nt *ttttreturn;nt *ttt}nt *nt *tttconst
viewElement = data.mapper.toViewElement( sibling );nt *nt
*tttdata.viewPosition = new ViewPosition( sibling, 0 );nt *nt
*tttevt.stop();nt *tt} );nt *nt * *<strong>Note:</strong>* default mapping
callback is provided with `low` priority setting and does not cancel the
event, so it is possible tont * attach a custom callback after default
callback and also use `data.viewPosition` calculated by default callbacknt
* (for example to fix it).nt *nt * *<strong>Note:</strong>* default mapping
callback will not fire if `data.viewPosition` is already set.nt *nt *
*<strong>Note:</strong>* these callbacks are called **very often**. For
efficiency reasons, it is advised to use them only when positionnt *
mapping between given model and view elements is unsolvable using just
elements mapping and default algorithm. Also,nt * the condition that checks
if special case scenario happened should be as simple as possible.nt *nt *
@event modelToViewPositionnt * @param {Object} data Data pipeline object
that can store and pass data between callbacks. The callback should addnt *
`viewPosition` value to that object with calculated {@link
module:engine/view/position~Position view position}.nt * @param
{module:engine/conversion/mapper~Mapper} data.mapper Mapper instance that
fired the event.nt */nnt/**nt * Fired for each view-to-model position
mapping request. See {@link
module:engine/conversion/mapper~Mapper#event:modelToViewPosition}.nt *nt *
tt// See example in `modelToViewPosition` event description.nt * tt// This
custom mapping will map positions from &lt;span&gt; element next to
&lt;img&gt; to the "captionedImage&quot; element.nt *ttmapper.on(
&#39;viewToModelPosition&#39;, ( evt, data ) =&gt; {nt *tttconst
positionParent = viewPosition.parent;nt *nt *tttif (
positionParent.hasClass( &#39;image-caption&#39; ) ) {nt *ttttconst viewImg
= positionParent.previousSibling;nt *ttttconst modelImg =
data.mapper.toModelElement( viewImg );nt *nt *ttttdata.modelPosition = new
ModelPosition( modelImg, viewPosition.offset );nt *ttttevt.stop();nt
*ttt}nt *tt} );nt *nt * *<strong>Note:</strong>* default mapping callback
is provided with `low` priority setting and does not cancel the event, so
it is possible tont * attach a custom callback after default callback and
also use `data.modelPosition` calculated by default callbacknt * (for
example to fix it).nt *nt * *<strong>Note:</strong>* default mapping
callback will not fire if `data.modelPosition` is already set.nt *nt *
*<strong>Note:</strong>* these callbacks are called **very often**. For
efficiency reasons, it is advised to use them only when positionnt *
mapping between given model and view elements is unsolvable using just
elements mapping and default algorithm. Also,nt * the condition that checks
if special case scenario happened should be as simple as possible.nt *nt *
@event viewToModelPositionnt * @param {Object} data Data pipeline object
that can store and pass data between callbacks. The callback should addnt *
`modelPosition` value to that object with calculated {@link
module:engine/model/position~Position model position}.nt * @param
{module:engine/conversion/mapper~Mapper} data.mapper Mapper instance that
fired the event.nt */n}nnmix( Mapper, EmitterMixin
);nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/conversion/mapper.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module core/plugincollectionn */nnimport CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nimport log from
&#39;@ckeditor/ckeditor5-utils/src/log&#39;;nn/**n * Manages a list of
CKEditor plugins, including loading, resolving dependencies and
initialization.n */nexport default class PluginCollection {nt/**nt *
Creates an instance of the PluginCollection class.nt * Allows loading and
initializing plugins and their dependencies.nt *nt * @param
{module:core/editor/editor~Editor} editornt * @param
{Array.&lt;Function&gt;} [availablePlugins] Plugins (constructors) which
the collection will be able to usent * when {@link
module:core/plugincollection~PluginCollection#load} is used with plugin
names (strings, instead of constructors).nt * Usually, the editor will pass
its built-in plugins to the collection so they can later bent * used in
`config.plugins` or `config.removePlugins` by names.nt */ntconstructor(
editor, availablePlugins = [] ) {ntt/**ntt * @protectedntt * @member
{module:core/editor/editor~Editor}
module:core/plugin~PluginCollection#_editorntt */nttthis._editor =
editor;nntt/**ntt * Map of plugin constructors which can be retrieved by
their names.ntt *ntt * @protectedntt * @member
{Map.&lt;String|Function,Function&gt;}
module:core/plugin~PluginCollection#_availablePluginsntt
*/nttthis._availablePlugins = new Map();nntt/**ntt * @protectedntt *
@member {Map} module:core/plugin~PluginCollection#_pluginsntt
*/nttthis._plugins = new Map();nnttfor ( const PluginConstructor of
availablePlugins ) {ntttthis._availablePlugins.set( PluginConstructor,
PluginConstructor );nntttif ( PluginConstructor.pluginName )
{nttttthis._availablePlugins.set( PluginConstructor.pluginName,
PluginConstructor );nttt}ntt}nt}nnt/**nt * Iterable interface.nt *nt *
Returns `[ PluginConstructor, pluginInstance ]` pairs.nt *nt * @returns
{Iterable.&lt;Array&gt;}nt */nt* [ Symbol.iterator ]() {nttfor ( const
entry of this._plugins ) {ntttif ( typeof entry[ 0 ] == &#39;function&#39;
) {nttttyield entry;nttt}ntt}nt}nnt/**nt * Gets the plugin instance by its
constructor or name.nt *nt * @param {Function|String} key The plugin
constructor or {@link module:core/plugin~PluginInterface.pluginName
name}.nt * @returns {module:core/plugin~PluginInterface}nt */ntget( key )
{nttreturn this._plugins.get( key );nt}nnt/**nt * Loads a set of plugins
and adds them to the collection.nt *nt * @param
{Array.&lt;Function|String&gt;} plugins An array of {@link
module:core/plugin~PluginInterface plugin constructors}nt * or {@link
module:core/plugin~PluginInterface.pluginName plugin names}. The second
option (names) work only ifnt * `availablePlugins` were passed to the
{@link constructor}.nt * @param {Array.&lt;String|Function&gt;}
[removePlugins] Names of plugins or plugin constructorsnt * which should
not be loaded (despite being specified in the `plugins` array).nt *
@returns {Promise} A promise which gets resolved once all plugins are
loaded and available into thent * collection.nt * @returns
{Promise.&lt;Array.&lt;module:core/plugin~PluginInterface&gt;&gt;}
returns.loadedPlugins The array of loaded plugins.nt */ntload( plugins,
removePlugins = [] ) {nttconst that = this;nttconst editor =
this._editor;nttconst loading = new Set();nttconst loaded = [];nnttconst
pluginConstructors = mapToAvailableConstructors( plugins );nttconst
removePluginConstructors = mapToAvailableConstructors( removePlugins
);nttconst missingPlugins = getMissingPluginNames( plugins );nnttif (
missingPlugins ) {nttt// TODO update this error docs with links to docs
because it will be a frequent problem.nnttt/**nttt * Some plugins are not
available and could not be loaded.nttt *nttt * Plugin classes
(constructors) need to be provided to the editor before they can be loaded
by name.nttt * This is usually done by the builder by setting the {@link
module:core/editor/editor~Editor.build}nttt * property.nttt *nttt * **If
you see this warning when using one of the {@glink builds/index CKEditor 5
Builds}** it meansnttt * that you try to enable a plugin which was not
included into that build. This may a be due to a typonttt * in the plugin
name or simply because that plugin is not part of this build. In the latter
scenario,nttt * read more about {@glink
builds/guides/development/custom-builds custom builds}.nttt *nttt * **If
you see this warning when using one of the editor creators directly** (not
a build), then it meansnttt * that you tried loading plugins by name.
However, unlike CKEditor 4, CKEditor 5 does not implement a "plugin
loader&quot;.nttt * This means that CKEditor 5 does not know where to load
the plugin modules from. Therefore, you need tonttt * provide each plugin
through reference (as a constructor function). Check out the examples
innttt * {@glink
builds/guides/integration/advanced-setup#scenario-2-building-from-source
"Building from source&quot;}.nttt *nttt * @error
plugincollection-plugin-not-foundnttt * @param {Array.&lt;String&gt;}
plugins The name of the plugins which could not be loaded.nttt */ntttconst
errorMsg = &#39;plugincollection-plugin-not-found: Some plugins are not
available and could not be loaded.&#39;;nnttt// Log the error so it&#39;s
more visible on the console. Hopefully, for better DX.ntttlog.error(
errorMsg, { plugins: missingPlugins } );nntttreturn Promise.reject( new
CKEditorError( errorMsg, { plugins: missingPlugins } ) );ntt}nnttreturn
Promise.all( pluginConstructors.map( loadPlugin ) )nttt.then( () =&gt;
loaded );nnttfunction loadPlugin( PluginConstructor ) {ntttif (
removePluginConstructors.includes( PluginConstructor ) )
{nttttreturn;nttt}nnttt// The plugin is already loaded or being loaded - do
nothing.ntttif ( that.get( PluginConstructor ) || loading.has(
PluginConstructor ) ) {nttttreturn;nttt}nntttreturn instantiatePlugin(
PluginConstructor )ntttt.catch( err =&gt; {nttttt/**nttttt * It was not
possible to load the plugin.nttttt *nttttt * This is a generic error logged
to the console when a JavaSript error is thrown during one ofnttttt * the
plugins initialization.nttttt *nttttt * If you correctly handled a promise
returned by the editor&#39;s `create()` method (like shown below)nttttt *
you will find the original error logged on the console too:nttttt *nttttt
*ttClassicEditor.create( document.getElementById( &#39;editor&#39; )
)nttttt *ttt.then( editor =&gt; {nttttt *tttt// …nttttt * ttt} )nttttt
*ttt.catch( error =&gt; {nttttt *ttttconsole.error( error );nttttt *ttt}
);nttttt *nttttt * @error plugincollection-loadnttttt * @param {String}
plugin The name of the plugin that could not be loaded.nttttt
*/ntttttlog.error( &#39;plugincollection-load: It was not possible to load
the plugin.&#39;, { plugin: PluginConstructor } );nntttttthrow err;ntttt}
);ntt}nnttfunction instantiatePlugin( PluginConstructor ) {ntttreturn new
Promise( resolve =&gt; {nttttloading.add( PluginConstructor );nnttttif (
PluginConstructor.requires ) {ntttttPluginConstructor.requires.forEach(
RequiredPluginConstructorOrName =&gt; {nttttttconst
RequiredPluginConstructor = getPluginConstructor(
RequiredPluginConstructorOrName );nnttttttif ( removePlugins.includes(
RequiredPluginConstructor ) ) {nttttttt/**nttttttt * Cannot load a plugin
because one of its dependencies is listed in the `removePlugins`
option.nttttttt *nttttttt * @error plugincollection-requirednttttttt *
@param {Function} plugin The required plugin.nttttttt * @param {Function}
requiredBy The parent plugin.nttttttt */ntttttttthrow new
CKEditorError(ntttttttt&#39;plugincollection-required: Cannot load a plugin
because one of its dependencies is listed in&#39; +ntttttttt&#39;the
`removePlugins` option.&#39;,ntttttttt{ plugin: RequiredPluginConstructor,
requiredBy: PluginConstructor }nttttttt);ntttttt}nnttttttloadPlugin(
RequiredPluginConstructor );nttttt} );ntttt}nnttttconst plugin = new
PluginConstructor( editor );nttttthat._add( PluginConstructor, plugin
);nttttloaded.push( plugin );nnttttresolve();nttt} );ntt}nnttfunction
getPluginConstructor( PluginConstructorOrName ) {ntttif ( typeof
PluginConstructorOrName == &#39;function&#39; ) {nttttreturn
PluginConstructorOrName;nttt}nntttreturn that._availablePlugins.get(
PluginConstructorOrName );ntt}nnttfunction getMissingPluginNames( plugins )
{ntttconst missingPlugins = [];nntttfor ( const pluginNameOrConstructor of
plugins ) {nttttif ( !getPluginConstructor( pluginNameOrConstructor ) )
{ntttttmissingPlugins.push( pluginNameOrConstructor
);ntttt}nttt}nntttreturn missingPlugins.length ? missingPlugins :
null;ntt}nnttfunction mapToAvailableConstructors( plugins ) {ntttreturn
pluginsntttt.map( pluginNameOrConstructor =&gt; getPluginConstructor(
pluginNameOrConstructor ) )ntttt.filter( PluginConstructor =&gt;
!!PluginConstructor );ntt}nt}nnt/**nt * Destroys all loaded plugins.nt *nt
* @returns {Promise}nt */ntdestroy() {nttconst promises = Array.from( this
)nttt.map( ( [ , pluginInstance ] ) =&gt; pluginInstance )nttt.filter(
pluginInstance =&gt; typeof pluginInstance.destroy == &#39;function&#39;
)nttt.map( pluginInstance =&gt; pluginInstance.destroy() );nnttreturn
Promise.all( promises );nt}nnt/**nt * Adds the plugin to the collection.
Exposed mainly for testing purposes.nt *nt * @protectednt * @param
{Function} PluginConstructor The plugin constructor.nt * @param
{module:core/plugin~PluginInterface} plugin The instance of the plugin.nt
*/nt_add( PluginConstructor, plugin ) {nttthis._plugins.set(
PluginConstructor, plugin );nnttconst pluginName =
PluginConstructor.pluginName;nnttif ( !pluginName ) {ntttreturn;ntt}nnttif
( this._plugins.has( pluginName ) ) {nttt/**nttt * Two plugins with the
same {@link module:core/plugin~PluginInterface.pluginName} were loaded.nttt
* This may lead to runtime conflicts between these plugins. This usually
means that incorrectnttt * params were passed to {@link
module:core/editor/editor~Editor.create}.nttt *nttt * @error
plugincollection-plugin-name-conflictnttt * @param {String} pluginName The
duplicated plugin name.nttt * @param {Function} plugin1 The first plugin
constructor.nttt * @param {Function} plugin2 The second plugin
constructor.nttt
*/ntttlog.warn(ntttt&#39;plugincollection-plugin-name-conflict: Two plugins
with the same name were loaded.&#39;,ntttt{ pluginName, plugin1:
this._plugins.get( pluginName ).constructor, plugin2: PluginConstructor
}nttt);ntt} else {ntttthis._plugins.set( pluginName, plugin
);ntt}nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-core/src/plugincollection.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module core/commandcollectionn */nnimport CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nn/**n * Collection
of commands. Its instance is available in {@link
module:core/editor/editor~Editor#commands `editor.commands`}.n */nexport
default class CommandCollection {nt/**nt * Creates collection instance.nt
*/ntconstructor() {ntt/**ntt * Command map.ntt *ntt * @privatentt * @member
{Map}ntt */nttthis._commands = new Map();nt}nnt/**nt * Registers a new
command.nt *nt * @param {String} commandName The name of the command.nt *
@param {module:core/command~Command} commandnt */ntadd( commandName,
command ) {nttthis._commands.set( commandName, command );nt}nnt/**nt *
Retrieves a command from the collection.nt *nt * @param {String}
commandName The name of the command.nt * @returns
{module:core/command~Command}nt */ntget( commandName ) {nttreturn
this._commands.get( commandName );nt}nnt/**nt * Executes a command.nt *nt *
@param {String} commandName The name of the command.nt */ntexecute(
commandName, …args ) {nttconst command = this.get( commandName );nnttif (
!command ) {nttt/**nttt * Command does not exist.nttt *nttt * @error
commandcollection-command-not-foundnttt * @param {String} commandName Name
of the command.nttt */ntttthrow new CKEditorError(
&#39;commandcollection-command-not-found: Command does not exist.&#39;, {
commandName } );ntt}nnttcommand.execute( …args );nt}nnt/**nt * Returns
iterator of command names.nt *nt * @returns {Iterable.&lt;String&gt;}nt
*/nt* names() {nttyield* this._commands.keys();nt}nnt/**nt * Returns
iterator of command instances.nt *nt * @returns
{Iterable.&lt;module:core/command~Command&gt;}nt */nt* commands()
{nttyield* this._commands.values();nt}nnt/**nt * Iterable interface.nt *nt
* Returns `[ commandName, commandInstance ]` pairs.nt *nt * @returns
{Iterable.&lt;Array&gt;}nt */nt[ Symbol.iterator ]() {nttreturn
this._commands[ Symbol.iterator ]();nt}nnt/**nt * Destroys all collection
commands.nt */ntdestroy() {nttfor ( const command of this.commands() )
{ntttcommand.destroy();ntt}nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-core/src/commandcollection.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module engine/conversion/viewconsumablen */nnimport isArray from
&#39;@ckeditor/ckeditor5-utils/src/lib/lodash/isArray&#39;;nimport
CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nn/**n * Class used
for handling consumption of view {@link module:engine/view/element~Element
elements},n * {@link module:engine/view/text~Text text nodes} and {@link
module:engine/view/documentfragment~DocumentFragment document fragments}.n
* Element&#39;s name and its parts (attributes, classes and styles) can be
consumed separately. Consuming an element&#39;s namen * does not consume
its attributes, classes and styles.n * To add items for consumption use
{@link module:engine/conversion/viewconsumable~ViewConsumable#add add
method}.n * To test items use {@link
module:engine/conversion/viewconsumable~ViewConsumable#test test method}.n
* To consume items use {@link
module:engine/conversion/viewconsumable~ViewConsumable#consume consume
method}.n * To revert already consumed items use {@link
module:engine/conversion/viewconsumable~ViewConsumable#revert revert
method}.n *n *ttviewConsumable.add( element, { name: true } ); // Adds
element&#39;s name as ready to be consumed.n *ttviewConsumable.add(
textNode ); // Adds text node for consumption.n *ttviewConsumable.add(
docFragment ); // Adds document fragment for consumption.n
*ttviewConsumable.test( element, { name: true }  ); // Tests if
element&#39;s name can be consumed.n *ttviewConsumable.test( textNode ); //
Tests if text node can be consumed.n *ttviewConsumable.test( docFragment );
// Tests if document fragment can be consumed.n *ttviewConsumable.consume(
element, { name: true }  ); // Consume element&#39;s name.n
*ttviewConsumable.consume( textNode ); // Consume text node.n
*ttviewConsumable.consume( docFragment ); // Consume document fragment.n
*ttviewConsumable.revert( element, { name: true }  ); // Revert already
consumed element&#39;s name.n *ttviewConsumable.revert( textNode ); //
Revert already consumed text node.n *ttviewConsumable.revert( docFragment
); // Revert already consumed document fragment.n */nexport default class
ViewConsumable {nt/**nt * Creates new ViewConsumable.nt */ntconstructor()
{ntt/**ntt * Map of consumable elements. If {@link
module:engine/view/element~Element element} is used as a key,ntt * {@link
module:engine/conversion/viewconsumable~ViewElementConsumables
ViewElementConsumables} instance is stored as value.ntt * For {@link
module:engine/view/text~Text text nodes} andntt * {@link
module:engine/view/documentfragment~DocumentFragment document fragments}
boolean value is stored as value.ntt *ntt * @protectedntt * @member
{Map.&lt;module:engine/conversion/viewconsumable~ViewElementConsumables|Boolean&gt;}ntt*/nttthis._consumables
= new Map();nt}nnt/**nt * Adds {@link module:engine/view/element~Element
view element}, {@link module:engine/view/text~Text text node} ornt * {@link
module:engine/view/documentfragment~DocumentFragment document fragment} as
ready to be consumed.nt *nt *ttviewConsumable.add( p, { name: true } ); //
Adds element&#39;s name to consume.nt *ttviewConsumable.add( p, {
attributes: &#39;name&#39; } ); // Adds element&#39;s attribute.nt
*ttviewConsumable.add( p, { classes: &#39;foobar&#39; } ); // Adds
element&#39;s class.nt *ttviewConsumable.add( p, { styles: &#39;color&#39;
} ); // Adds element&#39;s stylent *ttviewConsumable.add( p, { attributes:
&#39;name&#39;, styles: &#39;color&#39; } ); // Adds attribute and style.nt
*ttviewConsumable.add( p, { classes: [ &#39;baz&#39;, &#39;bar&#39; ] } );
// Multiple consumables can be provided.nt *ttviewConsumable.add( textNode
); // Adds text node to consume.nt *ttviewConsumable.add( docFragment ); //
Adds document fragment to consume.nt *nt * Throws {@link
module:utils/ckeditorerror~CKEditorError CKEditorError}
`viewconsumable-invalid-attribute` when `class` or `style`nt * attribute is
provided - it should be handled separately by providing actual
style/class.nt *nt *ttviewConsumable.add( p, { attributes: &#39;style&#39;
} ); // This call will throw an exception.nt *ttviewConsumable.add( p, {
styles: &#39;color&#39; } ); // This is properly handled style.nt *nt *
@param
{module:engine/view/element~Element|module:engine/view/text~Text|module:engine/view/documentfragment~DocumentFragment}
elementnt * @param {Object} [consumables] Used only if first parameter is
{@link module:engine/view/element~Element view element} instance.nt *
@param {Boolean} consumables.name If set to true element&#39;s name will be
included.nt * @param {String|Array.&lt;String&gt;} consumables.attributes
Attribute name or array of attribute names.nt * @param
{String|Array.&lt;String&gt;} consumables.classes Class name or array of
class names.nt * @param {String|Array.&lt;String&gt;} consumables.styles
Style name or array of style names.nt */ntadd( element, consumables )
{nttlet elementConsumables;nntt// For text nodes and document fragments
just mark them as consumable.nttif ( element.is( &#39;text&#39; ) ||
element.is( &#39;documentFragment&#39; ) ) {ntttthis._consumables.set(
element, true );nntttreturn;ntt}nntt// For elements create new
ViewElementConsumables or update already existing one.nttif (
!this._consumables.has( element ) ) {ntttelementConsumables = new
ViewElementConsumables();ntttthis._consumables.set( element,
elementConsumables );ntt} else {ntttelementConsumables =
this._consumables.get( element );ntt}nnttelementConsumables.add(
consumables );nt}nnt/**nt * Tests if {@link
module:engine/view/element~Element view element}, {@link
module:engine/view/text~Text text node} ornt * {@link
module:engine/view/documentfragment~DocumentFragment document fragment} can
be consumed.nt * It returns `true` when all items included in method&#39;s
call can be consumed. Returns `false` whennt * first already consumed item
is found and `null` when first non-consumable item is found.nt *nt
*ttviewConsumable.test( p, { name: true } ); // Tests element&#39;s name.nt
*ttviewConsumable.test( p, { attributes: &#39;name&#39; } ); // Tests
attribute.nt *ttviewConsumable.test( p, { classes: &#39;foobar&#39; } ); //
Tests class.nt *ttviewConsumable.test( p, { styles: &#39;color&#39; } ); //
Tests style.nt *ttviewConsumable.test( p, { attributes: &#39;name&#39;,
styles: &#39;color&#39; } ); // Tests attribute and style.nt
*ttviewConsumable.test( p, { classes: [ &#39;baz&#39;, &#39;bar&#39; ] } );
// Multiple consumables can be tested.nt *ttviewConsumable.test( textNode
); // Tests text node.nt *ttviewConsumable.test( docFragment ); // Tests
document fragment.nt *nt * Testing classes and styles as attribute will
test if all added classes/styles can be consumed.nt *nt
*ttviewConsumable.test( p, { attributes: &#39;class&#39; } ); // Tests if
all added classes can be consumed.nt *ttviewConsumable.test( p, {
attributes: &#39;style&#39; } ); // Tests if all added styles can be
consumed.nt *nt * @param
{module:engine/view/element~Element|module:engine/view/text~Text|module:engine/view/documentfragment~DocumentFragment}
elementnt * @param {Object} [consumables] Used only if first parameter is
{@link module:engine/view/element~Element view element} instance.nt *
@param {Boolean} consumables.name If set to true element&#39;s name will be
included.nt * @param {String|Array.&lt;String&gt;} consumables.attributes
Attribute name or array of attribute names.nt * @param
{String|Array.&lt;String&gt;} consumables.classes Class name or array of
class names.nt * @param {String|Array.&lt;String&gt;} consumables.styles
Style name or array of style names.nt * @returns {Boolean|null} Returns
`true` when all items included in method&#39;s call can be consumed.
Returns `false`nt * when first already consumed item is found and `null`
when first non-consumable item is found.nt */nttest( element, consumables )
{nttconst elementConsumables = this._consumables.get( element );nnttif (
elementConsumables === undefined ) {ntttreturn null;ntt}nntt// For text
nodes and document fragments return stored boolean value.nttif (
element.is( &#39;text&#39; ) || element.is( &#39;documentFragment&#39; ) )
{ntttreturn elementConsumables;ntt}nntt// For elements test consumables
object.nttreturn elementConsumables.test( consumables );nt}nnt/**nt *
Consumes {@link module:engine/view/element~Element view element}, {@link
module:engine/view/text~Text text node} ornt * {@link
module:engine/view/documentfragment~DocumentFragment document fragment}.nt
* It returns `true` when all items included in method&#39;s call can be
consumed, otherwise returns `false`.nt *nt *ttviewConsumable.consume( p, {
name: true } ); // Consumes element&#39;s name.nt
*ttviewConsumable.consume( p, { attributes: &#39;name&#39; } ); // Consumes
element&#39;s attribute.nt *ttviewConsumable.consume( p, { classes:
&#39;foobar&#39; } ); // Consumes element&#39;s class.nt
*ttviewConsumable.consume( p, { styles: &#39;color&#39; } ); // Consumes
element&#39;s style.nt *ttviewConsumable.consume( p, { attributes:
&#39;name&#39;, styles: &#39;color&#39; } ); // Consumes attribute and
style.nt *ttviewConsumable.consume( p, { classes: [ &#39;baz&#39;,
&#39;bar&#39; ] } ); // Multiple consumables can be consumed.nt
*ttviewConsumable.consume( textNode ); // Consumes text node.nt
*ttviewConsumable.consume( docFragment ); // Consumes document fragment.nt
*nt * Consuming classes and styles as attribute will test if all added
classes/styles can be consumed.nt *nt *ttviewConsumable.consume( p, {
attributes: &#39;class&#39; } ); // Consume only if all added classes can
be consumed.nt *ttviewConsumable.consume( p, { attributes: &#39;style&#39;
} ); // Consume only if all added styles can be consumed.nt *nt * @param
{module:engine/view/element~Element|module:engine/view/text~Text|module:engine/view/documentfragment~DocumentFragment}
elementnt * @param {Object} [consumables] Used only if first parameter is
{@link module:engine/view/element~Element view element} instance.nt *
@param {Boolean} consumables.name If set to true element&#39;s name will be
included.nt * @param {String|Array.&lt;String&gt;} consumables.attributes
Attribute name or array of attribute names.nt * @param
{String|Array.&lt;String&gt;} consumables.classes Class name or array of
class names.nt * @param {String|Array.&lt;String&gt;} consumables.styles
Style name or array of style names.nt * @returns {Boolean} Returns `true`
when all items included in method&#39;s call can be consumed,nt * otherwise
returns `false`.nt */ntconsume( element, consumables ) {nttif ( this.test(
element, consumables ) ) {ntttif ( element.is( &#39;text&#39; ) ||
element.is( &#39;documentFragment&#39; ) ) {ntttt// For text nodes and
document fragments set value to false.nttttthis._consumables.set( element,
false );nttt} else {ntttt// For elements - consume consumables
object.nttttthis._consumables.get( element ).consume( consumables
);nttt}nntttreturn true;ntt}nnttreturn false;nt}nnt/**nt * Reverts {@link
module:engine/view/element~Element view element}, {@link
module:engine/view/text~Text text node} ornt * {@link
module:engine/view/documentfragment~DocumentFragment document fragment} so
they can be consumed once again.nt * Method does not revert items that were
never previously added for consumption, even if they are included innt *
method&#39;s call.nt *nt *ttviewConsumable.revert( p, { name: true } ); //
Reverts element&#39;s name.nt *ttviewConsumable.revert( p, { attributes:
&#39;name&#39; } ); // Reverts element&#39;s attribute.nt
*ttviewConsumable.revert( p, { classes: &#39;foobar&#39; } ); // Reverts
element&#39;s class.nt *ttviewConsumable.revert( p, { styles:
&#39;color&#39; } ); // Reverts element&#39;s style.nt
*ttviewConsumable.revert( p, { attributes: &#39;name&#39;, styles:
&#39;color&#39; } ); // Reverts attribute and style.nt
*ttviewConsumable.revert( p, { classes: [ &#39;baz&#39;, &#39;bar&#39; ] }
); // Multiple names can be reverted.nt *ttviewConsumable.revert( textNode
); // Reverts text node.nt *ttviewConsumable.revert( docFragment ); //
Reverts document fragment.nt *nt * Reverting classes and styles as
attribute will revert all classes/styles that were previously added fornt *
consumption.nt *nt *ttviewConsumable.revert( p, { attributes:
&#39;class&#39; } ); // Reverts all classes added for consumption.nt
*ttviewConsumable.revert( p, { attributes: &#39;style&#39; } ); // Reverts
all styles added for consumption.nt *nt * @param
{module:engine/view/element~Element|module:engine/view/text~Text|module:engine/view/documentfragment~DocumentFragment}
elementnt * @param {Object} [consumables] Used only if first parameter is
{@link module:engine/view/element~Element view element} instance.nt *
@param {Boolean} consumables.name If set to true element&#39;s name will be
included.nt * @param {String|Array.&lt;String&gt;} consumables.attributes
Attribute name or array of attribute names.nt * @param
{String|Array.&lt;String&gt;} consumables.classes Class name or array of
class names.nt * @param {String|Array.&lt;String&gt;} consumables.styles
Style name or array of style names.nt */ntrevert( element, consumables )
{nttconst elementConsumables = this._consumables.get( element );nnttif (
elementConsumables !== undefined ) {ntttif ( element.is( &#39;text&#39; )
|| element.is( &#39;documentFragment&#39; ) ) {ntttt// For text nodes and
document fragments - set consumable to true.nttttthis._consumables.set(
element, true );nttt} else {ntttt// For elements - revert items from
consumables object.nttttelementConsumables.revert( consumables
);nttt}ntt}nt}nnt/**nt * Creates consumable object from {@link
module:engine/view/element~Element view element}. Consumable object will
includent * element&#39;s name and all its attributes, classes and
styles.nt *nt * @staticnt * @param {module:engine/view/element~Element}
elementnt * @returns {Object} consumablesnt */ntstatic
consumablesFromElement( element ) {nttconst consumables = {ntttname:
true,ntttattributes: [],ntttclasses: [],ntttstyles: []ntt};nnttconst
attributes = element.getAttributeKeys();nnttfor ( const attribute of
attributes ) {nttt// Skip classes and styles - will be added
separately.ntttif ( attribute == &#39;style&#39; || attribute ==
&#39;class&#39; ) {nttttcontinue;nttt}nntttconsumables.attributes.push(
attribute );ntt}nnttconst classes = element.getClassNames();nnttfor ( const
className of classes ) {ntttconsumables.classes.push( className
);ntt}nnttconst styles = element.getStyleNames();nnttfor ( const style of
styles ) {ntttconsumables.styles.push( style );ntt}nnttreturn
consumables;nt}nnt/**nt * Creates {@link
module:engine/conversion/viewconsumable~ViewConsumable ViewConsumable}
instance fromnt * {@link module:engine/view/node~Node node} or {@link
module:engine/view/documentfragment~DocumentFragment document fragment}.nt
* Instance will contain all elements, child nodes, attributes, styles and
classes added for consumption.nt *nt * @staticnt * @param
{module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment}
from View node or document fragmentnt * from which `ViewConsumable` will be
created.nt * @param
{module:engine/conversion/viewconsumable~ViewConsumable} [instance] If
provided, given `ViewConsumable` instance will be usednt * to add all
consumables. It will be returned instead of a new instance.nt */ntstatic
createFrom( from, instance ) {nttif ( !instance ) {ntttinstance = new
ViewConsumable();ntt}nnttif ( from.is( &#39;text&#39; ) )
{ntttinstance.add( from );nntttreturn instance;ntt}nntt// Add `from`
itself, if it is an element.nttif ( from.is( &#39;element&#39; ) )
{ntttinstance.add( from, ViewConsumable.consumablesFromElement( from )
);ntt}nnttif ( from.is( &#39;documentFragment&#39; ) ) {ntttinstance.add(
from );ntt}nnttfor ( const child of from.getChildren() ) {ntttinstance =
ViewConsumable.createFrom( child, instance );ntt}nnttreturn
instance;nt}n}nn/**n * This is a private helper-class for {@link
module:engine/conversion/viewconsumable~ViewConsumable}.n * It represents
and manipulates consumable parts of a single {@link
module:engine/view/element~Element}.n *n * @privaten */nclass
ViewElementConsumables {nt/**nt * Creates ViewElementConsumables
instance.nt */ntconstructor() {ntt/**ntt * Flag indicating if name of the
element can be consumed.ntt *ntt * @privatentt * @member {Boolean}ntt
*/nttthis._canConsumeName = null;nntt/**ntt * Contains maps of
element&#39;s consumables: attributes, classes and styles.ntt *ntt *
@privatentt * @member {Object}ntt */nttthis._consumables = {ntttattributes:
new Map(),ntttstyles: new Map(),ntttclasses: new Map()ntt};nt}nnt/**nt *
Adds consumable parts of the {@link module:engine/view/element~Element view
element}.nt * Element&#39;s name itself can be marked to be consumed (when
element&#39;s name is consumed its attributes, classes andnt * styles still
could be consumed):nt *nt *ttconsumables.add( { name: true } );nt *nt *
Attributes classes and styles:nt *nt *ttconsumables.add( { attributes:
&#39;title&#39;, classes: &#39;foo&#39;, styles: &#39;color&#39; } );nt
*ttconsumables.add( { attributes: [ &#39;title&#39;, &#39;name&#39; ],
classes: [ &#39;foo&#39;, &#39;bar&#39; ] );nt *nt * Throws {@link
module:utils/ckeditorerror~CKEditorError CKEditorError}
`viewconsumable-invalid-attribute` when `class` or `style`nt * attribute is
provided - it should be handled separately by providing `style` and `class`
in consumables object.nt *nt * @param {Object} consumables <a
href="../../../../Object.html">Object</a> describing which parts of the
element can be consumed.nt * @param {Boolean} consumables.name If set to
`true` element&#39;s name will be added as consumable.nt * @param
{String|Array.&lt;String&gt;} consumables.attributes Attribute name or
array of attribute names to add as consumable.nt * @param
{String|Array.&lt;String&gt;} consumables.classes Class name or array of
class names to add as consumable.nt * @param {String|Array.&lt;String&gt;}
consumables.styles Style name or array of style names to add as
consumable.nt */ntadd( consumables ) {nttif ( consumables.name )
{ntttthis._canConsumeName = true;ntt}nnttfor ( const type in
this._consumables ) {ntttif ( type in consumables ) {nttttthis._add( type,
consumables[ type ] );nttt}ntt}nt}nnt/**nt * Tests if parts of the {@link
module:engine/view/node~Node view node} can be consumed.nt *nt *
Element&#39;s name can be tested:nt *nt *ttconsumables.test( { name: true }
);nt *nt * Attributes classes and styles:nt *nt *ttconsumables.test( {
attributes: &#39;title&#39;, classes: &#39;foo&#39;, styles:
&#39;color&#39; } );nt *ttconsumables.test( { attributes: [
&#39;title&#39;, &#39;name&#39; ], classes: [ &#39;foo&#39;, &#39;bar&#39;
] );nt *nt * @param {Object} consumables <a
href="../../../../Object.html">Object</a> describing which parts of the
element should be tested.nt * @param {Boolean} consumables.name If set to
`true` element&#39;s name will be tested.nt * @param
{String|Array.&lt;String&gt;} consumables.attributes Attribute name or
array of attribute names to test.nt * @param {String|Array.&lt;String&gt;}
consumables.classes Class name or array of class names to test.nt * @param
{String|Array.&lt;String&gt;} consumables.styles Style name or array of
style names to test.nt * @returns {Boolean|null} `true` when all tested
items can be consumed, `null` when even one of the itemsnt * was never
marked for consumption and `false` when even one of the items was already
consumed.nt */nttest( consumables ) {ntt// Check if name can be
consumed.nttif ( consumables.name &amp;&amp; !this._canConsumeName )
{ntttreturn this._canConsumeName;ntt}nnttfor ( const type in
this._consumables ) {ntttif ( type in consumables ) {nttttconst value =
this._test( type, consumables[ type ] );nnttttif ( value !== true )
{ntttttreturn value;ntttt}nttt}ntt}nntt// Return true only if all can be
consumed.nttreturn true;nt}nnt/**nt * Consumes parts of {@link
module:engine/view/element~Element view element}. This function does not
check if consumable itemnt * is already consumed - it consumes all
consumable items provided.nt * Element&#39;s name can be consumed:nt *nt
*ttconsumables.consume( { name: true } );nt *nt * Attributes classes and
styles:nt *nt *ttconsumables.consume( { attributes: &#39;title&#39;,
classes: &#39;foo&#39;, styles: &#39;color&#39; } );nt
*ttconsumables.consume( { attributes: [ &#39;title&#39;, &#39;name&#39; ],
classes: [ &#39;foo&#39;, &#39;bar&#39; ] );nt *nt * @param {Object}
consumables <a href="../../../../Object.html">Object</a> describing which
parts of the element should be consumed.nt * @param {Boolean}
consumables.name If set to `true` element&#39;s name will be consumed.nt *
@param {String|Array.&lt;String&gt;} consumables.attributes Attribute name
or array of attribute names to consume.nt * @param
{String|Array.&lt;String&gt;} consumables.classes Class name or array of
class names to consume.nt * @param {String|Array.&lt;String&gt;}
consumables.styles Style name or array of style names to consume.nt
*/ntconsume( consumables ) {nttif ( consumables.name )
{ntttthis._canConsumeName = false;ntt}nnttfor ( const type in
this._consumables ) {ntttif ( type in consumables ) {nttttthis._consume(
type, consumables[ type ] );nttt}ntt}nt}nnt/**nt * Revert already consumed
parts of {@link module:engine/view/element~Element view Element}, so they
can be consumed once again.nt * Element&#39;s name can be reverted:nt *nt
*ttconsumables.revert( { name: true } );nt *nt * Attributes classes and
styles:nt *nt *ttconsumables.revert( { attributes: &#39;title&#39;,
classes: &#39;foo&#39;, styles: &#39;color&#39; } );nt
*ttconsumables.revert( { attributes: [ &#39;title&#39;, &#39;name&#39; ],
classes: [ &#39;foo&#39;, &#39;bar&#39; ] );nt *nt * @param {Object}
consumables <a href="../../../../Object.html">Object</a> describing which
parts of the element should be reverted.nt * @param {Boolean}
consumables.name If set to `true` element&#39;s name will be reverted.nt *
@param {String|Array.&lt;String&gt;} consumables.attributes Attribute name
or array of attribute names to revert.nt * @param
{String|Array.&lt;String&gt;} consumables.classes Class name or array of
class names to revert.nt * @param {String|Array.&lt;String&gt;}
consumables.styles Style name or array of style names to revert.nt
*/ntrevert( consumables ) {nttif ( consumables.name )
{ntttthis._canConsumeName = true;ntt}nnttfor ( const type in
this._consumables ) {ntttif ( type in consumables ) {nttttthis._revert(
type, consumables[ type ] );nttt}ntt}nt}nnt/**nt * Helper method that adds
consumables of a given type: attribute, class or style.nt *nt * Throws
{@link module:utils/ckeditorerror~CKEditorError CKEditorError}
`viewconsumable-invalid-attribute` when `class` or `style`nt * type is
provided - it should be handled separately by providing actual style/class
type.nt *nt * @privatent * @param {String} type Type of the consumable
item: `attributes`, `classes` or `styles`.nt * @param
{String|Array.&lt;String&gt;} item Consumable item or array of items.nt
*/nt_add( type, item ) {nttconst items = isArray( item ) ? item : [ item
];nttconst consumables = this._consumables[ type ];nnttfor ( const name of
items ) {ntttif ( type === &#39;attributes&#39; &amp;&amp; ( name ===
&#39;class&#39; || name === &#39;style&#39; ) ) {ntttt/**ntttt * Class and
style attributes should be handled separately inntttt * {@link
module:engine/conversion/viewconsumable~ViewConsumable#add
`ViewConsumable#add()`}.ntttt *ntttt * What you have done is trying to
use:ntttt *ntttt *ttconsumables.add( { attributes: [ &#39;class&#39;,
&#39;style&#39; ] } );ntttt *ntttt * While each class and style should be
registered separately:ntttt *ntttt *ttconsumables.add( { classes:
&#39;some-class&#39;, styles: &#39;font-weight&#39; } );ntttt *ntttt *
@error viewconsumable-invalid-attributentttt */nttttthrow new
CKEditorError( &#39;viewconsumable-invalid-attribute: Classes and styles
should be handled separately.&#39; );nttt}nntttconsumables.set( name, true
);ntt}nt}nnt/**nt * Helper method that tests consumables of a given type:
attribute, class or style.nt *nt * @privatent * @param {String} type Type
of the consumable item: `attributes`, `classes` or `styles`.nt * @param
{String|Array.&lt;String&gt;} item Consumable item or array of items.nt *
@returns {Boolean|null} Returns `true` if all items can be consumed, `null`
when one of the items cannot bent * consumed and `false` when one of the
items is already consumed.nt */nt_test( type, item ) {nttconst items =
isArray( item ) ? item : [ item ];nttconst consumables = this._consumables[
type ];nnttfor ( const name of items ) {ntttif ( type ===
&#39;attributes&#39; &amp;&amp; ( name === &#39;class&#39; || name ===
&#39;style&#39; ) ) {nttttconst consumableName = name == &#39;class&#39; ?
&#39;classes&#39; : &#39;styles&#39;;nntttt// Check all classes/styles if
class/style attribute is tested.nttttconst value = this._test(
consumableName, [ …this._consumables[ consumableName ].keys() ] );nnttttif
( value !== true ) {ntttttreturn value;ntttt}nttt} else {nttttconst value =
consumables.get( name );ntttt// Return null if attribute is not
found.nttttif ( value === undefined ) {ntttttreturn null;ntttt}nnttttif (
!value ) {ntttttreturn false;ntttt}nttt}ntt}nnttreturn true;nt}nnt/**nt *
Helper method that consumes items of a given type: attribute, class or
style.nt *nt * @privatent * @param {String} type Type of the consumable
item: `attributes`, `classes` or `styles`.nt * @param
{String|Array.&lt;String&gt;} item Consumable item or array of items.nt
*/nt_consume( type, item ) {nttconst items = isArray( item ) ? item : [
item ];nttconst consumables = this._consumables[ type ];nnttfor ( const
name of items ) {ntttif ( type === &#39;attributes&#39; &amp;&amp; ( name
=== &#39;class&#39; || name === &#39;style&#39; ) ) {nttttconst
consumableName = name == &#39;class&#39; ? &#39;classes&#39; :
&#39;styles&#39;;nntttt// If class or style is provided for consumption -
consume them all.nttttthis._consume( consumableName, [ …this._consumables[
consumableName ].keys() ] );nttt} else {nttttconsumables.set( name, false
);nttt}ntt}nt}nnt/**nt * Helper method that reverts items of a given type:
attribute, class or style.nt *nt * @privatent * @param {String} type Type
of the consumable item: `attributes`, `classes` or , `styles`.nt * @param
{String|Array.&lt;String&gt;} item Consumable item or array of items.nt
*/nt_revert( type, item ) {nttconst items = isArray( item ) ? item : [ item
];nttconst consumables = this._consumables[ type ];nnttfor ( const name of
items ) {ntttif ( type === &#39;attributes&#39; &amp;&amp; ( name ===
&#39;class&#39; || name === &#39;style&#39; ) ) {nttttconst consumableName
= name == &#39;class&#39; ? &#39;classes&#39; : &#39;styles&#39;;nntttt//
If class or style is provided for reverting - revert them
all.nttttthis._revert( consumableName, [ …this._consumables[ consumableName
].keys() ] );nttt} else {nttttconst value = consumables.get( name
);nnttttif ( value === false ) {ntttttconsumables.set( name, true
);ntttt}nttt}ntt}nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/conversion/viewconsumable.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module engine/model/operation/attributeoperationn */nnimport
Operation from &#39;./operation&#39;;nimport Range from
&#39;../range&#39;;nimport CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nimport {
_setAttribute } from &#39;./utils&#39;;nimport isEqual from
&#39;@ckeditor/ckeditor5-utils/src/lib/lodash/isEqual&#39;;nn/**n *
Operation to change nodes&#39; attribute.n *n * Using this class you can
add, remove or change value of the attribute.n *n * @extends
module:engine/model/operation/operation~Operationn */nexport default class
AttributeOperation extends Operation {nt/**nt * Creates an operation that
changes, removes or adds attributes.nt *nt * If only `newValue` is set,
attribute will be added on a node. Note that all nodes in operation&#39;s
range must notnt * have an attribute with the same key as the added
attribute.nt *nt * If only `oldValue` is set, then attribute with given key
will be removed. Note that all nodes in operation&#39;s rangent * must have
an attribute with that key added.nt *nt * If both `newValue` and `oldValue`
are set, then the operation will change the attribute value. Note that all
nodes innt * operation&#39;s ranges must already have an attribute with
given key and `oldValue` as valuent *nt * @param
{module:engine/model/range~Range} range Range on which the operation should
be applied.nt * @param {String} key Key of an attribute to change or
remove.nt * @param {*} oldValue Old value of the attribute with given key
or `null`, if attribute was not set before.nt * @param {*} newValue New
value of the attribute with given key or `null`, if operation should remove
attribute.nt * @param {Number|null} baseVersion Document {@link
module:engine/model/document~Document#version} on which operationnt * can
be applied or `null` if the operation operates on detached (non-document)
tree.nt */ntconstructor( range, key, oldValue, newValue, baseVersion )
{nttsuper( baseVersion );nntt/**ntt * Range on which operation should be
applied.ntt *ntt * @readonlyntt * @member
{module:engine/model/range~Range}ntt */nttthis.range =
Range.createFromRange( range );nntt/**ntt * Key of an attribute to change
or remove.ntt *ntt * @readonlyntt * @member {String}ntt */nttthis.key =
key;nntt/**ntt * Old value of the attribute with given key or `null`, if
attribute was not set before.ntt *ntt * @readonlyntt * @member {*}ntt
*/nttthis.oldValue = oldValue === undefined ? null : oldValue;nntt/**ntt *
New value of the attribute with given key or `null`, if operation should
remove attribute.ntt *ntt * @readonlyntt * @member {*}ntt
*/nttthis.newValue = newValue === undefined ? null : newValue;nt}nnt/**nt *
@inheritDocnt */ntget type() {nttif ( this.oldValue === null ) {ntttreturn
&#39;addAttribute&#39;;ntt} else if ( this.newValue === null ) {ntttreturn
&#39;removeAttribute&#39;;ntt} else {ntttreturn
&#39;changeAttribute&#39;;ntt}nt}nnt/**nt * Creates and returns an
operation that has the same parameters as this operation.nt *nt * @returns
{module:engine/model/operation/attributeoperation~AttributeOperation} Clone
of this operation.nt */ntclone() {nttreturn new AttributeOperation(
this.range, this.key, this.oldValue, this.newValue, this.baseVersion
);nt}nnt/**nt * See {@link
module:engine/model/operation/operation~Operation#getReversed
`Operation#getReversed()`}.nt *nt * @returns
{module:engine/model/operation/attributeoperation~AttributeOperation}nt
*/ntgetReversed() {nttreturn new AttributeOperation( this.range, this.key,
this.newValue, this.oldValue, this.baseVersion + 1 );nt}nnt/**nt *
@inheritDocnt */nt_validate() {nttfor ( const item of this.range.getItems()
) {ntttif ( this.oldValue !== null &amp;&amp; !isEqual( item.getAttribute(
this.key ), this.oldValue ) ) {ntttt/**ntttt * Changed node has different
attribute value than operation&#39;s old attribute value.ntttt *ntttt *
@error attribute-operation-wrong-old-valuentttt * @param
{module:engine/model/item~Item} itemntttt * @param {String} keyntttt *
@param {*} valuentttt */nttttthrow new
CKEditorError(nttttt&#39;attribute-operation-wrong-old-value: Changed node
has different attribute value than operation\&#39;s &#39; +nttttt&#39;old
attribute value.&#39;,nttttt{ item, key: this.key, value: this.oldValue
}ntttt);nttt}nntttif ( this.oldValue === null &amp;&amp; this.newValue !==
null &amp;&amp; item.hasAttribute( this.key ) ) {ntttt/**ntttt * The
attribute with given key already exists for the given node.ntttt *ntttt *
@error attribute-operation-attribute-existsntttt * @param
{module:engine/model/node~Node} nodentttt * @param {String} keyntttt
*/nttttthrow new
CKEditorError(nttttt&#39;attribute-operation-attribute-exists: The
attribute with given key already exists.&#39;,nttttt{ node: item, key:
this.key }ntttt);nttt}ntt}nt}nnt/**nt * @inheritDocnt */nt_execute() {ntt//
If value to set is same as old value, don&#39;t do anything.nttif (
!isEqual( this.oldValue, this.newValue ) ) {nttt//
Execution.nttt_setAttribute( this.range, this.key, this.newValue
);ntt}nt}nnt/**nt * @inheritDocnt */ntstatic get className() {nttreturn
&#39;engine.model.operation.AttributeOperation&#39;;nt}nnt/**nt * Creates
`AttributeOperation` object from deserilized object, i.e. from parsed JSON
string.nt *nt * @param {Object} json Deserialized JSON object.nt * @param
{module:engine/model/document~Document} document Document on which this
operation will be applied.nt * @returns
{module:engine/model/operation/attributeoperation~AttributeOperation}nt
*/ntstatic fromJSON( json, document ) {nttreturn new AttributeOperation(
Range.fromJSON( json.range, document ), json.key, json.oldValue,
json.newValue, json.baseVersion );nt}n}nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-engine/src/model/operation/attributeoperation.jsn//
module id = nulln// module chunks = “,”/**n * @license Copyright ©
2003-2018, CKSource - Frederico Knabben. All rights reserved.n * For
licensing, see LICENSE.md.n */nn/**n * @module
engine/model/operation/moveoperationn */nnimport Operation from
&#39;./operation&#39;;nimport Position from &#39;../position&#39;;nimport
Range from &#39;../range&#39;;nimport CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nimport compareArrays
from &#39;@ckeditor/ckeditor5-utils/src/comparearrays&#39;;nimport { _move
} from &#39;./utils&#39;;nn/**n * Operation to move a range of {@link
module:engine/model/item~Item model items}n * to given {@link
module:engine/model/position~Position target position}.n *n * @extends
module:engine/model/operation/operation~Operationn */nexport default class
MoveOperation extends Operation {nt/**nt * Creates a move operation.nt *nt
* @param {module:engine/model/position~Position} sourcePositionnt *
Position before the first {@link module:engine/model/item~Item model item}
to move.nt * @param {Number} howMany Offset size of moved range. Moved
range will start from `sourcePosition` and end atnt * `sourcePosition` with
offset shifted by `howMany`.nt * @param
{module:engine/model/position~Position} targetPosition Position at which
moved nodes will be inserted.nt * @param {Number|null} baseVersion Document
{@link module:engine/model/document~Document#version} on which operationnt
* can be applied or `null` if the operation operates on detached
(non-document) tree.nt */ntconstructor( sourcePosition, howMany,
targetPosition, baseVersion ) {nttsuper( baseVersion );nntt/**ntt *
Position before the first {@link module:engine/model/item~Item model item}
to move.ntt *ntt * @member {module:engine/model/position~Position}
module:engine/model/operation/moveoperation~MoveOperation#sourcePositionntt
*/nttthis.sourcePosition = Position.createFromPosition( sourcePosition
);nntt/**ntt * Offset size of moved range.ntt *ntt * @member {Number}
module:engine/model/operation/moveoperation~MoveOperation#howManyntt
*/nttthis.howMany = howMany;nntt/**ntt * Position at which moved nodes will
be inserted.ntt *ntt * @member {module:engine/model/position~Position}
module:engine/model/operation/moveoperation~MoveOperation#targetPositionntt
*/nttthis.targetPosition = Position.createFromPosition( targetPosition
);nntt/**ntt * Defines whether `MoveOperation` is sticky. If
`MoveOperation` is sticky, duringntt * {@link
module:engine/model/operation/transform~transform operational
transformation} if there will be an operation thatntt * inserts some nodes
at the position equal to the boundary of this `MoveOperation`, that
operation willntt * get their insertion path updated to the position where
this `MoveOperation` moves the range.ntt *ntt * @member {Boolean}
module:engine/model/operation/moveoperation~MoveOperation#isStickyntt
*/nttthis.isSticky = false;nt}nnt/**nt * @inheritDocnt */ntget type()
{nttreturn &#39;move&#39;;nt}nnt/**nt * Creates and returns an operation
that has the same parameters as this operation.nt *nt * @returns
{module:engine/model/operation/moveoperation~MoveOperation} Clone of this
operation.nt */ntclone() {nttconst op = new this.constructor(
this.sourcePosition, this.howMany, this.targetPosition, this.baseVersion
);nttop.isSticky = this.isSticky;nnttreturn op;nt}nnt/**nt * Returns the
start position of the moved range after it got moved. This may be different
thannt * {@link
module:engine/model/operation/moveoperation~MoveOperation#targetPosition}
in some cases, i.e. when a range is movednt * inside the same parent but
{@link
module:engine/model/operation/moveoperation~MoveOperation#targetPosition
targetPosition}nt * is after {@link
module:engine/model/operation/moveoperation~MoveOperation#sourcePosition
sourcePosition}.nt *nt *tt vv              vvnt *ttabcdefg ===&gt;
adefbcgnt *tt     ^          ^nt *tt     targetPostmovedRangeStartnt *tt   
offset 6toffset 4nt *nt * @returns
{module:engine/model/position~Position}nt */ntgetMovedRangeStart()
{nttreturn this.targetPosition._getTransformedByDeletion(
this.sourcePosition, this.howMany );nt}nnt/**nt * See {@link
module:engine/model/operation/operation~Operation#getReversed
`Operation#getReversed()`}.nt *nt * @returns
{module:engine/model/operation/moveoperation~MoveOperation}nt
*/ntgetReversed() {nttconst newTargetPosition =
this.sourcePosition._getTransformedByInsertion( this.targetPosition,
this.howMany );nnttconst op = new this.constructor(
this.getMovedRangeStart(), this.howMany, newTargetPosition,
this.baseVersion + 1 );nttop.isSticky = this.isSticky;nnttreturn
op;nt}nnt/**nt * @inheritDocnt */nt_validate() {nttconst sourceElement =
this.sourcePosition.parent;nttconst targetElement =
this.targetPosition.parent;nttconst sourceOffset =
this.sourcePosition.offset;nttconst targetOffset =
this.targetPosition.offset;nntt// Validate whether move operation has
correct parameters.ntt// Validation is pretty complex but move operation is
one of the core ways to manipulate the document state.ntt// We expect that
many errors might be connected with one of scenarios described below.nttif
( !sourceElement || !targetElement ) {nttt/**nttt * Source position or
target position is invalid.nttt *nttt * @error
move-operation-position-invalidnttt */ntttthrow new
CKEditorError(ntttt&#39;move-operation-position-invalid: Source position or
target position is invalid.&#39;nttt);ntt} else if ( sourceOffset +
this.howMany &gt; sourceElement.maxOffset ) {nttt/**nttt * The nodes which
should be moved do not exist.nttt *nttt * @error
move-operation-nodes-do-not-existnttt */ntttthrow new
CKEditorError(ntttt&#39;move-operation-nodes-do-not-exist: The nodes which
should be moved do not exist.&#39;nttt);ntt} else if ( sourceElement ===
targetElement &amp;&amp; sourceOffset &lt; targetOffset &amp;&amp;
targetOffset &lt; sourceOffset + this.howMany ) {nttt/**nttt * Trying to
move a range of nodes into the middle of that range.nttt *nttt * @error
move-operation-range-into-itselfnttt */ntttthrow new
CKEditorError(ntttt&#39;move-operation-range-into-itself: Trying to move a
range of nodes to the inside of that range.&#39;nttt);ntt} else if (
this.sourcePosition.root == this.targetPosition.root ) {ntttif (
compareArrays( this.sourcePosition.getParentPath(),
this.targetPosition.getParentPath() ) == &#39;prefix&#39; ) {nttttconst i =
this.sourcePosition.path.length - 1;nnttttif ( this.targetPosition.path[ i
] &gt;= sourceOffset &amp;&amp; this.targetPosition.path[ i ] &lt;
sourceOffset + this.howMany ) {nttttt/**nttttt * Trying to move a range of
nodes into one of nodes from that range.nttttt *nttttt * @error
move-operation-node-into-itselfnttttt */ntttttthrow new
CKEditorError(ntttttt&#39;move-operation-node-into-itself: Trying to move a
range of nodes into one of nodes from that
range.&#39;nttttt);ntttt}nttt}ntt}nt}nnt/**nt * @inheritDocnt
*/nt_execute() {ntt_move( Range.createFromPositionAndShift(
this.sourcePosition, this.howMany ), this.targetPosition );nt}nnt/**nt *
@inheritDocnt */ntstatic get className() {nttreturn
&#39;engine.model.operation.MoveOperation&#39;;nt}nnt/**nt * Creates
`MoveOperation` object from deserilized object, i.e. from parsed JSON
string.nt *nt * @param {Object} json Deserialized JSON object.nt * @param
{module:engine/model/document~Document} document Document on which this
operation will be applied.nt * @returns
{module:engine/model/operation/moveoperation~MoveOperation}nt */ntstatic
fromJSON( json, document ) {nttconst sourcePosition = Position.fromJSON(
json.sourcePosition, document );nttconst targetPosition =
Position.fromJSON( json.targetPosition, document );nnttconst move = new
this( sourcePosition, json.howMany, targetPosition, json.baseVersion
);nnttif ( json.isSticky ) {ntttmove.isSticky = true;ntt}nnttreturn
move;nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/operation/moveoperation.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module engine/model/operation/reinsertoperationn
*/nnimport MoveOperation from &#39;./moveoperation&#39;;nimport
RemoveOperation from &#39;./removeoperation&#39;;nimport CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nn/**n * Operation to
reinsert previously removed nodes back to the non-graveyard root. This
operation acts liken * {@link
module:engine/model/operation/moveoperation~MoveOperation} but it returnsn
* {@link module:engine/model/operation/removeoperation~RemoveOperation}
when reversedn * and fires different change event.n */nexport default class
ReinsertOperation extends MoveOperation {nt/**nt * Position where nodes
will be re-inserted.nt *nt * @type
{module:engine/model/position~Position}nt */ntget position() {nttreturn
this.targetPosition;nt}nnt/**nt * @param
{module:engine/model/position~Position} posnt */ntset position( pos )
{nttthis.targetPosition = pos;nt}nnt/**nt * @inheritDocnt */ntget type()
{nttreturn &#39;reinsert&#39;;nt}nnt/**nt * See {@link
module:engine/model/operation/operation~Operation#getReversed
`Operation#getReversed()`}.nt *nt * @returns
{module:engine/model/operation/removeoperation~RemoveOperation}nt
*/ntgetReversed() {nttconst newTargetPosition =
this.sourcePosition._getTransformedByInsertion( this.targetPosition,
this.howMany );nnttreturn new RemoveOperation( this.getMovedRangeStart(),
this.howMany, newTargetPosition, this.baseVersion + 1 );nt}nnt/**nt *
@inheritDocnt */nt_validate() {nttsuper._validate();nnttif (
!this.sourcePosition.root.document ) {ntttthrow new CKEditorError(
&#39;reinsert-operation-on-detached-item: Cannot reinsert detached
item.&#39; );ntt}nnttif ( !this.targetPosition.root.document ) {ntttthrow
new CKEditorError( &#39;reinsert-operation-to-detached-parent: Cannot
reinsert item to detached parent.&#39; );ntt}nt}nnt/**nt * @inheritDocnt
*/ntstatic get className() {nttreturn
&#39;engine.model.operation.ReinsertOperation&#39;;nt}n}nnnn//////////////////n//
WEBPACK FOOTERn//
../ckeditor5-engine/src/model/operation/reinsertoperation.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module engine/model/operation/removeoperationn
*/nnimport MoveOperation from &#39;./moveoperation&#39;;nimport
ReinsertOperation from &#39;./reinsertoperation&#39;;nimport CKEditorError
from &#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nn/**n *
Operation to remove a range of nodes.n */nexport default class
RemoveOperation extends MoveOperation {nt/**nt * @inheritDocnt */ntget
type() {nttreturn &#39;remove&#39;;nt}nnt/**nt * See {@link
module:engine/model/operation/operation~Operation#getReversed
`Operation#getReversed()`}.nt *nt * @returns
{module:engine/model/operation/reinsertoperation~ReinsertOperation|module:engine/model/operation/nooperation~NoOperation}nt
*/ntgetReversed() {nttconst newTargetPosition =
this.sourcePosition._getTransformedByInsertion( this.targetPosition,
this.howMany );nnttreturn new ReinsertOperation( this.getMovedRangeStart(),
this.howMany, newTargetPosition, this.baseVersion + 1 );nt}nnt/**nt *
@inheritDocnt */nt_validate() {nttsuper._validate();nnttif (
!this.sourcePosition.root.document ) {nttt/**nttt * Item that is going to
be removed needs to be a {@link module:engine/model/document~Document
document} child.nttt * To remove Item from detached document fragment
usenttt * {@link
module:engine/model/operation/detachoperation~DetachOperation
DetachOperation}.nttt *nttt * @error remove-operation-on-detached-itemnttt
*/ntttthrow new CKEditorError( &#39;remove-operation-on-detached-item:
Cannot remove detached item.&#39; );ntt}nt}nnt/**nt * @inheritDocnt
*/ntstatic get className() {nttreturn
&#39;engine.model.operation.RemoveOperation&#39;;nt}n}nnnn//////////////////n//
WEBPACK FOOTERn//
../ckeditor5-engine/src/model/operation/removeoperation.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module engine/model/operation/insertoperationn
*/nnimport Operation from &#39;./operation&#39;;nimport Position from
&#39;../position&#39;;nimport NodeList from &#39;../nodelist&#39;;nimport
RemoveOperation from &#39;./removeoperation&#39;;nimport { _insert,
_normalizeNodes } from &#39;./utils&#39;;nimport Text from
&#39;../text&#39;;nimport Element from &#39;../element&#39;;nimport
CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nn/**n * Operation to
insert one or more nodes at given position in the model.n *n * @extends
module:engine/model/operation/operation~Operationn */nexport default class
InsertOperation extends Operation {nt/**nt * Creates an insert operation.nt
*nt * @param {module:engine/model/position~Position} position Position of
insertion.nt * @param {module:engine/model/node~NodeSet} nodes The list of
nodes to be inserted.nt * @param {Number|null} baseVersion Document {@link
module:engine/model/document~Document#version} on which operationnt * can
be applied or `null` if the operation operates on detached (non-document)
tree.nt */ntconstructor( position, nodes, baseVersion ) {nttsuper(
baseVersion );nntt/**ntt * Position of insertion.ntt *ntt * @readonlyntt *
@member {module:engine/model/position~Position}
module:engine/model/operation/insertoperation~InsertOperation#positionntt
*/nttthis.position = Position.createFromPosition( position );nntt/**ntt *
List of nodes to insert.ntt *ntt * @readonlyntt * @member
{module:engine/model/nodelist~NodeList}
module:engine/model/operation/insertoperation~InsertOperation#nodeListntt
*/nttthis.nodes = new NodeList( _normalizeNodes( nodes ) );nt}nnt/**nt *
@inheritDocnt */ntget type() {nttreturn &#39;insert&#39;;nt}nnt/**nt *
Creates and returns an operation that has the same parameters as this
operation.nt *nt * @returns
{module:engine/model/operation/insertoperation~InsertOperation} Clone of
this operation.nt */ntclone() {nttconst nodes = new NodeList( [ …this.nodes
].map( node =&gt; node._clone( true ) ) );nnttreturn new InsertOperation(
this.position, nodes, this.baseVersion );nt}nnt/**nt * See {@link
module:engine/model/operation/operation~Operation#getReversed
`Operation#getReversed()`}.nt *nt * @returns
{module:engine/model/operation/removeoperation~RemoveOperation}nt
*/ntgetReversed() {nttconst graveyard =
this.position.root.document.graveyard;nttconst gyPosition = new Position(
graveyard, [ 0 ] );nnttreturn new RemoveOperation( this.position,
this.nodes.maxOffset, gyPosition, this.baseVersion + 1 );nt}nnt/**nt *
@inheritDocnt */nt_validate() {nttconst targetElement =
this.position.parent;nnttif ( !targetElement || targetElement.maxOffset
&lt; this.position.offset ) {nttt/**nttt * Insertion position is
invalid.nttt *nttt * @error insert-operation-position-invalidnttt
*/ntttthrow new CKEditorError(ntttt&#39;insert-operation-position-invalid:
Insertion position is invalid.&#39;nttt);ntt}nt}nnt/**nt * @inheritDocnt
*/nt_execute() {ntt// What happens here is that we want original nodes be
passed to writer because we want original nodesntt// to be inserted to the
model. But in InsertOperation, we want to keep those nodes as they were
addedntt// to the operation, not modified. For example, text nodes can get
merged or cropped while Elements canntt// get children. It is important
that InsertOperation has the copy of original nodes in intact
state.nttconst originalNodes = this.nodes;nttthis.nodes = new NodeList( [
…originalNodes ].map( node =&gt; node._clone( true ) ) );nntt_insert(
this.position, originalNodes );nt}nnt/**nt * @inheritDocnt */ntstatic get
className() {nttreturn
&#39;engine.model.operation.InsertOperation&#39;;nt}nnt/**nt * Creates
`InsertOperation` object from deserilized object, i.e. from parsed JSON
string.nt *nt * @param {Object} json Deserialized JSON object.nt * @param
{module:engine/model/document~Document} document Document on which this
operation will be applied.nt * @returns
{module:engine/model/operation/insertoperation~InsertOperation}nt
*/ntstatic fromJSON( json, document ) {nttconst children = [];nnttfor (
const child of json.nodes ) {ntttif ( child.name ) {ntttt// If child has
name property, it is an Element.nttttchildren.push( Element.fromJSON( child
) );nttt} else {ntttt// Otherwise, it is a Text node.nttttchildren.push(
Text.fromJSON( child ) );nttt}ntt}nnttreturn new InsertOperation(
Position.fromJSON( json.position, document ), children, json.baseVersion
);nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/operation/insertoperation.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module engine/model/operation/markeroperationn
*/nnimport Operation from &#39;./operation&#39;;nimport Range from
&#39;../range&#39;;nn/**n * @extends
module:engine/model/operation/operation~Operationn */nexport default class
MarkerOperation extends Operation {nt/**nt * @param {String} name Marker
name.nt * @param {module:engine/model/range~Range} oldRange Marker range
before the change.nt * @param {module:engine/model/range~Range} newRange
Marker range after the change.nt * @param
{module:engine/model/markercollection~MarkerCollection} markers Marker
collection on which change should be executed.nt * @param {Number|null}
baseVersion Document {@link module:engine/model/document~Document#version}
on which operationnt * can be applied or `null` if the operation operates
on detached (non-document) tree.nt */ntconstructor( name, oldRange,
newRange, markers, baseVersion ) {nttsuper( baseVersion );nntt/**ntt *
Marker name.ntt *ntt * @readonlyntt * @member {String}ntt */nttthis.name =
name;nntt/**ntt * Marker range before the change.ntt *ntt * @readonlyntt *
@member {module:engine/model/range~Range}ntt */nttthis.oldRange = oldRange
? Range.createFromRange( oldRange ) : null;nntt/**ntt * Marker range after
the change.ntt *ntt * @readonlyntt * @member
{module:engine/model/range~Range}ntt */nttthis.newRange = newRange ?
Range.createFromRange( newRange ) : null;nntt/**ntt * Marker collection on
which change should be executed.ntt *ntt * @privatentt * @member
{module:engine/model/markercollection~MarkerCollection}ntt
*/nttthis._markers = markers;nt}nnt/**nt * @inheritDocnt */ntget type()
{nttreturn &#39;marker&#39;;nt}nnt/**nt * Creates and returns an operation
that has the same parameters as this operation.nt *nt * @returns
{module:engine/model/operation/markeroperation~MarkerOperation} Clone of
this operation.nt */ntclone() {nttreturn new MarkerOperation( this.name,
this.oldRange, this.newRange, this._markers, this.baseVersion );nt}nnt/**nt
* See {@link module:engine/model/operation/operation~Operation#getReversed
`Operation#getReversed()`}.nt *nt * @returns
{module:engine/model/operation/markeroperation~MarkerOperation}nt
*/ntgetReversed() {nttreturn new MarkerOperation( this.name, this.newRange,
this.oldRange, this._markers, this.baseVersion + 1 );nt}nnt/**nt *
@inheritDocnt */nt_execute() {nttconst type = this.newRange ?
&#39;_set&#39; : &#39;_remove&#39;;nnttthis._markers[ type ]( this.name,
this.newRange, true );nt}nnt/**nt * @inheritDocnt */nttoJSON() {nttconst
json = super.toJSON();nnttdelete json._markers;nnttreturn json;nt}nnt/**nt
* @inheritDocnt */ntstatic get className() {nttreturn
&#39;engine.model.operation.MarkerOperation&#39;;nt}nnt/**nt * Creates
`MarkerOperation` object from deserilized object, i.e. from parsed JSON
string.nt *nt * @param {Object} json Deserialized JSON object.nt * @param
{module:engine/model/document~Document} document Document on which this
operation will be applied.nt * @returns
{module:engine/model/operation/markeroperation~MarkerOperation}nt
*/ntstatic fromJSON( json, document ) {nttreturn new
MarkerOperation(ntttjson.name,ntttjson.oldRange ? Range.fromJSON(
json.oldRange, document ) : null,ntttjson.newRange ? Range.fromJSON(
json.newRange, document ) :
null,ntttdocument.model.markers,ntttjson.baseVersionntt);nt}n}nnnn//////////////////n//
WEBPACK FOOTERn//
../ckeditor5-engine/src/model/operation/markeroperation.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module engine/model/operation/nooperationn
*/nnimport Operation from &#39;./operation&#39;;nn/**n * Operation which is
doing nothing (&quot;empty operation&quot;, "do-nothing operation&quot;,
"noop&quot;). This is an operation,n * which when executed does not change
the tree model. It still has some parameters defined for transformation
purposes.n *n * In most cases this operation is a result of transforming
operations. When transformation returnsn * {@link
module:engine/model/operation/nooperation~NoOperation} it means that
changes done by the transformed operationn * have already been applied.n *n
* @extends module:engine/model/operation/operation~Operationn */nexport
default class NoOperation extends Operation {ntget type() {nttreturn
&#39;noop&#39;;nt}nnt/**nt * Creates and returns an operation that has the
same parameters as this operation.nt *nt * @returns
{module:engine/model/operation/nooperation~NoOperation} Clone of this
operation.nt */ntclone() {nttreturn new NoOperation( this.baseVersion
);nt}nnt/**nt * See {@link
module:engine/model/operation/operation~Operation#getReversed
`Operation#getReversed()`}.nt *nt * @returns
{module:engine/model/operation/nooperation~NoOperation}nt */ntgetReversed()
{nttreturn new NoOperation( this.baseVersion + 1 );nt}nnt_execute()
{nt}nnt/**nt * @inheritDocnt */ntstatic get className() {nttreturn
&#39;engine.model.operation.NoOperation&#39;;nt}n}nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-engine/src/model/operation/nooperation.jsn//
module id = nulln// module chunks = “,”/**n * @license Copyright ©
2003-2018, CKSource - Frederico Knabben. All rights reserved.n * For
licensing, see LICENSE.md.n */nn/**n * @module
engine/model/operation/renameoperationn */nnimport Operation from
&#39;./operation&#39;;nimport Element from &#39;../element&#39;;nimport
CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nimport Position from
&#39;../position&#39;;nn/**n * Operation to change element&#39;s name.n *n
* Using this class you can change element&#39;s name.n *n * @extends
module:engine/model/operation/operation~Operationn */nexport default class
RenameOperation extends Operation {nt/**nt * Creates an operation that
changes element&#39;s name.nt *nt * @param
{module:engine/model/position~Position} position Position before an element
to change.nt * @param {String} oldName Current name of the element.nt *
@param {String} newName New name for the element.nt * @param {Number|null}
baseVersion Document {@link module:engine/model/document~Document#version}
on which operationnt * can be applied or `null` if the operation operates
on detached (non-document) tree.nt */ntconstructor( position, oldName,
newName, baseVersion ) {nttsuper( baseVersion );nntt/**ntt * Position
before an element to change.ntt *ntt * @member
{module:engine/model/position~Position}
module:engine/model/operation/renameoperation~RenameOperation#positionntt
*/nttthis.position = position;nntt/**ntt * Current name of the element.ntt
*ntt * @member {String}
module:engine/model/operation/renameoperation~RenameOperation#oldNamentt
*/nttthis.oldName = oldName;nntt/**ntt * New name for the element.ntt *ntt
* @member {String}
module:engine/model/operation/renameoperation~RenameOperation#newNamentt
*/nttthis.newName = newName;nt}nnt/**nt * @inheritDocnt */ntget type()
{nttreturn &#39;rename&#39;;nt}nnt/**nt * Creates and returns an operation
that has the same parameters as this operation.nt *nt * @returns
{module:engine/model/operation/renameoperation~RenameOperation} Clone of
this operation.nt */ntclone() {nttreturn new RenameOperation(
Position.createFromPosition( this.position ), this.oldName, this.newName,
this.baseVersion );nt}nnt/**nt * See {@link
module:engine/model/operation/operation~Operation#getReversed
`Operation#getReversed()`}.nt *nt * @returns
{module:engine/model/operation/renameoperation~RenameOperation}nt
*/ntgetReversed() {nttreturn new RenameOperation(
Position.createFromPosition( this.position ), this.newName, this.oldName,
this.baseVersion + 1 );nt}nnt/**nt * @inheritDocnt */nt_validate()
{nttconst element = this.position.nodeAfter;nnttif ( !( element instanceof
Element ) ) {nttt/**nttt * Given position is invalid or node after it is
not instance of Element.nttt *nttt * @error
rename-operation-wrong-positionnttt */ntttthrow new
CKEditorError(ntttt&#39;rename-operation-wrong-position: Given position is
invalid or node after it is not an instance of Element.&#39;nttt);ntt} else
if ( element.name !== this.oldName ) {nttt/**nttt * Element to change has
different name than operation&#39;s old name.nttt *nttt * @error
rename-operation-wrong-namenttt */ntttthrow new
CKEditorError(ntttt&#39;rename-operation-wrong-name: Element to change has
different name than operation\&#39;s old name.&#39;nttt);ntt}nt}nnt/**nt *
@inheritDocnt */nt_execute() {nttconst element =
this.position.nodeAfter;nnttelement.name = this.newName;nt}nnt/**nt *
@inheritDocnt */ntstatic get className() {nttreturn
&#39;engine.model.operation.RenameOperation&#39;;nt}nnt/**nt * Creates
`RenameOperation` object from deserialized object, i.e. from parsed JSON
string.nt *nt * @param {Object} json Deserialized JSON object.nt * @param
{module:engine/model/document~Document} document Document on which this
operation will be applied.nt * @returns
{module:engine/model/operation/attributeoperation~AttributeOperation}nt
*/ntstatic fromJSON( json, document ) {nttreturn new RenameOperation(
Position.fromJSON( json.position, document ), json.oldName, json.newName,
json.baseVersion );nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/operation/renameoperation.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module
engine/model/operation/rootattributeoperationn */nnimport Operation from
&#39;./operation&#39;;nimport CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nn/**n * Operation to
change root element&#39;s attribute. Using this class you can add, remove
or change value of the attribute.n *n * This operation is needed, because
root elements can&#39;t be changed throughn * @link
module:engine/model/operation/attributeoperation~AttributeOperation}.n * It
is because {@link
module:engine/model/operation/attributeoperation~AttributeOperation}n *
requires a range to change and root element can&#39;tn * be a part of range
because every {@link module:engine/model/position~Position} has to be
inside a root.n * {@link module:engine/model/position~Position} can&#39;t
be created before a root element.n *n * @extends
module:engine/model/operation/operation~Operationn */nexport default class
RootAttributeOperation extends Operation {nt/**nt * Creates an operation
that changes, removes or adds attributes on root element.nt *nt * @see
module:engine/model/operation/attributeoperation~AttributeOperationnt *
@param {module:engine/model/rootelement~RootElement} root Root element to
change.nt * @param {String} key Key of an attribute to change or remove.nt
* @param {*} oldValue Old value of the attribute with given key or `null`
if adding a new attribute.nt * @param {*} newValue New value to set for the
attribute. If `null`, then the operation just removes the attribute.nt *
@param {Number|null} baseVersion Document {@link
module:engine/model/document~Document#version} on which operationnt * can
be applied or `null` if the operation operates on detached (non-document)
tree.nt */ntconstructor( root, key, oldValue, newValue, baseVersion )
{nttsuper( baseVersion );nntt/**ntt * Root element to change.ntt *ntt *
@readonlyntt * @member {module:engine/model/rootelement~RootElement}ntt
*/nttthis.root = root;nntt/**ntt * Key of an attribute to change or
remove.ntt *ntt * @readonlyntt * @member {String}ntt */nttthis.key =
key;nntt/**ntt * Old value of the attribute with given key or `null` if
adding a new attribute.ntt *ntt * @readonlyntt * @member {*}ntt
*/nttthis.oldValue = oldValue;nntt/**ntt * New value to set for the
attribute. If `null`, then the operation just removes the attribute.ntt
*ntt * @readonlyntt * @member {*}ntt */nttthis.newValue =
newValue;nt}nnt/**nt * @inheritDocnt */ntget type() {nttif ( this.oldValue
=== null ) {ntttreturn &#39;addRootAttribute&#39;;ntt} else if (
this.newValue === null ) {ntttreturn &#39;removeRootAttribute&#39;;ntt}
else {ntttreturn &#39;changeRootAttribute&#39;;ntt}nt}nnt/**nt * Creates
and returns an operation that has the same parameters as this operation.nt
*nt * @returns
{module:engine/model/operation/rootattributeoperation~RootAttributeOperation}
Clone of this operation.nt */ntclone() {nttreturn new
RootAttributeOperation( this.root, this.key, this.oldValue, this.newValue,
this.baseVersion );nt}nnt/**nt * See {@link
module:engine/model/operation/operation~Operation#getReversed
`Operation#getReversed()`}.nt *nt * @returns
{module:engine/model/operation/rootattributeoperation~RootAttributeOperation}nt
*/ntgetReversed() {nttreturn new RootAttributeOperation( this.root,
this.key, this.newValue, this.oldValue, this.baseVersion + 1 );nt}nnt/**nt
* @inheritDocnt */nt_validate() {nttif ( this.root != this.root.root ||
this.root.is( &#39;documentFragment&#39; ) ) {nttt/**nttt * The element to
change is not a root element.nttt *nttt * @error
rootattribute-operation-not-a-rootnttt * @param
{module:engine/model/rootelement~RootElement} rootnttt * @param {String}
keynttt * @param {*} valuenttt */ntttthrow new
CKEditorError(ntttt&#39;rootattribute-operation-not-a-root: The element to
change is not a root element.&#39;,ntttt{ root: this.root, key: this.key
}nttt);ntt}nnttif ( this.oldValue !== null &amp;&amp;
this.root.getAttribute( this.key ) !== this.oldValue ) {nttt/**nttt * The
attribute which should be removed does not exists for the given node.nttt
*nttt * @error rootattribute-operation-wrong-old-valuenttt * @param
{module:engine/model/rootelement~RootElement} rootnttt * @param {String}
keynttt * @param {*} valuenttt */ntttthrow new
CKEditorError(ntttt&#39;rootattribute-operation-wrong-old-value: Changed
node has different attribute value than operation\&#39;s &#39;
+ntttt&#39;old attribute value.&#39;,ntttt{ root: this.root, key: this.key
}nttt);ntt}nnttif ( this.oldValue === null &amp;&amp; this.newValue !==
null &amp;&amp; this.root.hasAttribute( this.key ) ) {nttt/**nttt * The
attribute with given key already exists for the given node.nttt *nttt *
@error rootattribute-operation-attribute-existsnttt * @param
{module:engine/model/rootelement~RootElement} rootnttt * @param {String}
keynttt */ntttthrow new
CKEditorError(ntttt&#39;rootattribute-operation-attribute-exists: The
attribute with given key already exists.&#39;,ntttt{ root: this.root, key:
this.key }nttt);ntt}nt}nnt/**nt * @inheritDocnt */nt_execute() {nttif (
this.newValue !== null ) {ntttthis.root._setAttribute( this.key,
this.newValue );ntt} else {ntttthis.root._removeAttribute( this.key
);ntt}nt}nnt/**nt * @inheritDocnt */ntstatic get className() {nttreturn
&#39;engine.model.operation.RootAttributeOperation&#39;;nt}nnt/**nt *
Creates RootAttributeOperation object from deserilized object, i.e. from
parsed JSON string.nt *nt * @param {Object} json Deserialized JSON
object.nt * @param {module:engine/model/document~Document} document
Document on which this operation will be applied.nt * @returns
{module:engine/model/operation/rootattributeoperation~RootAttributeOperation}nt
*/ntstatic fromJSON( json, document ) {nttif ( !document.getRoot( json.root
) ) {nttt/**nttt * Cannot create RootAttributeOperation for document. Root
with specified name does not exist.nttt *nttt * @error
rootattributeoperation-fromjson-no-rootnttt * @param {String} rootNamenttt
*/ntttthrow new
CKEditorError(ntttt&#39;rootattribute-operation-fromjson-no-root: Cannot
create RootAttributeOperation. Root with specified name does not
exist.&#39;,ntttt{ rootName: json }nttt);ntt}nnttreturn new
RootAttributeOperation( document.getRoot( json.root ), json.key,
json.oldValue, json.newValue, json.baseVersion
);nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/operation/rootattributeoperation.jsn// module
id = nulln// module chunks = “,”/**n * @license Copyright © 2003-2018,
CKSource - Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module engine/model/operation/operationfactoryn
*/nnimport AttributeOperation from
&#39;../operation/attributeoperation&#39;;nimport InsertOperation from
&#39;../operation/insertoperation&#39;;nimport MarkerOperation from
&#39;../operation/markeroperation&#39;;nimport MoveOperation from
&#39;../operation/moveoperation&#39;;nimport NoOperation from
&#39;../operation/nooperation&#39;;nimport Operation from
&#39;../operation/operation&#39;;nimport ReinsertOperation from
&#39;../operation/reinsertoperation&#39;;nimport RemoveOperation from
&#39;../operation/removeoperation&#39;;nimport RenameOperation from
&#39;../operation/renameoperation&#39;;nimport RootAttributeOperation from
&#39;../operation/rootattributeoperation&#39;;nnconst operations =
{};noperations[ AttributeOperation.className ] =
AttributeOperation;noperations[ InsertOperation.className ] =
InsertOperation;noperations[ MarkerOperation.className ] =
MarkerOperation;noperations[ MoveOperation.className ] =
MoveOperation;noperations[ NoOperation.className ] =
NoOperation;noperations[ Operation.className ] = Operation;noperations[
ReinsertOperation.className ] = ReinsertOperation;noperations[
RemoveOperation.className ] = RemoveOperation;noperations[
RenameOperation.className ] = RenameOperation;noperations[
RootAttributeOperation.className ] = RootAttributeOperation;nn/**n * A
factory class for creating operations.n *n * @abstractn */nexport default
class OperationFactory {nt/**nt * Creates concrete `Operation` object from
deserilized object, i.e. from parsed JSON string.nt *nt * @param {Object}
json Deserialized JSON object.nt * @param
{module:engine/model/document~Document} document Document on which this
operation will be applied.nt * @returns
{module:engine/model/operation/operation~Operation}nt */ntstatic fromJSON(
json, document ) {nttreturn operations[ json.__className ].fromJSON( json,
document );nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/operation/operationfactory.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module engine/model/delta/deltafactoryn */nnimport
CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nnimport
OperationFactory from &#39;../operation/operationfactory&#39;;nnconst
deserializers = new Map();nn/**n * A factory class for creating
operations.n *n * Delta is a single, from the user action point of view,
change in the editable document, like insert, split orn * rename element.
Delta is composed of operations, which are unit changes needed to be done
to execute user action.n *n * Multiple deltas are grouped into a single
{@link module:engine/model/batch~Batch}.n */nexport default class
DeltaFactory {nt/**nt * Creates InsertDelta from deserialized object, i.e.
from parsed JSON string.nt *nt * @param {Object} jsonnt * @param
{module:engine/model/document~Document} doc Document on which this delta
will be applied.nt * @returns
{module:engine/model/delta/insertdelta~InsertDelta}nt */ntstatic fromJSON(
json, doc ) {nttif ( !deserializers.has( json.__className ) ) {nttt/**nttt
* This delta has no defined deserializer.nttt *nttt * @error
delta-fromjson-no-deserializernttt * @param {String} namenttt */ntttthrow
new CKEditorError(ntttt&#39;delta-fromjson-no-deserializer: This delta has
no defined deserializer&#39;,ntttt{ name: json.__className
}nttt);ntt}nnttconst Delta = deserializers.get( json.__className
);nnttconst delta = new Delta();nnttfor ( const operation of
json.operations ) {ntttdelta.addOperation( OperationFactory.fromJSON(
operation, doc ) );ntt}nntt// Rewrite all other properties.nttfor ( const
prop in json ) {ntttif ( prop != &#39;__className&#39; &amp;&amp; delta[
prop ] === undefined ) {nttttdelta[ prop ] = json[ prop
];nttt}ntt}nnttreturn delta;nt}nnt/**nt * Registers a class for delta
factory.nt *nt * @param {Function} Delta A delta class to register.nt
*/ntstatic register( Delta ) {nttdeserializers.set( Delta.className, Delta
);nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/delta/deltafactory.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module engine/model/delta/deltan */nnimport clone from
&#39;@ckeditor/ckeditor5-utils/src/lib/lodash/clone&#39;;nimport
DeltaFactory from &#39;./deltafactory&#39;;nn/**n * Base class for all
deltas.n *n * Delta is a single, from the user action point of view, change
in the editable document, like insert, split orn * rename element. Delta is
composed of operations, which are unit changes needed to be done to execute
user action.n *n * Multiple deltas are grouped into a single {@link
module:engine/model/batch~Batch}.n */nexport default class Delta {nt/**nt *
Creates a delta instance.nt */ntconstructor() {ntt/**ntt * {@link
module:engine/model/batch~Batch} which delta is a part of. This property is
null by default and set by thentt * {@link
module:engine/model/batch~Batch#addDelta} method.ntt *ntt * @readonlyntt *
@member {module:engine/model/batch~Batch}
module:engine/model/delta/delta~Delta#batchntt */nttthis.batch =
null;nntt/**ntt * Array of operations which compose delta.ntt *ntt *
@readonlyntt * @member
{module:engine/model/operation/operation~Operation[]}
module:engine/model/delta/delta~Delta#operationsntt */nttthis.operations =
[];nt}nnt/**nt * Returns delta base version which is equal to the base
version of the first operation in delta. If therent * are no operations in
delta, returns `null`.nt *nt * @see module:engine/model/document~Documentnt
* @type {Number|null}nt */ntget baseVersion() {nttif (
this.operations.length &gt; 0 ) {ntttreturn this.operations[ 0
].baseVersion;ntt}nnttreturn null;nt}nnt/**nt * @param {Number}
baseVersionnt */ntset baseVersion( baseVersion ) {nttfor ( const operation
of this.operations ) {ntttoperation.baseVersion =
baseVersion++;ntt}nt}nnt/**nt * A class that will be used when creating
reversed delta.nt *nt * @privatent * @type {Function}nt */ntget
_reverseDeltaClass() {nttreturn Delta;nt}nnt/**nt * Delta type.nt *nt *
@readonlynt * @member {String} typent */nnt/**nt * Add operation to the
delta.nt *nt * @param {module:engine/model/operation/operation~Operation}
operation Operation instance.nt */ntaddOperation( operation )
{nttoperation.delta = this;nttthis.operations.push( operation );nnttreturn
operation;nt}nnt/**nt * Creates and returns a delta that has the same
parameters as this delta.nt *nt * @returns
{module:engine/model/delta/delta~Delta} Clone of this delta.nt */ntclone()
{nttconst delta = new this.constructor();nnttfor ( const op of
this.operations ) {ntttdelta.addOperation( op.clone() );ntt}nnttreturn
delta;nt}nnt/**nt * Creates and returns a reverse delta. Reverse delta when
executed right after the original delta will bring backnt * tree model
state to the point before the original delta execution. In other words, it
reverses changes donent * by the original delta.nt *nt * Keep in mind that
tree model state may change since executing the original delta, so reverse
delta may be "outdated&quot;.nt * In that case you will need to {@link
module:engine/model/delta/transform~transform} it by all deltas that were
executed afternt * the original delta.nt *nt * @returns
{module:engine/model/delta/delta~Delta} Reversed delta.nt */ntgetReversed()
{nttconst delta = new this._reverseDeltaClass();nnttfor ( const op of
this.operations ) {ntttdelta.addOperation( op.getReversed()
);ntt}nnttdelta.operations.reverse();nnttfor ( let i = 0; i &lt;
delta.operations.length; i++ ) {ntttdelta.operations[ i ].baseVersion =
this.operations[ this.operations.length - 1 ].baseVersion + i +
1;ntt}nnttreturn delta;nt}nnt/**nt * Custom toJSON method to make deltas
serializable.nt *nt * @returns {Object} Clone of this delta with added
class name.nt */nttoJSON() {nttconst json = clone( this
);nnttjson.__className = this.constructor.className;nntt// Remove parent
batch to avoid circular dependencies.nttdelete json.batch;nnttreturn
json;nt}nnt/**nt * Delta class name. Used by {@link toJSON} method for
serialization andnt * {@link
module:engine/model/delta/deltafactory~DeltaFactory.fromJSON} during
deserialization.nt *nt * @type {String}nt * @readonlynt */ntstatic get
className() {nttreturn
&#39;engine.model.delta.Delta&#39;;nt}n}nnDeltaFactory.register( Delta
);nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/delta/delta.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module engine/model/delta/attributedeltan */nnimport Delta from
&#39;./delta&#39;;nimport DeltaFactory from
&#39;./deltafactory&#39;;nimport NoOperation from
&#39;../operation/nooperation&#39;;nimport Range from
&#39;../range&#39;;nn/**n * To provide specific OT behavior and better
collisions solving, methods to change attributesn * ({@link
module:engine/model/writer~Writer#setAttribute} and {@link
module:engine/model/writer~Writer#removeAttribute})n * use `AttributeDelta`
class which inherits from the `Delta` class and may overwrite some
methods.n *n * @extends module:engine/model/delta/delta~Deltan */nexport
default class AttributeDelta extends Delta {nt/**nt * @inheritDocnt */ntget
type() {nttreturn &#39;attribute&#39;;nt}nnt/**nt * The attribute key that
is changed by the delta or `null` if the delta has no operations.nt *nt *
@readonlynt * @type {String|null}nt */ntget key() {nttreturn
this.operations[ 0 ] ? this.operations[ 0 ].key : null;nt}nnt/**nt * The
attribute value that is set by the delta or `null` if the delta has no
operations.nt *nt * @readonlynt * @type {*|null}nt */ntget value()
{nttreturn this.operations[ 0 ] ? this.operations[ 0 ].newValue :
null;nt}nnt/**nt * The range on which delta operates or `null` if the delta
has no operations.nt *nt * @readonlynt * @type
{module:engine/model/range~Range|null}nt */ntget range() {ntt// Check if it
is cached.nttif ( this._range ) {ntttreturn this._range;ntt}nnttlet start =
null;nttlet end = null;nnttfor ( const operation of this.operations )
{ntttif ( operation instanceof NoOperation ) {nttttcontinue;nttt}nntttif (
start === null || start.isAfter( operation.range.start ) ) {nttttstart =
operation.range.start;nttt}nntttif ( end === null || end.isBefore(
operation.range.end ) ) {nttttend = operation.range.end;nttt}ntt}nnttif (
start &amp;&amp; end ) {ntttthis._range = new Range( start, end
);nntttreturn this._range;ntt}nnttreturn null;nt}nntget
_reverseDeltaClass() {nttreturn AttributeDelta;nt}nnt/**nt * @inheritDocnt
*/nttoJSON() {nttconst json = super.toJSON();nnttdelete
json._range;nnttreturn json;nt}nnt/**nt * @inheritDocnt */ntstatic get
className() {nttreturn
&#39;engine.model.delta.AttributeDelta&#39;;nt}n}nnDeltaFactory.register(
AttributeDelta );nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/delta/attributedelta.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module engine/model/delta/splitdeltan */nnimport
Delta from &#39;./delta&#39;;nimport DeltaFactory from
&#39;./deltafactory&#39;;nimport MoveOperation from
&#39;../operation/moveoperation&#39;;nimport MergeDelta from
&#39;../delta/mergedelta&#39;;nn/**n * To provide specific OT behavior and
better collisions solving, the {@link
module:engine/model/writer~Writer#split} methodn * uses `SplitDelta` class
which inherits from the `Delta` class and may overwrite some methods.n *n *
@extends module:engine/model/delta/delta~Deltan */nexport default class
SplitDelta extends Delta {nt/**nt * @inheritDocnt */ntget type() {nttreturn
&#39;split&#39;;nt}nnt/**nt * Position of split or `null` if there are no
operations in the delta.nt *nt * @type
{module:engine/model/position~Position|null}nt */ntget position()
{nttreturn this._moveOperation ? this._moveOperation.sourcePosition :
null;nt}nnt/**nt * Operation in the delta that adds to model an element
into which split nodes will be moved, or `null` ifnt * there are no
operations in the delta.nt *nt * Most commonly this will be {@link
module:engine/model/operation/insertoperation~InsertOperation an insert
operation},nt * as `SplitDelta` has to create a new node. If `SplitDelta`
was created throughnt * {@link
module:engine/model/delta/delta~Delta#getReversed reversing}nt * a {@link
module:engine/model/delta/mergedelta~MergeDelta merge delta},nt * this will
be a {@link
module:engine/model/operation/reinsertoperation~ReinsertOperation reinsert
operation},nt * as we will want to re-insert the exact element that was
removed by that merge delta.nt *nt * @protectednt * @type
{module:engine/model/operation/insertoperation~InsertOperation|nt *
module:engine/model/operation/reinsertoperation~ReinsertOperation|null}nt
*/ntget _cloneOperation() {nttreturn this.operations[ 0 ] ||
null;nt}nnt/**nt * Operation in the delta that moves model items, that are
after split position, to their new parent or `null`nt * if there are no
operations in the delta.nt *nt * @protectednt * @type
{module:engine/model/operation/moveoperation~MoveOperation|null}nt */ntget
_moveOperation() {nttreturn this.operations[ 1 ] &amp;&amp;
this.operations[ 1 ] instanceof MoveOperation ? this.operations[ 1 ] :
null;nt}nnt/**nt * @inheritDocnt */ntget _reverseDeltaClass() {nttreturn
MergeDelta;nt}nnt/**nt * @inheritDocnt */ntstatic get className()
{nttreturn
&#39;engine.model.delta.SplitDelta&#39;;nt}n}nnDeltaFactory.register(
SplitDelta );nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/delta/splitdelta.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module engine/model/delta/mergedeltan */nnimport Delta from
&#39;./delta&#39;;nimport DeltaFactory from
&#39;./deltafactory&#39;;nimport SplitDelta from
&#39;./splitdelta&#39;;nn/**n * To provide specific OT behavior and better
collisions solving, {@link module:engine/model/writer~Writer#merge} methodn
* uses the `MergeDelta` class which inherits from the `Delta` class and may
overwrite some methods.n *n * @extends
module:engine/model/delta/delta~Deltan */nexport default class MergeDelta
extends Delta {nt/**nt * @inheritDocnt */ntget type() {nttreturn
&#39;merge&#39;;nt}nnt/**nt * Position between to merged nodes or `null` if
the delta has no operations.nt *nt * @readonlynt * @type
{module:engine/model/position~Position|null}nt */ntget position()
{nttreturn this._removeOperation ? this._removeOperation.sourcePosition :
null;nt}nnt/**nt * Operation in this delta that removes the node after
merge position (which will be empty at that point) ornt * `null` if the
delta has no operations. Note, that after {@link
module:engine/model/delta/transform~transform transformation}nt * this
might be an instance of {@link
module:engine/model/operation/moveoperation~MoveOperation} instead ofnt *
{@link module:engine/model/operation/removeoperation~RemoveOperation}.nt
*nt * @readonlynt * @protectednt * @type
{module:engine/model/operation/moveoperation~MoveOperation|null}nt */ntget
_removeOperation() {nttreturn this.operations[ 1 ] || null;nt}nnt/**nt *
@inheritDocnt */ntget _reverseDeltaClass() {nttreturn
SplitDelta;nt}nnt/**nt * @inheritDocnt */ntstatic get className()
{nttreturn
&#39;engine.model.delta.MergeDelta&#39;;nt}n}nnDeltaFactory.register(
MergeDelta );nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/delta/mergedelta.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module engine/model/delta/movedeltan */nnimport Delta from
&#39;./delta&#39;;nimport DeltaFactory from &#39;./deltafactory&#39;;nn/**n
* To provide specific OT behavior and better collisions solving, {@link
module:engine/model/writer~Writer#move} methodn * uses the `MoveDelta`
class which inherits from the `Delta` class and may overwrite some
methods.n *n * @extends module:engine/model/delta/delta~Deltan */nexport
default class MoveDelta extends Delta {nt/**nt * @inheritDocnt */ntget
type() {nttreturn &#39;move&#39;;nt}nnt/**nt * Offset size of moved range
or `null` if there are no operations in the delta.nt *nt * @type
{Number|null}nt */ntget howMany() {nttreturn this._moveOperation ?
this._moveOperation.howMany : null;nt}nnt/**nt * {@link
module:engine/model/delta/movedelta~MoveDelta#_moveOperation Move
operation}nt * {@link
module:engine/model/operation/moveoperation~MoveOperation#sourcePosition
source position} or `null` if there arent * no operations in the delta.nt
*nt * @type {module:engine/model/position~Position|null}nt */ntget
sourcePosition() {nttreturn this._moveOperation ?
this._moveOperation.sourcePosition : null;nt}nnt/**nt * {@link
module:engine/model/delta/movedelta~MoveDelta#_moveOperation Move
operation}nt * {@link
module:engine/model/operation/moveoperation~MoveOperation#targetPosition
target position} or `null` if there arent * no operations in the delta.nt
*nt * @type {module:engine/model/position~Position|null}nt */ntget
targetPosition() {nttreturn this._moveOperation ?
this._moveOperation.targetPosition : null;nt}nnt/**nt * {@link
module:engine/model/delta/movedelta~MoveDelta#_moveOperation Move
operation} that is saved in this delta or `null`nt * if there are no
operations in the delta.nt *nt * @protectednt * @type
{module:engine/model/operation/moveoperation~MoveOperation|null}nt */ntget
_moveOperation() {nttreturn this.operations[ 0 ] || null;nt}nnt/**nt *
@inheritDocnt */ntget _reverseDeltaClass() {nttreturn MoveDelta;nt}nnt/**nt
* @inheritDocnt */ntstatic get className() {nttreturn
&#39;engine.model.delta.MoveDelta&#39;;nt}n}nnDeltaFactory.register(
MoveDelta );nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/delta/movedelta.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module engine/model/delta/removedeltan */nnimport MoveDelta
from &#39;./movedelta&#39;;nimport DeltaFactory from
&#39;./deltafactory&#39;;nn/**n * To provide specific OT behavior and
better collisions solving, {@link module:engine/model/writer~Writer#remove}
methodn * uses the `RemoveDelta` class which inherits from the `Delta`
class and may overwrite some methods.n *n * @extends
module:engine/model/delta/delta~Deltan */nexport default class RemoveDelta
extends MoveDelta {nt/**nt * @inheritDocnt */ntstatic get className()
{nttreturn
&#39;engine.model.delta.RemoveDelta&#39;;nt}n}nnDeltaFactory.register(
RemoveDelta );nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/delta/removedelta.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module engine/model/delta/renamedeltan */nnimport Delta from
&#39;./delta&#39;;nimport DeltaFactory from &#39;./deltafactory&#39;;nn/**n
* To provide specific OT behavior and better collisions solving, the {@link
module:engine/model/writer~Writer#rename Batch#rename} methodn * uses the
`RenameDelta` class which inherits from the `Delta` class and may overwrite
some methods.n *n * @extends module:engine/model/delta/delta~Deltan
*/nexport default class RenameDelta extends Delta {nt/**nt * @inheritDocnt
*/ntget type() {nttreturn &#39;rename&#39;;nt}nnt/**nt * @inheritDocnt
*/ntget _reverseDeltaClass() {nttreturn RenameDelta;nt}nnt/**nt *
@inheritDocnt */ntstatic get className() {nttreturn
&#39;engine.model.delta.RenameDelta&#39;;nt}n}nnDeltaFactory.register(
RenameDelta );nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/delta/renamedelta.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module engine/model/delta/wrapdeltan */nnimport Delta from
&#39;./delta&#39;;nimport DeltaFactory from
&#39;./deltafactory&#39;;nimport UnwrapDelta from
&#39;./unwrapdelta&#39;;nimport Range from &#39;../range&#39;;nn/**n * To
provide specific OT behavior and better collisions solving, {@link
module:engine/model/writer~Writer#merge} methodn * uses the `WrapDelta`
class which inherits from the `Delta` class and may overwrite some
methods.n *n * @extends module:engine/model/delta/delta~Deltan */nexport
default class WrapDelta extends Delta {nt/**nt * @inheritDocnt */ntget
type() {nttreturn &#39;wrap&#39;;nt}nnt/**nt * Range to wrap or `null` if
there are no operations in the delta.nt *nt * @type
{module:engine/model/range~Range|null}nt */ntget range() {nttconst moveOp =
this._moveOperation;nnttreturn moveOp ? Range.createFromPositionAndShift(
moveOp.sourcePosition, moveOp.howMany ) : null;nt}nnt/**nt * Offset size of
range to wrap by the delta or `null` if there are no operations in delta.nt
*nt * @type {Number}nt */ntget howMany() {nttconst range =
this.range;nnttreturn range ? range.end.offset - range.start.offset :
0;nt}nnt/* eslint-disable max-len */nt/**nt * Operation that inserts
wrapping element or `null` if there are no operations in the delta.nt *nt *
@protectednt * @type
{module:engine/model/operation/insertoperation~InsertOperation|module:engine/model/operation/reinsertoperation~ReinsertOperation}nt
*/nt/* eslint-enable max-len */ntget _insertOperation() {nttreturn
this.operations[ 0 ] || null;nt}nnt/**nt * Operation that moves wrapped
nodes to their new parent or `null` if there are no operations in the
delta.nt *nt * @protectednt * @type
{module:engine/model/operation/moveoperation~MoveOperation|null}nt */ntget
_moveOperation() {nttreturn this.operations[ 1 ] || null;nt}nnt/**nt *
@inheritDocnt */ntget _reverseDeltaClass() {nttreturn
UnwrapDelta;nt}nnt/**nt * @inheritDocnt */ntstatic get className()
{nttreturn
&#39;engine.model.delta.WrapDelta&#39;;nt}n}nnDeltaFactory.register(
WrapDelta );nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/delta/wrapdelta.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module engine/model/delta/unwrapdeltan */nnimport Delta from
&#39;./delta&#39;;nimport DeltaFactory from
&#39;./deltafactory&#39;;nimport WrapDelta from
&#39;./wrapdelta&#39;;nn/**n * To provide specific OT behavior and better
collisions solving, {@link module:engine/model/writer~Writer#merge} methodn
* uses the `UnwrapDelta` class which inherits from the `Delta` class and
may overwrite some methods.n *n * @extends
module:engine/model/delta/delta~Deltan */nexport default class UnwrapDelta
extends Delta {nt/**nt * @inheritDocnt */ntget type() {nttreturn
&#39;unwrap&#39;;nt}nnt/**nt * Position before unwrapped element or `null`
if there are no operations in the delta.nt *nt * @type
{module:engine/model/position~Position|null}nt */ntget position()
{nttreturn this._moveOperation ? this._moveOperation.targetPosition :
null;nt}nnt/**nt * Operation in the delta that moves unwrapped nodes to
their new parent or `null` if there are no operations in the delta.nt *nt *
@protectednt * @type
{module:engine/model/operation/moveoperation~MoveOperation|null}nt */ntget
_moveOperation() {nttreturn this.operations[ 0 ] || null;nt}nnt/**nt *
@inheritDocnt */ntget _reverseDeltaClass() {nttreturn WrapDelta;nt}nnt/**nt
* @inheritDocnt */ntstatic get className() {nttreturn
&#39;engine.model.delta.UnwrapDelta&#39;;nt}n}nnDeltaFactory.register(
UnwrapDelta );nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/delta/unwrapdelta.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module engine/model/delta/insertdeltan */nnimport Delta from
&#39;./delta&#39;;nimport RemoveDelta from &#39;./removedelta&#39;;nimport
DeltaFactory from &#39;./deltafactory&#39;;nn/**n * To provide specific OT
behavior and better collisions solving, the {@link
module:engine/model/writer~Writer#insert Batch#insert} methodn * uses the
`InsertDelta` class which inherits from the `Delta` class and may overwrite
some methods.n *n * @extends module:engine/model/delta/delta~Deltan
*/nexport default class InsertDelta extends Delta {nt/**nt * @inheritDocnt
*/ntget type() {nttreturn &#39;insert&#39;;nt}nnt/**nt * Position where the
delta inserts nodes or `null` if there are no operations in the delta.nt
*nt * @readonlynt * @type {module:engine/model/position~Position|null}nt
*/ntget position() {nttreturn this._insertOperation ?
this._insertOperation.position : null;nt}nnt/**nt * Node list containing
all the nodes inserted by the delta or `null` if there are no operations in
the delta.nt *nt * @readonlynt * @type
{module:engine/model/nodelist~NodeList|null}nt */ntget nodes() {nttreturn
this._insertOperation ? this._insertOperation.nodes : null;nt}nnt/**nt *
Insert operation that is saved in this delta or `null` if there are no
operations in the delta.nt *nt * @readonlynt * @protectednt * @type
{module:engine/model/operation/insertoperation~InsertOperation|null}nt
*/ntget _insertOperation() {nttreturn this.operations[ 0 ] ||
null;nt}nnt/**nt * @inheritDocnt */ntget _reverseDeltaClass() {nttreturn
RemoveDelta;nt}nnt/**nt * @inheritDocnt */ntstatic get className()
{nttreturn
&#39;engine.model.delta.InsertDelta&#39;;nt}n}nnDeltaFactory.register(
InsertDelta );nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/delta/insertdelta.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module engine/model/delta/weakinsertdeltan */nnimport
InsertDelta from &#39;./insertdelta&#39;;nimport DeltaFactory from
&#39;./deltafactory&#39;;nn/**n * To provide specific OT behavior and
better collisions solving, the {@link
module:engine/model/writer~Writer#insert} methodn * uses the
`WeakInsertDelta` class which inherits from the `Delta` class and may
overwrite some methods.n *n * @extends
module:engine/model/delta/delta~Deltan */nexport default class
WeakInsertDelta extends InsertDelta {nt/**nt * @inheritDocnt */ntstatic get
className() {nttreturn
&#39;engine.model.delta.WeakInsertDelta&#39;;nt}n}nnDeltaFactory.register(
WeakInsertDelta );nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/delta/weakinsertdelta.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module engine/model/delta/basic-deltasn */nn//
Deltas require `register` method that require `Batch` class and is defined
in batch-base.js.n// We would like to group all deltas files in one place,
so we would only have to include batch.jsn// which would already have all
default deltas registered.nn// Import default suite of deltas so a feature
have to include only Batch class file.nimport
&#39;./attributedelta&#39;;nimport &#39;./mergedelta&#39;;nimport
&#39;./movedelta&#39;;nimport &#39;./removedelta&#39;;nimport
&#39;./renamedelta&#39;;nimport &#39;./splitdelta&#39;;nimport
&#39;./unwrapdelta&#39;;nimport &#39;./weakinsertdelta&#39;;nimport
&#39;./wrapdelta&#39;;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/delta/basic-deltas.jsn// module id = nulln//
module chunks = “,”import baseSlice from &#39;./_baseSlice&#39;;nimport
isIterateeCall from &#39;./_isIterateeCall&#39;;nimport toInteger from
&#39;./toInteger&#39;;nn/* Built-in method references for those with the
same name as other `lodash` methods. */nvar nativeCeil = Math.ceil,n   
nativeMax = Math.max;nn/**n * Creates an array of elements split into
groups the length of `size`.n * If `array` can&#39;t be split evenly, the
final chunk will be the remainingn * elements.n *n * @staticn * @memberOf
_n * @since 3.0.0n * @category Arrayn * @param {Array} array The array to
process.n * @param {number} [size=1] The length of each chunkn * @param-
{Object} [guard] Enables use as an iteratee for methods like `_.map`.n *
@returns {Array} Returns the new array of chunks.n * @examplen *n *
_.chunk([&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;], 2);n * //
=&gt; [[&#39;a&#39;, &#39;b&#39;], [&#39;c&#39;, &#39;d&#39;]]n *n *
_.chunk([&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;], 3);n * //
=&gt; [[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;], [&#39;d&#39;]]n */nfunction
chunk(array, size, guard) {n  if ((guard ? isIterateeCall(array, size,
guard) : size === undefined)) {n    size = 1;n  } else {n    size =
nativeMax(toInteger(size), 0);n  }n  var length = array ? array.length :
0;n  if (!length || size &lt; 1) {n    return [];n  }n  var index = 0,n    
resIndex = 0,n      result = Array(nativeCeil(length / size));nn  while
(index &lt; length) {n    <a href="resIndex++">result</a> =
baseSlice(array, index, (index += size));n  }n  return result;n}nnexport
default chunk;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/chunk.jsn// module id = nulln// module
chunks = “,”import isArguments from &#39;./isArguments&#39;;nimport isArray
from &#39;./isArray&#39;;nn/**n * Checks if `value` is a flattenable
`arguments` object or array.n *n * @privaten * @param {*} value The value
to check.n * @returns {boolean} Returns `true` if `value` is flattenable,
else `false`.n */nfunction isFlattenable(value) {n  return isArray(value)
|| isArguments(value);n}nnexport default
isFlattenable;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_isFlattenable.jsn// module id = nulln//
module chunks = “,”import arrayPush from &#39;./_arrayPush&#39;;nimport
baseFlatten from &#39;./_baseFlatten&#39;;nimport copyArray from
&#39;./_copyArray&#39;;nimport isArray from &#39;./isArray&#39;;nn/**n *
Creates a new array concatenating `array` with any additional arraysn *
and/or values.n *n * @staticn * @memberOf _n * @since 4.0.0n * @category
Arrayn * @param {Array} array The array to concatenate.n * @param {…*}
[values] The values to concatenate.n * @returns {Array} Returns the new
concatenated array.n * @examplen *n * var array = [1];n * var other =
_.concat(array, 2, [3], [[4]]);n *n * console.log(other);n * // =&gt; [1,
2, 3, [4]]n *n * console.log(array);n * // =&gt; [1]n */nfunction concat()
{n  var length = arguments.length,n      args = Array(length ? length - 1 :
0),n      array = <a href="0">arguments</a>,n      index = length;nn  while
(index–) {n    args[index - 1] = <a href="index">arguments</a>;n  }n 
return lengthn    ? arrayPush(isArray(array) ? copyArray(array) : [array],
baseFlatten(args, 1))n    : [];n}nnexport default
concat;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/concat.jsn// module id = nulln// module
chunks = “,”import indexOfNaN from &#39;./_indexOfNaN&#39;;nn/**n * The
base implementation of `_.indexOf` without `fromIndex` bounds checks.n *n *
@privaten * @param {Array} array The array to search.n * @param {*} value
The value to search for.n * @param {number} fromIndex The index to search
from.n * @returns {number} Returns the index of the matched value, else
`-1`.n */nfunction baseIndexOf(array, value, fromIndex) {n  if (value !==
value) {n    return indexOfNaN(array, fromIndex);n  }n  var index =
fromIndex - 1,n      length = array.length;nn  while (++index &lt; length)
{n    if (<a href="index">array</a> === value) {n      return index;n    }n
}n  return -1;n}nnexport default baseIndexOf;nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-utils/src/lib/lodash/_baseIndexOf.jsn//
module id = nulln// module chunks = “,”/**n * Gets the index at which the
first occurrence of `NaN` is found in `array`.n *n * @privaten * @param
{Array} array The array to search.n * @param {number} fromIndex The index
to search from.n * @param {boolean} [fromRight] Specify iterating from
right to left.n * @returns {number} Returns the index of the matched `NaN`,
else `-1`.n */nfunction indexOfNaN(array, fromIndex, fromRight) {n  var
length = array.length,n      index = fromIndex + (fromRight ? 0 : -1);nn 
while ((fromRight ? index– : ++index &lt; length)) {n    var other = <a
href="index">array</a>;n    if (other !== other) {n      return index;n   
}n  }n  return -1;n}nnexport default indexOfNaN;nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-utils/src/lib/lodash/_indexOfNaN.jsn//
module id = nulln// module chunks = “,”import baseIndexOf from
&#39;./_baseIndexOf&#39;;nn/**n * A specialized version of `_.includes` for
arrays without support forn * specifying an index to search from.n *n *
@privaten * @param {Array} array The array to search.n * @param {*} target
The value to search for.n * @returns {boolean} Returns `true` if `target`
is found, else `false`.n */nfunction arrayIncludes(array, value) {n  return
!!array.length &amp;&amp; baseIndexOf(array, value, 0) &gt; -1;n}nnexport
default arrayIncludes;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_arrayIncludes.jsn// module id = nulln//
module chunks = “,”/**n * This function is like `arrayIncludes` except that
it accepts a comparator.n *n * @privaten * @param {Array} array The array
to search.n * @param {*} target The value to search for.n * @param
{Function} comparator The comparator invoked per element.n * @returns
{boolean} Returns `true` if `target` is found, else `false`.n */nfunction
arrayIncludesWith(array, value, comparator) {n  var index = -1,n     
length = array.length;nn  while (++index &lt; length) {n    if
(comparator(value, <a href="index">array</a>)) {n      return true;n    }n 
}n  return false;n}nnexport default
arrayIncludesWith;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_arrayIncludesWith.jsn// module id =
nulln// module chunks = “,”/**n * A specialized version of `_.map` for
arrays without support for iterateen * shorthands.n *n * @privaten * @param
{Array} array The array to iterate over.n * @param {Function} iteratee The
function invoked per iteration.n * @returns {Array} Returns the new mapped
array.n */nfunction arrayMap(array, iteratee) {n  var index = -1,n     
length = array.length,n      result = Array(length);nn  while (++index &lt;
length) {n    <a href="index">result</a> = <a
href="index">iteratee(array</a>, index, array);n  }n  return
result;n}nnexport default arrayMap;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/_arrayMap.jsn// module id =
nulln// module chunks = “,”/**n * The base implementation of `_.unary`
without support for storing wrapper metadata.n *n * @privaten * @param
{Function} func The function to cap arguments for.n * @returns {Function}
Returns the new capped function.n */nfunction baseUnary(func) {n  return
function(value) {n    return func(value);n  };n}nnexport default
baseUnary;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_baseUnary.jsn// module id = nulln//
module chunks = “,”/**n * Checks if a cache value for `key` exists.n *n *
@privaten * @param {Object} cache The cache to query.n * @param {string}
key The key of the entry to check.n * @returns {boolean} Returns `true` if
an entry for `key` exists, else `false`.n */nfunction cacheHas(cache, key)
{n  return cache.has(key);n}nnexport default
cacheHas;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_cacheHas.jsn// module id = nulln//
module chunks = “,”import SetCache from &#39;./_SetCache&#39;;nimport
arrayIncludes from &#39;./_arrayIncludes&#39;;nimport arrayIncludesWith
from &#39;./_arrayIncludesWith&#39;;nimport arrayMap from
&#39;./_arrayMap&#39;;nimport baseUnary from &#39;./_baseUnary&#39;;nimport
cacheHas from &#39;./_cacheHas&#39;;nn/** Used as the size to enable large
array optimizations. */nvar LARGE_ARRAY_SIZE = 200;nn/**n * The base
implementation of methods like `_.difference` without supportn * for
excluding multiple arrays or iteratee shorthands.n *n * @privaten * @param
{Array} array The array to inspect.n * @param {Array} values The values to
exclude.n * @param {Function} [iteratee] The iteratee invoked per element.n
* @param {Function} [comparator] The comparator invoked per element.n *
@returns {Array} Returns the new array of filtered values.n */nfunction
baseDifference(array, values, iteratee, comparator) {n  var index = -1,n   
includes = arrayIncludes,n      isCommon = true,n      length =
array.length,n      result = [],n      valuesLength = values.length;nn  if
(!length) {n    return result;n  }n  if (iteratee) {n    values =
arrayMap(values, baseUnary(iteratee));n  }n  if (comparator) {n    includes
= arrayIncludesWith;n    isCommon = false;n  }n  else if (values.length
&gt;= LARGE_ARRAY_SIZE) {n    includes = cacheHas;n    isCommon = false;n  
values = new SetCache(values);n  }n  outer:n  while (++index &lt; length)
{n    var value = <a href="index">array</a>,n        computed = iteratee ?
iteratee(value) : value;nn    value = (comparator || value !== 0) ? value :
0;n    if (isCommon &amp;&amp; computed === computed) {n      var
valuesIndex = valuesLength;n      while (valuesIndex–) {n        if (<a
href="valuesIndex">values</a> === computed) {n          continue outer;n   
}n      }n      result.push(value);n    }n    else if (!includes(values,
computed, comparator)) {n      result.push(value);n    }n  }n  return
result;n}nnexport default baseDifference;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/_baseDifference.jsn// module id
= nulln// module chunks = “,”import baseDifference from
&#39;./_baseDifference&#39;;nimport baseFlatten from
&#39;./_baseFlatten&#39;;nimport isArrayLikeObject from
&#39;./isArrayLikeObject&#39;;nimport rest from &#39;./rest&#39;;nn/**n *
Creates an array of unique `array` values not included in the other givenn
* arrays using [`SameValueZero`](<a
href="http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n">ecma-international.org/ecma-262/6.0/#sec-samevaluezero)n</a>
* for equality comparisons. The order of result values is determined by
then * order they occur in the first array.n *n * @staticn * @memberOf _n *
@since 0.1.0n * @category Arrayn * @param {Array} array The array to
inspect.n * @param {…Array} [values] The values to exclude.n * @returns
{Array} Returns the new array of filtered values.n * @see _.without, _.xorn
* @examplen *n * _.difference([3, 2, 1], [4, 2]);n * // =&gt; [3, 1]n
*/nvar difference = rest(function(array, values) {n  return
isArrayLikeObject(array)n    ? baseDifference(array, baseFlatten(values, 1,
isArrayLikeObject, true))n    : [];n});nnexport default
difference;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/difference.jsn// module id = nulln//
module chunks = “,”import arrayMap from &#39;./_arrayMap&#39;;nn/**n * The
base implementation of `_.toPairs` and `_.toPairsIn` which creates an
arrayn * of key-value pairs for `object` corresponding to the property
names of `props`.n *n * @privaten * @param {Object} object The object to
query.n * @param {Array} props The property names to get values for.n *
@returns {Object} Returns the key-value pairs.n */nfunction
baseToPairs(object, props) {n  return arrayMap(props, function(key) {n   
return [key, <a href="key">object</a>];n  });n}nnexport default
baseToPairs;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_baseToPairs.jsn// module id = nulln//
module chunks = “,”/**n * Converts `set` to its value-value pairs.n *n *
@privaten * @param {Object} set The set to convert.n * @returns {Array}
Returns the value-value pairs.n */nfunction setToPairs(set) {n  var index =
-1,n      result = Array(set.size);nn  set.forEach(function(value) {n    <a
href="++index">result</a> = [value, value];n  });n  return
result;n}nnexport default setToPairs;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/_setToPairs.jsn// module id =
nulln// module chunks = “,”import baseToPairs from
&#39;./_baseToPairs&#39;;nimport getTag from &#39;./_getTag&#39;;nimport
mapToArray from &#39;./_mapToArray&#39;;nimport setToPairs from
&#39;./_setToPairs&#39;;nn/** `Object#toString` result references. */nvar
mapTag = &#39;[object Map]&#39;,n    setTag = &#39;[object Set]&#39;;nn/**n
* Creates a `_.toPairs` or `_.toPairsIn` function.n *n * @privaten * @param
{Function} keysFunc The function to get the keys of a given object.n *
@returns {Function} Returns the new pairs function.n */nfunction
createToPairs(keysFunc) {n  return function(object) {n    var tag =
getTag(object);n    if (tag == mapTag) {n      return mapToArray(object);n 
}n    if (tag == setTag) {n      return setToPairs(object);n    }n   
return baseToPairs(object, keysFunc(object));n  };n}nnexport default
createToPairs;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_createToPairs.jsn// module id = nulln//
module chunks = “,”import createToPairs from
&#39;./_createToPairs&#39;;nimport keys from &#39;./keys&#39;;nn/**n *
Creates an array of own enumerable string keyed-value pairs for `object`n *
which can be consumed by `_.fromPairs`. If `object` is a map or set, itsn *
entries are returned.n *n * @staticn * @memberOf _n * @since 4.0.0n *
@alias entriesn * @category Objectn * @param {Object} object The object to
query.n * @returns {Array} Returns the key-value pairs.n * @examplen *n *
function Foo() {n *   this.a = 1;n *   this.b = 2;n * }n *n *
Foo.prototype.c = 3;n *n * _.toPairs(new Foo);n * // =&gt; [[&#39;a&#39;,
1], [&#39;b&#39;, 2]] (iteration order is not guaranteed)n */nvar toPairs =
createToPairs(keys);nnexport default toPairs;nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-utils/src/lib/lodash/toPairs.jsn// module id
= nulln// module chunks = “,”import isStrictComparable from
&#39;./_isStrictComparable&#39;;nimport toPairs from
&#39;./toPairs&#39;;nn/**n * Gets the property names, values, and compare
flags of `object`.n *n * @privaten * @param {Object} object The object to
query.n * @returns {Array} Returns the match data of `object`.n */nfunction
getMatchData(object) {n  var result = toPairs(object),n      length =
result.length;nn  while (length–) {n    <a href="length">result</a>[2] = <a
href="length">isStrictComparable(result</a>[1]);n  }n  return
result;n}nnexport default getMatchData;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/_getMatchData.jsn// module id =
nulln// module chunks = “,”/**n * A specialized version of
`matchesProperty` for source values suitablen * for strict equality
comparisons, i.e. `===`.n *n * @privaten * @param {string} key The key of
the property to get.n * @param {*} srcValue The value to match.n * @returns
{Function} Returns the new spec function.n */nfunction
matchesStrictComparable(key, srcValue) {n  return function(object) {n    if
(object == null) {n      return false;n    }n    return <a
href="key">object</a> === srcValue &amp;&amp;n      (srcValue !== undefined
|| (key in Object(object)));n  };n}nnexport default
matchesStrictComparable;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_matchesStrictComparable.jsn// module id
= nulln// module chunks = “,”import baseIsMatch from
&#39;./_baseIsMatch&#39;;nimport getMatchData from
&#39;./_getMatchData&#39;;nimport matchesStrictComparable from
&#39;./_matchesStrictComparable&#39;;nn/**n * The base implementation of
`_.matches` which doesn&#39;t clone `source`.n *n * @privaten * @param
{Object} source The object of property values to match.n * @returns
{Function} Returns the new spec function.n */nfunction baseMatches(source)
{n  var matchData = getMatchData(source);n  if (matchData.length == 1
&amp;&amp; <a href="0">matchData</a>[2]) {n    return <a
href="0">matchesStrictComparable(matchData</a>[0], <a
href="0">matchData</a>[1]);n  }n  return function(object) {n    return
object === source || baseIsMatch(object, source, matchData);n  };n}nnexport
default baseMatches;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_baseMatches.jsn// module id = nulln//
module chunks = “,”import Symbol from &#39;./_Symbol&#39;;nimport isSymbol
from &#39;./isSymbol&#39;;nn/** Used as references for various `Number`
constants. */nvar INFINITY = 1 / 0;nn/** Used to convert symbols to
primitives and strings. */nvar symbolProto = Symbol ? Symbol.prototype :
undefined,n    symbolToString = symbolProto ? symbolProto.toString :
undefined;nn/**n * The base implementation of `_.toString` which
doesn&#39;t convert nullishn * values to empty strings.n *n * @privaten *
@param {*} value The value to process.n * @returns {string} Returns the
string.n */nfunction baseToString(value) {n  // Exit early for strings to
avoid a performance hit in some environments.n  if (typeof value ==
&#39;string&#39;) {n    return value;n  }n  if (isSymbol(value)) {n   
return symbolToString ? symbolToString.call(value) : &#39;&#39;;n  }n  var
result = (value + &#39;&#39;);n  return (result == &#39;0&#39; &amp;&amp;
(1 / value) == -INFINITY) ? &#39;-0&#39; : result;n}nnexport default
baseToString;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_baseToString.jsn// module id = nulln//
module chunks = “,”import baseToString from
&#39;./_baseToString&#39;;nn/**n * Converts `value` to a string. An empty
string is returned for `null`n * and `undefined` values. The sign of `-0`
is preserved.n *n * @staticn * @memberOf _n * @since 4.0.0n * @category
Langn * @param {*} value The value to process.n * @returns {string} Returns
the string.n * @examplen *n * _.toString(null);n * // =&gt; &#39;&#39;n *n
* _.toString(-0);n * // =&gt; &#39;-0&#39;n *n * _.toString([1, 2, 3]);n *
// =&gt; &#39;1,2,3&#39;n */nfunction toString(value) {n  return value ==
null ? &#39;&#39; : baseToString(value);n}nnexport default
toString;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/toString.jsn// module id = nulln// module
chunks = “,”import memoize from &#39;./memoize&#39;;nimport toString from
&#39;./toString&#39;;nn/** Used to match property names within property
paths. */nvar rePropName = /[^.[\]]+|\[(?:(-?\<a
href="\"'">d+(?:\.\d+)?)|(</a>)((?:(?!\<a
href="^\\\\">2)</a>|\\.)*?)\2)\]/g;nn/** Used to match backslashes in
property paths. */nvar reEscapeChar = /\\(\\)?/g;nn/**n * Converts `string`
to a property path array.n *n * @privaten * @param {string} string The
string to convert.n * @returns {Array} Returns the property path array.n
*/nvar stringToPath = memoize(function(string) {n  var result = [];n 
toString(string).replace(rePropName, function(match, number, quote, string)
{n    result.push(quote ? string.replace(reEscapeChar, &#39;$1&#39;) :
(number || match));n  });n  return result;n});nnexport default
stringToPath;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_stringToPath.jsn// module id = nulln//
module chunks = “,”import isArray from &#39;./isArray&#39;;nimport
stringToPath from &#39;./_stringToPath&#39;;nn/**n * Casts `value` to a
path array if it&#39;s not one.n *n * @privaten * @param {*} value The
value to inspect.n * @returns {Array} Returns the cast property path
array.n */nfunction castPath(value) {n  return isArray(value) ? value :
stringToPath(value);n}nnexport default castPath;nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-utils/src/lib/lodash/_castPath.jsn// module
id = nulln// module chunks = “,”import isSymbol from
&#39;./isSymbol&#39;;nn/** Used as references for various `Number`
constants. */nvar INFINITY = 1 / 0;nn/**n * Converts `value` to a string
key if it&#39;s not a string or symbol.n *n * @privaten * @param {*} value
The value to inspect.n * @returns {string|symbol} Returns the key.n
*/nfunction toKey(value) {n  if (typeof value == &#39;string&#39; ||
isSymbol(value)) {n    return value;n  }n  var result = (value +
&#39;&#39;);n  return (result == &#39;0&#39; &amp;&amp; (1 / value) ==
-INFINITY) ? &#39;-0&#39; : result;n}nnexport default
toKey;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_toKey.jsn// module id = nulln// module
chunks = “,”import castPath from &#39;./_castPath&#39;;nimport isKey from
&#39;./_isKey&#39;;nimport toKey from &#39;./_toKey&#39;;nn/**n * The base
implementation of `_.get` without support for default values.n *n *
@privaten * @param {Object} object The object to query.n * @param
{Array|string} path The path of the property to get.n * @returns {*}
Returns the resolved value.n */nfunction baseGet(object, path) {n  path =
isKey(path, object) ? [path] : castPath(path);nn  var index = 0,n     
length = path.length;nn  while (object != null &amp;&amp; index &lt;
length) {n    object = <a href="index++">object[toKey(path</a>)];n  }n 
return (index &amp;&amp; index == length) ? object : undefined;n}nnexport
default baseGet;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_baseGet.jsn// module id = nulln// module
chunks = “,”import baseGet from &#39;./_baseGet&#39;;nn/**n * Gets the
value at `path` of `object`. If the resolved value isn * `undefined`, the
`defaultValue` is used in its place.n *n * @staticn * @memberOf _n * @since
3.7.0n * @category Objectn * @param {Object} object The object to query.n *
@param {Array|string} path The path of the property to get.n * @param {*}
[defaultValue] The value returned for `undefined` resolved values.n *
@returns {*} Returns the resolved value.n * @examplen *n * var object = {
&#39;a&#39;: [{ &#39;b&#39;: { &#39;c&#39;: 3 } }] };n *n * _.get(object,
&#39;<a href="0">a</a>.b.c&#39;);n * // =&gt; 3n *n * _.get(object,
[&#39;a&#39;, &#39;0&#39;, &#39;b&#39;, &#39;c&#39;]);n * // =&gt; 3n *n *
_.get(object, &#39;a.b.c&#39;, &#39;default&#39;);n * // =&gt;
&#39;default&#39;n */nfunction get(object, path, defaultValue) {n  var
result = object == null ? undefined : baseGet(object, path);n  return
result === undefined ? defaultValue : result;n}nnexport default
get;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/get.jsn// module id = nulln// module
chunks = “,”import baseHasIn from &#39;./_baseHasIn&#39;;nimport hasPath
from &#39;./_hasPath&#39;;nn/**n * Checks if `path` is a direct or
inherited property of `object`.n *n * @staticn * @memberOf _n * @since
4.0.0n * @category Objectn * @param {Object} object The object to query.n *
@param {Array|string} path The path to check.n * @returns {boolean} Returns
`true` if `path` exists, else `false`.n * @examplen *n * var object =
_.create({ &#39;a&#39;: _.create({ &#39;b&#39;: 2 }) });n *n *
_.hasIn(object, &#39;a&#39;);n * // =&gt; truen *n * _.hasIn(object,
&#39;a.b&#39;);n * // =&gt; truen *n * _.hasIn(object, [&#39;a&#39;,
&#39;b&#39;]);n * // =&gt; truen *n * _.hasIn(object, &#39;b&#39;);n * //
=&gt; falsen */nfunction hasIn(object, path) {n  return object != null
&amp;&amp; hasPath(object, path, baseHasIn);n}nnexport default
hasIn;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/hasIn.jsn// module id = nulln// module
chunks = “,”import baseIsEqual from &#39;./_baseIsEqual&#39;;nimport get
from &#39;./get&#39;;nimport hasIn from &#39;./hasIn&#39;;nimport isKey
from &#39;./_isKey&#39;;nimport isStrictComparable from
&#39;./_isStrictComparable&#39;;nimport matchesStrictComparable from
&#39;./_matchesStrictComparable&#39;;nimport toKey from
&#39;./_toKey&#39;;nn/** Used to compose bitmasks for comparison styles.
*/nvar UNORDERED_COMPARE_FLAG = 1,n    PARTIAL_COMPARE_FLAG = 2;nn/**n *
The base implementation of `_.matchesProperty` which doesn&#39;t clone
`srcValue`.n *n * @privaten * @param {string} path The path of the property
to get.n * @param {*} srcValue The value to match.n * @returns {Function}
Returns the new spec function.n */nfunction baseMatchesProperty(path,
srcValue) {n  if (isKey(path) &amp;&amp; isStrictComparable(srcValue)) {n  
return matchesStrictComparable(toKey(path), srcValue);n  }n  return
function(object) {n    var objValue = get(object, path);n    return
(objValue === undefined &amp;&amp; objValue === srcValue)n      ?
hasIn(object, path)n      : baseIsEqual(srcValue, objValue, undefined,
UNORDERED_COMPARE_FLAG | PARTIAL_COMPARE_FLAG);n  };n}nnexport default
baseMatchesProperty;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_baseMatchesProperty.jsn// module id =
nulln// module chunks = “,”/**n * This method returns the first argument
given to it.n *n * @staticn * @since 0.1.0n * @memberOf _n * @category
Utiln * @param {*} value Any value.n * @returns {*} Returns `value`.n *
@examplen *n * var object = { &#39;user&#39;: &#39;fred&#39; };n *n *
_.identity(object) === object;n * // =&gt; truen */nfunction
identity(value) {n  return value;n}nnexport default
identity;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/identity.jsn// module id = nulln// module
chunks = “,”import baseGet from &#39;./_baseGet&#39;;nn/**n * A specialized
version of `baseProperty` which supports deep paths.n *n * @privaten *
@param {Array|string} path The path of the property to get.n * @returns
{Function} Returns the new accessor function.n */nfunction
basePropertyDeep(path) {n  return function(object) {n    return
baseGet(object, path);n  };n}nnexport default
basePropertyDeep;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_basePropertyDeep.jsn// module id =
nulln// module chunks = “,”import baseProperty from
&#39;./_baseProperty&#39;;nimport basePropertyDeep from
&#39;./_basePropertyDeep&#39;;nimport isKey from &#39;./_isKey&#39;;nimport
toKey from &#39;./_toKey&#39;;nn/**n * Creates a function that returns the
value at `path` of a given object.n *n * @staticn * @memberOf _n * @since
2.4.0n * @category Utiln * @param {Array|string} path The path of the
property to get.n * @returns {Function} Returns the new accessor function.n
* @examplen *n * var objects = [n *   { &#39;a&#39;: { &#39;b&#39;: 2 } },n
*   { &#39;a&#39;: { &#39;b&#39;: 1 } }n * ];n *n * _.map(objects,
_.property(&#39;a.b&#39;));n * // =&gt; [2, 1]n *n *
<em>.map(</em>.sortBy(objects, _.property([&#39;a&#39;, &#39;b&#39;])),
&#39;a.b&#39;);n * // =&gt; [1, 2]n */nfunction property(path) {n  return
isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);n}nnexport
default property;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/property.jsn// module id = nulln// module
chunks = “,”import baseMatches from &#39;./_baseMatches&#39;;nimport
baseMatchesProperty from &#39;./_baseMatchesProperty&#39;;nimport identity
from &#39;./identity&#39;;nimport isArray from &#39;./isArray&#39;;nimport
property from &#39;./property&#39;;nn/**n * The base implementation of
`_.iteratee`.n *n * @privaten * @param {*} [value=_.identity] The value to
convert to an iteratee.n * @returns {Function} Returns the iteratee.n
*/nfunction baseIteratee(value) {n  // Don&#39;t store the `typeof` result
in a variable to avoid a JIT bug in Safari 9.n  // See <a
href="https://bugs.webkit.org/show_bug.cgi?id=156034">bugs.webkit.org/show_bug.cgi?id=156034</a>
for more details.n  if (typeof value == &#39;function&#39;) {n    return
value;n  }n  if (value == null) {n    return identity;n  }n  if (typeof
value == &#39;object&#39;) {n    return isArray(value)n      ? <a
href="0">baseMatchesProperty(value</a>, <a href="1">value</a>)n      :
baseMatches(value);n  }n  return property(value);n}nnexport default
baseIteratee;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_baseIteratee.jsn// module id = nulln//
module chunks = “,”import baseDifference from
&#39;./_baseDifference&#39;;nimport baseFlatten from
&#39;./_baseFlatten&#39;;nimport baseIteratee from
&#39;./_baseIteratee&#39;;nimport isArrayLikeObject from
&#39;./isArrayLikeObject&#39;;nimport last from &#39;./last&#39;;nimport
rest from &#39;./rest&#39;;nn/**n * This method is like `_.difference`
except that it accepts `iteratee` whichn * is invoked for each element of
`array` and `values` to generate the criterionn * by which they&#39;re
compared. Result values are chosen from the first array.n * The iteratee is
invoked with one argument: (value).n *n * @staticn * @memberOf _n * @since
4.0.0n * @category Arrayn * @param {Array} array The array to inspect.n *
@param {…Array} [values] The values to exclude.n * @param
{Array|Function|Object|string} [iteratee=_.identity]n *  The iteratee
invoked per element.n * @returns {Array} Returns the new array of filtered
values.n * @examplen *n * _.differenceBy([3.1, 2.2, 1.3], [4.4, 2.5],
Math.floor);n * // =&gt; [3.1, 1.3]n *n * // The `_.property` iteratee
shorthand.n * _.differenceBy([{ &#39;x&#39;: 2 }, { &#39;x&#39;: 1 }], [{
&#39;x&#39;: 1 }], &#39;x&#39;);n * // =&gt; [{ &#39;x&#39;: 2 }]n */nvar
differenceBy = rest(function(array, values) {n  var iteratee =
last(values);n  if (isArrayLikeObject(iteratee)) {n    iteratee =
undefined;n  }n  return isArrayLikeObject(array)n    ?
baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true),
baseIteratee(iteratee))n    : [];n});nnexport default
differenceBy;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/differenceBy.jsn// module id = nulln//
module chunks = “,”import baseDifference from
&#39;./_baseDifference&#39;;nimport baseFlatten from
&#39;./_baseFlatten&#39;;nimport isArrayLikeObject from
&#39;./isArrayLikeObject&#39;;nimport last from &#39;./last&#39;;nimport
rest from &#39;./rest&#39;;nn/**n * This method is like `_.difference`
except that it accepts `comparator`n * which is invoked to compare elements
of `array` to `values`. Result valuesn * are chosen from the first array.
The comparator is invoked with two arguments:n * (arrVal, othVal).n *n *
@staticn * @memberOf _n * @since 4.0.0n * @category Arrayn * @param {Array}
array The array to inspect.n * @param {…Array} [values] The values to
exclude.n * @param {Function} [comparator] The comparator invoked per
element.n * @returns {Array} Returns the new array of filtered values.n *
@examplen *n * var objects = [{ &#39;x&#39;: 1, &#39;y&#39;: 2 }, {
&#39;x&#39;: 2, &#39;y&#39;: 1 }];n *n * _.differenceWith(objects, [{
&#39;x&#39;: 1, &#39;y&#39;: 2 }], _.isEqual);n * // =&gt; [{ &#39;x&#39;:
2, &#39;y&#39;: 1 }]n */nvar differenceWith = rest(function(array, values)
{n  var comparator = last(values);n  if (isArrayLikeObject(comparator)) {n 
comparator = undefined;n  }n  return isArrayLikeObject(array)n    ?
baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true),
undefined, comparator)n    : [];n});nnexport default
differenceWith;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/differenceWith.jsn// module id = nulln//
module chunks = “,”import baseSlice from &#39;./_baseSlice&#39;;nimport
toInteger from &#39;./toInteger&#39;;nn/**n * Creates a slice of `array`
with `n` elements dropped from the beginning.n *n * @staticn * @memberOf _n
* @since 0.5.0n * @category Arrayn * @param {Array} array The array to
query.n * @param {number} [n=1] The number of elements to drop.n * @param-
{Object} [guard] Enables use as an iteratee for methods like `_.map`.n *
@returns {Array} Returns the slice of `array`.n * @examplen *n * _.drop([1,
2, 3]);n * // =&gt; [2, 3]n *n * _.drop([1, 2, 3], 2);n * // =&gt; [3]n *n
* _.drop([1, 2, 3], 5);n * // =&gt; []n *n * _.drop([1, 2, 3], 0);n * //
=&gt; [1, 2, 3]n */nfunction drop(array, n, guard) {n  var length = array ?
array.length : 0;n  if (!length) {n    return [];n  }n  n = (guard || n ===
undefined) ? 1 : toInteger(n);n  return baseSlice(array, n &lt; 0 ? 0 : n,
length);n}nnexport default drop;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/drop.jsn// module id = nulln// module
chunks = “,”import baseSlice from &#39;./_baseSlice&#39;;nimport toInteger
from &#39;./toInteger&#39;;nn/**n * Creates a slice of `array` with `n`
elements dropped from the end.n *n * @staticn * @memberOf _n * @since
3.0.0n * @category Arrayn * @param {Array} array The array to query.n *
@param {number} [n=1] The number of elements to drop.n * @param- {Object}
[guard] Enables use as an iteratee for methods like `_.map`.n * @returns
{Array} Returns the slice of `array`.n * @examplen *n * _.dropRight([1, 2,
3]);n * // =&gt; [1, 2]n *n * _.dropRight([1, 2, 3], 2);n * // =&gt; [1]n
*n * _.dropRight([1, 2, 3], 5);n * // =&gt; []n *n * _.dropRight([1, 2, 3],
0);n * // =&gt; [1, 2, 3]n */nfunction dropRight(array, n, guard) {n  var
length = array ? array.length : 0;n  if (!length) {n    return [];n  }n  n
= (guard || n === undefined) ? 1 : toInteger(n);n  n = length - n;n  return
baseSlice(array, 0, n &lt; 0 ? 0 : n);n}nnexport default
dropRight;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/dropRight.jsn// module id = nulln//
module chunks = “,”import baseSlice from &#39;./_baseSlice&#39;;nn/**n *
The base implementation of methods like `_.dropWhile` and `_.takeWhile`n *
without support for iteratee shorthands.n *n * @privaten * @param {Array}
array The array to query.n * @param {Function} predicate The function
invoked per iteration.n * @param {boolean} [isDrop] Specify dropping
elements instead of taking them.n * @param {boolean} [fromRight] Specify
iterating from right to left.n * @returns {Array} Returns the slice of
`array`.n */nfunction baseWhile(array, predicate, isDrop, fromRight) {n 
var length = array.length,n      index = fromRight ? length : -1;nn  while
((fromRight ? index– : ++index &lt; length) &amp;&amp;n    <a
href="index">predicate(array</a>, index, array)) {}nn  return isDropn    ?
baseSlice(array, (fromRight ? 0 : index), (fromRight ? index + 1 :
length))n    : baseSlice(array, (fromRight ? index + 1 : 0), (fromRight ?
length : index));n}nnexport default baseWhile;nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-utils/src/lib/lodash/_baseWhile.jsn// module
id = nulln// module chunks = “,”import baseIteratee from
&#39;./_baseIteratee&#39;;nimport baseWhile from
&#39;./_baseWhile&#39;;nn/**n * Creates a slice of `array` excluding
elements dropped from the end.n * Elements are dropped until `predicate`
returns falsey. The predicate isn * invoked with three arguments: (value,
index, array).n *n * @staticn * @memberOf _n * @since 3.0.0n * @category
Arrayn * @param {Array} array The array to query.n * @param
{Array|Function|Object|string} [predicate=_.identity]n *  The function
invoked per iteration.n * @returns {Array} Returns the slice of `array`.n *
@examplen *n * var users = [n *   { &#39;user&#39;: &#39;barney&#39;, 
&#39;active&#39;: true },n *   { &#39;user&#39;: &#39;fred&#39;,   
&#39;active&#39;: false },n *   { &#39;user&#39;: &#39;pebbles&#39;,
&#39;active&#39;: false }n * ];n *n * _.dropRightWhile(users, function(o) {
return !o.active; });n * // =&gt; objects for [&#39;barney&#39;]n *n * //
The `_.matches` iteratee shorthand.n * _.dropRightWhile(users, {
&#39;user&#39;: &#39;pebbles&#39;, &#39;active&#39;: false });n * // =&gt;
objects for [&#39;barney&#39;, &#39;fred&#39;]n *n * // The
`_.matchesProperty` iteratee shorthand.n * _.dropRightWhile(users,
[&#39;active&#39;, false]);n * // =&gt; objects for [&#39;barney&#39;]n *n
* // The `_.property` iteratee shorthand.n * _.dropRightWhile(users,
&#39;active&#39;);n * // =&gt; objects for [&#39;barney&#39;,
&#39;fred&#39;, &#39;pebbles&#39;]n */nfunction dropRightWhile(array,
predicate) {n  return (array &amp;&amp; array.length)n    ?
baseWhile(array, baseIteratee(predicate, 3), true, true)n    :
[];n}nnexport default dropRightWhile;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/dropRightWhile.jsn// module id
= nulln// module chunks = “,”import baseClamp from
&#39;./_baseClamp&#39;;nimport toInteger from &#39;./toInteger&#39;;nn/**
Used as references for the maximum length and index of an array. */nvar
MAX_ARRAY_LENGTH = 4294967295;nn/**n * Converts `value` to an integer
suitable for use as the length of ann * array-like object.n *n *
*<strong>Note:</strong>* This method is based onn * [`ToLength`](<a
href="http://ecma-international.org/ecma-262/6.0/#sec-tolength).\n">ecma-international.org/ecma-262/6.0/#sec-tolength).n</a>
*n * @staticn * @memberOf _n * @since 4.0.0n * @category Langn * @param {*}
value The value to convert.n * @returns {number} Returns the converted
integer.n * @examplen *n * _.toLength(3.2);n * // =&gt; 3n *n *
_.toLength(Number.MIN_VALUE);n * // =&gt; 0n *n * _.toLength(Infinity);n *
// =&gt; 4294967295n *n * _.toLength(&#39;3.2&#39;);n * // =&gt; 3n
*/nfunction toLength(value) {n  return value ? baseClamp(toInteger(value),
0, MAX_ARRAY_LENGTH) : 0;n}nnexport default
toLength;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/toLength.jsn// module id = nulln// module
chunks = “,”/**n * The base implementation of `_.clamp` which doesn&#39;t
coerce arguments to numbers.n *n * @privaten * @param {number} number The
number to clamp.n * @param {number} [lower] The lower bound.n * @param
{number} upper The upper bound.n * @returns {number} Returns the clamped
number.n */nfunction baseClamp(number, lower, upper) {n  if (number ===
number) {n    if (upper !== undefined) {n      number = number &lt;= upper
? number : upper;n    }n    if (lower !== undefined) {n      number =
number &gt;= lower ? number : lower;n    }n  }n  return number;n}nnexport
default baseClamp;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_baseClamp.jsn// module id = nulln//
module chunks = “,”import toInteger from &#39;./toInteger&#39;;nimport
toLength from &#39;./toLength&#39;;nn/**n * The base implementation of
`_.fill` without an iteratee call guard.n *n * @privaten * @param {Array}
array The array to fill.n * @param {*} value The value to fill `array`
with.n * @param {number} [start=0] The start position.n * @param {number}
[end=array.length] The end position.n * @returns {Array} Returns `array`.n
*/nfunction baseFill(array, value, start, end) {n  var length =
array.length;nn  start = toInteger(start);n  if (start &lt; 0) {n    start
= -start &gt; length ? 0 : (length + start);n  }n  end = (end === undefined
|| end &gt; length) ? length : toInteger(end);n  if (end &lt; 0) {n    end
+= length;n  }n  end = start &gt; end ? 0 : toLength(end);n  while (start
&lt; end) {n    <a href="start++">array</a> = value;n  }n  return
array;n}nnexport default baseFill;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/_baseFill.jsn// module id =
nulln// module chunks = “,”import baseFill from
&#39;./_baseFill&#39;;nimport isIterateeCall from
&#39;./_isIterateeCall&#39;;nn/**n * Fills elements of `array` with `value`
from `start` up to, but notn * including, `end`.n *n *
*<strong>Note:</strong>* This method mutates `array`.n *n * @staticn *
@memberOf _n * @since 3.2.0n * @category Arrayn * @param {Array} array The
array to fill.n * @param {*} value The value to fill `array` with.n *
@param {number} [start=0] The start position.n * @param {number}
[end=array.length] The end position.n * @returns {Array} Returns `array`.n
* @examplen *n * var array = [1, 2, 3];n *n * _.fill(array, &#39;a&#39;);n
* console.log(array);n * // =&gt; [&#39;a&#39;, &#39;a&#39;, &#39;a&#39;]n
*n * _.fill(Array(3), 2);n * // =&gt; [2, 2, 2]n *n * _.fill([4, 6, 8, 10],
&#39;*&#39;, 1, 3);n * // =&gt; [4, &#39;*&#39;, &#39;*&#39;, 10]n
*/nfunction fill(array, value, start, end) {n  var length = array ?
array.length : 0;n  if (!length) {n    return [];n  }n  if (start
&amp;&amp; typeof start != &#39;number&#39; &amp;&amp;
isIterateeCall(array, value, start)) {n    start = 0;n    end = length;n 
}n  return baseFill(array, value, start, end);n}nnexport default
fill;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/fill.jsn// module id = nulln// module
chunks = “,”import baseFindIndex from &#39;./_baseFindIndex&#39;;nimport
baseIteratee from &#39;./_baseIteratee&#39;;nn/**n * This method is like
`_.find` except that it returns the index of the firstn * element
`predicate` returns truthy for instead of the element itself.n *n *
@staticn * @memberOf _n * @since 1.1.0n * @category Arrayn * @param {Array}
array The array to search.n * @param {Array|Function|Object|string}
[predicate=_.identity]n *  The function invoked per iteration.n * @returns
{number} Returns the index of the found element, else `-1`.n * @examplen *n
* var users = [n *   { &#39;user&#39;: &#39;barney&#39;,  &#39;active&#39;:
false },n *   { &#39;user&#39;: &#39;fred&#39;,    &#39;active&#39;: false
},n *   { &#39;user&#39;: &#39;pebbles&#39;, &#39;active&#39;: true }n *
];n *n * _.findIndex(users, function(o) { return o.user ==
&#39;barney&#39;; });n * // =&gt; 0n *n * // The `_.matches` iteratee
shorthand.n * _.findIndex(users, { &#39;user&#39;: &#39;fred&#39;,
&#39;active&#39;: false });n * // =&gt; 1n *n * // The `_.matchesProperty`
iteratee shorthand.n * _.findIndex(users, [&#39;active&#39;, false]);n * //
=&gt; 0n *n * // The `_.property` iteratee shorthand.n * _.findIndex(users,
&#39;active&#39;);n * // =&gt; 2n */nfunction findIndex(array, predicate)
{n  return (array &amp;&amp; array.length)n    ? baseFindIndex(array,
baseIteratee(predicate, 3))n    : -1;n}nnexport default
findIndex;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/findIndex.jsn// module id = nulln//
module chunks = “,”/**n * The base implementation of `_.findIndex` and
`_.findLastIndex` withoutn * support for iteratee shorthands.n *n *
@privaten * @param {Array} array The array to search.n * @param {Function}
predicate The function invoked per iteration.n * @param {boolean}
[fromRight] Specify iterating from right to left.n * @returns {number}
Returns the index of the matched value, else `-1`.n */nfunction
baseFindIndex(array, predicate, fromRight) {n  var length = array.length,n 
index = fromRight ? length : -1;nn  while ((fromRight ? index– : ++index
&lt; length)) {n    if (<a href="index">predicate(array</a>, index, array))
{n      return index;n    }n  }n  return -1;n}nnexport default
baseFindIndex;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_baseFindIndex.jsn// module id = nulln//
module chunks = “,”import baseFlatten from &#39;./_baseFlatten&#39;;nn/**n
* Flattens `array` a single level deep.n *n * @staticn * @memberOf _n *
@since 0.1.0n * @category Arrayn * @param {Array} array The array to
flatten.n * @returns {Array} Returns the new flattened array.n * @examplen
*n * _.flatten([1, [2, [3, [4]], 5]]);n * // =&gt; [1, 2, [3, [4]], 5]n
*/nfunction flatten(array) {n  var length = array ? array.length : 0;n 
return length ? baseFlatten(array, 1) : [];n}nnexport default
flatten;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/flatten.jsn// module id = nulln// module
chunks = “,”/**n * Gets the first element of `array`.n *n * @staticn *
@memberOf _n * @since 0.1.0n * @alias firstn * @category Arrayn * @param
{Array} array The array to query.n * @returns {*} Returns the first element
of `array`.n * @examplen *n * _.head([1, 2, 3]);n * // =&gt; 1n *n *
_.head([]);n * // =&gt; undefinedn */nfunction head(array) {n  return
(array &amp;&amp; array.length) ? <a href="0">array</a> :
undefined;n}nnexport default head;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/head.jsn// module id = nulln//
module chunks = “,”import isArrayLikeObject from
&#39;./isArrayLikeObject&#39;;nn/**n * Casts `value` to an empty array if
it&#39;s not an array like object.n *n * @privaten * @param {*} value The
value to inspect.n * @returns {Array|Object} Returns the cast array-like
object.n */nfunction castArrayLikeObject(value) {n  return
isArrayLikeObject(value) ? value : [];n}nnexport default
castArrayLikeObject;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_castArrayLikeObject.jsn// module id =
nulln// module chunks = “,”import SetCache from
&#39;./_SetCache&#39;;nimport arrayIncludes from
&#39;./_arrayIncludes&#39;;nimport arrayIncludesWith from
&#39;./_arrayIncludesWith&#39;;nimport arrayMap from
&#39;./_arrayMap&#39;;nimport baseUnary from &#39;./_baseUnary&#39;;nimport
cacheHas from &#39;./_cacheHas&#39;;nn/* Built-in method references for
those with the same name as other `lodash` methods. */nvar nativeMin =
Math.min;nn/**n * The base implementation of methods like `_.intersection`,
without supportn * for iteratee shorthands, that accepts an array of arrays
to inspect.n *n * @privaten * @param {Array} arrays The arrays to inspect.n
* @param {Function} [iteratee] The iteratee invoked per element.n * @param
{Function} [comparator] The comparator invoked per element.n * @returns
{Array} Returns the new array of shared values.n */nfunction
baseIntersection(arrays, iteratee, comparator) {n  var includes =
comparator ? arrayIncludesWith : arrayIncludes,n      length = <a
href="0">arrays</a>.length,n      othLength = arrays.length,n      othIndex
= othLength,n      caches = Array(othLength),n      maxLength = Infinity,n 
result = [];nn  while (othIndex–) {n    var array = <a
href="othIndex">arrays</a>;n    if (othIndex &amp;&amp; iteratee) {n     
array = arrayMap(array, baseUnary(iteratee));n    }n    maxLength =
nativeMin(array.length, maxLength);n    <a href="othIndex">caches</a> =
!comparator &amp;&amp; (iteratee || (length &gt;= 120 &amp;&amp;
array.length &gt;= 120))n      ? new SetCache(othIndex &amp;&amp; array)n  
: undefined;n  }n  array = <a href="0">arrays</a>;nn  var index = -1,n     
seen = <a href="0">caches</a>;nn  outer:n  while (++index &lt; length
&amp;&amp; result.length &lt; maxLength) {n    var value = <a
href="index">array</a>,n        computed = iteratee ? iteratee(value) :
value;nn    value = (comparator || value !== 0) ? value : 0;n    if
(!(seenn          ? cacheHas(seen, computed)n          : includes(result,
computed, comparator)n        )) {n      othIndex = othLength;n      while
(–othIndex) {n        var cache = <a href="othIndex">caches</a>;n        if
(!(cachen              ? cacheHas(cache, computed)n              : <a
href="othIndex">includes(arrays</a>, computed, comparator))n            )
{n          continue outer;n        }n      }n      if (seen) {n       
seen.push(computed);n      }n      result.push(value);n    }n  }n  return
result;n}nnexport default baseIntersection;nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-utils/src/lib/lodash/_baseIntersection.jsn//
module id = nulln// module chunks = “,”import arrayMap from
&#39;./_arrayMap&#39;;nimport baseIntersection from
&#39;./_baseIntersection&#39;;nimport castArrayLikeObject from
&#39;./_castArrayLikeObject&#39;;nimport rest from &#39;./rest&#39;;nn/**n
* Creates an array of unique values that are included in all given arraysn
* using [`SameValueZero`](<a
href="http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n">ecma-international.org/ecma-262/6.0/#sec-samevaluezero)n</a>
* for equality comparisons. The order of result values is determined by
then * order they occur in the first array.n *n * @staticn * @memberOf _n *
@since 0.1.0n * @category Arrayn * @param {…Array} [arrays] The arrays to
inspect.n * @returns {Array} Returns the new array of intersecting values.n
* @examplen *n * _.intersection([2, 1], [4, 2], [1, 2]);n * // =&gt; [2]n
*/nvar intersection = rest(function(arrays) {n  var mapped =
arrayMap(arrays, castArrayLikeObject);n  return (mapped.length &amp;&amp;
<a href="0">mapped</a> === <a href="0">arrays</a>)n    ?
baseIntersection(mapped)n    : [];n});nnexport default
intersection;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/intersection.jsn// module id = nulln//
module chunks = “,”import arrayMap from &#39;./_arrayMap&#39;;nimport
baseIntersection from &#39;./_baseIntersection&#39;;nimport baseIteratee
from &#39;./_baseIteratee&#39;;nimport castArrayLikeObject from
&#39;./_castArrayLikeObject&#39;;nimport last from &#39;./last&#39;;nimport
rest from &#39;./rest&#39;;nn/**n * This method is like `_.intersection`
except that it accepts `iteratee`n * which is invoked for each element of
each `arrays` to generate the criterionn * by which they&#39;re compared.
Result values are chosen from the first array.n * The iteratee is invoked
with one argument: (value).n *n * @staticn * @memberOf _n * @since 4.0.0n *
@category Arrayn * @param {…Array} [arrays] The arrays to inspect.n *
@param {Array|Function|Object|string} [iteratee=_.identity]n *  The
iteratee invoked per element.n * @returns {Array} Returns the new array of
intersecting values.n * @examplen *n * _.intersectionBy([2.1, 1.2], [4.3,
2.4], Math.floor);n * // =&gt; [2.1]n *n * // The `_.property` iteratee
shorthand.n * _.intersectionBy([{ &#39;x&#39;: 1 }], [{ &#39;x&#39;: 2 }, {
&#39;x&#39;: 1 }], &#39;x&#39;);n * // =&gt; [{ &#39;x&#39;: 1 }]n */nvar
intersectionBy = rest(function(arrays) {n  var iteratee = last(arrays),n   
mapped = arrayMap(arrays, castArrayLikeObject);nn  if (iteratee ===
last(mapped)) {n    iteratee = undefined;n  } else {n    mapped.pop();n  }n
return (mapped.length &amp;&amp; <a href="0">mapped</a> === <a
href="0">arrays</a>)n    ? baseIntersection(mapped,
baseIteratee(iteratee))n    : [];n});nnexport default
intersectionBy;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/intersectionBy.jsn// module id = nulln//
module chunks = “,”import arrayMap from &#39;./_arrayMap&#39;;nimport
baseIntersection from &#39;./_baseIntersection&#39;;nimport
castArrayLikeObject from &#39;./_castArrayLikeObject&#39;;nimport last from
&#39;./last&#39;;nimport rest from &#39;./rest&#39;;nn/**n * This method is
like `_.intersection` except that it accepts `comparator`n * which is
invoked to compare elements of `arrays`. Result values are chosenn * from
the first array. The comparator is invoked with two arguments:n * (arrVal,
othVal).n *n * @staticn * @memberOf _n * @since 4.0.0n * @category Arrayn *
@param {…Array} [arrays] The arrays to inspect.n * @param {Function}
[comparator] The comparator invoked per element.n * @returns {Array}
Returns the new array of intersecting values.n * @examplen *n * var objects
= [{ &#39;x&#39;: 1, &#39;y&#39;: 2 }, { &#39;x&#39;: 2, &#39;y&#39;: 1
}];n * var others = [{ &#39;x&#39;: 1, &#39;y&#39;: 1 }, { &#39;x&#39;: 1,
&#39;y&#39;: 2 }];n *n * _.intersectionWith(objects, others, _.isEqual);n *
// =&gt; [{ &#39;x&#39;: 1, &#39;y&#39;: 2 }]n */nvar intersectionWith =
rest(function(arrays) {n  var comparator = last(arrays),n      mapped =
arrayMap(arrays, castArrayLikeObject);nn  if (comparator === last(mapped))
{n    comparator = undefined;n  } else {n    mapped.pop();n  }n  return
(mapped.length &amp;&amp; <a href="0">mapped</a> === <a
href="0">arrays</a>)n    ? baseIntersection(mapped, undefined, comparator)n
: [];n});nnexport default intersectionWith;nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-utils/src/lib/lodash/intersectionWith.jsn//
module id = nulln// module chunks = “,”/** Used for built-in method
references. */nvar arrayProto = Array.prototype;nn/* Built-in method
references for those with the same name as other `lodash` methods. */nvar
nativeJoin = arrayProto.join;nn/**n * Converts all elements in `array` into
a string separated by `separator`.n *n * @staticn * @memberOf _n * @since
4.0.0n * @category Arrayn * @param {Array} array The array to convert.n *
@param {string} [separator=&#39;,&#39;] The element separator.n * @returns
{string} Returns the joined string.n * @examplen *n * _.join([&#39;a&#39;,
&#39;b&#39;, &#39;c&#39;], &#39;~&#39;);n * // =&gt; &#39;a~b~c&#39;n
*/nfunction join(array, separator) {n  return array ?
nativeJoin.call(array, separator) : &#39;&#39;;n}nnexport default
join;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/join.jsn// module id = nulln// module
chunks = “,”import baseNth from &#39;./_baseNth&#39;;nimport toInteger from
&#39;./toInteger&#39;;nn/**n * Gets the element at `n` index of `array`. If
`n` is negative, the nthn * element from the end is returned.n *n *
@staticn * @memberOf _n * @since 4.11.0n * @category Arrayn * @param
{Array} array The array to query.n * @param {number} [n=0] The index of the
element to return.n * @returns {*} Returns the nth element of `array`.n *
@examplen *n * var array = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;,
&#39;d&#39;];n *n * _.nth(array, 1);n * // =&gt; &#39;b&#39;n *n *
_.nth(array, -2);n * // =&gt; &#39;c&#39;;n */nfunction nth(array, n) {n 
return (array &amp;&amp; array.length) ? baseNth(array, toInteger(n)) :
undefined;n}nnexport default nth;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/nth.jsn// module id = nulln//
module chunks = “,”import isIndex from &#39;./_isIndex&#39;;nn/**n * The
base implementation of `_.nth` which doesn&#39;t coerce `n` to an integer.n
*n * @privaten * @param {Array} array The array to query.n * @param
{number} n The index of the element to return.n * @returns {*} Returns the
nth element of `array`.n */nfunction baseNth(array, n) {n  var length =
array.length;n  if (!length) {n    return;n  }n  n += n &lt; 0 ? length :
0;n  return isIndex(n, length) ? <a href="n">array</a> :
undefined;n}nnexport default baseNth;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/_baseNth.jsn// module id =
nulln// module chunks = “,”import arrayMap from
&#39;./_arrayMap&#39;;nimport baseIndexOf from
&#39;./_baseIndexOf&#39;;nimport baseIndexOfWith from
&#39;./_baseIndexOfWith&#39;;nimport baseUnary from
&#39;./_baseUnary&#39;;nn/** Used for built-in method references. */nvar
arrayProto = Array.prototype;nn/** Built-in value references. */nvar splice
= arrayProto.splice;nn/**n * The base implementation of `_.pullAllBy`
without support for iterateen * shorthands.n *n * @privaten * @param
{Array} array The array to modify.n * @param {Array} values The values to
remove.n * @param {Function} [iteratee] The iteratee invoked per element.n
* @param {Function} [comparator] The comparator invoked per element.n *
@returns {Array} Returns `array`.n */nfunction basePullAll(array, values,
iteratee, comparator) {n  var indexOf = comparator ? baseIndexOfWith :
baseIndexOf,n      index = -1,n      length = values.length,n      seen =
array;nn  if (iteratee) {n    seen = arrayMap(array, baseUnary(iteratee));n
}n  while (++index &lt; length) {n    var fromIndex = 0,n        value = <a
href="index">values</a>,n        computed = iteratee ? iteratee(value) :
value;nn    while ((fromIndex = indexOf(seen, computed, fromIndex,
comparator)) &gt; -1) {n      if (seen !== array) {n       
splice.call(seen, fromIndex, 1);n      }n      splice.call(array,
fromIndex, 1);n    }n  }n  return array;n}nnexport default
basePullAll;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_basePullAll.jsn// module id = nulln//
module chunks = “,”/**n * This function is like `baseIndexOf` except that
it accepts a comparator.n *n * @privaten * @param {Array} array The array
to search.n * @param {*} value The value to search for.n * @param {number}
fromIndex The index to search from.n * @param {Function} comparator The
comparator invoked per element.n * @returns {number} Returns the index of
the matched value, else `-1`.n */nfunction baseIndexOfWith(array, value,
fromIndex, comparator) {n  var index = fromIndex - 1,n      length =
array.length;nn  while (++index &lt; length) {n    if (<a
href="index">comparator(array</a>, value)) {n      return index;n    }n  }n
return -1;n}nnexport default baseIndexOfWith;nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-utils/src/lib/lodash/_baseIndexOfWith.jsn//
module id = nulln// module chunks = “,”import basePullAll from
&#39;./_basePullAll&#39;;nn/**n * This method is like `_.pull` except that
it accepts an array of values to remove.n *n * *<strong>Note:</strong>*
Unlike `_.difference`, this method mutates `array`.n *n * @staticn *
@memberOf _n * @since 4.0.0n * @category Arrayn * @param {Array} array The
array to modify.n * @param {Array} values The values to remove.n * @returns
{Array} Returns `array`.n * @examplen *n * var array = [1, 2, 3, 1, 2, 3];n
*n * _.pullAll(array, [2, 3]);n * console.log(array);n * // =&gt; [1, 1]n
*/nfunction pullAll(array, values) {n  return (array &amp;&amp;
array.length &amp;&amp; values &amp;&amp; values.length)n    ?
basePullAll(array, values)n    : array;n}nnexport default
pullAll;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/pullAll.jsn// module id = nulln// module
chunks = “,”import pullAll from &#39;./pullAll&#39;;nimport rest from
&#39;./rest&#39;;nn/**n * Removes all given values from `array` usingn *
[`SameValueZero`](<a
href="http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n">ecma-international.org/ecma-262/6.0/#sec-samevaluezero)n</a>
* for equality comparisons.n *n * *<strong>Note:</strong>* Unlike
`_.without`, this method mutates `array`. Use `_.remove`n * to remove
elements from an array by predicate.n *n * @staticn * @memberOf _n * @since
2.0.0n * @category Arrayn * @param {Array} array The array to modify.n *
@param {…*} [values] The values to remove.n * @returns {Array} Returns
`array`.n * @examplen *n * var array = [1, 2, 3, 1, 2, 3];n *n *
_.pull(array, 2, 3);n * console.log(array);n * // =&gt; [1, 1]n */nvar pull
= rest(pullAll);nnexport default pull;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/pull.jsn// module id = nulln//
module chunks = “,”import baseIteratee from
&#39;./_baseIteratee&#39;;nimport basePullAll from
&#39;./_basePullAll&#39;;nn/**n * This method is like `_.pullAll` except
that it accepts `iteratee` which isn * invoked for each element of `array`
and `values` to generate the criterionn * by which they&#39;re compared.
The iteratee is invoked with one argument: (value).n *n *
*<strong>Note:</strong>* Unlike `_.differenceBy`, this method mutates
`array`.n *n * @staticn * @memberOf _n * @since 4.0.0n * @category Arrayn *
@param {Array} array The array to modify.n * @param {Array} values The
values to remove.n * @param {Array|Function|Object|string}
[iteratee=_.identity]n *  The iteratee invoked per element.n * @returns
{Array} Returns `array`.n * @examplen *n * var array = [{ &#39;x&#39;: 1 },
{ &#39;x&#39;: 2 }, { &#39;x&#39;: 3 }, { &#39;x&#39;: 1 }];n *n *
_.pullAllBy(array, [{ &#39;x&#39;: 1 }, { &#39;x&#39;: 3 }], &#39;x&#39;);n
* console.log(array);n * // =&gt; [{ &#39;x&#39;: 2 }]n */nfunction
pullAllBy(array, values, iteratee) {n  return (array &amp;&amp;
array.length &amp;&amp; values &amp;&amp; values.length)n    ?
basePullAll(array, values, baseIteratee(iteratee))n    : array;n}nnexport
default pullAllBy;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/pullAllBy.jsn// module id = nulln//
module chunks = “,”import baseGet from &#39;./_baseGet&#39;;nimport
baseSlice from &#39;./_baseSlice&#39;;nn/**n * Gets the parent value at
`path` of `object`.n *n * @privaten * @param {Object} object The object to
query.n * @param {Array} path The path to get the parent value of.n *
@returns {*} Returns the parent value.n */nfunction parent(object, path) {n
return path.length == 1 ? object : baseGet(object, baseSlice(path, 0,
-1));n}nnexport default parent;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_parent.jsn// module id = nulln// module
chunks = “,”import get from &#39;./get&#39;;nn/**n * The base
implementation of `_.at` without support for individual paths.n *n *
@privaten * @param {Object} object The object to iterate over.n * @param
{string[]} paths The property paths of elements to pick.n * @returns
{Array} Returns the picked elements.n */nfunction baseAt(object, paths) {n 
var index = -1,n      isNil = object == null,n      length = paths.length,n
result = Array(length);nn  while (++index &lt; length) {n    <a
href="index">result</a> = isNil ? undefined : get(object, <a
href="index">paths</a>);n  }n  return result;n}nnexport default
baseAt;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_baseAt.jsn// module id = nulln// module
chunks = “,”import castPath from &#39;./_castPath&#39;;nimport isIndex from
&#39;./_isIndex&#39;;nimport isKey from &#39;./_isKey&#39;;nimport last
from &#39;./last&#39;;nimport parent from &#39;./_parent&#39;;nimport toKey
from &#39;./_toKey&#39;;nn/** Used for built-in method references. */nvar
arrayProto = Array.prototype;nn/** Built-in value references. */nvar splice
= arrayProto.splice;nn/**n * The base implementation of `_.pullAt` without
support for individualn * indexes or capturing the removed elements.n *n *
@privaten * @param {Array} array The array to modify.n * @param {number[]}
indexes The indexes of elements to remove.n * @returns {Array} Returns
`array`.n */nfunction basePullAt(array, indexes) {n  var length = array ?
indexes.length : 0,n      lastIndex = length - 1;nn  while (length–) {n   
var index = <a href="length">indexes</a>;n    if (length == lastIndex ||
index !== previous) {n      var previous = index;n      if (isIndex(index))
{n        splice.call(array, index, 1);n      }n      else if
(!isKey(index, array)) {n        var path = castPath(index),n           
object = parent(array, path);nn        if (object != null) {n         
delete <a href="toKey(last(path))">object</a>;n        }n      }n      else
{n        delete <a href="toKey(index)">array</a>;n      }n    }n  }n 
return array;n}nnexport default basePullAt;nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-utils/src/lib/lodash/_basePullAt.jsn//
module id = nulln// module chunks = “,”import isSymbol from
&#39;./isSymbol&#39;;nn/**n * Compares values to sort them in ascending
order.n *n * @privaten * @param {*} value The value to compare.n * @param
{*} other The other value to compare.n * @returns {number} Returns the sort
order indicator for `value`.n */nfunction compareAscending(value, other) {n
if (value !== other) {n    var valIsDefined = value !== undefined,n       
valIsNull = value === null,n        valIsReflexive = value === value,n     
valIsSymbol = isSymbol(value);nn    var othIsDefined = other !==
undefined,n        othIsNull = other === null,n        othIsReflexive =
other === other,n        othIsSymbol = isSymbol(other);nn    if
((!othIsNull &amp;&amp; !othIsSymbol &amp;&amp; !valIsSymbol &amp;&amp;
value &gt; other) ||n        (valIsSymbol &amp;&amp; othIsDefined
&amp;&amp; othIsReflexive &amp;&amp; !othIsNull &amp;&amp; !othIsSymbol)
||n        (valIsNull &amp;&amp; othIsDefined &amp;&amp; othIsReflexive)
||n        (!valIsDefined &amp;&amp; othIsReflexive) ||n       
!valIsReflexive) {n      return 1;n    }n    if ((!valIsNull &amp;&amp;
!valIsSymbol &amp;&amp; !othIsSymbol &amp;&amp; value &lt; other) ||n      
(othIsSymbol &amp;&amp; valIsDefined &amp;&amp; valIsReflexive &amp;&amp;
!valIsNull &amp;&amp; !valIsSymbol) ||n        (othIsNull &amp;&amp;
valIsDefined &amp;&amp; valIsReflexive) ||n        (!othIsDefined
&amp;&amp; valIsReflexive) ||n        !othIsReflexive) {n      return -1;n 
}n  }n  return 0;n}nnexport default
compareAscending;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_compareAscending.jsn// module id =
nulln// module chunks = “,”import arrayMap from
&#39;./_arrayMap&#39;;nimport baseAt from &#39;./_baseAt&#39;;nimport
baseFlatten from &#39;./_baseFlatten&#39;;nimport basePullAt from
&#39;./_basePullAt&#39;;nimport compareAscending from
&#39;./_compareAscending&#39;;nimport isIndex from
&#39;./_isIndex&#39;;nimport rest from &#39;./rest&#39;;nn/**n * Removes
elements from `array` corresponding to `indexes` and returns ann * array of
removed elements.n *n * *<strong>Note:</strong>* Unlike `_.at`, this method
mutates `array`.n *n * @staticn * @memberOf _n * @since 3.0.0n * @category
Arrayn * @param {Array} array The array to modify.n * @param
{…(number|number[])} [indexes] The indexes of elements to remove.n *
@returns {Array} Returns the new array of removed elements.n * @examplen *n
* var array = [5, 10, 15, 20];n * var evens = _.pullAt(array, 1, 3);n *n *
console.log(array);n * // =&gt; [5, 15]n *n * console.log(evens);n * //
=&gt; [10, 20]n */nvar pullAt = rest(function(array, indexes) {n  indexes =
baseFlatten(indexes, 1);nn  var length = array ? array.length : 0,n     
result = baseAt(array, indexes);nn  basePullAt(array, arrayMap(indexes,
function(index) {n    return isIndex(index, length) ? +index : index;n 
}).sort(compareAscending));nn  return result;n});nnexport default
pullAt;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/pullAt.jsn// module id = nulln// module
chunks = “,”import baseIteratee from &#39;./_baseIteratee&#39;;nimport
basePullAt from &#39;./_basePullAt&#39;;nn/**n * Removes all elements from
`array` that `predicate` returns truthy forn * and returns an array of the
removed elements. The predicate is invokedn * with three arguments: (value,
index, array).n *n * *<strong>Note:</strong>* Unlike `_.filter`, this
method mutates `array`. Use `_.pull`n * to pull elements from an array by
value.n *n * @staticn * @memberOf _n * @since 2.0.0n * @category Arrayn *
@param {Array} array The array to modify.n * @param
{Array|Function|Object|string} [predicate=_.identity]n *  The function
invoked per iteration.n * @returns {Array} Returns the new array of removed
elements.n * @examplen *n * var array = [1, 2, 3, 4];n * var evens =
_.remove(array, function(n) {n *   return n % 2 == 0;n * });n *n *
console.log(array);n * // =&gt; [1, 3]n *n * console.log(evens);n * //
=&gt; [2, 4]n */nfunction remove(array, predicate) {n  var result = [];n 
if (!(array &amp;&amp; array.length)) {n    return result;n  }n  var index
= -1,n      indexes = [],n      length = array.length;nn  predicate =
baseIteratee(predicate, 3);n  while (++index &lt; length) {n    var value =
<a href="index">array</a>;n    if (predicate(value, index, array)) {n     
result.push(value);n      indexes.push(index);n    }n  }n 
basePullAt(array, indexes);n  return result;n}nnexport default
remove;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/remove.jsn// module id = nulln// module
chunks = “,”/** Used for built-in method references. */nvar arrayProto =
Array.prototype;nn/* Built-in method references for those with the same
name as other `lodash` methods. */nvar nativeReverse =
arrayProto.reverse;nn/**n * Reverses `array` so that the first element
becomes the last, the secondn * element becomes the second to last, and so
on.n *n * *<strong>Note:</strong>* This method mutates `array` and is based
onn * [`Array#reverse`](<a
href="https://mdn.io/Array/reverse).\n">mdn.io/Array/reverse).n</a> *n *
@staticn * @memberOf _n * @since 4.0.0n * @category Arrayn * @param {Array}
array The array to modify.n * @returns {Array} Returns `array`.n *
@examplen *n * var array = [1, 2, 3];n *n * _.reverse(array);n * // =&gt;
[3, 2, 1]n *n * console.log(array);n * // =&gt; [3, 2, 1]n */nfunction
reverse(array) {n  return array ? nativeReverse.call(array) :
array;n}nnexport default reverse;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/reverse.jsn// module id =
nulln// module chunks = “,”import baseSortedIndexBy from
&#39;./_baseSortedIndexBy&#39;;nimport identity from
&#39;./identity&#39;;nimport isSymbol from &#39;./isSymbol&#39;;nn/** Used
as references for the maximum length and index of an array. */nvar
MAX_ARRAY_LENGTH = 4294967295,n    HALF_MAX_ARRAY_LENGTH = MAX_ARRAY_LENGTH
&gt;&gt;&gt; 1;nn/**n * The base implementation of `_.sortedIndex` and
`_.sortedLastIndex` whichn * performs a binary search of `array` to
determine the index at which `value`n * should be inserted into `array` in
order to maintain its sort order.n *n * @privaten * @param {Array} array
The sorted array to inspect.n * @param {*} value The value to evaluate.n *
@param {boolean} [retHighest] Specify returning the highest qualified
index.n * @returns {number} Returns the index at which `value` should be
insertedn *  into `array`.n */nfunction baseSortedIndex(array, value,
retHighest) {n  var low = 0,n      high = array ? array.length : low;nn  if
(typeof value == &#39;number&#39; &amp;&amp; value === value &amp;&amp;
high &lt;= HALF_MAX_ARRAY_LENGTH) {n    while (low &lt; high) {n      var
mid = (low + high) &gt;&gt;&gt; 1,n          computed = <a
href="mid">array</a>;nn      if (computed !== null &amp;&amp;
!isSymbol(computed) &amp;&amp;n          (retHighest ? (computed &lt;=
value) : (computed &lt; value))) {n        low = mid + 1;n      } else {n  
high = mid;n      }n    }n    return high;n  }n  return
baseSortedIndexBy(array, value, identity, retHighest);n}nnexport default
baseSortedIndex;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_baseSortedIndex.jsn// module id =
nulln// module chunks = “,”import isSymbol from &#39;./isSymbol&#39;;nn/**
Used as references for the maximum length and index of an array. */nvar
MAX_ARRAY_LENGTH = 4294967295,n    MAX_ARRAY_INDEX = MAX_ARRAY_LENGTH -
1;nn/* Built-in method references for those with the same name as other
`lodash` methods. */nvar nativeFloor = Math.floor,n    nativeMin =
Math.min;nn/**n * The base implementation of `_.sortedIndexBy` and
`_.sortedLastIndexBy`n * which invokes `iteratee` for `value` and each
element of `array` to computen * their sort ranking. The iteratee is
invoked with one argument; (value).n *n * @privaten * @param {Array} array
The sorted array to inspect.n * @param {*} value The value to evaluate.n *
@param {Function} iteratee The iteratee invoked per element.n * @param
{boolean} [retHighest] Specify returning the highest qualified index.n *
@returns {number} Returns the index at which `value` should be insertedn * 
into `array`.n */nfunction baseSortedIndexBy(array, value, iteratee,
retHighest) {n  value = iteratee(value);nn  var low = 0,n      high = array
? array.length : 0,n      valIsNaN = value !== value,n      valIsNull =
value === null,n      valIsSymbol = isSymbol(value),n      valIsUndefined =
value === undefined;nn  while (low &lt; high) {n    var mid =
nativeFloor((low + high) / 2),n        computed = <a
href="mid">iteratee(array</a>),n        othIsDefined = computed !==
undefined,n        othIsNull = computed === null,n        othIsReflexive =
computed === computed,n        othIsSymbol = isSymbol(computed);nn    if
(valIsNaN) {n      var setLow = retHighest || othIsReflexive;n    } else if
(valIsUndefined) {n      setLow = othIsReflexive &amp;&amp; (retHighest ||
othIsDefined);n    } else if (valIsNull) {n      setLow = othIsReflexive
&amp;&amp; othIsDefined &amp;&amp; (retHighest || !othIsNull);n    } else
if (valIsSymbol) {n      setLow = othIsReflexive &amp;&amp; othIsDefined
&amp;&amp; !othIsNull &amp;&amp; (retHighest || !othIsSymbol);n    } else
if (othIsNull || othIsSymbol) {n      setLow = false;n    } else {n     
setLow = retHighest ? (computed &lt;= value) : (computed &lt; value);n   
}n    if (setLow) {n      low = mid + 1;n    } else {n      high = mid;n   
}n  }n  return nativeMin(high, MAX_ARRAY_INDEX);n}nnexport default
baseSortedIndexBy;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_baseSortedIndexBy.jsn// module id =
nulln// module chunks = “,”import baseSortedIndex from
&#39;./_baseSortedIndex&#39;;nn/**n * Uses a binary search to determine the
lowest index at which `value`n * should be inserted into `array` in order
to maintain its sort order.n *n * @staticn * @memberOf _n * @since 0.1.0n *
@category Arrayn * @param {Array} array The sorted array to inspect.n *
@param {*} value The value to evaluate.n * @returns {number} Returns the
index at which `value` should be insertedn *  into `array`.n * @examplen *n
* _.sortedIndex([30, 50], 40);n * // =&gt; 1n *n * _.sortedIndex([4, 5],
4);n * // =&gt; 0n */nfunction sortedIndex(array, value) {n  return
baseSortedIndex(array, value);n}nnexport default
sortedIndex;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/sortedIndex.jsn// module id = nulln//
module chunks = “,”import baseSortedUniq from
&#39;./_baseSortedUniq&#39;;nn/**n * This method is like `_.uniq` except
that it&#39;s designed and optimizedn * for sorted arrays.n *n * @staticn *
@memberOf _n * @since 4.0.0n * @category Arrayn * @param {Array} array The
array to inspect.n * @returns {Array} Returns the new duplicate free
array.n * @examplen *n * _.sortedUniq([1, 1, 2]);n * // =&gt; [1, 2]n
*/nfunction sortedUniq(array) {n  return (array &amp;&amp; array.length)n  
? baseSortedUniq(array)n    : [];n}nnexport default
sortedUniq;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/sortedUniq.jsn// module id = nulln//
module chunks = “,”import eq from &#39;./eq&#39;;nn/**n * The base
implementation of `_.sortedUniq` and `_.sortedUniqBy` withoutn * support
for iteratee shorthands.n *n * @privaten * @param {Array} array The array
to inspect.n * @param {Function} [iteratee] The iteratee invoked per
element.n * @returns {Array} Returns the new duplicate free array.n
*/nfunction baseSortedUniq(array, iteratee) {n  var index = -1,n     
length = array.length,n      resIndex = 0,n      result = [];nn  while
(++index &lt; length) {n    var value = <a href="index">array</a>,n       
computed = iteratee ? iteratee(value) : value;nn    if (!index ||
!eq(computed, seen)) {n      var seen = computed;n      <a
href="resIndex++">result</a> = value === 0 ? 0 : value;n    }n  }n  return
result;n}nnexport default baseSortedUniq;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/_baseSortedUniq.jsn// module id
= nulln// module chunks = “,”import Set from &#39;./_Set&#39;;nimport noop
from &#39;./noop&#39;;nimport setToArray from &#39;./_setToArray&#39;;nn/**
Used as references for various `Number` constants. */nvar INFINITY = 1 /
0;nn/**n * Creates a set of `values`.n *n * @privaten * @param {Array}
values The values to add to the set.n * @returns {Object} Returns the new
set.n */nvar createSet = !(Set &amp;&amp; (1 / setToArray(new <a
href=",-0">Set(</a>))[1]) == INFINITY) ? noop : function(values) {n  return
new Set(values);n};nnexport default createSet;nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-utils/src/lib/lodash/_createSet.jsn// module
id = nulln// module chunks = “,”import SetCache from
&#39;./_SetCache&#39;;nimport arrayIncludes from
&#39;./_arrayIncludes&#39;;nimport arrayIncludesWith from
&#39;./_arrayIncludesWith&#39;;nimport cacheHas from
&#39;./_cacheHas&#39;;nimport createSet from &#39;./_createSet&#39;;nimport
setToArray from &#39;./_setToArray&#39;;nn/** Used as the size to enable
large array optimizations. */nvar LARGE_ARRAY_SIZE = 200;nn/**n * The base
implementation of `_.uniqBy` without support for iteratee shorthands.n *n *
@privaten * @param {Array} array The array to inspect.n * @param {Function}
[iteratee] The iteratee invoked per element.n * @param {Function}
[comparator] The comparator invoked per element.n * @returns {Array}
Returns the new duplicate free array.n */nfunction baseUniq(array,
iteratee, comparator) {n  var index = -1,n      includes = arrayIncludes,n 
length = array.length,n      isCommon = true,n      result = [],n      seen
= result;nn  if (comparator) {n    isCommon = false;n    includes =
arrayIncludesWith;n  }n  else if (length &gt;= LARGE_ARRAY_SIZE) {n    var
set = iteratee ? null : createSet(array);n    if (set) {n      return
setToArray(set);n    }n    isCommon = false;n    includes = cacheHas;n   
seen = new SetCache;n  }n  else {n    seen = iteratee ? [] : result;n  }n 
outer:n  while (++index &lt; length) {n    var value = <a
href="index">array</a>,n        computed = iteratee ? iteratee(value) :
value;nn    value = (comparator || value !== 0) ? value : 0;n    if
(isCommon &amp;&amp; computed === computed) {n      var seenIndex =
seen.length;n      while (seenIndex–) {n        if (<a
href="seenIndex">seen</a> === computed) {n          continue outer;n       
}n      }n      if (iteratee) {n        seen.push(computed);n      }n     
result.push(value);n    }n    else if (!includes(seen, computed,
comparator)) {n      if (seen !== result) {n        seen.push(computed);n  
}n      result.push(value);n    }n  }n  return result;n}nnexport default
baseUniq;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_baseUniq.jsn// module id = nulln//
module chunks = “,”/**n * A no-operation function that returns `undefined`
regardless of then * arguments it receives.n *n * @staticn * @memberOf _n *
@since 2.3.0n * @category Utiln * @examplen *n * var object = {
&#39;user&#39;: &#39;fred&#39; };n *n * _.noop(object) === undefined;n * //
=&gt; truen */nfunction noop() {n  // No operation performed.n}nnexport
default noop;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/noop.jsn// module id = nulln// module
chunks = “,”import baseFlatten from &#39;./_baseFlatten&#39;;nimport
baseUniq from &#39;./_baseUniq&#39;;nimport isArrayLikeObject from
&#39;./isArrayLikeObject&#39;;nimport rest from &#39;./rest&#39;;nn/**n *
Creates an array of unique values, in order, from all given arrays usingn *
[`SameValueZero`](<a
href="http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n">ecma-international.org/ecma-262/6.0/#sec-samevaluezero)n</a>
* for equality comparisons.n *n * @staticn * @memberOf _n * @since 0.1.0n *
@category Arrayn * @param {…Array} [arrays] The arrays to inspect.n *
@returns {Array} Returns the new array of combined values.n * @examplen *n
* _.union([2, 1], [4, 2], [1, 2]);n * // =&gt; [2, 1, 4]n */nvar union =
rest(function(arrays) {n  return baseUniq(baseFlatten(arrays, 1,
isArrayLikeObject, true));n});nnexport default
union;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/union.jsn// module id = nulln// module
chunks = “,”import baseFlatten from &#39;./_baseFlatten&#39;;nimport
baseIteratee from &#39;./_baseIteratee&#39;;nimport baseUniq from
&#39;./_baseUniq&#39;;nimport isArrayLikeObject from
&#39;./isArrayLikeObject&#39;;nimport last from &#39;./last&#39;;nimport
rest from &#39;./rest&#39;;nn/**n * This method is like `_.union` except
that it accepts `iteratee` which isn * invoked for each element of each
`arrays` to generate the criterion byn * which uniqueness is computed. The
iteratee is invoked with one argument:n * (value).n *n * @staticn *
@memberOf _n * @since 4.0.0n * @category Arrayn * @param {…Array} [arrays]
The arrays to inspect.n * @param {Array|Function|Object|string}
[iteratee=_.identity]n *  The iteratee invoked per element.n * @returns
{Array} Returns the new array of combined values.n * @examplen *n *
_.unionBy([2.1, 1.2], [4.3, 2.4], Math.floor);n * // =&gt; [2.1, 1.2, 4.3]n
*n * // The `_.property` iteratee shorthand.n * _.unionBy([{ &#39;x&#39;: 1
}], [{ &#39;x&#39;: 2 }, { &#39;x&#39;: 1 }], &#39;x&#39;);n * // =&gt; [{
&#39;x&#39;: 1 }, { &#39;x&#39;: 2 }]n */nvar unionBy =
rest(function(arrays) {n  var iteratee = last(arrays);n  if
(isArrayLikeObject(iteratee)) {n    iteratee = undefined;n  }n  return
baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true),
baseIteratee(iteratee));n});nnexport default
unionBy;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/unionBy.jsn// module id = nulln// module
chunks = “,”import baseFlatten from &#39;./_baseFlatten&#39;;nimport
baseUniq from &#39;./_baseUniq&#39;;nimport isArrayLikeObject from
&#39;./isArrayLikeObject&#39;;nimport last from &#39;./last&#39;;nimport
rest from &#39;./rest&#39;;nn/**n * This method is like `_.union` except
that it accepts `comparator` whichn * is invoked to compare elements of
`arrays`. The comparator is invokedn * with two arguments: (arrVal,
othVal).n *n * @staticn * @memberOf _n * @since 4.0.0n * @category Arrayn *
@param {…Array} [arrays] The arrays to inspect.n * @param {Function}
[comparator] The comparator invoked per element.n * @returns {Array}
Returns the new array of combined values.n * @examplen *n * var objects =
[{ &#39;x&#39;: 1, &#39;y&#39;: 2 }, { &#39;x&#39;: 2, &#39;y&#39;: 1 }];n
* var others = [{ &#39;x&#39;: 1, &#39;y&#39;: 1 }, { &#39;x&#39;: 1,
&#39;y&#39;: 2 }];n *n * _.unionWith(objects, others, _.isEqual);n * //
=&gt; [{ &#39;x&#39;: 1, &#39;y&#39;: 2 }, { &#39;x&#39;: 2, &#39;y&#39;: 1
}, { &#39;x&#39;: 1, &#39;y&#39;: 1 }]n */nvar unionWith =
rest(function(arrays) {n  var comparator = last(arrays);n  if
(isArrayLikeObject(comparator)) {n    comparator = undefined;n  }n  return
baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true), undefined,
comparator);n});nnexport default unionWith;nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-utils/src/lib/lodash/unionWith.jsn// module
id = nulln// module chunks = “,”import baseUniq from
&#39;./_baseUniq&#39;;nn/**n * Creates a duplicate-free version of an
array, usingn * [`SameValueZero`](<a
href="http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n">ecma-international.org/ecma-262/6.0/#sec-samevaluezero)n</a>
* for equality comparisons, in which only the first occurrence of eachn *
element is kept.n *n * @staticn * @memberOf _n * @since 0.1.0n * @category
Arrayn * @param {Array} array The array to inspect.n * @returns {Array}
Returns the new duplicate free array.n * @examplen *n * _.uniq([2, 1, 2]);n
* // =&gt; [2, 1]n */nfunction uniq(array) {n  return (array &amp;&amp;
array.length)n    ? baseUniq(array)n    : [];n}nnexport default
uniq;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/uniq.jsn// module id = nulln// module
chunks = “,”import arrayFilter from &#39;./_arrayFilter&#39;;nimport
arrayMap from &#39;./_arrayMap&#39;;nimport baseProperty from
&#39;./_baseProperty&#39;;nimport baseTimes from
&#39;./_baseTimes&#39;;nimport isArrayLikeObject from
&#39;./isArrayLikeObject&#39;;nn/* Built-in method references for those
with the same name as other `lodash` methods. */nvar nativeMax =
Math.max;nn/**n * This method is like `_.zip` except that it accepts an
array of groupedn * elements and creates an array regrouping the elements
to their pre-zipn * configuration.n *n * @staticn * @memberOf _n * @since
1.2.0n * @category Arrayn * @param {Array} array The array of grouped
elements to process.n * @returns {Array} Returns the new array of regrouped
elements.n * @examplen *n * var zipped = _.zip([&#39;fred&#39;,
&#39;barney&#39;], [30, 40], [true, false]);n * // =&gt; [[&#39;fred&#39;,
30, true], [&#39;barney&#39;, 40, false]]n *n * _.unzip(zipped);n * //
=&gt; [[&#39;fred&#39;, &#39;barney&#39;], [30, 40], [true, false]]n
*/nfunction unzip(array) {n  if (!(array &amp;&amp; array.length)) {n   
return [];n  }n  var length = 0;n  array = arrayFilter(array,
function(group) {n    if (isArrayLikeObject(group)) {n      length =
nativeMax(group.length, length);n      return true;n    }n  });n  return
baseTimes(length, function(index) {n    return arrayMap(array,
baseProperty(index));n  });n}nnexport default
unzip;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/unzip.jsn// module id = nulln// module
chunks = “,”/**n * A specialized version of `_.filter` for arrays without
support forn * iteratee shorthands.n *n * @privaten * @param {Array} array
The array to iterate over.n * @param {Function} predicate The function
invoked per iteration.n * @returns {Array} Returns the new filtered array.n
*/nfunction arrayFilter(array, predicate) {n  var index = -1,n      length
= array.length,n      resIndex = 0,n      result = [];nn  while (++index
&lt; length) {n    var value = <a href="index">array</a>;n    if
(predicate(value, index, array)) {n      <a href="resIndex++">result</a> =
value;n    }n  }n  return result;n}nnexport default
arrayFilter;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_arrayFilter.jsn// module id = nulln//
module chunks = “,”import apply from &#39;./_apply&#39;;nimport arrayMap
from &#39;./_arrayMap&#39;;nimport unzip from &#39;./unzip&#39;;nn/**n *
This method is like `_.unzip` except that it accepts `iteratee` to specifyn
* how regrouped values should be combined. The iteratee is invoked with
then * elements of each group: (…group).n *n * @staticn * @memberOf _n *
@since 3.8.0n * @category Arrayn * @param {Array} array The array of
grouped elements to process.n * @param {Function} [iteratee=_.identity] The
function to combinen *  regrouped values.n * @returns {Array} Returns the
new array of regrouped elements.n * @examplen *n * var zipped = _.zip([1,
2], [10, 20], [100, 200]);n * // =&gt; [[1, 10, 100], [2, 20, 200]]n *n *
_.unzipWith(zipped, _.add);n * // =&gt; [3, 30, 300]n */nfunction
unzipWith(array, iteratee) {n  if (!(array &amp;&amp; array.length)) {n   
return [];n  }n  var result = unzip(array);n  if (iteratee == null) {n   
return result;n  }n  return arrayMap(result, function(group) {n    return
apply(iteratee, undefined, group);n  });n}nnexport default
unzipWith;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/unzipWith.jsn// module id = nulln//
module chunks = “,”import baseDifference from
&#39;./_baseDifference&#39;;nimport isArrayLikeObject from
&#39;./isArrayLikeObject&#39;;nimport rest from &#39;./rest&#39;;nn/**n *
Creates an array excluding all given values usingn * [`SameValueZero`](<a
href="http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n">ecma-international.org/ecma-262/6.0/#sec-samevaluezero)n</a>
* for equality comparisons.n *n * @staticn * @memberOf _n * @since 0.1.0n *
@category Arrayn * @param {Array} array The array to inspect.n * @param
{…*} [values] The values to exclude.n * @returns {Array} Returns the new
array of filtered values.n * @see _.difference, _.xorn * @examplen *n *
_.without([1, 2, 1, 3], 1, 2);n * // =&gt; [3]n */nvar without =
rest(function(array, values) {n  return isArrayLikeObject(array)n    ?
baseDifference(array, values)n    : [];n});nnexport default
without;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/without.jsn// module id = nulln// module
chunks = “,”import arrayPush from &#39;./_arrayPush&#39;;nimport
baseDifference from &#39;./_baseDifference&#39;;nimport baseUniq from
&#39;./_baseUniq&#39;;nn/**n * The base implementation of methods like
`_.xor`, without support forn * iteratee shorthands, that accepts an array
of arrays to inspect.n *n * @privaten * @param {Array} arrays The arrays to
inspect.n * @param {Function} [iteratee] The iteratee invoked per element.n
* @param {Function} [comparator] The comparator invoked per element.n *
@returns {Array} Returns the new array of values.n */nfunction
baseXor(arrays, iteratee, comparator) {n  var index = -1,n      length =
arrays.length;nn  while (++index &lt; length) {n    var result = resultn   
? arrayPush(n          baseDifference(result, <a href="index">arrays</a>,
iteratee, comparator),n          <a href="index">baseDifference(arrays</a>,
result, iteratee, comparator)n        )n      : <a
href="index">arrays</a>;n  }n  return (result &amp;&amp; result.length) ?
baseUniq(result, iteratee, comparator) : [];n}nnexport default
baseXor;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_baseXor.jsn// module id = nulln// module
chunks = “,”import arrayFilter from &#39;./_arrayFilter&#39;;nimport
baseXor from &#39;./_baseXor&#39;;nimport isArrayLikeObject from
&#39;./isArrayLikeObject&#39;;nimport rest from &#39;./rest&#39;;nn/**n *
Creates an array of unique values that is then * [symmetric difference](<a
href="https://en.wikipedia.org/wiki/Symmetric_difference)\n">en.wikipedia.org/wiki/Symmetric_difference)n</a>
* of the given arrays. The order of result values is determined by the
ordern * they occur in the arrays.n *n * @staticn * @memberOf _n * @since
2.4.0n * @category Arrayn * @param {…Array} [arrays] The arrays to
inspect.n * @returns {Array} Returns the new array of filtered values.n *
@see _.difference, _.withoutn * @examplen *n * _.xor([2, 1], [4, 2]);n * //
=&gt; [1, 4]n */nvar xor = rest(function(arrays) {n  return
baseXor(arrayFilter(arrays, isArrayLikeObject));n});nnexport default
xor;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/xor.jsn// module id = nulln// module
chunks = “,”import arrayFilter from &#39;./_arrayFilter&#39;;nimport
baseIteratee from &#39;./_baseIteratee&#39;;nimport baseXor from
&#39;./_baseXor&#39;;nimport isArrayLikeObject from
&#39;./isArrayLikeObject&#39;;nimport last from &#39;./last&#39;;nimport
rest from &#39;./rest&#39;;nn/**n * This method is like `_.xor` except that
it accepts `iteratee` which isn * invoked for each element of each `arrays`
to generate the criterion byn * which by which they&#39;re compared. The
iteratee is invoked with one argument:n * (value).n *n * @staticn *
@memberOf _n * @since 4.0.0n * @category Arrayn * @param {…Array} [arrays]
The arrays to inspect.n * @param {Array|Function|Object|string}
[iteratee=_.identity]n *  The iteratee invoked per element.n * @returns
{Array} Returns the new array of filtered values.n * @examplen *n *
_.xorBy([2.1, 1.2], [4.3, 2.4], Math.floor);n * // =&gt; [1.2, 4.3]n *n *
// The `_.property` iteratee shorthand.n * _.xorBy([{ &#39;x&#39;: 1 }], [{
&#39;x&#39;: 2 }, { &#39;x&#39;: 1 }], &#39;x&#39;);n * // =&gt; [{
&#39;x&#39;: 2 }]n */nvar xorBy = rest(function(arrays) {n  var iteratee =
last(arrays);n  if (isArrayLikeObject(iteratee)) {n    iteratee =
undefined;n  }n  return baseXor(arrayFilter(arrays, isArrayLikeObject),
baseIteratee(iteratee));n});nnexport default
xorBy;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/xorBy.jsn// module id = nulln// module
chunks = “,”import arrayFilter from &#39;./_arrayFilter&#39;;nimport
baseXor from &#39;./_baseXor&#39;;nimport isArrayLikeObject from
&#39;./isArrayLikeObject&#39;;nimport last from &#39;./last&#39;;nimport
rest from &#39;./rest&#39;;nn/**n * This method is like `_.xor` except that
it accepts `comparator` which isn * invoked to compare elements of
`arrays`. The comparator is invoked withn * two arguments: (arrVal,
othVal).n *n * @staticn * @memberOf _n * @since 4.0.0n * @category Arrayn *
@param {…Array} [arrays] The arrays to inspect.n * @param {Function}
[comparator] The comparator invoked per element.n * @returns {Array}
Returns the new array of filtered values.n * @examplen *n * var objects =
[{ &#39;x&#39;: 1, &#39;y&#39;: 2 }, { &#39;x&#39;: 2, &#39;y&#39;: 1 }];n
* var others = [{ &#39;x&#39;: 1, &#39;y&#39;: 1 }, { &#39;x&#39;: 1,
&#39;y&#39;: 2 }];n *n * _.xorWith(objects, others, _.isEqual);n * // =&gt;
[{ &#39;x&#39;: 2, &#39;y&#39;: 1 }, { &#39;x&#39;: 1, &#39;y&#39;: 1 }]n
*/nvar xorWith = rest(function(arrays) {n  var comparator = last(arrays);n 
if (isArrayLikeObject(comparator)) {n    comparator = undefined;n  }n 
return baseXor(arrayFilter(arrays, isArrayLikeObject), undefined,
comparator);n});nnexport default xorWith;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/xorWith.jsn// module id =
nulln// module chunks = “,”import rest from &#39;./rest&#39;;nimport unzip
from &#39;./unzip&#39;;nn/**n * Creates an array of grouped elements, the
first of which contains then * first elements of the given arrays, the
second of which contains then * second elements of the given arrays, and so
on.n *n * @staticn * @memberOf _n * @since 0.1.0n * @category Arrayn *
@param {…Array} [arrays] The arrays to process.n * @returns {Array} Returns
the new array of grouped elements.n * @examplen *n * _.zip([&#39;fred&#39;,
&#39;barney&#39;], [30, 40], [true, false]);n * // =&gt; [[&#39;fred&#39;,
30, true], [&#39;barney&#39;, 40, false]]n */nvar zip =
rest(unzip);nnexport default zip;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/zip.jsn// module id = nulln//
module chunks = “,”/**n * This base implementation of `_.zipObject` which
assigns values using `assignFunc`.n *n * @privaten * @param {Array} props
The property identifiers.n * @param {Array} values The property values.n *
@param {Function} assignFunc The function to assign values.n * @returns
{Object} Returns the new object.n */nfunction baseZipObject(props, values,
assignFunc) {n  var index = -1,n      length = props.length,n     
valsLength = values.length,n      result = {};nn  while (++index &lt;
length) {n    var value = index &lt; valsLength ? <a
href="index">values</a> : undefined;n    assignFunc(result, <a
href="index">props</a>, value);n  }n  return result;n}nnexport default
baseZipObject;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_baseZipObject.jsn// module id = nulln//
module chunks = “,”import assignValue from &#39;./_assignValue&#39;;nimport
baseZipObject from &#39;./_baseZipObject&#39;;nn/**n * This method is like
`_.fromPairs` except that it accepts two arrays,n * one of property
identifiers and one of corresponding values.n *n * @staticn * @memberOf _n
* @since 0.4.0n * @category Arrayn * @param {Array} [<a href="]">props=</a>
The property identifiers.n * @param {Array} [<a href="]">values=</a> The
property values.n * @returns {Object} Returns the new object.n * @examplen
*n * _.zipObject([&#39;a&#39;, &#39;b&#39;], [1, 2]);n * // =&gt; {
&#39;a&#39;: 1, &#39;b&#39;: 2 }n */nfunction zipObject(props, values) {n 
return baseZipObject(props || [], values || [], assignValue);n}nnexport
default zipObject;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/zipObject.jsn// module id = nulln//
module chunks = “,”import baseSet from &#39;./_baseSet&#39;;nimport
baseZipObject from &#39;./_baseZipObject&#39;;nn/**n * This method is like
`_.zipObject` except that it supports property paths.n *n * @staticn *
@memberOf _n * @since 4.1.0n * @category Arrayn * @param {Array} [<a
href="]">props=</a> The property identifiers.n * @param {Array} [<a
href="]">values=</a> The property values.n * @returns {Object} Returns the
new object.n * @examplen *n * <a href="0">_.zipObjectDeep([‘a.b</a>.c&#39;,
&#39;<a href="1">a.b</a>.d&#39;], [1, 2]);n * // =&gt; { &#39;a&#39;: {
&#39;b&#39;: [{ &#39;c&#39;: 1 }, { &#39;d&#39;: 2 }] } }n */nfunction
zipObjectDeep(props, values) {n  return baseZipObject(props || [], values
|| [], baseSet);n}nnexport default zipObjectDeep;nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-utils/src/lib/lodash/zipObjectDeep.jsn//
module id = nulln// module chunks = “,”import assignValue from
&#39;./_assignValue&#39;;nimport castPath from
&#39;./_castPath&#39;;nimport isIndex from &#39;./_isIndex&#39;;nimport
isKey from &#39;./_isKey&#39;;nimport isObject from
&#39;./isObject&#39;;nimport toKey from &#39;./_toKey&#39;;nn/**n * The
base implementation of `_.set`.n *n * @privaten * @param {Object} object
The object to query.n * @param {Array|string} path The path of the property
to set.n * @param {*} value The value to set.n * @param {Function}
[customizer] The function to customize path creation.n * @returns {Object}
Returns `object`.n */nfunction baseSet(object, path, value, customizer) {n 
path = isKey(path, object) ? [path] : castPath(path);nn  var index = -1,n  
length = path.length,n      lastIndex = length - 1,n      nested =
object;nn  while (nested != null &amp;&amp; ++index &lt; length) {n    var
key = <a href="index">toKey(path</a>);n    if (isObject(nested)) {n     
var newValue = value;n      if (index != lastIndex) {n        var objValue
= <a href="key">nested</a>;n        newValue = customizer ?
customizer(objValue, key, nested) : undefined;n        if (newValue ===
undefined) {n          newValue = objValue == nulln            ?
(isIndex(path[index + 1]) ? [] : {})n            : objValue;n        }n    
}n      assignValue(nested, key, newValue);n    }n    nested = <a
href="key">nested</a>;n  }n  return object;n}nnexport default
baseSet;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_baseSet.jsn// module id = nulln// module
chunks = “,”import rest from &#39;./rest&#39;;nimport unzipWith from
&#39;./unzipWith&#39;;nn/**n * This method is like `_.zip` except that it
accepts `iteratee` to specifyn * how grouped values should be combined. The
iteratee is invoked with then * elements of each group: (…group).n *n *
@staticn * @memberOf _n * @since 3.8.0n * @category Arrayn * @param
{…Array} [arrays] The arrays to process.n * @param {Function}
[iteratee=_.identity] The function to combine grouped values.n * @returns
{Array} Returns the new array of grouped elements.n * @examplen *n *
_.zipWith([1, 2], [10, 20], [100, 200], function(a, b, c) {n *   return a +
b + c;n * });n * // =&gt; [111, 222]n */nvar zipWith =
rest(function(arrays) {n  var length = arrays.length,n      iteratee =
length &gt; 1 ? arrays[length - 1] : undefined;nn  iteratee = typeof
iteratee == &#39;function&#39; ? (arrays.pop(), iteratee) : undefined;n 
return unzipWith(arrays, iteratee);n});nnexport default
zipWith;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/zipWith.jsn// module id = nulln// module
chunks = “,”import chunk from &#39;./chunk&#39;;nimport compact from
&#39;./compact&#39;;nimport concat from &#39;./concat&#39;;nimport
difference from &#39;./difference&#39;;nimport differenceBy from
&#39;./differenceBy&#39;;nimport differenceWith from
&#39;./differenceWith&#39;;nimport drop from &#39;./drop&#39;;nimport
dropRight from &#39;./dropRight&#39;;nimport dropRightWhile from
&#39;./dropRightWhile&#39;;nimport dropWhile from
&#39;./dropWhile&#39;;nimport fill from &#39;./fill&#39;;nimport findIndex
from &#39;./findIndex&#39;;nimport findLastIndex from
&#39;./findLastIndex&#39;;nimport first from &#39;./first&#39;;nimport
flatten from &#39;./flatten&#39;;nimport flattenDeep from
&#39;./flattenDeep&#39;;nimport flattenDepth from
&#39;./flattenDepth&#39;;nimport fromPairs from
&#39;./fromPairs&#39;;nimport head from &#39;./head&#39;;nimport indexOf
from &#39;./indexOf&#39;;nimport initial from &#39;./initial&#39;;nimport
intersection from &#39;./intersection&#39;;nimport intersectionBy from
&#39;./intersectionBy&#39;;nimport intersectionWith from
&#39;./intersectionWith&#39;;nimport join from &#39;./join&#39;;nimport
last from &#39;./last&#39;;nimport lastIndexOf from
&#39;./lastIndexOf&#39;;nimport nth from &#39;./nth&#39;;nimport pull from
&#39;./pull&#39;;nimport pullAll from &#39;./pullAll&#39;;nimport pullAllBy
from &#39;./pullAllBy&#39;;nimport pullAllWith from
&#39;./pullAllWith&#39;;nimport pullAt from &#39;./pullAt&#39;;nimport
remove from &#39;./remove&#39;;nimport reverse from
&#39;./reverse&#39;;nimport slice from &#39;./slice&#39;;nimport
sortedIndex from &#39;./sortedIndex&#39;;nimport sortedIndexBy from
&#39;./sortedIndexBy&#39;;nimport sortedIndexOf from
&#39;./sortedIndexOf&#39;;nimport sortedLastIndex from
&#39;./sortedLastIndex&#39;;nimport sortedLastIndexBy from
&#39;./sortedLastIndexBy&#39;;nimport sortedLastIndexOf from
&#39;./sortedLastIndexOf&#39;;nimport sortedUniq from
&#39;./sortedUniq&#39;;nimport sortedUniqBy from
&#39;./sortedUniqBy&#39;;nimport tail from &#39;./tail&#39;;nimport take
from &#39;./take&#39;;nimport takeRight from &#39;./takeRight&#39;;nimport
takeRightWhile from &#39;./takeRightWhile&#39;;nimport takeWhile from
&#39;./takeWhile&#39;;nimport union from &#39;./union&#39;;nimport unionBy
from &#39;./unionBy&#39;;nimport unionWith from
&#39;./unionWith&#39;;nimport uniq from &#39;./uniq&#39;;nimport uniqBy
from &#39;./uniqBy&#39;;nimport uniqWith from &#39;./uniqWith&#39;;nimport
unzip from &#39;./unzip&#39;;nimport unzipWith from
&#39;./unzipWith&#39;;nimport without from &#39;./without&#39;;nimport xor
from &#39;./xor&#39;;nimport xorBy from &#39;./xorBy&#39;;nimport xorWith
from &#39;./xorWith&#39;;nimport zip from &#39;./zip&#39;;nimport zipObject
from &#39;./zipObject&#39;;nimport zipObjectDeep from
&#39;./zipObjectDeep&#39;;nimport zipWith from &#39;./zipWith&#39;;nnexport
default {n  chunk, compact, concat, difference, differenceBy,n 
differenceWith, drop, dropRight, dropRightWhile, dropWhile,n  fill,
findIndex, findLastIndex, first, flatten,n  flattenDeep, flattenDepth,
fromPairs, head, indexOf,n  initial, intersection, intersectionBy,
intersectionWith, join,n  last, lastIndexOf, nth, pull, pullAll,n 
pullAllBy, pullAllWith, pullAt, remove, reverse,n  slice, sortedIndex,
sortedIndexBy, sortedIndexOf, sortedLastIndex,n  sortedLastIndexBy,
sortedLastIndexOf, sortedUniq, sortedUniqBy, tail,n  take, takeRight,
takeRightWhile, takeWhile, union,n  unionBy, unionWith, uniq, uniqBy,
uniqWith,n  unzip, unzipWith, without, xor, xorBy,n  xorWith, zip,
zipObject, zipObjectDeep, zipWithn};nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/array.default.jsn// module id =
nulln// module chunks = “,”/**n * Creates an array with all falsey values
removed. The values `false`, `null`,n * `0`, `&quot;&quot;`, `undefined`,
and `NaN` are falsey.n *n * @staticn * @memberOf _n * @since 0.1.0n *
@category Arrayn * @param {Array} array The array to compact.n * @returns
{Array} Returns the new array of filtered values.n * @examplen *n *
_.compact([0, 1, false, 2, &#39;&#39;, 3]);n * // =&gt; [1, 2, 3]n
*/nfunction compact(array) {n  var index = -1,n      length = array ?
array.length : 0,n      resIndex = 0,n      result = [];nn  while (++index
&lt; length) {n    var value = <a href="index">array</a>;n    if (value) {n
<a href="resIndex++">result</a> = value;n    }n  }n  return
result;n}nnexport default compact;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/compact.jsn// module id =
nulln// module chunks = “,”import baseIteratee from
&#39;./_baseIteratee&#39;;nimport baseWhile from
&#39;./_baseWhile&#39;;nn/**n * Creates a slice of `array` excluding
elements dropped from the beginning.n * Elements are dropped until
`predicate` returns falsey. The predicate isn * invoked with three
arguments: (value, index, array).n *n * @staticn * @memberOf _n * @since
3.0.0n * @category Arrayn * @param {Array} array The array to query.n *
@param {Array|Function|Object|string} [predicate=_.identity]n *  The
function invoked per iteration.n * @returns {Array} Returns the slice of
`array`.n * @examplen *n * var users = [n *   { &#39;user&#39;:
&#39;barney&#39;,  &#39;active&#39;: false },n *   { &#39;user&#39;:
&#39;fred&#39;,    &#39;active&#39;: false },n *   { &#39;user&#39;:
&#39;pebbles&#39;, &#39;active&#39;: true }n * ];n *n * _.dropWhile(users,
function(o) { return !o.active; });n * // =&gt; objects for
[&#39;pebbles&#39;]n *n * // The `_.matches` iteratee shorthand.n *
_.dropWhile(users, { &#39;user&#39;: &#39;barney&#39;, &#39;active&#39;:
false });n * // =&gt; objects for [&#39;fred&#39;, &#39;pebbles&#39;]n *n *
// The `_.matchesProperty` iteratee shorthand.n * _.dropWhile(users,
[&#39;active&#39;, false]);n * // =&gt; objects for [&#39;pebbles&#39;]n *n
* // The `_.property` iteratee shorthand.n * _.dropWhile(users,
&#39;active&#39;);n * // =&gt; objects for [&#39;barney&#39;,
&#39;fred&#39;, &#39;pebbles&#39;]n */nfunction dropWhile(array, predicate)
{n  return (array &amp;&amp; array.length)n    ? baseWhile(array,
baseIteratee(predicate, 3), true)n    : [];n}nnexport default
dropWhile;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/dropWhile.jsn// module id = nulln//
module chunks = “,”import baseFindIndex from
&#39;./_baseFindIndex&#39;;nimport baseIteratee from
&#39;./_baseIteratee&#39;;nn/**n * This method is like `_.findIndex` except
that it iterates over elementsn * of `collection` from right to left.n *n *
@staticn * @memberOf _n * @since 2.0.0n * @category Arrayn * @param {Array}
array The array to search.n * @param {Array|Function|Object|string}
[predicate=_.identity]n *  The function invoked per iteration.n * @returns
{number} Returns the index of the found element, else `-1`.n * @examplen *n
* var users = [n *   { &#39;user&#39;: &#39;barney&#39;,  &#39;active&#39;:
true },n *   { &#39;user&#39;: &#39;fred&#39;,    &#39;active&#39;: false
},n *   { &#39;user&#39;: &#39;pebbles&#39;, &#39;active&#39;: false }n *
];n *n * _.findLastIndex(users, function(o) { return o.user ==
&#39;pebbles&#39;; });n * // =&gt; 2n *n * // The `_.matches` iteratee
shorthand.n * _.findLastIndex(users, { &#39;user&#39;: &#39;barney&#39;,
&#39;active&#39;: true });n * // =&gt; 0n *n * // The `_.matchesProperty`
iteratee shorthand.n * _.findLastIndex(users, [&#39;active&#39;, false]);n
* // =&gt; 2n *n * // The `_.property` iteratee shorthand.n *
_.findLastIndex(users, &#39;active&#39;);n * // =&gt; 0n */nfunction
findLastIndex(array, predicate) {n  return (array &amp;&amp; array.length)n
? baseFindIndex(array, baseIteratee(predicate, 3), true)n    :
-1;n}nnexport default findLastIndex;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/findLastIndex.jsn// module id =
nulln// module chunks = “,”import baseFlatten from
&#39;./_baseFlatten&#39;;nn/** Used as references for various `Number`
constants. */nvar INFINITY = 1 / 0;nn/**n * Recursively flattens `array`.n
*n * @staticn * @memberOf _n * @since 3.0.0n * @category Arrayn * @param
{Array} array The array to flatten.n * @returns {Array} Returns the new
flattened array.n * @examplen *n * _.flattenDeep([1, [2, [3, [4]], 5]]);n *
// =&gt; [1, 2, 3, 4, 5]n */nfunction flattenDeep(array) {n  var length =
array ? array.length : 0;n  return length ? baseFlatten(array, INFINITY) :
[];n}nnexport default flattenDeep;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/flattenDeep.jsn// module id =
nulln// module chunks = “,”import baseFlatten from
&#39;./_baseFlatten&#39;;nimport toInteger from
&#39;./toInteger&#39;;nn/**n * Recursively flatten `array` up to `depth`
times.n *n * @staticn * @memberOf _n * @since 4.4.0n * @category Arrayn *
@param {Array} array The array to flatten.n * @param {number} [depth=1] The
maximum recursion depth.n * @returns {Array} Returns the new flattened
array.n * @examplen *n * var array = [1, [2, [3, [4]], 5]];n *n *
_.flattenDepth(array, 1);n * // =&gt; [1, 2, [3, [4]], 5]n *n *
_.flattenDepth(array, 2);n * // =&gt; [1, 2, 3, [4], 5]n */nfunction
flattenDepth(array, depth) {n  var length = array ? array.length : 0;n  if
(!length) {n    return [];n  }n  depth = depth === undefined ? 1 :
toInteger(depth);n  return baseFlatten(array, depth);n}nnexport default
flattenDepth;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/flattenDepth.jsn// module id = nulln//
module chunks = “,”/**n * The inverse of `_.toPairs`; this method returns
an object composedn * from key-value `pairs`.n *n * @staticn * @memberOf _n
* @since 4.0.0n * @category Arrayn * @param {Array} pairs The key-value
pairs.n * @returns {Object} Returns the new object.n * @examplen *n *
_.fromPairs([[&#39;fred&#39;, 30], [&#39;barney&#39;, 40]]);n * // =&gt; {
&#39;fred&#39;: 30, &#39;barney&#39;: 40 }n */nfunction fromPairs(pairs) {n
var index = -1,n      length = pairs ? pairs.length : 0,n      result =
{};nn  while (++index &lt; length) {n    var pair = <a
href="index">pairs</a>;n    <a href="0">result[pair</a>] = <a
href="1">pair</a>;n  }n  return result;n}nnexport default
fromPairs;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/fromPairs.jsn// module id = nulln//
module chunks = “,”import baseIndexOf from &#39;./_baseIndexOf&#39;;nimport
toInteger from &#39;./toInteger&#39;;nn/* Built-in method references for
those with the same name as other `lodash` methods. */nvar nativeMax =
Math.max;nn/**n * Gets the index at which the first occurrence of `value`
is found in `array`n * using [`SameValueZero`](<a
href="http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n">ecma-international.org/ecma-262/6.0/#sec-samevaluezero)n</a>
* for equality comparisons. If `fromIndex` is negative, it&#39;s used as
then * offset from the end of `array`.n *n * @staticn * @memberOf _n *
@since 0.1.0n * @category Arrayn * @param {Array} array The array to
search.n * @param {*} value The value to search for.n * @param {number}
[fromIndex=0] The index to search from.n * @returns {number} Returns the
index of the matched value, else `-1`.n * @examplen *n * _.indexOf([1, 2,
1, 2], 2);n * // =&gt; 1n *n * // Search from the `fromIndex`.n *
_.indexOf([1, 2, 1, 2], 2, 2);n * // =&gt; 3n */nfunction indexOf(array,
value, fromIndex) {n  var length = array ? array.length : 0;n  if (!length)
{n    return -1;n  }n  fromIndex = toInteger(fromIndex);n  if (fromIndex
&lt; 0) {n    fromIndex = nativeMax(length + fromIndex, 0);n  }n  return
baseIndexOf(array, value, fromIndex);n}nnexport default
indexOf;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/indexOf.jsn// module id = nulln// module
chunks = “,”import dropRight from &#39;./dropRight&#39;;nn/**n * Gets all
but the last element of `array`.n *n * @staticn * @memberOf _n * @since
0.1.0n * @category Arrayn * @param {Array} array The array to query.n *
@returns {Array} Returns the slice of `array`.n * @examplen *n *
_.initial([1, 2, 3]);n * // =&gt; [1, 2]n */nfunction initial(array) {n 
return dropRight(array, 1);n}nnexport default
initial;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/initial.jsn// module id = nulln// module
chunks = “,”import indexOfNaN from &#39;./_indexOfNaN&#39;;nimport
toInteger from &#39;./toInteger&#39;;nn/* Built-in method references for
those with the same name as other `lodash` methods. */nvar nativeMax =
Math.max,n    nativeMin = Math.min;nn/**n * This method is like `_.indexOf`
except that it iterates over elements ofn * `array` from right to left.n *n
* @staticn * @memberOf _n * @since 0.1.0n * @category Arrayn * @param
{Array} array The array to search.n * @param {*} value The value to search
for.n * @param {number} [fromIndex=array.length-1] The index to search
from.n * @returns {number} Returns the index of the matched value, else
`-1`.n * @examplen *n * _.lastIndexOf([1, 2, 1, 2], 2);n * // =&gt; 3n *n *
// Search from the `fromIndex`.n * _.lastIndexOf([1, 2, 1, 2], 2, 2);n * //
=&gt; 1n */nfunction lastIndexOf(array, value, fromIndex) {n  var length =
array ? array.length : 0;n  if (!length) {n    return -1;n  }n  var index =
length;n  if (fromIndex !== undefined) {n    index = toInteger(fromIndex);n
index = (n      index &lt; 0n        ? nativeMax(length + index, 0)n       
: nativeMin(index, length - 1)n    ) + 1;n  }n  if (value !== value) {n   
return indexOfNaN(array, index, true);n  }n  while (index–) {n    if (<a
href="index">array</a> === value) {n      return index;n    }n  }n  return
-1;n}nnexport default lastIndexOf;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/lastIndexOf.jsn// module id =
nulln// module chunks = “,”import basePullAll from
&#39;./_basePullAll&#39;;nn/**n * This method is like `_.pullAll` except
that it accepts `comparator` whichn * is invoked to compare elements of
`array` to `values`. The comparator isn * invoked with two arguments:
(arrVal, othVal).n *n * *<strong>Note:</strong>* Unlike `_.differenceWith`,
this method mutates `array`.n *n * @staticn * @memberOf _n * @since 4.6.0n
* @category Arrayn * @param {Array} array The array to modify.n * @param
{Array} values The values to remove.n * @param {Function} [comparator] The
comparator invoked per element.n * @returns {Array} Returns `array`.n *
@examplen *n * var array = [{ &#39;x&#39;: 1, &#39;y&#39;: 2 }, {
&#39;x&#39;: 3, &#39;y&#39;: 4 }, { &#39;x&#39;: 5, &#39;y&#39;: 6 }];n *n
* _.pullAllWith(array, [{ &#39;x&#39;: 3, &#39;y&#39;: 4 }], _.isEqual);n *
console.log(array);n * // =&gt; [{ &#39;x&#39;: 1, &#39;y&#39;: 2 }, {
&#39;x&#39;: 5, &#39;y&#39;: 6 }]n */nfunction pullAllWith(array, values,
comparator) {n  return (array &amp;&amp; array.length &amp;&amp; values
&amp;&amp; values.length)n    ? basePullAll(array, values, undefined,
comparator)n    : array;n}nnexport default
pullAllWith;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/pullAllWith.jsn// module id = nulln//
module chunks = “,”import baseSlice from &#39;./_baseSlice&#39;;nimport
isIterateeCall from &#39;./_isIterateeCall&#39;;nimport toInteger from
&#39;./toInteger&#39;;nn/**n * Creates a slice of `array` from `start` up
to, but not including, `end`.n *n * *<strong>Note:</strong>* This method is
used instead ofn * [`Array#slice`](<a
href="https://mdn.io/Array/slice">mdn.io/Array/slice</a>) to ensure dense
arrays aren * returned.n *n * @staticn * @memberOf _n * @since 3.0.0n *
@category Arrayn * @param {Array} array The array to slice.n * @param
{number} [start=0] The start position.n * @param {number}
[end=array.length] The end position.n * @returns {Array} Returns the slice
of `array`.n */nfunction slice(array, start, end) {n  var length = array ?
array.length : 0;n  if (!length) {n    return [];n  }n  if (end &amp;&amp;
typeof end != &#39;number&#39; &amp;&amp; isIterateeCall(array, start,
end)) {n    start = 0;n    end = length;n  }n  else {n    start = start ==
null ? 0 : toInteger(start);n    end = end === undefined ? length :
toInteger(end);n  }n  return baseSlice(array, start, end);n}nnexport
default slice;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/slice.jsn// module id = nulln// module
chunks = “,”import baseIteratee from &#39;./_baseIteratee&#39;;nimport
baseSortedIndexBy from &#39;./_baseSortedIndexBy&#39;;nn/**n * This method
is like `_.sortedIndex` except that it accepts `iteratee`n * which is
invoked for `value` and each element of `array` to compute theirn * sort
ranking. The iteratee is invoked with one argument: (value).n *n * @staticn
* @memberOf _n * @since 4.0.0n * @category Arrayn * @param {Array} array
The sorted array to inspect.n * @param {*} value The value to evaluate.n *
@param {Array|Function|Object|string} [iteratee=_.identity]n *  The
iteratee invoked per element.n * @returns {number} Returns the index at
which `value` should be insertedn *  into `array`.n * @examplen *n * var
dict = { &#39;thirty&#39;: 30, &#39;forty&#39;: 40, &#39;fifty&#39;: 50 };n
*n * _.sortedIndexBy([&#39;thirty&#39;, &#39;fifty&#39;], &#39;forty&#39;,
_.propertyOf(dict));n * // =&gt; 1n *n * // The `_.property` iteratee
shorthand.n * _.sortedIndexBy([{ &#39;x&#39;: 4 }, { &#39;x&#39;: 5 }], {
&#39;x&#39;: 4 }, &#39;x&#39;);n * // =&gt; 0n */nfunction
sortedIndexBy(array, value, iteratee) {n  return baseSortedIndexBy(array,
value, baseIteratee(iteratee));n}nnexport default
sortedIndexBy;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/sortedIndexBy.jsn// module id = nulln//
module chunks = “,”import baseSortedIndex from
&#39;./_baseSortedIndex&#39;;nimport eq from &#39;./eq&#39;;nn/**n * This
method is like `_.indexOf` except that it performs a binaryn * search on a
sorted `array`.n *n * @staticn * @memberOf _n * @since 4.0.0n * @category
Arrayn * @param {Array} array The array to search.n * @param {*} value The
value to search for.n * @returns {number} Returns the index of the matched
value, else `-1`.n * @examplen *n * _.sortedIndexOf([1, 1, 2, 2], 2);n * //
=&gt; 2n */nfunction sortedIndexOf(array, value) {n  var length = array ?
array.length : 0;n  if (length) {n    var index = baseSortedIndex(array,
value);n    if (index &lt; length &amp;&amp; <a href="index">eq(array</a>,
value)) {n      return index;n    }n  }n  return -1;n}nnexport default
sortedIndexOf;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/sortedIndexOf.jsn// module id = nulln//
module chunks = “,”import baseSortedIndex from
&#39;./_baseSortedIndex&#39;;nn/**n * This method is like `_.sortedIndex`
except that it returns the highestn * index at which `value` should be
inserted into `array` in order ton * maintain its sort order.n *n *
@staticn * @memberOf _n * @since 3.0.0n * @category Arrayn * @param {Array}
array The sorted array to inspect.n * @param {*} value The value to
evaluate.n * @returns {number} Returns the index at which `value` should be
insertedn *  into `array`.n * @examplen *n * _.sortedLastIndex([4, 5], 4);n
* // =&gt; 1n */nfunction sortedLastIndex(array, value) {n  return
baseSortedIndex(array, value, true);n}nnexport default
sortedLastIndex;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/sortedLastIndex.jsn// module id = nulln//
module chunks = “,”import baseIteratee from
&#39;./_baseIteratee&#39;;nimport baseSortedIndexBy from
&#39;./_baseSortedIndexBy&#39;;nn/**n * This method is like
`_.sortedLastIndex` except that it accepts `iteratee`n * which is invoked
for `value` and each element of `array` to compute theirn * sort ranking.
The iteratee is invoked with one argument: (value).n *n * @staticn *
@memberOf _n * @since 4.0.0n * @category Arrayn * @param {Array} array The
sorted array to inspect.n * @param {*} value The value to evaluate.n *
@param {Array|Function|Object|string} [iteratee=_.identity]n *  The
iteratee invoked per element.n * @returns {number} Returns the index at
which `value` should be insertedn *  into `array`.n * @examplen *n * // The
`_.property` iteratee shorthand.n * _.sortedLastIndexBy([{ &#39;x&#39;: 4
}, { &#39;x&#39;: 5 }], { &#39;x&#39;: 4 }, &#39;x&#39;);n * // =&gt; 1n
*/nfunction sortedLastIndexBy(array, value, iteratee) {n  return
baseSortedIndexBy(array, value, baseIteratee(iteratee), true);n}nnexport
default sortedLastIndexBy;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/sortedLastIndexBy.jsn// module id =
nulln// module chunks = “,”import baseSortedIndex from
&#39;./_baseSortedIndex&#39;;nimport eq from &#39;./eq&#39;;nn/**n * This
method is like `_.lastIndexOf` except that it performs a binaryn * search
on a sorted `array`.n *n * @staticn * @memberOf _n * @since 4.0.0n *
@category Arrayn * @param {Array} array The array to search.n * @param {*}
value The value to search for.n * @returns {number} Returns the index of
the matched value, else `-1`.n * @examplen *n * _.sortedLastIndexOf([1, 1,
2, 2], 2);n * // =&gt; 3n */nfunction sortedLastIndexOf(array, value) {n 
var length = array ? array.length : 0;n  if (length) {n    var index =
baseSortedIndex(array, value, true) - 1;n    if (<a
href="index">eq(array</a>, value)) {n      return index;n    }n  }n  return
-1;n}nnexport default sortedLastIndexOf;nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/lib/lodash/sortedLastIndexOf.jsn// module
id = nulln// module chunks = “,”import baseIteratee from
&#39;./_baseIteratee&#39;;nimport baseSortedUniq from
&#39;./_baseSortedUniq&#39;;nn/**n * This method is like `_.uniqBy` except
that it&#39;s designed and optimizedn * for sorted arrays.n *n * @staticn *
@memberOf _n * @since 4.0.0n * @category Arrayn * @param {Array} array The
array to inspect.n * @param {Function} [iteratee] The iteratee invoked per
element.n * @returns {Array} Returns the new duplicate free array.n *
@examplen *n * _.sortedUniqBy([1.1, 1.2, 2.3, 2.4], Math.floor);n * //
=&gt; [1.1, 2.3]n */nfunction sortedUniqBy(array, iteratee) {n  return
(array &amp;&amp; array.length)n    ? baseSortedUniq(array,
baseIteratee(iteratee))n    : [];n}nnexport default
sortedUniqBy;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/sortedUniqBy.jsn// module id = nulln//
module chunks = “,”import drop from &#39;./drop&#39;;nn/**n * Gets all but
the first element of `array`.n *n * @staticn * @memberOf _n * @since 4.0.0n
* @category Arrayn * @param {Array} array The array to query.n * @returns
{Array} Returns the slice of `array`.n * @examplen *n * _.tail([1, 2, 3]);n
* // =&gt; [2, 3]n */nfunction tail(array) {n  return drop(array,
1);n}nnexport default tail;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/tail.jsn// module id = nulln// module
chunks = “,”import baseSlice from &#39;./_baseSlice&#39;;nimport toInteger
from &#39;./toInteger&#39;;nn/**n * Creates a slice of `array` with `n`
elements taken from the beginning.n *n * @staticn * @memberOf _n * @since
0.1.0n * @category Arrayn * @param {Array} array The array to query.n *
@param {number} [n=1] The number of elements to take.n * @param- {Object}
[guard] Enables use as an iteratee for methods like `_.map`.n * @returns
{Array} Returns the slice of `array`.n * @examplen *n * _.take([1, 2, 3]);n
* // =&gt; [1]n *n * _.take([1, 2, 3], 2);n * // =&gt; [1, 2]n *n *
_.take([1, 2, 3], 5);n * // =&gt; [1, 2, 3]n *n * _.take([1, 2, 3], 0);n *
// =&gt; []n */nfunction take(array, n, guard) {n  if (!(array &amp;&amp;
array.length)) {n    return [];n  }n  n = (guard || n === undefined) ? 1 :
toInteger(n);n  return baseSlice(array, 0, n &lt; 0 ? 0 : n);n}nnexport
default take;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/take.jsn// module id = nulln// module
chunks = “,”import baseSlice from &#39;./_baseSlice&#39;;nimport toInteger
from &#39;./toInteger&#39;;nn/**n * Creates a slice of `array` with `n`
elements taken from the end.n *n * @staticn * @memberOf _n * @since 3.0.0n
* @category Arrayn * @param {Array} array The array to query.n * @param
{number} [n=1] The number of elements to take.n * @param- {Object} [guard]
Enables use as an iteratee for methods like `_.map`.n * @returns {Array}
Returns the slice of `array`.n * @examplen *n * _.takeRight([1, 2, 3]);n *
// =&gt; [3]n *n * _.takeRight([1, 2, 3], 2);n * // =&gt; [2, 3]n *n *
_.takeRight([1, 2, 3], 5);n * // =&gt; [1, 2, 3]n *n * _.takeRight([1, 2,
3], 0);n * // =&gt; []n */nfunction takeRight(array, n, guard) {n  var
length = array ? array.length : 0;n  if (!length) {n    return [];n  }n  n
= (guard || n === undefined) ? 1 : toInteger(n);n  n = length - n;n  return
baseSlice(array, n &lt; 0 ? 0 : n, length);n}nnexport default
takeRight;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/takeRight.jsn// module id = nulln//
module chunks = “,”import baseIteratee from
&#39;./_baseIteratee&#39;;nimport baseWhile from
&#39;./_baseWhile&#39;;nn/**n * Creates a slice of `array` with elements
taken from the end. Elements aren * taken until `predicate` returns falsey.
The predicate is invoked withn * three arguments: (value, index, array).n
*n * @staticn * @memberOf _n * @since 3.0.0n * @category Arrayn * @param
{Array} array The array to query.n * @param {Array|Function|Object|string}
[predicate=_.identity]n *  The function invoked per iteration.n * @returns
{Array} Returns the slice of `array`.n * @examplen *n * var users = [n *  
{ &#39;user&#39;: &#39;barney&#39;,  &#39;active&#39;: true },n *   {
&#39;user&#39;: &#39;fred&#39;,    &#39;active&#39;: false },n *   {
&#39;user&#39;: &#39;pebbles&#39;, &#39;active&#39;: false }n * ];n *n *
_.takeRightWhile(users, function(o) { return !o.active; });n * // =&gt;
objects for [&#39;fred&#39;, &#39;pebbles&#39;]n *n * // The `_.matches`
iteratee shorthand.n * _.takeRightWhile(users, { &#39;user&#39;:
&#39;pebbles&#39;, &#39;active&#39;: false });n * // =&gt; objects for
[&#39;pebbles&#39;]n *n * // The `_.matchesProperty` iteratee shorthand.n *
_.takeRightWhile(users, [&#39;active&#39;, false]);n * // =&gt; objects for
[&#39;fred&#39;, &#39;pebbles&#39;]n *n * // The `_.property` iteratee
shorthand.n * _.takeRightWhile(users, &#39;active&#39;);n * // =&gt; []n
*/nfunction takeRightWhile(array, predicate) {n  return (array &amp;&amp;
array.length)n    ? baseWhile(array, baseIteratee(predicate, 3), false,
true)n    : [];n}nnexport default takeRightWhile;nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-utils/src/lib/lodash/takeRightWhile.jsn//
module id = nulln// module chunks = “,”import baseIteratee from
&#39;./_baseIteratee&#39;;nimport baseWhile from
&#39;./_baseWhile&#39;;nn/**n * Creates a slice of `array` with elements
taken from the beginning. Elementsn * are taken until `predicate` returns
falsey. The predicate is invoked withn * three arguments: (value, index,
array).n *n * @staticn * @memberOf _n * @since 3.0.0n * @category Arrayn *
@param {Array} array The array to query.n * @param
{Array|Function|Object|string} [predicate=_.identity]n *  The function
invoked per iteration.n * @returns {Array} Returns the slice of `array`.n *
@examplen *n * var users = [n *   { &#39;user&#39;: &#39;barney&#39;, 
&#39;active&#39;: false },n *   { &#39;user&#39;: &#39;fred&#39;,   
&#39;active&#39;: false},n *   { &#39;user&#39;: &#39;pebbles&#39;,
&#39;active&#39;: true }n * ];n *n * _.takeWhile(users, function(o) {
return !o.active; });n * // =&gt; objects for [&#39;barney&#39;,
&#39;fred&#39;]n *n * // The `_.matches` iteratee shorthand.n *
_.takeWhile(users, { &#39;user&#39;: &#39;barney&#39;, &#39;active&#39;:
false });n * // =&gt; objects for [&#39;barney&#39;]n *n * // The
`_.matchesProperty` iteratee shorthand.n * _.takeWhile(users,
[&#39;active&#39;, false]);n * // =&gt; objects for [&#39;barney&#39;,
&#39;fred&#39;]n *n * // The `_.property` iteratee shorthand.n *
_.takeWhile(users, &#39;active&#39;);n * // =&gt; []n */nfunction
takeWhile(array, predicate) {n  return (array &amp;&amp; array.length)n   
? baseWhile(array, baseIteratee(predicate, 3))n    : [];n}nnexport default
takeWhile;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/takeWhile.jsn// module id = nulln//
module chunks = “,”import baseIteratee from
&#39;./_baseIteratee&#39;;nimport baseUniq from
&#39;./_baseUniq&#39;;nn/**n * This method is like `_.uniq` except that it
accepts `iteratee` which isn * invoked for each element in `array` to
generate the criterion by whichn * uniqueness is computed. The iteratee is
invoked with one argument: (value).n *n * @staticn * @memberOf _n * @since
4.0.0n * @category Arrayn * @param {Array} array The array to inspect.n *
@param {Array|Function|Object|string} [iteratee=_.identity]n *  The
iteratee invoked per element.n * @returns {Array} Returns the new duplicate
free array.n * @examplen *n * _.uniqBy([2.1, 1.2, 2.3], Math.floor);n * //
=&gt; [2.1, 1.2]n *n * // The `_.property` iteratee shorthand.n *
_.uniqBy([{ &#39;x&#39;: 1 }, { &#39;x&#39;: 2 }, { &#39;x&#39;: 1 }],
&#39;x&#39;);n * // =&gt; [{ &#39;x&#39;: 1 }, { &#39;x&#39;: 2 }]n
*/nfunction uniqBy(array, iteratee) {n  return (array &amp;&amp;
array.length)n    ? baseUniq(array, baseIteratee(iteratee))n    :
[];n}nnexport default uniqBy;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/uniqBy.jsn// module id = nulln// module
chunks = “,”import baseUniq from &#39;./_baseUniq&#39;;nn/**n * This method
is like `_.uniq` except that it accepts `comparator` whichn * is invoked to
compare elements of `array`. The comparator is invoked withn * two
arguments: (arrVal, othVal).n *n * @staticn * @memberOf _n * @since 4.0.0n
* @category Arrayn * @param {Array} array The array to inspect.n * @param
{Function} [comparator] The comparator invoked per element.n * @returns
{Array} Returns the new duplicate free array.n * @examplen *n * var objects
= [{ &#39;x&#39;: 1, &#39;y&#39;: 2 }, { &#39;x&#39;: 2, &#39;y&#39;: 1 }, 
{ &#39;x&#39;: 1, &#39;y&#39;: 2 }];n *n * _.uniqWith(objects, _.isEqual);n
* // =&gt; [{ &#39;x&#39;: 1, &#39;y&#39;: 2 }, { &#39;x&#39;: 2,
&#39;y&#39;: 1 }]n */nfunction uniqWith(array, comparator) {n  return
(array &amp;&amp; array.length)n    ? baseUniq(array, undefined,
comparator)n    : [];n}nnexport default uniqWith;nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-utils/src/lib/lodash/uniqWith.jsn// module
id = nulln// module chunks = “,”export { default as chunk } from
&#39;./chunk&#39;;nexport { default as compact } from
&#39;./compact&#39;;nexport { default as concat } from
&#39;./concat&#39;;nexport { default as difference } from
&#39;./difference&#39;;nexport { default as differenceBy } from
&#39;./differenceBy&#39;;nexport { default as differenceWith } from
&#39;./differenceWith&#39;;nexport { default as drop } from
&#39;./drop&#39;;nexport { default as dropRight } from
&#39;./dropRight&#39;;nexport { default as dropRightWhile } from
&#39;./dropRightWhile&#39;;nexport { default as dropWhile } from
&#39;./dropWhile&#39;;nexport { default as fill } from
&#39;./fill&#39;;nexport { default as findIndex } from
&#39;./findIndex&#39;;nexport { default as findLastIndex } from
&#39;./findLastIndex&#39;;nexport { default as first } from
&#39;./first&#39;;nexport { default as flatten } from
&#39;./flatten&#39;;nexport { default as flattenDeep } from
&#39;./flattenDeep&#39;;nexport { default as flattenDepth } from
&#39;./flattenDepth&#39;;nexport { default as fromPairs } from
&#39;./fromPairs&#39;;nexport { default as head } from
&#39;./head&#39;;nexport { default as indexOf } from
&#39;./indexOf&#39;;nexport { default as initial } from
&#39;./initial&#39;;nexport { default as intersection } from
&#39;./intersection&#39;;nexport { default as intersectionBy } from
&#39;./intersectionBy&#39;;nexport { default as intersectionWith } from
&#39;./intersectionWith&#39;;nexport { default as join } from
&#39;./join&#39;;nexport { default as last } from &#39;./last&#39;;nexport
{ default as lastIndexOf } from &#39;./lastIndexOf&#39;;nexport { default
as nth } from &#39;./nth&#39;;nexport { default as pull } from
&#39;./pull&#39;;nexport { default as pullAll } from
&#39;./pullAll&#39;;nexport { default as pullAllBy } from
&#39;./pullAllBy&#39;;nexport { default as pullAllWith } from
&#39;./pullAllWith&#39;;nexport { default as pullAt } from
&#39;./pullAt&#39;;nexport { default as remove } from
&#39;./remove&#39;;nexport { default as reverse } from
&#39;./reverse&#39;;nexport { default as slice } from
&#39;./slice&#39;;nexport { default as sortedIndex } from
&#39;./sortedIndex&#39;;nexport { default as sortedIndexBy } from
&#39;./sortedIndexBy&#39;;nexport { default as sortedIndexOf } from
&#39;./sortedIndexOf&#39;;nexport { default as sortedLastIndex } from
&#39;./sortedLastIndex&#39;;nexport { default as sortedLastIndexBy } from
&#39;./sortedLastIndexBy&#39;;nexport { default as sortedLastIndexOf } from
&#39;./sortedLastIndexOf&#39;;nexport { default as sortedUniq } from
&#39;./sortedUniq&#39;;nexport { default as sortedUniqBy } from
&#39;./sortedUniqBy&#39;;nexport { default as tail } from
&#39;./tail&#39;;nexport { default as take } from &#39;./take&#39;;nexport
{ default as takeRight } from &#39;./takeRight&#39;;nexport { default as
takeRightWhile } from &#39;./takeRightWhile&#39;;nexport { default as
takeWhile } from &#39;./takeWhile&#39;;nexport { default as union } from
&#39;./union&#39;;nexport { default as unionBy } from
&#39;./unionBy&#39;;nexport { default as unionWith } from
&#39;./unionWith&#39;;nexport { default as uniq } from
&#39;./uniq&#39;;nexport { default as uniqBy } from
&#39;./uniqBy&#39;;nexport { default as uniqWith } from
&#39;./uniqWith&#39;;nexport { default as unzip } from
&#39;./unzip&#39;;nexport { default as unzipWith } from
&#39;./unzipWith&#39;;nexport { default as without } from
&#39;./without&#39;;nexport { default as xor } from &#39;./xor&#39;;nexport
{ default as xorBy } from &#39;./xorBy&#39;;nexport { default as xorWith }
from &#39;./xorWith&#39;;nexport { default as zip } from
&#39;./zip&#39;;nexport { default as zipObject } from
&#39;./zipObject&#39;;nexport { default as zipObjectDeep } from
&#39;./zipObjectDeep&#39;;nexport { default as zipWith } from
&#39;./zipWith&#39;;nexport { default as default } from
&#39;./array.default&#39;;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/array.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module engine/model/delta/rootattributedeltan */nnimport Delta from
&#39;./delta&#39;;nimport DeltaFactory from &#39;./deltafactory&#39;;nn/**n
* To provide specific OT behavior and better collisions solving, methods to
change attributesn * ({@link
module:engine/model/writer~Writer#setAttribute} and {@link
module:engine/model/writer~Writer#removeAttribute})n * use
`RootAttributeDelta` class which inherits from the `Delta` class and mayn *
overwrite some methods.n *n * @extends
module:engine/model/delta/delta~Deltan */nexport default class
RootAttributeDelta extends Delta {nt/**nt * @inheritDocnt */ntstatic get
className() {nttreturn
&#39;engine.model.delta.RootAttributeDelta&#39;;nt}n}nnDeltaFactory.register(
RootAttributeDelta );nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/model/delta/rootattributedelta.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module engine/model/operation/detachoperationn
*/nnimport Operation from &#39;./operation&#39;;nimport Position from
&#39;../position&#39;;nimport Range from &#39;../range&#39;;nimport {
_remove } from &#39;./utils&#39;;nimport CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nn/**n * Operation to
permanently remove node from detached root.n * Note this operation is only
a local operation and won&#39;t be send to the other clients.n *n *
@extends module:engine/model/operation/operation~Operationn */nexport
default class DetachOperation extends Operation {nt/**nt * Creates an
insert operation.nt *nt * @param {module:engine/model/position~Position}
sourcePositionnt * Position before the first {@link
module:engine/model/item~Item model item} to move.nt * @param {Number}
howMany Offset size of moved range. Moved range will start from
`sourcePosition` and end atnt * `sourcePosition` with offset shifted by
`howMany`.nt */ntconstructor( sourcePosition, howMany ) {nttsuper( null
);nntt/**ntt * Position before the first {@link
module:engine/model/item~Item model item} to detach.ntt *ntt * @member
{module:engine/model/position~Position} sourcePositionntt
*/nttthis.sourcePosition = Position.createFromPosition( sourcePosition
);nntt/**ntt * Offset size of moved range.ntt *ntt * @member {Number}
howManyntt */nttthis.howMany = howMany;nt}nnt/**nt * @inheritDocnt */ntget
type() {nttreturn &#39;detach&#39;;nt}nnt/**nt * @inheritDocnt
*/nt_validate() {nttif ( this.sourcePosition.root.document ) {nttt/**nttt *
Cannot detach document node.nttt * Use {@link
module:engine/model/operation/removeoperation~RemoveOperation remove
operation} instead.nttt *nttt * @error
detach-operation-on-document-nodenttt */ntttthrow new CKEditorError(
&#39;detach-operation-on-document-node: Cannot detach document node.&#39;
);ntt}nt}nnt/**nt * @inheritDocnt */nt_execute() {ntt_remove(
Range.createFromPositionAndShift( this.sourcePosition, this.howMany )
);nt}nnt/**nt * @inheritDocnt */ntstatic get className() {nttreturn
&#39;engine.model.operation.DetachOperation&#39;;nt}n}nnnn//////////////////n//
WEBPACK FOOTERn//
../ckeditor5-engine/src/model/operation/detachoperation.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module engine/model/rootelementn */nnimport
Element from &#39;./element&#39;;nn/**n * Type of {@link
module:engine/model/element~Element} that is a root of a model tree.n *
@extends module:engine/model/element~Elementn */nexport default class
RootElement extends Element {nt/**nt * Creates root element.nt *nt * @param
{module:engine/model/document~Document} doc Document that is an owner of
this root.nt * @param {String} name Node name.nt * @param {String}
[rootName=&#39;main&#39;] Unique root name used to identify this rootnt *
element by {@link module:engine/model/document~Document}.nt
*/ntconstructor( doc, name, rootName = &#39;main&#39; ) {nttsuper( name
);nntt/**ntt * Document that is an owner of this root.ntt *ntt *
@privatentt * @member {module:engine/model/document~Document}ntt
*/nttthis._doc = doc;nntt/**ntt * Unique root name used to identify this
root element by {@link module:engine/model/document~Document}.ntt *ntt *
@readonlyntt * @member {String}ntt */nttthis.rootName =
rootName;nt}nnt/**nt * {@link module:engine/model/document~Document
Document} that owns this root element.nt *nt * In contrary, to {@link
module:engine/model/node~Node node}, root element always have a
`document`.nt *nt * @readonlynt * @type
{module:engine/model/document~Document|null}nt */ntget document()
{nttreturn this._doc;nt}nnt/**nt * @inheritDocnt */ntis( type, name )
{nttif ( !name ) {ntttreturn type == &#39;rootElement&#39; || super.is(
type );ntt} else {ntttreturn ( type == &#39;rootElement&#39; &amp;&amp;
name == this.name ) || super.is( type, name );ntt}nt}nnt/**nt * Converts
`RootElement` instance to `String` containing it&#39;s name.nt *nt *
@returns {String} `RootElement` instance converted to `String`.nt
*/nttoJSON() {nttreturn this.rootName;nt}n}nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-engine/src/model/rootelement.jsn// module id
= nulln// module chunks = “,”/**n * @license Copyright © 2003-2018,
CKSource - Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module utils/keystrokehandlern */nnimport
DomEmitterMixin from &#39;./dom/emittermixin&#39;;nimport { getCode,
parseKeystroke } from &#39;./keyboard&#39;;nn/**n * Keystroke handler
registers keystrokes so the callbacks associatedn * with these keystrokes
will be executed if the matching `keydown` is firedn * by a defined
emitter.n *n *ttconst handler = new KeystrokeHandler();n *n
*tthandler.listenTo( emitter );n *n *tthandler.set( &#39;Ctrl+A&#39;, (
keyEvtData, cancel ) =&gt; {n *tttconsole.log( &#39;Ctrl+A has been
pressed&#39; );n *tttcancel();n *tt} );n */nexport default class
KeystrokeHandler {nt/**nt * Creates an instance of the keystroke handler.nt
*/ntconstructor() {ntt/**ntt * Listener used to listen to events for easier
keystroke handler destruction.ntt *ntt * @protectedntt * @member
{module:utils/dom/emittermixin~Emitter}ntt */nttthis._listener =
Object.create( DomEmitterMixin );nt}nnt/**nt * Starts listening for
`keydown` events from a given emitter.nt *nt * @param
{module:utils/emittermixin~Emitter} emitternt */ntlistenTo( emitter )
{ntt// The #_listener works here as a kind of dispatcher. It groups the
events coming from the samentt// keystroke so the listeners can be attached
to them with different priorities.ntt//ntt// E.g. all the keystrokes with
the `keyCode` of 42 coming from the `emitter` are propagatedntt// as a
`_keydown:42` event by the `_listener`. If there&#39;s a callback created
by the `set`ntt// method for this 42 keystroke, it listens to the
`_listener#_keydown:42` event only and interactsntt// only with other
listeners of this particular event, thus making it possible to
prioritizentt// the listeners and safely cancel execution, when needed.
Instead of duplicating the Emitter logic,ntt// the KeystrokeHandler re–uses
it to do its job.nttthis._listener.listenTo( emitter, &#39;keydown&#39;, (
evt, keyEvtData ) =&gt; {ntttthis._listener.fire( &#39;_keydown:&#39; +
getCode( keyEvtData ), keyEvtData );ntt} );nt}nnt/**nt * Registers a
handler for the specified keystroke.nt *nt * @param
{String|Array.&lt;String|Number&gt;} keystroke Keystroke defined in a
format accepted bynt * the {@link module:utils/keyboard~parseKeystroke}
function.nt * @param {Function} callback A function called with thent *
{@link module:engine/view/observer/keyobserver~KeyEventData key event data}
object andnt * a helper to both `preventDefault` and `stopPropagation` of
the event.nt * @param {Object} [options={}] Additional options.nt * @param
{module:utils/priorities~PriorityString|Number}
[options.priority=&#39;normal&#39;] The priority of the keystrokent *
callback. The higher the priority value the sooner the callback will be
executed. Keystrokes having the same prioritynt * are called in the order
they were added.nt */ntset( keystroke, callback, options = {} ) {nttconst
keyCode = parseKeystroke( keystroke );nttconst priority =
options.priority;nntt// Execute the passed callback on
KeystrokeHandler#_keydown.ntt// TODO: <a
href="https://github.com/ckeditor/ckeditor5-utils/issues/144\n\t\tthis._listener.listenTo">github.com/ckeditor/ckeditor5-utils/issues/144nttthis._listener.listenTo</a>(
this._listener, &#39;_keydown:&#39; + keyCode, ( evt, keyEvtData ) =&gt;
{ntttcallback( keyEvtData, () =&gt; {ntttt// Stop the event in the DOM: no
listener in the web pagentttt// will be triggered by this
event.nttttkeyEvtData.preventDefault();nttttkeyEvtData.stopPropagation();nntttt//
Stop the event in the KeystrokeHandler: no more callbacksntttt// will be
executed for this keystroke.nttttevt.stop();nttt} );nnttt// Mark this
keystroke as handled by the callback. See: press.ntttevt.return =
true;ntt}, { priority } );nt}nnt/**nt * Triggers a keystroke handler for a
specified key combination, if such a keystroke was {@link set defined}.nt
*nt * @param {module:engine/view/observer/keyobserver~KeyEventData}
keyEvtData Key event data.nt * @returns {Boolean} Whether the keystroke was
handled.nt */ntpress( keyEvtData ) {nttreturn !!this._listener.fire(
&#39;_keydown:&#39; + getCode( keyEvtData ), keyEvtData );nt}nnt/**nt *
Destroys the keystroke handler.nt */ntdestroy()
{nttthis._listener.stopListening();nt}n}nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-utils/src/keystrokehandler.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module core/editingkeystrokehandlern */nnimport
KeystrokeHandler from
&#39;@ckeditor/ckeditor5-utils/src/keystrokehandler&#39;;nn/**n * A
keystroke handler for editor editing. Its instance is availablen * in
{@link module:core/editor/editor~Editor#keystrokes} so pluginsn * can
register their keystrokes.n *n * E.g. an undo plugin would do this:n *n
*tteditor.keystrokes.set( &#39;Ctrl+Z&#39;, &#39;undo&#39; );n
*tteditor.keystrokes.set( &#39;Ctrl+Shift+Z&#39;, &#39;redo&#39; );n
*tteditor.keystrokes.set( &#39;Ctrl+Y&#39;, &#39;redo&#39; );n *n *
@extends utils/keystrokehandler~KeystrokeHandlern */nexport default class
EditingKeystrokeHandler extends KeystrokeHandler {nt/**nt * Creates an
instance of the keystroke handler.nt *nt * @param
{module:core/editor/editor~Editor} editornt */ntconstructor( editor )
{nttsuper();nntt/**ntt * The editor instance.ntt *ntt * @readonlyntt *
@member {module:core/editor/editor~Editor}ntt */nttthis.editor =
editor;nt}nnt/**nt * Registers a handler for the specified keystroke.nt *nt
* The handler can be specified as a command name or a callback.nt *nt *
@param {String|Array.&lt;String|Number&gt;} keystroke Keystroke defined in
a format accepted bynt * the {@link module:utils/keyboard~parseKeystroke}
function.nt * @param {Function|String} callback If a string is passed, then
the keystroke willnt * {@link module:core/editor/editor~Editor#execute
execute a command}.nt * If a function, then it will be called with thent *
{@link module:engine/view/observer/keyobserver~KeyEventData key event data}
object andnt * a `cancel()` helper to both `preventDefault()` and
`stopPropagation()` of the event.nt * @param {Object} [options={}]
Additional options.nt * @param
{module:utils/priorities~PriorityString|Number}
[options.priority=&#39;normal&#39;] The priority of the keystrokent *
callback. The higher the priority value the sooner the callback will be
executed. Keystrokes having the same prioritynt * are called in the order
they were added.nt */ntset( keystroke, callback, options = {} ) {nttif (
typeof callback == &#39;string&#39; ) {ntttconst commandName =
callback;nntttcallback = ( evtData, cancel ) =&gt;
{nttttthis.editor.execute( commandName
);nttttcancel();nttt};ntt}nnttsuper.set( keystroke, callback, options
);nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-core/src/editingkeystrokehandler.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module core/editor/editorn */nnimport Config from
&#39;@ckeditor/ckeditor5-utils/src/config&#39;;nimport EditingController
from
&#39;@ckeditor/ckeditor5-engine/src/controller/editingcontroller&#39;;nimport
PluginCollection from &#39;../plugincollection&#39;;nimport
CommandCollection from &#39;../commandcollection&#39;;nimport Locale from
&#39;@ckeditor/ckeditor5-utils/src/locale&#39;;nimport DataController from
&#39;@ckeditor/ckeditor5-engine/src/controller/datacontroller&#39;;nimport
Conversion from
&#39;@ckeditor/ckeditor5-engine/src/conversion/conversion&#39;;nimport
Model from &#39;@ckeditor/ckeditor5-engine/src/model/model&#39;;nimport
EditingKeystrokeHandler from &#39;../editingkeystrokehandler&#39;;nnimport
ObservableMixin from
&#39;@ckeditor/ckeditor5-utils/src/observablemixin&#39;;nimport mix from
&#39;@ckeditor/ckeditor5-utils/src/mix&#39;;nn/**n * Class representing a
basic, generic editor.n *n * Check out the list of its subclasses to learn
about specific editor implementations.n *n * All editor implementations
(like {@link module:editor-classic/classiceditor~ClassicEditor} orn *
{@link module:editor-inline/inlineeditor~InlineEditor}) should extend this
class. They can add theirn * own methods and properties.n *n * When you are
implementing a plugin, then this editor represents the APIn * which your
plugin can expect to get when using its {@link
module:core/plugin~Plugin#editor} property.n *n * This API should be
sufficient in order to implement the "editing&quot; part of your featuren *
(schema definition, conversion, commands, keystrokes, etc.).n * It does not
define the editor UI, which is available only if then * the specific editor
implements also the {@link module:core/editor/editorwithui~EditorWithUI}
interfacen * (as most editor implementations do).n *n * @mixes
module:utils/observablemixin~ObservableMixinn */nexport default class
Editor {nt/**nt * Creates a new instance of the Editor class.nt *nt *
Usually, not to be used directly. See the static {@link
module:core/editor/editor~Editor.create `create()`} method.nt *nt * @param
{Object} config The editor config.nt */ntconstructor( config ) {nttconst
availablePlugins = this.constructor.build &amp;&amp;
this.constructor.build.plugins;nntt/**ntt * Holds all configurations
specific to this editor instance.ntt *ntt *tteditor.config.get(
&#39;image.toolbar&#39; );ntt *tt// -&gt; [ &#39;imageStyle:full&#39;,
&#39;imageStyle:side&#39;, &#39;|&#39;, &#39;imageTextAlternative&#39; ]ntt
*ntt * @readonlyntt * @member {module:utils/config~Config}ntt
*/nttthis.config = new Config( config, this.constructor.build &amp;&amp;
this.constructor.build.config );nnttthis.config.define( &#39;plugins&#39;,
availablePlugins );nntt/**ntt * The plugins loaded and in use by this
editor instance.ntt *ntt *tteditor.plugins.get( &#39;Clipboard&#39; ); //
-&gt; instance of the Clipboard plugin.ntt *ntt * @readonlyntt * @member
{module:core/plugincollection~PluginCollection}ntt */nttthis.plugins = new
PluginCollection( this, availablePlugins );nntt/**ntt * Commands registered
to the editor.ntt *ntt * Use the shorthand {@link execute
`editor.execute()`} method to execute commands:ntt *ntt *tt// Execute the
bold command:ntt *tteditor.execute( &#39;bold&#39; );ntt *ntt *tt// Check
the state of the bold command:ntt *tteditor.commands.get( &#39;bold&#39;
).value;ntt *ntt * @readonlyntt * @member
{module:core/commandcollection~CommandCollection}ntt */nttthis.commands =
new CommandCollection();nntt/**ntt * @readonlyntt * @member
{module:utils/locale~Locale}ntt */nttthis.locale = new Locale(
this.config.get( &#39;language&#39; ) );nntt/**ntt * Shorthand for {@link
module:utils/locale~Locale#t}.ntt *ntt * @see
module:utils/locale~Locale#tntt * @method tntt */nttthis.t =
this.locale.t;nntt/**ntt * Defines whether this editor is in read-only
mode.ntt *ntt * In read-only mode the editor {@link commands commands} are
disabled so it is not possiblentt * to modify document by using them.ntt
*ntt * @observablentt * @member {Boolean} isReadOnlyntt */nttthis.set(
&#39;isReadOnly&#39;, false );nntt/**ntt * The editor&#39;s model.ntt *ntt
* The central point of the editor&#39;s abstract data model.ntt *ntt *
@readonlyntt * @member {module:engine/model/model~Model}ntt */nttthis.model
= new Model();nntt/**ntt * The {@link
module:engine/controller/datacontroller~DataController data controller}.ntt
* Used e.g. for setting and retrieving editor data.ntt *ntt * @readonlyntt
* @member {module:engine/controller/datacontroller~DataController}ntt
*/nttthis.data = new DataController( this.model );nntt/**ntt * The {@link
module:engine/controller/editingcontroller~EditingController editing
controller}.ntt * Controls user input and rendering the content for
editing.ntt *ntt * @readonlyntt * @member
{module:engine/controller/editingcontroller~EditingController}ntt
*/nttthis.editing = new EditingController( this.model
);nttthis.editing.view.document.bind( &#39;isReadOnly&#39; ).to( this
);nntt/**ntt * Conversion manager through which you can register model to
view and view to model converters.ntt *ntt * See {@link
module:engine/conversion/conversion~Conversion}&#39;s documentation to
learn how to add converters.ntt *ntt * @readonlyntt * @member
{module:engine/conversion/conversion~Conversion}ntt */nttthis.conversion =
new Conversion();nnttthis.conversion.register( &#39;downcast&#39;, [
this.editing.downcastDispatcher, this.data.downcastDispatcher ]
);nttthis.conversion.register( &#39;editingDowncast&#39;, [
this.editing.downcastDispatcher ] );nttthis.conversion.register(
&#39;dataDowncast&#39;, [ this.data.downcastDispatcher ]
);nnttthis.conversion.register( &#39;upcast&#39;, [
this.data.upcastDispatcher ] );nntt/**ntt * Instance of the {@link
module:core/editingkeystrokehandler~EditingKeystrokeHandler}.ntt *ntt * It
allows setting simple keystrokes:ntt *ntt *tt// Execute the bold command on
Ctrl+E:ntt *tteditor.keystrokes.set( &#39;Ctrl+E&#39;, &#39;bold&#39; );ntt
*ntt *tt// Execute your own callback:ntt *tteditor.keystrokes.set(
&#39;Ctrl+E&#39;, ( data, cancel ) =&gt; {ntt *tttconsole.log( data.keyCode
);ntt *ntt *ttt// Prevent default (native) action and stop the underlying
keydown eventntt *ttt// so no other editor feature will interfere.ntt
*tttcancel();ntt *tt} );ntt *ntt * @readonlyntt * @member
{module:core/editingkeystrokehandler~EditingKeystrokeHandler}ntt
*/nttthis.keystrokes = new EditingKeystrokeHandler( this
);nttthis.keystrokes.listenTo( this.editing.view.document );nt}nnt/**nt *
Loads and initializes plugins specified in the config.nt *nt * @returns
{Promise} A promise which resolves once the initialization is completed.nt
*/ntinitPlugins() {nttconst that = this;nttconst config =
this.config;nnttreturn loadPlugins()nttt.then( loadedPlugins =&gt;
{nttttreturn initPlugins( loadedPlugins, &#39;init&#39; )nttttt.then( ()
=&gt; initPlugins( loadedPlugins, &#39;afterInit&#39; ) );nttt} )nttt.then(
() =&gt; this.fire( &#39;pluginsReady&#39; ) );nnttfunction loadPlugins()
{ntttconst plugins = config.get( &#39;plugins&#39; ) || [];ntttconst
removePlugins = config.get( &#39;removePlugins&#39; ) || [];nntttreturn
that.plugins.load( plugins, removePlugins );ntt}nnttfunction initPlugins(
loadedPlugins, method ) {ntttreturn loadedPlugins.reduce( ( promise, plugin
) =&gt; {nttttif ( !plugin[ method ] ) {ntttttreturn
promise;ntttt}nnttttreturn promise.then( plugin[ method ].bind( plugin )
);nttt}, Promise.resolve() );ntt}nt}nnt/**nt * Destroys the editor
instance, releasing all resources used by it.nt *nt * @fires destroynt *
@returns {Promise} A promise that resolves once the editor instance is
fully destroyed.nt */ntdestroy() {nttthis.fire( &#39;destroy&#39;
);nnttthis.stopListening();nnttthis.commands.destroy();nnttreturn
this.plugins.destroy()nttt.then( () =&gt;
{nttttthis.model.destroy();nttttthis.data.destroy();nttttthis.editing.destroy();nttttthis.keystrokes.destroy();nttt}
);nt}nnt/**nt * Executes specified command with given parameters.nt *nt *
Shorthand for:nt *nt *tteditor.commands.get( commandName ).execute( … );nt
*nt * @param {String} commandName Name of command to execute.nt * @param
{*} […commandParams] Command parameters.nt */ntexecute( …args )
{nttthis.commands.execute( …args );nt}nnt/**nt * Creates and initializes a
new editor instance.nt *nt * @param {Object} config The editor config. You
can find the list of config options innt * {@link
module:core/editor/editorconfig~EditorConfig}.nt * @returns {Promise}
Promise resolved once editor is ready.nt * @returns
{module:core/editor/editor~Editor} return.editor The editor instance.nt
*/ntstatic create( config ) {nttreturn new Promise( resolve =&gt;
{ntttconst editor = new this( config
);nntttresolve(ntttteditor.initPlugins()nttttt.then( () =&gt;
{ntttttteditor.fire( &#39;dataReady&#39; );ntttttteditor.fire(
&#39;ready&#39; );nttttt} )nttttt.then( () =&gt; editor )nttt);ntt}
);nt}n}nnmix( Editor, ObservableMixin );nn/**n * Fired after {@link
initPlugins plugins are initialized}.n *n * @event pluginsReadyn */nn/**n *
Fired when the data loaded to the editor is ready. If a specific editor
doesn&#39;t loadn * any data initially, this event will be fired right
before {@link event:ready}.n *n * @event dataReadyn */nn/**n * Fired when
{@link event:pluginsReady plugins}, and {@link event:dataReady data} and
all additionaln * editor components are ready.n *n * Note: This event is
most useful for plugin developers. When integrating the editor with your
website orn * application you do not have to listen to `editor#ready`
because when the promise returned by the staticn * {@link
module:core/editor/editor~Editor.create `Editor.create()`} event is
resolved, the editor is already ready.n * In fact, since the first moment
when the editor instance is available to you is inside `then()`&#39;s
callback,n * you cannot even add a listener to the `editor#ready` event.n
*n * @event readyn */nn/**n * Fired when this editor instance is destroyed.
The editor at this point is not usable and this event should be used ton *
perform the clean-up in any plugin.n *n * @event destroyn */nn/**n *
Additional data built into the editor class. It&#39;s used while bundling
the editor in order to providen * the default set of plugins and config
options which are later used during editor initialization.n *n * Two
properties are supported:n *n * * `plugins` – an array of plugin
constructors. They will be automatically initialized by the editor, unless
listedn * in `config.removePlugins` or unless `config.plugins` is passed.n
* * `config` – the defalt config options.n *n * @staticn * @member {Object}
module:core/editor/editor~Editor.buildn */nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-core/src/editor/editor.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2017, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module core/editor/utils/dataapimixinn */nn/**n *
Implementation of the {@link
module:core/editor/utils/dataapimixin~DataApi}.n *n * @mixin DataApiMixinn
* @implements module:core/editor/utils/dataapimixin~DataApin */nconst
DataApiMixin = {nt/**nt * @inheritDocnt */ntsetData( data )
{nttthis.data.set( data );nt},nnt/**nt * @inheritDocnt */ntgetData()
{nttreturn this.data.get();nt}n};nnexport default DataApiMixin;nn/**n *
Interface defining an editor methods for setting and getting data to/from
the editor&#39;s main root elementn * using the {@link
module:core/editor/editor~Editor#data data pipeline}.n *n * This interface
is not part of the {@link module:core/editor/editor~Editor} class because
one may want to implementn * an editor with multiple root elements, in
which case the methods for setting/getting data will need to be
implementedn * differently.n *n * @interface DataApin */nn/**n * Sets the
data in the editor.n *n *tteditor.setData( &#39;&lt;p&gt;This is
editor!&lt;/p&gt;&#39; );n *n * By default the editor accepts HTML. This
can be controlled by injecting a different data processor.n * See {@glink
features/markdown Markdown output} guide for more details.n *n * Note: Not
only is the format of the data configurable, but the type of the
`setData()`&#39;s parameter does notn * have to be a string either. You can
e.g. accept an object or a DOM `DocumentFragment` if you consider thisn *
the right format for you.n *n * @method setDatan * @param {String} data
Input data.n */nn/**n * Gets the data from the editor.n *n
*tteditor.getData(); // -&gt; &#39;&lt;p&gt;This is editor!&lt;/p&gt;&#39;n
*n * By default the editor outputs HTML. This can be controlled by
injecting a different data processor.n * See {@glink features/markdown
Markdown output} guide for more details.n *n * Note: Not only is the format
of the data configurable, but the type of the `getData()`&#39;s return
value does notn * have to be a string either. You can e.g. return an object
or a DOM `DocumentFragment`  if you consider thisn * the right format for
you.n *n * @method getDatan * @returns {String} Output data.n
*/nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-core/src/editor/utils/dataapimixin.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module engine/dataprocessor/htmldataprocessorn */nn/* globals
document, DOMParser */nnimport BasicHtmlWriter from
&#39;./basichtmlwriter&#39;;nimport DomConverter from
&#39;../view/domconverter&#39;;nimport { NBSP_FILLER } from
&#39;../view/filler&#39;;nn/**n * The HTML data processor class.n * This
data processor implementation uses HTML as input and output data.n *n *
@implements module:engine/dataprocessor/dataprocessor~DataProcessorn
*/nexport default class HtmlDataProcessor {nt/**nt * Creates a new instance
of the HTML data processor class.nt */ntconstructor() {ntt/**ntt * A DOM
parser instance used to parse an HTML string to an HTML document.ntt *ntt *
@privatentt * @member {DOMParser}ntt */nttthis._domParser = new
DOMParser();nntt/**ntt * A DOM converter used to convert DOM elements to
view elements.ntt *ntt * @privatentt * @member
{module:engine/view/domconverter~DomConverter}ntt */nttthis._domConverter =
new DomConverter( { blockFiller: NBSP_FILLER } );nntt/**ntt * A basic HTML
writer instance used to convert DOM elements to an HTML string.ntt *ntt *
@privatentt * @member
{module:engine/dataprocessor/basichtmlwriter~BasicHtmlWriter}ntt
*/nttthis._htmlWriter = new BasicHtmlWriter();nt}nnt/**nt * Converts a
provided {@link module:engine/view/documentfragment~DocumentFragment
document fragment}nt * to data format &amp;mdash; in this case to an HTML
string.nt *nt * @param
{module:engine/view/documentfragment~DocumentFragment} viewFragmentnt *
@returns {String} HTML string.nt */nttoData( viewFragment ) {ntt// Convert
view DocumentFragment to DOM DocumentFragment.nttconst domFragment =
this._domConverter.viewToDom( viewFragment, document );nntt// Convert DOM
DocumentFragment to HTML output.nttreturn this._htmlWriter.getHtml(
domFragment );nt}nnt/**nt * Converts the provided HTML string to a view
tree.nt *nt * @param {String} data An HTML string.nt * @returns
{module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment|null}
A converted view element.nt */nttoView( data ) {ntt// Convert input HTML
data to DOM DocumentFragment.nttconst domFragment = this._toDom( data
);nntt// Convert DOM DocumentFragment to view DocumentFragment.nttreturn
this._domConverter.domToView( domFragment );nt}nnt/**nt * Converts an HTML
string to its DOM representation. Returns a document fragment containing
nodes parsed fromnt * the provided data.nt *nt * @privatent * @param
{String} datant * @returns {DocumentFragment}nt */nt_toDom( data )
{nttconst document = this._domParser.parseFromString( data,
&#39;text/html&#39; );nttconst fragment =
document.createDocumentFragment();nttconst nodes =
document.body.childNodes;nnttwhile ( nodes.length &gt; 0 )
{ntttfragment.appendChild( nodes[ 0 ] );ntt}nnttreturn
fragment;nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/dataprocessor/htmldataprocessor.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module ui/viewn */nnimport CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nimport
ViewCollection from &#39;./viewcollection&#39;;nimport Template from
&#39;./template&#39;;nimport DomEmitterMixin from
&#39;@ckeditor/ckeditor5-utils/src/dom/emittermixin&#39;;nimport
ObservableMixin from
&#39;@ckeditor/ckeditor5-utils/src/observablemixin&#39;;nimport Collection
from &#39;@ckeditor/ckeditor5-utils/src/collection&#39;;nimport mix from
&#39;@ckeditor/ckeditor5-utils/src/mix&#39;;nimport isIterable from
&#39;@ckeditor/ckeditor5-utils/src/isiterable&#39;;nnimport
&#39;../theme/globals/globals.css&#39;;nn/**n * The basic view class, which
represents an HTML element created out of an * {@link
module:ui/view~View#template}. Views are building blocks of the user
interface and handlen * interactionn *n * Views {@link
module:ui/view~View#registerChild aggregate} children inn * {@link
module:ui/view~View#createCollection collections} and manage the life cycle
of DOMn * listeners e.g. by handling rendering and destruction.n *n * See
the {@link module:ui/template~TemplateDefinition} syntax to learn more
about shaping viewn * elements, attributes and listeners.n *n *ttclass
SampleView extends View {n *tttconstructor( locale ) {n *ttttsuper( locale
);n *n *ttttconst bind = this.bindTemplate;n *n *tttt// Views define their
interface (state) using observable attributes.n *ttttthis.set(
&#39;elementClass&#39;, &#39;bar&#39; );n *n *ttttthis.setTemplate( {n
*ttttttag: &#39;p&#39;,n *n *ttttt// The element of the view can be defined
with its children.n *tttttchildren: [n *tttttt&#39;Hello&#39;,n *tttttt{n
*ttttttttag: &#39;b&#39;,n *tttttttchildren: [ &#39;world!&#39; ]n
*tttttt}n *ttttt],n *tttttattributes: {n *ttttttclass: [n
*ttttttt&#39;foo&#39;,n *n *ttttttt// Observable attributes control the
state of the view in DOM.n *tttttttbind.to( &#39;elementClass&#39; )n
*tttttt]n *ttttt},n *ttttton: {n *tttttt// Views listen to DOM events and
propagate them.n *ttttttclick: bind.to( &#39;clicked&#39; )n *ttttt}n
*tttt} );n *ttt}n *tt}n *n *ttconst view = new SampleView( locale );n *n
*ttview.render();n *n *tt// Append &lt;p class=&quot;foo
bar&quot;&gt;Hello<strong>world</strong>&lt;/p&gt; to the &lt;body&gt;n
*ttdocument.body.appendChild( view.element );n *n *tt// Change the class
attribute to &lt;p class=&quot;foo
baz&quot;&gt;Hello<strong>world</strong>&lt;/p&gt;n *ttview.elementClass =
&#39;baz&#39;;n *n *tt// Respond to the "click&quot; event in DOM by
executing a custom action.n *ttview.on( &#39;clicked&#39;, () =&gt; {n
*tttconsole.log( &#39;The view has been clicked!&#39; );n *tt} );n *n *
@mixes module:utils/observablemixin~ObservableMixinn */nexport default
class View {nt/**nt * Creates an instance of the {@link
module:ui/view~View} class.nt *nt * Also see {@link render}.nt *nt * @param
{module:utils/locale~Locale} [locale] The localization services instance.nt
*/ntconstructor( locale ) {ntt/**ntt * An HTML element of the view. `null`
until {@link render rendered}ntt * from the {@link template}.ntt *ntt
*ttclass SampleView extends View {ntt *tttconstructor() {ntt
*ttttsuper();ntt *ntt *tttt// A template instance the element will be
created from.ntt *ttttthis.setTemplate( {ntt *ttttttag: &#39;p&#39;ntt *ntt
*ttttt// …ntt *tttt} );ntt *ttt}ntt *tt}ntt *ntt *ttconst view = new
SampleView();ntt *ntt *tt// Renders the template.ntt *ttview.render();ntt
*ntt *tt// Append the HTML element of the view to &lt;body&gt;.ntt
*ttdocument.body.appendChild( view.element );ntt *ntt *
*<strong>Note</strong>*: The element of the view can also be assigned
directly:ntt *ntt *ttview.element = document.querySelector(
&#39;#my-container&#39; );ntt *ntt * @member {HTMLElement}ntt
*/nttthis.element = null;nntt/**ntt * Set `true` when the view has already
been {@link module:ui/view~View#render rendered}.ntt *ntt * @readonlyntt *
@member {Boolean} isRenderedntt */nttthis.isRendered = false;nntt/**ntt * A
set of tools to localize the user interface.ntt *ntt * Also see {@link
module:core/editor/editor~Editor#locale}.ntt *ntt * @readonlyntt * @member
{module:utils/locale~Locale}ntt */nttthis.locale = locale;nntt/**ntt *
Shorthand for {@link module:utils/locale~Locale#t}.ntt *ntt * Note: If
{@link locale} instance hasn&#39;t been passed to the view this method may
notntt * be available.ntt *ntt * @see module:utils/locale~Locale#tntt *
@methodntt */nttthis.t = locale &amp;&amp; locale.t;nntt/**ntt *
Collections registered with {@link createCollection}.ntt *ntt *
@protectedntt * @member
{Set.&lt;module:ui/viewcollection~ViewCollection&gt;}ntt
*/nttthis._viewCollections = new Collection();nntt/**ntt * A collection of
view instances, which have been added directlyntt * into the {@link
module:ui/template~Template#children}.ntt *ntt * @protectedntt * @member
{module:ui/viewcollection~ViewCollection}ntt */nttthis._unboundChildren =
this.createCollection();nntt// Pass parent locale to its
children.nttthis._viewCollections.on( &#39;add&#39;, ( evt, collection )
=&gt; {ntttcollection.locale = locale;ntt} );nntt/**ntt * Template of this
view. It provides the {@link element} representingntt * the view in DOM,
which is {@link render rendered}.ntt *ntt * @member
{module:ui/template~Template} templatentt */nntt/**ntt * Cached {@link
module:ui/template~BindChain bind chain} object created by thentt * {@link
template}. See {@link bindTemplate}.ntt *ntt * @privatentt * @member
{Object} #_bindTemplatentt */nnttthis.decorate( &#39;render&#39;
);nt}nnt/**nt * Shorthand for {@link module:ui/template~Template.bind}, a
bindingnt * {@link module:ui/template~BindChain interface} pre–configured
for the view instance.nt *nt * It provides {@link
module:ui/template~BindChain#to `to()`} andnt * {@link
module:ui/template~BindChain#if `if()`} methods that initialize bindings
withnt * observable attributes and attach DOM listeners.nt *nt *ttclass
SampleView extends View {nt *tttconstructor( locale ) {nt *ttttsuper(
locale );nt *nt *ttttconst bind = this.bindTemplate;nt *nt *tttt// These
{@link module:utils/observablemixin~Observable observable} attributes will
controlnt *tttt// the state of the view in DOM.nt *ttttthis.set( {nt
*tttttelementClass: &#39;foo&#39;,nt *tttt tisEnabled: truent *tttt } );nt
*nt *ttttthis.setTemplate( {nt *ttttttag: &#39;p&#39;,nt *nt
*tttttattributes: {nt *tttttt// The class HTML attribute will follow
elementClassnt *tttttt// and isEnabled view attributes.nt *ttttttclass: [nt
*tttttttbind.to( &#39;elementClass&#39; )nt *tttttttbind.if(
&#39;isEnabled&#39;, &#39;present-when-enabled&#39; )nt *tttttt]nt
*ttttt},nt *nt *ttttton: {nt *tttttt// The view will fire the
"clicked&quot; event upon clicking &lt;p&gt; in DOM.nt *ttttttclick:
bind.to( &#39;clicked&#39; )nt *ttttt}nt *tttt} );nt *ttt}nt *tt}nt *nt *
@method bindTemplatent */ntget bindTemplate() {nttif ( this._bindTemplate )
{ntttreturn this._bindTemplate;ntt}nnttreturn ( this._bindTemplate =
Template.bind( this, this ) );nt}nnt/**nt * Creates a new collection of
views, which can be used asnt * {@link
module:ui/template~Template#children} of this view.nt *nt *ttclass
SampleView extends View {nt *tttconstructor( locale ) {nt *ttttsuper(
locale );nt *nt *ttttthis.items = this.createCollection();n t *nt
*ttttthis.setTemplate( {nt *ttttttag: &#39;p&#39;,nt *nt *ttttt// `items`
collection will render here.nt *tttttchildren: this.itemsnt *tttt} );nt
*ttt}nt *tt}nt *nt *ttconst view = new SampleView( locale );nt *ttconst
child = new ChildView( locale );nt *nt *ttview.render();nt *nt *tt// It
will append &lt;p&gt;&lt;/p&gt; to the &lt;body&gt;.nt
*ttdocument.body.appendChild( view.element );nt *nt *tt// From now on the
child is nested under its parent, which is also reflected in DOM.nt *tt//
&lt;p&gt;&lt;child#element&gt;&lt;/p&gt;nt *ttview.items.add( child );nt
*nt * @returns {module:ui/viewcollection~ViewCollection} A new collection
of view instances.nt */ntcreateCollection() {nttconst collection = new
ViewCollection();nnttthis._viewCollections.add( collection );nnttreturn
collection;nt}nnt/**nt * Registers a new child view under the view
instance. Once registered, a childnt * view is managed by its parent,
including {@link render rendering}nt * and {@link destroy destruction}.nt
*nt * To revert this, use {@link deregisterChild}.nt *nt *ttclass
SampleView extends View {nt *tttconstructor( locale ) {nt *ttttsuper(
locale );nt *nt *ttttthis.childA = new SomeChildView( locale );nt
*ttttthis.childB = new SomeChildView( locale );nt *nt
*ttttthis.setTemplate( { tag: &#39;p&#39; } );nt *nt *tttt// Register the
children.nt *ttttthis.registerChild( [ this.childA, this.childB ] );nt
*ttt}nt *nt *tttrender() {nt *ttttsuper.render();nt *nt
*ttttthis.element.appendChild( this.childA.element );nt
*ttttthis.element.appendChild( this.childB.element );nt *ttt}nt *tt}nt *nt
*ttconst view = new SampleView( locale );nt *nt *ttview.render();nt *nt
*tt// Will append
&lt;p&gt;&lt;childA#element&gt;&lt;childB#element&gt;&lt;/p&gt;.nt
*ttdocument.body.appendChild( view.element );nt *nt *
*<strong>Note</strong>*: There&#39;s no need to add child views if
they&#39;re already referenced in thent * {@link template}:nt *nt *ttclass
SampleView extends View {nt *tttconstructor( locale ) {nt *ttttsuper(
locale );nt *nt *ttttthis.childA = new SomeChildView( locale );nt
*ttttthis.childB = new SomeChildView( locale );nt *nt
*ttttthis.setTemplate( {nt *ttttttag: &#39;p&#39;,nt *n t *ttttt// These
children will be added automatically. There&#39;s non t *ttttt// need to
call {@link registerChild} for any of them.nt *tttttchildren: [
this.childA, this.childB ]nt *tttt} );nt *ttt}nt *nt *ttt// …nt *tt}nt *nt
* @param {module:ui/view~View|Iterable.&lt;module:ui/view~View&gt;}
children Children views to be registered.nt */ntregisterChild( children )
{nttif ( !isIterable( children ) ) {ntttchildren = [ children ];ntt}nnttfor
( const child of children ) {ntttthis._unboundChildren.add( child
);ntt}nt}nnt/**nt * The opposite of {@link registerChild}. Removes a child
view from this view instance.nt * Once removed, the child is no longer
managed by its parent, e.g. it can safelynt * become a child of another
parent view.nt *nt * @see registerChildnt * @param
{module:ui/view~View|Iterable.&lt;module:ui/view~View&gt;} children Child
views to be removed.nt */ntderegisterChild( children ) {nttif (
!isIterable( children ) ) {ntttchildren = [ children ];ntt}nnttfor ( const
child of children ) {ntttthis._unboundChildren.remove( child
);ntt}nt}nnt/**nt * Sets the {@link template} of the view with with given
definition.nt *nt * A shorthand for:nt *nt *ttview.setTemplate( definition
);nt *nt * @param {module:ui/template~TemplateDefinition} definition
Definition of view&#39;s template.nt */ntsetTemplate( definition )
{nttthis.template = new Template( definition );nt}nnt/**nt * {@link
module:ui/template~Template.extend Extends} the {@link template} of the
view withnt * with given definition.nt *nt * A shorthand for:nt *nt
*ttTemplate.extend( view.template, definition );nt *nt *
*<strong>Note</strong>*: Is requires the {@link template} to be already
set. See {@link setTemplate}.nt *nt * @param
{module:ui/template~TemplateDefinition} definition Definition whichnt *
extends the {@link template}.nt */ntextendTemplate( definition )
{nttTemplate.extend( this.template, definition );nt}nnt/**nt * Recursively
renders the view.nt *nt * Once the view is rendered:nt * * the {@link
element} becomes an HTML element out of {@link template},nt * * the {@link
isRendered} flag is set `true`.nt *nt * *<strong>Note</strong>*: The
children of the view:nt * * defined directly in the {@link template}nt * *
residing in collections created by the {@link createCollection} method,nt *
* and added by {@link registerChild}nt * are also rendered in the
process.nt *nt * In general, `render()` method is the right place to keep
the code which refers to thent * {@link element} and should be executed at
the very beginning of the view&#39;s life cycle.nt *nt * It is possible to
{@link module:ui/template~Template.extend} the {@link template} beforent *
the view is rendered. To allow an early customization of the view (e.g. by
its parent),nt * such references should be done in `render()`.nt *nt
*ttclass SampleView extends View {nt *tttconstructor() {nt
*ttttthis.setTemplate( {nt *ttttt// …nt *tttt} );nt *ttt},nt *nt
*tttrender() {nt *tttt// View#element becomes available.nt
*ttttsuper.render();nt *nt *tttt// The "scroll&quot; listener depends on
element.nt *ttttthis.listenTo( window, &#39;scroll&#39;, () =&gt; {nt
*ttttt// A reference to element would render the template and make it
non-extendable.nt *tttttif ( window.scrollY &gt; 0 ) {nt
*ttttttthis.element.scrollLeft = 100;nt *ttttt} else {nt
*ttttttthis.element.scrollLeft = 0;nt *ttttt}nt *tttt} );nt *ttt}nt *tt}nt
*nt *ttconst view = new SampleView();nt *nt *tt// Let&#39;s customize the
view before it gets rendered.nt *ttview.extendTemplate( {nt *tttattributes:
{nt *ttttclass: [nt *ttttt&#39;additional-class&#39;nt *tttt]nt *ttt}nt
*tt} );nt *nt *tt// Late rendering allows customization of the view.nt
*ttview.render();nt */ntrender() {nttif ( this.isRendered ) {nttt/**nttt *
This View has already been rendered.nttt *nttt * @error
ui-view-render-renderednttt */ntttthrow new CKEditorError(
&#39;ui-view-render-already-rendered: This View has already been
rendered.&#39; );ntt}nntt// Render element of the view.nttif (
this.template ) {ntttthis.element = this.template.render();nnttt//
Auto–register view children from template.ntttthis.registerChild(
this.template.getViews() );ntt}nnttthis.isRendered = true;nt}nnt/**nt *
Recursively destroys the view instance and child views added by {@link
registerChild} andnt * residing in collections created by the {@link
createCollection}.nt *nt * Destruction disables all event listeners:nt * *
created on the view, e.g. `view.on( &#39;event&#39;, () =&gt; {} )`,nt * *
defined in the {@link template} for DOM events.nt */ntdestroy()
{nttthis.stopListening();nnttthis._viewCollections.map( c =&gt; c.destroy()
);nt}nnt/**nt * Event fired by the {@link render} method. Actual rendering
is executed as a listener tont * this event with the default priority.nt
*nt * See {@link module:utils/observablemixin~ObservableMixin.decorate} for
more information and samples.nt *nt * @event rendernt */n}nnmix( View,
DomEmitterMixin );nmix( View, ObservableMixin );nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-ui/src/view.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module ui/editorui/editoruiviewn */nn/* globals document */nnimport View
from &#39;../view&#39;;nimport Template from &#39;../template&#39;;nnimport
&#39;../../theme/components/editorui/editorui.css&#39;;nn/**n * The editor
UI view class. Base class for the editor main views.n *n * @extends
module:ui/view~Viewn */nexport default class EditorUIView extends View
{nt/**nt * Creates an instance of the editor UI view class.nt *nt * @param
{module:utils/locale~Locale} [locale] The locale instance.nt
*/ntconstructor( locale ) {nttsuper( locale );nntt/**ntt * Collection of
the child views, detached from the DOMntt * structure of the editor, like
panels, icons etc.ntt *ntt * @readonlyntt * @member
{module:ui/viewcollection~ViewCollection} bodyntt */nttthis.body =
this.createCollection();nntt/**ntt * The element holding elements of the
&#39;body&#39; region.ntt *ntt * @privatentt * @member {HTMLElement}
#_bodyCollectionContainerntt */nt}nnt/**nt * @inheritDocnt */ntrender()
{nttsuper.render();nnttthis._renderBodyCollection();nt}nnt/**nt *
@inheritDocnt */ntdestroy()
{nttthis._bodyCollectionContainer.remove();nnttreturn
super.destroy();nt}nnt/**nt * Creates and appends to `&lt;body&gt;` the
{@link body} collection container.nt *nt * @privatent
*/nt_renderBodyCollection() {nttconst bodyElement =
this._bodyCollectionContainer = new Template( {nttttag:
&#39;div&#39;,ntttattributes: {nttttclass:
[nttttt&#39;ck&#39;,nttttt&#39;ck-reset_all&#39;,nttttt&#39;ck-body&#39;,nttttt&#39;ck-rounded-corners&#39;ntttt]nttt},ntttchildren:
this.bodyntt} ).render();nnttdocument.body.appendChild( bodyElement
);nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-ui/src/editorui/editoruiview.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module ui/label/labelviewn */nnimport View from &#39;../view&#39;;nnimport
&#39;../../theme/components/label/label.css&#39;;nn/**n * The label view
class.n *n * @extends module:ui/view~Viewn */nexport default class
LabelView extends View {nt/**nt * @inheritDocnt */ntconstructor( locale )
{nttsuper( locale );nntt/**ntt * The text of the label.ntt *ntt *
@observablentt * @member {String} textntt */nttthis.set( &#39;text&#39;
);nntt/**ntt * The `for` attribute of the label (i.e. to pair with an
`&lt;input&gt;` element).ntt *ntt * @observablentt * @member {String}
forntt */nttthis.set( &#39;for&#39; );nnttconst bind =
this.bindTemplate;nnttthis.setTemplate( {nttttag:
&#39;label&#39;,ntttattributes: {nttttclass:
[nttttt&#39;ck&#39;,nttttt&#39;ck-label&#39;ntttt],nttttfor: bind.to(
&#39;for&#39; )nttt},ntttchildren: [ntttt{nttttttext: bind.to(
&#39;text&#39; )ntttt}nttt]ntt} );nt}n}nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-ui/src/label/labelview.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/n/**n * @module ui/editorui/boxed/boxededitoruiviewn */nimport
EditorUIView from &#39;../../editorui/editoruiview&#39;;nimport LabelView
from &#39;../../label/labelview&#39;;nimport uid from
&#39;@ckeditor/ckeditor5-utils/src/uid&#39;;n/**n * The boxed editor UI
view class. This class represents an editor interfacen * consisting of a
toolbar and an editable area, enclosed within a box.n *n * @extends
module:ui/editorui/editoruiview~EditorUIViewn */nexport default class
BoxedEditorUIView extends EditorUIView {n    /**nt * Creates an instance of
the boxed editor UI view class.nt *nt * @param {module:utils/locale~Locale}
locale The locale instance..nt */n    constructor(locale) {n       
super(locale);n        const ariaLabelUid = uid();n        /**ntt *
Collection of the child views located in the top (`.ck-editor__top`)ntt *
area of the UI.ntt *ntt * @readonlyntt * @member
{module:ui/viewcollection~ViewCollection}ntt */n        this.top =
this.createCollection();n        /**ntt * Collection of the child views
located in the main (`.ck-editor__main`)ntt * area of the UI.ntt *ntt *
@readonlyntt * @member {module:ui/viewcollection~ViewCollection}ntt */n    
this.main = this.createCollection();n        /**ntt * Voice label of the
UI.ntt *ntt * @protectedntt * @readonlyntt * @member {module:ui/view~View}
#_voiceLabelViewntt */n        this._voiceLabelView =
this._createVoiceLabel(ariaLabelUid);n        this.setTemplate({n          
tag: &#39;div&#39;,n            attributes: {n                class: [n    
&#39;ck&#39;,n                    &#39;ck-reset&#39;,n                   
&#39;ck-editor&#39;,n                    &#39;ck-rounded-corners&#39;n     
],n                role: &#39;application&#39;,n                dir:
&#39;ltr&#39;,n                lang: locale.language,n               
&#39;aria-labelledby&#39;: `ck-editor__aria-label_${ ariaLabelUid }`n      
},n            children: [n                this._voiceLabelView,n          
{n                    tag: &#39;div&#39;,n                    attributes:
{n                        class: [n                           
&#39;ck&#39;,n                            &#39;ck-editor__top&#39;,n       
&#39;ck-reset_all&#39;n                        ],n                       
role: &#39;presentation&#39;n                    },n                   
children: this.topn                },n                {n                   
tag: &#39;div&#39;,n                    attributes: {n                     
class: [n                            &#39;ck&#39;,n                        
&#39;ck-editor__main&#39;n                        ],n                      
role: &#39;presentation&#39;n                    },n                   
children: this.mainn                }n            ]n        });n    }n   
/**nt * Creates a voice label view instance.nt *nt * @privatent * @returns
{module:ui/label/labelview~LabelView}nt */n   
_createVoiceLabel(ariaLabelUid) {n        const t = this.t;n        const
voiceLabel = new LabelView();n        voiceLabel.text = t(&#39;ac&#39;);n  
voiceLabel.extendTemplate({n            attributes: {n                id:
`ck-editor__aria-label_${ ariaLabelUid }`,n                class:
&#39;ck-voice-label&#39;n            }n        });n        return
voiceLabel;n    }n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-ui/src/editorui/boxed/boxededitoruiview.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module ui/editableui/editableuiviewn */nnimport
View from &#39;../view&#39;;nn/**n * The editable UI view class.n *n *
@extends module:ui/view~Viewn */nexport default class EditableUIView
extends View {nt/**nt * Creates an instance of EditableUIView class.nt *nt
* @param {module:utils/locale~Locale} [locale] The locale instance.nt *
@param {HTMLElement} [editableElement] The editable element. If not
specified, this viewnt * should create it. Otherwise, the existing element
should be used.nt */ntconstructor( locale, editableElement ) {nttsuper(
locale );nnttconst bind = this.bindTemplate;nnttif ( editableElement )
{ntttthis.element = this.editableElement =
editableElement;ntt}nnttthis.setTemplate( {nttttag:
&#39;div&#39;,ntttattributes: {nttttclass:
[nttttt&#39;ck&#39;,nttttt&#39;ck-content&#39;,nttttt&#39;ck-editor__editable&#39;,nttttt&#39;ck-rounded-corners&#39;,ntttttbind.to(
&#39;isFocused&#39;, value =&gt; value ? &#39;ck-focused&#39; :
&#39;ck-blurred&#39; )ntttt],nttttcontenteditable: bind.to(
&#39;isReadOnly&#39;, value =&gt; !value ),nttt}ntt} );nntt/**ntt *
Controls whether the editable is writable or not.ntt *ntt * @observablentt
* @member {Boolean} isReadOnlyntt */nttthis.set( &#39;isReadOnly&#39;,
false );nntt/**ntt * Controls whether the editable is focused, i.e. the
user is typing in it.ntt *ntt * @observablentt * @member {Boolean}
isFocusedntt */nttthis.set( &#39;isFocused&#39;, false );nntt/**ntt * An
external {@link editableElement} passed into the constructor, which also
meansntt * the view will not render its {@link template}.ntt *ntt * @member
{HTMLElement} externalElementntt */nttthis.externalElement =
editableElement;nntt/**ntt * The element which is the main editable element
(usually the one with `contentEditable=&quot;true&quot;`).ntt *ntt *
@readonlyntt * @member {HTMLElement} editableElementntt */nt}nnt/**nt *
Renders the view by either applying the {@link template} to the existingnt
* {@link editableElement} or assigning {@link element} as {@link
editableElement}.nt */ntrender() {nttsuper.render();nnttif (
this.externalElement ) {ntttthis.template.apply( this.element =
this.externalElement );ntt} else {ntttthis.editableElement =
this.element;ntt}nt}nnt/**nt * @inheritDocnt */ntdestroy() {nttif (
this.externalElement ) {ntttthis.template.revert( this.externalElement
);ntt}nnttsuper.destroy();nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-ui/src/editableui/editableuiview.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/n/**n * @module ui/editableui/inline/inlineeditableuiviewn */nimport
EditableUIView from &#39;../../editableui/editableuiview&#39;;n/**n * The
inline editable UI class implementing an inline {@link
module:ui/editableui/editableuiview~EditableUIView}.n *n * @extends
module:ui/editableui/editableuiview~EditableUIViewn */nexport default class
InlineEditableUIView extends EditableUIView {n    /**nt * Creates an
instance of the InlineEditableUIView class.nt *nt * @param
{module:utils/locale~Locale} [locale] The locale instance.nt * @param
{HTMLElement} [editableElement] The editable element. If not specified,
thent * {@link module:ui/editableui/editableuiview~EditableUIView}nt *
should create it. Otherwise, the existing element should be used.nt */n   
constructor(locale, editableElement) {n        super(locale,
editableElement);n        const bind = this.bindTemplate;n        const t =
this.t;n        /**ntt * The name of the editable UI view.ntt *ntt *
@observablentt * @member {String} namentt */n       
this.set(&#39;name&#39;, null);n        const getLabel = value =&gt; {n    
return t(&#39;ab&#39;, [value]);n        };n        this.extendTemplate({n 
attributes: {n                role: &#39;textbox&#39;,n               
&#39;aria-label&#39;: bind.to(&#39;name&#39;, getLabel),n               
class: &#39;ck-editor__editable_inline&#39;n            }n        });n   
}n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-ui/src/editableui/inline/inlineeditableuiview.jsn// module id
= nulln// module chunks = “,”/**n * @license Copyright © 2003-2018,
CKSource - Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module ui/panel/sticky/stickypanelviewn */nnimport
global from &#39;@ckeditor/ckeditor5-utils/src/dom/global&#39;;nimport View
from &#39;../../view&#39;;nimport Template from
&#39;../../template&#39;;nimport toUnit from
&#39;@ckeditor/ckeditor5-utils/src/dom/tounit&#39;;nnimport
&#39;../../../theme/components/panel/stickypanel.css&#39;;nnconst toPx =
toUnit( &#39;px&#39; );nn/**n * The sticky panel view class.n */nexport
default class StickyPanelView extends View {nt/**nt * @inheritDocnt
*/ntconstructor( locale ) {nttsuper( locale );nnttconst bind =
this.bindTemplate;nntt/**ntt * Controls whether the sticky panel should be
active.ntt *ntt * @readonlyntt * @observablentt * @member {Boolean}
isActiventt */nttthis.set( &#39;isActive&#39;, false );nntt/**ntt *
Controls whether the sticky panel is in the "sticky&quot; state.ntt *ntt *
@readonlyntt * @observablentt * @member {Boolean} isStickyntt
*/nttthis.set( &#39;isSticky&#39;, false );nntt/**ntt * The limiter element
for the sticky panel instance. Its bounding rect limitsntt * the
"stickyness&quot; of the panel, i.e. when the panel reaches the bottomntt *
edge of the limiter, it becomes sticky to that edge and does not floatntt *
off the limiter. It is mandatory for the panel to work properly and oncentt
* set, it cannot be changed.ntt *ntt * @readonlyntt * @observablentt *
@member {HTMLElement} limiterElementntt */nttthis.set(
&#39;limiterElement&#39;, null );nntt/**ntt * The offset from the bottom
edge of {@link limiterElement}ntt * which stops the panel from stickying
any further to prevent limiter&#39;s contentntt * from being completely
covered.ntt *ntt * @readonlyntt * @observablentt * @default 50ntt * @member
{Number} limiterBottomOffsetntt */nttthis.set(
&#39;limiterBottomOffset&#39;, 50 );nntt/**ntt * The offset from the top
edge of the web browser&#39;s viewport which makes thentt * panel become
sticky. The default value is `0`, which means the panel becomesntt * sticky
when it&#39;s upper edge touches the top of the page viewport.ntt *ntt *
This attribute is useful when the web page has UI elements positioned to
the topntt * either using `position: fixed` or `position: sticky`, which
would cover thentt * sticky panel or vice–versa (depending on the `z-index`
hierarchy).ntt *ntt * @readonlyntt * @observablentt * @default 0ntt *
@member {Number} viewportTopOffsetntt */nttthis.set(
&#39;viewportTopOffset&#39;, 0 );nntt/**ntt * Controls the `margin-left`
CSS style of the panel.ntt *ntt * @protectedntt * @readonlyntt *
@observablentt * @member {String} #_marginLeftntt */nttthis.set(
&#39;_marginLeft&#39;, null );nntt/**ntt * Set `true` if the sticky panel
reached the bottom edge of thentt * {@link limiterElement}.ntt *ntt *
@protectedntt * @readonlyntt * @observablentt * @member {Boolean}
#_isStickyToTheLimiterntt */nttthis.set( &#39;_isStickyToTheLimiter&#39;,
false );nntt/**ntt * Set `true` if the sticky panel uses the {@link
viewportTopOffset},ntt * i.e. not {@link #_isStickyToTheLimiter} and the
{@link viewportTopOffset}ntt * is not `0`.ntt *ntt * @protectedntt *
@readonlyntt * @observablentt * @member {Boolean} #_hasViewportTopOffsetntt
*/nttthis.set( &#39;_hasViewportTopOffset&#39;, false );nntt/**ntt *
Collection of the child views which creates balloon panel contents.ntt *ntt
* @readonlyntt * @member {module:ui/viewcollection~ViewCollection}ntt
*/nttthis.content = this.createCollection();nntt/**ntt * The DOM bounding
client rect of the {@link module:ui/view~View#element} of the panel.ntt
*ntt * @protectedntt * @member {Object} #_panelRectntt */nntt/**ntt * The
DOM bounding client rect of the {@link limiterElement}ntt * of the
panel.ntt *ntt * @protectedntt * @member {Object} #_limiterRectntt
*/nntt/**ntt * A dummy element which visually fills the space as long as
thentt * actual panel is sticky. It prevents flickering of the UI.ntt *ntt
* @protectedntt * @property {HTMLElement}ntt
*/nttthis._contentPanelPlaceholder = new Template( {nttttag:
&#39;div&#39;,ntttattributes: {nttttclass:
[nttttt&#39;ck&#39;,nttttt&#39;ck-sticky-panel__placeholder&#39;ntttt],nttttstyle:
{ntttttdisplay: bind.to( &#39;isSticky&#39;, isSticky =&gt; isSticky ?
&#39;block&#39; : &#39;none&#39; ),ntttttheight: bind.to(
&#39;isSticky&#39;, isSticky =&gt; {nttttttreturn isSticky ? toPx(
this._panelRect.height ) : null;nttttt} )ntttt}nttt}ntt}
).render();nntt/**ntt * The panel which accepts children into {@link
content} collection.ntt * Also an element which is positioned when {@link
isSticky}.ntt *ntt * @protectedntt * @property {HTMLElement}ntt
*/nttthis._contentPanel = new Template( {nttttag:
&#39;div&#39;,nntttattributes: {nttttclass:
[nttttt&#39;ck&#39;,nttttt&#39;ck-sticky-panel__content&#39;,nttttt//
Toggle class of the panel when "sticky&quot; state changes in the
view.ntttttbind.if( &#39;isSticky&#39;,
&#39;ck-sticky-panel__content_sticky&#39; ),ntttttbind.if(
&#39;_isStickyToTheLimiter&#39;,
&#39;ck-sticky-panel__content_sticky_bottom-limit&#39; ),ntttt],nttttstyle:
{ntttttwidth: bind.to( &#39;isSticky&#39;, isSticky =&gt; {nttttttreturn
isSticky ? toPx(
this._contentPanelPlaceholder.getBoundingClientRect().width ) :
null;nttttt} ),nnttttttop: bind.to( &#39;_hasViewportTopOffset&#39;,
_hasViewportTopOffset =&gt; {nttttttreturn _hasViewportTopOffset ? toPx(
this.viewportTopOffset ) : null;nttttt} ),nntttttbottom: bind.to(
&#39;_isStickyToTheLimiter&#39;, _isStickyToTheLimiter =&gt; {nttttttreturn
_isStickyToTheLimiter ? toPx( this.limiterBottomOffset ) : null;nttttt}
),nntttttmarginLeft: bind.to( &#39;_marginLeft&#39;
)ntttt}nttt},nntttchildren: this.contentntt}
).render();nnttthis.setTemplate( {nttttag: &#39;div&#39;,ntttattributes:
{nttttclass:
[nttttt&#39;ck&#39;,nttttt&#39;ck-sticky-panel&#39;ntttt]nttt},ntttchildren:
[nttttthis._contentPanelPlaceholder,nttttthis._contentPanelnttt]ntt}
);nt}nnt/**nt * @inheritDocnt */ntrender() {nttsuper.render();nntt// Check
if the panel should go into the sticky state
immediately.nttthis._checkIfShouldBeSticky();nntt// Update sticky state of
the panel as the window is being scrolled.nttthis.listenTo( global.window,
&#39;scroll&#39;, () =&gt; {ntttthis._checkIfShouldBeSticky();ntt} );nntt//
Synchronize with `model.isActive` because sticking an inactive panel is
pointless.nttthis.listenTo( this, &#39;change:isActive&#39;, () =&gt;
{ntttthis._checkIfShouldBeSticky();ntt} );nt}nnt/**nt * Analyzes the
environment to decide whether the panel shouldnt * be sticky or not.nt *nt
* @protectednt */nt_checkIfShouldBeSticky() {nttconst panelRect =
this._panelRect = this._contentPanel.getBoundingClientRect();nttlet
limiterRect;nnttif ( !this.limiterElement ) {ntttthis.isSticky = false;ntt}
else {ntttlimiterRect = this._limiterRect =
this.limiterElement.getBoundingClientRect();nnttt// The panel must be
active to become sticky.ntttthis.isSticky = this.isActive &amp;&amp;ntttt//
The limiter&#39;s top edge must be beyond the upper edge of the visible
viewport (+the viewportTopOffset).nttttlimiterRect.top &lt;
this.viewportTopOffset &amp;&amp;ntttt// The model#limiterElement&#39;s
height mustn&#39;t be smaller than the panel&#39;s height and
model#limiterBottomOffset.ntttt// There&#39;s no point in entering the
sticky mode if the model#limiterElement is very, very small, becausentttt//
it would immediately set model#_isStickyToTheLimiter true and, given
model#limiterBottomOffset, the panelntttt// would be positioned before the
model#limiterElement.nttttthis._panelRect.height + this.limiterBottomOffset
&lt; limiterRect.height;ntt}nntt// Stick the panel to the top edge of the
viewport simulating CSS position:sticky.ntt// TODO: Possibly replaced by
CSS in the future <a
href="http://caniuse.com/#feat=css-sticky\n\t\tif">caniuse.com/#feat=css-stickynttif</a>
( this.isSticky ) {ntttthis._isStickyToTheLimiter =nttttlimiterRect.bottom
&lt; panelRect.height + this.limiterBottomOffset +
this.viewportTopOffset;ntttthis._hasViewportTopOffset =
!this._isStickyToTheLimiter &amp;&amp;
!!this.viewportTopOffset;ntttthis._marginLeft = this._isStickyToTheLimiter
? null : toPx( -global.window.scrollX );ntt}ntt// Detach the panel from the
top edge of the viewport.nttelse {ntttthis._isStickyToTheLimiter =
false;ntttthis._hasViewportTopOffset = false;ntttthis._marginLeft =
null;ntt}nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-ui/src/panel/sticky/stickypanelview.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module ui/toolbar/toolbarviewn */nnimport View from
&#39;../view&#39;;nimport FocusTracker from
&#39;@ckeditor/ckeditor5-utils/src/focustracker&#39;;nimport FocusCycler
from &#39;../focuscycler&#39;;nimport KeystrokeHandler from
&#39;@ckeditor/ckeditor5-utils/src/keystrokehandler&#39;;nimport
ToolbarSeparatorView from &#39;./toolbarseparatorview&#39;;nimport
preventDefault from &#39;../bindings/preventdefault.js&#39;;nimport log
from &#39;@ckeditor/ckeditor5-utils/src/log&#39;;nnimport
&#39;../../theme/components/toolbar/toolbar.css&#39;;nn/**n * The toolbar
view class.n *n * @extends module:ui/view~Viewn * @implements
module:ui/dropdown/dropdownpanelfocusable~DropdownPanelFocusablen */nexport
default class ToolbarView extends View {nt/**nt * @inheritDocnt
*/ntconstructor( locale ) {nttsuper( locale );nnttconst bind =
this.bindTemplate;nntt/**ntt * Collection of the toolbar items (like
buttons).ntt *ntt * @readonlyntt * @member
{module:ui/viewcollection~ViewCollection}ntt */nttthis.items =
this.createCollection();nntt/**ntt * Tracks information about DOM focus in
the list.ntt *ntt * @readonlyntt * @member
{module:utils/focustracker~FocusTracker}ntt */nttthis.focusTracker = new
FocusTracker();nntt/**ntt * Instance of the {@link
module:utils/keystrokehandler~KeystrokeHandler}.ntt *ntt * @readonlyntt *
@member {module:utils/keystrokehandler~KeystrokeHandler}ntt
*/nttthis.keystrokes = new KeystrokeHandler();nntt/**ntt * Controls the
orientation of toolbar items.ntt *ntt * @observablentt * @member {Boolean}
isVerticalntt */nttthis.set( &#39;isVertical&#39;, false );nntt/**ntt * An
additional CSS class added to the {@link element}.ntt *ntt * @observablentt
* @member {String} classNamentt */nttthis.set( &#39;className&#39;
);nntt/**ntt * Helps cycling over focusable {@link items} in the
toolbar.ntt *ntt * @readonlyntt * @protectedntt * @member
{module:ui/focuscycler~FocusCycler}ntt */nttthis._focusCycler = new
FocusCycler( {ntttfocusables: this.items,ntttfocusTracker:
this.focusTracker,ntttkeystrokeHandler: this.keystrokes,ntttactions:
{ntttt// Navigate toolbar items backwards using the <a
href="left,up">arrow</a> keys.nttttfocusPrevious: [ &#39;arrowleft&#39;,
&#39;arrowup&#39; ],nntttt// Navigate toolbar items forwards using the <a
href="right,down">arrow</a> keys.nttttfocusNext: [ &#39;arrowright&#39;,
&#39;arrowdown&#39; ]nttt}ntt} );nnttthis.setTemplate( {nttttag:
&#39;div&#39;,ntttattributes: {nttttclass:
[nttttt&#39;ck&#39;,nttttt&#39;ck-toolbar&#39;,ntttttbind.if(
&#39;isVertical&#39;, &#39;ck-toolbar_vertical&#39; ),ntttttbind.to(
&#39;className&#39; )ntttt]nttt},nntttchildren: this.items,nnttton:
{ntttt// <a
href="https://github.com/ckeditor/ckeditor5-ui/issues/206\n\t\t\t\tmousedown">github.com/ckeditor/ckeditor5-ui/issues/206nttttmousedown</a>:
preventDefault( this )nttt}ntt} );nt}nnt/**nt * @inheritDocnt */ntrender()
{nttsuper.render();nntt// Items added before rendering should be known to
the focusTracker.nttfor ( const item of this.items )
{ntttthis.focusTracker.add( item.element );ntt}nnttthis.items.on(
&#39;add&#39;, ( evt, item ) =&gt; {ntttthis.focusTracker.add( item.element
);ntt} );nnttthis.items.on( &#39;remove&#39;, ( evt, item ) =&gt;
{ntttthis.focusTracker.remove( item.element );ntt} );nntt// Start listening
for the keystrokes coming from element.nttthis.keystrokes.listenTo(
this.element );nt}nnt/**nt * Focuses the first focusable in {@link
items}.nt */ntfocus() {nttthis._focusCycler.focusFirst();nt}nnt/**nt *
Focuses the last focusable in {@link items}.nt */ntfocusLast()
{nttthis._focusCycler.focusLast();nt}nnt/**nt * A utility which expands a
plain toolbar configuration intont * {@link
module:ui/toolbar/toolbarview~ToolbarView#items} using a given component
factory.nt *nt * @param {Array.&lt;String&gt;} config The toolbar items
config.nt * @param {module:ui/componentfactory~ComponentFactory} factory A
factory producing toolbar items.nt */ntfillFromConfig( config, factory )
{nttconfig.map( name =&gt; {ntttif ( name == &#39;|&#39; )
{nttttthis.items.add( new ToolbarSeparatorView() );nttt} else if (
factory.has( name ) ) {nttttthis.items.add( factory.create( name ) );nttt}
else {ntttt/**ntttt * There was a problem processing the configuration of
the toolbar. The item with the givenntttt * name does not exist so it was
omitted when rendering the toolbar.ntttt *ntttt * This warning usually
shows up when the {@link module:core/plugin~Plugin} which is supposedntttt
* to provide a toolbar item has not been loaded or there is a typo in the
configuration.ntttt *ntttt * Make sure the plugin responsible for this
toolbar item is loaded and the toolbar configurationntttt * is correct,
e.g. {@link module:basic-styles/bold~Bold} is loaded for the
`&#39;bold&#39;` toolbar item.ntttt *ntttt * You can use the following
snippet to retrieve all available toolbar items:ntttt *ntttt *ttArray.from(
editor.ui.componentFactory.names() );ntttt *ntttt * @error
toolbarview-item-unavailablentttt * @param {String} name The name of the
component.ntttt */nttttlog.warn(nttttt&#39;toolbarview-item-unavailable:
The requested toolbar item is unavailable.&#39;,nttttt{ name
}ntttt);nttt}ntt} );nt}n}nnnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-ui/src/toolbar/toolbarview.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module editor-classic/classiceditoruiviewn */nnimport BoxedEditorUIView
from
&#39;@ckeditor/ckeditor5-ui/src/editorui/boxed/boxededitoruiview&#39;;nimport
InlineEditableUIView from
&#39;@ckeditor/ckeditor5-ui/src/editableui/inline/inlineeditableuiview&#39;;nimport
StickyPanelView from
&#39;@ckeditor/ckeditor5-ui/src/panel/sticky/stickypanelview&#39;;nimport
ToolbarView from
&#39;@ckeditor/ckeditor5-ui/src/toolbar/toolbarview&#39;;nnimport
&#39;../theme/classiceditor.css&#39;;nn/**n * Classic editor UI view. Uses
an inline editable and a sticky toolbar, alln * enclosed in a boxed UI
view.n *n * @extends
module:ui/editorui/boxed/boxededitoruiview~BoxedEditorUIViewn */nexport
default class ClassicEditorUIView extends BoxedEditorUIView {nt/**nt *
Creates an instance of the classic editor UI view.nt *nt * @param
{module:utils/locale~Locale} locale The {@link
module:core/editor/editor~Editor#locale} instance.nt */ntconstructor(
locale ) {nttsuper( locale );nntt/**ntt * Sticky panel view instance. This
is a parent view of a {@link toolbar}ntt * that makes toolbar sticky.ntt
*ntt * @readonlyntt * @member
{module:ui/panel/sticky/stickypanelview~StickyPanelView}ntt
*/nttthis.stickyPanel = new StickyPanelView( locale );nntt/**ntt * Toolbar
view instance.ntt *ntt * @readonlyntt * @member
{module:ui/toolbar/toolbarview~ToolbarView}ntt */nttthis.toolbar = new
ToolbarView( locale );nntt/**ntt * Editable UI view.ntt *ntt * @readonlyntt
* @member
{module:ui/editableui/inline/inlineeditableuiview~InlineEditableUIView}ntt
*/nttthis.editable = new InlineEditableUIView( locale );nt}nnt/**nt *
@inheritDocnt */ntrender() {nttsuper.render();nntt// Set toolbar as a child
of a stickyPanel and makes toolbar sticky.nttthis.stickyPanel.content.add(
this.toolbar );nnttthis.top.add( this.stickyPanel );nttthis.main.add(
this.editable );nt}nnt/**nt * @inheritDocnt */ntget editableElement()
{nttreturn this.editable.element;nt}n}nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-editor-classic/src/classiceditoruiview.jsn// module
id = nulln// module chunks = “,”/**n * @license Copyright © 2003-2018,
CKSource - Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module utils/elementreplacern */nn/**n * Utility
class allowing to hide existing HTML elements or replace them with given
ones in a way that doesn&#39;t removen * the original elements from the
DOM.n */nexport default class ElementReplacer {ntconstructor() {ntt/**ntt *
The elements replaced by {@link replace} and their replacements.ntt *ntt *
@privatentt * @member {Array.&lt;Object&gt;}ntt */nttthis._replacedElements
= [];nt}nnt/**nt * Hides the `element` and, if specified, inserts the the
given element next to it.nt *nt * The effect of this method can be reverted
by {@link restore}.nt *nt * @param {HTMLElement} element The element to
replace.nt * @param {HTMLElement} [newElement] The replacement element. If
not passed, then the `element` will just be hidden.nt */ntreplace( element,
newElement ) {nttthis._replacedElements.push( { element, newElement }
);nnttelement.style.display = &#39;none&#39;;nnttif ( newElement )
{ntttelement.parentNode.insertBefore( newElement, element.nextSibling
);ntt}nt}nnt/**nt * Restores what {@link replace} did.nt */ntrestore()
{nttthis._replacedElements.forEach( ( { element, newElement } ) =&gt;
{ntttelement.style.display = &#39;&#39;;nntttif ( newElement )
{nttttnewElement.remove();nttt}ntt} );nnttthis._replacedElements =
[];nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/elementreplacer.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module core/pluginn */nnimport ObservableMixin from
&#39;@ckeditor/ckeditor5-utils/src/observablemixin&#39;;nimport mix from
&#39;@ckeditor/ckeditor5-utils/src/mix&#39;;nn/**n * The base class for
CKEditor plugin classes.n *n * @implements
module:core/plugin~PluginInterfacen * @mixes
module:utils/observablemixin~ObservableMixinn */nexport default class
Plugin {nt/**nt * @inheritDocnt */ntconstructor( editor ) {ntt/**ntt * The
editor instance.ntt *ntt * Note that most editors implements {@link
module:core/editor/editorwithui~EditorWithUI} interface in additionntt * to
the base {@link module:core/editor/editor~Editor} interface. However,
editors with external UIntt * (i.e. Bootstrap based) or headless editor may
not implement {@link module:core/editor/editorwithui~EditorWithUI}ntt *
interface.ntt *ntt * Because of above, to make plugins more universal, it
is recommended to split features into:ntt *  - "Editing&quot; part which
use only {@link module:core/editor/editor~Editor} interface,ntt *  -
"UI&quot; part which use both {@link module:core/editor/editor~Editor}
interface andntt *  {@link module:core/editor/editorwithui~EditorWithUI}
interface.ntt *ntt * @readonlyntt * @member
{module:core/editor/editor~Editor} editorntt */nttthis.editor =
editor;nt}nnt/**nt * @inheritDocnt */ntdestroy()
{nttthis.stopListening();nt}n}nnmix( Plugin, ObservableMixin );nn/**n * The
base interface for CKEditor plugins.n *n * In its minimal form it can be a
simple function (it will be used as a constructor) which acceptsn * {@link
module:core/editor/editor~Editor the editor} as a parm.n * It can also
implement a few methods which, when present, will be used to properly
initialize and destroy the plugin.n *n *tt// A simple plugin which enables
a data processor.n *ttfunction MyPlugin( editor ) {n
*ttteditor.data.processor = new MyDataProcessor();n *tt}n *n * In most
cases, however, you&#39;ll want to inherit from the {@link
module:core/plugin~Plugin} class which implements then * {@link
module:utils/observablemixin~ObservableMixin} and is, therefore, more
convenient:n *n *ttclass MyPlugin extends Plugin {n *tttinit() {n *tttt//
`listenTo()` and `editor` are available thanks to `Plugin`.n *tttt// By
using `listenTo()` you&#39;ll ensure that the listener will be removed
whenn *tttt// the plugin is destroyed.n *ttttthis.listenTo( this.editor,
&#39;dataReady&#39;, () =&gt; {n *ttttt// Do something when data is ready.n
*tttt} );n *ttt}n *tt}n *n * @interface PluginInterfacen */nn/**n * Creates
a new plugin instance. This is the first step of a plugin initialization.n
* See also {@link init} and {@link afterInit}.n *n * A plugin is always
instantiated after its {@link module:core/plugin~PluginInterface.requires
dependencies} and then * {@link init} and {@link afterInit} methods are
called in the same order.n *n * Usually, you&#39;ll want to put your
plugin&#39;s initialization code in the {@link init} method.n * The
constructor can be understood as "before init&quot; and used in special
cases, just liken * {@link afterInit} servers for the special "after
init&quot; scenarios (e.g. code which depends on othern * plugins, but
which doesn&#39;t {@link module:core/plugin~PluginInterface.requires
explicitly require} them).n *n * @method constructorn * @param
{module:core/editor/editor~Editor} editorn */nn/**n * An array of plugins
required by this plugin.n *n * To keep a plugin class definition tight
it&#39;s recommended to define this property as a static getter:n *n
*ttimport Image from &#39;./image.js&#39;;n *n *ttexport default class
ImageCaption {n *tttstatic get requires() {n *ttttreturn [ Image ];n *ttt}n
*tt}n *n * @staticn * @readonlyn * @member
{Array.&lt;Function&gt;|undefined}
module:core/plugin~PluginInterface.requiresn */nn/**n * Optional name of
the plugin. If set, the plugin will be available inn * {@link
module:core/plugincollection~PluginCollection#get} by itsn * name and its
constructor. If not, then only by its constructor.n *n * The name should
reflect the constructor name.n *n * To keep a plugin class definition tight
it&#39;s recommended to define this property as a static getter:n *n
*ttexport default class ImageCaption {n *tttstatic get pluginName() {n
*ttttreturn &#39;ImageCaption&#39;;n *ttt}n *tt}n *n * Note: The native
`Function.name` property could not be used to keep the plugin name becausen
* it will be mangled during code minification.n *n * Naming a plugin is
necessary to enable removing it through then * {@link
module:core/editor/editorconfig~EditorConfig#removePlugins
`config.removePlugins`} option.n *n * @staticn * @readonlyn * @member
{String|undefined} module:core/plugin~PluginInterface.pluginNamen */nn/**n
* The second stage (after plugin {@link constructor}) of plugin
initialization.n * Unlike the plugin constructor this method can be
asynchronous.n *n * A plugin&#39;s `init()` method is called after its
{@link module:core/plugin~PluginInterface.requires dependencies} are
initialized,n * so in the same order as constructors of these plugins.n *n
* *<strong>Note:</strong>* This method is optional. A plugin instance does
not need to have to have it defined.n *n * @method initn * @returns
{null|Promise}n */nn/**n * The third (and last) stage of plugin
initialization. See also {@link constructor} and {@link init}.n *n *
*<strong>Note:</strong>* This method is optional. A plugin instance does
not need to have to have it defined.n *n * @method afterInitn * @returns
{null|Promise}n */nn/**n * Destroys the plugin.n *n *
*<strong>Note:</strong>* This method is optional. A plugin instance does
not need to have to have it defined.n *n * @method destroyn * @returns
{null|Promise}n */nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-core/src/plugin.jsn// module id = nulln// module chunks =
“,”/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben. All
rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
core/commandn */nnimport ObservableMixin from
&#39;@ckeditor/ckeditor5-utils/src/observablemixin&#39;;nimport mix from
&#39;@ckeditor/ckeditor5-utils/src/mix&#39;;nn/**n * The base class for
CKEditor commands.n *n * Commands are the main way to manipulate editor
contents and state. They are mostly used by UI elements (or by othern *
commands) to make changes in the model. Commands are available in every
part of code that has access ton * the {@link
module:core/editor/editor~Editor editor} instance.n *n * Instances of
registered commands can be retrieved from {@link
module:core/editor/editor~Editor#commands}.n * The easiest way to execute a
command is through {@link module:core/editor/editor~Editor#execute}.n *n *
By default commands are disabled when the editor is in {@link
module:core/editor/editor~Editor#isReadOnly read-only} mode.n *n * @mixes
module:utils/observablemixin~ObservableMixinn */nexport default class
Command {nt/**nt * Creates a new `Command` instance.nt *nt * @param
{module:core/editor/editor~Editor} editor Editor on which this command will
be used.nt */ntconstructor( editor ) {ntt/**ntt * The editor on which this
command will be used.ntt *ntt * @readonlyntt * @member
{module:core/editor/editor~Editor}ntt */nttthis.editor = editor;nntt/**ntt
* The value of a command. Concrete command class should define what it
represents.ntt *ntt * For example, the `bold` command&#39;s value is
whether the selection starts in a bolded text.ntt * And the value of the
`link` command may be an object with links details.ntt *ntt * It&#39;s
possible for a command to have no value (e.g. for stateless actions such as
`imageUpload`).ntt *ntt * @observablentt * @readonlyntt * @member valuentt
*/nttthis.set( &#39;value&#39;, undefined );nntt/**ntt * Flag indicating
whether a command is enabled or disabled.ntt * A disabled command should do
nothing when executed.ntt *ntt * @observablentt * @readonlyntt * @member
{Boolean} isEnabledntt */nttthis.set( &#39;isEnabled&#39;, false
);nnttthis.decorate( &#39;execute&#39; );nntt// By default every command is
refreshed when changes are applied to the model.nttthis.listenTo(
this.editor.model.document, &#39;change&#39;, () =&gt;
{ntttthis.refresh();ntt} );nnttthis.on( &#39;execute&#39;, evt =&gt;
{ntttif ( !this.isEnabled ) {nttttevt.stop();nttt}ntt}, { priority:
&#39;high&#39; } );nntt// By default commands are disabled when the editor
is in read-only mode.nttthis.listenTo( editor, &#39;change:isReadOnly&#39;,
( evt, name, value ) =&gt; {ntttif ( value ) {ntttt// See a ticket about
overriding observable propertiesntttt// <a
href="https://github.com/ckeditor/ckeditor5-utils/issues/171.\n\t\t\t\tthis.on">github.com/ckeditor/ckeditor5-utils/issues/171.nttttthis.on</a>(
&#39;change:isEnabled&#39;, forceDisable, { priority: &#39;lowest&#39; }
);nttttthis.isEnabled = false;nttt} else {nttttthis.off(
&#39;change:isEnabled&#39;, forceDisable );nttttthis.refresh();nttt}ntt}
);nnttfunction forceDisable() {ntttthis.isEnabled = false;ntt}nt}nnt/**nt *
Refreshes the command. The command should update its {@link isEnabled} and
{@link value} propertynt * in this method.nt *nt * This method is
automatically called whennt * {@link
module:engine/model/document~Document#event:change any changes are applied
to the document}.nt */ntrefresh() {nttthis.isEnabled = true;nt}nnt/**nt *
Executes the command.nt *nt * A command may accept parameters. They will be
passed from {@link module:core/editor/editor~Editor#execute}nt * to the
command.nt *nt * The `execute()` method will automatically abort when the
command is disabled ({@link isEnabled} is `false`).nt * This behavior is
implemented by a high priority listener to the {@link event:execute}
event.nt *nt * @fires executent */ntexecute() {}nnt/**nt * Destroys the
command.nt */ntdestroy() {nttthis.stopListening();nt}nnt/**nt * Event fired
by the {@link execute} method. The command action is a listener to this
event so it&#39;snt * possible to change/cancel the behavior of the command
by listening to this event.nt *nt * See {@link
module:utils/observablemixin~ObservableMixin.decorate} for more information
and samples.nt *nt * *<strong>Note:</strong>* This event is fired even if
command is disabled. However, it is automatically blockednt * by a high
priority listener in order to prevent command execution.nt *nt * @event
executent */n}nnmix( Command, ObservableMixin );nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-core/src/command.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module enter/entern */nnimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport EnterCommand from
&#39;./entercommand&#39;;nimport EnterObserver from
&#39;./enterobserver&#39;;nn/**n * The Enter feature. Handles the
&lt;kbd&gt;Enter&lt;/kbd&gt; and &lt;kbd&gt;Shift + Enter&lt;/kbd&gt; keys
in the editor.n *n * @extends module:core/plugin~Pluginn */nexport default
class Enter extends Plugin {nt/**nt * @inheritDocnt */ntstatic get
pluginName() {nttreturn &#39;Enter&#39;;nt}nntinit() {nttconst editor =
this.editor;nttconst view = editor.editing.view;nttconst viewDocument =
view.document;nnttview.addObserver( EnterObserver
);nntteditor.commands.add( &#39;enter&#39;, new EnterCommand( editor )
);nntt// TODO We may use the keystroke handler for that.nttthis.listenTo(
viewDocument, &#39;enter&#39;, ( evt, data ) =&gt; {nttteditor.execute(
&#39;enter&#39;
);ntttdata.preventDefault();ntttview.scrollToTheSelection();ntt}, {
priority: &#39;low&#39; } );nt}n}nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-enter/src/enter.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module typing/inputcommandn */nnimport Command from
&#39;@ckeditor/ckeditor5-core/src/command&#39;;nimport ChangeBuffer from
&#39;./changebuffer&#39;;nn/**n * The input command. Used by the {@link
module:typing/input~Input input feature} to handle typing.n *n * @extends
module:core/command~Commandn */nexport default class InputCommand extends
Command {nt/**nt * Creates an instance of the command.nt *nt * @param
{module:core/editor/editor~Editor} editornt * @param {Number} undoStepSize
The maximum number of atomic changesnt * which can be contained in one
batch in the command buffer.nt */ntconstructor( editor, undoStepSize )
{nttsuper( editor );nntt/**ntt * Typing&#39;s change buffer used to group
subsequent changes into batches.ntt *ntt * @readonlyntt * @privatentt *
@member {module:typing/changebuffer~ChangeBuffer} #_bufferntt
*/nttthis._buffer = new ChangeBuffer( editor.model, undoStepSize
);nt}nnt/**nt * The current change buffer.nt *nt * @type
{module:typing/changebuffer~ChangeBuffer}nt */ntget buffer() {nttreturn
this._buffer;nt}nnt/**nt * @inheritDocnt */ntdestroy()
{nttsuper.destroy();nnttthis._buffer.destroy();nt}nnt/**nt * Executes the
input command. It replaces the content within the given range with the
given text.nt * Replacing is a two step process, first the content within
the range is removed and then the new text is insertednt * at the beginning
of the range (which after the removal is a collapsed range).nt *nt * @fires
executent * @param {Object} [options] The command options.nt * @param
{String} [options.text=&#39;&#39;] The text to be inserted.nt * @param
{module:engine/model/range~Range} [options.range] The range in which the
text is inserted. Defaultsnt * to the first range in the current
selection.nt * @param {module:engine/model/range~Range}
[options.resultRange] The range where the selectionnt * should be placed
after the insertion. If not specified, the selection will be placed right
afternt * the inserted text.nt */ntexecute( options = {} ) {nttconst model
= this.editor.model;nttconst doc = model.document;nttconst text =
options.text || &#39;&#39;;nttconst textInsertions = text.length;nttconst
range = options.range || doc.selection.getFirstRange();nttconst resultRange
= options.resultRange;nnttmodel.enqueueChange( this._buffer.batch, writer
=&gt; {ntttconst isCollapsedRange =
range.isCollapsed;nntttthis._buffer.lock();nntttif ( !isCollapsedRange )
{nttttwriter.remove( range );nttt}nntttif ( text ) {nttttwriter.insertText(
text, doc.selection.getAttributes(), range.start );nttt}nntttif (
resultRange ) {nttttwriter.setSelection( resultRange );nttt} else if (
isCollapsedRange ) {ntttt// If range was collapsed just shift the selection
by the number of inserted characters.nttttwriter.setSelection(
range.start.getShiftedBy( textInsertions )
);nttt}nntttthis._buffer.unlock();nntttthis._buffer.input( textInsertions
);ntt} );nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-typing/src/inputcommand.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module typing/deleteobservern */nnimport Observer from
&#39;@ckeditor/ckeditor5-engine/src/view/observer/observer&#39;;nimport
DomEventData from
&#39;@ckeditor/ckeditor5-engine/src/view/observer/domeventdata&#39;;nimport
{ keyCodes } from &#39;@ckeditor/ckeditor5-utils/src/keyboard&#39;;nimport
env from &#39;@ckeditor/ckeditor5-utils/src/env&#39;;nn/**n * Delete
observer introduces the {@link
module:engine/view/document~Document#event:delete} event.n *n * @extends
module:engine/view/observer/observer~Observern */nexport default class
DeleteObserver extends Observer {ntconstructor( view ) {nttsuper( view
);nnttconst document = view.document;nttlet sequence = 0;nnttdocument.on(
&#39;keyup&#39;, ( evt, data ) =&gt; {ntttif ( data.keyCode ==
keyCodes.delete || data.keyCode == keyCodes.backspace ) {nttttsequence =
0;nttt}ntt} );nnttdocument.on( &#39;keydown&#39;, ( evt, data ) =&gt;
{ntttconst deleteData = {};nntttif ( data.keyCode == keyCodes.delete )
{nttttdeleteData.direction = &#39;forward&#39;;nttttdeleteData.unit =
&#39;character&#39;;nttt} else if ( data.keyCode == keyCodes.backspace )
{nttttdeleteData.direction = &#39;backward&#39;;nttttdeleteData.unit =
&#39;codePoint&#39;;nttt} else {nttttreturn;nttt}nntttconst hasWordModifier
= env.isMac ? data.altKey : data.ctrlKey;ntttdeleteData.unit =
hasWordModifier ? &#39;word&#39; : deleteData.unit;ntttdeleteData.sequence
= ++sequence;nnttt// Save the event object to check later if it was stopped
or not.ntttlet event;ntttdocument.once( &#39;delete&#39;, evt =&gt; ( event
= evt ), { priority: &#39;highest&#39; } );nntttdocument.fire(
&#39;delete&#39;, new DomEventData( document, data.domEvent, deleteData )
);nnttt// Stop `keydown` event if `delete` event was stopped.nttt// <a
href="https://github.com/ckeditor/ckeditor5/issues/753\n\t\t\tif">github.com/ckeditor/ckeditor5/issues/753ntttif</a>
( event &amp;&amp; event.stop.called ) {nttttevt.stop();nttt}ntt}
);nt}nnt/**nt * @inheritDocnt */ntobserve() {}n}nn/**n * Event fired when
the user tries to delete content (e.g. presses
&lt;kbd&gt;Delete&lt;/kbd&gt; or &lt;kbd&gt;Backspace&lt;/kbd&gt;).n *n *
Note: This event is fired by the {@link
module:typing/deleteobserver~DeleteObserver observer}n * (usually
registered by the {@link module:typing/delete~Delete delete feature}).n *n
* @event module:engine/view/document~Document#event:deleten * @param
{module:engine/view/observer/domeventdata~DomEventData} datan * @param
{&#39;forward&#39;|&#39;delete&#39;} data.direction The direction in which
the deletion should happen.n * @param {&#39;character&#39;|&#39;word&#39;}
data.unit The "amount&quot; of content that should be deleted.n * @param
{Number} data.sequence A number describing which subsequent delete event it
is without the key being released.n * If it&#39;s 2 or more it means that
the key was pressed and hold.n */nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-typing/src/deleteobserver.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module typing/deleten */nnimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport DeleteCommand from
&#39;./deletecommand&#39;;nimport DeleteObserver from
&#39;./deleteobserver&#39;;nn/**n * The delete and backspace feature.
Handles the &lt;kbd&gt;Delete&lt;/kbd&gt; and
&lt;kbd&gt;Backspace&lt;/kbd&gt; keys in the editor.n *n * @extends
module:core/plugin~Pluginn */nexport default class Delete extends Plugin
{nt/**nt * @inheritDocnt */ntstatic get pluginName() {nttreturn
&#39;Delete&#39;;nt}nntinit() {nttconst editor = this.editor;nttconst view
= editor.editing.view;nttconst viewDocument =
view.document;nnttview.addObserver( DeleteObserver
);nntteditor.commands.add( &#39;forwardDelete&#39;, new DeleteCommand(
editor, &#39;forward&#39; ) );ntteditor.commands.add( &#39;delete&#39;, new
DeleteCommand( editor, &#39;backward&#39; ) );nnttthis.listenTo(
viewDocument, &#39;delete&#39;, ( evt, data ) =&gt; {nttteditor.execute(
data.direction == &#39;forward&#39; ? &#39;forwardDelete&#39; :
&#39;delete&#39;, { unit: data.unit, sequence: data.sequence }
);ntttdata.preventDefault();ntttview.scrollToTheSelection();ntt}
);nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-typing/src/delete.jsn// module id = nulln// module chunks =
“,”/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben. All
rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
typing/typingn */nnimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport Input from
&#39;./input&#39;;nimport Delete from &#39;./delete&#39;;nn/**n * The
typing feature. It handles typing.n *n * @extends
module:core/plugin~Pluginn */nexport default class Typing extends Plugin
{ntstatic get requires() {nttreturn [ Input, Delete ];nt}nnt/**nt *
@inheritDocnt */ntstatic get pluginName() {nttreturn
&#39;Typing&#39;;nt}n}nn/**n * The configuration of the typing features.
Used by the features from the `@ckeditor/ckeditor5-typing` package.n *n *
Read more in {@link module:typing/typing~TypingConfig}.n *n * @member
{module:typing/typing~TypingConfig}
module:core/editor/editorconfig~EditorConfig#typingn */nn/**n * The
configuration of the typing features. Used by the typing features in
`@ckeditor/ckeditor5-typing` package.n *n *ttClassicEditorn *ttt.create(
editorElement, {n * tttttyping: … // Typing feature options.n *ttt} )n
*ttt.then( … )n *ttt.catch( … );n *n * See {@link
module:core/editor/editorconfig~EditorConfig all editor options}.n *n *
@interface TypingConfign */nn/**n * The granularity of undo/redo for typing
and deleting. The value `20` means (more or less) that a new undo stepn *
is created every 20 characters are inserted or deleted.n *n * @member
{Number} [module:typing/typing~TypingConfig#undoStep=20]n
*/nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-typing/src/typing.jsn// module id = nulln// module chunks =
“,”/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben. All
rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
undo/redocommandn */nnimport BaseCommand from
&#39;./basecommand&#39;;nimport Batch from
&#39;@ckeditor/ckeditor5-engine/src/model/batch&#39;;nn/**n * The redo
command stores {@link module:engine/model/batch~Batch batches} that were
used to undo a batch byn * {@link module:undo/undocommand~UndoCommand}. It
is able to redo a previously undone batch by reversing the undoingn *
batches created by `UndoCommand`. The reversed batch is transformed by all
the batches fromn * {@link module:engine/model/document~Document#history
history} that happened after the reversed undo batch.n *n * The redo
command also takes care of restoring the {@link
module:engine/model/document~Document#selection document selection}.n *n *
@extends module:undo/basecommand~BaseCommandn */nexport default class
RedoCommand extends BaseCommand {nt/**nt * Executes the command. This
method reverts the last {@link module:engine/model/batch~Batch batch} added
tont * the command&#39;s stack, applies the reverted and transformed
version on thent * {@link module:engine/model/document~Document document}
and removes the batch from the stack.nt * Then, it restores the {@link
module:engine/model/document~Document#selection document selection}.nt *nt
* @fires executent */ntexecute() {nttconst item =
this._stack.pop();nttconst redoingBatch = new Batch();nntt// All changes
have to be done in one `enqueueChange` callback so other listeners will
notntt// step between consecutive deltas, or won&#39;t do changes to the
document before selection is properly
restored.nttthis.editor.model.enqueueChange( redoingBatch, () =&gt;
{ntttconst lastDelta = item.batch.deltas[ item.batch.deltas.length - 1
];ntttconst nextBaseVersion = lastDelta.baseVersion +
lastDelta.operations.length;ntttconst deltas =
this.editor.model.document.history.getDeltas( nextBaseVersion
);nntttthis._restoreSelection( item.selection.ranges,
item.selection.isBackward, deltas );ntttthis._undo( item.batch,
redoingBatch );ntt} );nnttthis.refresh();nt}n}nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-undo/src/redocommand.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module undo/undoeditingn */nnimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport UndoCommand from
&#39;./undocommand&#39;;nimport RedoCommand from
&#39;./redocommand&#39;;nn/**n * The undo engine feature.n *n * Undo brings
in possibility to undo and redo changes done in the model by deltas
throughn * the {@link module:engine/model/writer~Writer Writer API}.n *n *
@extends module:core/plugin~Pluginn */nexport default class UndoEditing
extends Plugin {nt/**nt * @inheritDocnt */ntconstructor( editor )
{nttsuper( editor );nntt/**ntt * The command that manages undo {@link
module:engine/model/batch~Batch batches} stack (history).ntt * Created and
registered during the {@link init feature initialization}.ntt *ntt *
@privatentt * @member {module:undo/undocommand~UndoCommand}
#_undoCommandntt */nntt/**ntt * The command that manages redo {@link
module:engine/model/batch~Batch batches} stack (history).ntt * Created and
registered during the {@link init feature initialization}.ntt *ntt *
@privatentt * @member {module:undo/undocommand~UndoCommand}
#_redoCommandntt */nntt/**ntt * Keeps track of which batches were
registered in undo.ntt *ntt * @privatentt * @member
{WeakSet.&lt;module:engine/model/batch~Batch&gt;}ntt
*/nttthis._batchRegistry = new WeakSet();nt}nnt/**nt * @inheritDocnt
*/ntinit() {nttconst editor = this.editor;nntt// Create
commands.nttthis._undoCommand = new UndoCommand( editor
);nttthis._redoCommand = new RedoCommand( editor );nntt// Register command
to the editor.ntteditor.commands.add( &#39;undo&#39;, this._undoCommand
);ntteditor.commands.add( &#39;redo&#39;, this._redoCommand
);nnttthis.listenTo( editor.model, &#39;applyOperation&#39;, ( evt, args )
=&gt; {ntttconst operation = args[ 0 ];nnttt// Do not register batch if the
operation is not a document operation.nttt// This prevents from creating
empty undo steps, where all operations where non-document operations.nttt//
Non-document operations creates and alters content in detached tree
fragments (for example, document fragments).nttt// Most of time this is
preparing data before it is inserted into actual tree (for example during
copy &amp; paste).nttt// Such operations should not be reversed.ntttif (
!operation.isDocumentOperation ) {nttttreturn;nttt}nntttconst batch =
operation.delta.batch;nnttt// If changes are not a part of a batch or this
is not a new batch, omit those changes.ntttif ( this._batchRegistry.has(
batch ) || batch.type == &#39;transparent&#39; ) {nttttreturn;nttt} else
{nttttif ( this._redoCommand._createdBatches.has( batch ) ) {nttttt// If
this batch comes from `redoCommand`, add it to `undoCommand`
stack.ntttttthis._undoCommand.addBatch( batch );ntttt} else if (
!this._undoCommand._createdBatches.has( batch ) ) {nttttt// A default batch
- these are new changes in the document, not introduced by undo
feature.nttttt// Add them to `undoCommand` stack and clear `redoCommand`
stack.ntttttthis._undoCommand.addBatch( batch
);ntttttthis._redoCommand.clearStack();ntttt}nttt}nnttt// Add the batch to
the registry so it will not be processed again.ntttthis._batchRegistry.add(
batch );ntt}, { priority: &#39;highest&#39; } );nnttthis.listenTo(
this._undoCommand, &#39;revert&#39;, ( evt, undoneBatch, undoingBatch )
=&gt; {ntttthis._redoCommand.addBatch( undoingBatch );ntt}
);nntteditor.keystrokes.set( &#39;CTRL+Z&#39;, &#39;undo&#39;
);ntteditor.keystrokes.set( &#39;CTRL+Y&#39;, &#39;redo&#39;
);ntteditor.keystrokes.set( &#39;CTRL+SHIFT+Z&#39;, &#39;redo&#39;
);nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-undo/src/undoediting.jsn// module id = nulln// module chunks =
“,”/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben. All
rights reserved.n * For licensing, see LICENSE.md.n */nn/* global DOMParser
*/nn/**n * @module ui/icon/iconviewn */nnimport View from
&#39;../view&#39;;nnimport
&#39;../../theme/components/icon/icon.css&#39;;nn/**n * The icon view
class.n *n * @extends module:ui/view~Viewn */nexport default class IconView
extends View {nt/**nt * @inheritDocnt */ntconstructor()
{nttsuper();nnttconst bind = this.bindTemplate;nntt/**ntt * The SVG source
of the icon.ntt *ntt * @observablentt * @member {String} contentntt
*/nttthis.set( &#39;content&#39;, &#39;&#39; );nntt/**ntt * This attribute
specifies the boundaries to which thentt * icon content should stretch.ntt
*ntt * @observablentt * @default &#39;0 0 20 20&#39;ntt * @member {String}
viewBoxntt */nttthis.set( &#39;viewBox&#39;, &#39;0 0 20 20&#39;
);nntt/**ntt * The fill color of the child `path.ck-icon__fill`.ntt *ntt *
@observablentt * @default &#39;&#39;ntt * @member {String} fillColorntt
*/nttthis.set( &#39;fillColor&#39;, &#39;&#39; );nnttthis.setTemplate(
{nttttag: &#39;svg&#39;,ntttns: &#39;<a
href="http://www.w3.org/2000/svg',\n\t\t\tattributes">www.w3.org/2000/svg’,ntttattributes</a>:
{nttttclass:
[nttttt&#39;ck&#39;,nttttt&#39;ck-icon&#39;ntttt],nttttviewBox: bind.to(
&#39;viewBox&#39; )nttt}ntt} );nt}nnt/**nt * @inheritDocnt */ntrender()
{nttsuper.render();nnttthis._updateXMLContent();nttthis._colorFillPaths();nntt//
This is a hack for lack of innerHTML binding.ntt// See: <a
href="https://github.com/ckeditor/ckeditor5-ui/issues/99.\n\t\tthis.on">github.com/ckeditor/ckeditor5-ui/issues/99.nttthis.on</a>(
&#39;change:content&#39;, () =&gt;
{ntttthis._updateXMLContent();ntttthis._colorFillPaths();ntt}
);nnttthis.on( &#39;change:fillColor&#39;, () =&gt;
{ntttthis._colorFillPaths();ntt} );nt}nnt/**nt * Updates the {@link
element} with the value of {@link content}.nt *nt * @privatent
*/nt_updateXMLContent() {nttif ( this.content ) {ntttconst parsed = new
DOMParser().parseFromString( this.content.trim(), &#39;image/svg+xml&#39;
);ntttconst svg = parsed.querySelector( &#39;svg&#39; );ntttconst viewBox =
svg.getAttribute( &#39;viewBox&#39; );nntttif ( viewBox )
{nttttthis.viewBox = viewBox;nttt}nntttthis.element.innerHTML =
&#39;&#39;;nntttwhile ( svg.childNodes.length &gt; 0 )
{nttttthis.element.appendChild( svg.childNodes[ 0 ] );nttt}ntt}nt}nnt/**nt
* Fills all child `path.ck-icon__fill` with the `#fillColor`.nt *nt *
@privatent */nt_colorFillPaths() {nttif ( this.fillColor )
{ntttthis.element.querySelectorAll( &#39;.ck-icon__fill&#39; ).forEach(
path =&gt; {nttttpath.style.fill = this.fillColor;nttt}
);ntt}nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-ui/src/icon/iconview.jsn// module id = nulln// module chunks =
“,”/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben. All
rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
ui/tooltip/tooltipviewn */nnimport View from &#39;../view&#39;;nnimport
&#39;../../theme/components/tooltip/tooltip.css&#39;;nn/**n * The tooltip
view class.n *n * @extends module:ui/view~Viewn */nexport default class
TooltipView extends View {nt/**nt * @inheritDocnt */ntconstructor( locale )
{nttsuper( locale );nntt/**ntt * The text of the tooltip visible to the
user.ntt *ntt * @observablentt * @member {String} textntt */nttthis.set(
&#39;text&#39;, &#39;&#39; );nntt/**ntt * The position of the tooltip
(south or north).ntt *ntt *tt+———–+ntt *tt|   north   |ntt *tt+———–+ntt *tt
Vntt *tt  [element]ntt *ntt *tt  [element]ntt *tt      ^ntt *tt+———–+ntt
*tt|   south   |ntt *tt+———–+ntt *ntt * @observablentt * @default
&#39;s&#39;ntt * @member {&#39;s&#39;|&#39;n&#39;} positionntt
*/nttthis.set( &#39;position&#39;, &#39;s&#39; );nnttconst bind =
this.bindTemplate;nnttthis.setTemplate( {nttttag:
&#39;span&#39;,ntttattributes: {nttttclass:
[nttttt&#39;ck&#39;,nttttt&#39;ck-tooltip&#39;,ntttttbind.to(
&#39;position&#39;, position =&gt; &#39;ck-tooltip_&#39; + position
),ntttttbind.if( &#39;text&#39;, &#39;ck-hidden&#39;, value =&gt;
!value.trim() )ntttt]nttt},ntttchildren: [ntttt{nttttttag:
&#39;span&#39;,nntttttattributes: {nttttttclass:
[nttttttt&#39;ck&#39;,nttttttt&#39;ck-tooltip__text&#39;ntttttt]nttttt},nntttttchildren:
[ntttttt{nttttttttext: bind.to( &#39;text&#39;
),ntttttt}nttttt]ntttt}nttt]ntt} );nt}n}nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-ui/src/tooltip/tooltipview.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module ui/button/buttonviewn */nnimport View from
&#39;../view&#39;;nimport IconView from &#39;../icon/iconview&#39;;nimport
TooltipView from &#39;../tooltip/tooltipview&#39;;nnimport {
getEnvKeystrokeText } from
&#39;@ckeditor/ckeditor5-utils/src/keyboard&#39;;nnimport
&#39;../../theme/components/button/button.css&#39;;nn/**n * The button view
class.n *n *ttconst view = new ButtonView();n *n *ttview.set( {n *tttlabel:
&#39;A button&#39;,n *tttkeystroke: &#39;Ctrl+B&#39;,n *ttttooltip: true,n
*tttwithText: truen *tt} );n *n *ttview.render();n *n
*ttdocument.body.append( view.element );n *n * @extends
module:ui/view~Viewn * @implements module:ui/button/button~Buttonn
*/nexport default class ButtonView extends View {nt/**nt * @inheritDocnt
*/ntconstructor( locale ) {nttsuper( locale );nnttconst bind =
this.bindTemplate;nntt// Implement the Button interface.nttthis.set(
&#39;icon&#39; );nttthis.set( &#39;isEnabled&#39;, true );nttthis.set(
&#39;isOn&#39;, false );nttthis.set( &#39;isVisible&#39;, true
);nttthis.set( &#39;keystroke&#39; );nttthis.set( &#39;label&#39;
);nttthis.set( &#39;tabindex&#39;, -1 );nttthis.set( &#39;tooltip&#39;
);nttthis.set( &#39;tooltipPosition&#39;, &#39;s&#39; );nttthis.set(
&#39;type&#39;, &#39;button&#39; );nttthis.set( &#39;withText&#39;, false
);nntt/**ntt * Collection of the child views inside of the button {@link
element}.ntt *ntt * @readonlyntt * @member
{module:ui/viewcollection~ViewCollection}ntt */nttthis.children =
this.createCollection();nntt/**ntt * Tooltip of the button view. It is
configurable using the {@link tooltip tooltip attribute}.ntt *ntt *
@readonlyntt * @member {module:ui/tooltip/tooltipview~TooltipView}
tooltipViewntt */nttthis.tooltipView = this._createTooltipView();nntt/**ntt
* Label of the button view. It is configurable using the {@link label label
attribute}.ntt *ntt * @readonlyntt * @member {module:ui/view~View}
labelViewntt */nttthis.labelView = this._createLabelView();nntt/**ntt * The
icon view of the button. Will be added to {@link children} when thentt *
{@link icon icon attribute} is defined.ntt *ntt * @readonlyntt * @member
{module:ui/icon/iconview~IconView} iconViewntt */nttthis.iconView = new
IconView();nnttthis.iconView.extendTemplate( {ntttattributes: {nttttclass:
&#39;ck-button__icon&#39;nttt}ntt} );nntt/**ntt * Tooltip of the button
bound to the template.ntt *ntt * @see tooltipntt * @see
#_getTooltipStringntt * @privatentt * @observablentt * @member {Boolean}
#_tooltipStringntt */nttthis.bind( &#39;_tooltipString&#39; ).to(ntttthis,
&#39;tooltip&#39;,ntttthis, &#39;label&#39;,ntttthis,
&#39;keystroke&#39;,ntttthis._getTooltipString.bind( this
)ntt);nnttthis.setTemplate( {nttttag: &#39;button&#39;,nntttattributes:
{nttttclass: [nttttt&#39;ck&#39;,nttttt&#39;ck-button&#39;,ntttttbind.to(
&#39;isEnabled&#39;, value =&gt; value ? &#39;ck-enabled&#39; :
&#39;ck-disabled&#39; ),ntttttbind.if( &#39;isVisible&#39;,
&#39;ck-hidden&#39;, value =&gt; !value ),ntttttbind.to( &#39;isOn&#39;,
value =&gt; value ? &#39;ck-on&#39; : &#39;ck-off&#39; ),ntttttbind.if(
&#39;withText&#39;, &#39;ck-button_with-text&#39; )ntttt],ntttttype:
bind.to( &#39;type&#39;, value =&gt; value ? value : &#39;button&#39;
),ntttttabindex: bind.to( &#39;tabindex&#39; )nttt},nntttchildren:
this.children,nnttton: {nttttmousedown: bind.to( evt =&gt;
{ntttttevt.preventDefault();ntttt} ),nnttttclick: bind.to( evt =&gt;
{nttttt// We can&#39;t make the button disabled using the disabled
attribute, because it won&#39;t be focusable.nttttt// Though, shouldn&#39;t
this condition be moved to the button controller?ntttttif ( this.isEnabled
) {nttttttthis.fire( &#39;execute&#39; );nttttt} else {ntttttt// Prevent
the default when button is disabled, to block e.g.ntttttt// automatic form
submitting. See
ckeditor/ckeditor5-link#74.nttttttevt.preventDefault();nttttt}ntttt}
)nttt}ntt} );nt}nnt/**nt * @inheritDocnt */ntrender()
{nttsuper.render();nnttif ( this.icon ) {ntttthis.iconView.bind(
&#39;content&#39; ).to( this, &#39;icon&#39; );ntttthis.children.add(
this.iconView );ntt}nnttthis.children.add( this.tooltipView
);nttthis.children.add( this.labelView );nt}nnt/**nt * Focuses the {@link
element} of the button.nt */ntfocus() {nttthis.element.focus();nt}nnt/**nt
* Creates a {@link module:ui/tooltip/tooltipview~TooltipView} instance and
binds it with buttonnt * attributes.nt *nt * @privatent * @returns
{module:ui/tooltip/tooltipview~TooltipView}nt */nt_createTooltipView()
{nttconst tooltipView = new TooltipView();nntttooltipView.bind(
&#39;text&#39; ).to( this, &#39;_tooltipString&#39; );ntttooltipView.bind(
&#39;position&#39; ).to( this, &#39;tooltipPosition&#39; );nnttreturn
tooltipView;nt}nnt/**nt * Creates a label view instance and binds it with
button attributes.nt *nt * @privatent * @returns {module:ui/view~View}nt
*/nt_createLabelView() {nttconst labelView = new
View();nnttlabelView.setTemplate( {nttttag: &#39;span&#39;,nntttattributes:
{nttttclass:
[nttttt&#39;ck&#39;,nttttt&#39;ck-button__label&#39;ntttt]nttt},nntttchildren:
[ntttt{nttttttext: this.bindTemplate.to( &#39;label&#39; )ntttt}nttt]ntt}
);nnttreturn labelView;nt}nnt/**nt * Gets the text for the {@link
tooltipView} from the combination ofnt * {@link tooltip}, {@link label} and
{@link keystroke} attributes.nt *nt * @privatent * @see tooltipnt * @see
#_tooltipStringnt * @param {Boolean|String|Function} tooltip Button
tooltip.nt * @param {String} label Button label.nt * @param {String}
keystroke Button keystroke.nt * @returns {String}nt */nt_getTooltipString(
tooltip, label, keystroke ) {nttif ( tooltip ) {ntttif ( typeof tooltip ==
&#39;string&#39; ) {nttttreturn tooltip;nttt} else {nttttif ( keystroke )
{ntttttkeystroke = getEnvKeystrokeText( keystroke );ntttt}nnttttif (
tooltip instanceof Function ) {ntttttreturn tooltip( label, keystroke
);ntttt} else {ntttttreturn `${ label }${ keystroke ? ` (${ keystroke })` :
&#39;&#39; }`;ntttt}nttt}ntt}nnttreturn
&#39;&#39;;nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-ui/src/button/buttonview.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */n/**n *
@module undo/undouin */nimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport ButtonView from
&#39;@ckeditor/ckeditor5-ui/src/button/buttonview&#39;;nimport undoIcon
from &#39;../theme/icons/undo.svg&#39;;nimport redoIcon from
&#39;../theme/icons/redo.svg&#39;;n/**n * The undo UI feature. It
introduces the Undo and Redo buttons to the editor.n *n * @extends
module:core/plugin~Pluginn */nexport default class UndoUI extends Plugin {n
/**nt * @inheritDocnt */n    init() {n        const editor = this.editor;n 
const t = editor.t;n        this._addButton(&#39;undo&#39;,
t(&#39;ad&#39;), &#39;CTRL+Z&#39;, undoIcon);n       
this._addButton(&#39;redo&#39;, t(&#39;ae&#39;), &#39;CTRL+Y&#39;,
redoIcon);n    }n    /**nt * Creates a button for the specified command.nt
*nt * @privatent * @param {String} name Command name.nt * @param {String}
label Button label.nt * @param {String} keystroke Command keystroke.nt *
@param {String} Icon Source of the icon.nt */n    _addButton(name, label,
keystroke, Icon) {n        const editor = this.editor;n       
editor.ui.componentFactory.add(name, locale =&gt; {n            const
command = editor.commands.get(name);n            const view = new
ButtonView(locale);n            view.set({n                label,n         
icon: Icon,n                keystroke,n                tooltip: truen      
});n            view.bind(&#39;isEnabled&#39;).to(command,
&#39;isEnabled&#39;);n            this.listenTo(view, &#39;execute&#39;, ()
=&gt; editor.execute(name));n            return view;n        });n   
}n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-undo/src/undoui.jsn// module id = nulln// module chunks =
“,”/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben. All
rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
undo/undon */nnimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport UndoEditing from
&#39;./undoediting&#39;;nimport UndoUI from &#39;./undoui&#39;;nn/**n * The
undo feature.n *n * It loads the {@link module:undo/undoediting~UndoEditing
undo editing feature}n * and {@link module:undo/undoui~UndoUI undo UI
feature}.n *n * Below is the explanation of the undo mechanism working
together with {@link module:engine/model/history~History History}:n *n *
Whenever a {@link module:engine/model/delta/delta~Delta delta} is applied
to then * {@link module:engine/model/document~Document document}, it is
saved to `History` as is.n * The {@link module:engine/model/batch~Batch
batch} that owns that delta is also saved, inn * {@link
module:undo/undocommand~UndoCommand}, together with the selection that was
present in the document before then * delta was applied. A batch is saved
instead of the delta because changes are undone batch-by-batch, not
delta-by-deltan * and a batch is seen as one undo step.n *n * After some
changes happen to the document, the `History` and `UndoCommand` stack can
be represented as follows:n *n *tt  <a
href="../../../../History.html">History</a>                           Undo
stackn *tt===========             ==================================n
*tt[delta A1]                          [batch A]n *tt[delta B1]            
[batch B]n *tt[delta B2]                          [batch C]n *tt[delta C1]n
*tt[delta C2]n *tt[delta B3]n *tt[delta C3]n *n * Where deltas starting
with the same letter are from same batch.n *n * Undoing a batch means that
a set of deltas which will reverse the effects of that batch needs to be
generated. For example, if a batchn * added several letters, undoing the
batch should remove them. It is important to apply undoing deltas in the
reversed order,n * so if a batch has delta `X`, `Y`, `Z`, reversed deltas
`Zr`, `Yr` and `Xr` need to be applied. Otherwise reversed deltan * `Xr`
would operate on a wrong document state, because delta `X` does not know
that deltas `Y` and `Z` happened.n *n * After deltas from an undone batch
got {@link module:engine/model/delta/delta~Delta#getReversed reversed},n *
one needs to make sure if they are ready to be applied. In the scenario
above, delta `C3` is the last delta and `C3r`n * bases on up-to-date
document state, so it can be applied to the document.n *n *tt  <a
href="../../../../History.html">History</a>                           Undo
stackn *tt=============             ==================================n
*tt[ delta A1  ]                      [  batch A  ]n *tt[ delta B1  ]      
[  batch B  ]n *tt[ delta B2  ]             [   processing undoing batch C 
]n *tt[ delta C1  ]n *tt[ delta C2  ]n *tt[ delta B3  ]n *tt[ delta C3  ]n
*tt[ delta C3r ]n *n * Next is delta `C2`, reversed to `C2r`. `C2r` bases
on `C2`, so it bases on the wrong document state. It needs to ben *
transformed by deltas from history that happened after it, so it
"knows&quot; about them. Let us assume that `C2&#39; = C2r * B3 * C3 *
C3r`,n * where `*` means "transformed by&quot;. Rest of deltas from that
batch are processed in the same fashion.n *n *tt  <a
href="../../../../History.html">History</a>                           Undo
stack                                     Redo stackn *tt=============     
==================================            
==================================n *tt[ delta A1  ]                      [
batch A  ]                                  [ batch Cr ]n *tt[ delta B1  ] 
[  batch B  ]n *tt[ delta B2  ]n *tt[ delta C1  ]n *tt[ delta C2  ]n *tt[
delta B3  ]n *tt[ delta C3  ]n *tt[ delta C3r ]n *tt[ delta C2&#39; ]n *tt[
delta C1&#39; ]n *n * Selective undo works on the same basis, however,
instead of undoing the last batch in the undo stack, any batch can be
undone.n * The same algorithm applies: deltas from a batch (i.e. `A1`) are
reversed and then transformed by deltas stored in history.n *n * Redo also
is very similar to undo. It has its own stack that is filled with undoing
(reversed batches). Deltas fromn * batch that is re-done are reversed-back,
transformed in proper order and applied to the document.n *n *tt  <a
href="../../../../History.html">History</a>                           Undo
stack                                     Redo stackn *tt=============     
==================================            
==================================n *tt[ delta A1  ]                      [
batch A  ]n *tt[ delta B1  ]                      [  batch B  ]n *tt[ delta
B2  ]                      [ batch Crr ]n *tt[ delta C1  ]n *tt[ delta C2 
]n *tt[ delta B3  ]n *tt[ delta C3  ]n *tt[ delta C3r ]n *tt[ delta C2&#39;
]n *tt[ delta C1&#39; ]n *tt[ delta C1&#39;r]n *tt[ delta C2&#39;r]n *tt[
delta C3rr]n *n * @extends module:core/plugin~Pluginn */nexport default
class Undo extends Plugin {nt/**nt * @inheritDocnt */ntstatic get
requires() {nttreturn [ UndoEditing, UndoUI ];nt}nnt/**nt * @inheritDocnt
*/ntstatic get pluginName() {nttreturn
&#39;Undo&#39;;nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-undo/src/undo.jsn// module id = nulln// module chunks =
“,”/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben. All
rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
essentials/essentialsn */nnimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nnimport Clipboard from
&#39;@ckeditor/ckeditor5-clipboard/src/clipboard&#39;;nimport Enter from
&#39;@ckeditor/ckeditor5-enter/src/enter&#39;;nimport Typing from
&#39;@ckeditor/ckeditor5-typing/src/typing&#39;;nimport Undo from
&#39;@ckeditor/ckeditor5-undo/src/undo&#39;;nn/**n * A plugin including all
essential editing features. It represents a set of features that enables
similar functionalitiesn * to a `&lt;textarea&gt;` element.n *n * It
includes:n *n * * {@link module:clipboard/clipboard~Clipboard},n * * {@link
module:enter/enter~Enter},n * * {@link module:typing/typing~Typing},n * *
{@link module:undo/undo~Undo}.n *n * This plugin set does not define any
block-level containers (such as {@link
module:paragraph/paragraph~Paragraph}).n * If your editor is supposed to
handle block content, make sure to include it.n *n * @extends
module:core/plugin~Pluginn */nexport default class Essentials extends
Plugin {nt/**nt * @inheritDocnt */ntstatic get requires() {nttreturn [
Clipboard, Enter, Typing, Undo ];nt}nnt/**nt * @inheritDocnt */ntstatic get
pluginName() {nttreturn &#39;Essentials&#39;;nt}n}nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-essentials/src/essentials.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module upload/filereadern */nn/* globals window
*/nnimport ObservableMixin from
&#39;@ckeditor/ckeditor5-utils/src/observablemixin&#39;;nimport mix from
&#39;@ckeditor/ckeditor5-utils/src/mix&#39;;nn/**n * FileReader class -
wrapper over native FileReader.n */nexport default class FileReader
{nt/**nt * Creates an instance of the FileReader.nt */ntconstructor()
{nttconst reader = new window.FileReader();nntt/**ntt * Instance of native
FileReader.ntt *ntt * @privatentt * @member {FileReader} #_readerntt
*/nttthis._reader = reader;nntt/**ntt * Number of bytes loaded.ntt *ntt *
@readonlyntt * @observablentt * @member {Number} loadedntt */nttthis.set(
&#39;loaded&#39;, 0 );nnttreader.onprogress = evt =&gt; {ntttthis.loaded =
evt.loaded;ntt};nt}nnt/**nt * Returns error that occurred during file
reading.nt *nt * @returns {Error}nt */ntget error() {nttreturn
this._reader.error;nt}nnt/**nt * Reads provided file.nt *nt * @param {File}
file Native File object.nt * @returns {Promise} Returns a promise that will
resolve with file&#39;s contents. Promise can be rejected in case ofnt *
error or when reading process is aborted.nt */ntread( file ) {nttconst
reader = this._reader;nttthis.total = file.size;nnttreturn new Promise( (
resolve, reject ) =&gt; {ntttreader.onload = () =&gt; {nttttresolve(
reader.result );nttt};nntttreader.onerror = () =&gt; {nttttreject(
&#39;error&#39; );nttt};nntttreader.onabort = () =&gt; {nttttreject(
&#39;aborted&#39; );nttt};nntttthis._reader.readAsDataURL( file );ntt}
);nt}nnt/**nt * Aborts file reader.nt */ntabort()
{nttthis._reader.abort();nt}n}nnmix( FileReader, ObservableMixin
);nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-upload/src/filereader.jsn// module id = nulln// module chunks
= “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben.
All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
upload/filerepositoryn */nnimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nnimport CKEditorError from
&#39;@ckeditor/ckeditor5-utils/src/ckeditorerror&#39;;nimport
ObservableMixin from
&#39;@ckeditor/ckeditor5-utils/src/observablemixin&#39;;nimport Collection
from &#39;@ckeditor/ckeditor5-utils/src/collection&#39;;nimport mix from
&#39;@ckeditor/ckeditor5-utils/src/mix&#39;;nimport log from
&#39;@ckeditor/ckeditor5-utils/src/log&#39;;nnimport FileReader from
&#39;./filereader.js&#39;;nnimport uid from
&#39;@ckeditor/ckeditor5-utils/src/uid.js&#39;;nn/**n * File repository
plugin. A central point for managing file upload.n *n * To use it, first
you need an upload adapter. Upload adapter&#39;s job is to handle
communication with the servern * (sending the file and handling
server&#39;s response). You can use one of the existing plugins introducing
upload adaptersn * (e.g. {@link
module:easy-image/cloudservicesuploadadapter~CloudServicesUploadAdapter}
orn * {@link module:adapter-ckfinder/uploadadapter~CKFinderUploadAdapter})
or write your own onen * (which boils down to setting the {@link
~FileRepository#createUploadAdapter} factory function – seen * {@link
module:upload/filerepository~UploadAdapter `UploadAdapter` interface}
documentation).n *n * Then, you can use {@link
module:upload/filerepository~FileRepository#createLoader `createLoader()`}
and the returnedn * {@link module:upload/filerepository~FileLoader}
instance to load and upload files.n *n * @extends
module:core/plugin~Pluginn */nexport default class FileRepository extends
Plugin {nt/**nt * @inheritDocnt */ntstatic get pluginName() {nttreturn
&#39;FileRepository&#39;;nt}nnt/**nt * @inheritDocnt */ntinit() {ntt/**ntt
* Collection of loaders associated with this repository.ntt *ntt * @member
{module:utils/collection~Collection} loadersntt */nttthis.loaders = new
Collection();nntt/**ntt * A factory function which should be defined before
using `FileRepository`.ntt *ntt * It should return a new instance of {@link
module:upload/filerepository~UploadAdapter} that will be used to upload
files.ntt * {@link module:upload/filerepository~FileLoader} instance
associated with the adapterntt * will be passed to that function.ntt *ntt *
For more information and example see {@link
module:upload/filerepository~UploadAdapter}.ntt *ntt * @member {Function}
createUploadAdapterntt */nntt/**ntt * Number of bytes uploaded.ntt *ntt *
@readonlyntt * @observablentt * @member {Number} uploadedntt */nttthis.set(
&#39;uploaded&#39;, 0 );nntt/**ntt * Number of total bytes to upload.ntt
*ntt * It might be different than the file size because of headers and
additional data.ntt * It contains `null` if value is not available yet, so
it&#39;s better to use {@link uploadedPercent} to monitorntt * the
progress.ntt *ntt * @readonlyntt * @observablentt * @member {Number|null}
uploadTotalntt */nttthis.set( &#39;uploadTotal&#39;, null );nntt/**ntt *
Upload progress in percents.ntt *ntt * @readonlyntt * @observablentt *
@member {Number} uploadedPercentntt */nttthis.bind(
&#39;uploadedPercent&#39; ).to( this, &#39;uploaded&#39;, this,
&#39;uploadTotal&#39;, ( uploaded, total ) =&gt; {ntttreturn total ? (
uploaded / total * 100 ) : 0;ntt} );nt}nnt/**nt * Returns the loader
associated with specified file.nt *nt * To get loader by id use
`fileRepository.loaders.get( id )`.nt *nt * @param {File} file Native file
handle.nt * @returns {module:upload/filerepository~FileLoader|null}nt
*/ntgetLoader( file ) {nttfor ( const loader of this.loaders ) {ntttif (
loader.file == file ) {nttttreturn loader;nttt}ntt}nnttreturn
null;nt}nnt/**nt * Creates a loader instance for the given file.nt *nt *
Requires {@link createUploadAdapter} factory to be defined.nt *nt * @param
{File} file Native File object.nt * @returns
{module:upload/filerepository~FileLoader|null}nt */ntcreateLoader( file )
{nttif ( !this.createUploadAdapter ) {nttt/**nttt * You need to enable an
upload adapter in order to be able to upload files.nttt *nttt * This
warning shows up when {@link module:upload/filerepository~FileRepository}
is being usednttt * without {@link createUploadAdapter definining an upload
adapter}.nttt *nttt * **If you see this warning when using one of the
{@glink builds/index CKEditor 5 Builds}**nttt * it means that you did not
configure any of the upload adapters available by default in those
builds.nttt * See:nttt *nttt * * {@link
module:core/editor/editorconfig~EditorConfig#cloudServices
`config.cloudServices`} fornttt * Easy Image with Cloud Services
integration,nttt * * {@link
module:core/editor/editorconfig~EditorConfig#ckfinder `config.ckfinder`}
for CKFindernttt * file upload integration.nttt *nttt * **If you see this
warning when using a custom build** there is a chance that you enablednttt
* a feature like {@link module:image/imageupload~ImageUpload},nttt * or
{@link module:image/imageupload/imageuploadui~ImageUploadUI} but you did
not enable any upload adapter.nttt * You can choose one of the existing
upload adapters:nttt *nttt * * {@link
module:easy-image/cloudservicesuploadadapter~CloudServicesUploadAdapter}nttt
* (remember to {@link
module:core/editor/editorconfig~EditorConfig#cloudServices configure
it})nttt * * {@link
module:adapter-ckfinder/uploadadapter~CKFinderUploadAdapter}nttt *
(remember to {@link module:core/editor/editorconfig~EditorConfig#ckfinder
configure it})nttt *nttt * You can also implement your own upload adapter
(in which case, please refernttt * to the {@link
module:upload/filerepository~UploadAdapter `UploadAdapter` interface}
documentation).nttt *nttt * @error filerepository-no-upload-adapternttt
*/ntttlog.error( &#39;filerepository-no-upload-adapter: Upload adapter is
not defined.&#39; );nntttreturn null;ntt}nnttconst loader = new FileLoader(
file );nttloader._adapter = this.createUploadAdapter( loader
);nnttthis.loaders.add( loader );nnttloader.on( &#39;change:uploaded&#39;,
() =&gt; {ntttlet aggregatedUploaded = 0;nntttfor ( const loader of
this.loaders ) {nttttaggregatedUploaded +=
loader.uploaded;nttt}nntttthis.uploaded = aggregatedUploaded;ntt}
);nnttloader.on( &#39;change:uploadTotal&#39;, () =&gt; {ntttlet
aggregatedTotal = 0;nntttfor ( const loader of this.loaders ) {nttttif (
loader.uploadTotal ) {ntttttaggregatedTotal +=
loader.uploadTotal;ntttt}nttt}nntttthis.uploadTotal = aggregatedTotal;ntt}
);nnttreturn loader;nt}nnt/**nt * Destroys the given loader.nt *nt * @param
{File|module:upload/filerepository~FileLoader} fileOrLoader File associated
with that loader or loadernt * itself.nt */ntdestroyLoader( fileOrLoader )
{nttconst loader = fileOrLoader instanceof FileLoader ? fileOrLoader :
this.getLoader( fileOrLoader
);nnttloader._destroy();nnttthis.loaders.remove( loader );nt}n}nnmix(
FileRepository, ObservableMixin );nn/**n * File loader class.n * It is used
to control the process of file reading and uploading using specified
adapter.n */nclass FileLoader {nt/**nt * Creates a new instance of
`FileLoader`.nt *nt * @param {File} file A native file instance.nt * @param
{module:upload/filerepository~UploadAdapter} adapternt */ntconstructor(
file, adapter ) {ntt/**ntt * Unique id of FileLoader instance.ntt *ntt *
@readonlyntt * @member {Number}ntt */nttthis.id = uid();nntt/**ntt * A
`File` instance associated with this file loader.ntt *ntt * @readonlyntt *
@member {File}ntt */nttthis.file = file;nntt/**ntt * Adapter instance
associated with this file loader.ntt *ntt * @privatentt * @member
{module:upload/filerepository~UploadAdapter}ntt */nttthis._adapter =
adapter;nntt/**ntt * FileReader used by FileLoader.ntt *ntt * @protectedntt
* @member {module:upload/filereader~FileReader}ntt */nttthis._reader = new
FileReader();nntt/**ntt * Current status of FileLoader. It can be one of
the following:ntt *ntt * * &#39;idle&#39;,ntt * * &#39;reading&#39;,ntt * *
&#39;uploading&#39;,ntt * * &#39;aborted&#39;,ntt * * &#39;error&#39;.ntt
*ntt * When reading status can change in a following way:ntt *ntt * `idle`
-&gt; `reading` -&gt; `idle`ntt * `idle` -&gt; `reading -&gt; `aborted`ntt
* `idle` -&gt; `reading -&gt; `error`ntt *ntt * When uploading status can
change in a following way:ntt *ntt * `idle` -&gt; `uploading` -&gt;
`idle`ntt * `idle` -&gt; `uploading` -&gt; `aborted`ntt * `idle` -&gt;
`uploading` -&gt; `error`ntt *ntt * @readonlyntt * @observablentt * @member
{String} statusntt */nttthis.set( &#39;status&#39;, &#39;idle&#39;
);nntt/**ntt * Number of bytes uploaded.ntt *ntt * @readonlyntt *
@observablentt * @member {Number} uploadedntt */nttthis.set(
&#39;uploaded&#39;, 0 );nntt/**ntt * Number of total bytes to upload.ntt
*ntt * @readonlyntt * @observablentt * @member {Number|null} uploadTotalntt
*/nttthis.set( &#39;uploadTotal&#39;, null );nntt/**ntt * Upload progress
in percents.ntt *ntt * @readonlyntt * @observablentt * @member {Number}
uploadedPercentntt */nttthis.bind( &#39;uploadedPercent&#39; ).to( this,
&#39;uploaded&#39;, this, &#39;uploadTotal&#39;, ( uploaded, total ) =&gt;
{ntttreturn total ? ( uploaded / total * 100 ) : 0;ntt} );nntt/**ntt *
Response of the upload.ntt *ntt * @readonlyntt * @observablentt * @member
{Object|null} uploadResponsentt */nttthis.set( &#39;uploadResponse&#39;,
null );nt}nnt/**nt * Reads file using {@link
module:upload/filereader~FileReader}.nt *nt * Throws {@link
module:utils/ckeditorerror~CKEditorError CKEditorError}
`filerepository-read-wrong-status` when statusnt * is different than
`idle`.nt *nt * Example usage:nt *nt *tfileLoader.read()nt *tt.then( data
=&gt; { … } )nt *tt.catch( err =&gt; {nt *tttif ( err === &#39;aborted&#39;
) {nt *ttttconsole.log( &#39;Reading aborted.&#39; );nt *ttt} else {nt
*ttttconsole.log( &#39;Reading error.&#39;, err );nt *ttt}nt *tt} );nt *nt
* @returns {Promise} Returns promise that will be resolved with read data.
Promise will be rejected if errornt * occurs or if read process is
aborted.nt */ntread() {nttif ( this.status != &#39;idle&#39; ) {ntttthrow
new CKEditorError( &#39;filerepository-read-wrong-status: You cannot call
read if the status is different than idle.&#39; );ntt}nnttthis.status =
&#39;reading&#39;;nnttreturn this._reader.read( this.file )nttt.then( data
=&gt; {nttttthis.status = &#39;idle&#39;;nnttttreturn data;nttt}
)nttt.catch( err =&gt; {nttttif ( err === &#39;aborted&#39; )
{ntttttthis.status = &#39;aborted&#39;;ntttttthrow
&#39;aborted&#39;;ntttt}nnttttthis.status = &#39;error&#39;;nttttthrow
this._reader.error;nttt} );nt}nnt/**nt * Reads file using the provided
{@link module:upload/filerepository~UploadAdapter}.nt *nt * Throws {@link
module:utils/ckeditorerror~CKEditorError CKEditorError}
`filerepository-upload-wrong-status` when statusnt * is different than
`idle`.nt * Example usage:nt *nt *tfileLoader.upload()nt *tt.then( data
=&gt; { … } )nt *tt.catch( e =&gt; {nt *tttif ( e === &#39;aborted&#39; )
{nt *ttttconsole.log( &#39;Uploading aborted.&#39; );nt *ttt} else {nt
*ttttconsole.log( &#39;Uploading error.&#39;, e );nt *ttt}nt *tt} );nt *nt
* @returns {Promise} Returns promise that will be resolved with response
data. Promise will be rejected if errornt * occurs or if read process is
aborted.nt */ntupload() {nttif ( this.status != &#39;idle&#39; ) {ntttthrow
new CKEditorError( &#39;filerepository-upload-wrong-status: You cannot call
upload if the status is different than idle.&#39; );ntt}nnttthis.status =
&#39;uploading&#39;;nnttreturn this._adapter.upload()nttt.then( data =&gt;
{nttttthis.uploadResponse = data;nttttthis.status =
&#39;idle&#39;;nnttttreturn data;nttt} )nttt.catch( err =&gt; {nttttif (
this.status === &#39;aborted&#39; ) {ntttttthrow
&#39;aborted&#39;;ntttt}nnttttthis.status = &#39;error&#39;;nttttthrow
err;nttt} );nt}nnt/**nt * Aborts loading process.nt */ntabort() {nttconst
status = this.status;nttthis.status = &#39;aborted&#39;;nnttif ( status ==
&#39;reading&#39; ) {ntttthis._reader.abort();ntt}nnttif ( status ==
&#39;uploading&#39; &amp;&amp; this._adapter.abort )
{ntttthis._adapter.abort();ntt}nnttthis._destroy();nt}nnt/**nt * Performs
cleanup.nt *nt * @privatent */nt_destroy() {nttthis._reader =
undefined;nttthis._adapter = undefined;nttthis.data =
undefined;nttthis.uploadResponse = undefined;nttthis.file =
undefined;nt}n}nnmix( FileLoader, ObservableMixin );nn/**n * Upload adapter
interface used by FileRepository to handle file upload. Upload adapter is a
bridge between the editor and server thatn * handles file uploads. It
should contain logic necessary to initiate upload process and monitor its
progress.n *n * It should implement two methods:n *n * * {@link
module:upload/filerepository~UploadAdapter#upload `upload()`},n * * {@link
module:upload/filerepository~UploadAdapter#abort `abort()`}.n *n * Example
upload adapter implementation:n *n *ttclass UploadAdapter {n
*tttconstructor( loader ) {n *tttt// Save Loader instance to update upload
progress.n *ttttthis.loader = loader;n *ttt}n *n *tttupload() {n *tttt//
Update loader&#39;s progress.n *ttttserver.onUploadProgress( data =&gt; {n
*tttttloader.uploadTotal = data.total;n *tttttloader.uploaded =
data.uploaded;n *tttt} ):n *n *tttt// Return promise that will be resolved
when file is uploaded.n *ttttreturn server.upload( loader.file );n *ttt}n
*n *tttabort() {n *tttt// Reject promise returned from upload() method.n
*ttttserver.abortUpload();n *ttt}n *tt}n *n * Then upload adapter can be
set to be used by {@link module:upload/filerepository~FileRepository
FileRepository}:n *n *tteditor.plugins.get( &#39;FileRepository&#39;
).createUploadAdapter = function( loader ) {n *tttreturn new UploadAdapter(
loader );n *tt};n *n * @interface UploadAdaptern */nn/**n * Executes the
upload process.n * This method should return a promise that will resolve
when data will be uploaded to server. Promise should ben * resolved with an
object containing information about uploaded file:n *n *tt{n *tttdefault:
&#39;<a
href="http://server/default-size.image.png'\n">server/default-size.image.png’n</a>
*tt}n *n * Additionally, other image sizes can be provided:n *n *tt{n
*tttdefault: &#39;<a
href="http://server/default-size.image.png',\n">server/default-size.image.png’,n</a>
*ttt&#39;160&#39;: &#39;<a
href="http://server/size-160.image.png',\n">server/size-160.image.png’,n</a>
*ttt&#39;500&#39;: &#39;<a
href="http://server/size-500.image.png',\n">server/size-500.image.png’,n</a>
*ttt&#39;1000&#39;: &#39;<a
href="http://server/size-1000.image.png',\n">server/size-1000.image.png’,n</a>
*ttt&#39;1052&#39;: &#39;<a
href="http://server/default-size.image.png'\n">server/default-size.image.png’n</a>
*tt}n *n * NOTE: When returning multiple images, the widest returned one
should equal the default one. It is essential ton * correctly set `width`
attribute of the image. See this discussion:n * <a
href="https://github.com/ckeditor/ckeditor5-easy-image/issues/4">github.com/ckeditor/ckeditor5-easy-image/issues/4</a>
for more information.n *n * Take a look at {@link
module:upload/filerepository~UploadAdapter example Adapter implementation}
andn * {@link
module:upload/filerepository~FileRepository#createUploadAdapter
createUploadAdapter method}.n *n * @method
module:upload/filerepository~UploadAdapter#uploadn * @returns {Promise}
Promise that should be resolved when data is uploaded.n */nn/**n * Aborts
the upload process.n * After aborting it should reject promise returned
from {@link upload upload()}.n *n * Take a look at {@link
module:upload/filerepository~UploadAdapter example Adapter implementation}
andn * {@link
module:upload/filerepository~FileRepository#createUploadAdapter
createUploadAdapter method}.n *n * @method
module:upload/filerepository~UploadAdapter#abortn
*/nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-upload/src/filerepository.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module autoformat/blockautoformateditingn */nnimport Range from
&#39;@ckeditor/ckeditor5-engine/src/model/range&#39;;nn/**n * The block
autoformatting engine. It allows to format various block patterns. For
example,n * it can be configured to turn a paragraph starting with `*` and
followed by a space into a list item.n *n * The autoformatting operation is
integrated with the undo manager,n * so the autoformatting step can be
undone if the user&#39;s intention was not to format the text.n *n * See
the constructors documentation to learn how to create custom inline
autoformatters. You can also usen * the {@link
module:autoformat/autoformat~Autoformat} feature which enables a set of
default autoformattersn * (lists, headings, bold and italic).n */nexport
default class BlockAutoformatEditing {nt/**nt * Creates a listener
triggered on `change` event in the document.nt * Calls the callback when
inserted text matches the regular expression or the command nament * if
provided instead of the callback.nt *nt * Examples of usage:nt *nt * To
convert a paragraph to heading 1 when `- ` is typed, using just the
commmand name:nt *nt *ttnew BlockAutoformatEditing( editor, /^\- $/,
&#39;heading1&#39; );nt *nt * To convert a paragraph to heading 1 when `- `
is typed, using just the callback:nt *nt *ttnew BlockAutoformatEditing(
editor, /^\- $/, ( context ) =&gt; {nt *tttconst { match } = context;nt
*tttconst headingLevel = match[ 1 ].length;nt *nt *ttteditor.execute(
&#39;heading&#39;, {nt *ttttformatId: `heading${ headingLevel }`nt *ttt}
);nt * tt} );nt *nt * @param {module:core/editor/editor~Editor} editor The
editor instance.nt * @param {RegExp} pattern The regular expression to
execute on just inserted text.nt * @param {Function|String}
callbackOrCommand The callback to execute or the command to run when the
text is matched.nt * In case of providing the callback, it receives the
following parameter:nt * * {Object} match RegExp.exec() result of matching
the pattern to inserted text.nt */ntconstructor( editor, pattern,
callbackOrCommand ) {nttlet callback;nnttif ( typeof callbackOrCommand ==
&#39;function&#39; ) {ntttcallback = callbackOrCommand;ntt} else {nttt// We
assume that the actual command name was provided.ntttconst command =
callbackOrCommand;nntttcallback = () =&gt; {ntttteditor.execute( command
);nttt};ntt}nntteditor.model.document.on( &#39;change&#39;, ( evt, batch )
=&gt; {ntttif ( batch.type == &#39;transparent&#39; )
{nttttreturn;nttt}nntttconst changes = Array.from(
editor.model.document.differ.getChanges() );ntttconst entry = changes[ 0
];nnttt// Typing is represented by only a single change.ntttif (
changes.length != 1 || entry.type !== &#39;insert&#39; || entry.name !=
&#39;$text&#39; || entry.length != 1 ) {nttttreturn;nttt}ntttconst item =
entry.position.textNode || entry.position.nodeAfter;nntttif (
!item.parent.is( &#39;paragraph&#39; ) ) {nttttreturn;nttt}nntttconst match
= pattern.exec( item.data );nntttif ( !match ) {nttttreturn;nttt}nnttt//
Use enqueueChange to create new batch to separate typing batch from the
auto-format changes.nttteditor.model.enqueueChange( writer =&gt; {ntttt//
Matched range.nttttconst range = Range.createFromParentsAndOffsets(
item.parent, 0, item.parent, match[ 0 ].length );nntttt// Remove matched
text.nttttwriter.remove( range );nnttttcallback( { match } );nttt} );ntt}
);nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-autoformat/src/blockautoformatediting.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module basic-styles/attributecommandn */nnimport
Command from &#39;@ckeditor/ckeditor5-core/src/command&#39;;nn/**n * An
extension of the base {@link module:core/command~Command} class, which
provides utilities for a commandn * that toggles a single attribute on a
text or an element.n *n * `AttributeCommand` uses {@link
module:engine/model/document~Document#selection}n * to decide which nodes
(if any) should be changed, and applies or removes the attribute from
them.n *n * The command checks the {@link
module:engine/model/model~Model#schema} to decide if it can be enabledn *
for the current selection and to which nodes the attribute can be applied.n
*n * @extends module:core/command~Commandn */nexport default class
AttributeCommand extends Command {nt/**nt * @param
{module:core/editor/editor~Editor} editornt * @param {String} attributeKey
Attribute that will be set by the command.nt */ntconstructor( editor,
attributeKey ) {nttsuper( editor );nntt/**ntt * The attribute that will be
set by the command.ntt *ntt * @readonlyntt * @member {String}ntt
*/nttthis.attributeKey = attributeKey;nntt/**ntt * Flag indicating whether
the command is active. The command is active when thentt * {@link
module:engine/model/selection~Selection#hasAttribute selection has the
attribute} which means that:ntt *ntt * * If the selection is not empty
&amp;ndash; That it starts in a text (or another node) which has the
attribute set.ntt * * If the selection is empty &amp;ndash; That the
selection has the attribute itself (which means that newly typedntt * text
will have this attribute, too).ntt *ntt * @observablentt * @readonlyntt *
@member {Boolean} valuentt */nt}nnt/**nt * Updates the command&#39;s {@link
value} and {@link isEnabled} based on the current selection.nt
*/ntrefresh() {nttconst model = this.editor.model;nttconst doc =
model.document;nnttthis.value = doc.selection.hasAttribute(
this.attributeKey );nttthis.isEnabled =
model.schema.checkAttributeInSelection( doc.selection, this.attributeKey
);nt}nnt/**nt * Executes the command &amp;mdash; applies the attribute to
the selection or removes it from the selection.nt *nt * If the command is
active (`value == true`), it will remove attributes. Otherwise, it will set
attributes.nt *nt * The execution result differs, depending on the {@link
module:engine/model/document~Document#selection}:nt *nt * * If the
selection is on a range, the command applies the attribute to all nodes in
that rangent * (if they are allowed to have this attribute by the {@link
module:engine/model/schema~Schema schema}).nt * * If the selection is
collapsed in a non-empty node, the command applies the attribute to thent *
{@link module:engine/model/document~Document#selection} itself (note that
typed characters copy attributes from the selection).nt * * If the
selection is collapsed in an empty node, the command applies the attribute
to the parent node of the selection (notent * that the selection inherits
all attributes from a node if it is in an empty node).nt *nt * @fires
executent * @param {Object} [options] Command options.nt * @param {Boolean}
[options.forceValue] If set, it will force the command behavior. If `true`,
the command will apply the attribute,nt * otherwise the command will remove
the attribute.nt * If not set, the command will look for its current value
to decide what it should do.nt */ntexecute( options = {} ) {nttconst model
= this.editor.model;nttconst doc = model.document;nttconst selection =
doc.selection;nttconst value = ( options.forceValue === undefined ) ?
!this.value : options.forceValue;nnttmodel.change( writer =&gt; {ntttif (
selection.isCollapsed ) {nttttif ( value )
{ntttttwriter.setSelectionAttribute( this.attributeKey, true );ntttt} else
{ntttttwriter.removeSelectionAttribute( this.attributeKey );ntttt}nttt}
else {nttttconst ranges = model.schema.getValidRanges(
selection.getRanges(), this.attributeKey );nnttttfor ( const range of
ranges ) {ntttttif ( value ) {nttttttwriter.setAttribute(
this.attributeKey, value, range );nttttt} else
{nttttttwriter.removeAttribute( this.attributeKey, range
);nttttt}ntttt}nttt}ntt} );nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-basic-styles/src/attributecommand.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module basic-styles/bold/boldeditingn */nnimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport AttributeCommand from
&#39;../attributecommand&#39;;nnconst BOLD = &#39;bold&#39;;nn/**n * The
bold editing feature.n *n * It registers the `bold` command and introduces
the `bold` attribute in the model which renders to the viewn * as a
`&lt;strong&gt;` element.n *n * @extends module:core/plugin~Pluginn
*/nexport default class BoldEditing extends Plugin {nt/**nt * @inheritDocnt
*/ntinit() {nttconst editor = this.editor;ntt// Allow bold attribute on
text nodes.ntteditor.model.schema.extend( &#39;$text&#39;, {
allowAttributes: BOLD } );nntt// Build converter from model to view for
data and editing pipelines.nntteditor.conversion.attributeToElement(
{ntttmodel: BOLD,ntttview: &#39;strong&#39;,ntttupcastAlso:
[ntttt&#39;b&#39;,ntttt{ntttttstyles: {ntttttt&#39;font-weight&#39;:
&#39;bold&#39;nttttt}ntttt}nttt]ntt} );nntt// Create bold
command.ntteditor.commands.add( BOLD, new AttributeCommand( editor, BOLD )
);nntt// Set the Ctrl+B keystroke.ntteditor.keystrokes.set(
&#39;CTRL+B&#39;, BOLD );nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-basic-styles/src/bold/boldediting.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/n/**n * @module basic-styles/bold/bolduin */nimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport ButtonView from
&#39;@ckeditor/ckeditor5-ui/src/button/buttonview&#39;;nimport boldIcon
from &#39;../../theme/icons/bold.svg&#39;;nconst BOLD =
&#39;bold&#39;;n/**n * The bold UI feature. It introduces the Bold button.n
*n * @extends module:core/plugin~Pluginn */nexport default class BoldUI
extends Plugin {n    /**nt * @inheritDocnt */n    init() {n        const
editor = this.editor;n        const t = editor.t;n        // Add bold
button to feature components.n        editor.ui.componentFactory.add(BOLD,
locale =&gt; {n            const command = editor.commands.get(BOLD);n     
const view = new ButtonView(locale);n            view.set({n               
label: t(&#39;d&#39;),n                icon: boldIcon,n               
keystroke: &#39;CTRL+B&#39;,n                tooltip: truen            });n
view.bind(&#39;isOn&#39;, &#39;isEnabled&#39;).to(command, &#39;value&#39;,
&#39;isEnabled&#39;);n            // Execute command.n           
this.listenTo(view, &#39;execute&#39;, () =&gt; editor.execute(BOLD));n    
return view;n        });n    }n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-basic-styles/src/bold/boldui.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module basic-styles/boldn */nnimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport BoldEditing from
&#39;./bold/boldediting&#39;;nimport BoldUI from
&#39;./bold/boldui&#39;;nn/**n * The bold feature.n *n * It loads the
{@link module:basic-styles/bold/boldediting~BoldEditing bold editing
feature}n * and {@link module:basic-styles/bold/boldui~BoldUI bold UI
feature}.n *n * @extends module:core/plugin~Pluginn */nexport default class
Bold extends Plugin {nt/**nt * @inheritDocnt */ntstatic get requires()
{nttreturn [ BoldEditing, BoldUI ];nt}nnt/**nt * @inheritDocnt */ntstatic
get pluginName() {nttreturn &#39;Bold&#39;;nt}n}nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-basic-styles/src/bold.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module basic-styles/italic/italiceditingn
*/nnimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport AttributeCommand from
&#39;../attributecommand&#39;;nnconst ITALIC = &#39;italic&#39;;nn/**n *
The italic editing feature.n *n * It registers the `italic` command, the
&lt;kbd&gt;Ctrl+I&lt;/kbd&gt; keystroke and introduces the `italic`
attribute in the modeln * which renders to the view as an `&lt;em&gt;`
element.n *n * @extends module:core/plugin~Pluginn */nexport default class
ItalicEditing extends Plugin {nt/**nt * @inheritDocnt */ntinit() {nttconst
editor = this.editor;nntt// Allow italic attribute on text
nodes.ntteditor.model.schema.extend( &#39;$text&#39;, { allowAttributes:
ITALIC } );nntteditor.conversion.attributeToElement( {ntttmodel:
ITALIC,ntttview: &#39;i&#39;,ntttupcastAlso:
[ntttt&#39;em&#39;,ntttt{ntttttstyles: {ntttttt&#39;font-style&#39;:
&#39;italic&#39;nttttt}ntttt}nttt]ntt} );nntt// Create italic
command.ntteditor.commands.add( ITALIC, new AttributeCommand( editor,
ITALIC ) );nntt// Set the Ctrl+I keystroke.ntteditor.keystrokes.set(
&#39;CTRL+I&#39;, ITALIC );nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-basic-styles/src/italic/italicediting.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */n/**n * @module basic-styles/italic/italicuin */nimport
Plugin from &#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport
ButtonView from
&#39;@ckeditor/ckeditor5-ui/src/button/buttonview&#39;;nimport italicIcon
from &#39;../../theme/icons/italic.svg&#39;;nconst ITALIC =
&#39;italic&#39;;n/**n * The italic UI feature. It introduces the Italic
button.n *n * @extends module:core/plugin~Pluginn */nexport default class
ItalicUI extends Plugin {n    /**nt * @inheritDocnt */n    init() {n       
const editor = this.editor;n        const t = editor.t;n        // Add bold
button to feature components.n       
editor.ui.componentFactory.add(ITALIC, locale =&gt; {n            const
command = editor.commands.get(ITALIC);n            const view = new
ButtonView(locale);n            view.set({n                label:
t(&#39;c&#39;),n                icon: italicIcon,n               
keystroke: &#39;CTRL+I&#39;,n                tooltip: truen            });n
view.bind(&#39;isOn&#39;, &#39;isEnabled&#39;).to(command, &#39;value&#39;,
&#39;isEnabled&#39;);n            // Execute command.n           
this.listenTo(view, &#39;execute&#39;, () =&gt; editor.execute(ITALIC));n  
return view;n        });n    }n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-basic-styles/src/italic/italicui.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module basic-styles/italicn */nnimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport ItalicEditing from
&#39;./italic/italicediting&#39;;nimport ItalicUI from
&#39;./italic/italicui&#39;;nn/**n * The italic feature.n *n * It loads the
{@link module:basic-styles/italic/italicediting~ItalicEditing} andn *
{@link module:basic-styles/italic/italicui~ItalicUI} plugins.n *n *
@extends module:core/plugin~Pluginn */nexport default class Italic extends
Plugin {nt/**nt * @inheritDocnt */ntstatic get requires() {nttreturn [
ItalicEditing, ItalicUI ];nt}nnt/**nt * @inheritDocnt */ntstatic get
pluginName() {nttreturn &#39;Italic&#39;;nt}n}nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-basic-styles/src/italic.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */n/**n * @module block-quote/blockquoteuin */nimport Plugin
from &#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport ButtonView from
&#39;@ckeditor/ckeditor5-ui/src/button/buttonview&#39;;nimport quoteIcon
from &#39;@ckeditor/ckeditor5-core/theme/icons/quote.svg&#39;;nimport
&#39;../theme/blockquote.css&#39;;n/**n * The block quote UI plugin.n *n *
It introduces the `&#39;blockQuote&#39;` button.n *n * @extends
module:core/plugin~Pluginn */nexport default class BlockQuoteUI extends
Plugin {n    /**nt * @inheritDocnt */n    init() {n        const editor =
this.editor;n        const t = editor.t;n       
editor.ui.componentFactory.add(&#39;blockQuote&#39;, locale =&gt; {n       
const command = editor.commands.get(&#39;blockQuote&#39;);n           
const buttonView = new ButtonView(locale);n            buttonView.set({n   
label: t(&#39;b&#39;),n                icon: quoteIcon,n               
tooltip: truen            });n            // Bind button model to command.n
buttonView.bind(&#39;isOn&#39;, &#39;isEnabled&#39;).to(command,
&#39;value&#39;, &#39;isEnabled&#39;);n            // Execute command.n    
this.listenTo(buttonView, &#39;execute&#39;, () =&gt;
editor.execute(&#39;blockQuote&#39;));n            return buttonView;n     
});n    }n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-block-quote/src/blockquoteui.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module block-quote/blockquoten */nnimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport BlockQuoteEditing
from &#39;./blockquoteediting&#39;;nimport BlockQuoteUI from
&#39;./blockquoteui&#39;;nn/**n * The block quote plugin.n *n * It loads
the {@link module:block-quote/blockquoteediting~BlockQuoteEditing block
quote editing feature}n * and {@link
module:block-quote/blockquoteui~BlockQuoteUI block quote UI feature}.n *n *
@extends module:core/plugin~Pluginn */nexport default class BlockQuote
extends Plugin {nt/**nt * @inheritDocnt */ntstatic get requires()
{nttreturn [ BlockQuoteEditing, BlockQuoteUI ];nt}nnt/**nt * @inheritDocnt
*/ntstatic get pluginName() {nttreturn
&#39;BlockQuote&#39;;nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-block-quote/src/blockquote.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2017, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/*
eslint-env browser */nn&#39;use strict&#39;;nnimport mix from
&#39;@ckeditor/ckeditor5-utils/src/mix&#39;;nimport ObservableMixin from
&#39;@ckeditor/ckeditor5-utils/src/observablemixin&#39;;nnconst
DEFAULT_OPTIONS = { refreshInterval: 3600000, autoRefresh: true };nn/**n *
Class representing the token used for communication with CKEditor Cloud
Services.n * Value of the token is retrieving from the specified URL and is
refreshed every 1 hour by default.n *n * @mixes ObservableMixinn */nclass
Token {nt/**nt * Creates `Token` instance.nt * Method `init` should be
called after using the constructor or use `create` method instead.nt *nt *
@param {String} tokenUrl Endpoint address to download the token.nt * @param
{Object} optionsnt * @param {String} [options.initValue] Initial value of
the token.nt * @param {Number} [options.refreshInterval=3600000] Delay
between refreshes. Default 1 hour.nt * @param {Boolean}
[options.autoRefresh=true] Specifies whether to start the refresh
automatically.nt */ntconstructor( tokenUrl, options = DEFAULT_OPTIONS )
{nttif ( !tokenUrl ) {ntttthrow new Error( &#39;`tokenUrl` must be
provided&#39; );ntt}nntt/**ntt * Value of the token.ntt * The value of the
token is null if `initValue` is not provided or `init` method was not
called.ntt * `create` method creates token with initialized value from
url.ntt *ntt * @name valuentt * @type {String}ntt * @observablentt *
@readonlyntt * @memberOf Token#ntt */nttthis.set( &#39;value&#39;,
options.initValue );nntt/**ntt * @type {String}ntt * @privatentt
*/nttthis._tokenUrl = tokenUrl;nntt/**ntt * @type {Object}ntt * @privatentt
*/nttthis._options = Object.assign( {}, DEFAULT_OPTIONS, options
);nt}nnt/**nt * Initializes the token.nt *nt * @returns
{Promise.&lt;Token&gt;}nt */ntinit() {nttreturn new Promise( ( resolve,
reject ) =&gt; {ntttif ( this._options.autoRefresh )
{nttttthis._startRefreshing();nttt}nntttif ( !this.value )
{nttttthis._refreshToken()nttttt.then( resolve )nttttt.catch( reject
);nnttttreturn;nttt}nntttresolve( this );ntt} );nt}nnt/**nt * Gets the new
token.nt *nt * @protectednt * @returns {Promise.&lt;Token&gt;}nt
*/nt_refreshToken() {nttreturn new Promise( ( resolve, reject ) =&gt;
{ntttconst xhr = new XMLHttpRequest();nntttxhr.open( &#39;GET&#39;,
this._tokenUrl );nntttxhr.addEventListener( &#39;load&#39;, () =&gt;
{nttttconst statusCode = xhr.status;nttttconst xhrResponse =
xhr.response;nnttttif ( statusCode &lt; 200 || statusCode &gt; 299 )
{ntttttreturn reject( &#39;Cannot download new token!&#39;
);ntttt}nnttttthis.set( &#39;value&#39;, xhrResponse );nnttttreturn
resolve( this );nttt} );nntttxhr.addEventListener( &#39;error&#39;, ()
=&gt; reject( &#39;Network Error&#39; ) );ntttxhr.addEventListener(
&#39;abort&#39;, () =&gt; reject( &#39;Abort&#39; ) );nntttxhr.send();ntt}
);nt}nnt/**nt * Starts value refreshing every `refreshInterval` time.nt *nt
* @protectednt */nt_startRefreshing() {nttthis._refreshInterval =
setInterval( this._refreshToken.bind( this ), this._options.refreshInterval
);nt}nnt/**nt * Stops value refreshing.nt *nt * @protectednt
*/nt_stopRefreshing() {nttclearInterval( this._refreshInterval
);nt}nnt/**nt * Creates a initialized {@link Token} instance.nt *nt *
@param {String} tokenUrl Endpoint address to download the token.nt * @param
{Object} optionsnt * @param {String} [options.initValue] Initial value of
the token.nt * @param {Number} [options.refreshInterval=3600000] Delay
between refreshes. Default 1 hour.nt * @param {Boolean}
[options.autoRefresh=true] Specifies whether to start the refresh
automatically.nt * @returns {Promise.&lt;Token&gt;}nt */ntstatic create(
tokenUrl, options = DEFAULT_OPTIONS ) {nttconst token = new Token(
tokenUrl, options );nnttreturn token.init();nt}n}nnmix( Token,
ObservableMixin );nnexport default Token;nnnn//////////////////n// WEBPACK
FOOTERn// ckeditor at
/workspace/ckeditor5/node_modules//ckeditor-cloud-services-core/src/token/token.jsn//
module id = nulln// module chunks = “,”/**n * @license Copyright ©
2003-2018, CKSource - Frederico Knabben. All rights reserved.n * For
licensing, see LICENSE.md.n */nn/**n * @module
cloud-services/cloudservicesn */nnimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport Token from
&#39;@ckeditor/ckeditor-cloud-services-core/src/token/token&#39;;nn/**n *
Plugin introducing CKEditor 5&#39;s Cloud Services integration.n * It takes
care of the {@link module:cloud-services/cloudservices~CloudServicesConfig
`config.cloudService`}n * configuration options and initializes the token
provider.n *n * @extends module:core/plugin~Pluginn */nexport default class
CloudServices extends Plugin {nt/**nt * @inheritDocnt */ntinit() {nttconst
editor = this.editor;nttconst config = editor.config;nnttconst options =
config.get( &#39;cloudServices&#39; ) || {};nnttfor ( const optionName in
options ) {ntttthis[ optionName ] = options[ optionName ];ntt}nntt/**ntt *
The authentication token URL for CKEditor Cloud Services.ntt *ntt *
@readonlyntt * @member {String|undefined} tokenUrlntt */nntt/**ntt * The
URL to which the files should be uploaded.ntt *ntt * @readonlyntt * @member
{String} uploadUrlntt */nntt/**ntt * Other plugins use this token for the
authorization process. It handles token requesting and refreshing.ntt * Its
value is `null` when {@link
module:cloud-services/cloudservices~CloudServicesConfig#tokenUrl} is not
provided.ntt *ntt * @readonlyntt * @member {Object|null} tokenntt */nnttif
( !this.tokenUrl ) {ntttthis.token = null;nntttreturn;ntt}nnttthis.token =
new CloudServices.Token( this.tokenUrl );nnttreturn
this.token.init();nt}n}nnCloudServices.Token = Token;nn/**n * The
configuration of CKEditor Cloud Services. Introduced by the {@link
module:cloud-services/cloudservices~CloudServices} plugin.n *n * Read more
in {@link module:cloud-services/cloudservices~CloudServicesConfig}.n *n *
@member {module:cloud-services/cloudservices~CloudServicesConfig}
module:core/editor/editorconfig~EditorConfig#cloudServicesn */nn/**n * The
configuration for all plugins using CKEditor Cloud Services.n *n
*ttClassicEditorn *ttt.create( document.querySelector( &#39;#editor&#39; ),
{n *ttttcloudServices: {n *ttttttokenUrl: &#39;<a
href="https://example.com/cs-token-endpoint',\n">example.com/cs-token-endpoint’,n</a>
*tttttuploadUrl: &#39;<a
href="https://your-organization-id.cke-cs.com/easyimage/upload/'\n">your-organization-id.cke-cs.com/easyimage/upload/‘n</a>
*tttt}n *ttt} )n *ttt.then( … )n *ttt.catch( … );n *n * See {@link
module:core/editor/editorconfig~EditorConfig all editor options}.n *n *
@interface CloudServicesConfign */nn/**n * The URL to the security token
endpoint in your application. The role of this endpoint is to securely
authorize then * end users of your application to use [CKEditor Cloud
Services](<a
href="https://ckeditor.com/ckeditor-cloud-services">ckeditor.com/ckeditor-cloud-services</a>),
onlyn * if they should have access e.g. to upload files with Easy Image.n
*n * You can find more information about token endpoints in then * {@glink
@cs guides/quick-start#create-token-endpoint Cloud Services - Quick start}n
* and {@glink @cs guides/token-endpoints/tokenendpoint Cloud Services -
Creating token endpoint} documentation.n *n * Without a properly working
token endpoint (token URL) CKEditor plugins will not be able to connect to
CKEditor Cloud Services.n *n * @member {String}
module:cloud-services/cloudservices~CloudServicesConfig#tokenUrln */nn/**n
* The endpoint URL for [CKEditor Cloud Services](<a
href="https://ckeditor.com/ckeditor-cloud-services">ckeditor.com/ckeditor-cloud-services</a>)
uploads.n * This option must be set for Easy Image to work correctly.n *n *
The upload URL is unique for each customer and can be found in the
[CKEditor Ecosystem dashboard](<a
href="https://dashboard.ckeditor.com)\n">dashboard.ckeditor.com)n</a> *
after subscribing to Easy Image service.n * To learn how to start using
Easy Image check {@glink @cs guides/quick-start Cloud Services - Quick
start} documentation.n *n * Note: Make sure to also set the {@link
module:cloud-services/cloudservices~CloudServicesConfig#tokenUrl}
configuration option.n *n * Read more in [Cloud Services Quick start](<a
href="https://docs.ckeditor.com/cs/latest/guides/quick-start.html).\n">docs.ckeditor.com/cs/latest/guides/quick-start.html).n</a>
*n * @member {String}
module:cloud-services/cloudservices~CloudServicesConfig#uploadUrln
*/nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-cloud-services/src/cloudservices.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/*<strong>n</strong> @module
easy-image/cloudservicesuploadadaptern*/nnimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport FileRepository from
&#39;@ckeditor/ckeditor5-upload/src/filerepository&#39;;nimport
UploadGateway from
&#39;@ckeditor/ckeditor-cloud-services-core/src/uploadgateway/uploadgateway&#39;;nimport
CloudServices from
&#39;@ckeditor/ckeditor5-cloud-services/src/cloudservices&#39;;nn/**n * A
plugin that enables upload to [CKEditor Cloud Services](<a
href="https://ckeditor.com/ckeditor-cloud-services/).\n">ckeditor.com/ckeditor-cloud-services/).n</a>
*n * It is mainly used by the {@link module:easy-image/easyimage~EasyImage}
feature.n *n * After enabling this adapter you need to configure the
CKEditor Cloud Services integration throughn * {@link
module:cloud-services/cloudservices~CloudServicesConfig
`config.cloudServices`}.n *n * @extends module:core/plugin~Pluginn
*/nexport default class CloudServicesUploadAdapter extends Plugin {nt/**nt
* @inheritDocnt */ntstatic get requires() {nttreturn [ FileRepository,
CloudServices ];nt}nnt/**nt * @inheritDocnt */ntinit() {nttconst editor =
this.editor;nnttconst cloudServices = editor.plugins.get( CloudServices
);nnttconst token = cloudServices.token;nttconst uploadUrl =
cloudServices.uploadUrl;nnttif ( !token )
{ntttreturn;ntt}nnttthis._uploadGateway = new
CloudServicesUploadAdapter._UploadGateway( token, uploadUrl
);nntteditor.plugins.get( FileRepository ).createUploadAdapter = loader
=&gt; {ntttreturn new Adapter( this._uploadGateway, loader
);ntt};nt}n}nn/**n * @privaten */nclass Adapter {ntconstructor(
uploadGateway, loader ) {nttthis.uploadGateway =
uploadGateway;nnttthis.loader = loader;nt}nntupload() {nttthis.fileUploader
= this.uploadGateway.upload( this.loader.file );nnttthis.fileUploader.on(
&#39;progress&#39;, ( evt, data ) =&gt; {ntttthis.loader.uploadTotal =
data.total;ntttthis.loader.uploaded = data.uploaded;ntt} );nnttreturn
this.fileUploader.send();nt}nntabort()
{nttthis.fileUploader.abort();nt}n}nn// Store the API in static property to
easily overwrite it in tests.n// Too bad dependency injection does not work
in Webpack + ES 6 (const) +
Babel.nCloudServicesUploadAdapter._UploadGateway =
UploadGateway;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-easy-image/src/cloudservicesuploadadapter.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module
image/imagetextalternative/imagetextalternativeeditingn */nnimport
ImageTextAlternativeCommand from
&#39;./imagetextalternativecommand&#39;;nimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nn/**n * The image text
alternative engine plugin.n * Registers the `imageTextAlternative`
command.n *n * @extends module:core/plugin~Pluginn */nexport default class
ImageTextAlternativeEditing extends Plugin {nt/**nt * @inheritDocnt
*/ntinit() {nttthis.editor.commands.add( &#39;imageTextAlternative&#39;,
new ImageTextAlternativeCommand( this.editor )
);nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-image/src/imagetextalternative/imagetextalternativeediting.jsn//
module id = nulln// module chunks = “,”/**n * @license Copyright ©
2003-2018, CKSource - Frederico Knabben. All rights reserved.n * For
licensing, see LICENSE.md.n */nn/**n * @module ui/inputtext/inputtextviewn
*/nnimport View from &#39;../view&#39;;nnimport
&#39;../../theme/components/inputtext/inputtext.css&#39;;nn/**n * The text
input view class.n *n * @extends module:ui/view~Viewn */nexport default
class InputTextView extends View {nt/**nt * @inheritDocnt */ntconstructor(
locale ) {nttsuper( locale );nntt/**ntt * The value of the input.ntt *ntt *
@observablentt * @member {String} valuentt */nttthis.set( &#39;value&#39;
);nntt/**ntt * The `id` attribute of the input (i.e. to pair with a
`&lt;label&gt;` element).ntt *ntt * @observablentt * @member {String} idntt
*/nttthis.set( &#39;id&#39; );nntt/**ntt * The `placeholder` attribute of
the input.ntt *ntt * @observablentt * @member {String} placeholderntt
*/nttthis.set( &#39;placeholder&#39; );nntt/**ntt * Controls whether the
input view is in read-only mode.ntt *ntt * @observablentt * @member
{Boolean} isReadOnlyntt */nttthis.set( &#39;isReadOnly&#39;, false
);nnttconst bind = this.bindTemplate;nnttthis.setTemplate( {nttttag:
&#39;input&#39;,ntttattributes: {ntttttype: &#39;text&#39;,nttttclass:
[nttttt&#39;ck&#39;,nttttt&#39;ck-input&#39;,nttttt&#39;ck-input-text&#39;ntttt],nttttid:
bind.to( &#39;id&#39; ),nttttplaceholder: bind.to( &#39;placeholder&#39;
),nttttreadonly: bind.to( &#39;isReadOnly&#39; )nttt}ntt} );nt}nnt/**nt *
@inheritDocnt */ntrender() {nttsuper.render();nnttconst setValue = value
=&gt; {ntttthis.element.value = ( !value &amp;&amp; value !== 0 ) ?
&#39;&#39; : value;ntt};nnttsetValue( this.value );nntt// Bind `this.value`
to the DOM element&#39;s value.ntt// We cannot use `value` DOM attribute
because removing it on Edge does not clear the DOM element&#39;s value
property.nttthis.on( &#39;change:value&#39;, ( evt, name, value ) =&gt;
{ntttsetValue( value );ntt} );nt}nnt/**nt * Moves the focus to the input
and selects the value.nt */ntselect() {nttthis.element.select();nt}nnt/**nt
* Focuses the input.nt */ntfocus()
{nttthis.element.focus();nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-ui/src/inputtext/inputtextview.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/n/**n * @module image/imagetextalternative/ui/textalternativeformviewn
*/nimport View from &#39;@ckeditor/ckeditor5-ui/src/view&#39;;nimport
ViewCollection from
&#39;@ckeditor/ckeditor5-ui/src/viewcollection&#39;;nimport ButtonView from
&#39;@ckeditor/ckeditor5-ui/src/button/buttonview&#39;;nimport
LabeledInputView from
&#39;@ckeditor/ckeditor5-ui/src/labeledinput/labeledinputview&#39;;nimport
InputTextView from
&#39;@ckeditor/ckeditor5-ui/src/inputtext/inputtextview&#39;;nimport
submitHandler from
&#39;@ckeditor/ckeditor5-ui/src/bindings/submithandler&#39;;nimport
KeystrokeHandler from
&#39;@ckeditor/ckeditor5-utils/src/keystrokehandler&#39;;nimport
FocusTracker from
&#39;@ckeditor/ckeditor5-utils/src/focustracker&#39;;nimport FocusCycler
from &#39;@ckeditor/ckeditor5-ui/src/focuscycler&#39;;nimport checkIcon
from &#39;@ckeditor/ckeditor5-core/theme/icons/check.svg&#39;;nimport
cancelIcon from
&#39;@ckeditor/ckeditor5-core/theme/icons/cancel.svg&#39;;nimport
&#39;../../../theme/textalternativeform.css&#39;;n/**n * The
TextAlternativeFormView class.n *n * @extends module:ui/view~Viewn
*/nexport default class TextAlternativeFormView extends View {n    /**nt *
@inheritDocnt */n    constructor(locale) {n        super(locale);n       
const t = this.locale.t;n        /**ntt * Tracks information about the DOM
focus in the form.ntt *ntt * @readonlyntt * @member
{module:utils/focustracker~FocusTracker}ntt */n        this.focusTracker =
new FocusTracker();n        /**ntt * An instance of the {@link
module:utils/keystrokehandler~KeystrokeHandler}.ntt *ntt * @readonlyntt *
@member {module:utils/keystrokehandler~KeystrokeHandler}ntt */n       
this.keystrokes = new KeystrokeHandler();n        /**ntt * A textarea with
a label.ntt *ntt * @member
{module:ui/labeledinput/labeledinputview~LabeledInputView}
labeledTextareantt */n        this.labeledInput =
this._createLabeledInputView();n        /**ntt * A button used to submit
the form.ntt *ntt * @member {module:ui/button/buttonview~ButtonView}
saveButtonViewntt */n        this.saveButtonView =
this._createButton(t(&#39;af&#39;), checkIcon, &#39;ck-button-save&#39;);n 
this.saveButtonView.type = &#39;submit&#39;;n        /**ntt * A button used
to cancel the form.ntt *ntt * @member
{module:ui/button/buttonview~ButtonView} cancelButtonViewntt */n       
this.cancelButtonView = this._createButton(t(&#39;ag&#39;), cancelIcon,
&#39;ck-button-cancel&#39;, &#39;cancel&#39;);n        /**ntt * A
collection of views which can be focused in the form.ntt *ntt *
@readonlyntt * @protectedntt * @member
{module:ui/viewcollection~ViewCollection}ntt */n        this._focusables =
new ViewCollection();n        /**ntt * Helps cycling over {@link
#_focusables} in the form.ntt *ntt * @readonlyntt * @protectedntt * @member
{module:ui/focuscycler~FocusCycler}ntt */n        this._focusCycler = new
FocusCycler({n            focusables: this._focusables,n           
focusTracker: this.focusTracker,n            keystrokeHandler:
this.keystrokes,n            actions: {n                // Navigate form
fields backwards using the Shift + Tab keystroke.n               
focusPrevious: &#39;shift + tab&#39;,n                // Navigate form
fields forwards using the Tab key.n                focusNext:
&#39;tab&#39;n            }n        });n        this.setTemplate({n        
tag: &#39;form&#39;,n            attributes: {n                class: [n   
&#39;ck&#39;,n                    &#39;ck-text-alternative-form&#39;n      
],n                // <a
href="https://github.com/ckeditor/ckeditor5-image/issues/40\n">github.com/ckeditor/ckeditor5-image/issues/40n</a>
tabindex: &#39;-1&#39;n            },n            children: [n             
this.labeledInput,n                this.saveButtonView,n               
this.cancelButtonViewn            ]n        });n    }n    /**nt *
@inheritDocnt */n    render() {n        super.render();n       
this.keystrokes.listenTo(this.element);n        submitHandler({ view: this
});n        [n            this.labeledInput,n           
this.saveButtonView,n            this.cancelButtonViewn        ].forEach(v
=&gt; {n            // Register the view as focusable.n           
this._focusables.add(v);n            // Register the view in the focus
tracker.n            this.focusTracker.add(v.element);n        });n    }n  
/**nt * Creates the button view.nt *nt * @privatent * @param {String} label
The button labelnt * @param {String} icon The button&#39;s icon.nt * @param
{String} className The additional button CSS class name.nt * @param
{String} [eventName] The event name that the ButtonView#execute event will
be delegated to.nt * @returns {module:ui/button/buttonview~ButtonView} The
button view instance.nt */n    _createButton(label, icon, className,
eventName) {n        const button = new ButtonView(this.locale);n       
button.set({n            label,n            icon,n            tooltip:
truen        });n        button.extendTemplate({ attributes: { class:
className } });n        if (eventName) {n           
button.delegate(&#39;execute&#39;).to(this, eventName);n        }n       
return button;n    }n    /**nt * Creates an input with a label.nt *nt *
@privatent * @return
{module:ui/labeledinput/labeledinputview~LabeledInputView}nt */n   
_createLabeledInputView() {n        const t = this.locale.t;n        const
labeledInput = new LabeledInputView(this.locale, InputTextView);n       
labeledInput.label = t(&#39;ah&#39;);n       
labeledInput.inputView.placeholder = t(&#39;ah&#39;);n        return
labeledInput;n    }n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-image/src/imagetextalternative/ui/textalternativeformview.jsn//
module id = nulln// module chunks = “,”/**n * @license Copyright ©
2003-2018, CKSource - Frederico Knabben. All rights reserved.n * For
licensing, see LICENSE.md.n */nn/**n * @module image/imagetextalternativen
*/nnimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport
ImageTextAlternativeEditing from
&#39;./imagetextalternative/imagetextalternativeediting&#39;;nimport
ImageTextAlternativeUI from
&#39;./imagetextalternative/imagetextalternativeui&#39;;nn/**n * The image
text alternative plugin.n *n * It loads the {@link
module:image/imagetextalternative/imagetextalternativeediting~ImageTextAlternativeEditing}n
* and {@link
module:image/imagetextalternative/imagetextalternativeui~ImageTextAlternativeUI}
plugins.n *n * @extends module:core/plugin~Pluginn */nexport default class
ImageTextAlternative extends Plugin {nt/**nt * @inheritDocnt */ntstatic get
requires() {nttreturn [ ImageTextAlternativeEditing, ImageTextAlternativeUI
];nt}nnt/**nt * @inheritDocnt */ntstatic get pluginName() {nttreturn
&#39;ImageTextAlternative&#39;;nt}n}nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-image/src/imagetextalternative.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module image/imagen */nnimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport ImageEditing from
&#39;../src/image/imageediting&#39;;nimport Widget from
&#39;@ckeditor/ckeditor5-widget/src/widget&#39;;nimport
ImageTextAlternative from &#39;./imagetextalternative&#39;;nnimport
&#39;../theme/image.css&#39;;nn/**n * The image plugin.n *n * Uses the
{@link module:image/image/imageediting~ImageEditing}.n *n * For a detailed
overview, check the {@glink features/image image feature} documentation.n
*n * @extends module:core/plugin~Pluginn */nexport default class Image
extends Plugin {nt/**nt * @inheritDocnt */ntstatic get requires()
{nttreturn [ ImageEditing, Widget, ImageTextAlternative ];nt}nnt/**nt *
@inheritDocnt */ntstatic get pluginName() {nttreturn
&#39;Image&#39;;nt}n}nn/**n * The configuration of the image features. Used
by the image features in the `@ckeditor/ckeditor5-image` package.n *n *
Read more in {@link module:image/image~ImageConfig}.n *n * @member
{module:image/image~ImageConfig}
module:core/editor/editorconfig~EditorConfig#imagen */nn/**n * The
configuration of the image features. Used by the image features in the
`@ckeditor/ckeditor5-image` package.n *n *ttClassicEditorn *ttt.create(
editorElement, {n * ttttimage: … // Image feature options.n *ttt} )n
*ttt.then( … )n *ttt.catch( … );n *n * See {@link
module:core/editor/editorconfig~EditorConfig all editor options}.n *n *
@interface ImageConfign */nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-image/src/image.jsn// module id = nulln// module chunks =
“,”/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben. All
rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
upload/ui/filedialogbuttonviewn */nnimport ButtonView from
&#39;@ckeditor/ckeditor5-ui/src/button/buttonview&#39;;nimport View from
&#39;@ckeditor/ckeditor5-ui/src/view&#39;;nn/**n * The file dialog button
view.n *n * This component provides a button that opens the native file
selection dialog.n * It can be used to implement the UI of a file upload
feature.n *n *ttconst view = new FileDialogButtonView( locale );n *n
*ttview.set( {n *tttacceptedType: &#39;image/*&#39;,n
*tttallowMultipleFiles: truen *tt} );n *n *ttview.buttonView.set( {n
*tttlabel: t( &#39;Insert image&#39; ),n *ttticon: imageIcon,n *ttttooltip:
truen *tt} );n *n *ttview.on( &#39;done&#39;, ( evt, files ) =&gt; {n
*tttfor ( const file of Array.from( files ) ) {n *ttttconsole.log(
&#39;Selected file&#39;, file );n *ttt}n *tt} );n *n * @extends
module:ui/view~Viewn */nexport default class FileDialogButtonView extends
View {nt/**nt * @inheritDocnt */ntconstructor( locale ) {nttsuper( locale
);nntt/**ntt * The button view of the component.ntt *ntt * @member
{module:ui/button/buttonview~ButtonView}ntt */nttthis.buttonView = new
ButtonView( locale );nntt/**ntt * A hidden `&lt;input&gt;` view used to
execute file dialog.ntt *ntt * @protectedntt * @member
{module:upload/ui/filedialogbuttonview~FileInputView}ntt
*/nttthis._fileInputView = new FileInputView( locale );nntt/**ntt *
Accepted file types. Can be provided in form of file extensions, media type
or one of:ntt * * `audio/*`,ntt * * `video/*`,ntt * * `image/*`.ntt *ntt *
@observablentt * @member {String} acceptedTypentt
*/nttthis._fileInputView.bind( &#39;acceptedType&#39; ).to( this
);nntt/**ntt * Indicates if multiple files can be selected. Defaults to
`true`.ntt *ntt * @observablentt * @member {Boolean} allowMultipleFilesntt
*/nttthis._fileInputView.bind( &#39;allowMultipleFiles&#39; ).to( this
);nntt/**ntt * Fired when file dialog is closed with file selected.ntt *ntt
*ttview.on( &#39;done&#39;, ( evt, files ) =&gt; {ntt *tttfor ( const file
of files ) {ntt *ttttconsole.log( &#39;Selected file&#39;, file );ntt
*ttt}ntt *tt}ntt *ntt * @event donentt * @param {Array.&lt;File&gt;} files
Array of selected files.ntt */nttthis._fileInputView.delegate(
&#39;done&#39; ).to( this );nnttthis.setTemplate( {nttttag:
&#39;span&#39;,ntttattributes: {nttttclass:
&#39;ck-file-dialog-button&#39;,nttt},ntttchildren:
[nttttthis.buttonView,nttttthis._fileInputViewnttt]ntt}
);nnttthis.buttonView.on( &#39;execute&#39;, () =&gt;
{ntttthis._fileInputView.open();ntt} );nt}nnt/**nt * Focuses the {@link
buttonView}.nt */ntfocus() {nttthis.buttonView.focus();nt}n}nn/**n * The
hidden file input view class.n *n * @privaten * @extends
{module:ui/view~View}n */nclass FileInputView extends View {nt/**nt *
@inheritDocnt */ntconstructor( locale ) {nttsuper( locale );nntt/**ntt *
Accepted file types. Can be provided in form of file extensions, media type
or one of:ntt * * `audio/*`,ntt * * `video/*`,ntt * * `image/*`.ntt *ntt *
@observablentt * @member {String} acceptedTypentt */nttthis.set(
&#39;acceptedType&#39; );nntt/**ntt * Indicates if multiple files can be
selected. Defaults to `false`.ntt *ntt * @observablentt * @member {Boolean}
allowMultipleFilesntt */nttthis.set( &#39;allowMultipleFiles&#39;, false
);nnttconst bind = this.bindTemplate;nnttthis.setTemplate( {nttttag:
&#39;input&#39;,nntttattributes: {nttttclass:
[nttttt&#39;ck-hidden&#39;ntttt],ntttttype: &#39;file&#39;,ntttttabindex:
&#39;-1&#39;,nttttaccept: bind.to( &#39;acceptedType&#39; ),nttttmultiple:
bind.to( &#39;allowMultipleFiles&#39; )nttt},nnttton: {ntttt// Removing
from code coverage since we cannot programmatically set input element
files.nttttchange: bind.to( /* istanbul ignore next */ () =&gt; {ntttttif (
this.element &amp;&amp; this.element.files &amp;&amp;
this.element.files.length ) {nttttttthis.fire( &#39;done&#39;,
this.element.files );nttttt}nntttttthis.element.value = &#39;&#39;;ntttt}
)nttt}ntt} );nt}nnt/**nt * Opens file dialog.nt */ntopen()
{nttthis.element.click();nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-upload/src/ui/filedialogbuttonview.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module ui/notification/notificationn */nn/* globals window
*/nnimport Plugin from &#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nn/**n
* The Notification plugin.n *n * This plugin sends few base types of
notifications: `success`, `info` and `warning`. This notifications need to
ben * handled and displayed by plugin responsible for showing UI of the
notifications. Using this plugin for dispatchingn * notifications makes
possible to switch the notifications UI.n *n * Note that every unhandled
and not stopped `warning` notification will be displayed as system alert.n
* See {@link
module:ui/notification/notification~Notification#showWarning}.n *n *
@extends module:core/plugin~Pluginn */nexport default class Notification
extends Plugin {nt/**nt * @inheritDocnt */ntstatic get pluginName()
{nttreturn &#39;Notification&#39;;nt}nnt/**nt * @inheritDocnt */ntinit()
{ntt// Each unhandled and not stopped `show:warning` event is displayed as
system alert.nttthis.on( &#39;show:warning&#39;, ( evt, data ) =&gt;
{ntttwindow.alert( data.message ); // eslint-disable-line no-alertntt}, {
priority: &#39;lowest&#39; } );nt}nnt/**nt * Shows success notification.nt
*nt * At default it fires `show:success` event with given data but event
namespace can be extendednt * by `data.namespace` option e.g.nt *nt *
ttshowSuccess( &#39;Image is uploaded.&#39;, {nt * tttnamespace:
&#39;upload:image&#39;nt * tt} );nt *nt * will fire
`show:success:upload:image` event.nt * Title of the notification can be
provided:nt *nt *ttshowSuccess( &#39;Image is uploaded.&#39;, {nt
*ttttitle: &#39;Image upload success&#39;nt *tt});nt *nt * @param {String}
message Content of the notification.nt * @param {Object} [data={}]
Additional data.nt * @param {String} [data.namespace] Additional event
namespace.nt * @param {String} [data.title] Title of the notification.nt
*/ntshowSuccess( message, data = {} ) {nttthis._showNotification(
{ntttmessage,nttttype: &#39;success&#39;,ntttnamespace:
data.namespace,nttttitle: data.titlentt} );nt}nnt/**nt * Shows info
notification.nt *nt * At default it fires `show:info` event with given data
but event namespace can be extendednt * by `data.namespace` option e.g.nt
*nt * ttshowInfo( &#39;Editor is offline.&#39;, {nt * tttnamespace:
&#39;editor:status&#39;nt * tt} );nt *nt * will fire
`show:info:editor:status` event.nt * Title of the notification can be
provided:nt *nt *ttshowInfo( &#39;Editor is offline.&#39;, {nt *ttttitle:
&#39;Network information&#39;nt *tt});nt *nt * @param {String} message
Content of the notification.nt * @param {Object} [data={}] Additional
data.nt * @param {String} [data.namespace] Additional event namespace.nt *
@param {String} [data.title] Title of the notification.nt */ntshowInfo(
message, data = {} ) {nttthis._showNotification( {ntttmessage,nttttype:
&#39;info&#39;,ntttnamespace: data.namespace,nttttitle: data.titlentt}
);nt}nnt/**nt * Shows warning notification.nt *nt * At default it fires
`show:warning` event with given data but event namespace can be extendednt
* by `data.namespace` option e.g.nt *nt * ttshowWarning( &#39;Image upload
error.&#39;, {nt * tttnamespace: &#39;upload:image&#39;nt * tt} );nt *nt *
will fire `show:warning:upload:image` event.nt * Title of the notification
can be provided:nt *nt *ttshowWarning( &#39;Image upload error.&#39;, {nt
*ttttitle: &#39;Upload failed&#39;nt *tt});nt *nt * Note that each
unhandled and not stopped `warning` notification will be displayed as
system alert.nt * Plugin responsible for displaying warnings should
`stop()` the event to prevent of displaying it as alert:nt *nt *
ttnotifications.on( &#39;show:warning&#39;, ( evt, data ) =&gt; {nt * ttt//
Do something with data.nt *nt * ttt// Stop this event to prevent of
displaying as alert.nt * tttevt.stop();nt * tt} );nt *nt * You can attach
many listeners to the same event and `stop()` this event in the listener
with the low priority:nt *nt * ttnotifications.on( &#39;show:warning&#39;,
( evt, data ) =&gt; {nt * ttt// Show warning in the UI, but not stop it.nt
* tt} );nt *nt * ttnotifications.on( &#39;show:warning&#39;, ( evt, data )
=&gt; {nt * ttt// Log warning to some error tracker.nt *nt * ttt// Stop
this event to prevent of displaying as alert.nt * tttevt.stop();nt * tt}, {
priority: &#39;low&#39; } );nt *nt * @param {String} message Content of the
notification.nt * @param {Object} [data={}] Additional data.nt * @param
{String} [data.namespace] Additional event namespace.nt * @param {String}
[data.title] Title of the notification.nt */ntshowWarning( message, data =
{} ) {nttthis._showNotification( {ntttmessage,nttttype:
&#39;warning&#39;,ntttnamespace: data.namespace,nttttitle: data.titlentt}
);nt}nnt/**nt * Fires `show` event with specified type, namespace and
message.nt *nt * @privatent * @param {Object} data Message data.nt * @param
{String} data.message Content of the notification.nt * @param
{&#39;success&#39;|&#39;info&#39;|&#39;warning&#39;} data.type Type of
message.nt * @param {String} [data.namespace] Additional event namespace.nt
* @param {String} [data.title=&#39;&#39;] Title of the notification.nt
*/nt_showNotification( data ) {nttconst event = `show:${ data.type }` + (
data.namespace ? `:${ data.namespace }` : &#39;&#39; );nnttthis.fire(
event, {ntttmessage: data.message,nttttype: data.type,nttttitle: data.title
|| &#39;&#39;ntt} );nt}nnt/**nt * Fired when one of `showSuccess`,
`showInfo`, `showWarning` methods is called.nt *nt * @event shownt * @param
{Object} data Notification data.nt * @param {String} data.message Content
of the notification.nt * @param {String} data.title Title of the
notification.nt * @param
{&#39;success&#39;|&#39;info&#39;|&#39;warning&#39;} data.type Type of
notification.nt */nnt/**nt * Fired when `showSuccess` method is called.nt
*nt * @event show:successnt * @param {Object} data Notification data.nt *
@param {String} data.message Content of the notification.nt * @param
{String} data.title Title of the notification.nt * @param
{&#39;success&#39;} data.type Type of notification.nt */nnt/**nt * Fired
when `showInfo` method is called.nt *nt * @event show:infont * @param
{Object} data Notification data.nt * @param {String} data.message Content
of the notification.nt * @param {String} data.title Title of the
notification.nt * @param {&#39;info&#39;} data.type Type of notification.nt
*/nnt/**nt * Fired when `showWarning` method is called.nt *nt * When this
event won&#39;t be handled and stopped by `event.stop()` then data.message
of this event willnt * be automatically displayed as system alert.nt *nt *
@event show:warningnt * @param {Object} data Notification data.nt * @param
{String} data.message Content of the notification.nt * @param {String}
data.title Title of the notification.nt * @param {&#39;warning&#39;}
data.type Type of notification.nt */n}nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-ui/src/notification/notification.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module easy-image/easyimagen */nnimport Plugin
from &#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport
CloudServicesUploadAdapter from
&#39;./cloudservicesuploadadapter&#39;;nimport Image from
&#39;@ckeditor/ckeditor5-image/src/image&#39;;nimport ImageUpload from
&#39;@ckeditor/ckeditor5-image/src/imageupload&#39;;nn/**n * The Easy Image
feature.n *n * This plugin enables:n *n * * {@link
module:image/image~Image},n * * {@link
module:image/imageupload~ImageUpload},n * * {@link
module:easy-image/cloudservicesuploadadapter~CloudServicesUploadAdapter}.n
*n * After enabling the Easy Image plugin you need to configure the
[CKEditor Cloud Services](<a
href="https://ckeditor.com/ckeditor-cloud-services/)\n">ckeditor.com/ckeditor-cloud-services/)n</a>
* integration through {@link
module:cloud-services/cloudservices~CloudServicesConfig
`config.cloudServices`}.n *n * @extends module:core/plugin~Pluginn
*/nexport default class EasyImage extends Plugin {nt/**nt * @inheritDocnt
*/ntstatic get requires() {nttreturn
[ntttCloudServicesUploadAdapter,ntttImage,ntttImageUploadntt];nt}nnt/**nt *
@inheritDocnt */ntstatic get pluginName() {nttreturn
&#39;EasyImage&#39;;nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-easy-image/src/easyimage.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module ui/modeln */nnimport extend from
&#39;@ckeditor/ckeditor5-utils/src/lib/lodash/extend&#39;;nimport mix from
&#39;@ckeditor/ckeditor5-utils/src/mix&#39;;nimport ObservableMixin from
&#39;@ckeditor/ckeditor5-utils/src/observablemixin&#39;;nn/**n * The base
MVC model class.n *n * @mixes module:utils/observablemixin~ObservableMixinn
*/nexport default class Model {nt/**nt * Creates a new Model instance.nt
*nt * @param {Object} [attributes] The model state attributes to be defined
during the instance creation.nt * @param {Object} [properties] The (out of
state) properties to be appended to the instance during creation.nt
*/ntconstructor( attributes, properties ) {ntt// Extend this instance with
the additional (out of state) properties.nttif ( properties ) {ntttextend(
this, properties );ntt}nntt// Initialize the attributes.nttif ( attributes
) {ntttthis.set( attributes );ntt}nt}n}nnmix( Model, ObservableMixin
);nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-ui/src/model.jsn// module id = nulln// module chunks = “,”/**n
* @license Copyright © 2003-2018, CKSource - Frederico Knabben. All rights
reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
ui/dropdown/dropdownpanelviewn */nnimport View from
&#39;../view&#39;;nn/**n * The dropdown panel view class.n *n * See {@link
module:ui/dropdown/dropdownview~DropdownView} to learn about the common
usage.n *n * @extends module:ui/view~Viewn */nexport default class
DropdownPanelView extends View {nt/**nt * @inheritDocnt */ntconstructor(
locale ) {nttsuper( locale );nnttconst bind = this.bindTemplate;nntt/**ntt
* Controls whether the panel is visible.ntt *ntt * @observablentt * @member
{Boolean} isVisiblentt */nttthis.set( &#39;isVisible&#39;, false
);nntt/**ntt * Collection of the child views in this panel.ntt *ntt * A
common child type is the {@link module:ui/list/listview~ListView} and
{@link module:ui/toolbar/toolbarview~ToolbarView}.ntt * See {@link
module:ui/dropdown/utils~addListToDropdown} andntt * {@link
module:ui/dropdown/utils~addToolbarToDropdown} to learn more about child
views of dropdowns.ntt *ntt * @readonlyntt * @member
{module:ui/viewcollection~ViewCollection}ntt */nttthis.children =
this.createCollection();nnttthis.setTemplate( {nttttag:
&#39;div&#39;,nntttattributes: {nttttclass:
[nttttt&#39;ck&#39;,nttttt&#39;ck-reset&#39;,nttttt&#39;ck-dropdown__panel&#39;,ntttttbind.if(
&#39;isVisible&#39;, &#39;ck-dropdown__panel-visible&#39;
)ntttt]nttt},nntttchildren: this.children,nnttton: {ntttt// Drag and drop
in the panel should not break the selection in the editor.ntttt// <a
href="https://github.com/ckeditor/ckeditor5-ui/issues/228\n\t\t\t\tselectstart">github.com/ckeditor/ckeditor5-ui/issues/228nttttselectstart</a>:
bind.to( evt =&gt; evt.preventDefault() )nttt}ntt} );nt}nnt/**nt * Focuses
the view element or first item in view collection on opening dropdown&#39;s
panel.nt *nt * See also {@link
module:ui/dropdown/dropdownpanelfocusable~DropdownPanelFocusable}.nt
*/ntfocus() {nttif ( this.children.length )
{ntttthis.children.first.focus();ntt}nt}nnt/**nt * Focuses the view element
or last item in view collection on opening dropdown&#39;s panel.nt *nt *
See also {@link
module:ui/dropdown/dropdownpanelfocusable~DropdownPanelFocusable}.nt
*/ntfocusLast() {nttif ( this.children.length ) {ntttconst lastChild =
this.children.last;nntttif ( typeof lastChild.focusLast ===
&#39;function&#39; ) {nttttlastChild.focusLast();nttt} else
{nttttlastChild.focus();nttt}ntt}nt}n}nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-ui/src/dropdown/dropdownpanelview.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module ui/dropdown/dropdownviewn */nnimport View
from &#39;../view&#39;;nimport FocusTracker from
&#39;@ckeditor/ckeditor5-utils/src/focustracker&#39;;nimport
KeystrokeHandler from
&#39;@ckeditor/ckeditor5-utils/src/keystrokehandler&#39;;nnimport
&#39;../../theme/components/dropdown/dropdown.css&#39;;nn/**n * The
dropdown view class. It manages the dropdown button and dropdown panel.n *n
* In most cases, the easiest way to create a dropdown is by using the
{@link module:ui/dropdown/utils~createDropdown}n * util:n *n *ttconst
dropdown = createDropdown( locale );n *n *tt// Configure dropdown&#39;s
button properties:n *ttdropdown.buttonView.set( {n *tttlabel: &#39;A
dropdown&#39;,n *tttwithText: truen *tt} );n *n *ttdropdown.render();n *n
*ttdropdown.panelView.element.textContent = &#39;Content of the
panel&#39;;n *n *tt// Will render a dropdown with a panel containing a
"Content of the panel&quot; text.n *ttdocument.body.appendChild(
dropdown.element );n *n * If you want to add a richer content to the
dropdown panel, you can use the {@link
module:ui/dropdown/utils~addListToDropdown}n * and {@link
module:ui/dropdown/utils~addToolbarToDropdown} helpers. See more examples
inn * {@link module:ui/dropdown/utils~createDropdown} documentation.n *n *
If you want to create a completely custom dropdown, then you can compose it
manually:n *n *ttconst button = new DropdownButtonView( locale );n *ttconst
panel = new DropdownPanelView( locale );n *ttconst dropdown = new
DropdownView( locale, button, panel );n *n *ttbutton.set( {n *tttlabel:
&#39;A dropdown&#39;,n *tttwithText: truen *tt} );n *n
*ttdropdown.render();n *n *ttpanel.element.textContent = &#39;Content of
the panel&#39;;n *n *tt// Will render a dropdown with a panel containing a
"Content of the panel&quot; text.n *ttdocument.body.appendChild(
dropdown.element );n *n * However, dropdown created this way will contain
little behavior. You will need to implement handlers for actionsn * such as
{@link module:ui/bindings/clickoutsidehandler~clickOutsideHandler clicking
outside an open dropdown}n * (which should close it) and support for arrow
keys inside the panel. Therefore, unless you really know whatn * you do and
you really need to do it, it is recommended to use the {@link
module:ui/dropdown/utils~createDropdown} helper.n *n * @extends
module:ui/view~Viewn */nexport default class DropdownView extends View
{nt/**nt * Creates an instance of the dropdown.nt *nt * Also see {@link
render}.nt *nt * @param {module:utils/locale~Locale} [locale] The
localization services instance.nt * @param
{module:ui/dropdown/button/dropdownbutton~DropdownButton} buttonViewnt *
@param {module:ui/dropdown/dropdownpanelview~DropdownPanelView} panelViewnt
*/ntconstructor( locale, buttonView, panelView ) {nttsuper( locale
);nnttconst bind = this.bindTemplate;nntt/**ntt * Button of the dropdown
view. Clicking the button opens the {@link panelView}.ntt *ntt *
@readonlyntt * @member {module:ui/button/buttonview~ButtonView}
buttonViewntt */nttthis.buttonView = buttonView;nntt/**ntt * Panel of the
dropdown. It opens when the {@link buttonView} isntt * {@link
module:ui/button/buttonview~ButtonView#event:execute executed} (i.e.
clicked).ntt *ntt * Child views can be added to the panel&#39;s `children`
collection:ntt *ntt *ttdropdown.panelView.children.add( childView );ntt
*ntt * See {@link
module:ui/dropdown/dropdownpanelview~DropdownPanelView#children} andntt *
{@link module:ui/viewcollection~ViewCollection#add}.ntt *ntt * @readonlyntt
* @member {module:ui/dropdown/dropdownpanelview~DropdownPanelView}
panelViewntt */nttthis.panelView = panelView;nntt/**ntt * Controls whether
the dropdown view is open, i.e. shows or hides the {@link panelView
panel}.ntt *ntt * @observablentt * @member {Boolean} isOpenntt
*/nttthis.set( &#39;isOpen&#39;, false );nntt/**ntt * Controls whether the
dropdown is enabled, i.e. it can be clicked and execute an action.ntt *ntt
* See {@link module:ui/button/buttonview~ButtonView#isEnabled}.ntt *ntt *
@observablentt * @member {Boolean} isEnabledntt */nttthis.set(
&#39;isEnabled&#39;, true );nntt/**ntt * Tracks information about DOM focus
in the dropdown.ntt *ntt * @readonlyntt * @member
{module:utils/focustracker~FocusTracker}ntt */nttthis.focusTracker = new
FocusTracker();nntt/**ntt * Instance of the {@link
module:utils/keystrokehandler~KeystrokeHandler}. It managesntt * keystrokes
of the dropdown:ntt *ntt * * &lt;kbd&gt;▼&lt;/kbd&gt; opens the
dropdown,ntt * * &lt;kbd&gt;◀&lt;/kbd&gt; and &lt;kbd&gt;Esc&lt;/kbd&gt;
closes the dropdown.ntt *ntt * @readonlyntt * @member
{module:utils/keystrokehandler~KeystrokeHandler}ntt */nttthis.keystrokes =
new KeystrokeHandler();nnttthis.setTemplate( {nttttag:
&#39;div&#39;,nntttattributes: {nttttclass:
[nttttt&#39;ck&#39;,nttttt&#39;ck-dropdown&#39;,ntttttbind.to(
&#39;isEnabled&#39;, isEnabled =&gt; isEnabled ? &#39;&#39; :
&#39;ck-disabled&#39; )ntttt]nttt},nntttchildren:
[nttttbuttonView,nttttpanelViewnttt]ntt} );nnttbuttonView.extendTemplate(
{ntttattributes: {nttttclass:
[nttttt&#39;ck-dropdown__button&#39;,ntttt]nttt}ntt} );nntt/**ntt * A child
{@link module:ui/list/listview~ListView list view} of the dropdown
locatedntt * in its {@link
module:ui/dropdown/dropdownview~DropdownView#panelView panel}.ntt *ntt *
*<strong>Note</strong>*: Only supported when dropdown has list view added
using {@link module:ui/dropdown/utils~addListToDropdown}.ntt *ntt *
@readonlyntt * @member {module:ui/list/listview~ListView} listViewntt
*/nntt/**ntt * A child toolbar of the dropdown located in thentt * {@link
module:ui/dropdown/dropdownview~DropdownView#panelView panel}.ntt *ntt *
*<strong>Note</strong>*: Only supported when dropdown has list view added
using {@link module:ui/dropdown/utils~addToolbarToDropdown}.ntt *ntt *
@readonlyntt * @member {module:ui/toolbar/toolbarview~ToolbarView}
toolbarViewntt */nntt/**ntt * Fired when the toolbar button or list item is
executed.ntt *ntt * For {@link listView} It fires when one of the list
items has beenntt * {@link
module:ui/list/listitemview~ListItemView#event:execute executed}.ntt *ntt *
For {@link toolbarView} It fires when one of the buttons has beenntt *
{@link module:ui/button/buttonview~ButtonView#event:execute executed}.ntt
*ntt * *<strong>Note</strong>*: Only supported when dropdown has list view
added using {@link module:ui/dropdown/utils~addListToDropdown}ntt * or
{@link module:ui/dropdown/utils~addToolbarToDropdown}.ntt *ntt * @event
executentt */nt}nnt/**nt * @inheritDocnt */ntrender()
{nttsuper.render();nntt// Toggle the dropdown when its button has been
clicked.nttthis.listenTo( this.buttonView, &#39;open&#39;, () =&gt;
{ntttthis.isOpen = !this.isOpen;ntt} );nntt// Toggle the visibility of the
panel when the dropdown becomes open.nttthis.panelView.bind(
&#39;isVisible&#39; ).to( this, &#39;isOpen&#39; );nntt// Listen for
keystrokes coming from within element.nttthis.keystrokes.listenTo(
this.element );nntt// Register element in the focus
tracker.nttthis.focusTracker.add( this.element );nnttconst closeDropdown =
( data, cancel ) =&gt; {ntttif ( this.isOpen )
{nttttthis.buttonView.focus();nttttthis.isOpen =
false;nttttcancel();nttt}ntt};nntt// Open the dropdown panel using the
arrow down key, just like with return or space.nttthis.keystrokes.set(
&#39;arrowdown&#39;, ( data, cancel ) =&gt; {nttt// Don&#39;t open if the
dropdown is disabled or already open.ntttif ( this.buttonView.isEnabled
&amp;&amp; !this.isOpen ) {nttttthis.isOpen = true;nttttcancel();nttt}ntt}
);nntt// Block the right arrow key (until nested dropdowns are
implemented).nttthis.keystrokes.set( &#39;arrowright&#39;, ( data, cancel )
=&gt; {ntttif ( this.isOpen ) {nttttcancel();nttt}ntt} );nntt// Close the
dropdown using the arrow left/escape key.nttthis.keystrokes.set(
&#39;arrowleft&#39;, closeDropdown );nttthis.keystrokes.set( &#39;esc&#39;,
closeDropdown );nt}nnt/**nt * Focuses the {@link buttonView}.nt */ntfocus()
{nttthis.buttonView.focus();nt}n}nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-ui/src/dropdown/dropdownview.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2017, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module ui/dropdown/button/dropdownbuttonviewn
*/nnimport ButtonView from &#39;../../button/buttonview&#39;;nnimport
dropdownArrowIcon from
&#39;../../../theme/icons/dropdown-arrow.svg&#39;;nimport IconView from
&#39;../../icon/iconview&#39;;nn/**n * The default dropdown button view
class.n *n *ttconst view = new DropdownButtonView();n *n *ttview.set( {n
*tttlabel: &#39;A button&#39;,n *tttkeystroke: &#39;Ctrl+B&#39;,n
*ttttooltip: truen *tt} );n *n *ttview.render();n *n
*ttdocument.body.append( view.element );n *n * Also see the {@link
module:ui/dropdown/utils~createDropdown `createDropdown()` util}.n *n *
@implements module:ui/dropdown/button/dropdownbutton~DropdownButtonn *
@extends module:ui/button/buttonview~ButtonViewn */nexport default class
DropdownButtonView extends ButtonView {nt/**nt * @inheritDocnt
*/ntconstructor( locale ) {nttsuper( locale );nntt/**ntt * An icon that
displays arrow to indicate a dropdown button.ntt *ntt * @readonlyntt *
@member {module:ui/icon/iconview~IconView}ntt */nttthis.arrowView =
this._createArrowView();nntt// The DropdownButton interface expects the
open event upon which will open the dropdown.nttthis.delegate(
&#39;execute&#39; ).to( this, &#39;open&#39; );nt}nnt/**nt * @inheritDocnt
*/ntrender() {nttsuper.render();nnttthis.children.add( this.arrowView
);nt}nnt/**nt * Creates a {@link module:ui/icon/iconview~IconView} instance
as {@link arrowView}.nt *nt * @privatent * @returns
{module:ui/icon/iconview~IconView}nt */nt_createArrowView() {nttconst
arrowView = new IconView();nnttarrowView.content =
dropdownArrowIcon;nnttarrowView.extendTemplate( {ntttattributes:
{nttttclass: &#39;ck-dropdown__arrow&#39;nttt}ntt} );nnttreturn
arrowView;nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-ui/src/dropdown/button/dropdownbuttonview.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module ui/list/listviewn */nnimport View from
&#39;../view&#39;;nimport FocusTracker from
&#39;@ckeditor/ckeditor5-utils/src/focustracker&#39;;nimport FocusCycler
from &#39;../focuscycler&#39;;nimport KeystrokeHandler from
&#39;@ckeditor/ckeditor5-utils/src/keystrokehandler&#39;;nnimport
&#39;../../theme/components/list/list.css&#39;;nn/**n * The list view
class.n *n * @extends module:ui/view~Viewn * @implements
module:ui/dropdown/dropdownpanelfocusable~DropdownPanelFocusablen */nexport
default class ListView extends View {nt/**nt * @inheritDocnt
*/ntconstructor() {nttsuper();nntt/**ntt * Collection of the child list
views.ntt *ntt * @readonlyntt * @member
{module:ui/viewcollection~ViewCollection}ntt */nttthis.items =
this.createCollection();nntt/**ntt * Tracks information about DOM focus in
the list.ntt *ntt * @readonlyntt * @member
{module:utils/focustracker~FocusTracker}ntt */nttthis.focusTracker = new
FocusTracker();nntt/**ntt * Instance of the {@link
module:utils/keystrokehandler~KeystrokeHandler}.ntt *ntt * @readonlyntt *
@member {module:utils/keystrokehandler~KeystrokeHandler}ntt
*/nttthis.keystrokes = new KeystrokeHandler();nntt/**ntt * Helps cycling
over focusable {@link items} in the list.ntt *ntt * @readonlyntt *
@protectedntt * @member {module:ui/focuscycler~FocusCycler}ntt
*/nttthis._focusCycler = new FocusCycler( {ntttfocusables:
this.items,ntttfocusTracker: this.focusTracker,ntttkeystrokeHandler:
this.keystrokes,ntttactions: {ntttt// Navigate list items backwards using
the arrowup key.nttttfocusPrevious: &#39;arrowup&#39;,nntttt// Navigate
toolbar items forwards using the arrowdown key.nttttfocusNext:
&#39;arrowdown&#39;,nttt}ntt} );nnttthis.setTemplate( {nttttag:
&#39;ul&#39;,nntttattributes: {nttttclass:
[nttttt&#39;ck&#39;,nttttt&#39;ck-reset&#39;,nttttt&#39;ck-list&#39;ntttt]nttt},nntttchildren:
this.itemsntt} );nt}nnt/**nt * @inheritDocnt */ntrender()
{nttsuper.render();nntt// Items added before rendering should be known to
the focusTracker.nttfor ( const item of this.items )
{ntttthis.focusTracker.add( item.element );ntt}nnttthis.items.on(
&#39;add&#39;, ( evt, item ) =&gt; {ntttthis.focusTracker.add( item.element
);ntt} );nnttthis.items.on( &#39;remove&#39;, ( evt, item ) =&gt;
{ntttthis.focusTracker.remove( item.element );ntt} );nntt// Start listening
for the keystrokes coming from element.nttthis.keystrokes.listenTo(
this.element );nt}nnt/**nt * Focuses the first focusable in {@link
items}.nt */ntfocus() {nttthis._focusCycler.focusFirst();nt}nnt/**nt *
Focuses the last focusable in {@link items}.nt */ntfocusLast()
{nttthis._focusCycler.focusLast();nt}n}nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-ui/src/list/listview.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nn/**n * @module ui/list/listitemviewn */nnimport View from
&#39;../view&#39;;nimport KeystrokeHandler from
&#39;@ckeditor/ckeditor5-utils/src/keystrokehandler&#39;;nn/**n * The list
item view class.n *n * @extends module:ui/view~Viewn */nexport default
class ListItemView extends View {nt/**nt * @inheritDocnt */ntconstructor()
{nttsuper();nntt/**ntt * Controls the `tabindex` attribute of the item.ntt
*ntt * @observablentt * @default -1ntt * @member {String} tabindexntt
*/nttthis.set( &#39;tabindex&#39;, -1 );nntt/**ntt * Instance of the {@link
module:utils/keystrokehandler~KeystrokeHandler}.ntt *ntt * @readonlyntt *
@member {module:utils/keystrokehandler~KeystrokeHandler}ntt
*/nttthis.keystrokes = new KeystrokeHandler();nnttconst bind =
this.bindTemplate;nnttthis.setTemplate( {nttttag:
&#39;li&#39;,nntttattributes: {nttttclass:
[nttttt&#39;ck&#39;,nttttt&#39;ck-list__item&#39;,ntttttbind.to(
&#39;class&#39; ),ntttttbind.if( &#39;isActive&#39;,
&#39;ck-list__item_active&#39; )ntttt],nttttstyle: bind.to( &#39;style&#39;
),ntttttabindex: bind.to( &#39;tabindex&#39; )nttt},nntttchildren:
[ntttt{nttttttext: bind.to( &#39;label&#39; )ntttt}nttt],nnttton:
{nttttclick: bind.to( &#39;execute&#39; )nttt}ntt} );nntt/**ntt * The label
of the list item.ntt *ntt * @observablentt * @member {String} labelntt
*/nntt/**ntt * (Optional) The DOM style attribute of the list item.ntt *ntt
* @observablentt * @member {String} stylentt */nntt/**ntt * (Optional) The
additional class set on the {@link element}.ntt *ntt * @observablentt *
@member {String} classntt */nntt/**ntt * (Optional) When set, it marks the
item as active among the others.ntt *ntt * @observablentt * @member
{Boolean} isActiventt */nntt/**ntt * Fired when the list item has been
clicked.ntt *ntt * @event executentt */nt}nnt/**nt * @inheritDocnt
*/ntrender() {nttsuper.render();nnttconst onKeystrokePress = ( data, cancel
) =&gt; {ntttthis.fire( &#39;execute&#39;
);ntttcancel();ntt};nnttthis.keystrokes.listenTo( this.element );nntt//
Execute on Enter and Space key press.nttthis.keystrokes.set(
&#39;Enter&#39;, onKeystrokePress );nttthis.keystrokes.set(
&#39;Space&#39;, onKeystrokePress );nt}nnt/**nt * Focuses the list item.nt
*/ntfocus() {nttthis.element.focus();nt}n}nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-ui/src/list/listitemview.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/n/**n * @module heading/headinguin */nimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport Model from
&#39;@ckeditor/ckeditor5-ui/src/model&#39;;nimport {n    createDropdown,n  
addListToDropdownn} from
&#39;@ckeditor/ckeditor5-ui/src/dropdown/utils&#39;;nimport {
getLocalizedOptions } from &#39;./utils&#39;;nimport Collection from
&#39;@ckeditor/ckeditor5-utils/src/collection&#39;;nimport
&#39;../theme/heading.css&#39;;n/**n * The headings UI feature. It
introduces the `headings` dropdown.n *n * @extends
module:core/plugin~Pluginn */nexport default class HeadingUI extends Plugin
{n    /**nt * @inheritDocnt */n    init() {n        const editor =
this.editor;n        const t = editor.t;n        const options =
getLocalizedOptions(editor);n        const defaultTitle = t(&#39;o&#39;);n 
const dropdownTooltip = t(&#39;p&#39;);n        // Register UI component.n 
editor.ui.componentFactory.add(&#39;heading&#39;, locale =&gt; {n          
const titles = {};n            const dropdownItems = new Collection();n    
const headingCommand = editor.commands.get(&#39;heading&#39;);n           
const paragraphCommand = editor.commands.get(&#39;paragraph&#39;);n        
const commands = [headingCommand];n            for (const option of
options) {n                const itemModel = new Model({n                  
label: option.title,n                    class: option.classn              
});n                if (option.model === &#39;paragraph&#39;) {n           
itemModel.bind(&#39;isActive&#39;).to(paragraphCommand, &#39;value&#39;);n 
itemModel.set(&#39;commandName&#39;, &#39;paragraph&#39;);n                
commands.push(paragraphCommand);n                } else {n                 
itemModel.bind(&#39;isActive&#39;).to(headingCommand, &#39;value&#39;,
value =&gt; value === option.model);n                    itemModel.set({n  
commandName: &#39;heading&#39;,n                        commandValue:
option.modeln                    });n                }n                //
Add the option to the collection.n               
dropdownItems.add(itemModel);n                <a
href="option.model">titles</a> = option.title;n            }n           
const dropdownView = createDropdown(locale);n           
addListToDropdown(dropdownView, dropdownItems);n           
dropdownView.buttonView.set({n                isOn: false,n               
withText: true,n                tooltip: dropdownTooltipn            });n  
dropdownView.extendTemplate({ attributes: { class:
[&#39;ck-heading-dropdown&#39;] } });n           
dropdownView.bind(&#39;isEnabled&#39;).toMany(commands,
&#39;isEnabled&#39;, (…areEnabled) =&gt; {n                return
areEnabled.some(isEnabled =&gt; isEnabled);n            });n           
dropdownView.buttonView.bind(&#39;label&#39;).to(headingCommand,
&#39;value&#39;, paragraphCommand, &#39;value&#39;, (value, para) =&gt; {n 
const whichModel = value || para &amp;&amp; &#39;paragraph&#39;;n          
// If none of the commands is active, display default title.n              
return <a href="whichModel">titles</a> ? <a href="whichModel">titles</a> :
defaultTitle;n            });n            // Execute command when an item
from the dropdown is selected.n            this.listenTo(dropdownView,
&#39;execute&#39;, evt =&gt; {n               
editor.execute(evt.source.commandName, evt.source.commandValue ? { value:
evt.source.commandValue } : undefined);n               
editor.editing.view.focus();n            });n            return
dropdownView;n        });n    }n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-heading/src/headingui.jsn// module id = nulln// module chunks
= “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben.
All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
heading/headingn */nnimport HeadingEditing from
&#39;./headingediting&#39;;nimport HeadingUI from
&#39;./headingui&#39;;nimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nnimport
&#39;../theme/heading.css&#39;;nn/**n * The headings feature.n *n * It
loads the {@link module:heading/headingediting~HeadingEditing heading
editing feature}n * and {@link module:heading/headingui~HeadingUI heading
UI feature}.n *n * For a detailed overview, check the {@glink
features/headings Headings feature documentation}.n *n * @extends
module:core/plugin~Pluginn */nexport default class Heading extends Plugin
{nt/**nt * @inheritDocnt */ntstatic get requires() {nttreturn [
HeadingEditing, HeadingUI ];nt}nnt/**nt * @inheritDocnt */ntstatic get
pluginName() {nttreturn &#39;Heading&#39;;nt}n}nn/**n * The configuration
of the heading feature. Introduced by the {@link
module:heading/headingediting~HeadingEditing} feature.n *n * Read more in
{@link module:heading/heading~HeadingConfig}.n *n * @member
{module:heading/heading~HeadingConfig}
module:core/editor/editorconfig~EditorConfig#headingn */nn/**n * The
configuration of the heading feature.n * The option is used by the {@link
module:heading/headingediting~HeadingEditing} feature.n *n
*ttClassicEditorn *ttt.create( {n * ttttheading: … // Heading feature
config.n *ttt} )n *ttt.then( … )n *ttt.catch( … );n *n * See {@link
module:core/editor/editorconfig~EditorConfig all editor options}.n *n *
@interface HeadingConfign */nn/**n * The available heading options.n *n *
The default value is:n *n *ttconst headingConfig = {n *tttoptions: [n
*tttt{ model: &#39;paragraph&#39;, title: &#39;Paragraph&#39;, class:
&#39;ck-heading_paragraph&#39; },n *tttt{ model: &#39;heading1&#39;, view:
&#39;h2&#39;, title: &#39;Heading 1&#39;, class:
&#39;ck-heading_heading1&#39; },n *tttt{ model: &#39;heading2&#39;, view:
&#39;h3&#39;, title: &#39;Heading 2&#39;, class:
&#39;ck-heading_heading2&#39; },n *tttt{ model: &#39;heading3&#39;, view:
&#39;h4&#39;, title: &#39;Heading 3&#39;, class:
&#39;ck-heading_heading3&#39; }n *ttt]n *tt};n *n * It defines 3 levels of
headings. In the editor model they will use `heading1`, `heading2`, and
`heading3` elements.n * Their respective view elements (so the elements
output by the editor) will be: `h2`, `h3`, and `h4`. This means thatn * if
you choose "Heading 1&quot; in the headings dropdown the editor will turn
the current block to `&lt;heading1&gt;` in the modeln * which will result
in rendering (and outputting to data) the `&lt;h2&gt;` element.n *n * The
`title` and `class` properties will be used by the `headings` dropdown to
render available options.n * Usually, the first option in the headings
dropdown is the "Paragraph&quot; option, hence it&#39;s also defined on the
list.n * However, you don&#39;t need to define its view representation
because it&#39;s handled byn * the {@link
module:paragraph/paragraph~Paragraph} feature (which is required byn * the
{@link module:heading/headingediting~HeadingEditing} feature).n *n * You
can **read more** about configuring heading levels and **see more
examples** inn * the {@glink features/headings Headings} guide.n *n * Note:
In the model you should always start from `heading1`, regardless of how the
headings are represented in the view.n * That&#39;s assumption is used by
features like {@link module:autoformat/autoformat~Autoformat} to know which
elementn * they should use when applying the first level heading.n *n * The
defined headings are also available as values passed to `heading` command
under their model names.n * For example, the below code will apply
`&lt;heading1&gt;` to the current selection:n *n *tteditor.execute(
&#39;heading&#39;, { value: &#39;heading1&#39; } );n *n * @member
{Array.&lt;module:heading/heading~HeadingOption&gt;}
module:heading/heading~HeadingConfig#optionsn */nn/**n * Heading option
descriptor.n *n * @typedef {Object} module:heading/heading~HeadingOptionn *
@property {String} model Name of the model element to convert.n * @property
{module:engine/view/elementdefinition~ElementDefinition} view Definition of
a view element to convert from/to.n * @property {String} title The
user-readable title of the option.n * @property {String} class The class
which will be added to the dropdown item representing this option.n *
@property {String} [icon] Icon used by {@link
module:heading/headingbuttonsui~HeadingButtonsUI}. It can be omitted when
usingn * the default configuration.n */nnnn//////////////////n// WEBPACK
FOOTERn// ../ckeditor5-heading/src/heading.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n *
@module image/imagecaptionn */nnimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport ImageCaptionEditing
from &#39;./imagecaption/imagecaptionediting&#39;;nnimport
&#39;../theme/imagecaption.css&#39;;nn/**n * The image caption plugin.n *n
* For a detailed overview, check the {@glink features/image#image-captions
image caption} documentation.n *n * @extends module:core/plugin~Pluginn
*/nexport default class ImageCaption extends Plugin {nt/**nt *
@inheritDocnt */ntstatic get requires() {nttreturn [ ImageCaptionEditing
];nt}nnt/**nt * @inheritDocnt */ntstatic get pluginName() {nttreturn
&#39;ImageCaption&#39;;nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-image/src/imagecaption.jsn// module id = nulln// module chunks
= “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben.
All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
image/imagestyle/imagestylecommandn */nnimport Command from
&#39;@ckeditor/ckeditor5-core/src/command&#39;;nimport { isImage } from
&#39;../image/utils&#39;;nn/**n * The image style command. It is used to
apply different image styles.n *n * @extends module:core/command~Commandn
*/nexport default class ImageStyleCommand extends Command {nt/**nt *
Creates an instance of the image style command. Each command instance is
handling one style.nt *nt * @param {module:core/editor/editor~Editor}
editor The editor instance.nt * @param
{Array.&lt;module:image/imagestyle/imagestyleediting~ImageStyleFormat&gt;}
styles The styles that this command supports.nt */ntconstructor( editor,
styles ) {nttsuper( editor );nntt/**ntt * The cached name of the default
style if it is present. If there is no default style, it defaults to
`false`.ntt *ntt * @type {Boolean|String}ntt * @privatentt
*/nttthis._defaultStyle = false;nntt/**ntt * A style handled by this
command.ntt *ntt * @readonlyntt * @member
{Array.&lt;module:image/imagestyle/imagestyleediting~ImageStyleFormat&gt;}
stylesntt */nttthis.styles = styles.reduce( ( styles, style ) =&gt;
{ntttstyles[ style.name ] = style;nntttif ( style.isDefault )
{nttttthis._defaultStyle = style.name;nttt}nntttreturn styles;ntt}, {}
);nt}nnt/**nt * @inheritDocnt */ntrefresh() {nttconst element =
this.editor.model.document.selection.getSelectedElement();nnttthis.isEnabled
= isImage( element );nnttif ( !element ) {ntttthis.value = false;ntt} else
if ( element.hasAttribute( &#39;imageStyle&#39; ) ) {ntttconst
attributeValue = element.getAttribute( &#39;imageStyle&#39;
);ntttthis.value = this.styles[ attributeValue ] ? attributeValue :
false;ntt} else {ntttthis.value = this._defaultStyle;ntt}nt}nnt/**nt *
Executes the command.nt *nt *tteditor.execute( &#39;imageStyle&#39;, {
value: &#39;side&#39; } );nt *nt * @param {Object} optionsnt * @param
{String} options.value The name of the style (based on thent * {@link
module:image/image~ImageConfig#styles `image.styles`} configuration
option).nt * @fires executent */ntexecute( options ) {nttconst styleName =
options.value;nnttconst model = this.editor.model;nttconst imageElement =
model.document.selection.getSelectedElement();nnttmodel.change( writer
=&gt; {nttt// Default style means that there is no `imageStyle` attribute
in the model.nttt// <a
href="https://github.com/ckeditor/ckeditor5-image/issues/147\n\t\t\tif">github.com/ckeditor/ckeditor5-image/issues/147ntttif</a>
( this.styles[ styleName ].isDefault ) {nttttwriter.removeAttribute(
&#39;imageStyle&#39;, imageElement );nttt} else {nttttwriter.setAttribute(
&#39;imageStyle&#39;, styleName, imageElement );nttt}ntt}
);nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-image/src/imagestyle/imagestylecommand.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */nn/**n * @module image/imagetoolbarn */nnimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport ToolbarView from
&#39;@ckeditor/ckeditor5-ui/src/toolbar/toolbarview&#39;;nimport
ContextualBalloon from
&#39;@ckeditor/ckeditor5-ui/src/panel/balloon/contextualballoon&#39;;nimport
{ isImageWidgetSelected } from &#39;./image/utils&#39;;nimport {
repositionContextualBalloon, getBalloonPositionData } from
&#39;./image/ui/utils&#39;;nnconst balloonClassName =
&#39;ck-toolbar-container&#39;;nn/**n * The image toolbar class. Creates an
image toolbar that shows up when the image widget is selected.n *n *
Toolbar components are created using the editor {@link
module:ui/componentfactory~ComponentFactory ComponentFactory}n * based on
the {@link module:core/editor/editor~Editor#config configuration} stored
under `image.toolbar`.n *n * The toolbar uses the {@link
module:ui/panel/balloon/contextualballoon~ContextualBalloon}.n *n * For a
detailed overview, check the {@glink
features/image#image-contextual-toolbar image contextual toolbar}
documentation.n *n * @extends module:core/plugin~Pluginn */nexport default
class ImageToolbar extends Plugin {nt/**nt * @inheritDocnt */ntstatic get
requires() {nttreturn [ ContextualBalloon ];nt}nnt/**nt * @inheritDocnt
*/ntstatic get pluginName() {nttreturn &#39;ImageToolbar&#39;;nt}nnt/**nt *
@inheritDocnt */ntinit() {nttconst editor = this.editor;nttconst
balloonToolbar = editor.plugins.get( &#39;BalloonToolbar&#39; );nntt// If
the `BalloonToolbar` plugin is loaded, it should be disabled for
imagesntt// which have their own toolbar to avoid duplication.ntt// <a
href="https://github.com/ckeditor/ckeditor5-image/issues/110\n\t\tif">github.com/ckeditor/ckeditor5-image/issues/110nttif</a>
( balloonToolbar ) {ntttthis.listenTo( balloonToolbar, &#39;show&#39;, evt
=&gt; {nttttif ( isImageWidgetSelected(
editor.editing.view.document.selection ) ) {ntttttevt.stop();ntttt}nttt}, {
priority: &#39;high&#39; } );ntt}nt}nnt/**nt * @inheritDocnt
*/ntafterInit() {nttconst editor = this.editor;nttconst toolbarConfig =
editor.config.get( &#39;image.toolbar&#39; );nntt// Don&#39;t add the
toolbar if there is no configuration.nttif ( !toolbarConfig ||
!toolbarConfig.length ) {ntttreturn;ntt}nntt/**ntt * A contextual balloon
plugin instance.ntt *ntt * @privatentt * @member
{module:ui/panel/balloon/contextualballoon~ContextualBalloon}ntt
*/nttthis._balloon = this.editor.plugins.get( &#39;ContextualBalloon&#39;
);nntt/**ntt * A `ToolbarView` instance used to display the buttons
specific for image editing.ntt *ntt * @protectedntt * @type
{module:ui/toolbar/toolbarview~ToolbarView}ntt */nttthis._toolbar = new
ToolbarView();nntt// Add buttons to the
toolbar.nttthis._toolbar.fillFromConfig( toolbarConfig,
editor.ui.componentFactory );nntt// Show balloon panel each time image
widget is selected.nttthis.listenTo( editor.editing.view, &#39;render&#39;,
() =&gt; {ntttthis._checkIsVisible();ntt} );nntt// There is no render
method after focus is back in editor, we need to check if balloon panel
should be visible.nttthis.listenTo( editor.ui.focusTracker,
&#39;change:isFocused&#39;, () =&gt; {ntttthis._checkIsVisible();ntt}, {
priority: &#39;low&#39; } );nt}nnt/**nt * Checks whether the toolbar should
show up or hide depending on the current selection.nt *nt * @privatent
*/nt_checkIsVisible() {nttconst editor = this.editor;nnttif (
!editor.ui.focusTracker.isFocused ) {ntttthis._hideToolbar();ntt} else
{ntttif ( isImageWidgetSelected( editor.editing.view.document.selection ) )
{nttttthis._showToolbar();nttt} else
{nttttthis._hideToolbar();nttt}ntt}nt}nnt/**nt * Shows the {@link
#_toolbar} in the {@link #_balloon}.nt *nt * @privatent */nt_showToolbar()
{nttconst editor = this.editor;nnttif ( this._isVisible )
{ntttrepositionContextualBalloon( editor );ntt} else {ntttif (
!this._balloon.hasView( this._toolbar ) ) {nttttthis._balloon.add(
{ntttttview: this._toolbar,ntttttposition: getBalloonPositionData( editor
),ntttttballoonClassNamentttt} );nttt}ntt}nt}nnt/**nt * Removes the {@link
#_toolbar} from the {@link #_balloon}.nt *nt * @privatent
*/nt_hideToolbar() {nttif ( !this._isVisible )
{ntttreturn;ntt}nnttthis._balloon.remove( this._toolbar );nt}nnt/**nt *
Returns `true` when the {@link #_toolbar} is the visible view in the {@link
#_balloon}.nt *nt * @privatent * @type {Boolean}nt */ntget _isVisible()
{nttreturn this._balloon.visibleView == this._toolbar;nt}n}nn/**n * Items
to be placed in the image toolbar.n * This option is used by the {@link
module:image/imagetoolbar~ImageToolbar} feature.n *n * Assuming that you
use the following features:n *n * * {@link
module:image/imagestyle~ImageStyle} (with a default configuration),n * *
{@link module:image/imagetextalternative~ImageTextAlternative},n *n * three
toolbar items will be available in {@link
module:ui/componentfactory~ComponentFactory}:n *
`&#39;imageStyle:full&#39;`, `&#39;imageStyle:side&#39;`, and
`&#39;imageTextAlternative&#39;` so you can configure the toolbar like
this:n *n *ttconst imageConfig = {n *ttttoolbar: [
&#39;imageStyle:full&#39;, &#39;imageStyle:side&#39;, &#39;|&#39;,
&#39;imageTextAlternative&#39; ]n *tt};n *n * Of course, the same buttons
can also be used in then * {@link
module:core/editor/editorconfig~EditorConfig#toolbar main editor toolbar}.n
*n * Read more about configuring toolbar in {@link
module:core/editor/editorconfig~EditorConfig#toolbar}.n *n * @member
{Array.&lt;String&gt;} module:image/image~ImageConfig#toolbarn
*/nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-image/src/imagetoolbar.jsn// module id = nulln// module chunks
= “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben.
All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
link/unlinkcommandn */nnimport Command from
&#39;@ckeditor/ckeditor5-core/src/command&#39;;nimport findLinkRange from
&#39;./findlinkrange&#39;;nn/**n * The unlink command. It is used by the
{@link module:link/link~Link link plugin}.n *n * @extends
module:core/command~Commandn */nexport default class UnlinkCommand extends
Command {nt/**nt * @inheritDocnt */ntrefresh() {nttthis.isEnabled =
this.editor.model.document.selection.hasAttribute( &#39;linkHref&#39;
);nt}nnt/**nt * Executes the command.nt *nt * When the selection is
collapsed, removes the `linkHref` attribute from each node with the same
`linkHref` attribute value.nt * When the selection is non-collapsed,
removes the `linkHref` attribute from each node in selected ranges.nt *nt *
@fires executent */ntexecute() {nttconst model = this.editor.model;nttconst
selection = model.document.selection;nnttmodel.change( writer =&gt; {nttt//
Get ranges to unlink.ntttconst rangesToUnlink = selection.isCollapsed
?ntttt[ findLinkRange( selection.getFirstPosition(),
selection.getAttribute( &#39;linkHref&#39; ) ) ] :
selection.getRanges();nnttt// Remove `linkHref` attribute from specified
ranges.ntttfor ( const range of rangesToUnlink )
{nttttwriter.removeAttribute( &#39;linkHref&#39;, range );nttt}ntt}
);nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-link/src/unlinkcommand.jsn// module id = nulln// module chunks
= “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben.
All rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
link/linkeditingn */nnimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport
{ntdowncastAttributeToElementn} from
&#39;@ckeditor/ckeditor5-engine/src/conversion/downcast-converters&#39;;nimport
{ upcastElementToAttribute } from
&#39;@ckeditor/ckeditor5-engine/src/conversion/upcast-converters&#39;;nimport
LinkCommand from &#39;./linkcommand&#39;;nimport UnlinkCommand from
&#39;./unlinkcommand&#39;;nimport { createLinkElement } from
&#39;./utils&#39;;nimport bindTwoStepCaretToAttribute from
&#39;@ckeditor/ckeditor5-engine/src/utils/bindtwostepcarettoattribute&#39;;nimport
findLinkRange from &#39;./findlinkrange&#39;;nimport
&#39;../theme/link.css&#39;;nnconst HIGHLIGHT_CLASS =
&#39;ck-link_selected&#39;;nn/**n * The link engine feature.n *n * It
introduces the `linkHref=&quot;url&quot;` attribute in the model which
renders to the view as a `&lt;a href=&quot;url&quot;&gt;` element.n *n *
@extends module:core/plugin~Pluginn */nexport default class LinkEditing
extends Plugin {nt/**nt * @inheritDocnt */ntinit() {nttconst editor =
this.editor;nntt// Allow link attribute on all inline
nodes.ntteditor.model.schema.extend( &#39;$text&#39;, { allowAttributes:
&#39;linkHref&#39; } );nntteditor.conversion.for( &#39;downcast&#39;
)nttt.add( downcastAttributeToElement( { model: &#39;linkHref&#39;, view:
createLinkElement } ) );nntteditor.conversion.for( &#39;upcast&#39;
)nttt.add( upcastElementToAttribute( {nttttview: {ntttttname:
&#39;a&#39;,ntttttattributes: {ntttttthref: truenttttt}ntttt},nttttmodel:
{ntttttkey: &#39;linkHref&#39;,ntttttvalue: viewElement =&gt;
viewElement.getAttribute( &#39;href&#39; )ntttt}nttt} ) );nntt// Create
linking commands.ntteditor.commands.add( &#39;link&#39;, new LinkCommand(
editor ) );ntteditor.commands.add( &#39;unlink&#39;, new UnlinkCommand(
editor ) );nntt// Enable two-step caret movement for `linkHref`
attribute.nttbindTwoStepCaretToAttribute( editor.editing.view,
editor.model, this, &#39;linkHref&#39; );nntt// Setup highlight over
selected link.nttthis._setupLinkHighlight();nt}nnt/**nt * Adds a visual
highlight style to a link in which the selection is anchored.nt * Together
with two-step caret movement, they indicate that the user is typing inside
the link.nt *nt * Highlight is turned on by adding `.ck-link_selected`
class to the link in the view:nt *nt * * the class is removed before
conversion has started, as callbacks added with `&#39;highest&#39;`
prioritynt * to {@link
module:engine/conversion/downcastdispatcher~DowncastDispatcher} events,nt *
* the class is added in the view post fixer, after other changes in the
model tree were converted to the view.nt *nt * This way, adding and
removing highlight does not interfere with conversion.nt *nt * @privatent
*/nt_setupLinkHighlight() {nttconst editor = this.editor;nttconst view =
editor.editing.view;nttconst highlightedLinks = new Set();nntt// Adding the
class.nttview.document.registerPostFixer( writer =&gt; {ntttconst selection
= editor.model.document.selection;nntttif ( selection.hasAttribute(
&#39;linkHref&#39; ) ) {nttttconst modelRange = findLinkRange(
selection.getFirstPosition(), selection.getAttribute( &#39;linkHref&#39; )
);nttttconst viewRange = editor.editing.mapper.toViewRange( modelRange
);nntttt// There might be multiple `a` elements in the `viewRange`, for
example, when the `a` element isntttt// broken by a UIElement.nttttfor (
const item of viewRange.getItems() ) {ntttttif ( item.is( &#39;a&#39; ) )
{nttttttwriter.addClass( HIGHLIGHT_CLASS, item
);ntttttthighlightedLinks.add( item );nttttt}ntttt}nttt}ntt} );nntt//
Removing the class.ntteditor.conversion.for( &#39;editingDowncast&#39;
).add( dispatcher =&gt; {nttt// Make sure the highlight is removed on every
possible event, before conversion is started.ntttdispatcher.on(
&#39;insert&#39;, removeHighlight, { priority: &#39;highest&#39; }
);ntttdispatcher.on( &#39;remove&#39;, removeHighlight, { priority:
&#39;highest&#39; } );ntttdispatcher.on( &#39;attribute&#39;,
removeHighlight, { priority: &#39;highest&#39; } );ntttdispatcher.on(
&#39;selection&#39;, removeHighlight, { priority: &#39;highest&#39; }
);nntttfunction removeHighlight() {nttttview.change( writer =&gt;
{ntttttfor ( const item of highlightedLinks.values() )
{nttttttwriter.removeClass( HIGHLIGHT_CLASS, item
);ntttttthighlightedLinks.delete( item );nttttt}ntttt} );nttt}ntt}
);nt}n}nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-link/src/linkediting.jsn// module id = nulln// module chunks =
“,”/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben. All
rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
engine/view/observer/clickobservern */nnimport DomEventObserver from
&#39;./domeventobserver&#39;;nn/**n * {@link
module:engine/view/document~Document#event:click Click} event observer.n *n
* Note that this observer is not available by default. To make it available
it needs to be added ton * {@link module:engine/view/view~View view
controller}n * by a {@link module:engine/view/view~View#addObserver}
method.n *n * @extends
module:engine/view/observer/domeventobserver~DomEventObservern */nexport
default class ClickObserver extends DomEventObserver {ntconstructor( view )
{nttsuper( view );nnttthis.domEventType = &#39;click&#39;;nt}nntonDomEvent(
domEvent ) {nttthis.fire( domEvent.type, domEvent );nt}n}nn/**n * Fired
when one of the editables has been clicked.n *n * Introduced by {@link
module:engine/view/observer/clickobserver~ClickObserver}.n *n * Note that
this event is not available by default. To make it availablen * {@link
module:engine/view/observer/clickobserver~ClickObserver} needs to be addedn
* to {@link module:engine/view/view~View} by a {@link
module:engine/view/view~View#addObserver} method.n *n * @see
module:engine/view/observer/clickobserver~ClickObservern * @event
module:engine/view/document~Document#event:clickn * @param
{module:engine/view/observer/domeventdata~DomEventData} data Event data.n
*/nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/src/view/observer/clickobserver.jsn// module id =
nulln// module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource
- Frederico Knabben. All rights reserved.n * For licensing, see
LICENSE.md.n */n/**n * @module link/ui/linkformviewn */nimport View from
&#39;@ckeditor/ckeditor5-ui/src/view&#39;;nimport ViewCollection from
&#39;@ckeditor/ckeditor5-ui/src/viewcollection&#39;;nimport ButtonView from
&#39;@ckeditor/ckeditor5-ui/src/button/buttonview&#39;;nimport
LabeledInputView from
&#39;@ckeditor/ckeditor5-ui/src/labeledinput/labeledinputview&#39;;nimport
InputTextView from
&#39;@ckeditor/ckeditor5-ui/src/inputtext/inputtextview&#39;;nimport
submitHandler from
&#39;@ckeditor/ckeditor5-ui/src/bindings/submithandler&#39;;nimport
FocusTracker from
&#39;@ckeditor/ckeditor5-utils/src/focustracker&#39;;nimport FocusCycler
from &#39;@ckeditor/ckeditor5-ui/src/focuscycler&#39;;nimport
KeystrokeHandler from
&#39;@ckeditor/ckeditor5-utils/src/keystrokehandler&#39;;nimport checkIcon
from &#39;@ckeditor/ckeditor5-core/theme/icons/check.svg&#39;;nimport
cancelIcon from
&#39;@ckeditor/ckeditor5-core/theme/icons/cancel.svg&#39;;nimport
&#39;../../theme/linkform.css&#39;;n/**n * The link form view controller
class.n *n * See {@link module:link/ui/linkformview~LinkFormView}.n *n *
@extends module:ui/view~Viewn */nexport default class LinkFormView extends
View {n    /**nt * @inheritDocnt */n    constructor(locale) {n       
super(locale);n        const t = locale.t;n        /**ntt * Tracks
information about DOM focus in the form.ntt *ntt * @readonlyntt * @member
{module:utils/focustracker~FocusTracker}ntt */n        this.focusTracker =
new FocusTracker();n        /**ntt * An instance of the {@link
module:utils/keystrokehandler~KeystrokeHandler}.ntt *ntt * @readonlyntt *
@member {module:utils/keystrokehandler~KeystrokeHandler}ntt */n       
this.keystrokes = new KeystrokeHandler();n        /**ntt * The URL input
view.ntt *ntt * @member
{module:ui/labeledinput/labeledinputview~LabeledInputView}ntt */n       
this.urlInputView = this._createUrlInput();n        /**ntt * The Save
button view.ntt *ntt * @member {module:ui/button/buttonview~ButtonView}ntt
*/n        this.saveButtonView = this._createButton(t(&#39;af&#39;),
checkIcon, &#39;ck-button-save&#39;);n        this.saveButtonView.type =
&#39;submit&#39;;n        /**ntt * The Cancel button view.ntt *ntt *
@member {module:ui/button/buttonview~ButtonView}ntt */n       
this.cancelButtonView = this._createButton(t(&#39;ag&#39;), cancelIcon,
&#39;ck-button-cancel&#39;, &#39;cancel&#39;);n        /**ntt * A
collection of views which can be focused in the form.ntt *ntt *
@readonlyntt * @protectedntt * @member
{module:ui/viewcollection~ViewCollection}ntt */n        this._focusables =
new ViewCollection();n        /**ntt * Helps cycling over {@link
#_focusables} in the form.ntt *ntt * @readonlyntt * @protectedntt * @member
{module:ui/focuscycler~FocusCycler}ntt */n        this._focusCycler = new
FocusCycler({n            focusables: this._focusables,n           
focusTracker: this.focusTracker,n            keystrokeHandler:
this.keystrokes,n            actions: {n                // Navigate form
fields backwards using the Shift + Tab keystroke.n               
focusPrevious: &#39;shift + tab&#39;,n                // Navigate form
fields forwards using the Tab key.n                focusNext:
&#39;tab&#39;n            }n        });n        this.setTemplate({n        
tag: &#39;form&#39;,n            attributes: {n                class: [n   
&#39;ck&#39;,n                    &#39;ck-link-form&#39;n               
],n                // <a
href="https://github.com/ckeditor/ckeditor5-link/issues/90\n">github.com/ckeditor/ckeditor5-link/issues/90n</a>
tabindex: &#39;-1&#39;n            },n            children: [n             
this.urlInputView,n                this.saveButtonView,n               
this.cancelButtonViewn            ]n        });n    }n    /**nt *
@inheritDocnt */n    render() {n        super.render();n       
submitHandler({ view: this });n        const childViews = [n           
this.urlInputView,n            this.saveButtonView,n           
this.cancelButtonViewn        ];n        childViews.forEach(v =&gt; {n     
// Register the view as focusable.n            this._focusables.add(v);n   
// Register the view in the focus tracker.n           
this.focusTracker.add(v.element);n        });n        // Start listening
for the keystrokes coming from element.n       
this.keystrokes.listenTo(this.element);n    }n    /**nt * Focuses the fist
{@link #_focusables} in the form.nt */n    focus() {n       
this._focusCycler.focusFirst();n    }n    /**nt * Creates a labeled input
view.nt *nt * @privatent * @returns
{module:ui/labeledinput/labeledinputview~LabeledInputView} Labeled input
view instance.nt */n    _createUrlInput() {n        const t =
this.locale.t;n        const labeledInput = new
LabeledInputView(this.locale, InputTextView);n        labeledInput.label =
t(&#39;ai&#39;);n        labeledInput.inputView.placeholder = &#39;<a
href="https://example.com';\n">example.com’;n</a>        return
labeledInput;n    }n    /**nt * Creates a button view.nt *nt * @privatent *
@param {String} label The button label.nt * @param {String} icon The
button&#39;s icon.nt * @param {String} className The additional button CSS
class name.nt * @param {String} [eventName] An event name that the
`ButtonView#execute` event will be delegated to.nt * @returns
{module:ui/button/buttonview~ButtonView} The button view instance.nt */n   
_createButton(label, icon, className, eventName) {n        const button =
new ButtonView(this.locale);n        button.set({n            label,n      
icon,n            tooltip: truen        });n        button.extendTemplate({
attributes: { class: className } });n        if (eventName) {n           
button.delegate(&#39;execute&#39;).to(this, eventName);n        }n       
return button;n    }n}    /**n * Fired when the form view is submitted
(when one of the children triggered the submit event),n * e.g. click on
{@link saveButtonView}.n *n * @event submitn */n     /**n * Fired when the
form view is canceled, e.g. click on {@link cancelButtonView}.n *n * @event
canceln */nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-link/src/ui/linkformview.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */n/**n *
@module link/ui/linkactionsviewn */nimport View from
&#39;@ckeditor/ckeditor5-ui/src/view&#39;;nimport ViewCollection from
&#39;@ckeditor/ckeditor5-ui/src/viewcollection&#39;;nimport ButtonView from
&#39;@ckeditor/ckeditor5-ui/src/button/buttonview&#39;;nimport FocusTracker
from &#39;@ckeditor/ckeditor5-utils/src/focustracker&#39;;nimport
FocusCycler from &#39;@ckeditor/ckeditor5-ui/src/focuscycler&#39;;nimport
KeystrokeHandler from
&#39;@ckeditor/ckeditor5-utils/src/keystrokehandler&#39;;nimport unlinkIcon
from &#39;../../theme/icons/unlink.svg&#39;;nimport pencilIcon from
&#39;@ckeditor/ckeditor5-core/theme/icons/pencil.svg&#39;;nimport
&#39;../../theme/linkactions.css&#39;;n/**n * The link actions view class.
This view displays link preview, allowsn * unlinking or editing the link.n
*n * @extends module:ui/view~Viewn */nexport default class LinkActionsView
extends View {n    /**nt * @inheritDocnt */n    constructor(locale) {n     
super(locale);n        const t = locale.t;n        /**ntt * Tracks
information about DOM focus in the actions.ntt *ntt * @readonlyntt *
@member {module:utils/focustracker~FocusTracker}ntt */n       
this.focusTracker = new FocusTracker();n        /**ntt * An instance of the
{@link module:utils/keystrokehandler~KeystrokeHandler}.ntt *ntt *
@readonlyntt * @member {module:utils/keystrokehandler~KeystrokeHandler}ntt
*/n        this.keystrokes = new KeystrokeHandler();n        /**ntt * The
href preview view.ntt *ntt * @member {module:ui/view~View}ntt */n       
this.previewButtonView = this._createPreviewButton();n        /**ntt * The
unlink button view.ntt *ntt * @member
{module:ui/button/buttonview~ButtonView}ntt */n       
this.unlinkButtonView = this._createButton(t(&#39;x&#39;), unlinkIcon,
&#39;unlink&#39;);n        /**ntt * The edit link button view.ntt *ntt *
@member {module:ui/button/buttonview~ButtonView}ntt */n       
this.editButtonView = this._createButton(t(&#39;y&#39;), pencilIcon,
&#39;edit&#39;);n        /**ntt * Value of the "href&quot; attribute of the
link to use in the {@link previewButtonView}.ntt *ntt * @observablentt *
@member {String}ntt */n        this.set(&#39;href&#39;);n        /**ntt * A
collection of views which can be focused in the view.ntt *ntt *
@readonlyntt * @protectedntt * @member
{module:ui/viewcollection~ViewCollection}ntt */n        this._focusables =
new ViewCollection();n        /**ntt * Helps cycling over {@link
#_focusables} in the view.ntt *ntt * @readonlyntt * @protectedntt * @member
{module:ui/focuscycler~FocusCycler}ntt */n        this._focusCycler = new
FocusCycler({n            focusables: this._focusables,n           
focusTracker: this.focusTracker,n            keystrokeHandler:
this.keystrokes,n            actions: {n                // Navigate fields
backwards using the Shift + Tab keystroke.n                focusPrevious:
&#39;shift + tab&#39;,n                // Navigate fields forwards using
the Tab key.n                focusNext: &#39;tab&#39;n            }n       
});n        this.setTemplate({n            tag: &#39;div&#39;,n           
attributes: {n                class: [n                    &#39;ck&#39;,n  
&#39;ck-link-actions&#39;n                ],n                // <a
href="https://github.com/ckeditor/ckeditor5-link/issues/90\n">github.com/ckeditor/ckeditor5-link/issues/90n</a>
tabindex: &#39;-1&#39;n            },n            children: [n             
this.previewButtonView,n                this.editButtonView,n              
this.unlinkButtonViewn            ]n        });n    }n    /**nt *
@inheritDocnt */n    render() {n        super.render();n        const
childViews = [n            this.previewButtonView,n           
this.editButtonView,n            this.unlinkButtonViewn        ];n       
childViews.forEach(v =&gt; {n            // Register the view as
focusable.n            this._focusables.add(v);n            // Register the
view in the focus tracker.n            this.focusTracker.add(v.element);n  
});n        // Start listening for the keystrokes coming from element.n    
this.keystrokes.listenTo(this.element);n    }n    /**nt * Focuses the fist
{@link #_focusables} in the actions.nt */n    focus() {n       
this._focusCycler.focusFirst();n    }n    /**nt * Creates a button view.nt
*nt * @privatent * @param {String} label The button label.nt * @param
{String} icon The button&#39;s icon.nt * @param {String} [eventName] An
event name that the `ButtonView#execute` event will be delegated to.nt *
@returns {module:ui/button/buttonview~ButtonView} The button view
instance.nt */n    _createButton(label, icon, eventName) {n        const
button = new ButtonView(this.locale);n        button.set({n           
label,n            icon,n            tooltip: truen        });n       
button.delegate(&#39;execute&#39;).to(this, eventName);n        return
button;n    }n    /**nt * Creates a link href preview button.nt *nt *
@privatent * @returns {module:ui/button/buttonview~ButtonView} The button
view instance.nt */n    _createPreviewButton() {n        const button = new
ButtonView(this.locale);n        const bind = this.bindTemplate;n       
const t = this.t;n        button.set({n            withText: true,n        
tooltip: t(&#39;z&#39;)n        });n        button.extendTemplate({n       
attributes: {n                class: [n                    &#39;ck&#39;,n  
&#39;ck-link-actions__preview&#39;n                ],n                href:
bind.to(&#39;href&#39;),n                target: &#39;_blank&#39;n         
}n        });n        button.bind(&#39;label&#39;).to(this, &#39;href&#39;,
href =&gt; {n            return href || t(&#39;aa&#39;);n        });n      
button.bind(&#39;isEnabled&#39;).to(this, &#39;href&#39;, href =&gt;
!!href);n        button.template.tag = &#39;a&#39;;n       
button.template.eventListeners = {};n        return button;n    }n}    /**n
* Fired when the {@link editButtonView} is clicked.n *n * @event editn */n 
/**n * Fired when the {@link unlinkButtonView} is clicked.n *n * @event
unlinkn */nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-link/src/ui/linkactionsview.jsn// module id = nulln// module
chunks = “,”/**n * @license Copyright © 2003-2018, CKSource - Frederico
Knabben. All rights reserved.n * For licensing, see LICENSE.md.n */n/**n *
@module list/listuin */nimport numberedListIcon from
&#39;../theme/icons/numberedlist.svg&#39;;nimport bulletedListIcon from
&#39;../theme/icons/bulletedlist.svg&#39;;nimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nimport ButtonView from
&#39;@ckeditor/ckeditor5-ui/src/button/buttonview&#39;;n/**n * The list UI
feature. It introduces the `numberedList` and `bulletedList` buttons thatn
* allow to convert paragraphs to and from list items and indent or outdent
them.n *n * @extends module:core/plugin~Pluginn */nexport default class
ListUI extends Plugin {n    /**nt * @inheritDocnt */n    init() {n       
// Create two buttons and link them with numberedList and bulletedList
commands.n        const t = this.editor.t;n       
this._addButton(&#39;numberedList&#39;, t(&#39;q&#39;), numberedListIcon);n
this._addButton(&#39;bulletedList&#39;, t(&#39;r&#39;), bulletedListIcon);n
}n    /**nt * Helper method for initializing a button and linking it with
an appropriate command.nt *nt * @privatent * @param {String} commandName
The name of the command.nt * @param {Object} label The button label.nt *
@param {String} icon The source of the icon.nt */n   
_addButton(commandName, label, icon) {n        const editor = this.editor;n
editor.ui.componentFactory.add(commandName, locale =&gt; {n           
const command = editor.commands.get(commandName);n            const
buttonView = new ButtonView(locale);n            buttonView.set({n         
label,n                icon,n                tooltip: truen            });n
// Bind button model to command.n           
buttonView.bind(&#39;isOn&#39;, &#39;isEnabled&#39;).to(command,
&#39;value&#39;, &#39;isEnabled&#39;);n            // Execute command.n    
this.listenTo(buttonView, &#39;execute&#39;, () =&gt;
editor.execute(commandName));n            return buttonView;n        });n  
}n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-list/src/listui.jsn// module id = nulln// module chunks =
“,”/**n * @license Copyright © 2003-2018, CKSource - Frederico Knabben. All
rights reserved.n * For licensing, see LICENSE.md.n */nn/**n * @module
list/listn */nnimport ListEditing from &#39;./listediting&#39;;nimport
ListUI from &#39;./listui&#39;;nnimport Plugin from
&#39;@ckeditor/ckeditor5-core/src/plugin&#39;;nn/**n * The list feature.n
*n * It loads the {@link module:list/listediting~ListEditing list editing
feature}n * and {@link module:list/listui~ListUI list UI feature}.n *n *
@extends module:core/plugin~Pluginn */nexport default class List extends
Plugin {nt/**nt * @inheritDocnt */ntstatic get requires() {nttreturn [
ListEditing, ListUI ];nt}nnt/**nt * @inheritDocnt */ntstatic get
pluginName() {nttreturn &#39;List&#39;;nt}n}nnnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-list/src/list.jsn// module id = nulln//
module chunks = “,”/**n * @license Copyright © 2003-2018, CKSource -
Frederico Knabben. All rights reserved.n * For licensing, see LICENSE.md.n
*/nnimport ClassicEditorBase from
&#39;@ckeditor/ckeditor5-editor-classic/src/classiceditor&#39;;nimport
EssentialsPlugin from
&#39;@ckeditor/ckeditor5-essentials/src/essentials&#39;;nimport
UploadadapterPlugin from
&#39;@ckeditor/ckeditor5-adapter-ckfinder/src/uploadadapter&#39;;nimport
AutoformatPlugin from
&#39;@ckeditor/ckeditor5-autoformat/src/autoformat&#39;;nimport BoldPlugin
from &#39;@ckeditor/ckeditor5-basic-styles/src/bold&#39;;nimport
ItalicPlugin from
&#39;@ckeditor/ckeditor5-basic-styles/src/italic&#39;;nimport
BlockquotePlugin from
&#39;@ckeditor/ckeditor5-block-quote/src/blockquote&#39;;nimport
EasyimagePlugin from
&#39;@ckeditor/ckeditor5-easy-image/src/easyimage&#39;;nimport
HeadingPlugin from
&#39;@ckeditor/ckeditor5-heading/src/heading&#39;;nimport ImagePlugin from
&#39;@ckeditor/ckeditor5-image/src/image&#39;;nimport ImagecaptionPlugin
from &#39;@ckeditor/ckeditor5-image/src/imagecaption&#39;;nimport
ImagestylePlugin from
&#39;@ckeditor/ckeditor5-image/src/imagestyle&#39;;nimport
ImagetoolbarPlugin from
&#39;@ckeditor/ckeditor5-image/src/imagetoolbar&#39;;nimport
ImageuploadPlugin from
&#39;@ckeditor/ckeditor5-image/src/imageupload&#39;;nimport LinkPlugin from
&#39;@ckeditor/ckeditor5-link/src/link&#39;;nimport ListPlugin from
&#39;@ckeditor/ckeditor5-list/src/list&#39;;nimport ParagraphPlugin from
&#39;@ckeditor/ckeditor5-paragraph/src/paragraph&#39;;nnexport default
class ClassicEditor extends ClassicEditorBase {}nnClassicEditor.build =
{ntplugins:
[nttEssentialsPlugin,nttUploadadapterPlugin,nttAutoformatPlugin,nttBoldPlugin,nttItalicPlugin,nttBlockquotePlugin,nttEasyimagePlugin,nttHeadingPlugin,nttImagePlugin,nttImagecaptionPlugin,nttImagestylePlugin,nttImagetoolbarPlugin,nttImageuploadPlugin,nttLinkPlugin,nttListPlugin,nttParagraphPluginnt],ntconfig:
{ntttoolbar: {ntttitems:
[ntttt&#39;heading&#39;,ntttt&#39;|&#39;,ntttt&#39;bold&#39;,ntttt&#39;italic&#39;,ntttt&#39;link&#39;,ntttt&#39;bulletedList&#39;,ntttt&#39;numberedList&#39;,ntttt&#39;imageUpload&#39;,ntttt&#39;blockQuote&#39;,ntttt&#39;undo&#39;,ntttt&#39;redo&#39;nttt]ntt},nttimage:
{nttttoolbar:
[ntttt&#39;imageStyle:full&#39;,ntttt&#39;imageStyle:side&#39;,ntttt&#39;|&#39;,ntttt&#39;imageTextAlternative&#39;nttt]ntt},nttlanguage:
&#39;en&#39;nt}n};nnnn//////////////////n// WEBPACK FOOTERn//
./src/ckeditor.jsn// module id = nulln// module chunks = “,”var g;rnrn//
This works in non-strict moderng = (function() {rntreturn
this;rn})();rnrntry {rnt// This works if eval is allowed (see CSP)rntg = g
|| Function(&quot;return this&quot;)() || (1,eval)(&quot;this&quot;);rn}
catch(e) {rnt// This works if the window reference is availablerntif(typeof
window === "object&quot;)rnttg = window;rn}rnrn// g can still be undefined,
but nothing to do about it…rn// We return undefined, instead of nothing
here, so it&#39;srn// easier to handle this case. if(!global) {
…}rnrnmodule.exports = g;rnnnn//////////////////n// WEBPACK FOOTERn//
(webpack)/buildin/global.jsn// module id = 7n// module chunks = 0“,”/**n *
Checks if `value` is a global object.n *n * @privaten * @param {*} value
The value to check.n * @returns {null|Object} Returns `value` if it&#39;s a
global object, else `null`.n */nfunction checkGlobal(value) {n  return
(value &amp;&amp; value.Object === <a
href="../../../../Object.html">Object</a>) ? value : null;n}nnexport
default checkGlobal;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/_checkGlobal.jsn// module id = 8n//
module chunks = 0“,”import constant from &#39;./constant&#39;;nimport root
from &#39;./_root&#39;;nn/** Used to determine if values are of the
language type `Object`. */nvar objectTypes = {n  &#39;function&#39;: true,n
&#39;object&#39;: truen};nn/** Detect free variable `exports`. */nvar
freeExports = (objectTypes[typeof exports] &amp;&amp; exports &amp;&amp;
!exports.nodeType)n  ? exportsn  : undefined;nn/** Detect free variable
`module`. */nvar freeModule = (objectTypes[typeof module] &amp;&amp; module
&amp;&amp; !module.nodeType)n  ? modulen  : undefined;nn/** Detect the
popular CommonJS extension `module.exports`. */nvar moduleExports =
(freeModule &amp;&amp; freeModule.exports === freeExports)n  ? freeExportsn
: undefined;nn/** Built-in value references. */nvar Buffer = moduleExports
? root.Buffer : undefined;nn/**n * Checks if `value` is a buffer.n *n *
@staticn * @memberOf _n * @since 4.3.0n * @category Langn * @param {*}
value The value to check.n * @returns {boolean} Returns `true` if `value`
is a buffer, else `false`.n * @examplen *n * _.isBuffer(new Buffer(2));n *
// =&gt; truen *n * _.isBuffer(new Uint8Array(2));n * // =&gt; falsen
*/nvar isBuffer = !Buffer ? constant(false) : function(value) {n  return
value instanceof Buffer;n};nnexport default
isBuffer;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/isBuffer.jsn// module id = 9n// module
chunks = 0“,”/**n * Creates a function that returns `value`.n *n * @staticn
* @memberOf _n * @since 2.4.0n * @category Utiln * @param {*} value The
value to return from the new function.n * @returns {Function} Returns the
new constant function.n * @examplen *n * var object = { &#39;user&#39;:
&#39;fred&#39; };n * var getter = _.constant(object);n *n * getter() ===
object;n * // =&gt; truen */nfunction constant(value) {n  return function()
{n    return value;n  };n}nnexport default
constant;nnnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-utils/src/lib/lodash/constant.jsn// module id = 10n// module
chunks = 0“,”nvar content =
require(&quot;!!../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./globals.css&quot;);nnif(typeof
content === &#39;string&#39;) content = [[module.id, content,
&#39;&#39;]];nnvar transform;nvar insertInto;nnnnvar options =
{&quot;singleton&quot;:true,&quot;hmr&quot;:true}nnoptions.transform =
transformnoptions.insertInto = undefined;nnvar update =
require(&quot;!../../../../node_modules/style-loader/lib/addStyles.js&quot;)(content,
options);nnif(content.locals) module.exports =
content.locals;nnif(module.hot)
{ntmodule.hot.accept(&quot;!!../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./globals.css&quot;,
function() {nttvar newContent =
require(&quot;!!../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./globals.css&quot;);nnttif(typeof
newContent === &#39;string&#39;) newContent = [[module.id, newContent,
&#39;&#39;]];nnttvar locals = (function(a, b) {ntttvar key, idx =
0;nntttfor(key in a) {nttttif(!b || <a href="key">a</a> !== <a
href="key">b</a>) return false;nttttidx++;nttt}nntttfor(key in b)
idx–;nntttreturn idx === 0;ntt}(content.locals,
newContent.locals));nnttif(!locals) throw new Error(&#39;Aborting CSS HMR
due to changed css-modules
locals.&#39;);nnttupdate(newContent);nt});nntmodule.hot.dispose(function()
{ update(); });n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-ui/theme/globals/globals.cssn// module id = 11n// module
chunks = 0“,”module.exports =
".ck-hidden{display:none!important}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all
*{box-sizing:border-box;width:auto;height:auto;position:static}:root{–ck-z-default:1;–ck-z-modal:999;–ck-color-base-foreground:#fafafa;–ck-color-base-background:#fff;–ck-color-base-border:#c4c4c4;–ck-color-base-action:#61b045;–ck-color-base-focus:#6cb5f9;–ck-color-base-text:#333;–ck-color-base-active:#198cf0;–ck-color-base-active-focus:#0e7fe1;–ck-color-focus-border:#47a4f5;–ck-color-focus-shadow:#77baf8;–ck-color-text:var(–ck-color-base-text);–ck-color-shadow-drop:rgba(0,0,0,.15);–ck-color-shadow-inner:rgba(0,0,0,.1);–ck-color-button-default-background:transparent;–ck-color-button-default-focus-background:#e6e6e6;–ck-color-button-default-active-background:#d9d9d9;–ck-color-button-default-active-shadow:#bfbfbf;–ck-color-button-default-disabled-background:transparent;–ck-color-button-on-background:#dedede;–ck-color-button-on-focus-background:#c4c4c4;–ck-color-button-on-active-background:#bababa;–ck-color-button-on-active-shadow:#a1a1a1;–ck-color-button-on-disabled-background:#dedede;–ck-color-button-action-background:var(–ck-color-base-action);–ck-color-button-action-focus-background:#579e3d;–ck-color-button-action-active-background:#53973b;–ck-color-button-action-active-shadow:#498433;–ck-color-button-action-disabled-background:#7ec365;–ck-color-button-action-text:var(–ck-color-base-background);–ck-color-button-save:#008a00;–ck-color-button-cancel:#db3700;–ck-color-dropdown-panel-background:var(–ck-color-base-background);–ck-color-dropdown-panel-border:var(–ck-color-base-border);–ck-color-input-background:var(–ck-color-base-background);–ck-color-input-border:#c7c7c7;–ck-color-input-text:var(–ck-color-base-text);–ck-color-input-disabled-background:#f2f2f2;–ck-color-input-disabled-border:#c7c7c7;–ck-color-input-disabled-text:#5c5c5c;–ck-color-list-background:var(–ck-color-base-background);–ck-color-list-item-background-hover:var(–ck-color-base-foreground);–ck-color-list-item-background-active:var(–ck-color-base-active);–ck-color-list-item-background-active-focus:var(–ck-color-base-active-focus);–ck-color-list-item-text-active:var(–ck-color-base-background);–ck-color-panel-background:var(–ck-color-base-background);–ck-color-panel-border:var(–ck-color-base-border);–ck-color-toolbar-background:var(–ck-color-base-foreground);–ck-color-toolbar-border:var(–ck-color-base-border);–ck-color-tooltip-background:var(–ck-color-base-text);–ck-color-tooltip-text:var(–ck-color-base-background);–ck-color-engine-placeholder-text:#c2c2c2;–ck-color-upload-bar-background:#6cb5f9;–ck-color-upload-infinite-background:rgba(0,0,0,.1);–ck-color-link-default:#0000f0;–ck-color-link-selected-background:#ebf8ff;–ck-disabled-opacity:.5;–ck-focus-outer-shadow:0
0 3px var(–ck-color-focus-shadow);–ck-focus-ring:1px solid
var(–ck-color-focus-border);–ck-font-size-base:13px;–ck-line-height-base:1.84615;–ck-font-face:Helvetica,Arial,Tahoma,Verdana,Sans-Serif;–ck-font-size-tiny:0.7em;–ck-font-size-small:0.75em;–ck-font-size-normal:1em;–ck-font-size-big:1.4em;–ck-font-size-large:1.8em;–ck-ui-component-min-height:2.3em}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all
*{margin:0;padding:0;border:0;background:transparent;text-decoration:none;vertical-align:middle;transition:none;word-wrap:break-word}.ck.ck-reset_all,.ck.ck-reset_all
*{border-collapse:collapse;font:normal normal normal
var(–ck-font-size-base)/var(–ck-line-height-base)
var(–ck-font-face);color:var(–ck-color-text);text-align:left;white-space:nowrap;cursor:auto;float:none}.ck.ck-reset_all
.ck-rtl *{text-align:right}.ck.ck-reset_all
iframe{vertical-align:inherit}.ck.ck-reset_all
textarea{white-space:pre-wrap}.ck.ck-reset_all <a
href="type=password">input</a>,.ck.ck-reset_all <a
href="type=text">input</a>,.ck.ck-reset_all
textarea{cursor:text}.ck.ck-reset_all <a
href="type=password">input</a>[disabled],.ck.ck-reset_all <a
href="type=text">input</a>[disabled],.ck.ck-reset_all <a
href="disabled">textarea</a>{cursor:default}.ck.ck-reset_all
fieldset{padding:10px;border:2px groove dfdee3}.ck.ck-reset_all
button::-moz-focus-inner{padding:0;border:0}:root{–ck-border-radius:2px;–ck-inner-shadow:2px
2px 3px var(–ck-color-shadow-inner) inset;–ck-drop-shadow:0 1px 2px 1px
var(–ck-color-shadow-drop);–ck-spacing-unit:0.6em;–ck-spacing-large:calc(var(–ck-spacing-unit)
*
1.5);–ck-spacing-standard:var(–ck-spacing-unit);–ck-spacing-medium:calc(var(–ck-spacing-unit)
* 0.8);–ck-spacing-small:calc(var(–ck-spacing-unit) *
0.5);–ck-spacing-tiny:calc(var(–ck-spacing-unit) *
0.3);–ck-spacing-extra-tiny:calc(var(–ck-spacing-unit) *
0.16)}&quot;nnn//////////////////n// WEBPACK FOOTERn//
/workspace/ckeditor5/node_modules/postcss-loader/lib??ref–1-1!../ckeditor5-ui/theme/globals/globals.cssn//
module id = 12n// module chunks = 0“,”n/**n * When source maps are enabled,
`style-loader` uses a link element with a data-uri ton * embed the css on
the page. This breaks all relative urls because now they are relative to an
* bundle instead of the current page.n *n * One solution is to only use
full urls, but that may be impossible.n *n * Instead, this function
"fixes&quot; the relative urls to be absolute according to the current page
location.n *n * A rudimentary test suite is located at `test/fixUrls.js`
and can be run via the `npm test` command.n *n */nnmodule.exports =
function (css) {n  // get current locationn  var location = typeof window
!== "undefined&quot; &amp;&amp; window.location;nn  if (!location) {n   
throw new Error(&quot;fixUrls requires window.location&quot;);n  }nnt//
blank or null?ntif (!css || typeof css !== "string&quot;) {nt  return css;n
}nn  var baseUrl = location.protocol + "//&quot; + location.host;n  var
currentDir = baseUrl + <a href="^\\/">location.pathname.replace(/\/</a>*$/,
"/&quot;);nnt// convert each url(…)nt/*ntThis regular expression is just a
way to recursively match brackets withinnta string.nnt /url\s*\(  = Match
on the word "url&quot; with any whitespace after it and then a parensnt   (
= Start a capturing groupnt     (?:  = Start a non-capturing groupnt       
[^)(]  = Match anything that isn&#39;t a parenthesesnt         |  = ORnt   
\(  = Match a start parenthesesnt             (?:  = Start another
non-capturing groupsnt                 [^)(]+  = Match anything that
isn&#39;t a parenthesesnt                 |  = ORnt                 \(  =
Match a start parenthesesnt                     [^)(]*  = Match anything
that isn&#39;t a parenthesesnt                 \)  = Match a end
parenthesesnt             )  = End Groupn              *\) = Match anything
and then a close parensn          )  = Close non-capturing groupn         
*  = Match anythingn       )  = Close capturing groupnt \)  = Match a close
parensnnt /gi  = Get all matches, not the first.  Be case insensitive.nt
*/ntvar fixedCss = <a
href="^)(">css.replace(/url\s*\(((?:</a>|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,
function(fullMatch, origUrl) {ntt// strip quotes (if they exist)nttvar
unquotedOrigUrl = origUrlnttt.trim()nttt.replace(/^&quot;(.*)&quot;$/,
function(o, $1){ return $1; })nttt.replace(/^&#39;(.*)&#39;$/, function(o,
$1){ return $1; });nntt// already a full url? no changenttif (/^(#|data:|<a
href="http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl">\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(unquotedOrigUrl</a>))
{ntt  return fullMatch;ntt}nntt// convert the url to a full urlnttvar
newUrl;nnttif (unquotedOrigUrl.indexOf(&quot;//&quot;) === 0) {ntt 
t//TODO: should we add protocol?ntttnewUrl = unquotedOrigUrl;ntt} else if
(unquotedOrigUrl.indexOf(&quot;/&quot;) === 0) {nttt// path should be
relative to the base urlntttnewUrl = baseUrl + unquotedOrigUrl; // already
starts with &#39;/&#39;ntt} else {nttt// path should be relative to current
directoryntttnewUrl = currentDir + unquotedOrigUrl.replace(/^\.\//,
"&quot;); // Strip leading &#39;./&#39;ntt}nntt// send back the fixed
url(…)nttreturn "url(&quot; + JSON.stringify(newUrl) + ")&quot;;nt});nnt//
send back the fixed cssntreturn fixedCss;n};nnnn//////////////////n//
WEBPACK FOOTERn//
/workspace/ckeditor5/node_modules/style-loader/lib/urls.jsn// module id =
13n// module chunks = 0“,”nvar content =
require(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./editorui.css&quot;);nnif(typeof
content === &#39;string&#39;) content = [[module.id, content,
&#39;&#39;]];nnvar transform;nvar insertInto;nnnnvar options =
{&quot;singleton&quot;:true,&quot;hmr&quot;:true}nnoptions.transform =
transformnoptions.insertInto = undefined;nnvar update =
require(&quot;!../../../../../node_modules/style-loader/lib/addStyles.js&quot;)(content,
options);nnif(content.locals) module.exports =
content.locals;nnif(module.hot)
{ntmodule.hot.accept(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./editorui.css&quot;,
function() {nttvar newContent =
require(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./editorui.css&quot;);nnttif(typeof
newContent === &#39;string&#39;) newContent = [[module.id, newContent,
&#39;&#39;]];nnttvar locals = (function(a, b) {ntttvar key, idx =
0;nntttfor(key in a) {nttttif(!b || <a href="key">a</a> !== <a
href="key">b</a>) return false;nttttidx++;nttt}nntttfor(key in b)
idx–;nntttreturn idx === 0;ntt}(content.locals,
newContent.locals));nnttif(!locals) throw new Error(&#39;Aborting CSS HMR
due to changed css-modules
locals.&#39;);nnttupdate(newContent);nt});nntmodule.hot.dispose(function()
{ update(); });n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-ui/theme/components/editorui/editorui.cssn// module id = 14n//
module chunks = 0“,”module.exports =
".ck.ck-editor__editable:not(.ck-editor__nested-editable){border-radius:0}.ck-rounded-corners
.ck.ck-editor__editable:not(.ck-editor__nested-editable),.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-rounded-corners{border-radius:var(–ck-border-radius)}.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-focused{outline:none;border:var(–ck-focus-ring);box-shadow:var(–ck-inner-shadow),0
0}.ck.ck-editor__editable_inline{overflow:auto;padding:0
var(–ck-spacing-standard);border:1px solid
transparent}.ck.ck-editor__editable_inline&gt;:first-child{margin-top:var(–ck-spacing-large)}.ck.ck-editor__editable_inline&gt;:last-child{margin-bottom:var(–ck-spacing-large)}.<a
href="class*=arrow_n">ck.ck-toolbar-container</a>:after{border-bottom-color:var(–ck-color-base-foreground)}.<a
href="class*=arrow_s">ck.ck-toolbar-container</a>:after{border-top-color:var(–ck-color-base-foreground)}&quot;nnn//////////////////n//
WEBPACK FOOTERn//
/workspace/ckeditor5/node_modules/postcss-loader/lib??ref–1-1!../ckeditor5-ui/theme/components/editorui/editorui.cssn//
module id = 15n// module chunks = 0“,”nvar content =
require(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./label.css&quot;);nnif(typeof
content === &#39;string&#39;) content = [[module.id, content,
&#39;&#39;]];nnvar transform;nvar insertInto;nnnnvar options =
{&quot;singleton&quot;:true,&quot;hmr&quot;:true}nnoptions.transform =
transformnoptions.insertInto = undefined;nnvar update =
require(&quot;!../../../../../node_modules/style-loader/lib/addStyles.js&quot;)(content,
options);nnif(content.locals) module.exports =
content.locals;nnif(module.hot)
{ntmodule.hot.accept(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./label.css&quot;,
function() {nttvar newContent =
require(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./label.css&quot;);nnttif(typeof
newContent === &#39;string&#39;) newContent = [[module.id, newContent,
&#39;&#39;]];nnttvar locals = (function(a, b) {ntttvar key, idx =
0;nntttfor(key in a) {nttttif(!b || <a href="key">a</a> !== <a
href="key">b</a>) return false;nttttidx++;nttt}nntttfor(key in b)
idx–;nntttreturn idx === 0;ntt}(content.locals,
newContent.locals));nnttif(!locals) throw new Error(&#39;Aborting CSS HMR
due to changed css-modules
locals.&#39;);nnttupdate(newContent);nt});nntmodule.hot.dispose(function()
{ update(); });n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-ui/theme/components/label/label.cssn// module id = 16n//
module chunks = 0“,”module.exports =
".ck.ck-label{display:block}.ck.ck-voice-label{display:none}.ck.ck-label{font-weight:700}&quot;nnn//////////////////n//
WEBPACK FOOTERn//
/workspace/ckeditor5/node_modules/postcss-loader/lib??ref–1-1!../ckeditor5-ui/theme/components/label/label.cssn//
module id = 17n// module chunks = 0“,”nvar content =
require(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./stickypanel.css&quot;);nnif(typeof
content === &#39;string&#39;) content = [[module.id, content,
&#39;&#39;]];nnvar transform;nvar insertInto;nnnnvar options =
{&quot;singleton&quot;:true,&quot;hmr&quot;:true}nnoptions.transform =
transformnoptions.insertInto = undefined;nnvar update =
require(&quot;!../../../../../node_modules/style-loader/lib/addStyles.js&quot;)(content,
options);nnif(content.locals) module.exports =
content.locals;nnif(module.hot)
{ntmodule.hot.accept(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./stickypanel.css&quot;,
function() {nttvar newContent =
require(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./stickypanel.css&quot;);nnttif(typeof
newContent === &#39;string&#39;) newContent = [[module.id, newContent,
&#39;&#39;]];nnttvar locals = (function(a, b) {ntttvar key, idx =
0;nntttfor(key in a) {nttttif(!b || <a href="key">a</a> !== <a
href="key">b</a>) return false;nttttidx++;nttt}nntttfor(key in b)
idx–;nntttreturn idx === 0;ntt}(content.locals,
newContent.locals));nnttif(!locals) throw new Error(&#39;Aborting CSS HMR
due to changed css-modules
locals.&#39;);nnttupdate(newContent);nt});nntmodule.hot.dispose(function()
{ update(); });n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-ui/theme/components/panel/stickypanel.cssn// module id = 18n//
module chunks = 0“,”module.exports = ".ck.ck-sticky-panel
.ck-sticky-panel__content_sticky{z-index:var(–ck-z-modal);position:fixed;top:0}.ck.ck-sticky-panel
.ck-sticky-panel__content_sticky_bottom-limit{top:auto;position:absolute}.ck.ck-sticky-panel
.ck-sticky-panel__content_sticky{box-shadow:var(–ck-drop-shadow),0
0;border-width:0 1px
1px;border-top-left-radius:0;border-top-right-radius:0}&quot;nnn//////////////////n//
WEBPACK FOOTERn//
/workspace/ckeditor5/node_modules/postcss-loader/lib??ref–1-1!../ckeditor5-ui/theme/components/panel/stickypanel.cssn//
module id = 19n// module chunks = 0“,”nvar content =
require(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./toolbar.css&quot;);nnif(typeof
content === &#39;string&#39;) content = [[module.id, content,
&#39;&#39;]];nnvar transform;nvar insertInto;nnnnvar options =
{&quot;singleton&quot;:true,&quot;hmr&quot;:true}nnoptions.transform =
transformnoptions.insertInto = undefined;nnvar update =
require(&quot;!../../../../../node_modules/style-loader/lib/addStyles.js&quot;)(content,
options);nnif(content.locals) module.exports =
content.locals;nnif(module.hot)
{ntmodule.hot.accept(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./toolbar.css&quot;,
function() {nttvar newContent =
require(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./toolbar.css&quot;);nnttif(typeof
newContent === &#39;string&#39;) newContent = [[module.id, newContent,
&#39;&#39;]];nnttvar locals = (function(a, b) {ntttvar key, idx =
0;nntttfor(key in a) {nttttif(!b || <a href="key">a</a> !== <a
href="key">b</a>) return false;nttttidx++;nttt}nntttfor(key in b)
idx–;nntttreturn idx === 0;ntt}(content.locals,
newContent.locals));nnttif(!locals) throw new Error(&#39;Aborting CSS HMR
due to changed css-modules
locals.&#39;);nnttupdate(newContent);nt});nntmodule.hot.dispose(function()
{ update(); });n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-ui/theme/components/toolbar/toolbar.cssn// module id = 20n//
module chunks = 0“,”module.exports =
".ck.ck-toolbar{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-flow:row
wrap;align-items:center}.ck.ck-toolbar.ck-toolbar_vertical{flex-direction:column}.ck.ck-toolbar.ck-toolbar_floating{flex-wrap:nowrap}.ck.ck-toolbar__separator{display:inline-block}.ck.ck-toolbar__newline{display:block;width:100%}.ck.ck-toolbar{border-radius:0}.ck-rounded-corners
.ck.ck-toolbar,.ck.ck-toolbar.ck-rounded-corners{border-radius:var(–ck-border-radius)}.ck.ck-toolbar{background:var(–ck-color-toolbar-background);padding:0
var(–ck-spacing-small);border:1px solid
var(–ck-color-toolbar-border)}.ck.ck-toolbar&gt;*{margin-right:var(–ck-spacing-small);margin-top:var(–ck-spacing-small);margin-bottom:var(–ck-spacing-small)}.ck.ck-toolbar.ck-toolbar_vertical{padding:0}.ck.ck-toolbar.ck-toolbar_vertical&gt;*{width:100%;margin:0;border-radius:0;border:0}.ck.ck-toolbar&gt;:last-child{margin-right:0}.ck-toolbar-container
.ck.ck-toolbar{border:0}.ck.ck-toolbar__separator{align-self:stretch;width:1px;margin-top:0;margin-bottom:0;background:var(–ck-color-toolbar-border)}.ck.ck-toolbar__newline{margin:0}&quot;nnn//////////////////n//
WEBPACK FOOTERn//
/workspace/ckeditor5/node_modules/postcss-loader/lib??ref–1-1!../ckeditor5-ui/theme/components/toolbar/toolbar.cssn//
module id = 21n// module chunks = 0“,”nvar content =
require(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./classiceditor.css&quot;);nnif(typeof
content === &#39;string&#39;) content = [[module.id, content,
&#39;&#39;]];nnvar transform;nvar insertInto;nnnnvar options =
{&quot;singleton&quot;:true,&quot;hmr&quot;:true}nnoptions.transform =
transformnoptions.insertInto = undefined;nnvar update =
require(&quot;!../../../node_modules/style-loader/lib/addStyles.js&quot;)(content,
options);nnif(content.locals) module.exports =
content.locals;nnif(module.hot)
{ntmodule.hot.accept(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./classiceditor.css&quot;,
function() {nttvar newContent =
require(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./classiceditor.css&quot;);nnttif(typeof
newContent === &#39;string&#39;) newContent = [[module.id, newContent,
&#39;&#39;]];nnttvar locals = (function(a, b) {ntttvar key, idx =
0;nntttfor(key in a) {nttttif(!b || <a href="key">a</a> !== <a
href="key">b</a>) return false;nttttidx++;nttt}nntttfor(key in b)
idx–;nntttreturn idx === 0;ntt}(content.locals,
newContent.locals));nnttif(!locals) throw new Error(&#39;Aborting CSS HMR
due to changed css-modules
locals.&#39;);nnttupdate(newContent);nt});nntmodule.hot.dispose(function()
{ update(); });n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-editor-classic/theme/classiceditor.cssn// module id = 22n//
module chunks = 0“,”module.exports =
".ck.ck-editor{position:relative}.ck.ck-editor .ck-editor__top
.ck-sticky-panel .ck-toolbar{z-index:var(–ck-z-modal)}.ck.ck-editor__top
.ck-sticky-panel .ck-toolbar{border-radius:0}.ck-rounded-corners
.ck.ck-editor__top .ck-sticky-panel .ck-toolbar,.ck.ck-editor__top
.ck-sticky-panel
.ck-toolbar.ck-rounded-corners{border-radius:var(–ck-border-radius);border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-editor__top
.ck-sticky-panel .ck-toolbar{border-bottom-width:0}.ck.ck-editor__top
.ck-sticky-panel .ck-sticky-panel__content_sticky
.ck-toolbar{border-bottom-width:1px;border-radius:0}.ck-rounded-corners
.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky
.ck-toolbar,.ck.ck-editor__top .ck-sticky-panel
.ck-sticky-panel__content_sticky
.ck-toolbar.ck-rounded-corners{border-radius:var(–ck-border-radius);border-radius:0}.ck.ck-editor__main&gt;.ck-editor__editable{background:var(–ck-color-base-background);border-radius:0}.ck-rounded-corners
.ck.ck-editor__main&gt;.ck-editor__editable,.ck.ck-editor__main&gt;.ck-editor__editable.ck-rounded-corners{border-radius:var(–ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}.ck.ck-editor__main&gt;.ck-editor__editable:not(.ck-focused){border-color:var(–ck-color-base-border)}&quot;nnn//////////////////n//
WEBPACK FOOTERn//
/workspace/ckeditor5/node_modules/postcss-loader/lib??ref–1-1!../ckeditor5-editor-classic/theme/classiceditor.cssn//
module id = 23n// module chunks = 0“,”nvar content =
require(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./icon.css&quot;);nnif(typeof
content === &#39;string&#39;) content = [[module.id, content,
&#39;&#39;]];nnvar transform;nvar insertInto;nnnnvar options =
{&quot;singleton&quot;:true,&quot;hmr&quot;:true}nnoptions.transform =
transformnoptions.insertInto = undefined;nnvar update =
require(&quot;!../../../../../node_modules/style-loader/lib/addStyles.js&quot;)(content,
options);nnif(content.locals) module.exports =
content.locals;nnif(module.hot)
{ntmodule.hot.accept(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./icon.css&quot;,
function() {nttvar newContent =
require(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./icon.css&quot;);nnttif(typeof
newContent === &#39;string&#39;) newContent = [[module.id, newContent,
&#39;&#39;]];nnttvar locals = (function(a, b) {ntttvar key, idx =
0;nntttfor(key in a) {nttttif(!b || <a href="key">a</a> !== <a
href="key">b</a>) return false;nttttidx++;nttt}nntttfor(key in b)
idx–;nntttreturn idx === 0;ntt}(content.locals,
newContent.locals));nnttif(!locals) throw new Error(&#39;Aborting CSS HMR
due to changed css-modules
locals.&#39;);nnttupdate(newContent);nt});nntmodule.hot.dispose(function()
{ update(); });n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-ui/theme/components/icon/icon.cssn// module id = 24n// module
chunks = 0“,”module.exports =
".ck.ck-icon{vertical-align:middle}:root{–ck-icon-size:calc(var(–ck-line-height-base)
*
var(–ck-font-size-normal))}.ck.ck-icon{width:var(–ck-icon-size);height:var(–ck-icon-size);font-size:.8333350694em;will-change:transform}.ck.ck-icon,.ck.ck-icon
*{color:inherit;cursor:inherit}.ck.ck-icon
*{fill:currentColor}&quot;nnn//////////////////n// WEBPACK FOOTERn//
/workspace/ckeditor5/node_modules/postcss-loader/lib??ref–1-1!../ckeditor5-ui/theme/components/icon/icon.cssn//
module id = 25n// module chunks = 0“,”nvar content =
require(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./tooltip.css&quot;);nnif(typeof
content === &#39;string&#39;) content = [[module.id, content,
&#39;&#39;]];nnvar transform;nvar insertInto;nnnnvar options =
{&quot;singleton&quot;:true,&quot;hmr&quot;:true}nnoptions.transform =
transformnoptions.insertInto = undefined;nnvar update =
require(&quot;!../../../../../node_modules/style-loader/lib/addStyles.js&quot;)(content,
options);nnif(content.locals) module.exports =
content.locals;nnif(module.hot)
{ntmodule.hot.accept(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./tooltip.css&quot;,
function() {nttvar newContent =
require(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./tooltip.css&quot;);nnttif(typeof
newContent === &#39;string&#39;) newContent = [[module.id, newContent,
&#39;&#39;]];nnttvar locals = (function(a, b) {ntttvar key, idx =
0;nntttfor(key in a) {nttttif(!b || <a href="key">a</a> !== <a
href="key">b</a>) return false;nttttidx++;nttt}nntttfor(key in b)
idx–;nntttreturn idx === 0;ntt}(content.locals,
newContent.locals));nnttif(!locals) throw new Error(&#39;Aborting CSS HMR
due to changed css-modules
locals.&#39;);nnttupdate(newContent);nt});nntmodule.hot.dispose(function()
{ update(); });n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-ui/theme/components/tooltip/tooltip.cssn// module id = 26n//
module chunks = 0“,”module.exports = ".ck.ck-tooltip,.ck.ck-tooltip
.ck-tooltip__text:after{position:absolute;pointer-events:none;-webkit-backface-visibility:hidden}.ck-tooltip{visibility:hidden;opacity:0;display:none;z-index:var(–ck-z-modal)}.ck-tooltip
.ck-tooltip__text{display:inline-block}.ck-tooltip
.ck-tooltip__text:after{content:\&quot;\&quot;;width:0;height:0}:root{–ck-tooltip-arrow-size:5px}.ck.ck-tooltip{left:50%}.ck.ck-tooltip.ck-tooltip_s{bottom:calc(-1
*
var(–ck-tooltip-arrow-size));transform:translateY(100%)}.ck.ck-tooltip.ck-tooltip_s
.ck-tooltip__text:after{top:calc(-1 *
var(–ck-tooltip-arrow-size));transform:translateX(-50%);border-color:transparent
transparent var(–ck-color-tooltip-background);border-width:0
var(–ck-tooltip-arrow-size)
var(–ck-tooltip-arrow-size)}.ck.ck-tooltip.ck-tooltip_n{top:calc(-1 *
var(–ck-tooltip-arrow-size));transform:translateY(-100%)}.ck.ck-tooltip.ck-tooltip_n
.ck-tooltip__text:after{bottom:calc(-1 *
var(–ck-tooltip-arrow-size));transform:translateX(-50%);border-color:var(–ck-color-tooltip-background)
transparent transparent;border-width:var(–ck-tooltip-arrow-size)
var(–ck-tooltip-arrow-size) 0}.ck.ck-tooltip
.ck-tooltip__text{border-radius:0}.ck-rounded-corners .ck.ck-tooltip
.ck-tooltip__text,.ck.ck-tooltip
.ck-tooltip__text.ck-rounded-corners{border-radius:var(–ck-border-radius)}.ck.ck-tooltip
.ck-tooltip__text{font-size:.9em;line-height:1.5;color:var(–ck-color-tooltip-text);padding:var(–ck-spacing-small)
var(–ck-spacing-medium);background:var(–ck-color-tooltip-background);position:relative;left:-50%}.ck.ck-tooltip
.ck-tooltip__text:after{border-style:solid;left:50%}.ck.ck-tooltip,.ck.ck-tooltip
.ck-tooltip__text:after{transition:opacity .2s ease-in-out
.2s}&quot;nnn//////////////////n// WEBPACK FOOTERn//
/workspace/ckeditor5/node_modules/postcss-loader/lib??ref–1-1!../ckeditor5-ui/theme/components/tooltip/tooltip.cssn//
module id = 27n// module chunks = 0“,”nvar content =
require(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./button.css&quot;);nnif(typeof
content === &#39;string&#39;) content = [[module.id, content,
&#39;&#39;]];nnvar transform;nvar insertInto;nnnnvar options =
{&quot;singleton&quot;:true,&quot;hmr&quot;:true}nnoptions.transform =
transformnoptions.insertInto = undefined;nnvar update =
require(&quot;!../../../../../node_modules/style-loader/lib/addStyles.js&quot;)(content,
options);nnif(content.locals) module.exports =
content.locals;nnif(module.hot)
{ntmodule.hot.accept(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./button.css&quot;,
function() {nttvar newContent =
require(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./button.css&quot;);nnttif(typeof
newContent === &#39;string&#39;) newContent = [[module.id, newContent,
&#39;&#39;]];nnttvar locals = (function(a, b) {ntttvar key, idx =
0;nntttfor(key in a) {nttttif(!b || <a href="key">a</a> !== <a
href="key">b</a>) return false;nttttidx++;nttt}nntttfor(key in b)
idx–;nntttreturn idx === 0;ntt}(content.locals,
newContent.locals));nnttif(!locals) throw new Error(&#39;Aborting CSS HMR
due to changed css-modules
locals.&#39;);nnttupdate(newContent);nt});nntmodule.hot.dispose(function()
{ update(); });n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-ui/theme/components/button/button.cssn// module id = 28n//
module chunks = 0“,”module.exports =
".ck.ck-button,a.ck.ck-button{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ck.ck-button
.ck-tooltip,a.ck.ck-button
.ck-tooltip{display:block}.ck.ck-button,a.ck.ck-button{position:relative}.ck.ck-button.ck-button_with-text
.ck-button__label,a.ck.ck-button.ck-button_with-text
.ck-button__label{display:inline-block}.ck.ck-button:hover
.ck-tooltip,a.ck.ck-button:hover
.ck-tooltip{visibility:visible;opacity:1}.ck.ck-button
.ck-button__label,.ck.ck-button:focus:not(:hover)
.ck-tooltip,a.ck.ck-button
.ck-button__label,a.ck.ck-button:focus:not(:hover)
.ck-tooltip{display:none}.ck.ck-button,a.ck.ck-button{background:var(–ck-color-button-default-background)}.ck.ck-button:not(.ck-disabled):focus,.ck.ck-button:not(.ck-disabled):hover,a.ck.ck-button:not(.ck-disabled):focus,a.ck.ck-button:not(.ck-disabled):hover{background:var(–ck-color-button-default-focus-background)}.ck.ck-button:not(.ck-disabled):active,a.ck.ck-button:not(.ck-disabled):active{background:var(–ck-color-button-default-active-background);box-shadow:inset
0 2px 2px
var(–ck-color-button-default-active-shadow)}.ck.ck-button.ck-disabled,a.ck.ck-button.ck-disabled{background:var(–ck-color-button-default-disabled-background)}.ck.ck-button,a.ck.ck-button{border-radius:0}.ck-rounded-corners
.ck.ck-button,.ck-rounded-corners
a.ck.ck-button,.ck.ck-button.ck-rounded-corners,a.ck.ck-button.ck-rounded-corners{border-radius:var(–ck-border-radius)}.ck.ck-button,a.ck.ck-button{white-space:nowrap;cursor:default;vertical-align:middle;padding:var(–ck-spacing-tiny);text-align:center;min-width:var(–ck-ui-component-min-height);min-height:var(–ck-ui-component-min-height);line-height:1;font-size:inherit;border:1px
solid
transparent}.ck.ck-button:active,.ck.ck-button:focus,a.ck.ck-button:active,a.ck.ck-button:focus{outline:none;border:var(–ck-focus-ring);box-shadow:var(–ck-focus-outer-shadow),0
0;border-color:transparent}.ck.ck-button.ck-disabled
.ck-button__icon,a.ck.ck-button.ck-disabled
.ck-button__icon{opacity:var(–ck-disabled-opacity)}.ck.ck-button.ck-disabled
.ck-button__label,a.ck.ck-button.ck-disabled
.ck-button__label{opacity:var(–ck-disabled-opacity)}.ck.ck-button.ck-button_with-text,a.ck.ck-button.ck-button_with-text{padding:var(–ck-spacing-tiny)
var(–ck-spacing-standard)}.ck.ck-button.ck-button_with-text
.ck-button__icon,a.ck.ck-button.ck-button_with-text
.ck-button__icon{margin-left:calc(-1 *
var(–ck-spacing-small));margin-right:var(–ck-spacing-small)}.ck.ck-button.ck-on,a.ck.ck-button.ck-on{background:var(–ck-color-button-on-background)}.ck.ck-button.ck-on:not(.ck-disabled):focus,.ck.ck-button.ck-on:not(.ck-disabled):hover,a.ck.ck-button.ck-on:not(.ck-disabled):focus,a.ck.ck-button.ck-on:not(.ck-disabled):hover{background:var(–ck-color-button-on-focus-background)}.ck.ck-button.ck-on:not(.ck-disabled):active,a.ck.ck-button.ck-on:not(.ck-disabled):active{background:var(–ck-color-button-on-active-background);box-shadow:inset
0 2px 2px
var(–ck-color-button-on-active-shadow)}.ck.ck-button.ck-on.ck-disabled,a.ck.ck-button.ck-on.ck-disabled{background:var(–ck-color-button-on-disabled-background)}.ck.ck-button.ck-button-save,a.ck.ck-button.ck-button-save{color:var(–ck-color-button-save)}.ck.ck-button.ck-button-cancel,a.ck.ck-button.ck-button-cancel{color:var(–ck-color-button-cancel)}.ck.ck-button
.ck-button__icon use,.ck.ck-button .ck-button__icon use *,a.ck.ck-button
.ck-button__icon use,a.ck.ck-button .ck-button__icon use
*{color:inherit}.ck.ck-button .ck-button__label,a.ck.ck-button
.ck-button__label{font-size:inherit;font-weight:inherit;color:inherit;cursor:inherit;vertical-align:middle}.ck.ck-button-action,a.ck.ck-button-action{background:var(–ck-color-button-action-background)}.ck.ck-button-action:not(.ck-disabled):focus,.ck.ck-button-action:not(.ck-disabled):hover,a.ck.ck-button-action:not(.ck-disabled):focus,a.ck.ck-button-action:not(.ck-disabled):hover{background:var(–ck-color-button-action-focus-background)}.ck.ck-button-action:not(.ck-disabled):active,a.ck.ck-button-action:not(.ck-disabled):active{background:var(–ck-color-button-action-active-background);box-shadow:inset
0 2px 2px
var(–ck-color-button-action-active-shadow)}.ck.ck-button-action.ck-disabled,a.ck.ck-button-action.ck-disabled{background:var(–ck-color-button-action-disabled-background)}.ck.ck-button-action,a.ck.ck-button-action{color:var(–ck-color-button-action-text)}.ck.ck-button-bold,a.ck.ck-button-bold{font-weight:700}&quot;nnn//////////////////n//
WEBPACK FOOTERn//
/workspace/ckeditor5/node_modules/postcss-loader/lib??ref–1-1!../ckeditor5-ui/theme/components/button/button.cssn//
module id = 29n// module chunks = 0“,”module.exports = "&lt;svg
width=\&quot;20\&quot; height=\&quot;20\&quot; viewBox=\&quot;0 0 20
20\&quot; xmlns=\&quot;<a
href="http://www.w3.org/2000/svg\\\"><path">www.w3.org/2000/svg\"><path</a>
d=\&quot;M5.042 9.367l2.189 1.837a.75.75 0 0 1-.965
1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23
4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1
1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z\&quot;
fill=\&quot;#000\&quot;
fill-rule=\&quot;nonzero\&quot;/&gt;&lt;/svg&gt;&quot;nnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-undo/theme/icons/undo.svgn// module id =
30n// module chunks = 0“,”module.exports = "&lt;svg width=\&quot;20\&quot;
height=\&quot;20\&quot; viewBox=\&quot;0 0 20 20\&quot; xmlns=\&quot;<a
href="http://www.w3.org/2000/svg\\\"><path">www.w3.org/2000/svg\"><path</a>
d=\&quot;M14.958 9.367l-2.189 1.837a.75.75 0 0 0 .965
1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77
4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0
1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z\&quot;
fill=\&quot;#000\&quot;
fill-rule=\&quot;nonzero\&quot;/&gt;&lt;/svg&gt;&quot;nnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-undo/theme/icons/redo.svgn// module id =
31n// module chunks = 0“,”module.exports = "&lt;svg width=\&quot;20\&quot;
height=\&quot;20\&quot; xmlns=\&quot;<a
href="http://www.w3.org/2000/svg\\\"><path">www.w3.org/2000/svg\"><path</a>
d=\&quot;M10.187 17H5.773c-.637
0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406
1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242
1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722
2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296
3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2
.11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072
0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7
5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0
.91-.765c.165-.267.247-.566.247-.897
0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z\&quot;
fill=\&quot;#000\&quot;
fill-rule=\&quot;evenodd\&quot;/&gt;&lt;/svg&gt;\n&quot;nnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-basic-styles/theme/icons/bold.svgn// module
id = 32n// module chunks = 0“,”module.exports = "&lt;svg
width=\&quot;20\&quot; height=\&quot;20\&quot; viewBox=\&quot;0 0 20
20\&quot; xmlns=\&quot;<a
href="http://www.w3.org/2000/svg\\\"><path">www.w3.org/2000/svg\"><path</a>
d=\&quot;M9.586
14.633l.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6
0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182
1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823
1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0
1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366
9.347z\&quot; fill=\&quot;#333\&quot;
fill-rule=\&quot;evenodd\&quot;/&gt;&lt;/svg&gt;&quot;nnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-basic-styles/theme/icons/italic.svgn//
module id = 33n// module chunks = 0“,”module.exports = "&lt;svg
width=\&quot;20\&quot; height=\&quot;20\&quot; viewBox=\&quot;0 0 20
20\&quot; xmlns=\&quot;<a
href="http://www.w3.org/2000/svg\\\"><g">www.w3.org/2000/svg\"><g</a>
fill=\&quot;#000\&quot; fill-rule=\&quot;evenodd\&quot;&gt;&lt;path
d=\&quot;M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354
7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552
0-.5-.449-.5-1.003v-4.011-.563zM11 10.423a6.5 6.5 0 0 1
6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0
.5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552
0-.5-.449-.5-1.003v-4.011-.563z\&quot;/&gt;&lt;/g&gt;&lt;/svg&gt;\n&quot;nnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-core/theme/icons/quote.svgn// module id =
34n// module chunks = 0“,”nvar content =
require(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./blockquote.css&quot;);nnif(typeof
content === &#39;string&#39;) content = [[module.id, content,
&#39;&#39;]];nnvar transform;nvar insertInto;nnnnvar options =
{&quot;singleton&quot;:true,&quot;hmr&quot;:true}nnoptions.transform =
transformnoptions.insertInto = undefined;nnvar update =
require(&quot;!../../../node_modules/style-loader/lib/addStyles.js&quot;)(content,
options);nnif(content.locals) module.exports =
content.locals;nnif(module.hot)
{ntmodule.hot.accept(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./blockquote.css&quot;,
function() {nttvar newContent =
require(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./blockquote.css&quot;);nnttif(typeof
newContent === &#39;string&#39;) newContent = [[module.id, newContent,
&#39;&#39;]];nnttvar locals = (function(a, b) {ntttvar key, idx =
0;nntttfor(key in a) {nttttif(!b || <a href="key">a</a> !== <a
href="key">b</a>) return false;nttttidx++;nttt}nntttfor(key in b)
idx–;nntttreturn idx === 0;ntt}(content.locals,
newContent.locals));nnttif(!locals) throw new Error(&#39;Aborting CSS HMR
due to changed css-modules
locals.&#39;);nnttupdate(newContent);nt});nntmodule.hot.dispose(function()
{ update(); });n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-block-quote/theme/blockquote.cssn// module id = 35n// module
chunks = 0“,”module.exports = ".ck-content
blockquote{overflow:hidden;padding-right:1.5em;padding-left:1.5em;margin-left:0;font-style:italic;border-left:5px
solid ccc}&quot;nnn//////////////////n// WEBPACK FOOTERn//
/workspace/ckeditor5/node_modules/postcss-loader/lib??ref–1-1!../ckeditor5-block-quote/theme/blockquote.cssn//
module id = 36n// module chunks = 0“,”nvar content =
require(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./widget.css&quot;);nnif(typeof
content === &#39;string&#39;) content = [[module.id, content,
&#39;&#39;]];nnvar transform;nvar insertInto;nnnnvar options =
{&quot;singleton&quot;:true,&quot;hmr&quot;:true}nnoptions.transform =
transformnoptions.insertInto = undefined;nnvar update =
require(&quot;!../../../node_modules/style-loader/lib/addStyles.js&quot;)(content,
options);nnif(content.locals) module.exports =
content.locals;nnif(module.hot)
{ntmodule.hot.accept(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./widget.css&quot;,
function() {nttvar newContent =
require(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./widget.css&quot;);nnttif(typeof
newContent === &#39;string&#39;) newContent = [[module.id, newContent,
&#39;&#39;]];nnttvar locals = (function(a, b) {ntttvar key, idx =
0;nntttfor(key in a) {nttttif(!b || <a href="key">a</a> !== <a
href="key">b</a>) return false;nttttidx++;nttt}nntttfor(key in b)
idx–;nntttreturn idx === 0;ntt}(content.locals,
newContent.locals));nnttif(!locals) throw new Error(&#39;Aborting CSS HMR
due to changed css-modules
locals.&#39;);nnttupdate(newContent);nt});nntmodule.hot.dispose(function()
{ update(); });n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-widget/theme/widget.cssn// module id = 37n// module chunks =
0“,”module.exports =
":root{–ck-widget-outline-thickness:3px;–ck-color-widget-border-blurred:#dedede;–ck-color-widget-border-hover:#ffd15c;–ck-color-widget-editable-focused-background:var(–ck-color-base-background),}.ck
.ck-widget{margin:var(–ck-spacing-standard) 0;padding:0}.ck
.ck-widget.ck-widget_selected,.ck
.ck-widget.ck-widget_selected:hover{outline:var(–ck-widget-outline-thickness)
solid var(–ck-color-focus-border)}.ck-editor__editable.ck-blurred .ck
.ck-widget.ck-widget_selected{outline:var(–ck-widget-outline-thickness)
solid var(–ck-color-widget-border-blurred)}.ck
.ck-widget:hover{outline:var(–ck-widget-outline-thickness) solid
var(–ck-color-widget-border-hover)}.ck .ck-widget
.ck-editor__nested-editable{border:1px solid transparent}.ck .ck-widget
.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck
.ck-widget
.ck-editor__nested-editable:focus{outline:none;border:var(–ck-focus-ring);box-shadow:var(–ck-inner-shadow),0
0;background-color:var(–ck-color-widget-editable-focused-background)}&quot;nnn//////////////////n//
WEBPACK FOOTERn//
/workspace/ckeditor5/node_modules/postcss-loader/lib??ref–1-1!../ckeditor5-widget/theme/widget.cssn//
module id = 38n// module chunks = 0“,”nvar content =
require(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./inputtext.css&quot;);nnif(typeof
content === &#39;string&#39;) content = [[module.id, content,
&#39;&#39;]];nnvar transform;nvar insertInto;nnnnvar options =
{&quot;singleton&quot;:true,&quot;hmr&quot;:true}nnoptions.transform =
transformnoptions.insertInto = undefined;nnvar update =
require(&quot;!../../../../../node_modules/style-loader/lib/addStyles.js&quot;)(content,
options);nnif(content.locals) module.exports =
content.locals;nnif(module.hot)
{ntmodule.hot.accept(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./inputtext.css&quot;,
function() {nttvar newContent =
require(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./inputtext.css&quot;);nnttif(typeof
newContent === &#39;string&#39;) newContent = [[module.id, newContent,
&#39;&#39;]];nnttvar locals = (function(a, b) {ntttvar key, idx =
0;nntttfor(key in a) {nttttif(!b || <a href="key">a</a> !== <a
href="key">b</a>) return false;nttttidx++;nttt}nntttfor(key in b)
idx–;nntttreturn idx === 0;ntt}(content.locals,
newContent.locals));nnttif(!locals) throw new Error(&#39;Aborting CSS HMR
due to changed css-modules
locals.&#39;);nnttupdate(newContent);nt});nntmodule.hot.dispose(function()
{ update(); });n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-ui/theme/components/inputtext/inputtext.cssn// module id =
39n// module chunks = 0“,”module.exports =
":root{–ck-input-text-width:18em}.ck.ck-input-text{border-radius:0}.ck-rounded-corners
.ck.ck-input-text,.ck.ck-input-text.ck-rounded-corners{border-radius:var(–ck-border-radius)}.ck.ck-input-text{box-shadow:var(–ck-inner-shadow),0
0;background:var(–ck-color-input-background);border:1px solid
var(–ck-color-input-border);padding:var(–ck-spacing-extra-tiny)
var(–ck-spacing-medium);min-width:var(–ck-input-text-width);min-height:var(–ck-ui-component-min-height);transition-property:box-shadow,border;transition:.2s
ease-in-out}.ck.ck-input-text:focus{outline:none;border:var(–ck-focus-ring);box-shadow:var(–ck-focus-outer-shadow),var(–ck-inner-shadow)}.<a
href="readonly">ck.ck-input-text</a>{border:1px solid
var(–ck-color-input-disabled-border);background:var(–ck-color-input-disabled-background);color:var(–ck-color-input-disabled-text)}&quot;nnn//////////////////n//
WEBPACK FOOTERn//
/workspace/ckeditor5/node_modules/postcss-loader/lib??ref–1-1!../ckeditor5-ui/theme/components/inputtext/inputtext.cssn//
module id = 40n// module chunks = 0“,”nvar content =
require(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./textalternativeform.css&quot;);nnif(typeof
content === &#39;string&#39;) content = [[module.id, content,
&#39;&#39;]];nnvar transform;nvar insertInto;nnnnvar options =
{&quot;singleton&quot;:true,&quot;hmr&quot;:true}nnoptions.transform =
transformnoptions.insertInto = undefined;nnvar update =
require(&quot;!../../../node_modules/style-loader/lib/addStyles.js&quot;)(content,
options);nnif(content.locals) module.exports =
content.locals;nnif(module.hot)
{ntmodule.hot.accept(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./textalternativeform.css&quot;,
function() {nttvar newContent =
require(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./textalternativeform.css&quot;);nnttif(typeof
newContent === &#39;string&#39;) newContent = [[module.id, newContent,
&#39;&#39;]];nnttvar locals = (function(a, b) {ntttvar key, idx =
0;nntttfor(key in a) {nttttif(!b || <a href="key">a</a> !== <a
href="key">b</a>) return false;nttttidx++;nttt}nntttfor(key in b)
idx–;nntttreturn idx === 0;ntt}(content.locals,
newContent.locals));nnttif(!locals) throw new Error(&#39;Aborting CSS HMR
due to changed css-modules
locals.&#39;);nnttupdate(newContent);nt});nntmodule.hot.dispose(function()
{ update(); });n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-image/theme/textalternativeform.cssn// module id = 41n//
module chunks = 0“,”module.exports = ".ck.ck-text-alternative-form
.ck-labeled-input{display:inline-block}.ck.ck-text-alternative-form
.ck-label{display:none}.ck.ck-text-alternative-form{padding:var(–ck-spacing-standard)}.ck.ck-text-alternative-form:focus{outline:none}.ck.ck-text-alternative-form&gt;:not(:first-child){margin-left:var(–ck-spacing-standard)}&quot;nnn//////////////////n//
WEBPACK FOOTERn//
/workspace/ckeditor5/node_modules/postcss-loader/lib??ref–1-1!../ckeditor5-image/theme/textalternativeform.cssn//
module id = 42n// module chunks = 0“,”nvar content =
require(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./balloonpanel.css&quot;);nnif(typeof
content === &#39;string&#39;) content = [[module.id, content,
&#39;&#39;]];nnvar transform;nvar insertInto;nnnnvar options =
{&quot;singleton&quot;:true,&quot;hmr&quot;:true}nnoptions.transform =
transformnoptions.insertInto = undefined;nnvar update =
require(&quot;!../../../../../node_modules/style-loader/lib/addStyles.js&quot;)(content,
options);nnif(content.locals) module.exports =
content.locals;nnif(module.hot)
{ntmodule.hot.accept(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./balloonpanel.css&quot;,
function() {nttvar newContent =
require(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./balloonpanel.css&quot;);nnttif(typeof
newContent === &#39;string&#39;) newContent = [[module.id, newContent,
&#39;&#39;]];nnttvar locals = (function(a, b) {ntttvar key, idx =
0;nntttfor(key in a) {nttttif(!b || <a href="key">a</a> !== <a
href="key">b</a>) return false;nttttidx++;nttt}nntttfor(key in b)
idx–;nntttreturn idx === 0;ntt}(content.locals,
newContent.locals));nnttif(!locals) throw new Error(&#39;Aborting CSS HMR
due to changed css-modules
locals.&#39;);nnttupdate(newContent);nt});nntmodule.hot.dispose(function()
{ update(); });n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-ui/theme/components/panel/balloonpanel.cssn// module id =
43n// module chunks = 0“,”module.exports =
".ck.ck-balloon-panel{display:none;position:absolute;z-index:var(–ck-z-modal)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{content:\&quot;\&quot;;position:absolute}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{z-index:var(–ck-z-default)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after{z-index:calc(var(–ck-z-default)
+ 1)}.<a
href="class*=arrow_n">ck.ck-balloon-panel</a>:before{z-index:var(–ck-z-default)}.<a
href="class*=arrow_n">ck.ck-balloon-panel</a>:after{z-index:calc(var(–ck-z-default)
+ 1)}.<a
href="class*=arrow_s">ck.ck-balloon-panel</a>:before{z-index:var(–ck-z-default)}.<a
href="class*=arrow_s">ck.ck-balloon-panel</a>:after{z-index:calc(var(–ck-z-default)
+
1)}.ck.ck-balloon-panel.ck-balloon-panel_visible{display:block}:root{–ck-balloon-arrow-offset:2px;–ck-balloon-arrow-height:10px;–ck-balloon-arrow-half-width:8px}.ck.ck-balloon-panel{border-radius:0}.ck-rounded-corners
.ck.ck-balloon-panel,.ck.ck-balloon-panel.ck-rounded-corners{border-radius:var(–ck-border-radius)}.ck.ck-balloon-panel{box-shadow:var(–ck-drop-shadow),0
0;min-height:15px;background:var(–ck-color-panel-background);border:1px
solid
var(–ck-color-panel-border)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{width:0;height:0;border-style:solid}.<a
href="class*=arrow_n">ck.ck-balloon-panel</a>:<a
href="class*=arrow_n">after,.ck.ck-balloon-panel</a>:before{border-width:0
var(–ck-balloon-arrow-half-width) var(–ck-balloon-arrow-height)}.<a
href="class*=arrow_n">ck.ck-balloon-panel</a>:before{border-color:transparent
transparent var(–ck-color-panel-border)}.<a
href="class*=arrow_n">ck.ck-balloon-panel</a>:after{border-color:transparent
transparent
var(–ck-color-panel-background);margin-top:var(–ck-balloon-arrow-offset)}.<a
href="class*=arrow_s">ck.ck-balloon-panel</a>:<a
href="class*=arrow_s">after,.ck.ck-balloon-panel</a>:before{border-width:var(–ck-balloon-arrow-height)
var(–ck-balloon-arrow-half-width) 0}.<a
href="class*=arrow_s">ck.ck-balloon-panel</a>:before{border-color:var(–ck-color-panel-border)
transparent transparent}.<a
href="class*=arrow_s">ck.ck-balloon-panel</a>:after{border-color:var(–ck-color-panel-background)
transparent
transparent;margin-bottom:var(–ck-balloon-arrow-offset)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:before{left:50%;margin-left:calc(-1
* var(–ck-balloon-arrow-half-width));top:calc(-1 *
var(–ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:before{left:calc(2
* var(–ck-balloon-arrow-half-width));top:calc(-1 *
var(–ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:before{right:calc(2
* var(–ck-balloon-arrow-half-width));top:calc(-1 *
var(–ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:before{left:50%;margin-left:calc(-1
* var(–ck-balloon-arrow-half-width));bottom:calc(-1 *
var(–ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:before{left:calc(2
* var(–ck-balloon-arrow-half-width));bottom:calc(-1 *
var(–ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:before{right:calc(2
* var(–ck-balloon-arrow-half-width));bottom:calc(-1 *
var(–ck-balloon-arrow-height))}&quot;nnn//////////////////n// WEBPACK
FOOTERn//
/workspace/ckeditor5/node_modules/postcss-loader/lib??ref–1-1!../ckeditor5-ui/theme/components/panel/balloonpanel.cssn//
module id = 44n// module chunks = 0“,”module.exports = "&lt;svg
width=\&quot;20\&quot; height=\&quot;20\&quot; viewBox=\&quot;0 0 20
20\&quot; xmlns=\&quot;<a
href="http://www.w3.org/2000/svg\\\"><path">www.w3.org/2000/svg\"><path</a>
d=\&quot;M5.085 6.22L2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094
11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401
2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0
1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239
6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55
8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276
1.276a10.164 10.164 0 0
1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0
0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0
.008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242
3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838
3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313
9.313 0 0 0
2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72
0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0
0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592
3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0
0-1.054-.768 9.766 9.766 0 0
0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21l-.069.002a.508.508 0
0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0
.326.199l.045.005c.091.003.181.003.272.012.9.093 1.676.675 2.017
1.513.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0
.35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0
0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z\&quot;
fill=\&quot;#000\&quot;
fill-rule=\&quot;evenodd\&quot;/&gt;&lt;/svg&gt;&quot;nnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-core/theme/icons/low-vision.svgn// module id
= 45n// module chunks = 0“,”nvar content =
require(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./image.css&quot;);nnif(typeof
content === &#39;string&#39;) content = [[module.id, content,
&#39;&#39;]];nnvar transform;nvar insertInto;nnnnvar options =
{&quot;singleton&quot;:true,&quot;hmr&quot;:true}nnoptions.transform =
transformnoptions.insertInto = undefined;nnvar update =
require(&quot;!../../../node_modules/style-loader/lib/addStyles.js&quot;)(content,
options);nnif(content.locals) module.exports =
content.locals;nnif(module.hot)
{ntmodule.hot.accept(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./image.css&quot;,
function() {nttvar newContent =
require(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./image.css&quot;);nnttif(typeof
newContent === &#39;string&#39;) newContent = [[module.id, newContent,
&#39;&#39;]];nnttvar locals = (function(a, b) {ntttvar key, idx =
0;nntttfor(key in a) {nttttif(!b || <a href="key">a</a> !== <a
href="key">b</a>) return false;nttttidx++;nttt}nntttfor(key in b)
idx–;nntttreturn idx === 0;ntt}(content.locals,
newContent.locals));nnttif(!locals) throw new Error(&#39;Aborting CSS HMR
due to changed css-modules
locals.&#39;);nnttupdate(newContent);nt});nntmodule.hot.dispose(function()
{ update(); });n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-image/theme/image.cssn// module id = 46n// module chunks =
0“,”module.exports = ".ck-content
.image{clear:both;text-align:center}.ck-content
.image&gt;img{display:block;margin:0
auto;max-width:100%}&quot;nnn//////////////////n// WEBPACK FOOTERn//
/workspace/ckeditor5/node_modules/postcss-loader/lib??ref–1-1!../ckeditor5-image/theme/image.cssn//
module id = 47n// module chunks = 0“,”module.exports = "&lt;svg
width=\&quot;20\&quot; height=\&quot;20\&quot; xmlns=\&quot;<a
href="http://www.w3.org/2000/svg\\\"><path">www.w3.org/2000/svg\"><path</a>
d=\&quot;M6.91 10.54c.26-.23.64-.21.88.03l3.36 3.14 2.23-2.06a.64.64 0 0 1
.87 0l2.52 2.97V4.5H3.2v10.12l3.71-4.08zm10.27-7.51c.6 0 1.09.47 1.09
1.05v11.84c0 .59-.49 1.06-1.09 1.06H2.79c-.6
0-1.09-.47-1.09-1.06V4.08c0-.58.49-1.05 1.1-1.05h14.38zm-5.22 5.56a1.96
1.96 0 1 1 3.4-1.96 1.96 1.96 0 0 1-3.4 1.96z\&quot;
fill=\&quot;#000\&quot;
fill-rule=\&quot;nonzero\&quot;/&gt;&lt;/svg&gt;\n&quot;nnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-core/theme/icons/image.svgn// module id =
48n// module chunks = 0“,”module.exports = "&lt;svg xmlns=\&quot;<a
href="http://www.w3.org/2000/svg">www.w3.org/2000/svg</a>\&quot;
viewBox=\&quot;0 0 700 250\&quot;&gt;&lt;g fill=\&quot;none\&quot;
fill-rule=\&quot;evenodd\&quot;&gt;&lt;rect width=\&quot;700\&quot;
height=\&quot;250\&quot; fill=\&quot;#F7F7F7\&quot;
rx=\&quot;4\&quot;/&gt;&lt;text fill=\&quot;#5F6F77\&quot;
font-family=\&quot;Arial,sans-serif\&quot;
font-size=\&quot;24\&quot;&gt;&lt;tspan x=\&quot;247.9\&quot;
y=\&quot;135\&quot;&gt;Uploading
image…&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;/svg&gt;\n&quot;nnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-image/theme/icons/image_placeholder.svgn//
module id = 49n// module chunks = 0“,”nvar content =
require(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./imageuploadprogress.css&quot;);nnif(typeof
content === &#39;string&#39;) content = [[module.id, content,
&#39;&#39;]];nnvar transform;nvar insertInto;nnnnvar options =
{&quot;singleton&quot;:true,&quot;hmr&quot;:true}nnoptions.transform =
transformnoptions.insertInto = undefined;nnvar update =
require(&quot;!../../../node_modules/style-loader/lib/addStyles.js&quot;)(content,
options);nnif(content.locals) module.exports =
content.locals;nnif(module.hot)
{ntmodule.hot.accept(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./imageuploadprogress.css&quot;,
function() {nttvar newContent =
require(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./imageuploadprogress.css&quot;);nnttif(typeof
newContent === &#39;string&#39;) newContent = [[module.id, newContent,
&#39;&#39;]];nnttvar locals = (function(a, b) {ntttvar key, idx =
0;nntttfor(key in a) {nttttif(!b || <a href="key">a</a> !== <a
href="key">b</a>) return false;nttttidx++;nttt}nntttfor(key in b)
idx–;nntttreturn idx === 0;ntt}(content.locals,
newContent.locals));nnttif(!locals) throw new Error(&#39;Aborting CSS HMR
due to changed css-modules
locals.&#39;);nnttupdate(newContent);nt});nntmodule.hot.dispose(function()
{ update(); });n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-image/theme/imageuploadprogress.cssn// module id = 50n//
module chunks = 0“,”module.exports = ".ck-content
.image{position:relative;overflow:hidden}.ck-content
.image.ck-infinite-progress:before{content:\&quot;\&quot;;position:absolute;top:0;right:0}.ck-content
.image
.ck-progress-bar{position:absolute;top:0;left:0}:root{–ck-image-upload-progress-line-width:30px}.ck-content
.image.ck-appear{animation:a .7s}.ck-content
.image.ck-infinite-progress:before{width:var(–ck-image-upload-progress-line-width);height:2px;background:var(–ck-color-upload-infinite-background);animation-name:b;animation-duration:1.5s;animation-iteration-count:infinite;transition-timing-function:linear}.ck-content
.image.ck-image-upload-placeholder&gt;img{width:100%}.ck-content .image
.ck-progress-bar{height:2px;width:0;background:var(–ck-color-upload-bar-background);transition:width
.1s}@keyframes a{0%{opacity:0}to{opacity:1}}@keyframes
b{0%{width:var(–ck-image-upload-progress-line-width);right:0}50%{width:calc(var(–ck-image-upload-progress-line-width)
* 1.5)}to{right:100%}}&quot;nnn//////////////////n// WEBPACK FOOTERn//
/workspace/ckeditor5/node_modules/postcss-loader/lib??ref–1-1!../ckeditor5-image/theme/imageuploadprogress.cssn//
module id = 51n// module chunks = 0“,”nvar content =
require(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./dropdown.css&quot;);nnif(typeof
content === &#39;string&#39;) content = [[module.id, content,
&#39;&#39;]];nnvar transform;nvar insertInto;nnnnvar options =
{&quot;singleton&quot;:true,&quot;hmr&quot;:true}nnoptions.transform =
transformnoptions.insertInto = undefined;nnvar update =
require(&quot;!../../../../../node_modules/style-loader/lib/addStyles.js&quot;)(content,
options);nnif(content.locals) module.exports =
content.locals;nnif(module.hot)
{ntmodule.hot.accept(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./dropdown.css&quot;,
function() {nttvar newContent =
require(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./dropdown.css&quot;);nnttif(typeof
newContent === &#39;string&#39;) newContent = [[module.id, newContent,
&#39;&#39;]];nnttvar locals = (function(a, b) {ntttvar key, idx =
0;nntttfor(key in a) {nttttif(!b || <a href="key">a</a> !== <a
href="key">b</a>) return false;nttttidx++;nttt}nntttfor(key in b)
idx–;nntttreturn idx === 0;ntt}(content.locals,
newContent.locals));nnttif(!locals) throw new Error(&#39;Aborting CSS HMR
due to changed css-modules
locals.&#39;);nnttupdate(newContent);nt});nntmodule.hot.dispose(function()
{ update(); });n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-ui/theme/components/dropdown/dropdown.cssn// module id = 52n//
module chunks = 0“,”module.exports =
".ck.ck-dropdown{display:inline-block;position:relative}.ck.ck-dropdown
.ck-dropdown__arrow{pointer-events:none;z-index:var(–ck-z-default);position:absolute;top:50%;transform:translate3d(0,-50%,0)}.ck.ck-dropdown
.ck-button.ck-dropdown__button{width:100%}.ck.ck-dropdown
.ck-button.ck-dropdown__button.ck-on
.ck-tooltip{display:none}.ck.ck-dropdown
.ck-dropdown__panel{-webkit-backface-visibility:hidden;display:none;z-index:var(–ck-z-modal);position:absolute;left:0;transform:translate3d(0,100%,0)}.ck.ck-dropdown
.ck-dropdown__panel.ck-dropdown__panel-visible{display:inline-block;will-change:transform}:root{–ck-dropdown-arrow-size:calc(0.5
* var(–ck-icon-size))}.ck.ck-dropdown{font-size:inherit}.ck.ck-dropdown
.ck-dropdown__arrow{right:var(–ck-spacing-standard);width:var(–ck-dropdown-arrow-size)}.ck.ck-dropdown.ck-disabled
.ck-dropdown__arrow{opacity:var(–ck-disabled-opacity)}.ck.ck-dropdown
.ck-button.ck-dropdown__button{padding-right:calc(2.5 *
var(–ck-spacing-standard))}.ck.ck-dropdown
.ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-left:var(–ck-spacing-small)}.ck.ck-dropdown
.ck-button.ck-dropdown__button.ck-disabled
.ck-button__label{opacity:var(–ck-disabled-opacity)}.ck.ck-dropdown
.ck-button.ck-dropdown__button.ck-on{border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown
.ck-button.ck-dropdown__button
.ck-button__label{width:7em;overflow:hidden;text-overflow:ellipsis}.ck.ck-dropdown__panel{border-radius:0;box-shadow:var(–ck-drop-shadow),0
0}.ck-rounded-corners
.ck.ck-dropdown__panel,.ck.ck-dropdown__panel.ck-rounded-corners{border-radius:var(–ck-border-radius);border-top-left-radius:0}.ck.ck-dropdown__panel{background:var(–ck-color-dropdown-panel-background);border:1px
solid
var(–ck-color-dropdown-panel-border);bottom:0;min-width:100%}&quot;nnn//////////////////n//
WEBPACK FOOTERn//
/workspace/ckeditor5/node_modules/postcss-loader/lib??ref–1-1!../ckeditor5-ui/theme/components/dropdown/dropdown.cssn//
module id = 53n// module chunks = 0“,”module.exports = "&lt;svg
width=\&quot;10\&quot; height=\&quot;10\&quot; viewBox=\&quot;0 0 10
10\&quot; xmlns=\&quot;<a
href="http://www.w3.org/2000/svg\\\"><path">www.w3.org/2000/svg\"><path</a>
d=\&quot;M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75
0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z\&quot;
fill=\&quot;#000\&quot;
fill-rule=\&quot;evenodd\&quot;/&gt;&lt;/svg&gt;&quot;nnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-ui/theme/icons/dropdown-arrow.svgn// module
id = 54n// module chunks = 0“,”nvar content =
require(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./list.css&quot;);nnif(typeof
content === &#39;string&#39;) content = [[module.id, content,
&#39;&#39;]];nnvar transform;nvar insertInto;nnnnvar options =
{&quot;singleton&quot;:true,&quot;hmr&quot;:true}nnoptions.transform =
transformnoptions.insertInto = undefined;nnvar update =
require(&quot;!../../../../../node_modules/style-loader/lib/addStyles.js&quot;)(content,
options);nnif(content.locals) module.exports =
content.locals;nnif(module.hot)
{ntmodule.hot.accept(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./list.css&quot;,
function() {nttvar newContent =
require(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./list.css&quot;);nnttif(typeof
newContent === &#39;string&#39;) newContent = [[module.id, newContent,
&#39;&#39;]];nnttvar locals = (function(a, b) {ntttvar key, idx =
0;nntttfor(key in a) {nttttif(!b || <a href="key">a</a> !== <a
href="key">b</a>) return false;nttttidx++;nttt}nntttfor(key in b)
idx–;nntttreturn idx === 0;ntt}(content.locals,
newContent.locals));nnttif(!locals) throw new Error(&#39;Aborting CSS HMR
due to changed css-modules
locals.&#39;);nnttupdate(newContent);nt});nntmodule.hot.dispose(function()
{ update(); });n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-ui/theme/components/list/list.cssn// module id = 55n// module
chunks = 0“,”module.exports =
".ck.ck-list{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;overflow:hidden}.ck.ck-list
.ck-list__item{display:block}.ck.ck-list
.ck-list__item:focus{position:relative;z-index:var(–ck-z-default)}.ck.ck-list{border-radius:0}.ck-rounded-corners
.ck.ck-list,.ck.ck-list.ck-rounded-corners{border-radius:var(–ck-border-radius)}.ck.ck-list{list-style-type:none;background:var(–ck-color-list-background)}.ck.ck-list__item{padding:var(–ck-spacing-medium);cursor:default;min-width:12em}.ck.ck-list__item:focus,.ck.ck-list__item:hover{background:var(–ck-color-list-item-background-hover)}.ck.ck-list__item:focus{box-shadow:var(–ck-focus-outer-shadow),0
0;outline:none}.ck.ck-list__item_active{background:var(–ck-color-list-item-background-active);color:var(–ck-color-list-item-text-active)}.ck.ck-list__item_active:focus,.ck.ck-list__item_active:hover{background:var(–ck-color-list-item-background-active-focus)}&quot;nnn//////////////////n//
WEBPACK FOOTERn//
/workspace/ckeditor5/node_modules/postcss-loader/lib??ref–1-1!../ckeditor5-ui/theme/components/list/list.cssn//
module id = 56n// module chunks = 0“,”nvar content =
require(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./toolbardropdown.css&quot;);nnif(typeof
content === &#39;string&#39;) content = [[module.id, content,
&#39;&#39;]];nnvar transform;nvar insertInto;nnnnvar options =
{&quot;singleton&quot;:true,&quot;hmr&quot;:true}nnoptions.transform =
transformnoptions.insertInto = undefined;nnvar update =
require(&quot;!../../../../../node_modules/style-loader/lib/addStyles.js&quot;)(content,
options);nnif(content.locals) module.exports =
content.locals;nnif(module.hot)
{ntmodule.hot.accept(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./toolbardropdown.css&quot;,
function() {nttvar newContent =
require(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./toolbardropdown.css&quot;);nnttif(typeof
newContent === &#39;string&#39;) newContent = [[module.id, newContent,
&#39;&#39;]];nnttvar locals = (function(a, b) {ntttvar key, idx =
0;nntttfor(key in a) {nttttif(!b || <a href="key">a</a> !== <a
href="key">b</a>) return false;nttttidx++;nttt}nntttfor(key in b)
idx–;nntttreturn idx === 0;ntt}(content.locals,
newContent.locals));nnttif(!locals) throw new Error(&#39;Aborting CSS HMR
due to changed css-modules
locals.&#39;);nnttupdate(newContent);nt});nntmodule.hot.dispose(function()
{ update(); });n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-ui/theme/components/dropdown/toolbardropdown.cssn// module id
= 57n// module chunks = 0“,”module.exports = ".ck.ck-toolbar-dropdown
.ck-toolbar{flex-wrap:nowrap}.ck.ck-toolbar-dropdown .ck-dropdown__panel
.ck-button:focus{z-index:calc(var(–ck-z-default) +
1)}.ck.ck-toolbar-dropdown
.ck-toolbar{border:0}&quot;nnn//////////////////n// WEBPACK FOOTERn//
/workspace/ckeditor5/node_modules/postcss-loader/lib??ref–1-1!../ckeditor5-ui/theme/components/dropdown/toolbardropdown.cssn//
module id = 58n// module chunks = 0“,”nvar content =
require(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./listdropdown.css&quot;);nnif(typeof
content === &#39;string&#39;) content = [[module.id, content,
&#39;&#39;]];nnvar transform;nvar insertInto;nnnnvar options =
{&quot;singleton&quot;:true,&quot;hmr&quot;:true}nnoptions.transform =
transformnoptions.insertInto = undefined;nnvar update =
require(&quot;!../../../../../node_modules/style-loader/lib/addStyles.js&quot;)(content,
options);nnif(content.locals) module.exports =
content.locals;nnif(module.hot)
{ntmodule.hot.accept(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./listdropdown.css&quot;,
function() {nttvar newContent =
require(&quot;!!../../../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./listdropdown.css&quot;);nnttif(typeof
newContent === &#39;string&#39;) newContent = [[module.id, newContent,
&#39;&#39;]];nnttvar locals = (function(a, b) {ntttvar key, idx =
0;nntttfor(key in a) {nttttif(!b || <a href="key">a</a> !== <a
href="key">b</a>) return false;nttttidx++;nttt}nntttfor(key in b)
idx–;nntttreturn idx === 0;ntt}(content.locals,
newContent.locals));nnttif(!locals) throw new Error(&#39;Aborting CSS HMR
due to changed css-modules
locals.&#39;);nnttupdate(newContent);nt});nntmodule.hot.dispose(function()
{ update(); });n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-ui/theme/components/dropdown/listdropdown.cssn// module id =
59n// module chunks = 0“,”module.exports = ".ck.ck-dropdown
.ck-dropdown__panel .ck-list{border-radius:0}.ck-rounded-corners
.ck.ck-dropdown .ck-dropdown__panel .ck-list,.ck.ck-dropdown
.ck-dropdown__panel
.ck-list.ck-rounded-corners{border-radius:var(–ck-border-radius);border-top-left-radius:0}.ck.ck-dropdown
.ck-dropdown__panel
.ck-list&gt;.ck-list__item{line-height:calc(.8*var(–ck-line-height-base)*var(–ck-font-size-base));padding:calc(.4*var(–ck-line-height-base)*var(–ck-font-size-base))}&quot;nnn//////////////////n//
WEBPACK FOOTERn//
/workspace/ckeditor5/node_modules/postcss-loader/lib??ref–1-1!../ckeditor5-ui/theme/components/dropdown/listdropdown.cssn//
module id = 60n// module chunks = 0“,”module.exports =
".ck.ck-heading_heading1{font-size:20px}.ck.ck-heading_heading2{font-size:17px}.ck.ck-heading_heading3{font-size:14px}.<a
href="class*=ck-heading_heading">ck</a>{font-weight:700}.ck.ck-dropdown.ck-heading-dropdown
.ck-dropdown__button
.ck-button__label{width:8em}&quot;nnn//////////////////n// WEBPACK
FOOTERn//
/workspace/ckeditor5/node_modules/postcss-loader/lib??ref–1-1!../ckeditor5-heading/theme/heading.cssn//
module id = 61n// module chunks = 0“,”nvar content =
require(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./placeholder.css&quot;);nnif(typeof
content === &#39;string&#39;) content = [[module.id, content,
&#39;&#39;]];nnvar transform;nvar insertInto;nnnnvar options =
{&quot;singleton&quot;:true,&quot;hmr&quot;:true}nnoptions.transform =
transformnoptions.insertInto = undefined;nnvar update =
require(&quot;!../../../node_modules/style-loader/lib/addStyles.js&quot;)(content,
options);nnif(content.locals) module.exports =
content.locals;nnif(module.hot)
{ntmodule.hot.accept(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./placeholder.css&quot;,
function() {nttvar newContent =
require(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./placeholder.css&quot;);nnttif(typeof
newContent === &#39;string&#39;) newContent = [[module.id, newContent,
&#39;&#39;]];nnttvar locals = (function(a, b) {ntttvar key, idx =
0;nntttfor(key in a) {nttttif(!b || <a href="key">a</a> !== <a
href="key">b</a>) return false;nttttidx++;nttt}nntttfor(key in b)
idx–;nntttreturn idx === 0;ntt}(content.locals,
newContent.locals));nnttif(!locals) throw new Error(&#39;Aborting CSS HMR
due to changed css-modules
locals.&#39;);nnttupdate(newContent);nt});nntmodule.hot.dispose(function()
{ update(); });n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-engine/theme/placeholder.cssn// module id = 62n// module
chunks = 0“,”module.exports = ".ck.ck-placeholder:before,.ck
.ck-placeholder:before{content:attr(data-placeholder);pointer-events:none;cursor:text;color:var(–ck-color-engine-placeholder-text)}&quot;nnn//////////////////n//
WEBPACK FOOTERn//
/workspace/ckeditor5/node_modules/postcss-loader/lib??ref–1-1!../ckeditor5-engine/theme/placeholder.cssn//
module id = 63n// module chunks = 0“,”nvar content =
require(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./imagecaption.css&quot;);nnif(typeof
content === &#39;string&#39;) content = [[module.id, content,
&#39;&#39;]];nnvar transform;nvar insertInto;nnnnvar options =
{&quot;singleton&quot;:true,&quot;hmr&quot;:true}nnoptions.transform =
transformnoptions.insertInto = undefined;nnvar update =
require(&quot;!../../../node_modules/style-loader/lib/addStyles.js&quot;)(content,
options);nnif(content.locals) module.exports =
content.locals;nnif(module.hot)
{ntmodule.hot.accept(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./imagecaption.css&quot;,
function() {nttvar newContent =
require(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./imagecaption.css&quot;);nnttif(typeof
newContent === &#39;string&#39;) newContent = [[module.id, newContent,
&#39;&#39;]];nnttvar locals = (function(a, b) {ntttvar key, idx =
0;nntttfor(key in a) {nttttif(!b || <a href="key">a</a> !== <a
href="key">b</a>) return false;nttttidx++;nttt}nntttfor(key in b)
idx–;nntttreturn idx === 0;ntt}(content.locals,
newContent.locals));nnttif(!locals) throw new Error(&#39;Aborting CSS HMR
due to changed css-modules
locals.&#39;);nnttupdate(newContent);nt});nntmodule.hot.dispose(function()
{ update(); });n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-image/theme/imagecaption.cssn// module id = 64n// module
chunks = 0“,”module.exports = ".ck-content
.image&gt;figcaption{color:#333;background-color:#f7f7f7;padding:.6em;font-size:.75em;outline-offset:-1px}&quot;nnn//////////////////n//
WEBPACK FOOTERn//
/workspace/ckeditor5/node_modules/postcss-loader/lib??ref–1-1!../ckeditor5-image/theme/imagecaption.cssn//
module id = 65n// module chunks = 0“,”module.exports = "&lt;svg
width=\&quot;20\&quot; height=\&quot;20\&quot; xmlns=\&quot;<a
href="http://www.w3.org/2000/svg\\\"><g">www.w3.org/2000/svg\"><g</a>
fill=\&quot;#000\&quot; fill-rule=\&quot;nonzero\&quot;&gt;&lt;path
d=\&quot;M2 4.5V3h16v1.5zM4.5 7.5V12h11V7.5h-11zM4.061 6H15.94c.586 0
1.061.407 1.061.91v5.68c0 .503-.475.91-1.061.91H4.06C3.475 13.5 3 13.093 3
12.59V6.91C3 6.406 3.475 6 4.061 6zM2
16.5V15h16v1.5z\&quot;/&gt;&lt;/g&gt;&lt;/svg&gt;\n&quot;nnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-core/theme/icons/object-full-width.svgn//
module id = 66n// module chunks = 0“,”module.exports = "&lt;svg
viewBox=\&quot;0 0 20 20\&quot; xmlns=\&quot;<a
href="http://www.w3.org/2000/svg">www.w3.org/2000/svg</a>\&quot;
fill-rule=\&quot;evenodd\&quot; clip-rule=\&quot;evenodd\&quot;
stroke-linejoin=\&quot;round\&quot;
stroke-miterlimit=\&quot;1.414\&quot;&gt;&lt;path d=\&quot;M18
4.5V3H2v1.5h16zm0 3V6h-5.674v1.5H18zm0 3V9h-5.674v1.5H18zm0
3V12h-5.674v1.5H18zm-8.5-6V12h-6V7.5h6zm.818-1.5H2.682C2.305 6 2 6.407 2
6.91v5.68c0 .503.305.91.682.91h7.636c.377 0
.682-.407.682-.91V6.91c0-.503-.305-.91-.682-.91zM18
16.5V15H2v1.5h16z\&quot;
fill-rule=\&quot;nonzero\&quot;/&gt;&lt;/svg&gt;&quot;nnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-core/theme/icons/object-left.svgn// module
id = 67n// module chunks = 0“,”module.exports = "&lt;svg
width=\&quot;20\&quot; height=\&quot;20\&quot; xmlns=\&quot;<a
href="http://www.w3.org/2000/svg\\\"><g">www.w3.org/2000/svg\"><g</a>
fill=\&quot;#000\&quot; fill-rule=\&quot;nonzero\&quot;&gt;&lt;path
d=\&quot;M2 4.5V3h16v1.5zM6.5 7.5V12h7V7.5h-7zM5.758 6h8.484c.419 0
.758.407.758.91v5.681c0 .502-.34.909-.758.909H5.758c-.419
0-.758-.407-.758-.91V6.91c0-.503.34-.91.758-.91zM2
16.5V15h16v1.5z\&quot;/&gt;&lt;/g&gt;&lt;/svg&gt;\n&quot;nnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-core/theme/icons/object-center.svgn// module
id = 68n// module chunks = 0“,”module.exports = "&lt;svg
width=\&quot;20\&quot; height=\&quot;20\&quot; xmlns=\&quot;<a
href="http://www.w3.org/2000/svg\\\"><g">www.w3.org/2000/svg\"><g</a>
fill=\&quot;#000\&quot; fill-rule=\&quot;nonzero\&quot;&gt;&lt;path
d=\&quot;M2 4.5V3h16v1.5zM2 7.5V6h5.674v1.5zM2 10.5V9h5.674v1.5zM2
13.5V12h5.674v1.5zM10.5 7.5V12h6V7.5h-6zM9.682 6h7.636c.377 0
.682.407.682.91v5.68c0 .503-.305.91-.682.91H9.682c-.377
0-.682-.407-.682-.91V6.91c0-.503.305-.91.682-.91zM2
16.5V15h16v1.5z\&quot;/&gt;&lt;/g&gt;&lt;/svg&gt;\n&quot;nnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-core/theme/icons/object-right.svgn// module
id = 69n// module chunks = 0“,”nvar content =
require(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./imagestyle.css&quot;);nnif(typeof
content === &#39;string&#39;) content = [[module.id, content,
&#39;&#39;]];nnvar transform;nvar insertInto;nnnnvar options =
{&quot;singleton&quot;:true,&quot;hmr&quot;:true}nnoptions.transform =
transformnoptions.insertInto = undefined;nnvar update =
require(&quot;!../../../node_modules/style-loader/lib/addStyles.js&quot;)(content,
options);nnif(content.locals) module.exports =
content.locals;nnif(module.hot)
{ntmodule.hot.accept(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./imagestyle.css&quot;,
function() {nttvar newContent =
require(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./imagestyle.css&quot;);nnttif(typeof
newContent === &#39;string&#39;) newContent = [[module.id, newContent,
&#39;&#39;]];nnttvar locals = (function(a, b) {ntttvar key, idx =
0;nntttfor(key in a) {nttttif(!b || <a href="key">a</a> !== <a
href="key">b</a>) return false;nttttidx++;nttt}nntttfor(key in b)
idx–;nntttreturn idx === 0;ntt}(content.locals,
newContent.locals));nnttif(!locals) throw new Error(&#39;Aborting CSS HMR
due to changed css-modules
locals.&#39;);nnttupdate(newContent);nt});nntmodule.hot.dispose(function()
{ update(); });n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-image/theme/imagestyle.cssn// module id = 70n// module chunks
= 0“,”module.exports = ":root{–ck-image-style-spacing:1.5em}.ck-content
.image-style-align-center,.ck-content .image-style-align-left,.ck-content
.image-style-align-right,.ck-content
.image-style-side{max-width:50%}.ck-content
.image-style-side{float:right;margin-left:var(–ck-image-style-spacing)}.ck-content
.image-style-align-left{float:left;margin-right:var(–ck-image-style-spacing)}.ck-content
.image-style-align-center{margin-left:auto;margin-right:auto}.ck-content
.image-style-align-right{float:right;margin-left:var(–ck-image-style-spacing)}&quot;nnn//////////////////n//
WEBPACK FOOTERn//
/workspace/ckeditor5/node_modules/postcss-loader/lib??ref–1-1!../ckeditor5-image/theme/imagestyle.cssn//
module id = 71n// module chunks = 0“,”nvar content =
require(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./link.css&quot;);nnif(typeof
content === &#39;string&#39;) content = [[module.id, content,
&#39;&#39;]];nnvar transform;nvar insertInto;nnnnvar options =
{&quot;singleton&quot;:true,&quot;hmr&quot;:true}nnoptions.transform =
transformnoptions.insertInto = undefined;nnvar update =
require(&quot;!../../../node_modules/style-loader/lib/addStyles.js&quot;)(content,
options);nnif(content.locals) module.exports =
content.locals;nnif(module.hot)
{ntmodule.hot.accept(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./link.css&quot;,
function() {nttvar newContent =
require(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./link.css&quot;);nnttif(typeof
newContent === &#39;string&#39;) newContent = [[module.id, newContent,
&#39;&#39;]];nnttvar locals = (function(a, b) {ntttvar key, idx =
0;nntttfor(key in a) {nttttif(!b || <a href="key">a</a> !== <a
href="key">b</a>) return false;nttttidx++;nttt}nntttfor(key in b)
idx–;nntttreturn idx === 0;ntt}(content.locals,
newContent.locals));nnttif(!locals) throw new Error(&#39;Aborting CSS HMR
due to changed css-modules
locals.&#39;);nnttupdate(newContent);nt});nntmodule.hot.dispose(function()
{ update(); });n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-link/theme/link.cssn// module id = 72n// module chunks =
0“,”module.exports = ".ck
.ck-link_selected{background:var(–ck-color-link-selected-background)}&quot;nnn//////////////////n//
WEBPACK FOOTERn//
/workspace/ckeditor5/node_modules/postcss-loader/lib??ref–1-1!../ckeditor5-link/theme/link.cssn//
module id = 73n// module chunks = 0“,”nvar content =
require(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./linkform.css&quot;);nnif(typeof
content === &#39;string&#39;) content = [[module.id, content,
&#39;&#39;]];nnvar transform;nvar insertInto;nnnnvar options =
{&quot;singleton&quot;:true,&quot;hmr&quot;:true}nnoptions.transform =
transformnoptions.insertInto = undefined;nnvar update =
require(&quot;!../../../node_modules/style-loader/lib/addStyles.js&quot;)(content,
options);nnif(content.locals) module.exports =
content.locals;nnif(module.hot)
{ntmodule.hot.accept(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./linkform.css&quot;,
function() {nttvar newContent =
require(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./linkform.css&quot;);nnttif(typeof
newContent === &#39;string&#39;) newContent = [[module.id, newContent,
&#39;&#39;]];nnttvar locals = (function(a, b) {ntttvar key, idx =
0;nntttfor(key in a) {nttttif(!b || <a href="key">a</a> !== <a
href="key">b</a>) return false;nttttidx++;nttt}nntttfor(key in b)
idx–;nntttreturn idx === 0;ntt}(content.locals,
newContent.locals));nnttif(!locals) throw new Error(&#39;Aborting CSS HMR
due to changed css-modules
locals.&#39;);nnttupdate(newContent);nt});nntmodule.hot.dispose(function()
{ update(); });n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-link/theme/linkform.cssn// module id = 74n// module chunks =
0“,”module.exports = ".ck.ck-link-form
.ck-labeled-input{display:inline-block}.ck.ck-link-form
.ck-label{display:none}.ck.ck-link-form{padding:var(–ck-spacing-standard)}.ck.ck-link-form:focus{outline:none}.ck.ck-link-form&gt;:not(:first-child){margin-left:var(–ck-spacing-standard)}&quot;nnn//////////////////n//
WEBPACK FOOTERn//
/workspace/ckeditor5/node_modules/postcss-loader/lib??ref–1-1!../ckeditor5-link/theme/linkform.cssn//
module id = 75n// module chunks = 0“,”module.exports = "&lt;svg
width=\&quot;20\&quot; height=\&quot;20\&quot; viewBox=\&quot;0 0 20
20\&quot; xmlns=\&quot;<a
href="http://www.w3.org/2000/svg\\\"><g">www.w3.org/2000/svg\"><g</a>
fill=\&quot;#000\&quot; fill-rule=\&quot;evenodd\&quot;&gt;&lt;path
d=\&quot;M11.077 15l.991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0
0 1-.217.206 5.251 5.251 0 0
1-8.503-5.955c.02-.095.06-.189.12-.274l1.147-1.639a.75.75 0 1 1
1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132
4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1
1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0
1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503
5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1
1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zM16.927 17.695l-1.414
1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1
1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414
1.414 1.415a.75.75 0 0 1-1.06
1.06l-1.415-1.414z\&quot;/&gt;&lt;/g&gt;&lt;/svg&gt;&quot;nnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-link/theme/icons/unlink.svgn// module id =
76n// module chunks = 0“,”module.exports = "&lt;svg viewBox=\&quot;0 0 20
20\&quot; xmlns=\&quot;<a
href="http://www.w3.org/2000/svg\\\"><path">www.w3.org/2000/svg\"><path</a>
d=\&quot;M7.3 17.37l-.061.088a1.518 1.518 0 0
1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1
.187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497
1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277
2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73
2.746-.435zM9.994 3.506L13.271
5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8
18.5L9.375 17H19v1.5H8z\&quot; fill=\&quot;#000\&quot;
fill-rule=\&quot;nonzero\&quot;/&gt;&lt;/svg&gt;\n&quot;nnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-core/theme/icons/pencil.svgn// module id =
77n// module chunks = 0“,”nvar content =
require(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./linkactions.css&quot;);nnif(typeof
content === &#39;string&#39;) content = [[module.id, content,
&#39;&#39;]];nnvar transform;nvar insertInto;nnnnvar options =
{&quot;singleton&quot;:true,&quot;hmr&quot;:true}nnoptions.transform =
transformnoptions.insertInto = undefined;nnvar update =
require(&quot;!../../../node_modules/style-loader/lib/addStyles.js&quot;)(content,
options);nnif(content.locals) module.exports =
content.locals;nnif(module.hot)
{ntmodule.hot.accept(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./linkactions.css&quot;,
function() {nttvar newContent =
require(&quot;!!../../../node_modules/postcss-loader/lib/index.js??ref–1-1!./linkactions.css&quot;);nnttif(typeof
newContent === &#39;string&#39;) newContent = [[module.id, newContent,
&#39;&#39;]];nnttvar locals = (function(a, b) {ntttvar key, idx =
0;nntttfor(key in a) {nttttif(!b || <a href="key">a</a> !== <a
href="key">b</a>) return false;nttttidx++;nttt}nntttfor(key in b)
idx–;nntttreturn idx === 0;ntt}(content.locals,
newContent.locals));nnttif(!locals) throw new Error(&#39;Aborting CSS HMR
due to changed css-modules
locals.&#39;);nnttupdate(newContent);nt});nntmodule.hot.dispose(function()
{ update(); });n}nnn//////////////////n// WEBPACK FOOTERn//
../ckeditor5-link/theme/linkactions.cssn// module id = 78n// module chunks
= 0“,”module.exports = ".ck.ck-link-actions
.ck-link-actions__preview{display:inline-block}.ck.ck-link-actions
.ck-link-actions__preview
.ck-button__label{overflow:hidden}.ck.ck-link-actions{padding:var(–ck-spacing-standard)}.ck.ck-link-actions
.ck-button.ck-link-actions__preview{padding-left:0;padding-right:0}.ck.ck-link-actions
.ck-button.ck-link-actions__preview,.ck.ck-link-actions
.ck-button.ck-link-actions__preview:active,.ck.ck-link-actions
.ck-button.ck-link-actions__preview:focus,.ck.ck-link-actions
.ck-button.ck-link-actions__preview:hover{background:none}.ck.ck-link-actions
.ck-button.ck-link-actions__preview:active{box-shadow:none}.ck.ck-link-actions
.ck-button.ck-link-actions__preview:focus
.ck-button__label{text-decoration:underline}.ck.ck-link-actions
.ck-button.ck-link-actions__preview .ck-button__label{padding:0
var(–ck-spacing-standard);color:var(–ck-color-link-default);text-overflow:ellipsis;cursor:pointer;max-width:var(–ck-input-text-width);min-width:3em;text-align:center}.ck.ck-link-actions
.ck-button.ck-link-actions__preview
.ck-button__label:hover{text-decoration:underline}.ck.ck-link-actions:focus{outline:none}.ck.ck-link-actions&gt;:not(:first-child){margin-left:var(–ck-spacing-standard)}&quot;nnn//////////////////n//
WEBPACK FOOTERn//
/workspace/ckeditor5/node_modules/postcss-loader/lib??ref–1-1!../ckeditor5-link/theme/linkactions.cssn//
module id = 79n// module chunks = 0“,”module.exports = "&lt;svg
width=\&quot;20\&quot; height=\&quot;20\&quot; viewBox=\&quot;0 0 20
20\&quot; xmlns=\&quot;<a
href="http://www.w3.org/2000/svg\\\"><path">www.w3.org/2000/svg\"><path</a>
d=\&quot;M11.077 15l.991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0
0 1-.217.206 5.251 5.251 0 0
1-8.503-5.955c.02-.095.06-.189.12-.274l1.147-1.639a.75.75 0 1 1
1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132
4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1
1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0
1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503
5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1
1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z\&quot;
fill=\&quot;#000\&quot;
fill-rule=\&quot;evenodd\&quot;/&gt;&lt;/svg&gt;&quot;nnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-link/theme/icons/link.svgn// module id =
80n// module chunks = 0“,”module.exports = "&lt;svg width=\&quot;20\&quot;
height=\&quot;20\&quot; viewBox=\&quot;0 0 20 20\&quot; xmlns=\&quot;<a
href="http://www.w3.org/2000/svg\\\"><path">www.w3.org/2000/svg\"><path</a>
d=\&quot;M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0
0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1
0-1.04 0H.302a2 2 0 1 1 3.995
0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244
1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0
1.5h-9.5a.75.75 0 0 1-.75-.75z\&quot; fill=\&quot;#454545\&quot;
fill-rule=\&quot;evenodd\&quot;/&gt;&lt;/svg&gt;&quot;nnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-list/theme/icons/numberedlist.svgn// module
id = 81n// module chunks = 0“,”module.exports = "&lt;svg
width=\&quot;20\&quot; height=\&quot;20\&quot; viewBox=\&quot;0 0 20
20\&quot; xmlns=\&quot;<a
href="http://www.w3.org/2000/svg\\\"><path">www.w3.org/2000/svg\"><path</a>
d=\&quot;M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0
0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777
1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75
0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0
1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966
0-1.75-.777-1.75-1.75z\&quot; fill=\&quot;#454545\&quot;
fill-rule=\&quot;evenodd\&quot;/&gt;&lt;/svg&gt;&quot;nnn//////////////////n//
WEBPACK FOOTERn// ../ckeditor5-list/theme/icons/bulletedlist.svgn// module
id = 82n// module chunks = 0“],”sourceRoot“:”“}</p>
</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.0.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

